function uA(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(r,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Zg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bx={exports:{}},su={},jx={exports:{}},os={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function mA(){if(rb)return os;rb=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.iterator;function j(z){return z===null||typeof z!="object"?null:(z=g&&z[g]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,C={};function S(z,se,G){this.props=z,this.context=se,this.refs=C,this.updater=G||w}S.prototype.isReactComponent={},S.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function E(){}E.prototype=S.prototype;function _(z,se,G){this.props=z,this.context=se,this.refs=C,this.updater=G||w}var k=_.prototype=new E;k.constructor=_,N(k,S.prototype),k.isPureReactComponent=!0;var T=Array.isArray,M=Object.prototype.hasOwnProperty,F={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function Z(z,se,G){var ee,V={},re=null,ae=null;if(se!=null)for(ee in se.ref!==void 0&&(ae=se.ref),se.key!==void 0&&(re=""+se.key),se)M.call(se,ee)&&!O.hasOwnProperty(ee)&&(V[ee]=se[ee]);var me=arguments.length-2;if(me===1)V.children=G;else if(1<me){for(var oe=Array(me),Pe=0;Pe<me;Pe++)oe[Pe]=arguments[Pe+2];V.children=oe}if(z&&z.defaultProps)for(ee in me=z.defaultProps,me)V[ee]===void 0&&(V[ee]=me[ee]);return{$$typeof:t,type:z,key:re,ref:ae,props:V,_owner:F.current}}function q(z,se){return{$$typeof:t,type:z.type,key:se,ref:z.ref,props:z.props,_owner:z._owner}}function $(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function X(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(G){return se[G]})}var I=/\/+/g;function B(z,se){return typeof z=="object"&&z!==null&&z.key!=null?X(""+z.key):se.toString(36)}function te(z,se,G,ee,V){var re=typeof z;(re==="undefined"||re==="boolean")&&(z=null);var ae=!1;if(z===null)ae=!0;else switch(re){case"string":case"number":ae=!0;break;case"object":switch(z.$$typeof){case t:case s:ae=!0}}if(ae)return ae=z,V=V(ae),z=ee===""?"."+B(ae,0):ee,T(V)?(G="",z!=null&&(G=z.replace(I,"$&/")+"/"),te(V,se,G,"",function(Pe){return Pe})):V!=null&&($(V)&&(V=q(V,G+(!V.key||ae&&ae.key===V.key?"":(""+V.key).replace(I,"$&/")+"/")+z)),se.push(V)),1;if(ae=0,ee=ee===""?".":ee+":",T(z))for(var me=0;me<z.length;me++){re=z[me];var oe=ee+B(re,me);ae+=te(re,se,G,oe,V)}else if(oe=j(z),typeof oe=="function")for(z=oe.call(z),me=0;!(re=z.next()).done;)re=re.value,oe=ee+B(re,me++),ae+=te(re,se,G,oe,V);else if(re==="object")throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ae}function ue(z,se,G){if(z==null)return z;var ee=[],V=0;return te(z,ee,"","",function(re){return se.call(G,re,V++)}),ee}function Y(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(G){(z._status===0||z._status===-1)&&(z._status=1,z._result=G)},function(G){(z._status===0||z._status===-1)&&(z._status=2,z._result=G)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var ce={current:null},U={transition:null},ne={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:U,ReactCurrentOwner:F};function Q(){throw Error("act(...) is not supported in production builds of React.")}return os.Children={map:ue,forEach:function(z,se,G){ue(z,function(){se.apply(this,arguments)},G)},count:function(z){var se=0;return ue(z,function(){se++}),se},toArray:function(z){return ue(z,function(se){return se})||[]},only:function(z){if(!$(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},os.Component=S,os.Fragment=n,os.Profiler=o,os.PureComponent=_,os.StrictMode=r,os.Suspense=f,os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,os.act=Q,os.cloneElement=function(z,se,G){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var ee=N({},z.props),V=z.key,re=z.ref,ae=z._owner;if(se!=null){if(se.ref!==void 0&&(re=se.ref,ae=F.current),se.key!==void 0&&(V=""+se.key),z.type&&z.type.defaultProps)var me=z.type.defaultProps;for(oe in se)M.call(se,oe)&&!O.hasOwnProperty(oe)&&(ee[oe]=se[oe]===void 0&&me!==void 0?me[oe]:se[oe])}var oe=arguments.length-2;if(oe===1)ee.children=G;else if(1<oe){me=Array(oe);for(var Pe=0;Pe<oe;Pe++)me[Pe]=arguments[Pe+2];ee.children=me}return{$$typeof:t,type:z.type,key:V,ref:re,props:ee,_owner:ae}},os.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:c,_context:z},z.Consumer=z},os.createElement=Z,os.createFactory=function(z){var se=Z.bind(null,z);return se.type=z,se},os.createRef=function(){return{current:null}},os.forwardRef=function(z){return{$$typeof:h,render:z}},os.isValidElement=$,os.lazy=function(z){return{$$typeof:x,_payload:{_status:-1,_result:z},_init:Y}},os.memo=function(z,se){return{$$typeof:v,type:z,compare:se===void 0?null:se}},os.startTransition=function(z){var se=U.transition;U.transition={};try{z()}finally{U.transition=se}},os.unstable_act=Q,os.useCallback=function(z,se){return ce.current.useCallback(z,se)},os.useContext=function(z){return ce.current.useContext(z)},os.useDebugValue=function(){},os.useDeferredValue=function(z){return ce.current.useDeferredValue(z)},os.useEffect=function(z,se){return ce.current.useEffect(z,se)},os.useId=function(){return ce.current.useId()},os.useImperativeHandle=function(z,se,G){return ce.current.useImperativeHandle(z,se,G)},os.useInsertionEffect=function(z,se){return ce.current.useInsertionEffect(z,se)},os.useLayoutEffect=function(z,se){return ce.current.useLayoutEffect(z,se)},os.useMemo=function(z,se){return ce.current.useMemo(z,se)},os.useReducer=function(z,se,G){return ce.current.useReducer(z,se,G)},os.useRef=function(z){return ce.current.useRef(z)},os.useState=function(z){return ce.current.useState(z)},os.useSyncExternalStore=function(z,se,G){return ce.current.useSyncExternalStore(z,se,G)},os.useTransition=function(){return ce.current.useTransition()},os.version="18.3.1",os}var ib;function Kg(){return ib||(ib=1,jx.exports=mA()),jx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function hA(){if(ob)return su;ob=1;var t=Kg(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,v){var x,g={},j=null,w=null;v!==void 0&&(j=""+v),f.key!==void 0&&(j=""+f.key),f.ref!==void 0&&(w=f.ref);for(x in f)r.call(f,x)&&!c.hasOwnProperty(x)&&(g[x]=f[x]);if(h&&h.defaultProps)for(x in f=h.defaultProps,f)g[x]===void 0&&(g[x]=f[x]);return{$$typeof:s,type:h,key:j,ref:w,props:g,_owner:o.current}}return su.Fragment=n,su.jsx=u,su.jsxs=u,su}var lb;function pA(){return lb||(lb=1,bx.exports=hA()),bx.exports}var e=pA(),sh={},Nx={exports:{}},xa={},wx={exports:{}},Cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function fA(){return cb||(cb=1,(function(t){function s(U,ne){var Q=U.length;U.push(ne);e:for(;0<Q;){var z=Q-1>>>1,se=U[z];if(0<o(se,ne))U[z]=ne,U[Q]=se,Q=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ne=U[0],Q=U.pop();if(Q!==ne){U[0]=Q;e:for(var z=0,se=U.length,G=se>>>1;z<G;){var ee=2*(z+1)-1,V=U[ee],re=ee+1,ae=U[re];if(0>o(V,Q))re<se&&0>o(ae,V)?(U[z]=ae,U[re]=Q,z=re):(U[z]=V,U[ee]=Q,z=ee);else if(re<se&&0>o(ae,Q))U[z]=ae,U[re]=Q,z=re;else break e}}return ne}function o(U,ne){var Q=U.sortIndex-ne.sortIndex;return Q!==0?Q:U.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],v=[],x=1,g=null,j=3,w=!1,N=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(U){for(var ne=n(v);ne!==null;){if(ne.callback===null)r(v);else if(ne.startTime<=U)r(v),ne.sortIndex=ne.expirationTime,s(f,ne);else break;ne=n(v)}}function T(U){if(C=!1,k(U),!N)if(n(f)!==null)N=!0,Y(M);else{var ne=n(v);ne!==null&&ce(T,ne.startTime-U)}}function M(U,ne){N=!1,C&&(C=!1,E(Z),Z=-1),w=!0;var Q=j;try{for(k(ne),g=n(f);g!==null&&(!(g.expirationTime>ne)||U&&!X());){var z=g.callback;if(typeof z=="function"){g.callback=null,j=g.priorityLevel;var se=z(g.expirationTime<=ne);ne=t.unstable_now(),typeof se=="function"?g.callback=se:g===n(f)&&r(f),k(ne)}else r(f);g=n(f)}if(g!==null)var G=!0;else{var ee=n(v);ee!==null&&ce(T,ee.startTime-ne),G=!1}return G}finally{g=null,j=Q,w=!1}}var F=!1,O=null,Z=-1,q=5,$=-1;function X(){return!(t.unstable_now()-$<q)}function I(){if(O!==null){var U=t.unstable_now();$=U;var ne=!0;try{ne=O(!0,U)}finally{ne?B():(F=!1,O=null)}}else F=!1}var B;if(typeof _=="function")B=function(){_(I)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ue=te.port2;te.port1.onmessage=I,B=function(){ue.postMessage(null)}}else B=function(){S(I,0)};function Y(U){O=U,F||(F=!0,B())}function ce(U,ne){Z=S(function(){U(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,Y(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(U){switch(j){case 1:case 2:case 3:var ne=3;break;default:ne=j}var Q=j;j=ne;try{return U()}finally{j=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=j;j=U;try{return ne()}finally{j=Q}},t.unstable_scheduleCallback=function(U,ne,Q){var z=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?z+Q:z):Q=z,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,U={id:x++,callback:ne,priorityLevel:U,startTime:Q,expirationTime:se,sortIndex:-1},Q>z?(U.sortIndex=Q,s(v,U),n(f)===null&&U===n(v)&&(C?(E(Z),Z=-1):C=!0,ce(T,Q-z))):(U.sortIndex=se,s(f,U),N||w||(N=!0,Y(M))),U},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(U){var ne=j;return function(){var Q=j;j=ne;try{return U.apply(this,arguments)}finally{j=Q}}}})(Cx)),Cx}var db;function xA(){return db||(db=1,wx.exports=fA()),wx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function gA(){if(ub)return xa;ub=1;var t=Kg(),s=xA();function n(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function c(a,l){u(a,l),u(a+"Capture",l)}function u(a,l){for(o[a]=l,a=0;a<l.length;a++)r.add(l[a])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},g={};function j(a){return f.call(g,a)?!0:f.call(x,a)?!1:v.test(a)?g[a]=!0:(x[a]=!0,!1)}function w(a,l,p,b){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return b?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function N(a,l,p,b){if(l===null||typeof l>"u"||w(a,l,p,b))return!0;if(b)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,p,b,P,D,H){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=b,this.attributeNamespace=P,this.mustUseProperty=p,this.propertyName=a,this.type=l,this.sanitizeURL=D,this.removeEmptyString=H}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];S[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function _(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(E,_);S[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(E,_);S[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(E,_);S[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function k(a,l,p,b){var P=S.hasOwnProperty(l)?S[l]:null;(P!==null?P.type!==0:b||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(N(l,p,P,b)&&(p=null),b||P===null?j(l)&&(p===null?a.removeAttribute(l):a.setAttribute(l,""+p)):P.mustUseProperty?a[P.propertyName]=p===null?P.type===3?!1:"":p:(l=P.attributeName,b=P.attributeNamespace,p===null?a.removeAttribute(l):(P=P.type,p=P===3||P===4&&p===!0?"":""+p,b?a.setAttributeNS(b,l,p):a.setAttribute(l,p))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),F=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),X=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),U=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Object.assign,z;function se(a){if(z===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);z=l&&l[1]||""}return`
`+z+a}var G=!1;function ee(a,l){if(!a||G)return"";G=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Te){var b=Te}Reflect.construct(a,[],l)}else{try{l.call()}catch(Te){b=Te}a.call(l.prototype)}else{try{throw Error()}catch(Te){b=Te}a()}}catch(Te){if(Te&&b&&typeof Te.stack=="string"){for(var P=Te.stack.split(`
`),D=b.stack.split(`
`),H=P.length-1,ie=D.length-1;1<=H&&0<=ie&&P[H]!==D[ie];)ie--;for(;1<=H&&0<=ie;H--,ie--)if(P[H]!==D[ie]){if(H!==1||ie!==1)do if(H--,ie--,0>ie||P[H]!==D[ie]){var ge=`
`+P[H].replace(" at new "," at ");return a.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",a.displayName)),ge}while(1<=H&&0<=ie);break}}}finally{G=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?se(a):""}function V(a){switch(a.tag){case 5:return se(a.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return a=ee(a.type,!1),a;case 11:return a=ee(a.type.render,!1),a;case 1:return a=ee(a.type,!0),a;default:return""}}function re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case O:return"Fragment";case F:return"Portal";case q:return"Profiler";case Z:return"StrictMode";case B:return"Suspense";case te:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case X:return(a.displayName||"Context")+".Consumer";case $:return(a._context.displayName||"Context")+".Provider";case I:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ue:return l=a.displayName||null,l!==null?l:re(a.type)||"Memo";case Y:l=a._payload,a=a._init;try{return re(a(l))}catch{}}return null}function ae(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(l);case 8:return l===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function me(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function oe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Pe(a){var l=oe(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),b=""+a[l];if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var P=p.get,D=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return P.call(this)},set:function(H){b=""+H,D.call(this,H)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(H){b=""+H},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function We(a){a._valueTracker||(a._valueTracker=Pe(a))}function Je(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),b="";return a&&(b=oe(a)?a.checked?"true":"false":a.value),a=b,a!==p?(l.setValue(a),!0):!1}function tt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function nt(a,l){var p=l.checked;return Q({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function ct(a,l){var p=l.defaultValue==null?"":l.defaultValue,b=l.checked!=null?l.checked:l.defaultChecked;p=me(l.value!=null?l.value:p),a._wrapperState={initialChecked:b,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function wt(a,l){l=l.checked,l!=null&&k(a,"checked",l,!1)}function pt(a,l){wt(a,l);var p=me(l.value),b=l.type;if(p!=null)b==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(b==="submit"||b==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Lt(a,l.type,p):l.hasOwnProperty("defaultValue")&&Lt(a,l.type,me(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function It(a,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var b=l.type;if(!(b!=="submit"&&b!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,p||l===a.value||(a.value=l),a.defaultValue=l}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function Lt(a,l,p){(l!=="number"||tt(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var J=Array.isArray;function ve(a,l,p,b){if(a=a.options,l){l={};for(var P=0;P<p.length;P++)l["$"+p[P]]=!0;for(p=0;p<a.length;p++)P=l.hasOwnProperty("$"+a[p].value),a[p].selected!==P&&(a[p].selected=P),P&&b&&(a[p].defaultSelected=!0)}else{for(p=""+me(p),l=null,P=0;P<a.length;P++){if(a[P].value===p){a[P].selected=!0,b&&(a[P].defaultSelected=!0);return}l!==null||a[P].disabled||(l=a[P])}l!==null&&(l.selected=!0)}}function xe(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ve(a,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(n(92));if(J(p)){if(1<p.length)throw Error(n(93));p=p[0]}l=p}l==null&&(l=""),p=l}a._wrapperState={initialValue:me(p)}}function de(a,l){var p=me(l.value),b=me(l.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),l.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),b!=null&&(a.defaultValue=""+b)}function Ne(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Be(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Be(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var gt,pe=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,b,P){MSApp.execUnsafeLocalFunction(function(){return a(l,p,b,P)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(gt=gt||document.createElement("div"),gt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=gt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function $e(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var Xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];Object.keys(Xe).forEach(function(a){mt.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Xe[l]=Xe[a]})});function fe(a,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Xe.hasOwnProperty(a)&&Xe[a]?(""+l).trim():l+"px"}function Ye(a,l){a=a.style;for(var p in l)if(l.hasOwnProperty(p)){var b=p.indexOf("--")===0,P=fe(p,l[p],b);p==="float"&&(p="cssFloat"),b?a.setProperty(p,P):a[p]=P}}var dt=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(a,l){if(l){if(dt[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function ht(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ft=null;function ms(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var hs=null,Ps=null,Yt=null;function Gs(a){if(a=_i(a)){if(typeof hs!="function")throw Error(n(280));var l=a.stateNode;l&&(l=gc(l),hs(a.stateNode,a.type,l))}}function Ct(a){Ps?Yt?Yt.push(a):Yt=[a]:Ps=a}function Mt(){if(Ps){var a=Ps,l=Yt;if(Yt=Ps=null,Gs(a),l)for(a=0;a<l.length;a++)Gs(l[a])}}function Wt(a,l){return a(l)}function Es(){}var xs=!1;function fs(a,l,p){if(xs)return a(l,p);xs=!0;try{return Wt(a,l,p)}finally{xs=!1,(Ps!==null||Yt!==null)&&(Es(),Mt())}}function Ee(a,l){var p=a.stateNode;if(p===null)return null;var b=gc(p);if(b===null)return null;p=b[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,l,typeof p));return p}var rt=!1;if(h)try{var it={};Object.defineProperty(it,"passive",{get:function(){rt=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{rt=!1}function we(a,l,p,b,P,D,H,ie,ge){var Te=Array.prototype.slice.call(arguments,3);try{l.apply(p,Te)}catch(Qe){this.onError(Qe)}}var Fe=!1,ze=null,$t=!1,Bt=null,ks={onError:function(a){Fe=!0,ze=a}};function as(a,l,p,b,P,D,H,ie,ge){Fe=!1,ze=null,we.apply(ks,arguments)}function ys(a,l,p,b,P,D,H,ie,ge){if(as.apply(this,arguments),Fe){if(Fe){var Te=ze;Fe=!1,ze=null}else throw Error(n(198));$t||($t=!0,Bt=Te)}}function Cs(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function en(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function un(a){if(Cs(a)!==a)throw Error(n(188))}function In(a){var l=a.alternate;if(!l){if(l=Cs(a),l===null)throw Error(n(188));return l!==a?null:a}for(var p=a,b=l;;){var P=p.return;if(P===null)break;var D=P.alternate;if(D===null){if(b=P.return,b!==null){p=b;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===p)return un(P),a;if(D===b)return un(P),l;D=D.sibling}throw Error(n(188))}if(p.return!==b.return)p=P,b=D;else{for(var H=!1,ie=P.child;ie;){if(ie===p){H=!0,p=P,b=D;break}if(ie===b){H=!0,b=P,p=D;break}ie=ie.sibling}if(!H){for(ie=D.child;ie;){if(ie===p){H=!0,p=D,b=P;break}if(ie===b){H=!0,b=D,p=P;break}ie=ie.sibling}if(!H)throw Error(n(189))}}if(p.alternate!==b)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:l}function Yo(a){return a=In(a),a!==null?Ki(a):null}function Ki(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ki(a);if(l!==null)return l;a=a.sibling}return null}var Kl=s.unstable_scheduleCallback,Jo=s.unstable_cancelCallback,gd=s.unstable_shouldYield,le=s.unstable_requestPaint,De=s.unstable_now,qt=s.unstable_getCurrentPriorityLevel,bs=s.unstable_ImmediatePriority,Zt=s.unstable_UserBlockingPriority,Zs=s.unstable_NormalPriority,Ut=s.unstable_LowPriority,mn=s.unstable_IdlePriority,rs=null,St=null;function Ts(a){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(rs,a,void 0,(a.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:Ga,ds=Math.log,zn=Math.LN2;function Ga(a){return a>>>=0,a===0?32:31-(ds(a)/zn|0)|0}var fr=64,Qi=4194304;function Ht(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ls(a,l){var p=a.pendingLanes;if(p===0)return 0;var b=0,P=a.suspendedLanes,D=a.pingedLanes,H=p&268435455;if(H!==0){var ie=H&~P;ie!==0?b=Ht(ie):(D&=H,D!==0&&(b=Ht(D)))}else H=p&~P,H!==0?b=Ht(H):D!==0&&(b=Ht(D));if(b===0)return 0;if(l!==0&&l!==b&&(l&P)===0&&(P=b&-b,D=l&-l,P>=D||P===16&&(D&4194240)!==0))return l;if((b&4)!==0&&(b|=p&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=b;0<l;)p=31-ft(l),P=1<<p,b|=a[p],l&=~P;return b}function vd(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ql(a,l){for(var p=a.suspendedLanes,b=a.pingedLanes,P=a.expirationTimes,D=a.pendingLanes;0<D;){var H=31-ft(D),ie=1<<H,ge=P[H];ge===-1?((ie&p)===0||(ie&b)!==0)&&(P[H]=vd(ie,l)):ge<=l&&(a.expiredLanes|=ie),D&=~ie}}function Bn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ku(){var a=fr;return fr<<=1,(fr&4194240)===0&&(fr=64),a}function Xi(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function Ea(a,l,p){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ft(l),a[l]=p}function tn(a,l){var p=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var b=a.eventTimes;for(a=a.expirationTimes;0<p;){var P=31-ft(p),D=1<<P;l[P]=0,b[P]=-1,a[P]=-1,p&=~D}}function xr(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var b=31-ft(p),P=1<<b;P&l|a[b]&l&&(a[b]|=l),p&=~P}}var ps=0;function Yi(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Xl,xi,Yl,Jl,el,tl=!1,Ji=[],ka=null,gr=null,Za=null,sl=new Map,zt=new Map,yn=[],Ds="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yd(a,l){switch(a){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":sl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(l.pointerId)}}function gi(a,l,p,b,P,D){return a===null||a.nativeEvent!==D?(a={blockedOn:l,domEventName:p,eventSystemFlags:b,nativeEvent:D,targetContainers:[P]},l!==null&&(l=_i(l),l!==null&&xi(l)),a):(a.eventSystemFlags|=b,l=a.targetContainers,P!==null&&l.indexOf(P)===-1&&l.push(P),a)}function bd(a,l,p,b,P){switch(l){case"focusin":return ka=gi(ka,a,l,p,b,P),!0;case"dragenter":return gr=gi(gr,a,l,p,b,P),!0;case"mouseover":return Za=gi(Za,a,l,p,b,P),!0;case"pointerover":var D=P.pointerId;return sl.set(D,gi(sl.get(D)||null,a,l,p,b,P)),!0;case"gotpointercapture":return D=P.pointerId,zt.set(D,gi(zt.get(D)||null,a,l,p,b,P)),!0}return!1}function ec(a){var l=Si(a.target);if(l!==null){var p=Cs(l);if(p!==null){if(l=p.tag,l===13){if(l=en(p),l!==null){a.blockedOn=l,el(a.priority,function(){Yl(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ka(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=nc(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var b=new p.constructor(p.type,p);Ft=b,p.target.dispatchEvent(b),Ft=null}else return l=_i(p),l!==null&&xi(l),a.blockedOn=p,!1;l.shift()}return!0}function tc(a,l,p){Ka(a)&&p.delete(l)}function nl(){tl=!1,ka!==null&&Ka(ka)&&(ka=null),gr!==null&&Ka(gr)&&(gr=null),Za!==null&&Ka(Za)&&(Za=null),sl.forEach(tc),zt.forEach(tc)}function Ks(a,l){a.blockedOn===l&&(a.blockedOn=null,tl||(tl=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nl)))}function Ta(a){function l(P){return Ks(P,a)}if(0<Ji.length){Ks(Ji[0],a);for(var p=1;p<Ji.length;p++){var b=Ji[p];b.blockedOn===a&&(b.blockedOn=null)}}for(ka!==null&&Ks(ka,a),gr!==null&&Ks(gr,a),Za!==null&&Ks(Za,a),sl.forEach(l),zt.forEach(l),p=0;p<yn.length;p++)b=yn[p],b.blockedOn===a&&(b.blockedOn=null);for(;0<yn.length&&(p=yn[0],p.blockedOn===null);)ec(p),p.blockedOn===null&&yn.shift()}var vi=T.ReactCurrentBatchConfig,al=!0;function ef(a,l,p,b){var P=ps,D=vi.transition;vi.transition=null;try{ps=1,rl(a,l,p,b)}finally{ps=P,vi.transition=D}}function Qu(a,l,p,b){var P=ps,D=vi.transition;vi.transition=null;try{ps=4,rl(a,l,p,b)}finally{ps=P,vi.transition=D}}function rl(a,l,p,b){if(al){var P=nc(a,l,p,b);if(P===null)i(a,l,b,sc,p),yd(a,b);else if(bd(P,a,l,p,b))b.stopPropagation();else if(yd(a,b),l&4&&-1<Ds.indexOf(a)){for(;P!==null;){var D=_i(P);if(D!==null&&Xl(D),D=nc(a,l,p,b),D===null&&i(a,l,b,sc,p),D===P)break;P=D}P!==null&&b.stopPropagation()}else i(a,l,b,null,p)}}var sc=null;function nc(a,l,p,b){if(sc=null,a=ms(b),a=Si(a),a!==null)if(l=Cs(a),l===null)a=null;else if(p=l.tag,p===13){if(a=en(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return sc=a,null}function ls(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qt()){case bs:return 1;case Zt:return 4;case Zs:case Ut:return 16;case mn:return 536870912;default:return 16}default:return 16}}var $r=null,Qn=null,zr=null;function jd(){if(zr)return zr;var a,l=Qn,p=l.length,b,P="value"in $r?$r.value:$r.textContent,D=P.length;for(a=0;a<p&&l[a]===P[a];a++);var H=p-a;for(b=1;b<=H&&l[p-b]===P[D-b];b++);return zr=P.slice(a,1<b?1-b:void 0)}function ac(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function eo(){return!0}function Xu(){return!1}function Un(a){function l(p,b,P,D,H){this._reactName=p,this._targetInst=P,this.type=b,this.nativeEvent=D,this.target=H,this.currentTarget=null;for(var ie in a)a.hasOwnProperty(ie)&&(p=a[ie],this[ie]=p?p(D):D[ie]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?eo:Xu,this.isPropagationStopped=Xu,this}return Q(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),l}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nd=Un(to),yi=Q({},to,{view:0,detail:0}),tf=Un(yi),ca,wd,so,Da=Q({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==so&&(so&&a.type==="mousemove"?(ca=a.screenX-so.screenX,wd=a.screenY-so.screenY):wd=ca=0,so=a),ca)},movementY:function(a){return"movementY"in a?a.movementY:wd}}),Cd=Un(Da),Yu=Q({},Da,{dataTransfer:0}),Sd=Un(Yu),sf=Q({},yi,{relatedTarget:0}),rc=Un(sf),Ju=Q({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),nf=Un(Ju),af=Q({},to,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),_d=Un(af),rf=Q({},to,{data:0}),Ad=Un(rf),em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function of(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=bi[a])?!!l[a]:!1}function ji(){return of}var da=Q({},yi,{key:function(a){if(a.key){var l=em[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ac(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ic[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(a){return a.type==="keypress"?ac(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ac(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),tm=Un(da),sm=Q({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nm=Un(sm),Pd=Q({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),Ed=Un(Pd),lf=Q({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Un(lf),am=Q({},Da,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),df=Un(am),Ia=[9,13,27,32],Br=h&&"CompositionEvent"in window,il=null;h&&"documentMode"in document&&(il=document.documentMode);var vr=h&&"TextEvent"in window&&!il,rm=h&&(!Br||il&&8<il&&11>=il),Ni=" ",im=!1;function no(a,l){switch(a){case"keyup":return Ia.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yr=!1;function uf(a,l){switch(a){case"compositionend":return kd(l);case"keypress":return l.which!==32?null:(im=!0,Ni);case"textInput":return a=l.data,a===Ni&&im?null:a;default:return null}}function Ur(a,l){if(yr)return a==="compositionend"||!Br&&no(a,l)?(a=jd(),zr=Qn=$r=null,yr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return rm&&l.locale!=="ko"?null:l.data;default:return null}}var oc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!oc[a.type]:l==="textarea"}function lc(a,l,p,b){Ct(b),l=y(l,"onChange"),0<l.length&&(p=new Nd("onChange","change",null,p,b),a.push({event:p,listeners:l}))}var ol=null,Xn=null;function mf(a){$d(a,0)}function br(a){var l=Ai(a);if(Je(l))return a}function hf(a,l){if(a==="change")return l}var Qa=!1;if(h){var ao;if(h){var cc="oninput"in document;if(!cc){var dc=document.createElement("div");dc.setAttribute("oninput","return;"),cc=typeof dc.oninput=="function"}ao=cc}else ao=!1;Qa=ao&&(!document.documentMode||9<document.documentMode)}function ll(){ol&&(ol.detachEvent("onpropertychange",uc),Xn=ol=null)}function uc(a){if(a.propertyName==="value"&&br(Xn)){var l=[];lc(l,Xn,a,ms(a)),fs(mf,l)}}function mc(a,l,p){a==="focusin"?(ll(),ol=l,Xn=p,ol.attachEvent("onpropertychange",uc)):a==="focusout"&&ll()}function ro(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return br(Xn)}function hc(a,l){if(a==="click")return br(l)}function Td(a,l){if(a==="input"||a==="change")return br(l)}function lm(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Ma=typeof Object.is=="function"?Object.is:lm;function Vr(a,l){if(Ma(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),b=Object.keys(l);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var P=p[b];if(!f.call(l,P)||!Ma(a[P],l[P]))return!1}return!0}function cm(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Dd(a,l){var p=cm(a);a=0;for(var b;p;){if(p.nodeType===3){if(b=a+p.textContent.length,a<=l&&b>=l)return{node:p,offset:l-a};a=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=cm(p)}}function dm(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?dm(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Id(){for(var a=window,l=tt();l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=tt(a.document)}return l}function Md(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Xa(a){var l=Id(),p=a.focusedElem,b=a.selectionRange;if(l!==p&&p&&p.ownerDocument&&dm(p.ownerDocument.documentElement,p)){if(b!==null&&Md(p)){if(l=b.start,a=b.end,a===void 0&&(a=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(a,p.value.length);else if(a=(l=p.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var P=p.textContent.length,D=Math.min(b.start,P);b=b.end===void 0?D:Math.min(b.end,P),!a.extend&&D>b&&(P=b,b=D,D=P),P=Dd(p,D);var H=Dd(p,b);P&&H&&(a.rangeCount!==1||a.anchorNode!==P.node||a.anchorOffset!==P.offset||a.focusNode!==H.node||a.focusOffset!==H.offset)&&(l=l.createRange(),l.setStart(P.node,P.offset),a.removeAllRanges(),D>b?(a.addRange(l),a.extend(H.node,H.offset)):(l.setEnd(H.node,H.offset),a.addRange(l)))}}for(l=[],a=p;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)a=l[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var pc=h&&"documentMode"in document&&11>=document.documentMode,io=null,oo=null,cl=null,fc=!1;function um(a,l,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;fc||io==null||io!==tt(b)||(b=io,"selectionStart"in b&&Md(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),cl&&Vr(cl,b)||(cl=b,b=y(oo,"onSelect"),0<b.length&&(l=new Nd("onSelect","select",null,l,p),a.push({event:l,listeners:b}),l.target=io)))}function Hr(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var lo={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionend:Hr("Transition","TransitionEnd")},qr={},Rd={};h&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function dl(a){if(qr[a])return qr[a];if(!lo[a])return a;var l=lo[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in Rd)return qr[a]=l[p];return a}var mm=dl("animationend"),Ya=dl("animationiteration"),Od=dl("animationstart"),Ld=dl("transitionend"),co=new Map,hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(a,l){co.set(a,l),c(l,[a])}for(var wi=0;wi<hm.length;wi++){var xc=hm[wi],pm=xc.toLowerCase(),pf=xc[0].toUpperCase()+xc.slice(1);Ra(pm,"on"+pf)}Ra(mm,"onAnimationEnd"),Ra(Ya,"onAnimationIteration"),Ra(Od,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(Ld,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fm=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function Fd(a,l,p){var b=a.type||"unknown-event";a.currentTarget=p,ys(b,l,void 0,a),a.currentTarget=null}function $d(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var b=a[p],P=b.event;b=b.listeners;e:{var D=void 0;if(l)for(var H=b.length-1;0<=H;H--){var ie=b[H],ge=ie.instance,Te=ie.currentTarget;if(ie=ie.listener,ge!==D&&P.isPropagationStopped())break e;Fd(P,ie,Te),D=ge}else for(H=0;H<b.length;H++){if(ie=b[H],ge=ie.instance,Te=ie.currentTarget,ie=ie.listener,ge!==D&&P.isPropagationStopped())break e;Fd(P,ie,Te),D=ge}}}if($t)throw a=Bt,$t=!1,Bt=null,a}function Is(a,l){var p=l[fo];p===void 0&&(p=l[fo]=new Set);var b=a+"__bubble";p.has(b)||(xm(l,a,2,!1),p.add(b))}function zd(a,l,p){var b=0;l&&(b|=4),xm(p,a,b,l)}var ul="_reactListening"+Math.random().toString(36).slice(2);function mo(a){if(!a[ul]){a[ul]=!0,r.forEach(function(p){p!=="selectionchange"&&(fm.has(p)||zd(p,!1,a),zd(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[ul]||(l[ul]=!0,zd("selectionchange",!1,l))}}function xm(a,l,p,b){switch(ls(l)){case 1:var P=ef;break;case 4:P=Qu;break;default:P=rl}p=P.bind(null,l,p,a),P=void 0,!rt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(P=!0),b?P!==void 0?a.addEventListener(l,p,{capture:!0,passive:P}):a.addEventListener(l,p,!0):P!==void 0?a.addEventListener(l,p,{passive:P}):a.addEventListener(l,p,!1)}function i(a,l,p,b,P){var D=b;if((l&1)===0&&(l&2)===0&&b!==null)e:for(;;){if(b===null)return;var H=b.tag;if(H===3||H===4){var ie=b.stateNode.containerInfo;if(ie===P||ie.nodeType===8&&ie.parentNode===P)break;if(H===4)for(H=b.return;H!==null;){var ge=H.tag;if((ge===3||ge===4)&&(ge=H.stateNode.containerInfo,ge===P||ge.nodeType===8&&ge.parentNode===P))return;H=H.return}for(;ie!==null;){if(H=Si(ie),H===null)return;if(ge=H.tag,ge===5||ge===6){b=D=H;continue e}ie=ie.parentNode}}b=b.return}fs(function(){var Te=D,Qe=ms(p),et=[];e:{var Ze=co.get(a);if(Ze!==void 0){var ut=Nd,vt=a;switch(a){case"keypress":if(ac(p)===0)break e;case"keydown":case"keyup":ut=tm;break;case"focusin":vt="focus",ut=rc;break;case"focusout":vt="blur",ut=rc;break;case"beforeblur":case"afterblur":ut=rc;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Ed;break;case mm:case Ya:case Od:ut=nf;break;case Ld:ut=cf;break;case"scroll":ut=tf;break;case"wheel":ut=df;break;case"copy":case"cut":case"paste":ut=_d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=nm}var yt=(l&4)!==0,on=!yt&&a==="scroll",_e=yt?Ze!==null?Ze+"Capture":null:Ze;yt=[];for(var be=Te,Ae;be!==null;){Ae=be;var st=Ae.stateNode;if(Ae.tag===5&&st!==null&&(Ae=st,_e!==null&&(st=Ee(be,_e),st!=null&&yt.push(d(be,st,Ae)))),on)break;be=be.return}0<yt.length&&(Ze=new ut(Ze,vt,null,p,Qe),et.push({event:Ze,listeners:yt}))}}if((l&7)===0){e:{if(Ze=a==="mouseover"||a==="pointerover",ut=a==="mouseout"||a==="pointerout",Ze&&p!==Ft&&(vt=p.relatedTarget||p.fromElement)&&(Si(vt)||vt[Ss]))break e;if((ut||Ze)&&(Ze=Qe.window===Qe?Qe:(Ze=Qe.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,ut?(vt=p.relatedTarget||p.toElement,ut=Te,vt=vt?Si(vt):null,vt!==null&&(on=Cs(vt),vt!==on||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(ut=null,vt=Te),ut!==vt)){if(yt=Cd,st="onMouseLeave",_e="onMouseEnter",be="mouse",(a==="pointerout"||a==="pointerover")&&(yt=nm,st="onPointerLeave",_e="onPointerEnter",be="pointer"),on=ut==null?Ze:Ai(ut),Ae=vt==null?Ze:Ai(vt),Ze=new yt(st,be+"leave",ut,p,Qe),Ze.target=on,Ze.relatedTarget=Ae,st=null,Si(Qe)===Te&&(yt=new yt(_e,be+"enter",vt,p,Qe),yt.target=Ae,yt.relatedTarget=on,st=yt),on=st,ut&&vt)t:{for(yt=ut,_e=vt,be=0,Ae=yt;Ae;Ae=A(Ae))be++;for(Ae=0,st=_e;st;st=A(st))Ae++;for(;0<be-Ae;)yt=A(yt),be--;for(;0<Ae-be;)_e=A(_e),Ae--;for(;be--;){if(yt===_e||_e!==null&&yt===_e.alternate)break t;yt=A(yt),_e=A(_e)}yt=null}else yt=null;ut!==null&&R(et,Ze,ut,yt,!1),vt!==null&&on!==null&&R(et,on,vt,yt,!0)}}e:{if(Ze=Te?Ai(Te):window,ut=Ze.nodeName&&Ze.nodeName.toLowerCase(),ut==="select"||ut==="input"&&Ze.type==="file")var jt=hf;else if(om(Ze))if(Qa)jt=Td;else{jt=ro;var Rt=mc}else(ut=Ze.nodeName)&&ut.toLowerCase()==="input"&&(Ze.type==="checkbox"||Ze.type==="radio")&&(jt=hc);if(jt&&(jt=jt(a,Te))){lc(et,jt,p,Qe);break e}Rt&&Rt(a,Ze,Te),a==="focusout"&&(Rt=Ze._wrapperState)&&Rt.controlled&&Ze.type==="number"&&Lt(Ze,"number",Ze.value)}switch(Rt=Te?Ai(Te):window,a){case"focusin":(om(Rt)||Rt.contentEditable==="true")&&(io=Rt,oo=Te,cl=null);break;case"focusout":cl=oo=io=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,um(et,p,Qe);break;case"selectionchange":if(pc)break;case"keydown":case"keyup":um(et,p,Qe)}var Ot;if(Br)e:{switch(a){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else yr?no(a,p)&&(Vt="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Vt="onCompositionStart");Vt&&(rm&&p.locale!=="ko"&&(yr||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&yr&&(Ot=jd()):($r=Qe,Qn="value"in $r?$r.value:$r.textContent,yr=!0)),Rt=y(Te,Vt),0<Rt.length&&(Vt=new Ad(Vt,a,null,p,Qe),et.push({event:Vt,listeners:Rt}),Ot?Vt.data=Ot:(Ot=kd(p),Ot!==null&&(Vt.data=Ot)))),(Ot=vr?uf(a,p):Ur(a,p))&&(Te=y(Te,"onBeforeInput"),0<Te.length&&(Qe=new Ad("onBeforeInput","beforeinput",null,p,Qe),et.push({event:Qe,listeners:Te}),Qe.data=Ot))}$d(et,l)})}function d(a,l,p){return{instance:a,listener:l,currentTarget:p}}function y(a,l){for(var p=l+"Capture",b=[];a!==null;){var P=a,D=P.stateNode;P.tag===5&&D!==null&&(P=D,D=Ee(a,p),D!=null&&b.unshift(d(a,D,P)),D=Ee(a,l),D!=null&&b.push(d(a,D,P))),a=a.return}return b}function A(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function R(a,l,p,b,P){for(var D=l._reactName,H=[];p!==null&&p!==b;){var ie=p,ge=ie.alternate,Te=ie.stateNode;if(ge!==null&&ge===b)break;ie.tag===5&&Te!==null&&(ie=Te,P?(ge=Ee(p,D),ge!=null&&H.unshift(d(p,ge,ie))):P||(ge=Ee(p,D),ge!=null&&H.push(d(p,ge,ie)))),p=p.return}H.length!==0&&a.push({event:l,listeners:H})}var W=/\r\n?/g,he=/\u0000|\uFFFD/g;function Se(a){return(typeof a=="string"?a:""+a).replace(W,`
`).replace(he,"")}function ke(a,l,p){if(l=Se(l),Se(a)!==l&&p)throw Error(n(425))}function qe(){}var ot=null,Dt=null;function Kt(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var bn=typeof setTimeout=="function"?setTimeout:void 0,hn=typeof clearTimeout=="function"?clearTimeout:void 0,Yn=typeof Promise=="function"?Promise:void 0,Vn=typeof queueMicrotask=="function"?queueMicrotask:typeof Yn<"u"?function(a){return Yn.resolve(null).then(a).catch(ho)}:bn;function ho(a){setTimeout(function(){throw a})}function Bd(a,l){var p=l,b=0;do{var P=p.nextSibling;if(a.removeChild(p),P&&P.nodeType===8)if(p=P.data,p==="/$"){if(b===0){a.removeChild(P),Ta(l);return}b--}else p!=="$"&&p!=="$?"&&p!=="$!"||b++;p=P}while(p);Ta(l)}function Wr(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function gm(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return a;l--}else p==="/$"&&l++}a=a.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),Ja="__reactFiber$"+Ci,po="__reactProps$"+Ci,Ss="__reactContainer$"+Ci,fo="__reactEvents$"+Ci,ff="__reactListeners$"+Ci,xf="__reactHandles$"+Ci;function Si(a){var l=a[Ja];if(l)return l;for(var p=a.parentNode;p;){if(l=p[Ss]||p[Ja]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=gm(a);a!==null;){if(p=a[Ja])return p;a=gm(a)}return l}a=p,p=a.parentNode}return null}function _i(a){return a=a[Ja]||a[Ss],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ai(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function gc(a){return a[po]||null}var gf=[],vc=-1;function xo(a){return{current:a}}function zs(a){0>vc||(a.current=gf[vc],gf[vc]=null,vc--)}function Fs(a,l){vc++,gf[vc]=a.current,a.current=l}var go={},Hn=xo(go),ua=xo(!1),ml=go;function yc(a,l){var p=a.type.contextTypes;if(!p)return go;var b=a.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===l)return b.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in p)P[D]=l[D];return b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=P),P}function ma(a){return a=a.childContextTypes,a!=null}function vm(){zs(ua),zs(Hn)}function Av(a,l,p){if(Hn.current!==go)throw Error(n(168));Fs(Hn,l),Fs(ua,p)}function Pv(a,l,p){var b=a.stateNode;if(l=l.childContextTypes,typeof b.getChildContext!="function")return p;b=b.getChildContext();for(var P in b)if(!(P in l))throw Error(n(108,ae(a)||"Unknown",P));return Q({},p,b)}function ym(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||go,ml=Hn.current,Fs(Hn,a),Fs(ua,ua.current),!0}function Ev(a,l,p){var b=a.stateNode;if(!b)throw Error(n(169));p?(a=Pv(a,l,ml),b.__reactInternalMemoizedMergedChildContext=a,zs(ua),zs(Hn),Fs(Hn,a)):zs(ua),Fs(ua,p)}var Pi=null,bm=!1,vf=!1;function kv(a){Pi===null?Pi=[a]:Pi.push(a)}function k_(a){bm=!0,kv(a)}function vo(){if(!vf&&Pi!==null){vf=!0;var a=0,l=ps;try{var p=Pi;for(ps=1;a<p.length;a++){var b=p[a];do b=b(!0);while(b!==null)}Pi=null,bm=!1}catch(P){throw Pi!==null&&(Pi=Pi.slice(a+1)),Kl(bs,vo),P}finally{ps=l,vf=!1}}return null}var bc=[],jc=0,jm=null,Nm=0,er=[],tr=0,hl=null,Ei=1,ki="";function pl(a,l){bc[jc++]=Nm,bc[jc++]=jm,jm=a,Nm=l}function Tv(a,l,p){er[tr++]=Ei,er[tr++]=ki,er[tr++]=hl,hl=a;var b=Ei;a=ki;var P=32-ft(b)-1;b&=~(1<<P),p+=1;var D=32-ft(l)+P;if(30<D){var H=P-P%5;D=(b&(1<<H)-1).toString(32),b>>=H,P-=H,Ei=1<<32-ft(l)+P|p<<P|b,ki=D+a}else Ei=1<<D|p<<P|b,ki=a}function yf(a){a.return!==null&&(pl(a,1),Tv(a,1,0))}function bf(a){for(;a===jm;)jm=bc[--jc],bc[jc]=null,Nm=bc[--jc],bc[jc]=null;for(;a===hl;)hl=er[--tr],er[tr]=null,ki=er[--tr],er[tr]=null,Ei=er[--tr],er[tr]=null}var Oa=null,La=null,Vs=!1,jr=null;function Dv(a,l){var p=rr(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=a,l=a.deletions,l===null?(a.deletions=[p],a.flags|=16):l.push(p)}function Iv(a,l){switch(a.tag){case 5:var p=a.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,Oa=a,La=Wr(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,Oa=a,La=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=hl!==null?{id:Ei,overflow:ki}:null,a.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=rr(18,null,null,0),p.stateNode=l,p.return=a,a.child=p,Oa=a,La=null,!0):!1;default:return!1}}function jf(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Nf(a){if(Vs){var l=La;if(l){var p=l;if(!Iv(a,l)){if(jf(a))throw Error(n(418));l=Wr(p.nextSibling);var b=Oa;l&&Iv(a,l)?Dv(b,p):(a.flags=a.flags&-4097|2,Vs=!1,Oa=a)}}else{if(jf(a))throw Error(n(418));a.flags=a.flags&-4097|2,Vs=!1,Oa=a}}}function Mv(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Oa=a}function wm(a){if(a!==Oa)return!1;if(!Vs)return Mv(a),Vs=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Kt(a.type,a.memoizedProps)),l&&(l=La)){if(jf(a))throw Rv(),Error(n(418));for(;l;)Dv(a,l),l=Wr(l.nextSibling)}if(Mv(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(l===0){La=Wr(a.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}a=a.nextSibling}La=null}}else La=Oa?Wr(a.stateNode.nextSibling):null;return!0}function Rv(){for(var a=La;a;)a=Wr(a.nextSibling)}function Nc(){La=Oa=null,Vs=!1}function wf(a){jr===null?jr=[a]:jr.push(a)}var T_=T.ReactCurrentBatchConfig;function Ud(a,l,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var b=p.stateNode}if(!b)throw Error(n(147,a));var P=b,D=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===D?l.ref:(l=function(H){var ie=P.refs;H===null?delete ie[D]:ie[D]=H},l._stringRef=D,l)}if(typeof a!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,a))}return a}function Cm(a,l){throw a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function Ov(a){var l=a._init;return l(a._payload)}function Lv(a){function l(_e,be){if(a){var Ae=_e.deletions;Ae===null?(_e.deletions=[be],_e.flags|=16):Ae.push(be)}}function p(_e,be){if(!a)return null;for(;be!==null;)l(_e,be),be=be.sibling;return null}function b(_e,be){for(_e=new Map;be!==null;)be.key!==null?_e.set(be.key,be):_e.set(be.index,be),be=be.sibling;return _e}function P(_e,be){return _e=_o(_e,be),_e.index=0,_e.sibling=null,_e}function D(_e,be,Ae){return _e.index=Ae,a?(Ae=_e.alternate,Ae!==null?(Ae=Ae.index,Ae<be?(_e.flags|=2,be):Ae):(_e.flags|=2,be)):(_e.flags|=1048576,be)}function H(_e){return a&&_e.alternate===null&&(_e.flags|=2),_e}function ie(_e,be,Ae,st){return be===null||be.tag!==6?(be=px(Ae,_e.mode,st),be.return=_e,be):(be=P(be,Ae),be.return=_e,be)}function ge(_e,be,Ae,st){var jt=Ae.type;return jt===O?Qe(_e,be,Ae.props.children,st,Ae.key):be!==null&&(be.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Y&&Ov(jt)===be.type)?(st=P(be,Ae.props),st.ref=Ud(_e,be,Ae),st.return=_e,st):(st=Zm(Ae.type,Ae.key,Ae.props,null,_e.mode,st),st.ref=Ud(_e,be,Ae),st.return=_e,st)}function Te(_e,be,Ae,st){return be===null||be.tag!==4||be.stateNode.containerInfo!==Ae.containerInfo||be.stateNode.implementation!==Ae.implementation?(be=fx(Ae,_e.mode,st),be.return=_e,be):(be=P(be,Ae.children||[]),be.return=_e,be)}function Qe(_e,be,Ae,st,jt){return be===null||be.tag!==7?(be=Nl(Ae,_e.mode,st,jt),be.return=_e,be):(be=P(be,Ae),be.return=_e,be)}function et(_e,be,Ae){if(typeof be=="string"&&be!==""||typeof be=="number")return be=px(""+be,_e.mode,Ae),be.return=_e,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case M:return Ae=Zm(be.type,be.key,be.props,null,_e.mode,Ae),Ae.ref=Ud(_e,null,be),Ae.return=_e,Ae;case F:return be=fx(be,_e.mode,Ae),be.return=_e,be;case Y:var st=be._init;return et(_e,st(be._payload),Ae)}if(J(be)||ne(be))return be=Nl(be,_e.mode,Ae,null),be.return=_e,be;Cm(_e,be)}return null}function Ze(_e,be,Ae,st){var jt=be!==null?be.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return jt!==null?null:ie(_e,be,""+Ae,st);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case M:return Ae.key===jt?ge(_e,be,Ae,st):null;case F:return Ae.key===jt?Te(_e,be,Ae,st):null;case Y:return jt=Ae._init,Ze(_e,be,jt(Ae._payload),st)}if(J(Ae)||ne(Ae))return jt!==null?null:Qe(_e,be,Ae,st,null);Cm(_e,Ae)}return null}function ut(_e,be,Ae,st,jt){if(typeof st=="string"&&st!==""||typeof st=="number")return _e=_e.get(Ae)||null,ie(be,_e,""+st,jt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case M:return _e=_e.get(st.key===null?Ae:st.key)||null,ge(be,_e,st,jt);case F:return _e=_e.get(st.key===null?Ae:st.key)||null,Te(be,_e,st,jt);case Y:var Rt=st._init;return ut(_e,be,Ae,Rt(st._payload),jt)}if(J(st)||ne(st))return _e=_e.get(Ae)||null,Qe(be,_e,st,jt,null);Cm(be,st)}return null}function vt(_e,be,Ae,st){for(var jt=null,Rt=null,Ot=be,Vt=be=0,Pn=null;Ot!==null&&Vt<Ae.length;Vt++){Ot.index>Vt?(Pn=Ot,Ot=null):Pn=Ot.sibling;var js=Ze(_e,Ot,Ae[Vt],st);if(js===null){Ot===null&&(Ot=Pn);break}a&&Ot&&js.alternate===null&&l(_e,Ot),be=D(js,be,Vt),Rt===null?jt=js:Rt.sibling=js,Rt=js,Ot=Pn}if(Vt===Ae.length)return p(_e,Ot),Vs&&pl(_e,Vt),jt;if(Ot===null){for(;Vt<Ae.length;Vt++)Ot=et(_e,Ae[Vt],st),Ot!==null&&(be=D(Ot,be,Vt),Rt===null?jt=Ot:Rt.sibling=Ot,Rt=Ot);return Vs&&pl(_e,Vt),jt}for(Ot=b(_e,Ot);Vt<Ae.length;Vt++)Pn=ut(Ot,_e,Vt,Ae[Vt],st),Pn!==null&&(a&&Pn.alternate!==null&&Ot.delete(Pn.key===null?Vt:Pn.key),be=D(Pn,be,Vt),Rt===null?jt=Pn:Rt.sibling=Pn,Rt=Pn);return a&&Ot.forEach(function(Ao){return l(_e,Ao)}),Vs&&pl(_e,Vt),jt}function yt(_e,be,Ae,st){var jt=ne(Ae);if(typeof jt!="function")throw Error(n(150));if(Ae=jt.call(Ae),Ae==null)throw Error(n(151));for(var Rt=jt=null,Ot=be,Vt=be=0,Pn=null,js=Ae.next();Ot!==null&&!js.done;Vt++,js=Ae.next()){Ot.index>Vt?(Pn=Ot,Ot=null):Pn=Ot.sibling;var Ao=Ze(_e,Ot,js.value,st);if(Ao===null){Ot===null&&(Ot=Pn);break}a&&Ot&&Ao.alternate===null&&l(_e,Ot),be=D(Ao,be,Vt),Rt===null?jt=Ao:Rt.sibling=Ao,Rt=Ao,Ot=Pn}if(js.done)return p(_e,Ot),Vs&&pl(_e,Vt),jt;if(Ot===null){for(;!js.done;Vt++,js=Ae.next())js=et(_e,js.value,st),js!==null&&(be=D(js,be,Vt),Rt===null?jt=js:Rt.sibling=js,Rt=js);return Vs&&pl(_e,Vt),jt}for(Ot=b(_e,Ot);!js.done;Vt++,js=Ae.next())js=ut(Ot,_e,Vt,js.value,st),js!==null&&(a&&js.alternate!==null&&Ot.delete(js.key===null?Vt:js.key),be=D(js,be,Vt),Rt===null?jt=js:Rt.sibling=js,Rt=js);return a&&Ot.forEach(function(dA){return l(_e,dA)}),Vs&&pl(_e,Vt),jt}function on(_e,be,Ae,st){if(typeof Ae=="object"&&Ae!==null&&Ae.type===O&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case M:e:{for(var jt=Ae.key,Rt=be;Rt!==null;){if(Rt.key===jt){if(jt=Ae.type,jt===O){if(Rt.tag===7){p(_e,Rt.sibling),be=P(Rt,Ae.props.children),be.return=_e,_e=be;break e}}else if(Rt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Y&&Ov(jt)===Rt.type){p(_e,Rt.sibling),be=P(Rt,Ae.props),be.ref=Ud(_e,Rt,Ae),be.return=_e,_e=be;break e}p(_e,Rt);break}else l(_e,Rt);Rt=Rt.sibling}Ae.type===O?(be=Nl(Ae.props.children,_e.mode,st,Ae.key),be.return=_e,_e=be):(st=Zm(Ae.type,Ae.key,Ae.props,null,_e.mode,st),st.ref=Ud(_e,be,Ae),st.return=_e,_e=st)}return H(_e);case F:e:{for(Rt=Ae.key;be!==null;){if(be.key===Rt)if(be.tag===4&&be.stateNode.containerInfo===Ae.containerInfo&&be.stateNode.implementation===Ae.implementation){p(_e,be.sibling),be=P(be,Ae.children||[]),be.return=_e,_e=be;break e}else{p(_e,be);break}else l(_e,be);be=be.sibling}be=fx(Ae,_e.mode,st),be.return=_e,_e=be}return H(_e);case Y:return Rt=Ae._init,on(_e,be,Rt(Ae._payload),st)}if(J(Ae))return vt(_e,be,Ae,st);if(ne(Ae))return yt(_e,be,Ae,st);Cm(_e,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,be!==null&&be.tag===6?(p(_e,be.sibling),be=P(be,Ae),be.return=_e,_e=be):(p(_e,be),be=px(Ae,_e.mode,st),be.return=_e,_e=be),H(_e)):p(_e,be)}return on}var wc=Lv(!0),Fv=Lv(!1),Sm=xo(null),_m=null,Cc=null,Cf=null;function Sf(){Cf=Cc=_m=null}function _f(a){var l=Sm.current;zs(Sm),a._currentValue=l}function Af(a,l,p){for(;a!==null;){var b=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,b!==null&&(b.childLanes|=l)):b!==null&&(b.childLanes&l)!==l&&(b.childLanes|=l),a===p)break;a=a.return}}function Sc(a,l){_m=a,Cf=Cc=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(ha=!0),a.firstContext=null)}function sr(a){var l=a._currentValue;if(Cf!==a)if(a={context:a,memoizedValue:l,next:null},Cc===null){if(_m===null)throw Error(n(308));Cc=a,_m.dependencies={lanes:0,firstContext:a}}else Cc=Cc.next=a;return l}var fl=null;function Pf(a){fl===null?fl=[a]:fl.push(a)}function $v(a,l,p,b){var P=l.interleaved;return P===null?(p.next=p,Pf(l)):(p.next=P.next,P.next=p),l.interleaved=p,Ti(a,b)}function Ti(a,l){a.lanes|=l;var p=a.alternate;for(p!==null&&(p.lanes|=l),p=a,a=a.return;a!==null;)a.childLanes|=l,p=a.alternate,p!==null&&(p.childLanes|=l),p=a,a=a.return;return p.tag===3?p.stateNode:null}var yo=!1;function Ef(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zv(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Di(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function bo(a,l,p){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(gs&2)!==0){var P=b.pending;return P===null?l.next=l:(l.next=P.next,P.next=l),b.pending=l,Ti(a,p)}return P=b.interleaved,P===null?(l.next=l,Pf(b)):(l.next=P.next,P.next=l),b.interleaved=l,Ti(a,p)}function Am(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var b=l.lanes;b&=a.pendingLanes,p|=b,l.lanes=p,xr(a,p)}}function Bv(a,l){var p=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var P=null,D=null;if(p=p.firstBaseUpdate,p!==null){do{var H={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};D===null?P=D=H:D=D.next=H,p=p.next}while(p!==null);D===null?P=D=l:D=D.next=l}else P=D=l;p={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:b.shared,effects:b.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}function Pm(a,l,p,b){var P=a.updateQueue;yo=!1;var D=P.firstBaseUpdate,H=P.lastBaseUpdate,ie=P.shared.pending;if(ie!==null){P.shared.pending=null;var ge=ie,Te=ge.next;ge.next=null,H===null?D=Te:H.next=Te,H=ge;var Qe=a.alternate;Qe!==null&&(Qe=Qe.updateQueue,ie=Qe.lastBaseUpdate,ie!==H&&(ie===null?Qe.firstBaseUpdate=Te:ie.next=Te,Qe.lastBaseUpdate=ge))}if(D!==null){var et=P.baseState;H=0,Qe=Te=ge=null,ie=D;do{var Ze=ie.lane,ut=ie.eventTime;if((b&Ze)===Ze){Qe!==null&&(Qe=Qe.next={eventTime:ut,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var vt=a,yt=ie;switch(Ze=l,ut=p,yt.tag){case 1:if(vt=yt.payload,typeof vt=="function"){et=vt.call(ut,et,Ze);break e}et=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=yt.payload,Ze=typeof vt=="function"?vt.call(ut,et,Ze):vt,Ze==null)break e;et=Q({},et,Ze);break e;case 2:yo=!0}}ie.callback!==null&&ie.lane!==0&&(a.flags|=64,Ze=P.effects,Ze===null?P.effects=[ie]:Ze.push(ie))}else ut={eventTime:ut,lane:Ze,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Qe===null?(Te=Qe=ut,ge=et):Qe=Qe.next=ut,H|=Ze;if(ie=ie.next,ie===null){if(ie=P.shared.pending,ie===null)break;Ze=ie,ie=Ze.next,Ze.next=null,P.lastBaseUpdate=Ze,P.shared.pending=null}}while(!0);if(Qe===null&&(ge=et),P.baseState=ge,P.firstBaseUpdate=Te,P.lastBaseUpdate=Qe,l=P.shared.interleaved,l!==null){P=l;do H|=P.lane,P=P.next;while(P!==l)}else D===null&&(P.shared.lanes=0);vl|=H,a.lanes=H,a.memoizedState=et}}function Uv(a,l,p){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var b=a[l],P=b.callback;if(P!==null){if(b.callback=null,b=p,typeof P!="function")throw Error(n(191,P));P.call(b)}}}var Vd={},Gr=xo(Vd),Hd=xo(Vd),qd=xo(Vd);function xl(a){if(a===Vd)throw Error(n(174));return a}function kf(a,l){switch(Fs(qd,l),Fs(Hd,a),Fs(Gr,Vd),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:He(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=He(l,a)}zs(Gr),Fs(Gr,l)}function _c(){zs(Gr),zs(Hd),zs(qd)}function Vv(a){xl(qd.current);var l=xl(Gr.current),p=He(l,a.type);l!==p&&(Fs(Hd,a),Fs(Gr,p))}function Tf(a){Hd.current===a&&(zs(Gr),zs(Hd))}var Qs=xo(0);function Em(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Df=[];function If(){for(var a=0;a<Df.length;a++)Df[a]._workInProgressVersionPrimary=null;Df.length=0}var km=T.ReactCurrentDispatcher,Mf=T.ReactCurrentBatchConfig,gl=0,Xs=null,jn=null,_n=null,Tm=!1,Wd=!1,Gd=0,D_=0;function qn(){throw Error(n(321))}function Rf(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!Ma(a[p],l[p]))return!1;return!0}function Of(a,l,p,b,P,D){if(gl=D,Xs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,km.current=a===null||a.memoizedState===null?O_:L_,a=p(b,P),Wd){D=0;do{if(Wd=!1,Gd=0,25<=D)throw Error(n(301));D+=1,_n=jn=null,l.updateQueue=null,km.current=F_,a=p(b,P)}while(Wd)}if(km.current=Mm,l=jn!==null&&jn.next!==null,gl=0,_n=jn=Xs=null,Tm=!1,l)throw Error(n(300));return a}function Lf(){var a=Gd!==0;return Gd=0,a}function Zr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Xs.memoizedState=_n=a:_n=_n.next=a,_n}function nr(){if(jn===null){var a=Xs.alternate;a=a!==null?a.memoizedState:null}else a=jn.next;var l=_n===null?Xs.memoizedState:_n.next;if(l!==null)_n=l,jn=a;else{if(a===null)throw Error(n(310));jn=a,a={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},_n===null?Xs.memoizedState=_n=a:_n=_n.next=a}return _n}function Zd(a,l){return typeof l=="function"?l(a):l}function Ff(a){var l=nr(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var b=jn,P=b.baseQueue,D=p.pending;if(D!==null){if(P!==null){var H=P.next;P.next=D.next,D.next=H}b.baseQueue=P=D,p.pending=null}if(P!==null){D=P.next,b=b.baseState;var ie=H=null,ge=null,Te=D;do{var Qe=Te.lane;if((gl&Qe)===Qe)ge!==null&&(ge=ge.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),b=Te.hasEagerState?Te.eagerState:a(b,Te.action);else{var et={lane:Qe,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ge===null?(ie=ge=et,H=b):ge=ge.next=et,Xs.lanes|=Qe,vl|=Qe}Te=Te.next}while(Te!==null&&Te!==D);ge===null?H=b:ge.next=ie,Ma(b,l.memoizedState)||(ha=!0),l.memoizedState=b,l.baseState=H,l.baseQueue=ge,p.lastRenderedState=b}if(a=p.interleaved,a!==null){P=a;do D=P.lane,Xs.lanes|=D,vl|=D,P=P.next;while(P!==a)}else P===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function $f(a){var l=nr(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var b=p.dispatch,P=p.pending,D=l.memoizedState;if(P!==null){p.pending=null;var H=P=P.next;do D=a(D,H.action),H=H.next;while(H!==P);Ma(D,l.memoizedState)||(ha=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),p.lastRenderedState=D}return[D,b]}function Hv(){}function qv(a,l){var p=Xs,b=nr(),P=l(),D=!Ma(b.memoizedState,P);if(D&&(b.memoizedState=P,ha=!0),b=b.queue,zf(Zv.bind(null,p,b,a),[a]),b.getSnapshot!==l||D||_n!==null&&_n.memoizedState.tag&1){if(p.flags|=2048,Kd(9,Gv.bind(null,p,b,P,l),void 0,null),An===null)throw Error(n(349));(gl&30)!==0||Wv(p,l,P)}return P}function Wv(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Xs.updateQueue,l===null?(l={lastEffect:null,stores:null},Xs.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function Gv(a,l,p,b){l.value=p,l.getSnapshot=b,Kv(l)&&Qv(a)}function Zv(a,l,p){return p(function(){Kv(l)&&Qv(a)})}function Kv(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!Ma(a,p)}catch{return!0}}function Qv(a){var l=Ti(a,1);l!==null&&Sr(l,a,1,-1)}function Xv(a){var l=Zr();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:a},l.queue=a,a=a.dispatch=R_.bind(null,Xs,a),[l.memoizedState,a]}function Kd(a,l,p,b){return a={tag:a,create:l,destroy:p,deps:b,next:null},l=Xs.updateQueue,l===null?(l={lastEffect:null,stores:null},Xs.updateQueue=l,l.lastEffect=a.next=a):(p=l.lastEffect,p===null?l.lastEffect=a.next=a:(b=p.next,p.next=a,a.next=b,l.lastEffect=a)),a}function Yv(){return nr().memoizedState}function Dm(a,l,p,b){var P=Zr();Xs.flags|=a,P.memoizedState=Kd(1|l,p,void 0,b===void 0?null:b)}function Im(a,l,p,b){var P=nr();b=b===void 0?null:b;var D=void 0;if(jn!==null){var H=jn.memoizedState;if(D=H.destroy,b!==null&&Rf(b,H.deps)){P.memoizedState=Kd(l,p,D,b);return}}Xs.flags|=a,P.memoizedState=Kd(1|l,p,D,b)}function Jv(a,l){return Dm(8390656,8,a,l)}function zf(a,l){return Im(2048,8,a,l)}function ey(a,l){return Im(4,2,a,l)}function ty(a,l){return Im(4,4,a,l)}function sy(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function ny(a,l,p){return p=p!=null?p.concat([a]):null,Im(4,4,sy.bind(null,l,a),p)}function Bf(){}function ay(a,l){var p=nr();l=l===void 0?null:l;var b=p.memoizedState;return b!==null&&l!==null&&Rf(l,b[1])?b[0]:(p.memoizedState=[a,l],a)}function ry(a,l){var p=nr();l=l===void 0?null:l;var b=p.memoizedState;return b!==null&&l!==null&&Rf(l,b[1])?b[0]:(a=a(),p.memoizedState=[a,l],a)}function iy(a,l,p){return(gl&21)===0?(a.baseState&&(a.baseState=!1,ha=!0),a.memoizedState=p):(Ma(p,l)||(p=Ku(),Xs.lanes|=p,vl|=p,a.baseState=!0),l)}function I_(a,l){var p=ps;ps=p!==0&&4>p?p:4,a(!0);var b=Mf.transition;Mf.transition={};try{a(!1),l()}finally{ps=p,Mf.transition=b}}function oy(){return nr().memoizedState}function M_(a,l,p){var b=Co(a);if(p={lane:b,action:p,hasEagerState:!1,eagerState:null,next:null},ly(a))cy(l,p);else if(p=$v(a,l,p,b),p!==null){var P=ea();Sr(p,a,b,P),dy(p,l,b)}}function R_(a,l,p){var b=Co(a),P={lane:b,action:p,hasEagerState:!1,eagerState:null,next:null};if(ly(a))cy(l,P);else{var D=a.alternate;if(a.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var H=l.lastRenderedState,ie=D(H,p);if(P.hasEagerState=!0,P.eagerState=ie,Ma(ie,H)){var ge=l.interleaved;ge===null?(P.next=P,Pf(l)):(P.next=ge.next,ge.next=P),l.interleaved=P;return}}catch{}finally{}p=$v(a,l,P,b),p!==null&&(P=ea(),Sr(p,a,b,P),dy(p,l,b))}}function ly(a){var l=a.alternate;return a===Xs||l!==null&&l===Xs}function cy(a,l){Wd=Tm=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function dy(a,l,p){if((p&4194240)!==0){var b=l.lanes;b&=a.pendingLanes,p|=b,l.lanes=p,xr(a,p)}}var Mm={readContext:sr,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},O_={readContext:sr,useCallback:function(a,l){return Zr().memoizedState=[a,l===void 0?null:l],a},useContext:sr,useEffect:Jv,useImperativeHandle:function(a,l,p){return p=p!=null?p.concat([a]):null,Dm(4194308,4,sy.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Dm(4194308,4,a,l)},useInsertionEffect:function(a,l){return Dm(4,2,a,l)},useMemo:function(a,l){var p=Zr();return l=l===void 0?null:l,a=a(),p.memoizedState=[a,l],a},useReducer:function(a,l,p){var b=Zr();return l=p!==void 0?p(l):l,b.memoizedState=b.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},b.queue=a,a=a.dispatch=M_.bind(null,Xs,a),[b.memoizedState,a]},useRef:function(a){var l=Zr();return a={current:a},l.memoizedState=a},useState:Xv,useDebugValue:Bf,useDeferredValue:function(a){return Zr().memoizedState=a},useTransition:function(){var a=Xv(!1),l=a[0];return a=I_.bind(null,a[1]),Zr().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,p){var b=Xs,P=Zr();if(Vs){if(p===void 0)throw Error(n(407));p=p()}else{if(p=l(),An===null)throw Error(n(349));(gl&30)!==0||Wv(b,l,p)}P.memoizedState=p;var D={value:p,getSnapshot:l};return P.queue=D,Jv(Zv.bind(null,b,D,a),[a]),b.flags|=2048,Kd(9,Gv.bind(null,b,D,p,l),void 0,null),p},useId:function(){var a=Zr(),l=An.identifierPrefix;if(Vs){var p=ki,b=Ei;p=(b&~(1<<32-ft(b)-1)).toString(32)+p,l=":"+l+"R"+p,p=Gd++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=D_++,l=":"+l+"r"+p.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},L_={readContext:sr,useCallback:ay,useContext:sr,useEffect:zf,useImperativeHandle:ny,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ry,useReducer:Ff,useRef:Yv,useState:function(){return Ff(Zd)},useDebugValue:Bf,useDeferredValue:function(a){var l=nr();return iy(l,jn.memoizedState,a)},useTransition:function(){var a=Ff(Zd)[0],l=nr().memoizedState;return[a,l]},useMutableSource:Hv,useSyncExternalStore:qv,useId:oy,unstable_isNewReconciler:!1},F_={readContext:sr,useCallback:ay,useContext:sr,useEffect:zf,useImperativeHandle:ny,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ry,useReducer:$f,useRef:Yv,useState:function(){return $f(Zd)},useDebugValue:Bf,useDeferredValue:function(a){var l=nr();return jn===null?l.memoizedState=a:iy(l,jn.memoizedState,a)},useTransition:function(){var a=$f(Zd)[0],l=nr().memoizedState;return[a,l]},useMutableSource:Hv,useSyncExternalStore:qv,useId:oy,unstable_isNewReconciler:!1};function Nr(a,l){if(a&&a.defaultProps){l=Q({},l),a=a.defaultProps;for(var p in a)l[p]===void 0&&(l[p]=a[p]);return l}return l}function Uf(a,l,p,b){l=a.memoizedState,p=p(b,l),p=p==null?l:Q({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Rm={isMounted:function(a){return(a=a._reactInternals)?Cs(a)===a:!1},enqueueSetState:function(a,l,p){a=a._reactInternals;var b=ea(),P=Co(a),D=Di(b,P);D.payload=l,p!=null&&(D.callback=p),l=bo(a,D,P),l!==null&&(Sr(l,a,P,b),Am(l,a,P))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var b=ea(),P=Co(a),D=Di(b,P);D.tag=1,D.payload=l,p!=null&&(D.callback=p),l=bo(a,D,P),l!==null&&(Sr(l,a,P,b),Am(l,a,P))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=ea(),b=Co(a),P=Di(p,b);P.tag=2,l!=null&&(P.callback=l),l=bo(a,P,b),l!==null&&(Sr(l,a,b,p),Am(l,a,b))}};function uy(a,l,p,b,P,D,H){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,D,H):l.prototype&&l.prototype.isPureReactComponent?!Vr(p,b)||!Vr(P,D):!0}function my(a,l,p){var b=!1,P=go,D=l.contextType;return typeof D=="object"&&D!==null?D=sr(D):(P=ma(l)?ml:Hn.current,b=l.contextTypes,D=(b=b!=null)?yc(a,P):go),l=new l(p,D),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Rm,a.stateNode=l,l._reactInternals=a,b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=P,a.__reactInternalMemoizedMaskedChildContext=D),l}function hy(a,l,p,b){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,b),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,b),l.state!==a&&Rm.enqueueReplaceState(l,l.state,null)}function Vf(a,l,p,b){var P=a.stateNode;P.props=p,P.state=a.memoizedState,P.refs={},Ef(a);var D=l.contextType;typeof D=="object"&&D!==null?P.context=sr(D):(D=ma(l)?ml:Hn.current,P.context=yc(a,D)),P.state=a.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(Uf(a,l,D,p),P.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(l=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),l!==P.state&&Rm.enqueueReplaceState(P,P.state,null),Pm(a,p,P,b),P.state=a.memoizedState),typeof P.componentDidMount=="function"&&(a.flags|=4194308)}function Ac(a,l){try{var p="",b=l;do p+=V(b),b=b.return;while(b);var P=p}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:a,source:l,stack:P,digest:null}}function Hf(a,l,p){return{value:a,source:null,stack:p??null,digest:l??null}}function qf(a,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var $_=typeof WeakMap=="function"?WeakMap:Map;function py(a,l,p){p=Di(-1,p),p.tag=3,p.payload={element:null};var b=l.value;return p.callback=function(){Um||(Um=!0,ix=b),qf(a,l)},p}function fy(a,l,p){p=Di(-1,p),p.tag=3;var b=a.type.getDerivedStateFromError;if(typeof b=="function"){var P=l.value;p.payload=function(){return b(P)},p.callback=function(){qf(a,l)}}var D=a.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(p.callback=function(){qf(a,l),typeof b!="function"&&(No===null?No=new Set([this]):No.add(this));var H=l.stack;this.componentDidCatch(l.value,{componentStack:H!==null?H:""})}),p}function xy(a,l,p){var b=a.pingCache;if(b===null){b=a.pingCache=new $_;var P=new Set;b.set(l,P)}else P=b.get(l),P===void 0&&(P=new Set,b.set(l,P));P.has(p)||(P.add(p),a=J_.bind(null,a,l,p),l.then(a,a))}function gy(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function vy(a,l,p,b,P){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=Di(-1,1),l.tag=2,bo(p,l,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=P,a)}var z_=T.ReactCurrentOwner,ha=!1;function Jn(a,l,p,b){l.child=a===null?Fv(l,null,p,b):wc(l,a.child,p,b)}function yy(a,l,p,b,P){p=p.render;var D=l.ref;return Sc(l,P),b=Of(a,l,p,b,D,P),p=Lf(),a!==null&&!ha?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~P,Ii(a,l,P)):(Vs&&p&&yf(l),l.flags|=1,Jn(a,l,b,P),l.child)}function by(a,l,p,b,P){if(a===null){var D=p.type;return typeof D=="function"&&!hx(D)&&D.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=D,jy(a,l,D,b,P)):(a=Zm(p.type,null,b,l,l.mode,P),a.ref=l.ref,a.return=l,l.child=a)}if(D=a.child,(a.lanes&P)===0){var H=D.memoizedProps;if(p=p.compare,p=p!==null?p:Vr,p(H,b)&&a.ref===l.ref)return Ii(a,l,P)}return l.flags|=1,a=_o(D,b),a.ref=l.ref,a.return=l,l.child=a}function jy(a,l,p,b,P){if(a!==null){var D=a.memoizedProps;if(Vr(D,b)&&a.ref===l.ref)if(ha=!1,l.pendingProps=b=D,(a.lanes&P)!==0)(a.flags&131072)!==0&&(ha=!0);else return l.lanes=a.lanes,Ii(a,l,P)}return Wf(a,l,p,b,P)}function Ny(a,l,p){var b=l.pendingProps,P=b.children,D=a!==null?a.memoizedState:null;if(b.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fs(Ec,Fa),Fa|=p;else{if((p&1073741824)===0)return a=D!==null?D.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Fs(Ec,Fa),Fa|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=D!==null?D.baseLanes:p,Fs(Ec,Fa),Fa|=b}else D!==null?(b=D.baseLanes|p,l.memoizedState=null):b=p,Fs(Ec,Fa),Fa|=b;return Jn(a,l,P,p),l.child}function wy(a,l){var p=l.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function Wf(a,l,p,b,P){var D=ma(p)?ml:Hn.current;return D=yc(l,D),Sc(l,P),p=Of(a,l,p,b,D,P),b=Lf(),a!==null&&!ha?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~P,Ii(a,l,P)):(Vs&&b&&yf(l),l.flags|=1,Jn(a,l,p,P),l.child)}function Cy(a,l,p,b,P){if(ma(p)){var D=!0;ym(l)}else D=!1;if(Sc(l,P),l.stateNode===null)Lm(a,l),my(l,p,b),Vf(l,p,b,P),b=!0;else if(a===null){var H=l.stateNode,ie=l.memoizedProps;H.props=ie;var ge=H.context,Te=p.contextType;typeof Te=="object"&&Te!==null?Te=sr(Te):(Te=ma(p)?ml:Hn.current,Te=yc(l,Te));var Qe=p.getDerivedStateFromProps,et=typeof Qe=="function"||typeof H.getSnapshotBeforeUpdate=="function";et||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ie!==b||ge!==Te)&&hy(l,H,b,Te),yo=!1;var Ze=l.memoizedState;H.state=Ze,Pm(l,b,H,P),ge=l.memoizedState,ie!==b||Ze!==ge||ua.current||yo?(typeof Qe=="function"&&(Uf(l,p,Qe,b),ge=l.memoizedState),(ie=yo||uy(l,p,ie,b,Ze,ge,Te))?(et||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(l.flags|=4194308)):(typeof H.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=b,l.memoizedState=ge),H.props=b,H.state=ge,H.context=Te,b=ie):(typeof H.componentDidMount=="function"&&(l.flags|=4194308),b=!1)}else{H=l.stateNode,zv(a,l),ie=l.memoizedProps,Te=l.type===l.elementType?ie:Nr(l.type,ie),H.props=Te,et=l.pendingProps,Ze=H.context,ge=p.contextType,typeof ge=="object"&&ge!==null?ge=sr(ge):(ge=ma(p)?ml:Hn.current,ge=yc(l,ge));var ut=p.getDerivedStateFromProps;(Qe=typeof ut=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ie!==et||Ze!==ge)&&hy(l,H,b,ge),yo=!1,Ze=l.memoizedState,H.state=Ze,Pm(l,b,H,P);var vt=l.memoizedState;ie!==et||Ze!==vt||ua.current||yo?(typeof ut=="function"&&(Uf(l,p,ut,b),vt=l.memoizedState),(Te=yo||uy(l,p,Te,b,Ze,vt,ge)||!1)?(Qe||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(b,vt,ge),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(b,vt,ge)),typeof H.componentDidUpdate=="function"&&(l.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof H.componentDidUpdate!="function"||ie===a.memoizedProps&&Ze===a.memoizedState||(l.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===a.memoizedProps&&Ze===a.memoizedState||(l.flags|=1024),l.memoizedProps=b,l.memoizedState=vt),H.props=b,H.state=vt,H.context=ge,b=Te):(typeof H.componentDidUpdate!="function"||ie===a.memoizedProps&&Ze===a.memoizedState||(l.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===a.memoizedProps&&Ze===a.memoizedState||(l.flags|=1024),b=!1)}return Gf(a,l,p,b,D,P)}function Gf(a,l,p,b,P,D){wy(a,l);var H=(l.flags&128)!==0;if(!b&&!H)return P&&Ev(l,p,!1),Ii(a,l,D);b=l.stateNode,z_.current=l;var ie=H&&typeof p.getDerivedStateFromError!="function"?null:b.render();return l.flags|=1,a!==null&&H?(l.child=wc(l,a.child,null,D),l.child=wc(l,null,ie,D)):Jn(a,l,ie,D),l.memoizedState=b.state,P&&Ev(l,p,!0),l.child}function Sy(a){var l=a.stateNode;l.pendingContext?Av(a,l.pendingContext,l.pendingContext!==l.context):l.context&&Av(a,l.context,!1),kf(a,l.containerInfo)}function _y(a,l,p,b,P){return Nc(),wf(P),l.flags|=256,Jn(a,l,p,b),l.child}var Zf={dehydrated:null,treeContext:null,retryLane:0};function Kf(a){return{baseLanes:a,cachePool:null,transitions:null}}function Ay(a,l,p){var b=l.pendingProps,P=Qs.current,D=!1,H=(l.flags&128)!==0,ie;if((ie=H)||(ie=a!==null&&a.memoizedState===null?!1:(P&2)!==0),ie?(D=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(P|=1),Fs(Qs,P&1),a===null)return Nf(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(H=b.children,a=b.fallback,D?(b=l.mode,D=l.child,H={mode:"hidden",children:H},(b&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=H):D=Km(H,b,0,null),a=Nl(a,b,p,null),D.return=l,a.return=l,D.sibling=a,l.child=D,l.child.memoizedState=Kf(p),l.memoizedState=Zf,a):Qf(l,H));if(P=a.memoizedState,P!==null&&(ie=P.dehydrated,ie!==null))return B_(a,l,H,b,ie,P,p);if(D){D=b.fallback,H=l.mode,P=a.child,ie=P.sibling;var ge={mode:"hidden",children:b.children};return(H&1)===0&&l.child!==P?(b=l.child,b.childLanes=0,b.pendingProps=ge,l.deletions=null):(b=_o(P,ge),b.subtreeFlags=P.subtreeFlags&14680064),ie!==null?D=_o(ie,D):(D=Nl(D,H,p,null),D.flags|=2),D.return=l,b.return=l,b.sibling=D,l.child=b,b=D,D=l.child,H=a.child.memoizedState,H=H===null?Kf(p):{baseLanes:H.baseLanes|p,cachePool:null,transitions:H.transitions},D.memoizedState=H,D.childLanes=a.childLanes&~p,l.memoizedState=Zf,b}return D=a.child,a=D.sibling,b=_o(D,{mode:"visible",children:b.children}),(l.mode&1)===0&&(b.lanes=p),b.return=l,b.sibling=null,a!==null&&(p=l.deletions,p===null?(l.deletions=[a],l.flags|=16):p.push(a)),l.child=b,l.memoizedState=null,b}function Qf(a,l){return l=Km({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Om(a,l,p,b){return b!==null&&wf(b),wc(l,a.child,null,p),a=Qf(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function B_(a,l,p,b,P,D,H){if(p)return l.flags&256?(l.flags&=-257,b=Hf(Error(n(422))),Om(a,l,H,b)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(D=b.fallback,P=l.mode,b=Km({mode:"visible",children:b.children},P,0,null),D=Nl(D,P,H,null),D.flags|=2,b.return=l,D.return=l,b.sibling=D,l.child=b,(l.mode&1)!==0&&wc(l,a.child,null,H),l.child.memoizedState=Kf(H),l.memoizedState=Zf,D);if((l.mode&1)===0)return Om(a,l,H,null);if(P.data==="$!"){if(b=P.nextSibling&&P.nextSibling.dataset,b)var ie=b.dgst;return b=ie,D=Error(n(419)),b=Hf(D,b,void 0),Om(a,l,H,b)}if(ie=(H&a.childLanes)!==0,ha||ie){if(b=An,b!==null){switch(H&-H){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(b.suspendedLanes|H))!==0?0:P,P!==0&&P!==D.retryLane&&(D.retryLane=P,Ti(a,P),Sr(b,a,P,-1))}return mx(),b=Hf(Error(n(421))),Om(a,l,H,b)}return P.data==="$?"?(l.flags|=128,l.child=a.child,l=eA.bind(null,a),P._reactRetry=l,null):(a=D.treeContext,La=Wr(P.nextSibling),Oa=l,Vs=!0,jr=null,a!==null&&(er[tr++]=Ei,er[tr++]=ki,er[tr++]=hl,Ei=a.id,ki=a.overflow,hl=l),l=Qf(l,b.children),l.flags|=4096,l)}function Py(a,l,p){a.lanes|=l;var b=a.alternate;b!==null&&(b.lanes|=l),Af(a.return,l,p)}function Xf(a,l,p,b,P){var D=a.memoizedState;D===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:P}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=b,D.tail=p,D.tailMode=P)}function Ey(a,l,p){var b=l.pendingProps,P=b.revealOrder,D=b.tail;if(Jn(a,l,b.children,p),b=Qs.current,(b&2)!==0)b=b&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Py(a,p,l);else if(a.tag===19)Py(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}b&=1}if(Fs(Qs,b),(l.mode&1)===0)l.memoizedState=null;else switch(P){case"forwards":for(p=l.child,P=null;p!==null;)a=p.alternate,a!==null&&Em(a)===null&&(P=p),p=p.sibling;p=P,p===null?(P=l.child,l.child=null):(P=p.sibling,p.sibling=null),Xf(l,!1,P,p,D);break;case"backwards":for(p=null,P=l.child,l.child=null;P!==null;){if(a=P.alternate,a!==null&&Em(a)===null){l.child=P;break}a=P.sibling,P.sibling=p,p=P,P=a}Xf(l,!0,p,null,D);break;case"together":Xf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Lm(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ii(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),vl|=l.lanes,(p&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,p=_o(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=_o(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function U_(a,l,p){switch(l.tag){case 3:Sy(l),Nc();break;case 5:Vv(l);break;case 1:ma(l.type)&&ym(l);break;case 4:kf(l,l.stateNode.containerInfo);break;case 10:var b=l.type._context,P=l.memoizedProps.value;Fs(Sm,b._currentValue),b._currentValue=P;break;case 13:if(b=l.memoizedState,b!==null)return b.dehydrated!==null?(Fs(Qs,Qs.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?Ay(a,l,p):(Fs(Qs,Qs.current&1),a=Ii(a,l,p),a!==null?a.sibling:null);Fs(Qs,Qs.current&1);break;case 19:if(b=(p&l.childLanes)!==0,(a.flags&128)!==0){if(b)return Ey(a,l,p);l.flags|=128}if(P=l.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Fs(Qs,Qs.current),b)break;return null;case 22:case 23:return l.lanes=0,Ny(a,l,p)}return Ii(a,l,p)}var ky,Yf,Ty,Dy;ky=function(a,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Yf=function(){},Ty=function(a,l,p,b){var P=a.memoizedProps;if(P!==b){a=l.stateNode,xl(Gr.current);var D=null;switch(p){case"input":P=nt(a,P),b=nt(a,b),D=[];break;case"select":P=Q({},P,{value:void 0}),b=Q({},b,{value:void 0}),D=[];break;case"textarea":P=xe(a,P),b=xe(a,b),D=[];break;default:typeof P.onClick!="function"&&typeof b.onClick=="function"&&(a.onclick=qe)}kt(p,b);var H;p=null;for(Te in P)if(!b.hasOwnProperty(Te)&&P.hasOwnProperty(Te)&&P[Te]!=null)if(Te==="style"){var ie=P[Te];for(H in ie)ie.hasOwnProperty(H)&&(p||(p={}),p[H]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(o.hasOwnProperty(Te)?D||(D=[]):(D=D||[]).push(Te,null));for(Te in b){var ge=b[Te];if(ie=P?.[Te],b.hasOwnProperty(Te)&&ge!==ie&&(ge!=null||ie!=null))if(Te==="style")if(ie){for(H in ie)!ie.hasOwnProperty(H)||ge&&ge.hasOwnProperty(H)||(p||(p={}),p[H]="");for(H in ge)ge.hasOwnProperty(H)&&ie[H]!==ge[H]&&(p||(p={}),p[H]=ge[H])}else p||(D||(D=[]),D.push(Te,p)),p=ge;else Te==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ie=ie?ie.__html:void 0,ge!=null&&ie!==ge&&(D=D||[]).push(Te,ge)):Te==="children"?typeof ge!="string"&&typeof ge!="number"||(D=D||[]).push(Te,""+ge):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(o.hasOwnProperty(Te)?(ge!=null&&Te==="onScroll"&&Is("scroll",a),D||ie===ge||(D=[])):(D=D||[]).push(Te,ge))}p&&(D=D||[]).push("style",p);var Te=D;(l.updateQueue=Te)&&(l.flags|=4)}},Dy=function(a,l,p,b){p!==b&&(l.flags|=4)};function Qd(a,l){if(!Vs)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function Wn(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,b=0;if(l)for(var P=a.child;P!==null;)p|=P.lanes|P.childLanes,b|=P.subtreeFlags&14680064,b|=P.flags&14680064,P.return=a,P=P.sibling;else for(P=a.child;P!==null;)p|=P.lanes|P.childLanes,b|=P.subtreeFlags,b|=P.flags,P.return=a,P=P.sibling;return a.subtreeFlags|=b,a.childLanes=p,l}function V_(a,l,p){var b=l.pendingProps;switch(bf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(l),null;case 1:return ma(l.type)&&vm(),Wn(l),null;case 3:return b=l.stateNode,_c(),zs(ua),zs(Hn),If(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(a===null||a.child===null)&&(wm(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,jr!==null&&(cx(jr),jr=null))),Yf(a,l),Wn(l),null;case 5:Tf(l);var P=xl(qd.current);if(p=l.type,a!==null&&l.stateNode!=null)Ty(a,l,p,b,P),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!b){if(l.stateNode===null)throw Error(n(166));return Wn(l),null}if(a=xl(Gr.current),wm(l)){b=l.stateNode,p=l.type;var D=l.memoizedProps;switch(b[Ja]=l,b[po]=D,a=(l.mode&1)!==0,p){case"dialog":Is("cancel",b),Is("close",b);break;case"iframe":case"object":case"embed":Is("load",b);break;case"video":case"audio":for(P=0;P<uo.length;P++)Is(uo[P],b);break;case"source":Is("error",b);break;case"img":case"image":case"link":Is("error",b),Is("load",b);break;case"details":Is("toggle",b);break;case"input":ct(b,D),Is("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!D.multiple},Is("invalid",b);break;case"textarea":Ve(b,D),Is("invalid",b)}kt(p,D),P=null;for(var H in D)if(D.hasOwnProperty(H)){var ie=D[H];H==="children"?typeof ie=="string"?b.textContent!==ie&&(D.suppressHydrationWarning!==!0&&ke(b.textContent,ie,a),P=["children",ie]):typeof ie=="number"&&b.textContent!==""+ie&&(D.suppressHydrationWarning!==!0&&ke(b.textContent,ie,a),P=["children",""+ie]):o.hasOwnProperty(H)&&ie!=null&&H==="onScroll"&&Is("scroll",b)}switch(p){case"input":We(b),It(b,D,!0);break;case"textarea":We(b),Ne(b);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(b.onclick=qe)}b=P,l.updateQueue=b,b!==null&&(l.flags|=4)}else{H=P.nodeType===9?P:P.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Be(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=H.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof b.is=="string"?a=H.createElement(p,{is:b.is}):(a=H.createElement(p),p==="select"&&(H=a,b.multiple?H.multiple=!0:b.size&&(H.size=b.size))):a=H.createElementNS(a,p),a[Ja]=l,a[po]=b,ky(a,l,!1,!1),l.stateNode=a;e:{switch(H=ht(p,b),p){case"dialog":Is("cancel",a),Is("close",a),P=b;break;case"iframe":case"object":case"embed":Is("load",a),P=b;break;case"video":case"audio":for(P=0;P<uo.length;P++)Is(uo[P],a);P=b;break;case"source":Is("error",a),P=b;break;case"img":case"image":case"link":Is("error",a),Is("load",a),P=b;break;case"details":Is("toggle",a),P=b;break;case"input":ct(a,b),P=nt(a,b),Is("invalid",a);break;case"option":P=b;break;case"select":a._wrapperState={wasMultiple:!!b.multiple},P=Q({},b,{value:void 0}),Is("invalid",a);break;case"textarea":Ve(a,b),P=xe(a,b),Is("invalid",a);break;default:P=b}kt(p,P),ie=P;for(D in ie)if(ie.hasOwnProperty(D)){var ge=ie[D];D==="style"?Ye(a,ge):D==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&pe(a,ge)):D==="children"?typeof ge=="string"?(p!=="textarea"||ge!=="")&&$e(a,ge):typeof ge=="number"&&$e(a,""+ge):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(o.hasOwnProperty(D)?ge!=null&&D==="onScroll"&&Is("scroll",a):ge!=null&&k(a,D,ge,H))}switch(p){case"input":We(a),It(a,b,!1);break;case"textarea":We(a),Ne(a);break;case"option":b.value!=null&&a.setAttribute("value",""+me(b.value));break;case"select":a.multiple=!!b.multiple,D=b.value,D!=null?ve(a,!!b.multiple,D,!1):b.defaultValue!=null&&ve(a,!!b.multiple,b.defaultValue,!0);break;default:typeof P.onClick=="function"&&(a.onclick=qe)}switch(p){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Wn(l),null;case 6:if(a&&l.stateNode!=null)Dy(a,l,a.memoizedProps,b);else{if(typeof b!="string"&&l.stateNode===null)throw Error(n(166));if(p=xl(qd.current),xl(Gr.current),wm(l)){if(b=l.stateNode,p=l.memoizedProps,b[Ja]=l,(D=b.nodeValue!==p)&&(a=Oa,a!==null))switch(a.tag){case 3:ke(b.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ke(b.nodeValue,p,(a.mode&1)!==0)}D&&(l.flags|=4)}else b=(p.nodeType===9?p:p.ownerDocument).createTextNode(b),b[Ja]=l,l.stateNode=b}return Wn(l),null;case 13:if(zs(Qs),b=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Vs&&La!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Rv(),Nc(),l.flags|=98560,D=!1;else if(D=wm(l),b!==null&&b.dehydrated!==null){if(a===null){if(!D)throw Error(n(318));if(D=l.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[Ja]=l}else Nc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wn(l),D=!1}else jr!==null&&(cx(jr),jr=null),D=!0;if(!D)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(b=b!==null,b!==(a!==null&&a.memoizedState!==null)&&b&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Qs.current&1)!==0?Nn===0&&(Nn=3):mx())),l.updateQueue!==null&&(l.flags|=4),Wn(l),null);case 4:return _c(),Yf(a,l),a===null&&mo(l.stateNode.containerInfo),Wn(l),null;case 10:return _f(l.type._context),Wn(l),null;case 17:return ma(l.type)&&vm(),Wn(l),null;case 19:if(zs(Qs),D=l.memoizedState,D===null)return Wn(l),null;if(b=(l.flags&128)!==0,H=D.rendering,H===null)if(b)Qd(D,!1);else{if(Nn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(H=Em(a),H!==null){for(l.flags|=128,Qd(D,!1),b=H.updateQueue,b!==null&&(l.updateQueue=b,l.flags|=4),l.subtreeFlags=0,b=p,p=l.child;p!==null;)D=p,a=b,D.flags&=14680066,H=D.alternate,H===null?(D.childLanes=0,D.lanes=a,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=H.childLanes,D.lanes=H.lanes,D.child=H.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=H.memoizedProps,D.memoizedState=H.memoizedState,D.updateQueue=H.updateQueue,D.type=H.type,a=H.dependencies,D.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return Fs(Qs,Qs.current&1|2),l.child}a=a.sibling}D.tail!==null&&De()>kc&&(l.flags|=128,b=!0,Qd(D,!1),l.lanes=4194304)}else{if(!b)if(a=Em(H),a!==null){if(l.flags|=128,b=!0,p=a.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),Qd(D,!0),D.tail===null&&D.tailMode==="hidden"&&!H.alternate&&!Vs)return Wn(l),null}else 2*De()-D.renderingStartTime>kc&&p!==1073741824&&(l.flags|=128,b=!0,Qd(D,!1),l.lanes=4194304);D.isBackwards?(H.sibling=l.child,l.child=H):(p=D.last,p!==null?p.sibling=H:l.child=H,D.last=H)}return D.tail!==null?(l=D.tail,D.rendering=l,D.tail=l.sibling,D.renderingStartTime=De(),l.sibling=null,p=Qs.current,Fs(Qs,b?p&1|2:p&1),l):(Wn(l),null);case 22:case 23:return ux(),b=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==b&&(l.flags|=8192),b&&(l.mode&1)!==0?(Fa&1073741824)!==0&&(Wn(l),l.subtreeFlags&6&&(l.flags|=8192)):Wn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function H_(a,l){switch(bf(l),l.tag){case 1:return ma(l.type)&&vm(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return _c(),zs(ua),zs(Hn),If(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Tf(l),null;case 13:if(zs(Qs),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Nc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return zs(Qs),null;case 4:return _c(),null;case 10:return _f(l.type._context),null;case 22:case 23:return ux(),null;case 24:return null;default:return null}}var Fm=!1,Gn=!1,q_=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Pc(a,l){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(b){sn(a,l,b)}else p.current=null}function Jf(a,l,p){try{p()}catch(b){sn(a,l,b)}}var Iy=!1;function W_(a,l){if(ot=al,a=Id(),Md(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var P=b.anchorOffset,D=b.focusNode;b=b.focusOffset;try{p.nodeType,D.nodeType}catch{p=null;break e}var H=0,ie=-1,ge=-1,Te=0,Qe=0,et=a,Ze=null;t:for(;;){for(var ut;et!==p||P!==0&&et.nodeType!==3||(ie=H+P),et!==D||b!==0&&et.nodeType!==3||(ge=H+b),et.nodeType===3&&(H+=et.nodeValue.length),(ut=et.firstChild)!==null;)Ze=et,et=ut;for(;;){if(et===a)break t;if(Ze===p&&++Te===P&&(ie=H),Ze===D&&++Qe===b&&(ge=H),(ut=et.nextSibling)!==null)break;et=Ze,Ze=et.parentNode}et=ut}p=ie===-1||ge===-1?null:{start:ie,end:ge}}else p=null}p=p||{start:0,end:0}}else p=null;for(Dt={focusedElem:a,selectionRange:p},al=!1,xt=l;xt!==null;)if(l=xt,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,xt=a;else for(;xt!==null;){l=xt;try{var vt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var yt=vt.memoizedProps,on=vt.memoizedState,_e=l.stateNode,be=_e.getSnapshotBeforeUpdate(l.elementType===l.type?yt:Nr(l.type,yt),on);_e.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var Ae=l.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(st){sn(l,l.return,st)}if(a=l.sibling,a!==null){a.return=l.return,xt=a;break}xt=l.return}return vt=Iy,Iy=!1,vt}function Xd(a,l,p){var b=l.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var P=b=b.next;do{if((P.tag&a)===a){var D=P.destroy;P.destroy=void 0,D!==void 0&&Jf(l,p,D)}P=P.next}while(P!==b)}}function $m(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&a)===a){var b=p.create;p.destroy=b()}p=p.next}while(p!==l)}}function ex(a){var l=a.ref;if(l!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof l=="function"?l(a):l.current=a}}function My(a){var l=a.alternate;l!==null&&(a.alternate=null,My(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Ja],delete l[po],delete l[fo],delete l[ff],delete l[xf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Ry(a){return a.tag===5||a.tag===3||a.tag===4}function Oy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Ry(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function tx(a,l,p){var b=a.tag;if(b===5||b===6)a=a.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(a,l):p.insertBefore(a,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(a,p)):(l=p,l.appendChild(a)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=qe));else if(b!==4&&(a=a.child,a!==null))for(tx(a,l,p),a=a.sibling;a!==null;)tx(a,l,p),a=a.sibling}function sx(a,l,p){var b=a.tag;if(b===5||b===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(b!==4&&(a=a.child,a!==null))for(sx(a,l,p),a=a.sibling;a!==null;)sx(a,l,p),a=a.sibling}var Mn=null,wr=!1;function jo(a,l,p){for(p=p.child;p!==null;)Ly(a,l,p),p=p.sibling}function Ly(a,l,p){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(rs,p)}catch{}switch(p.tag){case 5:Gn||Pc(p,l);case 6:var b=Mn,P=wr;Mn=null,jo(a,l,p),Mn=b,wr=P,Mn!==null&&(wr?(a=Mn,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):Mn.removeChild(p.stateNode));break;case 18:Mn!==null&&(wr?(a=Mn,p=p.stateNode,a.nodeType===8?Bd(a.parentNode,p):a.nodeType===1&&Bd(a,p),Ta(a)):Bd(Mn,p.stateNode));break;case 4:b=Mn,P=wr,Mn=p.stateNode.containerInfo,wr=!0,jo(a,l,p),Mn=b,wr=P;break;case 0:case 11:case 14:case 15:if(!Gn&&(b=p.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){P=b=b.next;do{var D=P,H=D.destroy;D=D.tag,H!==void 0&&((D&2)!==0||(D&4)!==0)&&Jf(p,l,H),P=P.next}while(P!==b)}jo(a,l,p);break;case 1:if(!Gn&&(Pc(p,l),b=p.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=p.memoizedProps,b.state=p.memoizedState,b.componentWillUnmount()}catch(ie){sn(p,l,ie)}jo(a,l,p);break;case 21:jo(a,l,p);break;case 22:p.mode&1?(Gn=(b=Gn)||p.memoizedState!==null,jo(a,l,p),Gn=b):jo(a,l,p);break;default:jo(a,l,p)}}function Fy(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new q_),l.forEach(function(b){var P=tA.bind(null,a,b);p.has(b)||(p.add(b),b.then(P,P))})}}function Cr(a,l){var p=l.deletions;if(p!==null)for(var b=0;b<p.length;b++){var P=p[b];try{var D=a,H=l,ie=H;e:for(;ie!==null;){switch(ie.tag){case 5:Mn=ie.stateNode,wr=!1;break e;case 3:Mn=ie.stateNode.containerInfo,wr=!0;break e;case 4:Mn=ie.stateNode.containerInfo,wr=!0;break e}ie=ie.return}if(Mn===null)throw Error(n(160));Ly(D,H,P),Mn=null,wr=!1;var ge=P.alternate;ge!==null&&(ge.return=null),P.return=null}catch(Te){sn(P,l,Te)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)$y(l,a),l=l.sibling}function $y(a,l){var p=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Cr(l,a),Kr(a),b&4){try{Xd(3,a,a.return),$m(3,a)}catch(yt){sn(a,a.return,yt)}try{Xd(5,a,a.return)}catch(yt){sn(a,a.return,yt)}}break;case 1:Cr(l,a),Kr(a),b&512&&p!==null&&Pc(p,p.return);break;case 5:if(Cr(l,a),Kr(a),b&512&&p!==null&&Pc(p,p.return),a.flags&32){var P=a.stateNode;try{$e(P,"")}catch(yt){sn(a,a.return,yt)}}if(b&4&&(P=a.stateNode,P!=null)){var D=a.memoizedProps,H=p!==null?p.memoizedProps:D,ie=a.type,ge=a.updateQueue;if(a.updateQueue=null,ge!==null)try{ie==="input"&&D.type==="radio"&&D.name!=null&&wt(P,D),ht(ie,H);var Te=ht(ie,D);for(H=0;H<ge.length;H+=2){var Qe=ge[H],et=ge[H+1];Qe==="style"?Ye(P,et):Qe==="dangerouslySetInnerHTML"?pe(P,et):Qe==="children"?$e(P,et):k(P,Qe,et,Te)}switch(ie){case"input":pt(P,D);break;case"textarea":de(P,D);break;case"select":var Ze=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!D.multiple;var ut=D.value;ut!=null?ve(P,!!D.multiple,ut,!1):Ze!==!!D.multiple&&(D.defaultValue!=null?ve(P,!!D.multiple,D.defaultValue,!0):ve(P,!!D.multiple,D.multiple?[]:"",!1))}P[po]=D}catch(yt){sn(a,a.return,yt)}}break;case 6:if(Cr(l,a),Kr(a),b&4){if(a.stateNode===null)throw Error(n(162));P=a.stateNode,D=a.memoizedProps;try{P.nodeValue=D}catch(yt){sn(a,a.return,yt)}}break;case 3:if(Cr(l,a),Kr(a),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Ta(l.containerInfo)}catch(yt){sn(a,a.return,yt)}break;case 4:Cr(l,a),Kr(a);break;case 13:Cr(l,a),Kr(a),P=a.child,P.flags&8192&&(D=P.memoizedState!==null,P.stateNode.isHidden=D,!D||P.alternate!==null&&P.alternate.memoizedState!==null||(rx=De())),b&4&&Fy(a);break;case 22:if(Qe=p!==null&&p.memoizedState!==null,a.mode&1?(Gn=(Te=Gn)||Qe,Cr(l,a),Gn=Te):Cr(l,a),Kr(a),b&8192){if(Te=a.memoizedState!==null,(a.stateNode.isHidden=Te)&&!Qe&&(a.mode&1)!==0)for(xt=a,Qe=a.child;Qe!==null;){for(et=xt=Qe;xt!==null;){switch(Ze=xt,ut=Ze.child,Ze.tag){case 0:case 11:case 14:case 15:Xd(4,Ze,Ze.return);break;case 1:Pc(Ze,Ze.return);var vt=Ze.stateNode;if(typeof vt.componentWillUnmount=="function"){b=Ze,p=Ze.return;try{l=b,vt.props=l.memoizedProps,vt.state=l.memoizedState,vt.componentWillUnmount()}catch(yt){sn(b,p,yt)}}break;case 5:Pc(Ze,Ze.return);break;case 22:if(Ze.memoizedState!==null){Uy(et);continue}}ut!==null?(ut.return=Ze,xt=ut):Uy(et)}Qe=Qe.sibling}e:for(Qe=null,et=a;;){if(et.tag===5){if(Qe===null){Qe=et;try{P=et.stateNode,Te?(D=P.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ie=et.stateNode,ge=et.memoizedProps.style,H=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,ie.style.display=fe("display",H))}catch(yt){sn(a,a.return,yt)}}}else if(et.tag===6){if(Qe===null)try{et.stateNode.nodeValue=Te?"":et.memoizedProps}catch(yt){sn(a,a.return,yt)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===a)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===a)break e;for(;et.sibling===null;){if(et.return===null||et.return===a)break e;Qe===et&&(Qe=null),et=et.return}Qe===et&&(Qe=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:Cr(l,a),Kr(a),b&4&&Fy(a);break;case 21:break;default:Cr(l,a),Kr(a)}}function Kr(a){var l=a.flags;if(l&2){try{e:{for(var p=a.return;p!==null;){if(Ry(p)){var b=p;break e}p=p.return}throw Error(n(160))}switch(b.tag){case 5:var P=b.stateNode;b.flags&32&&($e(P,""),b.flags&=-33);var D=Oy(a);sx(a,D,P);break;case 3:case 4:var H=b.stateNode.containerInfo,ie=Oy(a);tx(a,ie,H);break;default:throw Error(n(161))}}catch(ge){sn(a,a.return,ge)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function G_(a,l,p){xt=a,zy(a)}function zy(a,l,p){for(var b=(a.mode&1)!==0;xt!==null;){var P=xt,D=P.child;if(P.tag===22&&b){var H=P.memoizedState!==null||Fm;if(!H){var ie=P.alternate,ge=ie!==null&&ie.memoizedState!==null||Gn;ie=Fm;var Te=Gn;if(Fm=H,(Gn=ge)&&!Te)for(xt=P;xt!==null;)H=xt,ge=H.child,H.tag===22&&H.memoizedState!==null?Vy(P):ge!==null?(ge.return=H,xt=ge):Vy(P);for(;D!==null;)xt=D,zy(D),D=D.sibling;xt=P,Fm=ie,Gn=Te}By(a)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,xt=D):By(a)}}function By(a){for(;xt!==null;){var l=xt;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Gn||$m(5,l);break;case 1:var b=l.stateNode;if(l.flags&4&&!Gn)if(p===null)b.componentDidMount();else{var P=l.elementType===l.type?p.memoizedProps:Nr(l.type,p.memoizedProps);b.componentDidUpdate(P,p.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var D=l.updateQueue;D!==null&&Uv(l,D,b);break;case 3:var H=l.updateQueue;if(H!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}Uv(l,H,p)}break;case 5:var ie=l.stateNode;if(p===null&&l.flags&4){p=ie;var ge=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&p.focus();break;case"img":ge.src&&(p.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Te=l.alternate;if(Te!==null){var Qe=Te.memoizedState;if(Qe!==null){var et=Qe.dehydrated;et!==null&&Ta(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Gn||l.flags&512&&ex(l)}catch(Ze){sn(l,l.return,Ze)}}if(l===a){xt=null;break}if(p=l.sibling,p!==null){p.return=l.return,xt=p;break}xt=l.return}}function Uy(a){for(;xt!==null;){var l=xt;if(l===a){xt=null;break}var p=l.sibling;if(p!==null){p.return=l.return,xt=p;break}xt=l.return}}function Vy(a){for(;xt!==null;){var l=xt;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{$m(4,l)}catch(ge){sn(l,p,ge)}break;case 1:var b=l.stateNode;if(typeof b.componentDidMount=="function"){var P=l.return;try{b.componentDidMount()}catch(ge){sn(l,P,ge)}}var D=l.return;try{ex(l)}catch(ge){sn(l,D,ge)}break;case 5:var H=l.return;try{ex(l)}catch(ge){sn(l,H,ge)}}}catch(ge){sn(l,l.return,ge)}if(l===a){xt=null;break}var ie=l.sibling;if(ie!==null){ie.return=l.return,xt=ie;break}xt=l.return}}var Z_=Math.ceil,zm=T.ReactCurrentDispatcher,nx=T.ReactCurrentOwner,ar=T.ReactCurrentBatchConfig,gs=0,An=null,pn=null,Rn=0,Fa=0,Ec=xo(0),Nn=0,Yd=null,vl=0,Bm=0,ax=0,Jd=null,pa=null,rx=0,kc=1/0,Mi=null,Um=!1,ix=null,No=null,Vm=!1,wo=null,Hm=0,eu=0,ox=null,qm=-1,Wm=0;function ea(){return(gs&6)!==0?De():qm!==-1?qm:qm=De()}function Co(a){return(a.mode&1)===0?1:(gs&2)!==0&&Rn!==0?Rn&-Rn:T_.transition!==null?(Wm===0&&(Wm=Ku()),Wm):(a=ps,a!==0||(a=window.event,a=a===void 0?16:ls(a.type)),a)}function Sr(a,l,p,b){if(50<eu)throw eu=0,ox=null,Error(n(185));Ea(a,p,b),((gs&2)===0||a!==An)&&(a===An&&((gs&2)===0&&(Bm|=p),Nn===4&&So(a,Rn)),fa(a,b),p===1&&gs===0&&(l.mode&1)===0&&(kc=De()+500,bm&&vo()))}function fa(a,l){var p=a.callbackNode;Ql(a,l);var b=Ls(a,a===An?Rn:0);if(b===0)p!==null&&Jo(p),a.callbackNode=null,a.callbackPriority=0;else if(l=b&-b,a.callbackPriority!==l){if(p!=null&&Jo(p),l===1)a.tag===0?k_(qy.bind(null,a)):kv(qy.bind(null,a)),Vn(function(){(gs&6)===0&&vo()}),p=null;else{switch(Yi(b)){case 1:p=bs;break;case 4:p=Zt;break;case 16:p=Zs;break;case 536870912:p=mn;break;default:p=Zs}p=Jy(p,Hy.bind(null,a))}a.callbackPriority=l,a.callbackNode=p}}function Hy(a,l){if(qm=-1,Wm=0,(gs&6)!==0)throw Error(n(327));var p=a.callbackNode;if(Tc()&&a.callbackNode!==p)return null;var b=Ls(a,a===An?Rn:0);if(b===0)return null;if((b&30)!==0||(b&a.expiredLanes)!==0||l)l=Gm(a,b);else{l=b;var P=gs;gs|=2;var D=Gy();(An!==a||Rn!==l)&&(Mi=null,kc=De()+500,bl(a,l));do try{X_();break}catch(ie){Wy(a,ie)}while(!0);Sf(),zm.current=D,gs=P,pn!==null?l=0:(An=null,Rn=0,l=Nn)}if(l!==0){if(l===2&&(P=Bn(a),P!==0&&(b=P,l=lx(a,P))),l===1)throw p=Yd,bl(a,0),So(a,b),fa(a,De()),p;if(l===6)So(a,b);else{if(P=a.current.alternate,(b&30)===0&&!K_(P)&&(l=Gm(a,b),l===2&&(D=Bn(a),D!==0&&(b=D,l=lx(a,D))),l===1))throw p=Yd,bl(a,0),So(a,b),fa(a,De()),p;switch(a.finishedWork=P,a.finishedLanes=b,l){case 0:case 1:throw Error(n(345));case 2:jl(a,pa,Mi);break;case 3:if(So(a,b),(b&130023424)===b&&(l=rx+500-De(),10<l)){if(Ls(a,0)!==0)break;if(P=a.suspendedLanes,(P&b)!==b){ea(),a.pingedLanes|=a.suspendedLanes&P;break}a.timeoutHandle=bn(jl.bind(null,a,pa,Mi),l);break}jl(a,pa,Mi);break;case 4:if(So(a,b),(b&4194240)===b)break;for(l=a.eventTimes,P=-1;0<b;){var H=31-ft(b);D=1<<H,H=l[H],H>P&&(P=H),b&=~D}if(b=P,b=De()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Z_(b/1960))-b,10<b){a.timeoutHandle=bn(jl.bind(null,a,pa,Mi),b);break}jl(a,pa,Mi);break;case 5:jl(a,pa,Mi);break;default:throw Error(n(329))}}}return fa(a,De()),a.callbackNode===p?Hy.bind(null,a):null}function lx(a,l){var p=Jd;return a.current.memoizedState.isDehydrated&&(bl(a,l).flags|=256),a=Gm(a,l),a!==2&&(l=pa,pa=p,l!==null&&cx(l)),a}function cx(a){pa===null?pa=a:pa.push.apply(pa,a)}function K_(a){for(var l=a;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var b=0;b<p.length;b++){var P=p[b],D=P.getSnapshot;P=P.value;try{if(!Ma(D(),P))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function So(a,l){for(l&=~ax,l&=~Bm,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var p=31-ft(l),b=1<<p;a[p]=-1,l&=~b}}function qy(a){if((gs&6)!==0)throw Error(n(327));Tc();var l=Ls(a,0);if((l&1)===0)return fa(a,De()),null;var p=Gm(a,l);if(a.tag!==0&&p===2){var b=Bn(a);b!==0&&(l=b,p=lx(a,b))}if(p===1)throw p=Yd,bl(a,0),So(a,l),fa(a,De()),p;if(p===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,jl(a,pa,Mi),fa(a,De()),null}function dx(a,l){var p=gs;gs|=1;try{return a(l)}finally{gs=p,gs===0&&(kc=De()+500,bm&&vo())}}function yl(a){wo!==null&&wo.tag===0&&(gs&6)===0&&Tc();var l=gs;gs|=1;var p=ar.transition,b=ps;try{if(ar.transition=null,ps=1,a)return a()}finally{ps=b,ar.transition=p,gs=l,(gs&6)===0&&vo()}}function ux(){Fa=Ec.current,zs(Ec)}function bl(a,l){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,hn(p)),pn!==null)for(p=pn.return;p!==null;){var b=p;switch(bf(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&vm();break;case 3:_c(),zs(ua),zs(Hn),If();break;case 5:Tf(b);break;case 4:_c();break;case 13:zs(Qs);break;case 19:zs(Qs);break;case 10:_f(b.type._context);break;case 22:case 23:ux()}p=p.return}if(An=a,pn=a=_o(a.current,null),Rn=Fa=l,Nn=0,Yd=null,ax=Bm=vl=0,pa=Jd=null,fl!==null){for(l=0;l<fl.length;l++)if(p=fl[l],b=p.interleaved,b!==null){p.interleaved=null;var P=b.next,D=p.pending;if(D!==null){var H=D.next;D.next=P,b.next=H}p.pending=b}fl=null}return a}function Wy(a,l){do{var p=pn;try{if(Sf(),km.current=Mm,Tm){for(var b=Xs.memoizedState;b!==null;){var P=b.queue;P!==null&&(P.pending=null),b=b.next}Tm=!1}if(gl=0,_n=jn=Xs=null,Wd=!1,Gd=0,nx.current=null,p===null||p.return===null){Nn=1,Yd=l,pn=null;break}e:{var D=a,H=p.return,ie=p,ge=l;if(l=Rn,ie.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Te=ge,Qe=ie,et=Qe.tag;if((Qe.mode&1)===0&&(et===0||et===11||et===15)){var Ze=Qe.alternate;Ze?(Qe.updateQueue=Ze.updateQueue,Qe.memoizedState=Ze.memoizedState,Qe.lanes=Ze.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var ut=gy(H);if(ut!==null){ut.flags&=-257,vy(ut,H,ie,D,l),ut.mode&1&&xy(D,Te,l),l=ut,ge=Te;var vt=l.updateQueue;if(vt===null){var yt=new Set;yt.add(ge),l.updateQueue=yt}else vt.add(ge);break e}else{if((l&1)===0){xy(D,Te,l),mx();break e}ge=Error(n(426))}}else if(Vs&&ie.mode&1){var on=gy(H);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),vy(on,H,ie,D,l),wf(Ac(ge,ie));break e}}D=ge=Ac(ge,ie),Nn!==4&&(Nn=2),Jd===null?Jd=[D]:Jd.push(D),D=H;do{switch(D.tag){case 3:D.flags|=65536,l&=-l,D.lanes|=l;var _e=py(D,ge,l);Bv(D,_e);break e;case 1:ie=ge;var be=D.type,Ae=D.stateNode;if((D.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(No===null||!No.has(Ae)))){D.flags|=65536,l&=-l,D.lanes|=l;var st=fy(D,ie,l);Bv(D,st);break e}}D=D.return}while(D!==null)}Ky(p)}catch(jt){l=jt,pn===p&&p!==null&&(pn=p=p.return);continue}break}while(!0)}function Gy(){var a=zm.current;return zm.current=Mm,a===null?Mm:a}function mx(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),An===null||(vl&268435455)===0&&(Bm&268435455)===0||So(An,Rn)}function Gm(a,l){var p=gs;gs|=2;var b=Gy();(An!==a||Rn!==l)&&(Mi=null,bl(a,l));do try{Q_();break}catch(P){Wy(a,P)}while(!0);if(Sf(),gs=p,zm.current=b,pn!==null)throw Error(n(261));return An=null,Rn=0,Nn}function Q_(){for(;pn!==null;)Zy(pn)}function X_(){for(;pn!==null&&!gd();)Zy(pn)}function Zy(a){var l=Yy(a.alternate,a,Fa);a.memoizedProps=a.pendingProps,l===null?Ky(a):pn=l,nx.current=null}function Ky(a){var l=a;do{var p=l.alternate;if(a=l.return,(l.flags&32768)===0){if(p=V_(p,l,Fa),p!==null){pn=p;return}}else{if(p=H_(p,l),p!==null){p.flags&=32767,pn=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Nn=6,pn=null;return}}if(l=l.sibling,l!==null){pn=l;return}pn=l=a}while(l!==null);Nn===0&&(Nn=5)}function jl(a,l,p){var b=ps,P=ar.transition;try{ar.transition=null,ps=1,Y_(a,l,p,b)}finally{ar.transition=P,ps=b}return null}function Y_(a,l,p,b){do Tc();while(wo!==null);if((gs&6)!==0)throw Error(n(327));p=a.finishedWork;var P=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var D=p.lanes|p.childLanes;if(tn(a,D),a===An&&(pn=An=null,Rn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Vm||(Vm=!0,Jy(Zs,function(){return Tc(),null})),D=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||D){D=ar.transition,ar.transition=null;var H=ps;ps=1;var ie=gs;gs|=4,nx.current=null,W_(a,p),$y(p,a),Xa(Dt),al=!!ot,Dt=ot=null,a.current=p,G_(p),le(),gs=ie,ps=H,ar.transition=D}else a.current=p;if(Vm&&(Vm=!1,wo=a,Hm=P),D=a.pendingLanes,D===0&&(No=null),Ts(p.stateNode),fa(a,De()),l!==null)for(b=a.onRecoverableError,p=0;p<l.length;p++)P=l[p],b(P.value,{componentStack:P.stack,digest:P.digest});if(Um)throw Um=!1,a=ix,ix=null,a;return(Hm&1)!==0&&a.tag!==0&&Tc(),D=a.pendingLanes,(D&1)!==0?a===ox?eu++:(eu=0,ox=a):eu=0,vo(),null}function Tc(){if(wo!==null){var a=Yi(Hm),l=ar.transition,p=ps;try{if(ar.transition=null,ps=16>a?16:a,wo===null)var b=!1;else{if(a=wo,wo=null,Hm=0,(gs&6)!==0)throw Error(n(331));var P=gs;for(gs|=4,xt=a.current;xt!==null;){var D=xt,H=D.child;if((xt.flags&16)!==0){var ie=D.deletions;if(ie!==null){for(var ge=0;ge<ie.length;ge++){var Te=ie[ge];for(xt=Te;xt!==null;){var Qe=xt;switch(Qe.tag){case 0:case 11:case 15:Xd(8,Qe,D)}var et=Qe.child;if(et!==null)et.return=Qe,xt=et;else for(;xt!==null;){Qe=xt;var Ze=Qe.sibling,ut=Qe.return;if(My(Qe),Qe===Te){xt=null;break}if(Ze!==null){Ze.return=ut,xt=Ze;break}xt=ut}}}var vt=D.alternate;if(vt!==null){var yt=vt.child;if(yt!==null){vt.child=null;do{var on=yt.sibling;yt.sibling=null,yt=on}while(yt!==null)}}xt=D}}if((D.subtreeFlags&2064)!==0&&H!==null)H.return=D,xt=H;else e:for(;xt!==null;){if(D=xt,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Xd(9,D,D.return)}var _e=D.sibling;if(_e!==null){_e.return=D.return,xt=_e;break e}xt=D.return}}var be=a.current;for(xt=be;xt!==null;){H=xt;var Ae=H.child;if((H.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=H,xt=Ae;else e:for(H=be;xt!==null;){if(ie=xt,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:$m(9,ie)}}catch(jt){sn(ie,ie.return,jt)}if(ie===H){xt=null;break e}var st=ie.sibling;if(st!==null){st.return=ie.return,xt=st;break e}xt=ie.return}}if(gs=P,vo(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(rs,a)}catch{}b=!0}return b}finally{ps=p,ar.transition=l}}return!1}function Qy(a,l,p){l=Ac(p,l),l=py(a,l,1),a=bo(a,l,1),l=ea(),a!==null&&(Ea(a,1,l),fa(a,l))}function sn(a,l,p){if(a.tag===3)Qy(a,a,p);else for(;l!==null;){if(l.tag===3){Qy(l,a,p);break}else if(l.tag===1){var b=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(No===null||!No.has(b))){a=Ac(p,a),a=fy(l,a,1),l=bo(l,a,1),a=ea(),l!==null&&(Ea(l,1,a),fa(l,a));break}}l=l.return}}function J_(a,l,p){var b=a.pingCache;b!==null&&b.delete(l),l=ea(),a.pingedLanes|=a.suspendedLanes&p,An===a&&(Rn&p)===p&&(Nn===4||Nn===3&&(Rn&130023424)===Rn&&500>De()-rx?bl(a,0):ax|=p),fa(a,l)}function Xy(a,l){l===0&&((a.mode&1)===0?l=1:(l=Qi,Qi<<=1,(Qi&130023424)===0&&(Qi=4194304)));var p=ea();a=Ti(a,l),a!==null&&(Ea(a,l,p),fa(a,p))}function eA(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),Xy(a,p)}function tA(a,l){var p=0;switch(a.tag){case 13:var b=a.stateNode,P=a.memoizedState;P!==null&&(p=P.retryLane);break;case 19:b=a.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(l),Xy(a,p)}var Yy;Yy=function(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps||ua.current)ha=!0;else{if((a.lanes&p)===0&&(l.flags&128)===0)return ha=!1,U_(a,l,p);ha=(a.flags&131072)!==0}else ha=!1,Vs&&(l.flags&1048576)!==0&&Tv(l,Nm,l.index);switch(l.lanes=0,l.tag){case 2:var b=l.type;Lm(a,l),a=l.pendingProps;var P=yc(l,Hn.current);Sc(l,p),P=Of(null,l,b,a,P,p);var D=Lf();return l.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ma(b)?(D=!0,ym(l)):D=!1,l.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Ef(l),P.updater=Rm,l.stateNode=P,P._reactInternals=l,Vf(l,b,a,p),l=Gf(null,l,b,!0,D,p)):(l.tag=0,Vs&&D&&yf(l),Jn(null,l,P,p),l=l.child),l;case 16:b=l.elementType;e:{switch(Lm(a,l),a=l.pendingProps,P=b._init,b=P(b._payload),l.type=b,P=l.tag=nA(b),a=Nr(b,a),P){case 0:l=Wf(null,l,b,a,p);break e;case 1:l=Cy(null,l,b,a,p);break e;case 11:l=yy(null,l,b,a,p);break e;case 14:l=by(null,l,b,Nr(b.type,a),p);break e}throw Error(n(306,b,""))}return l;case 0:return b=l.type,P=l.pendingProps,P=l.elementType===b?P:Nr(b,P),Wf(a,l,b,P,p);case 1:return b=l.type,P=l.pendingProps,P=l.elementType===b?P:Nr(b,P),Cy(a,l,b,P,p);case 3:e:{if(Sy(l),a===null)throw Error(n(387));b=l.pendingProps,D=l.memoizedState,P=D.element,zv(a,l),Pm(l,b,null,p);var H=l.memoizedState;if(b=H.element,D.isDehydrated)if(D={element:b,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){P=Ac(Error(n(423)),l),l=_y(a,l,b,p,P);break e}else if(b!==P){P=Ac(Error(n(424)),l),l=_y(a,l,b,p,P);break e}else for(La=Wr(l.stateNode.containerInfo.firstChild),Oa=l,Vs=!0,jr=null,p=Fv(l,null,b,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Nc(),b===P){l=Ii(a,l,p);break e}Jn(a,l,b,p)}l=l.child}return l;case 5:return Vv(l),a===null&&Nf(l),b=l.type,P=l.pendingProps,D=a!==null?a.memoizedProps:null,H=P.children,Kt(b,P)?H=null:D!==null&&Kt(b,D)&&(l.flags|=32),wy(a,l),Jn(a,l,H,p),l.child;case 6:return a===null&&Nf(l),null;case 13:return Ay(a,l,p);case 4:return kf(l,l.stateNode.containerInfo),b=l.pendingProps,a===null?l.child=wc(l,null,b,p):Jn(a,l,b,p),l.child;case 11:return b=l.type,P=l.pendingProps,P=l.elementType===b?P:Nr(b,P),yy(a,l,b,P,p);case 7:return Jn(a,l,l.pendingProps,p),l.child;case 8:return Jn(a,l,l.pendingProps.children,p),l.child;case 12:return Jn(a,l,l.pendingProps.children,p),l.child;case 10:e:{if(b=l.type._context,P=l.pendingProps,D=l.memoizedProps,H=P.value,Fs(Sm,b._currentValue),b._currentValue=H,D!==null)if(Ma(D.value,H)){if(D.children===P.children&&!ua.current){l=Ii(a,l,p);break e}}else for(D=l.child,D!==null&&(D.return=l);D!==null;){var ie=D.dependencies;if(ie!==null){H=D.child;for(var ge=ie.firstContext;ge!==null;){if(ge.context===b){if(D.tag===1){ge=Di(-1,p&-p),ge.tag=2;var Te=D.updateQueue;if(Te!==null){Te=Te.shared;var Qe=Te.pending;Qe===null?ge.next=ge:(ge.next=Qe.next,Qe.next=ge),Te.pending=ge}}D.lanes|=p,ge=D.alternate,ge!==null&&(ge.lanes|=p),Af(D.return,p,l),ie.lanes|=p;break}ge=ge.next}}else if(D.tag===10)H=D.type===l.type?null:D.child;else if(D.tag===18){if(H=D.return,H===null)throw Error(n(341));H.lanes|=p,ie=H.alternate,ie!==null&&(ie.lanes|=p),Af(H,p,l),H=D.sibling}else H=D.child;if(H!==null)H.return=D;else for(H=D;H!==null;){if(H===l){H=null;break}if(D=H.sibling,D!==null){D.return=H.return,H=D;break}H=H.return}D=H}Jn(a,l,P.children,p),l=l.child}return l;case 9:return P=l.type,b=l.pendingProps.children,Sc(l,p),P=sr(P),b=b(P),l.flags|=1,Jn(a,l,b,p),l.child;case 14:return b=l.type,P=Nr(b,l.pendingProps),P=Nr(b.type,P),by(a,l,b,P,p);case 15:return jy(a,l,l.type,l.pendingProps,p);case 17:return b=l.type,P=l.pendingProps,P=l.elementType===b?P:Nr(b,P),Lm(a,l),l.tag=1,ma(b)?(a=!0,ym(l)):a=!1,Sc(l,p),my(l,b,P),Vf(l,b,P,p),Gf(null,l,b,!0,a,p);case 19:return Ey(a,l,p);case 22:return Ny(a,l,p)}throw Error(n(156,l.tag))};function Jy(a,l){return Kl(a,l)}function sA(a,l,p,b){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(a,l,p,b){return new sA(a,l,p,b)}function hx(a){return a=a.prototype,!(!a||!a.isReactComponent)}function nA(a){if(typeof a=="function")return hx(a)?1:0;if(a!=null){if(a=a.$$typeof,a===I)return 11;if(a===ue)return 14}return 2}function _o(a,l){var p=a.alternate;return p===null?(p=rr(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function Zm(a,l,p,b,P,D){var H=2;if(b=a,typeof a=="function")hx(a)&&(H=1);else if(typeof a=="string")H=5;else e:switch(a){case O:return Nl(p.children,P,D,l);case Z:H=8,P|=8;break;case q:return a=rr(12,p,l,P|2),a.elementType=q,a.lanes=D,a;case B:return a=rr(13,p,l,P),a.elementType=B,a.lanes=D,a;case te:return a=rr(19,p,l,P),a.elementType=te,a.lanes=D,a;case ce:return Km(p,P,D,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case $:H=10;break e;case X:H=9;break e;case I:H=11;break e;case ue:H=14;break e;case Y:H=16,b=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return l=rr(H,p,l,P),l.elementType=a,l.type=b,l.lanes=D,l}function Nl(a,l,p,b){return a=rr(7,a,b,l),a.lanes=p,a}function Km(a,l,p,b){return a=rr(22,a,b,l),a.elementType=ce,a.lanes=p,a.stateNode={isHidden:!1},a}function px(a,l,p){return a=rr(6,a,null,l),a.lanes=p,a}function fx(a,l,p){return l=rr(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function aA(a,l,p,b,P){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xi(0),this.expirationTimes=Xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.identifierPrefix=b,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function xx(a,l,p,b,P,D,H,ie,ge){return a=new aA(a,l,p,ie,ge),l===1?(l=1,D===!0&&(l|=8)):l=0,D=rr(3,null,null,l),a.current=D,D.stateNode=a,D.memoizedState={element:b,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ef(D),a}function rA(a,l,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:b==null?null:""+b,children:a,containerInfo:l,implementation:p}}function eb(a){if(!a)return go;a=a._reactInternals;e:{if(Cs(a)!==a||a.tag!==1)throw Error(n(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ma(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(a.tag===1){var p=a.type;if(ma(p))return Pv(a,p,l)}return l}function tb(a,l,p,b,P,D,H,ie,ge){return a=xx(p,b,!0,a,P,D,H,ie,ge),a.context=eb(null),p=a.current,b=ea(),P=Co(p),D=Di(b,P),D.callback=l??null,bo(p,D,P),a.current.lanes=P,Ea(a,P,b),fa(a,b),a}function Qm(a,l,p,b){var P=l.current,D=ea(),H=Co(P);return p=eb(p),l.context===null?l.context=p:l.pendingContext=p,l=Di(D,H),l.payload={element:a},b=b===void 0?null:b,b!==null&&(l.callback=b),a=bo(P,l,H),a!==null&&(Sr(a,P,H,D),Am(a,P,H)),H}function Xm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function sb(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function gx(a,l){sb(a,l),(a=a.alternate)&&sb(a,l)}function iA(){return null}var nb=typeof reportError=="function"?reportError:function(a){console.error(a)};function vx(a){this._internalRoot=a}Ym.prototype.render=vx.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));Qm(a,l,null,null)},Ym.prototype.unmount=vx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;yl(function(){Qm(null,a,null,null)}),l[Ss]=null}};function Ym(a){this._internalRoot=a}Ym.prototype.unstable_scheduleHydration=function(a){if(a){var l=Jl();a={blockedOn:null,target:a,priority:l};for(var p=0;p<yn.length&&l!==0&&l<yn[p].priority;p++);yn.splice(p,0,a),p===0&&ec(a)}};function yx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Jm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ab(){}function oA(a,l,p,b,P){if(P){if(typeof b=="function"){var D=b;b=function(){var Te=Xm(H);D.call(Te)}}var H=tb(l,b,a,0,null,!1,!1,"",ab);return a._reactRootContainer=H,a[Ss]=H.current,mo(a.nodeType===8?a.parentNode:a),yl(),H}for(;P=a.lastChild;)a.removeChild(P);if(typeof b=="function"){var ie=b;b=function(){var Te=Xm(ge);ie.call(Te)}}var ge=xx(a,0,!1,null,null,!1,!1,"",ab);return a._reactRootContainer=ge,a[Ss]=ge.current,mo(a.nodeType===8?a.parentNode:a),yl(function(){Qm(l,ge,p,b)}),ge}function eh(a,l,p,b,P){var D=p._reactRootContainer;if(D){var H=D;if(typeof P=="function"){var ie=P;P=function(){var ge=Xm(H);ie.call(ge)}}Qm(l,H,a,P)}else H=oA(p,l,a,P,b);return Xm(H)}Xl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var p=Ht(l.pendingLanes);p!==0&&(xr(l,p|1),fa(l,De()),(gs&6)===0&&(kc=De()+500,vo()))}break;case 13:yl(function(){var b=Ti(a,1);if(b!==null){var P=ea();Sr(b,a,1,P)}}),gx(a,1)}},xi=function(a){if(a.tag===13){var l=Ti(a,134217728);if(l!==null){var p=ea();Sr(l,a,134217728,p)}gx(a,134217728)}},Yl=function(a){if(a.tag===13){var l=Co(a),p=Ti(a,l);if(p!==null){var b=ea();Sr(p,a,l,b)}gx(a,l)}},Jl=function(){return ps},el=function(a,l){var p=ps;try{return ps=a,l()}finally{ps=p}},hs=function(a,l,p){switch(l){case"input":if(pt(a,p),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var b=p[l];if(b!==a&&b.form===a.form){var P=gc(b);if(!P)throw Error(n(90));Je(b),pt(b,P)}}}break;case"textarea":de(a,p);break;case"select":l=p.value,l!=null&&ve(a,!!p.multiple,l,!1)}},Wt=dx,Es=yl;var lA={usingClientEntryPoint:!1,Events:[_i,Ai,gc,Ct,Mt,dx]},tu={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cA={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Yo(a),a===null?null:a.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||iA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{rs=th.inject(cA),St=th}catch{}}return xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA,xa.createPortal=function(a,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yx(l))throw Error(n(200));return rA(a,l,null,p)},xa.createRoot=function(a,l){if(!yx(a))throw Error(n(299));var p=!1,b="",P=nb;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=xx(a,1,!1,null,null,p,!1,b,P),a[Ss]=l.current,mo(a.nodeType===8?a.parentNode:a),new vx(l)},xa.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Yo(l),a=a===null?null:a.stateNode,a},xa.flushSync=function(a){return yl(a)},xa.hydrate=function(a,l,p){if(!Jm(l))throw Error(n(200));return eh(null,a,l,!0,p)},xa.hydrateRoot=function(a,l,p){if(!yx(a))throw Error(n(405));var b=p!=null&&p.hydratedSources||null,P=!1,D="",H=nb;if(p!=null&&(p.unstable_strictMode===!0&&(P=!0),p.identifierPrefix!==void 0&&(D=p.identifierPrefix),p.onRecoverableError!==void 0&&(H=p.onRecoverableError)),l=tb(l,null,a,1,p??null,P,!1,D,H),a[Ss]=l.current,mo(a),b)for(a=0;a<b.length;a++)p=b[a],P=p._getVersion,P=P(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,P]:l.mutableSourceEagerHydrationData.push(p,P);return new Ym(l)},xa.render=function(a,l,p){if(!Jm(l))throw Error(n(200));return eh(null,a,l,!1,p)},xa.unmountComponentAtNode=function(a){if(!Jm(a))throw Error(n(40));return a._reactRootContainer?(yl(function(){eh(null,null,a,!1,function(){a._reactRootContainer=null,a[Ss]=null})}),!0):!1},xa.unstable_batchedUpdates=dx,xa.unstable_renderSubtreeIntoContainer=function(a,l,p,b){if(!Jm(p))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return eh(a,l,p,!1,b)},xa.version="18.3.1-next-f1338f8080-20240426",xa}var mb;function RN(){if(mb)return Nx.exports;mb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Nx.exports=gA(),Nx.exports}var hb;function vA(){if(hb)return sh;hb=1;var t=RN();return sh.createRoot=t.createRoot,sh.hydrateRoot=t.hydrateRoot,sh}var yA=vA(),m=Kg();const Ue=Zg(m),Qg=uA({__proto__:null,default:Ue},[m]);var sd=RN();const ON=Zg(sd);function bA(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const jA=t=>{switch(t){case"success":return CA;case"info":return _A;case"warning":return SA;case"error":return AA;default:return null}},NA=Array(12).fill(0),wA=({visible:t,className:s})=>Ue.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Ue.createElement("div",{className:"sonner-spinner"},NA.map((n,r)=>Ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),CA=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),SA=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_A=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),AA=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PA=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),EA=()=>{const[t,s]=Ue.useState(document.hidden);return Ue.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let pg=1;class kA{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:r,...o}=s,c=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:pg++,u=this.toasts.find(f=>f.id===c),h=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),u?this.toasts=this.toasts.map(f=>f.id===c?(this.publish({...f,...s,id:c,title:r}),{...f,...s,id:c,dismissible:h,title:r}):f):this.addToast({title:r,...o,dismissible:h,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(s instanceof Function?s():s);let c=r!==void 0,u;const h=o.then(async v=>{if(u=["resolve",v],Ue.isValidElement(v))c=!1,this.create({id:r,type:"default",message:v});else if(DA(v)&&!v.ok){c=!1;const g=typeof n.error=="function"?await n.error(`HTTP error! status: ${v.status}`):n.error,j=typeof n.description=="function"?await n.description(`HTTP error! status: ${v.status}`):n.description,N=typeof g=="object"&&!Ue.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:j,...N})}else if(v instanceof Error){c=!1;const g=typeof n.error=="function"?await n.error(v):n.error,j=typeof n.description=="function"?await n.description(v):n.description,N=typeof g=="object"&&!Ue.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:j,...N})}else if(n.success!==void 0){c=!1;const g=typeof n.success=="function"?await n.success(v):n.success,j=typeof n.description=="function"?await n.description(v):n.description,N=typeof g=="object"&&!Ue.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:j,...N})}}).catch(async v=>{if(u=["reject",v],n.error!==void 0){c=!1;const x=typeof n.error=="function"?await n.error(v):n.error,g=typeof n.description=="function"?await n.description(v):n.description,w=typeof x=="object"&&!Ue.isValidElement(x)?x:{message:x};this.create({id:r,type:"error",description:g,...w})}}).finally(()=>{c&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((v,x)=>h.then(()=>u[0]==="reject"?x(u[1]):v(u[1])).catch(x));return typeof r!="string"&&typeof r!="number"?{unwrap:f}:Object.assign(r,{unwrap:f})},this.custom=(s,n)=>{const r=n?.id||pg++;return this.create({jsx:s(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const va=new kA,TA=(t,s)=>{const n=s?.id||pg++;return va.addToast({title:t,...s,id:n}),n},DA=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",IA=TA,MA=()=>va.toasts,RA=()=>va.getActiveToasts(),ye=Object.assign(IA,{success:va.success,info:va.info,warning:va.warning,error:va.error,custom:va.custom,message:va.message,promise:va.promise,dismiss:va.dismiss,loading:va.loading},{getHistory:MA,getToasts:RA});bA("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function nh(t){return t.label!==void 0}const OA=3,LA="24px",FA="16px",pb=4e3,$A=356,zA=14,BA=45,UA=200;function Qr(...t){return t.filter(Boolean).join(" ")}function VA(t){const[s,n]=t.split("-"),r=[];return s&&r.push(s),n&&r.push(n),r}const HA=t=>{var s,n,r,o,c,u,h,f,v;const{invert:x,toast:g,unstyled:j,interacting:w,setHeights:N,visibleToasts:C,heights:S,index:E,toasts:_,expanded:k,removeToast:T,defaultRichColors:M,closeButton:F,style:O,cancelButtonStyle:Z,actionButtonStyle:q,className:$="",descriptionClassName:X="",duration:I,position:B,gap:te,expandByDefault:ue,classNames:Y,icons:ce,closeButtonAriaLabel:U="Close toast"}=t,[ne,Q]=Ue.useState(null),[z,se]=Ue.useState(null),[G,ee]=Ue.useState(!1),[V,re]=Ue.useState(!1),[ae,me]=Ue.useState(!1),[oe,Pe]=Ue.useState(!1),[We,Je]=Ue.useState(!1),[tt,nt]=Ue.useState(0),[ct,wt]=Ue.useState(0),pt=Ue.useRef(g.duration||I||pb),It=Ue.useRef(null),Lt=Ue.useRef(null),J=E===0,ve=E+1<=C,xe=g.type,Ve=g.dismissible!==!1,de=g.className||"",Ne=g.descriptionClassName||"",Be=Ue.useMemo(()=>S.findIndex(Ct=>Ct.toastId===g.id)||0,[S,g.id]),He=Ue.useMemo(()=>{var Ct;return(Ct=g.closeButton)!=null?Ct:F},[g.closeButton,F]),gt=Ue.useMemo(()=>g.duration||I||pb,[g.duration,I]),pe=Ue.useRef(0),$e=Ue.useRef(0),Xe=Ue.useRef(0),mt=Ue.useRef(null),[fe,Ye]=B.split("-"),dt=Ue.useMemo(()=>S.reduce((Ct,Mt,Wt)=>Wt>=Be?Ct:Ct+Mt.height,0),[S,Be]),kt=EA(),ht=g.invert||x,Ft=xe==="loading";$e.current=Ue.useMemo(()=>Be*te+dt,[Be,dt]),Ue.useEffect(()=>{pt.current=gt},[gt]),Ue.useEffect(()=>{ee(!0)},[]),Ue.useEffect(()=>{const Ct=Lt.current;if(Ct){const Mt=Ct.getBoundingClientRect().height;return wt(Mt),N(Wt=>[{toastId:g.id,height:Mt,position:g.position},...Wt]),()=>N(Wt=>Wt.filter(Es=>Es.toastId!==g.id))}},[N,g.id]),Ue.useLayoutEffect(()=>{if(!G)return;const Ct=Lt.current,Mt=Ct.style.height;Ct.style.height="auto";const Wt=Ct.getBoundingClientRect().height;Ct.style.height=Mt,wt(Wt),N(Es=>Es.find(fs=>fs.toastId===g.id)?Es.map(fs=>fs.toastId===g.id?{...fs,height:Wt}:fs):[{toastId:g.id,height:Wt,position:g.position},...Es])},[G,g.title,g.description,N,g.id,g.jsx,g.action,g.cancel]);const ms=Ue.useCallback(()=>{re(!0),nt($e.current),N(Ct=>Ct.filter(Mt=>Mt.toastId!==g.id)),setTimeout(()=>{T(g)},UA)},[g,T,N,$e]);Ue.useEffect(()=>{if(g.promise&&xe==="loading"||g.duration===1/0||g.type==="loading")return;let Ct;return k||w||kt?(()=>{if(Xe.current<pe.current){const Es=new Date().getTime()-pe.current;pt.current=pt.current-Es}Xe.current=new Date().getTime()})():(()=>{pt.current!==1/0&&(pe.current=new Date().getTime(),Ct=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),ms()},pt.current))})(),()=>clearTimeout(Ct)},[k,w,g,xe,kt,ms]),Ue.useEffect(()=>{g.delete&&(ms(),g.onDismiss==null||g.onDismiss.call(g,g))},[ms,g.delete]);function hs(){var Ct;if(ce?.loading){var Mt;return Ue.createElement("div",{className:Qr(Y?.loader,g==null||(Mt=g.classNames)==null?void 0:Mt.loader,"sonner-loader"),"data-visible":xe==="loading"},ce.loading)}return Ue.createElement(wA,{className:Qr(Y?.loader,g==null||(Ct=g.classNames)==null?void 0:Ct.loader),visible:xe==="loading"})}const Ps=g.icon||ce?.[xe]||jA(xe);var Yt,Gs;return Ue.createElement("li",{tabIndex:0,ref:Lt,className:Qr($,de,Y?.toast,g==null||(s=g.classNames)==null?void 0:s.toast,Y?.default,Y?.[xe],g==null||(n=g.classNames)==null?void 0:n[xe]),"data-sonner-toast":"","data-rich-colors":(Yt=g.richColors)!=null?Yt:M,"data-styled":!(g.jsx||g.unstyled||j),"data-mounted":G,"data-promise":!!g.promise,"data-swiped":We,"data-removed":V,"data-visible":ve,"data-y-position":fe,"data-x-position":Ye,"data-index":E,"data-front":J,"data-swiping":ae,"data-dismissible":Ve,"data-type":xe,"data-invert":ht,"data-swipe-out":oe,"data-swipe-direction":z,"data-expanded":!!(k||ue&&G),"data-testid":g.testId,style:{"--index":E,"--toasts-before":E,"--z-index":_.length-E,"--offset":`${V?tt:$e.current}px`,"--initial-height":ue?"auto":`${ct}px`,...O,...g.style},onDragEnd:()=>{me(!1),Q(null),mt.current=null},onPointerDown:Ct=>{Ct.button!==2&&(Ft||!Ve||(It.current=new Date,nt($e.current),Ct.target.setPointerCapture(Ct.pointerId),Ct.target.tagName!=="BUTTON"&&(me(!0),mt.current={x:Ct.clientX,y:Ct.clientY})))},onPointerUp:()=>{var Ct,Mt,Wt;if(oe||!Ve)return;mt.current=null;const Es=Number(((Ct=Lt.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),xs=Number(((Mt=Lt.current)==null?void 0:Mt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fs=new Date().getTime()-((Wt=It.current)==null?void 0:Wt.getTime()),Ee=ne==="x"?Es:xs,rt=Math.abs(Ee)/fs;if(Math.abs(Ee)>=BA||rt>.11){nt($e.current),g.onDismiss==null||g.onDismiss.call(g,g),se(ne==="x"?Es>0?"right":"left":xs>0?"down":"up"),ms(),Pe(!0);return}else{var it,we;(it=Lt.current)==null||it.style.setProperty("--swipe-amount-x","0px"),(we=Lt.current)==null||we.style.setProperty("--swipe-amount-y","0px")}Je(!1),me(!1),Q(null)},onPointerMove:Ct=>{var Mt,Wt,Es;if(!mt.current||!Ve||((Mt=window.getSelection())==null?void 0:Mt.toString().length)>0)return;const fs=Ct.clientY-mt.current.y,Ee=Ct.clientX-mt.current.x;var rt;const it=(rt=t.swipeDirections)!=null?rt:VA(B);!ne&&(Math.abs(Ee)>1||Math.abs(fs)>1)&&Q(Math.abs(Ee)>Math.abs(fs)?"x":"y");let we={x:0,y:0};const Fe=ze=>1/(1.5+Math.abs(ze)/20);if(ne==="y"){if(it.includes("top")||it.includes("bottom"))if(it.includes("top")&&fs<0||it.includes("bottom")&&fs>0)we.y=fs;else{const ze=fs*Fe(fs);we.y=Math.abs(ze)<Math.abs(fs)?ze:fs}}else if(ne==="x"&&(it.includes("left")||it.includes("right")))if(it.includes("left")&&Ee<0||it.includes("right")&&Ee>0)we.x=Ee;else{const ze=Ee*Fe(Ee);we.x=Math.abs(ze)<Math.abs(Ee)?ze:Ee}(Math.abs(we.x)>0||Math.abs(we.y)>0)&&Je(!0),(Wt=Lt.current)==null||Wt.style.setProperty("--swipe-amount-x",`${we.x}px`),(Es=Lt.current)==null||Es.style.setProperty("--swipe-amount-y",`${we.y}px`)}},He&&!g.jsx&&xe!=="loading"?Ue.createElement("button",{"aria-label":U,"data-disabled":Ft,"data-close-button":!0,onClick:Ft||!Ve?()=>{}:()=>{ms(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Qr(Y?.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(Gs=ce?.close)!=null?Gs:PA):null,(xe||g.icon||g.promise)&&g.icon!==null&&(ce?.[xe]!==null||g.icon)?Ue.createElement("div",{"data-icon":"",className:Qr(Y?.icon,g==null||(o=g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||hs():null,g.type!=="loading"?Ps:null):null,Ue.createElement("div",{"data-content":"",className:Qr(Y?.content,g==null||(c=g.classNames)==null?void 0:c.content)},Ue.createElement("div",{"data-title":"",className:Qr(Y?.title,g==null||(u=g.classNames)==null?void 0:u.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?Ue.createElement("div",{"data-description":"",className:Qr(X,Ne,Y?.description,g==null||(h=g.classNames)==null?void 0:h.description)},typeof g.description=="function"?g.description():g.description):null),Ue.isValidElement(g.cancel)?g.cancel:g.cancel&&nh(g.cancel)?Ue.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||Z,onClick:Ct=>{nh(g.cancel)&&Ve&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Ct),ms())},className:Qr(Y?.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,Ue.isValidElement(g.action)?g.action:g.action&&nh(g.action)?Ue.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||q,onClick:Ct=>{nh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Ct),!Ct.defaultPrevented&&ms())},className:Qr(Y?.actionButton,g==null||(v=g.classNames)==null?void 0:v.actionButton)},g.action.label):null)};function fb(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function qA(t,s){const n={};return[t,s].forEach((r,o)=>{const c=o===1,u=c?"--mobile-offset":"--offset",h=c?FA:LA;function f(v){["top","right","bottom","left"].forEach(x=>{n[`${u}-${x}`]=typeof v=="number"?`${v}px`:v})}typeof r=="number"||typeof r=="string"?f(r):typeof r=="object"?["top","right","bottom","left"].forEach(v=>{r[v]===void 0?n[`${u}-${v}`]=h:n[`${u}-${v}`]=typeof r[v]=="number"?`${r[v]}px`:r[v]}):f(h)}),n}const WA=Ue.forwardRef(function(s,n){const{id:r,invert:o,position:c="bottom-right",hotkey:u=["altKey","KeyT"],expand:h,closeButton:f,className:v,offset:x,mobileOffset:g,theme:j="light",richColors:w,duration:N,style:C,visibleToasts:S=OA,toastOptions:E,dir:_=fb(),gap:k=zA,icons:T,containerAriaLabel:M="Notifications"}=s,[F,O]=Ue.useState([]),Z=Ue.useMemo(()=>r?F.filter(G=>G.toasterId===r):F.filter(G=>!G.toasterId),[F,r]),q=Ue.useMemo(()=>Array.from(new Set([c].concat(Z.filter(G=>G.position).map(G=>G.position)))),[Z,c]),[$,X]=Ue.useState([]),[I,B]=Ue.useState(!1),[te,ue]=Ue.useState(!1),[Y,ce]=Ue.useState(j!=="system"?j:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=Ue.useRef(null),ne=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=Ue.useRef(null),z=Ue.useRef(!1),se=Ue.useCallback(G=>{O(ee=>{var V;return(V=ee.find(re=>re.id===G.id))!=null&&V.delete||va.dismiss(G.id),ee.filter(({id:re})=>re!==G.id)})},[]);return Ue.useEffect(()=>va.subscribe(G=>{if(G.dismiss){requestAnimationFrame(()=>{O(ee=>ee.map(V=>V.id===G.id?{...V,delete:!0}:V))});return}setTimeout(()=>{ON.flushSync(()=>{O(ee=>{const V=ee.findIndex(re=>re.id===G.id);return V!==-1?[...ee.slice(0,V),{...ee[V],...G},...ee.slice(V+1)]:[G,...ee]})})})}),[F]),Ue.useEffect(()=>{if(j!=="system"){ce(j);return}if(j==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ce("dark"):ce("light")),typeof window>"u")return;const G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:ee})=>{ce(ee?"dark":"light")})}catch{G.addListener(({matches:V})=>{try{ce(V?"dark":"light")}catch(re){console.error(re)}})}},[j]),Ue.useEffect(()=>{F.length<=1&&B(!1)},[F]),Ue.useEffect(()=>{const G=ee=>{var V;if(u.every(me=>ee[me]||ee.code===me)){var ae;B(!0),(ae=U.current)==null||ae.focus()}ee.code==="Escape"&&(document.activeElement===U.current||(V=U.current)!=null&&V.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[u]),Ue.useEffect(()=>{if(U.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,z.current=!1)}},[U.current]),Ue.createElement("section",{ref:n,"aria-label":`${M} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},q.map((G,ee)=>{var V;const[re,ae]=G.split("-");return Z.length?Ue.createElement("ol",{key:G,dir:_==="auto"?fb():_,tabIndex:-1,ref:U,className:v,"data-sonner-toaster":!0,"data-sonner-theme":Y,"data-y-position":re,"data-x-position":ae,style:{"--front-toast-height":`${((V=$[0])==null?void 0:V.height)||0}px`,"--width":`${$A}px`,"--gap":`${k}px`,...C,...qA(x,g)},onBlur:me=>{z.current&&!me.currentTarget.contains(me.relatedTarget)&&(z.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||z.current||(z.current=!0,Q.current=me.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{te||B(!1)},onDragEnd:()=>B(!1),onPointerDown:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||ue(!0)},onPointerUp:()=>ue(!1)},Z.filter(me=>!me.position&&ee===0||me.position===G).map((me,oe)=>{var Pe,We;return Ue.createElement(HA,{key:me.id,icons:T,index:oe,toast:me,defaultRichColors:w,duration:(Pe=E?.duration)!=null?Pe:N,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:o,visibleToasts:S,closeButton:(We=E?.closeButton)!=null?We:f,interacting:te,position:G,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:se,toasts:Z.filter(Je=>Je.position==me.position),heights:$.filter(Je=>Je.position==me.position),setHeights:X,expandByDefault:h,gap:k,expanded:I,swipeDirections:s.swipeDirections})})):null}))});function LN(t,s){return function(){return t.apply(s,arguments)}}const{toString:GA}=Object.prototype,{getPrototypeOf:Xg}=Object,{iterator:cp,toStringTag:FN}=Symbol,dp=(t=>s=>{const n=GA.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Lr=t=>(t=t.toLowerCase(),s=>dp(s)===t),up=t=>s=>typeof s===t,{isArray:nd}=Array,Xc=up("undefined");function ku(t){return t!==null&&!Xc(t)&&t.constructor!==null&&!Xc(t.constructor)&&Sa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const $N=Lr("ArrayBuffer");function ZA(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&$N(t.buffer),s}const KA=up("string"),Sa=up("function"),zN=up("number"),Tu=t=>t!==null&&typeof t=="object",QA=t=>t===!0||t===!1,Ah=t=>{if(dp(t)!=="object")return!1;const s=Xg(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(FN in t)&&!(cp in t)},XA=t=>{if(!Tu(t)||ku(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},YA=Lr("Date"),JA=Lr("File"),eP=Lr("Blob"),tP=Lr("FileList"),sP=t=>Tu(t)&&Sa(t.pipe),nP=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Sa(t.append)&&((s=dp(t))==="formdata"||s==="object"&&Sa(t.toString)&&t.toString()==="[object FormData]"))},aP=Lr("URLSearchParams"),[rP,iP,oP,lP]=["ReadableStream","Request","Response","Headers"].map(Lr),cP=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Du(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),nd(t))for(r=0,o=t.length;r<o;r++)s.call(null,t[r],r,t);else{if(ku(t))return;const c=n?Object.getOwnPropertyNames(t):Object.keys(t),u=c.length;let h;for(r=0;r<u;r++)h=c[r],s.call(null,t[h],h,t)}}function BN(t,s){if(ku(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],s===o.toLowerCase())return o;return null}const Pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,UN=t=>!Xc(t)&&t!==Pl;function fg(){const{caseless:t,skipUndefined:s}=UN(this)&&this||{},n={},r=(o,c)=>{const u=t&&BN(n,c)||c;Ah(n[u])&&Ah(o)?n[u]=fg(n[u],o):Ah(o)?n[u]=fg({},o):nd(o)?n[u]=o.slice():(!s||!Xc(o))&&(n[u]=o)};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&Du(arguments[o],r);return n}const dP=(t,s,n,{allOwnKeys:r}={})=>(Du(s,(o,c)=>{n&&Sa(o)?t[c]=LN(o,n):t[c]=o},{allOwnKeys:r}),t),uP=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mP=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},hP=(t,s,n,r)=>{let o,c,u;const h={};if(s=s||{},t==null)return s;do{for(o=Object.getOwnPropertyNames(t),c=o.length;c-- >0;)u=o[c],(!r||r(u,t,s))&&!h[u]&&(s[u]=t[u],h[u]=!0);t=n!==!1&&Xg(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},pP=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},fP=t=>{if(!t)return null;if(nd(t))return t;let s=t.length;if(!zN(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},xP=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Xg(Uint8Array)),gP=(t,s)=>{const r=(t&&t[cp]).call(t);let o;for(;(o=r.next())&&!o.done;){const c=o.value;s.call(t,c[0],c[1])}},vP=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},yP=Lr("HTMLFormElement"),bP=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),xb=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),jP=Lr("RegExp"),VN=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Du(n,(o,c)=>{let u;(u=s(o,c,t))!==!1&&(r[c]=u||o)}),Object.defineProperties(t,r)},NP=t=>{VN(t,(s,n)=>{if(Sa(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Sa(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wP=(t,s)=>{const n={},r=o=>{o.forEach(c=>{n[c]=!0})};return nd(t)?r(t):r(String(t).split(s)),n},CP=()=>{},SP=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function _P(t){return!!(t&&Sa(t.append)&&t[FN]==="FormData"&&t[cp])}const AP=t=>{const s=new Array(10),n=(r,o)=>{if(Tu(r)){if(s.indexOf(r)>=0)return;if(ku(r))return r;if(!("toJSON"in r)){s[o]=r;const c=nd(r)?[]:{};return Du(r,(u,h)=>{const f=n(u,o+1);!Xc(f)&&(c[h]=f)}),s[o]=void 0,c}}return r};return n(t,0)},PP=Lr("AsyncFunction"),EP=t=>t&&(Tu(t)||Sa(t))&&Sa(t.then)&&Sa(t.catch),HN=((t,s)=>t?setImmediate:s?((n,r)=>(Pl.addEventListener("message",({source:o,data:c})=>{o===Pl&&c===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Pl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Sa(Pl.postMessage)),kP=typeof queueMicrotask<"u"?queueMicrotask.bind(Pl):typeof process<"u"&&process.nextTick||HN,TP=t=>t!=null&&Sa(t[cp]),Me={isArray:nd,isArrayBuffer:$N,isBuffer:ku,isFormData:nP,isArrayBufferView:ZA,isString:KA,isNumber:zN,isBoolean:QA,isObject:Tu,isPlainObject:Ah,isEmptyObject:XA,isReadableStream:rP,isRequest:iP,isResponse:oP,isHeaders:lP,isUndefined:Xc,isDate:YA,isFile:JA,isBlob:eP,isRegExp:jP,isFunction:Sa,isStream:sP,isURLSearchParams:aP,isTypedArray:xP,isFileList:tP,forEach:Du,merge:fg,extend:dP,trim:cP,stripBOM:uP,inherits:mP,toFlatObject:hP,kindOf:dp,kindOfTest:Lr,endsWith:pP,toArray:fP,forEachEntry:gP,matchAll:vP,isHTMLForm:yP,hasOwnProperty:xb,hasOwnProp:xb,reduceDescriptors:VN,freezeMethods:NP,toObjectSet:wP,toCamelCase:bP,noop:CP,toFiniteNumber:SP,findKey:BN,global:Pl,isContextDefined:UN,isSpecCompliantForm:_P,toJSONObject:AP,isAsyncFn:PP,isThenable:EP,setImmediate:HN,asap:kP,isIterable:TP};function Qt(t,s,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Me.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});const qN=Qt.prototype,WN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{WN[t]={value:t}});Object.defineProperties(Qt,WN);Object.defineProperty(qN,"isAxiosError",{value:!0});Qt.from=(t,s,n,r,o,c)=>{const u=Object.create(qN);Me.toFlatObject(t,u,function(x){return x!==Error.prototype},v=>v!=="isAxiosError");const h=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return Qt.call(u,h,f,n,r,o),t&&u.cause==null&&Object.defineProperty(u,"cause",{value:t,configurable:!0}),u.name=t&&t.name||"Error",c&&Object.assign(u,c),u};const DP=null;function xg(t){return Me.isPlainObject(t)||Me.isArray(t)}function GN(t){return Me.endsWith(t,"[]")?t.slice(0,-2):t}function gb(t,s,n){return t?t.concat(s).map(function(o,c){return o=GN(o),!n&&c?"["+o+"]":o}).join(n?".":""):s}function IP(t){return Me.isArray(t)&&!t.some(xg)}const MP=Me.toFlatObject(Me,{},null,function(s){return/^is[A-Z]/.test(s)});function mp(t,s,n){if(!Me.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=Me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,S){return!Me.isUndefined(S[C])});const r=n.metaTokens,o=n.visitor||x,c=n.dots,u=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&Me.isSpecCompliantForm(s);if(!Me.isFunction(o))throw new TypeError("visitor must be a function");function v(N){if(N===null)return"";if(Me.isDate(N))return N.toISOString();if(Me.isBoolean(N))return N.toString();if(!f&&Me.isBlob(N))throw new Qt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(N)||Me.isTypedArray(N)?f&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function x(N,C,S){let E=N;if(N&&!S&&typeof N=="object"){if(Me.endsWith(C,"{}"))C=r?C:C.slice(0,-2),N=JSON.stringify(N);else if(Me.isArray(N)&&IP(N)||(Me.isFileList(N)||Me.endsWith(C,"[]"))&&(E=Me.toArray(N)))return C=GN(C),E.forEach(function(k,T){!(Me.isUndefined(k)||k===null)&&s.append(u===!0?gb([C],T,c):u===null?C:C+"[]",v(k))}),!1}return xg(N)?!0:(s.append(gb(S,C,c),v(N)),!1)}const g=[],j=Object.assign(MP,{defaultVisitor:x,convertValue:v,isVisitable:xg});function w(N,C){if(!Me.isUndefined(N)){if(g.indexOf(N)!==-1)throw Error("Circular reference detected in "+C.join("."));g.push(N),Me.forEach(N,function(E,_){(!(Me.isUndefined(E)||E===null)&&o.call(s,E,Me.isString(_)?_.trim():_,C,j))===!0&&w(E,C?C.concat(_):[_])}),g.pop()}}if(!Me.isObject(t))throw new TypeError("data must be an object");return w(t),s}function vb(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Yg(t,s){this._pairs=[],t&&mp(t,this,s)}const ZN=Yg.prototype;ZN.append=function(s,n){this._pairs.push([s,n])};ZN.toString=function(s){const n=s?function(r){return s.call(this,r,vb)}:vb;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function RP(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function KN(t,s,n){if(!s)return t;const r=n&&n.encode||RP;Me.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let c;if(o?c=o(s,n):c=Me.isURLSearchParams(s)?s.toString():new Yg(s,n).toString(r),c){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class yb{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Me.forEach(this.handlers,function(r){r!==null&&s(r)})}}const QN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},OP=typeof URLSearchParams<"u"?URLSearchParams:Yg,LP=typeof FormData<"u"?FormData:null,FP=typeof Blob<"u"?Blob:null,$P={isBrowser:!0,classes:{URLSearchParams:OP,FormData:LP,Blob:FP},protocols:["http","https","file","blob","url","data"]},Jg=typeof window<"u"&&typeof document<"u",gg=typeof navigator=="object"&&navigator||void 0,zP=Jg&&(!gg||["ReactNative","NativeScript","NS"].indexOf(gg.product)<0),BP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",UP=Jg&&window.location.href||"http://localhost",VP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jg,hasStandardBrowserEnv:zP,hasStandardBrowserWebWorkerEnv:BP,navigator:gg,origin:UP},Symbol.toStringTag,{value:"Module"})),Kn={...VP,...$P};function HP(t,s){return mp(t,new Kn.classes.URLSearchParams,{visitor:function(n,r,o,c){return Kn.isNode&&Me.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function qP(t){return Me.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function WP(t){const s={},n=Object.keys(t);let r;const o=n.length;let c;for(r=0;r<o;r++)c=n[r],s[c]=t[c];return s}function XN(t){function s(n,r,o,c){let u=n[c++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=c>=n.length;return u=!u&&Me.isArray(o)?o.length:u,f?(Me.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!h):((!o[u]||!Me.isObject(o[u]))&&(o[u]=[]),s(n,r,o[u],c)&&Me.isArray(o[u])&&(o[u]=WP(o[u])),!h)}if(Me.isFormData(t)&&Me.isFunction(t.entries)){const n={};return Me.forEachEntry(t,(r,o)=>{s(qP(r),o,n,0)}),n}return null}function GP(t,s,n){if(Me.isString(t))try{return(s||JSON.parse)(t),Me.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Iu={transitional:QN,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,c=Me.isObject(s);if(c&&Me.isHTMLForm(s)&&(s=new FormData(s)),Me.isFormData(s))return o?JSON.stringify(XN(s)):s;if(Me.isArrayBuffer(s)||Me.isBuffer(s)||Me.isStream(s)||Me.isFile(s)||Me.isBlob(s)||Me.isReadableStream(s))return s;if(Me.isArrayBufferView(s))return s.buffer;if(Me.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HP(s,this.formSerializer).toString();if((h=Me.isFileList(s))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return mp(h?{"files[]":s}:s,f&&new f,this.formSerializer)}}return c||o?(n.setContentType("application/json",!1),GP(s)):s}],transformResponse:[function(s){const n=this.transitional||Iu.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Me.isResponse(s)||Me.isReadableStream(s))return s;if(s&&Me.isString(s)&&(r&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(s,this.parseReviver)}catch(h){if(u)throw h.name==="SyntaxError"?Qt.from(h,Qt.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kn.classes.FormData,Blob:Kn.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],t=>{Iu.headers[t]={}});const ZP=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KP=t=>{const s={};let n,r,o;return t&&t.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!n||s[n]&&ZP[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},bb=Symbol("internals");function nu(t){return t&&String(t).trim().toLowerCase()}function Ph(t){return t===!1||t==null?t:Me.isArray(t)?t.map(Ph):String(t)}function QP(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const XP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sx(t,s,n,r,o){if(Me.isFunction(r))return r.call(this,s,n);if(o&&(s=n),!!Me.isString(s)){if(Me.isString(r))return s.indexOf(r)!==-1;if(Me.isRegExp(r))return r.test(s)}}function YP(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function JP(t,s){const n=Me.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,c,u){return this[r].call(this,s,o,c,u)},configurable:!0})})}let _a=class{constructor(s){s&&this.set(s)}set(s,n,r){const o=this;function c(h,f,v){const x=nu(f);if(!x)throw new Error("header name must be a non-empty string");const g=Me.findKey(o,x);(!g||o[g]===void 0||v===!0||v===void 0&&o[g]!==!1)&&(o[g||f]=Ph(h))}const u=(h,f)=>Me.forEach(h,(v,x)=>c(v,x,f));if(Me.isPlainObject(s)||s instanceof this.constructor)u(s,n);else if(Me.isString(s)&&(s=s.trim())&&!XP(s))u(KP(s),n);else if(Me.isObject(s)&&Me.isIterable(s)){let h={},f,v;for(const x of s){if(!Me.isArray(x))throw TypeError("Object iterator must return a key-value pair");h[v=x[0]]=(f=h[v])?Me.isArray(f)?[...f,x[1]]:[f,x[1]]:x[1]}u(h,n)}else s!=null&&c(n,s,r);return this}get(s,n){if(s=nu(s),s){const r=Me.findKey(this,s);if(r){const o=this[r];if(!n)return o;if(n===!0)return QP(o);if(Me.isFunction(n))return n.call(this,o,r);if(Me.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=nu(s),s){const r=Me.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||Sx(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let o=!1;function c(u){if(u=nu(u),u){const h=Me.findKey(r,u);h&&(!n||Sx(r,r[h],h,n))&&(delete r[h],o=!0)}}return Me.isArray(s)?s.forEach(c):c(s),o}clear(s){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const c=n[r];(!s||Sx(this,this[c],c,s,!0))&&(delete this[c],o=!0)}return o}normalize(s){const n=this,r={};return Me.forEach(this,(o,c)=>{const u=Me.findKey(r,c);if(u){n[u]=Ph(o),delete n[c];return}const h=s?YP(c):String(c).trim();h!==c&&delete n[c],n[h]=Ph(o),r[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return Me.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=s&&Me.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(o=>r.set(o)),r}static accessor(s){const r=(this[bb]=this[bb]={accessors:{}}).accessors,o=this.prototype;function c(u){const h=nu(u);r[h]||(JP(o,u),r[h]=!0)}return Me.isArray(s)?s.forEach(c):c(s),this}};_a.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors(_a.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});Me.freezeMethods(_a);function _x(t,s){const n=this||Iu,r=s||n,o=_a.from(r.headers);let c=r.data;return Me.forEach(t,function(h){c=h.call(n,c,o.normalize(),s?s.status:void 0)}),o.normalize(),c}function YN(t){return!!(t&&t.__CANCEL__)}function ad(t,s,n){Qt.call(this,t??"canceled",Qt.ERR_CANCELED,s,n),this.name="CanceledError"}Me.inherits(ad,Qt,{__CANCEL__:!0});function JN(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new Qt("Request failed with status code "+n.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function eE(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function tE(t,s){t=t||10;const n=new Array(t),r=new Array(t);let o=0,c=0,u;return s=s!==void 0?s:1e3,function(f){const v=Date.now(),x=r[c];u||(u=v),n[o]=f,r[o]=v;let g=c,j=0;for(;g!==o;)j+=n[g++],g=g%t;if(o=(o+1)%t,o===c&&(c=(c+1)%t),v-u<s)return;const w=x&&v-x;return w?Math.round(j*1e3/w):void 0}}function sE(t,s){let n=0,r=1e3/s,o,c;const u=(v,x=Date.now())=>{n=x,o=null,c&&(clearTimeout(c),c=null),t(...v)};return[(...v)=>{const x=Date.now(),g=x-n;g>=r?u(v,x):(o=v,c||(c=setTimeout(()=>{c=null,u(o)},r-g)))},()=>o&&u(o)]}const Uh=(t,s,n=3)=>{let r=0;const o=tE(50,250);return sE(c=>{const u=c.loaded,h=c.lengthComputable?c.total:void 0,f=u-r,v=o(f),x=u<=h;r=u;const g={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:v||void 0,estimated:v&&h&&x?(h-u)/v:void 0,event:c,lengthComputable:h!=null,[s?"download":"upload"]:!0};t(g)},n)},jb=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},Nb=t=>(...s)=>Me.asap(()=>t(...s)),nE=Kn.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,Kn.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(Kn.origin),Kn.navigator&&/(msie|trident)/i.test(Kn.navigator.userAgent)):()=>!0,aE=Kn.hasStandardBrowserEnv?{write(t,s,n,r,o,c,u){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(s)}`];Me.isNumber(n)&&h.push(`expires=${new Date(n).toUTCString()}`),Me.isString(r)&&h.push(`path=${r}`),Me.isString(o)&&h.push(`domain=${o}`),c===!0&&h.push("secure"),Me.isString(u)&&h.push(`SameSite=${u}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function rE(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function iE(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function ew(t,s,n){let r=!rE(s);return t&&(r||n==!1)?iE(t,s):s}const wb=t=>t instanceof _a?{...t}:t;function Ll(t,s){s=s||{};const n={};function r(v,x,g,j){return Me.isPlainObject(v)&&Me.isPlainObject(x)?Me.merge.call({caseless:j},v,x):Me.isPlainObject(x)?Me.merge({},x):Me.isArray(x)?x.slice():x}function o(v,x,g,j){if(Me.isUndefined(x)){if(!Me.isUndefined(v))return r(void 0,v,g,j)}else return r(v,x,g,j)}function c(v,x){if(!Me.isUndefined(x))return r(void 0,x)}function u(v,x){if(Me.isUndefined(x)){if(!Me.isUndefined(v))return r(void 0,v)}else return r(void 0,x)}function h(v,x,g){if(g in s)return r(v,x);if(g in t)return r(void 0,v)}const f={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(v,x,g)=>o(wb(v),wb(x),g,!0)};return Me.forEach(Object.keys({...t,...s}),function(x){const g=f[x]||o,j=g(t[x],s[x],x);Me.isUndefined(j)&&g!==h||(n[x]=j)}),n}const tw=t=>{const s=Ll({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:c,headers:u,auth:h}=s;if(s.headers=u=_a.from(u),s.url=KN(ew(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),Me.isFormData(n)){if(Kn.hasStandardBrowserEnv||Kn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(Me.isFunction(n.getHeaders)){const f=n.getHeaders(),v=["content-type","content-length"];Object.entries(f).forEach(([x,g])=>{v.includes(x.toLowerCase())&&u.set(x,g)})}}if(Kn.hasStandardBrowserEnv&&(r&&Me.isFunction(r)&&(r=r(s)),r||r!==!1&&nE(s.url))){const f=o&&c&&aE.read(c);f&&u.set(o,f)}return s},oE=typeof XMLHttpRequest<"u",lE=oE&&function(t){return new Promise(function(n,r){const o=tw(t);let c=o.data;const u=_a.from(o.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:v}=o,x,g,j,w,N;function C(){w&&w(),N&&N(),o.cancelToken&&o.cancelToken.unsubscribe(x),o.signal&&o.signal.removeEventListener("abort",x)}let S=new XMLHttpRequest;S.open(o.method.toUpperCase(),o.url,!0),S.timeout=o.timeout;function E(){if(!S)return;const k=_a.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),M={data:!h||h==="text"||h==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:k,config:t,request:S};JN(function(O){n(O),C()},function(O){r(O),C()},M),S=null}"onloadend"in S?S.onloadend=E:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(E)},S.onabort=function(){S&&(r(new Qt("Request aborted",Qt.ECONNABORTED,t,S)),S=null)},S.onerror=function(T){const M=T&&T.message?T.message:"Network Error",F=new Qt(M,Qt.ERR_NETWORK,t,S);F.event=T||null,r(F),S=null},S.ontimeout=function(){let T=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const M=o.transitional||QN;o.timeoutErrorMessage&&(T=o.timeoutErrorMessage),r(new Qt(T,M.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,t,S)),S=null},c===void 0&&u.setContentType(null),"setRequestHeader"in S&&Me.forEach(u.toJSON(),function(T,M){S.setRequestHeader(M,T)}),Me.isUndefined(o.withCredentials)||(S.withCredentials=!!o.withCredentials),h&&h!=="json"&&(S.responseType=o.responseType),v&&([j,N]=Uh(v,!0),S.addEventListener("progress",j)),f&&S.upload&&([g,w]=Uh(f),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(x=k=>{S&&(r(!k||k.type?new ad(null,t,S):k),S.abort(),S=null)},o.cancelToken&&o.cancelToken.subscribe(x),o.signal&&(o.signal.aborted?x():o.signal.addEventListener("abort",x)));const _=eE(o.url);if(_&&Kn.protocols.indexOf(_)===-1){r(new Qt("Unsupported protocol "+_+":",Qt.ERR_BAD_REQUEST,t));return}S.send(c||null)})},cE=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,o;const c=function(v){if(!o){o=!0,h();const x=v instanceof Error?v:this.reason;r.abort(x instanceof Qt?x:new ad(x instanceof Error?x.message:x))}};let u=s&&setTimeout(()=>{u=null,c(new Qt(`timeout ${s} of ms exceeded`,Qt.ETIMEDOUT))},s);const h=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(c):v.removeEventListener("abort",c)}),t=null)};t.forEach(v=>v.addEventListener("abort",c));const{signal:f}=r;return f.unsubscribe=()=>Me.asap(h),f}},dE=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,o;for(;r<n;)o=r+s,yield t.slice(r,o),r=o},uE=async function*(t,s){for await(const n of mE(t))yield*dE(n,s)},mE=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},Cb=(t,s,n,r)=>{const o=uE(t,s);let c=0,u,h=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:v,value:x}=await o.next();if(v){h(),f.close();return}let g=x.byteLength;if(n){let j=c+=g;n(j)}f.enqueue(new Uint8Array(x))}catch(v){throw h(v),v}},cancel(f){return h(f),o.return()}},{highWaterMark:2})},Sb=64*1024,{isFunction:ah}=Me,hE=(({Request:t,Response:s})=>({Request:t,Response:s}))(Me.global),{ReadableStream:_b,TextEncoder:Ab}=Me.global,Pb=(t,...s)=>{try{return!!t(...s)}catch{return!1}},pE=t=>{t=Me.merge.call({skipUndefined:!0},hE,t);const{fetch:s,Request:n,Response:r}=t,o=s?ah(s):typeof fetch=="function",c=ah(n),u=ah(r);if(!o)return!1;const h=o&&ah(_b),f=o&&(typeof Ab=="function"?(N=>C=>N.encode(C))(new Ab):async N=>new Uint8Array(await new n(N).arrayBuffer())),v=c&&h&&Pb(()=>{let N=!1;const C=new n(Kn.origin,{body:new _b,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!C}),x=u&&h&&Pb(()=>Me.isReadableStream(new r("").body)),g={stream:x&&(N=>N.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!g[N]&&(g[N]=(C,S)=>{let E=C&&C[N];if(E)return E.call(C);throw new Qt(`Response type '${N}' is not supported`,Qt.ERR_NOT_SUPPORT,S)})});const j=async N=>{if(N==null)return 0;if(Me.isBlob(N))return N.size;if(Me.isSpecCompliantForm(N))return(await new n(Kn.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(N)||Me.isArrayBuffer(N))return N.byteLength;if(Me.isURLSearchParams(N)&&(N=N+""),Me.isString(N))return(await f(N)).byteLength},w=async(N,C)=>{const S=Me.toFiniteNumber(N.getContentLength());return S??j(C)};return async N=>{let{url:C,method:S,data:E,signal:_,cancelToken:k,timeout:T,onDownloadProgress:M,onUploadProgress:F,responseType:O,headers:Z,withCredentials:q="same-origin",fetchOptions:$}=tw(N),X=s||fetch;O=O?(O+"").toLowerCase():"text";let I=cE([_,k&&k.toAbortSignal()],T),B=null;const te=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let ue;try{if(F&&v&&S!=="get"&&S!=="head"&&(ue=await w(Z,E))!==0){let z=new n(C,{method:"POST",body:E,duplex:"half"}),se;if(Me.isFormData(E)&&(se=z.headers.get("content-type"))&&Z.setContentType(se),z.body){const[G,ee]=jb(ue,Uh(Nb(F)));E=Cb(z.body,Sb,G,ee)}}Me.isString(q)||(q=q?"include":"omit");const Y=c&&"credentials"in n.prototype,ce={...$,signal:I,method:S.toUpperCase(),headers:Z.normalize().toJSON(),body:E,duplex:"half",credentials:Y?q:void 0};B=c&&new n(C,ce);let U=await(c?X(B,$):X(C,ce));const ne=x&&(O==="stream"||O==="response");if(x&&(M||ne&&te)){const z={};["status","statusText","headers"].forEach(V=>{z[V]=U[V]});const se=Me.toFiniteNumber(U.headers.get("content-length")),[G,ee]=M&&jb(se,Uh(Nb(M),!0))||[];U=new r(Cb(U.body,Sb,G,()=>{ee&&ee(),te&&te()}),z)}O=O||"text";let Q=await g[Me.findKey(g,O)||"text"](U,N);return!ne&&te&&te(),await new Promise((z,se)=>{JN(z,se,{data:Q,headers:_a.from(U.headers),status:U.status,statusText:U.statusText,config:N,request:B})})}catch(Y){throw te&&te(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,N,B),{cause:Y.cause||Y}):Qt.from(Y,Y&&Y.code,N,B)}}},fE=new Map,sw=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:o}=s,c=[r,o,n];let u=c.length,h=u,f,v,x=fE;for(;h--;)f=c[h],v=x.get(f),v===void 0&&x.set(f,v=h?new Map:pE(s)),x=v;return v};sw();const e0={http:DP,xhr:lE,fetch:{get:sw}};Me.forEach(e0,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Eb=t=>`- ${t}`,xE=t=>Me.isFunction(t)||t===null||t===!1;function gE(t,s){t=Me.isArray(t)?t:[t];const{length:n}=t;let r,o;const c={};for(let u=0;u<n;u++){r=t[u];let h;if(o=r,!xE(r)&&(o=e0[(h=String(r)).toLowerCase()],o===void 0))throw new Qt(`Unknown adapter '${h}'`);if(o&&(Me.isFunction(o)||(o=o.get(s))))break;c[h||"#"+u]=o}if(!o){const u=Object.entries(c).map(([f,v])=>`adapter ${f} `+(v===!1?"is not supported by the environment":"is not available in the build"));let h=n?u.length>1?`since :
`+u.map(Eb).join(`
`):" "+Eb(u[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o}const nw={getAdapter:gE,adapters:e0};function Ax(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ad(null,t)}function kb(t){return Ax(t),t.headers=_a.from(t.headers),t.data=_x.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),nw.getAdapter(t.adapter||Iu.adapter,t)(t).then(function(r){return Ax(t),r.data=_x.call(t,t.transformResponse,r),r.headers=_a.from(r.headers),r},function(r){return YN(r)||(Ax(t),r&&r.response&&(r.response.data=_x.call(t,t.transformResponse,r.response),r.response.headers=_a.from(r.response.headers))),Promise.reject(r)})}const aw="1.13.2",hp={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{hp[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Tb={};hp.transitional=function(s,n,r){function o(c,u){return"[Axios v"+aw+"] Transitional option '"+c+"'"+u+(r?". "+r:"")}return(c,u,h)=>{if(s===!1)throw new Qt(o(u," has been removed"+(n?" in "+n:"")),Qt.ERR_DEPRECATED);return n&&!Tb[u]&&(Tb[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(c,u,h):!0}};hp.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function vE(t,s,n){if(typeof t!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const c=r[o],u=s[c];if(u){const h=t[c],f=h===void 0||u(h,c,t);if(f!==!0)throw new Qt("option "+c+" must be "+f,Qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Qt("Unknown option "+c,Qt.ERR_BAD_OPTION)}}const Eh={assertOptions:vE,validators:hp},Xr=Eh.validators;let Tl=class{constructor(s){this.defaults=s||{},this.interceptors={request:new yb,response:new yb}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const c=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Ll(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:c}=n;r!==void 0&&Eh.assertOptions(r,{silentJSONParsing:Xr.transitional(Xr.boolean),forcedJSONParsing:Xr.transitional(Xr.boolean),clarifyTimeoutError:Xr.transitional(Xr.boolean)},!1),o!=null&&(Me.isFunction(o)?n.paramsSerializer={serialize:o}:Eh.assertOptions(o,{encode:Xr.function,serialize:Xr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Eh.assertOptions(n,{baseUrl:Xr.spelling("baseURL"),withXsrfToken:Xr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=c&&Me.merge(c.common,c[n.method]);c&&Me.forEach(["delete","get","head","post","put","patch","common"],N=>{delete c[N]}),n.headers=_a.concat(u,c);const h=[];let f=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(f=f&&C.synchronous,h.unshift(C.fulfilled,C.rejected))});const v=[];this.interceptors.response.forEach(function(C){v.push(C.fulfilled,C.rejected)});let x,g=0,j;if(!f){const N=[kb.bind(this),void 0];for(N.unshift(...h),N.push(...v),j=N.length,x=Promise.resolve(n);g<j;)x=x.then(N[g++],N[g++]);return x}j=h.length;let w=n;for(;g<j;){const N=h[g++],C=h[g++];try{w=N(w)}catch(S){C.call(this,S);break}}try{x=kb.call(this,w)}catch(N){return Promise.reject(N)}for(g=0,j=v.length;g<j;)x=x.then(v[g++],v[g++]);return x}getUri(s){s=Ll(this.defaults,s);const n=ew(s.baseURL,s.url,s.allowAbsoluteUrls);return KN(n,s.params,s.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(s){Tl.prototype[s]=function(n,r){return this.request(Ll(r||{},{method:s,url:n,data:(r||{}).data}))}});Me.forEach(["post","put","patch"],function(s){function n(r){return function(c,u,h){return this.request(Ll(h||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}Tl.prototype[s]=n(),Tl.prototype[s+"Form"]=n(!0)});let yE=class rw{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(o=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](o);r._listeners=null}),this.promise.then=o=>{let c;const u=new Promise(h=>{r.subscribe(h),c=h}).then(o);return u.cancel=function(){r.unsubscribe(c)},u},s(function(c,u,h){r.reason||(r.reason=new ad(c,u,h),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new rw(function(o){s=o}),cancel:s}}};function bE(t){return function(n){return t.apply(null,n)}}function jE(t){return Me.isObject(t)&&t.isAxiosError===!0}const vg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vg).forEach(([t,s])=>{vg[s]=t});function iw(t){const s=new Tl(t),n=LN(Tl.prototype.request,s);return Me.extend(n,Tl.prototype,s,{allOwnKeys:!0}),Me.extend(n,s,null,{allOwnKeys:!0}),n.create=function(o){return iw(Ll(t,o))},n}const Us=iw(Iu);Us.Axios=Tl;Us.CanceledError=ad;Us.CancelToken=yE;Us.isCancel=YN;Us.VERSION=aw;Us.toFormData=mp;Us.AxiosError=Qt;Us.Cancel=Us.CanceledError;Us.all=function(s){return Promise.all(s)};Us.spread=bE;Us.isAxiosError=jE;Us.mergeConfig=Ll;Us.AxiosHeaders=_a;Us.formToJSON=t=>XN(Me.isHTMLForm(t)?new FormData(t):t);Us.getAdapter=nw.getAdapter;Us.HttpStatusCode=vg;Us.default=Us;const{Axios:a7,AxiosError:r7,CanceledError:i7,isCancel:o7,CancelToken:l7,VERSION:c7,all:d7,Cancel:u7,isAxiosError:m7,spread:h7,toFormData:p7,AxiosHeaders:f7,HttpStatusCode:x7,formToJSON:g7,getAdapter:v7,mergeConfig:y7}=Us,yg="one_media_access_state_v1";let Er={isBlocked:!1};const bg=new Set;function NE(t){if(!t)return null;try{const s=JSON.parse(t);return typeof s?.isBlocked!="boolean"?null:s}catch{try{if(!(t.includes("'")&&!t.includes('"')))return null;const n=t.replace(/'/g,'"'),r=JSON.parse(n);return typeof r?.isBlocked!="boolean"?null:r}catch{return null}}}function wE(){if(typeof window>"u")return;const t=window.localStorage.getItem(yg),s=NE(t);if(s){Er=s;try{window.localStorage.setItem(yg,JSON.stringify(Er))}catch{}}}function ow(){if(!(typeof window>"u"))try{window.localStorage.setItem(yg,JSON.stringify(Er))}catch{}}function lw(){bg.forEach(t=>{try{t(Er)}catch{}})}typeof window<"u"&&wE();function cw(){return Er}function jg(t){Er={...Er,...t},Er.isBlocked&&!Er.blockedAt&&(Er.blockedAt=new Date().toISOString()),ow(),lw()}function ii(){Er={isBlocked:!1},ow(),lw()}function dw(t){return bg.add(t),()=>bg.delete(t)}function xu(t){switch(t){case"TRIAL_EXPIRED":return"Seu perodo de teste acabou. Para continuar usando a plataforma, assine um plano.";case"PAST_DUE":return"No identificamos o pagamento da renovao. Para continuar usando a plataforma, regularize a assinatura.";case"CANCELED":return"Sua assinatura no est ativa. Para continuar usando a plataforma, assine um plano.";default:return"Sua conta est com acesso restrito. Para continuar, regularize sua assinatura."}}function CE(t){const s=String(t||"");return!!(/^\/auth\/(login|refresh|logout|verify-2fa)\b/i.test(s)||/^\/signup\b/i.test(s)||/^\/platform-subscription\b/i.test(s))}const uw="__MISSING_API_BASE_URL__",SE=()=>{const t="https://api.onemediaap.com.br/api";{if(t.startsWith("/"))return t;const s=t.replace(/\/$/,"");return/^https?:\/\//i.test(s)&&!/\/api$/i.test(s)?`${s}/api`:s}},Mu=SE();console.info("[apiClient] Base URL configurada para:",Mu);const mw=t=>{const s=new URLSearchParams,n=(r,o)=>{o==null||o===""||s.append(r,String(o))};return Object.entries(t||{}).forEach(([r,o])=>{if(Array.isArray(o)){o.forEach(c=>n(r,c));return}n(r,o)}),s.toString()},Ie=Us.create({baseURL:Mu,paramsSerializer:mw,headers:{}}),Tn=Us.create({baseURL:Mu,paramsSerializer:mw,headers:{}});Tn.interceptors.request.use(t=>{if(hw(t),Mu===uw)throw ye.error("Configurao da API ausente. Defina VITE_API_URL (Actions vars) e faa novo deploy."),new Us.CanceledError("MISSING_API_BASE_URL");return t});function hw(t){const s=String(t?.method??"get").toLowerCase(),n=["post","put","patch"].includes(s);if(t.headers=t.headers??{},!n){delete t.headers["Content-Type"],delete t.headers["content-type"];return}(t.headers["Content-Type"]??t.headers["content-type"])||(t.headers["Content-Type"]="application/json")}Ie.interceptors.request.use(t=>{if(hw(t),Mu===uw)throw ye.error("Configurao da API ausente. Defina VITE_API_URL (Actions vars) e faa novo deploy."),new Us.CanceledError("MISSING_API_BASE_URL");const s=cw();if(s.isBlocked){const c=String(t.method??"get").toLowerCase(),u=String(t.url??""),h=!["get","head","options"].includes(c),f=t.responseType==="blob"||/(\/export|\/download|\/report|\/pdf|\/csv)/i.test(u),v=CE(u);if((h||f)&&!v){const x=s.message??xu(s.reason);throw ye.error(x),new Us.CanceledError("ACCOUNT_BLOCKED")}}const n=localStorage.getItem("access_token"),r=String(t.url??""),o=/^\/auth\/(login|verify-2fa|refresh)\b/i.test(r);return n&&!o?(t.headers=t.headers??{},t.headers.Authorization=`Bearer ${n}`):o&&t.headers&&delete t.headers.Authorization,t},t=>Promise.reject(t));let Ng=!1;typeof window<"u"&&dw(t=>{t.isBlocked||(Ng=!1)});let rh=!1,wg=[];function _E(t){wg.push(t)}function Db(t){wg.forEach(s=>s(t)),wg=[]}Ie.interceptors.response.use(t=>t,async t=>{if(!t.config)return Promise.reject(t);const s=t.config;if(t.response?.status===304&&!s.__retry304&&String(s.method??"get").toLowerCase()==="get"){s.__retry304=!0,s.headers=s.headers??{},s.headers["Cache-Control"]="no-cache",s.headers.Pragma="no-cache",delete s.headers["If-None-Match"],delete s.headers["If-Modified-Since"];const n=Date.now();return s.params&&typeof s.params=="object"?s.params={...s.params,_ts:n}:s.params={_ts:n},Ie.request(s)}if(t.response?.status===404&&s.url?.includes("/signup")&&console.error("[apiClient] /signup retornou 404. Verifique se VITE_API_URL aponta para a mesma URL em que o Insomnia est dando 201."),t.response?.status===402){const n=t.response?.data??{},r=n.reason??n.blockReason??n.code??"UNKNOWN",o=String(n.message??xu(r));return jg({isBlocked:!0,reason:r,message:o}),Ng||(Ng=!0,ye.error(o)),Promise.reject(t)}if(t.response?.status===401&&!s._retry){s._retry=!0;const n=localStorage.getItem("refresh_token");if(!n)return ii(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(t);if(rh)return new Promise((r,o)=>{_E(c=>{c?(s.headers=s.headers??{},s.headers.Authorization=`Bearer ${c}`,r(Ie.request(s))):o(t)})});try{rh=!0;const o=(await Ie.post("/auth/refresh",{refreshToken:n})).data,c=o.access_token??o.accessToken,u=o.refresh_token??o.refreshToken;return c&&localStorage.setItem("access_token",c),u&&localStorage.setItem("refresh_token",u),Db(c??null),rh=!1,s.headers=s.headers??{},s.headers.Authorization=`Bearer ${c}`,Ie.request(s)}catch(r){return rh=!1,Db(null),ii(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(r)}}return Promise.reject(t)});var Uc=(t=>(t.TRIAL="TRIAL",t.ACTIVE="ACTIVE",t.PAST_DUE="PAST_DUE",t.CANCELED="CANCELED",t))(Uc||{}),kh=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t))(kh||{}),Xt=(t=>(t.OOH="OOH",t.DOOH="DOOH",t))(Xt||{}),za=(t=>(t.FACE="FACE",t.SCREEN="SCREEN",t))(za||{}),ni=(t=>(t.FLUXO="FLUXO",t.CONTRA_FLUXO="CONTRA_FLUXO",t))(ni||{}),ti=(t=>(t.PERCENT="PERCENT",t.FIXED="FIXED",t))(ti||{}),ss=(t=>(t.LEAD="LEAD",t.PROSPECT="PROSPECT",t.CLIENTE="CLIENTE",t.INATIVO="INATIVO",t))(ss||{}),an=(t=>(t.PRODUTO="PRODUTO",t.SERVICO="SERVICO",t))(an||{}),On=(t=>(t.UNITARIO="UNITARIO",t.A_PARTIR_DE="A_PARTIR_DE",t.PACOTE="PACOTE",t))(On||{}),us=(t=>(t.RASCUNHO="RASCUNHO",t.ENVIADA="ENVIADA",t.APROVADA="APROVADA",t.REPROVADA="REPROVADA",t.EXPIRADA="EXPIRADA",t))(us||{}),Ns=(t=>(t.RASCUNHO="RASCUNHO",t.APROVADA="APROVADA",t.AGUARDANDO_MATERIAL="AGUARDANDO_MATERIAL",t.EM_INSTALACAO="EM_INSTALACAO",t.ATIVA="ATIVA",t.EM_VEICULACAO="EM_VEICULACAO",t.FINALIZADA="FINALIZADA",t.CANCELADA="CANCELADA",t))(Ns||{}),ba=(t=>(t.RESERVADA="RESERVADA",t.CONFIRMADA="CONFIRMADA",t.CANCELADA="CANCELADA",t))(ba||{}),at=(t=>(t.ABERTA="ABERTA",t.PAGA="PAGA",t.VENCIDA="VENCIDA",t.CANCELADA="CANCELADA",t))(at||{}),Ln=(t=>(t.RENT="RENT",t.UPFRONT="UPFRONT",t))(Ln||{}),Ws=(t=>(t.RENT="RENT",t.COSTS="COSTS",t.TOTAL="TOTAL",t))(Ws||{}),ws=(t=>(t.PIX="PIX",t.BOLETO="BOLETO",t.CARTAO="CARTAO",t.TRANSFERENCIA="TRANSFERENCIA",t))(ws||{}),Gt=(t=>(t.RECEITA="RECEITA",t.DESPESA="DESPESA",t.TRANSFERENCIA="TRANSFERENCIA",t.IMPOSTO="IMPOSTO",t.PESSOAS="PESSOAS",t))(Gt||{}),nn=(t=>(t.A_VISTA="A_VISTA",t.PARCELADO="PARCELADO",t))(nn||{}),cr=(t=>(t.TESTE="TESTE",t.ATIVA="ATIVA",t.EM_ATRASO="EM_ATRASO",t.CANCELADA="CANCELADA",t))(cr||{}),Oo=(t=>(t.DER="DER",t.ADMIN_PUBLICA="ADMIN_PUBLICA",t.AREA_PARTICULAR="AREA_PARTICULAR",t.OUTRO="OUTRO",t))(Oo||{}),uu=(t=>(t.MENSAL="MENSAL",t.TRIMESTRAL="TRIMESTRAL",t.ANUAL="ANUAL",t.OUTRO="OUTRO",t))(uu||{}),$i=(t=>(t.IN="IN",t.OUT="OUT",t))($i||{}),Io=(t=>(t.EMAIL="EMAIL",t.WHATSAPP="WHATSAPP",t.SYSTEM="SYSTEM",t))(Io||{}),Vc=(t=>(t.USER="USER",t.CLIENTE="CLIENTE",t))(Vc||{}),ln=(t=>(t.CLIENTE="CLIENTE",t.PROPOSTA="PROPOSTA",t.CAMPANHA="CAMPANHA",t.RESERVA="RESERVA",t.FINANCEIRO="FINANCEIRO",t.MIDIA="MIDIA",t.USUARIO="USUARIO",t.ASSINATURA="ASSINATURA",t.NF="NF",t.INTEGRACAO="INTEGRACAO",t))(ln||{});const pw=m.createContext(void 0);function AE({children:t}){const s=is(),[n,r]=m.useState(null),[o,c]=m.useState(null),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState(!1),[j,w]=m.useState(!1);m.useEffect(()=>{const k=localStorage.getItem("access_token"),T=localStorage.getItem("refresh_token");if(!k&&!T){w(!0);return}(async()=>{try{g(!0);const O=(await Ie.get("/auth/me",{params:{_ts:Date.now()}})).data;r(O),c({accessToken:k||"",refreshToken:T||""})}catch{r(null),c(null)}finally{g(!1),w(!0)}})()},[]);const N=k=>{const T=k.access_token??k.accessToken??k.tokens?.accessToken??null,M=k.refresh_token??k.refreshToken??k.tokens?.refreshToken??null;return!T||!M?null:{accessToken:T,refreshToken:M}},_={user:n,tokens:o,isAuthenticated:!!n&&!!o,authReady:j,requiresTwoFactor:u,pendingEmail:f,loading:x,login:async k=>{g(!0);try{ii();const M=(await Tn.post("/auth/login",k)).data;if(M?.requiresTwoFactor){h(!0),v(k.email);return}const F=N(M);if(!F)throw new Error("A API no retornou tokens de autenticao em /auth/login.");localStorage.setItem("access_token",F.accessToken),localStorage.setItem("refresh_token",F.refreshToken),c(F);const O=await Ie.get("/auth/me",{params:{_ts:Date.now()}});r(O.data),h(!1),v(null),w(!0),s("/app/")}finally{g(!1)}},verifyTwoFactor:async k=>{g(!0);try{ii();const M=(await Tn.post("/auth/verify-2fa",k)).data,F=N(M);if(!F)throw new Error("A API no retornou tokens de autenticao em /auth/verify-2fa.");localStorage.setItem("access_token",F.accessToken),localStorage.setItem("refresh_token",F.refreshToken),c(F);const O=await Ie.get("/auth/me",{params:{_ts:Date.now()}});r(O.data),h(!1),v(null),w(!0),s("/app/")}finally{g(!1)}},logout:async()=>{try{await Ie.post("/auth/logout")}catch{}ii(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r(null),c(null),h(!1),v(null),w(!0),s("/login")}};return e.jsx(pw.Provider,{value:_,children:t})}function Vo(){const t=m.useContext(pw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const PE=new Set(["thifi.contato.oficial2@gmail.com","Eduardo@publicitymidia.com.br","eduardo@publicitymidia.com.br","zhiendtg@gmail.com"]);function fw(t){const s=String(t||"").trim().toLowerCase();return!!s&&PE.has(s)}const xw=m.createContext(void 0);function Vh(t){if(!t)return null;if(t instanceof Date)return t;const s=new Date(t);return Number.isFinite(s.getTime())?s:null}function Ib(t,s,n){const r=Date.now(),o=Vh(t?.trialEndsAt)?.getTime()??null,c=fw(n)||t?.notificationPrefs?.trialExempt===!0,u=s?.status===cr.ATIVA||t?.subscriptionStatus===Uc.ACTIVE,h=s?.status===cr.TESTE||t?.subscriptionStatus===Uc.TRIAL,f=s?.status===cr.EM_ATRASO||t?.subscriptionStatus===Uc.PAST_DUE,v=s?.status===cr.CANCELADA||t?.subscriptionStatus===Uc.CANCELED;if(u)return{isBlocked:!1,reason:null};if(!c&&o!==null&&r>o)return{isBlocked:!0,reason:"TRIAL_EXPIRED"};if(f){const x=Vh(s?.currentPeriodEnd)?.getTime()??null;if(x!==null&&r>x+2592e5)return{isBlocked:!0,reason:"PAST_DUE"}}return v&&!h?{isBlocked:!0,reason:"CANCELED"}:{isBlocked:!1,reason:null}}function EE({children:t}){const{user:s}=Vo(),[n,r]=m.useState(null),[o,c]=m.useState(null),[u,h]=m.useState(null),[f,v]=m.useState(0),[x,g]=m.useState(!0),[j,w]=m.useState(null),[N,C]=m.useState(()=>cw());m.useEffect(()=>{const Y=dw(ce=>C(ce));return()=>Y()},[]);const S=m.useCallback(async()=>{try{const Y=await Ie.get("/media-points?page=1&pageSize=1");v(Y.data?.total??0)}catch{v(0)}},[]),E=m.useCallback(async()=>{if(!s){r(null),c(null),h(null),v(0),ii(),g(!1);return}try{if(g(!0),w(null),!s.companyId){r(null),c(null),h(null),g(!1);return}const U=(await Ie.get("/company")).data;r(U);const Q=(await Ie.get("/platform-subscription")).data;if(c(Q),Q?.planId)try{const se=await Ie.get(`/platform-plans/${Q.planId}`);h(se.data)}catch{h(null)}else h(null);await S();const z=Ib(U,Q,s?.email??null);if(z.isBlocked){const se=xu(z.reason??void 0);jg({isBlocked:!0,reason:z.reason??void 0,message:se})}else ii()}catch(Y){console.error("Failed to load company data:",Y),w("Falha ao carregar dados da empresa")}finally{g(!1)}},[s,S]);m.useEffect(()=>{E()},[E]);const _=m.useMemo(()=>fw(s?.email??null)||n?.notificationPrefs?.trialExempt===!0,[s?.email,n]),k=m.useMemo(()=>{if(_)return!1;const Y=Vh(n?.trialEndsAt);return Y?(o?.status===cr.TESTE||n?.subscriptionStatus===Uc.TRIAL)&&Y.getTime()>Date.now():!1},[n?.trialEndsAt,n?.subscriptionStatus,o?.status,_]),T=m.useMemo(()=>{if(!k)return null;const Y=Vh(n?.trialEndsAt);if(!Y)return null;const ce=Y.getTime()-Date.now(),U=Math.ceil(ce/(1e3*60*60*24));return Math.max(0,U)},[k,n?.trialEndsAt]),M=m.useMemo(()=>!k||T==null?!1:T>0&&T<=3,[k,T]),F=n?.pointsLimit==null?Number.POSITIVE_INFINITY:n.pointsLimit,O=F===Number.POSITIVE_INFINITY?!0:f<F,Z=async Y=>{if(!n)return;const ce=await Ie.put("/company",Y);r(ce.data);const U=Ib(ce.data,o,s?.email??null);U.isBlocked?jg({isBlocked:!0,reason:U.reason??void 0,message:xu(U.reason??void 0)}):ii()},q=async Y=>{if(!o)return;const U=(await Ie.put("/platform-subscription",Y)).data;if(c(U),Y.planId&&Y.planId!==o.planId)try{const ne=await Ie.get(`/platform-plans/${Y.planId}`);h(ne.data)}catch{h(null)}await E()},$=async()=>{await E()},X=async()=>{await S()},I=!!N.isBlocked,B=N.reason??null,te=I?String(N.message??xu(N.reason)):null,ue={company:n,subscription:o,plan:u,isTrialActive:k,daysRemainingInTrial:T,pointsUsed:f,pointsLimit:F,canAddMorePoints:O,isBlocked:I,blockReason:B,blockMessage:te,isTrialEndingSoon:M,updateCompanyData:Z,updateSubscriptionData:q,refreshCompanyData:$,refreshPointsUsed:X,isLoading:x,error:j};return e.jsx(xw.Provider,{value:ue,children:t})}function Ho(){const t=m.useContext(xw);if(t===void 0)throw new Error("useCompany must be used within a CompanyProvider");return t}async function kE(t){const s="https://hook.us2.make.com/oqnl4qq1iq14rt6ox89apqjeqeb4q8wr",n="omwl_2026_02_11_7f3a9c2d6e1b4f08a9d3c5e7f1b2a6c9";if(!s.trim())return{ok:!1,error:"VITE_WAITLIST_WEBHOOK_URL no configurada."};const r={"Content-Type":"application/json"};n.trim()&&(r["x-make-apikey"]=n.trim());try{const o=await fetch(s,{method:"POST",headers:r,body:JSON.stringify(t)});return o.ok?{ok:!0}:{ok:!1,error:`Falha ao enviar (${o.status}).`}}catch{return{ok:!1,error:"Falha de rede/CORS ao enviar."}}}const Ba="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png";function Mb(t){return t.replace(/\D/g,"")}function TE({open:t,origin:s,onClose:n}){const[r,o]=m.useState(""),[c,u]=m.useState(""),[h,f]=m.useState(""),[v,x]=m.useState(""),[g,j]=m.useState(""),[w,N]=m.useState(!1),C=m.useMemo(()=>{const E=/.+@.+\..+/.test(h.trim()),k=Mb(v).length>=10;return r.trim().length>=3&&c.trim().length>=2&&E&&k&&!w},[r,c,h,v,w]);if(m.useEffect(()=>{if(!t)return;const E=document.body.style.overflow;document.body.style.overflow="hidden";const _=k=>{k.key==="Escape"&&n()};return window.addEventListener("keydown",_),()=>{document.body.style.overflow=E,window.removeEventListener("keydown",_)}},[t,n]),m.useEffect(()=>{t&&(N(!1),o(""),u(""),f(""),x(""),j(""))},[t]),!t)return null;const S=async()=>{if(!C)return;N(!0);const E=await kE({nomeCompleto:r.trim(),empresa:c.trim(),email:h.trim(),whatsapp:Mb(v),qtdPontosMidia:(g||"").trim(),origem:s||"unknown"});if(E.ok){ye.success("Voc entrou na lista de espera!"),n();return}ye.error(E.error||"No foi possvel enviar."),N(!1)};return e.jsx("div",{className:"waitlist-overlay",role:"dialog","aria-modal":"true",onMouseDown:E=>{E.target===E.currentTarget&&n()},children:e.jsxs("div",{className:"waitlist-modal",onMouseDown:E=>E.stopPropagation(),children:[e.jsx("button",{className:"waitlist-close",onClick:n,"aria-label":"Fechar",children:""}),e.jsxs("div",{className:"waitlist-header",children:[e.jsx("img",{src:Ba,alt:"OneMedia",className:"waitlist-logo"}),e.jsxs("h2",{className:"waitlist-title",children:["Chega de perder tempo (e dinheiro)",e.jsx("br",{}),"com planilhas de OOH desatualizadas"]}),e.jsxs("p",{className:"waitlist-subtitle",children:["Estamos finalizando a plataforma que vai automatizar seu Mdia Kit e organizar seu inventrio",e.jsx("br",{}),"com preciso militar. ",e.jsx("strong",{children:"Entre na lista de espera para ser um dos primeiros"})," a dominar o mercado",e.jsx("br",{}),"com a OneMedia."]})]}),e.jsxs("div",{className:"waitlist-form",children:[e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Nome completo"}),e.jsx("input",{className:"waitlist-input",value:r,onChange:E=>o(E.target.value),placeholder:"Seu nome",autoComplete:"name"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Nome da empresa"}),e.jsx("input",{className:"waitlist-input",value:c,onChange:E=>u(E.target.value),placeholder:"Sua empresa",autoComplete:"organization"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Email"}),e.jsx("input",{className:"waitlist-input",value:h,onChange:E=>f(E.target.value),placeholder:"seuemail@empresa.com",autoComplete:"email",inputMode:"email"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"WhatsApp"}),e.jsx("input",{className:"waitlist-input",value:v,onChange:E=>x(E.target.value),placeholder:"(61) 99999-9999",autoComplete:"tel",inputMode:"tel"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Quantidade de pontos de mdia"}),e.jsx("input",{className:"waitlist-input",value:g,onChange:E=>j(E.target.value),placeholder:"Ex: 50",inputMode:"numeric"})]}),e.jsx("button",{className:"waitlist-submit",onClick:S,disabled:!C,children:w?"Enviando":"Entrar na lista de espera"}),e.jsxs("p",{className:"waitlist-disclaimer",children:["Fique tranquilo, tambm no gostamos de spam.",e.jsx("br",{}),"Voc receber apenas ",e.jsx("strong",{children:"novidades exclusivas"})," e o ",e.jsx("strong",{children:"convite de lanamento"}),"."]})]})]})})}const gw=m.createContext({openWaitlist:()=>{},closeWaitlist:()=>{}});function qo(){return m.useContext(gw)}function DE({children:t}){const[s,n]=m.useState(!1),[r,o]=m.useState(""),c=m.useMemo(()=>({openWaitlist:u=>{o(u),n(!0)},closeWaitlist:()=>{n(!1)}}),[]);return e.jsxs(gw.Provider,{value:c,children:[t,e.jsx(TE,{open:s,origin:r,onClose:c.closeWaitlist})]})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ME=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,r)=>r?r.toUpperCase():n.toLowerCase()),Rb=t=>{const s=ME(t);return s.charAt(0).toUpperCase()+s.slice(1)},vw=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=m.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...h},f)=>m.createElement("svg",{ref:f,...RE,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:vw("lucide",o),...h},[...u.map(([v,x])=>m.createElement(v,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(t,s)=>{const n=m.forwardRef(({className:r,...o},c)=>m.createElement(OE,{ref:c,iconNode:s,className:vw(`lucide-${IE(Rb(t))}`,`lucide-${t}`,r),...o}));return n.displayName=Rb(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],t0=Ge("activity",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rn=Ge("arrow-left",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Na=Ge("arrow-right",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],BE=Ge("arrow-up-down",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Wo=Ge("building-2",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Ob=Ge("building",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wu=Ge("calendar",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],WE=Ge("camera",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gu=Ge("chart-column",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],KE=Ge("chart-pie",ZE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wa=Ge("check",QE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ru=Ge("chevron-down",XE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rd=Ge("chevron-left",YE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hl=Ge("chevron-right",JE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yw=Ge("chevron-up",ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vu=Ge("circle-alert",tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hh=Ge("circle-check-big",sk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ui=Ge("circle-check",nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],rk=Ge("circle-dot",ak);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bw=Ge("circle-help",ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lb=Ge("circle-x",ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ck=Ge("clipboard-check",lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],uk=Ge("clock-4",dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],s0=Ge("clock",mk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$n=Ge("copy",hk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]],fk=Ge("copyright",pk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],gk=Ge("crown",xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Cu=Ge("dollar-sign",vk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Dl=Ge("download",yk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],jk=Ge("ellipsis-vertical",bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ou=Ge("external-link",Nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Cg=Ge("eye-off",wk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],li=Ge("eye",Ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],_k=Ge("facebook",Sk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"16lz6z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z",key:"99pj1s"}],["path",{d:"M7 17v5",key:"1yj1jh"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}]],Pk=Ge("file-box",Ak);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Px=Ge("file-check",Ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Js=Ge("file-text",kk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pp=Ge("funnel",Tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jw=Ge("globe",Dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Mk=Ge("headphones",Ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ok=Ge("history",Rk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Fk=Ge("house",Lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Th=Ge("image",$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Nw=Ge("info",zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],ww=Ge("instagram",Bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]],Vk=Ge("laptop",Uk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],fp=Ge("layers",Hk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Cw=Ge("layout-dashboard",qk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Gk=Ge("link-2-off",Wk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Kk=Ge("link",Zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Sw=Ge("linkedin",Qk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Yk=Ge("list",Xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ra=Ge("loader-circle",Jk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xp=Ge("lock",e4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],s4=Ge("log-in",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],a4=Ge("log-out",n4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],zo=Ge("mail",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ia=Ge("map-pin",i4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],l4=Ge("map-pinned",o4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],_w=Ge("map",c4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],Aw=Ge("megaphone",d4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],n0=Ge("menu",u4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Il=Ge("message-circle",m4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],p4=Ge("message-square",h4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M5 12h14",key:"1ays0h"}]],x4=Ge("minus",f4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Hc=Ge("package",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],y4=Ge("paperclip",v4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],j4=Ge("pencil-line",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],gp=Ge("pencil",N4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],C4=Ge("phone",w4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],_4=Ge("play",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sn=Ge("plus",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Fl=Ge("refresh-ccw",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],a0=Ge("refresh-cw",E4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],T4=Ge("rocket",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Pw=Ge("rotate-cw",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],M4=Ge("scale",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],O4=Ge("search-x",R4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],hi=Ge("search",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lu=Ge("send",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vp=Ge("settings",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ew=Ge("share-2",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],U4=Ge("shield-alert",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kw=Ge("shield-check",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Su=Ge("shield",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Yc=Ge("shopping-cart",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],G4=Ge("smartphone",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],El=Ge("sparkles",Z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ql=Ge("square-pen",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]],X4=Ge("square-stack",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],J4=Ge("square",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Lo=Ge("star",eT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Tw=Ge("tag",tT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Aa=Ge("trash-2",sT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Dw=Ge("trending-down",nT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],r0=Ge("trending-up",aT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qh=Ge("triangle-alert",rT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],oT=Ge("twitter",iT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Jc=Ge("upload",lT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],dT=Ge("user",cT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],i0=Ge("users",uT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Fu=Ge("wallet",mT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],pT=Ge("wrench",hT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ca=Ge("x",fT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gT=Ge("zap",xT),Iw=[{id:"solo",name:"Solo",strikePrice:"R$ 299,00",monthlyPrice:"R$ 299,00/ms",users:1,points:50,tag:"Para comear",accent:"border-blue-500/70",description:"Gesto completa para o dono do negcio. Todas as ferramentas de venda, financeiro e DOOH libertas para um utilizador. Ideal para quem gere a sua prpria operao com profissionalismo e agilidade."},{id:"core",name:"Core",strikePrice:"R$ 399,00",monthlyPrice:"R$ 399,00/ms",users:3,points:100,tag:"Crescimento",accent:"border-blue-500/70",description:"Para pequenas equipes que querem escalar. At 3 usurios com acesso completo s ferramentas de vendas, inventrio e financeiro para crescer com organizao e velocidade."},{id:"start",name:"Start",strikePrice:"R$ 499,00",monthlyPrice:"R$ 499,00/ms",users:10,points:150,tag:"Popular",accent:"border-green-500/70",description:"O plano escolhido pela maioria das operaes em crescimento. Equipe de at 10 pessoas com todos os recursos para vender mais e gerir o inventrio com eficincia."},{id:"pro",name:"Pro",strikePrice:"R$ 599,00",monthlyPrice:"R$ 599,00/ms",users:15,points:200,tag:"Operaes",accent:"border-blue-500/70",description:"Para operaes robustas com mltiplos usurios. At 15 pessoas com acesso total, recursos avanados de inventrio e relatrios para dominar o mercado OOH/DOOH."}],Mw=["Mdia Kit Ao vivo","Mapa Interativo","Propostas Comerciais","Notificaes de Leitura","Gesto Simples do Inventrio","Gesto de Campanhas","Fluxo de Caixa","DRE por Ponto de Mdia","Relatrios","Cobranas","Gesto Avanada do Inventrio","Sistema de Reservas","Multi-Proprietrios","Assinatura Digital Nativa","Emisso de Notas Fiscais (NF-e)"],Ua={name:"Pro 2.000",minPoints:250,maxPoints:2e3,step:50,basePoints:250,basePrice:699,pricePer100:200};function Rw(t){return m.useMemo(()=>{const n=Math.max(0,t-Ua.basePoints)/100,r=Ua.basePrice+n*Ua.pricePer100;return Math.round(r)},[t])}function Ow(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}const Dh=340;function vT({text:t}){return e.jsxs("span",{style:{position:"relative",display:"inline-block",color:"#9ca3af",fontSize:"0.875rem",fontWeight:500},children:[t,e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),e.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]})]})}function Fb({children:t,featured:s=!1}){return e.jsx("div",{style:{width:Dh,minWidth:Dh,maxWidth:Dh},className:`relative flex-shrink-0 snap-start bg-white rounded-2xl flex flex-col shadow-sm hover:shadow-md transition-shadow duration-200 ${s?"border-2 border-blue-600":"border border-gray-200"}`,children:t})}function Lw(){const t=is(),[s,n]=m.useState(!1),[r,o]=m.useState(Ua.minPoints),c=Rw(r),u=m.useMemo(()=>Ow(c),[c]),h=m.useRef(null),f=j=>{const w=h.current;w&&w.scrollBy({left:j==="left"?-360:Dh+20,behavior:"smooth"})},v=j=>e.jsx("div",{className:"p-5 flex flex-col flex-1 gap-3",children:j}),x=j=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:"Limites"}),e.jsx("div",{className:"space-y-1.5",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-700",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ia,{className:"w-3.5 h-3.5 text-gray-400"}),"Pontos"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:j})]})})]}),g=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Todos os Recursos no Marketplace e mais:"}),e.jsx("ul",{className:"space-y-1.5 text-xs text-gray-600 flex-1",children:Mw.map(j=>e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(Ui,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}),j]},j))})]});return e.jsx("section",{id:"planos",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-widest text-blue-600 mb-2",children:"Teste gratis"}),e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 mb-3",children:"Planos com 1 mes gratuito"}),e.jsx("p",{className:"text-base text-gray-500 max-w-xl mx-auto",children:"Sem cartao de credito. Cancele quando quiser."})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Arraste ou use as setas para ver os planos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{"aria-label":"Anterior",onClick:()=>f("left"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx(rd,{className:"h-5 w-5"})}),e.jsx("button",{"aria-label":"Proximo",onClick:()=>f("right"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx(Hl,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{ref:h,className:"flex gap-5 overflow-x-auto snap-x snap-mandatory pb-6",style:{scrollbarWidth:"none"},children:[Iw.map(j=>e.jsxs(Fb,{children:[j.tag&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-50 text-blue-700 text-[11px] font-semibold px-2 py-0.5 rounded-full border border-blue-100",children:[e.jsx(Lo,{className:"w-2.5 h-2.5"}),j.tag]})}),v(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 flex-shrink-0"}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:j.name})]}),e.jsxs("div",{children:[j.strikePrice&&e.jsx("p",{children:e.jsx(vT,{text:j.strikePrice})}),e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro mes"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",j.monthlyPrice]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:j.description}),e.jsx("hr",{className:"border-gray-100"}),x(j.points),e.jsx("hr",{className:"border-gray-100"}),g(),e.jsx("button",{onClick:()=>t("/cadastro"),className:"mt-auto w-full py-2.5 rounded-xl bg-blue-600 text-white font-semibold text-sm hover:bg-blue-700 transition-colors",children:"Comecar gratis"})]}))]},j.id)),e.jsxs(Fb,{featured:!0,children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-600 text-white text-[11px] font-semibold px-2 py-0.5 rounded-full",children:[e.jsx(Lo,{className:"w-2.5 h-2.5"}),"Escalavel"]})}),v(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-blue-500 flex-shrink-0"}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:Ua.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro mes"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",u,"/mes"]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-gray-800",children:[e.jsx("span",{children:"Pontos"}),e.jsxs("span",{children:[r," pts"]})]}),e.jsx("input",{type:"range",min:Ua.minPoints,max:Ua.maxPoints,step:Ua.step,value:r,onChange:j=>o(Number(j.target.value)),className:"w-full accent-blue-600"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Arraste para ajustar pontos e ver o preco."})]}),e.jsx("hr",{className:"border-gray-100"}),x(r),e.jsx("hr",{className:"border-gray-100"}),g(),e.jsx("button",{onClick:()=>t("/contato"),className:"mt-auto w-full py-2.5 rounded-xl bg-blue-600 text-white font-semibold text-sm hover:bg-blue-700 transition-colors",children:"Falar com vendas"})]}))]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mt-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-1",children:"Multi-Proprietarios"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Permite cadastrar ate 4 proprietarios por ponto de midia. Por padrao, todos os planos incluem 1 proprietario por ponto."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"1 proprietario",value:"Incluso",color:"text-green-600",bg:"bg-gray-50 border-gray-200"},{label:"2 proprietarios",value:"R$ 99/mes",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{label:"3 proprietarios",value:"R$ 113,85/mes",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{label:"4 proprietarios",value:"R$ 128,70/mes",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"}].map(({label:j,value:w,color:N,bg:C})=>e.jsxs("div",{className:`rounded-xl ${C} border px-3 py-2.5 text-center`,children:[e.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:j}),e.jsx("div",{className:`text-xs font-semibold ${N}`,children:w})]},j))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(bw,{className:"w-5 h-5 text-gray-400"})}),s&&e.jsxs("div",{className:"absolute right-0 top-10 w-72 bg-white rounded-xl shadow-xl p-4 border border-gray-200 z-10 text-xs text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"Quando preciso de multiplos proprietarios?"}),"Se voce gerencia pontos que pertencem a varios proprietarios diferentes, ou precisa dividir repasses entre multiplas empresas por ponto."]})]})]})})]})})}const o0="/figma-assets/b772fcca664e51771498ee420b09d2bb7a1c5fed.png",Fw="/figma-assets/b410819dec3dab15947c18ed6baae2284d619ffd.png",yT="/figma-assets/4927f4005fdcb4cee75f7c6be5a84c437632a666.png",bT="/figma-assets/6798ffea025a808956ca89ea6da0e04d0cee19d8.png",l0="/figma-assets/6278c812688036c294627847a92c37d9fdd135d8.png",jT="/figma-assets/bdc94cbddf5660b338a9b0459df94874d600a7f6.png",c0="/figma-assets/8c102002d56706280ee26142532d5a1c15f2e0da.png",NT="/figma-assets/c111a3e573ecc1de8c1b8bded684b67ff2234cd6.png",d0="/figma-assets/15a28e63418d28c9ec12a06d0df66c23e5e7edac.png",wT="/figma-assets/18abb66ce6b22f670cd4116722de8d5e72ec0e1e.png",u0="/figma-assets/ea092394ba26ae8e99aec4c2c652c109f797a8ef.png",CT="/figma-assets/e4aae58e61f032bc98c383fa6c9fea846a8a8c06.png",ST="/figma-assets/02d010d4d626ef6df76355ef463372b4764a1d53.png",_T="/figma-assets/7d302fdd327d35135083ec1233df4d38236c20f7.png",AT="/figma-assets/ede0d250980b265fcc69c78bbcfc2cf1766ad469.png",PT="/figma-assets/cd83b92791eb35af88ec6625a90b444217be6c1b.png",ET="/figma-assets/bc4c41825d562aa00505148f9c2cf7776c1dda25.png",kT="/figma-assets/bbbe5dc0a7da7fae50e76241d183ed958b85d959.png",yp="/figma-assets/24be53fa98cb70de89bcd6b3013fd88d5eff019e.png",m0="/figma-assets/midiakit.png",TT="/figma-assets/2e890f0b983e67f4196361f257d7f43fc5fe006a.png",DT="/figma-assets/1896d19035e48bc6bce4326ab159c9231b61df91.png",IT={topRight:"solutions-badge--topRight",bottomLeft:"solutions-badge--bottomLeft",bottomRight:"solutions-badge--bottomRight"};function MT({name:t,fallback:s,className:n="",alt:r=""}){const o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,""),[c,u]=m.useState(`/gifs/${t}.gif`),[h,f]=m.useState(!1);return h?e.jsx("div",{className:n,children:s}):e.jsx("img",{src:c,alt:r||t,className:n,onError:()=>{c===`/gifs/${t}.gif`&&o!==t?u(`/gifs/${o}.gif`):f(!0)}})}const Ex={inventario:{image1:l0,image2:jT},propostas:{image1:c0,image2:NT},campanhas:{image1:d0,image2:wT},financeiro:{image1:u0,image2:CT},reservas:{image1:ST,image2:_T},clientes:{image1:AT,image2:PT},proprietarios:{image1:ET,image2:kT},relatorios:{image1:yp,image2:m0},outros:{image1:TT,image2:DT}},ir={inventario:{title:"Organize seu patrimnio com preciso militar",description:"Cadastre pontos, faces e proprietrios com geolocalizao automtica e controle de status em tempo real.",screenshot:l0,badges:[{label:"Cadastro Automtico",icon:e.jsx(El,{className:"w-4 h-4"}),position:"topRight"},{label:"Upload de Fotos",icon:e.jsx(Jc,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Geolocalizao Ativa",icon:e.jsx(ia,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:o0,statText:"Reduo de 70%",statSubtext:"no tempo de organizao",testimonial:{quote:'"O inventrio inteligente nos deu a organizao que precisvamos. Agora sabemos exatamente onde cada ponto est localizado e seu status em tempo real, acabou a baguna no controle do patrimnio."',name:"Carlos Mendes",role:"Diretor Comercial, OutdoorBR",avatar:Fw}},propostas:{title:"Crie propostas comerciais em minutos",description:"Monte propostas profissionais com templates personalizveis, clculos automticos de valores e aprovao digital integrada.",screenshot:c0,badges:[{label:"Templates Prontos",icon:e.jsx(Js,{className:"w-4 h-4"}),position:"topRight"},{label:"Aprovao Digital",icon:e.jsx(Ui,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Envio em PDF",icon:e.jsx(Js,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Ba,statText:"Aumento de 85%",statSubtext:"na taxa de converso",testimonial:{quote:'"Com a automao de propostas, nosso time comercial triplicou a quantidade de oramentos enviados. Os templates prontos economizam horas de trabalho e impressionam os clientes."',name:"Mariana Silva",role:"Gerente de Vendas, MediaPlus",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"}},campanhas:{title:"Gerencie todas as campanhas em um s lugar",description:"Acompanhe veiculaes, monitore performance e controle prazos com calendrio visual integrado ao inventrio disponvel.",screenshot:d0,badges:[{label:"Status em Tempo Real",icon:e.jsx(gu,{className:"w-4 h-4"}),position:"topRight"},{label:"Calendrio Visual",icon:e.jsx(wa,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Prazos & Alertas",icon:e.jsx(qh,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Ba,statText:"Reduo de 60%",statSubtext:"em conflitos de veiculao",testimonial:{quote:'"O controle de campanhas centralizado acabou com os problemas de sobreposio. Agora visualizamos tudo em tempo real e nunca mais perdemos um prazo de veiculao."',name:"Roberto Alves",role:"Coordenador de Operaes, UrbanMedia",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"}},financeiro:{title:"Controle financeiro completo e automtico",description:"Gesto de cobranas, recebimentos e despesas com alertas inteligentes e integrao direta s campanhas ativas.",screenshot:u0,badges:[{label:"Cobrana Automtica",icon:e.jsx(El,{className:"w-4 h-4"}),position:"topRight"},{label:"Alertas de Pagamento",icon:e.jsx(qh,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Relatrios",icon:e.jsx(gu,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Ba,statText:"Reduo de 78%",statSubtext:"em inadimplncia",testimonial:{quote:'"Os alertas automticos de pagamento transformaram nosso fluxo de caixa. Antes perdamos muito tempo perseguindo clientes, agora o sistema cuida disso automaticamente."',name:"Paula Ferreira",role:"Diretora Financeira, VisionOut",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"}},midiakit:{title:"Mdia kit digital que vende sozinho",description:"Apresente seu inventrio com mapas interativos, fotos em alta resoluo e dados de audincia que impressionam clientes.",screenshot:m0,badges:[{label:"Mapa Interativo",icon:e.jsx(_w,{className:"w-4 h-4"}),position:"topRight"},{label:"Fotos HD",icon:e.jsx(Jc,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Solicitao Rpida",icon:e.jsx(El,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Ba,statText:"Aumento de 92%",statSubtext:"em engajamento de clientes",testimonial:{quote:'"O mdia kit digital  nossa melhor ferramenta de vendas. Os clientes navegam pelo mapa, veem fotos reais dos pontos e j fecham negcio na primeira reunio."',name:"Fernando Costa",role:"Diretor Comercial, MegaOut",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400"}},dashboard:{title:"Inteligncia de dados para decises rpidas",description:"Dashboards em tempo real com indicadores de ocupao, faturamento, performance comercial e anlises preditivas.",screenshot:yp,badges:[{label:"KPIs em Tempo Real",icon:e.jsx(gu,{className:"w-4 h-4"}),position:"topRight"},{label:"Insights",icon:e.jsx(El,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Config. Inteligente",icon:e.jsx(vp,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Ba,statText:"Aumento de 110%",statSubtext:"na velocidade de deciso",testimonial:{quote:'"Ter todos os indicadores em um dashboard nico mudou completamente nossa gesto. Identificamos oportunidades e problemas em segundos, no mais em semanas."',name:"Juliana Martins",role:"CEO, StreetMedia Group",avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400"}}};function $b(){const t=is(),{openWaitlist:s}=qo(),[n,r]=m.useState("inventario"),[o,c]=m.useState(null),[u,h]=m.useState(new Set),[f,v]=m.useState("inventario"),[x,g]=m.useState("reservas"),[j,w]=m.useState(!1),[N,C]=m.useState(!1),S=_=>{_!==n&&!N&&(u.has(_)&&h(k=>{const T=new Set(k);return T.delete(_),T}),c(n),C(!0),setTimeout(()=>{r(_)},10),setTimeout(()=>{C(!1),h(k=>new Set(k).add(n)),c(null)},360))},E={reservas:{title:"Automao de reservas",description:"O sistema calcula automaticamente a taxa de ocupao de cada ponto de mdia em tempo real. Monitora campanhas ativas, perodos disponveis e gera alertas quando um ponto fica livre para maximizar sua receita sem esforo manual."},relatorios:{title:"Gerador de relatrios",description:"Crie relatrios completos de performance, faturamento e ocupao em segundos. Escolha entre dezenas de templates prontos ou personalize suas prprias anlises. Exporte em PDF, Excel ou compartilhe diretamente com sua equipe."},financeira:{title:"Automao financeira",description:"Cobranas automticas vinculadas s campanhas, envio de boletos programados e alertas de inadimplncia. O sistema monitora pagamentos, gera segunda via e notifica clientes automaticamente, reduzindo drasticamente sua inadimplncia."},propostas:{title:"Automao de propostas",description:"Monte propostas comerciais profissionais em minutos com templates inteligentes. O sistema preenche automaticamente valores, disponibilidade, fotos dos pontos e envia para aprovao digital do cliente com tracking em tempo real."},midiakit:{title:"Automao do mdia kit",description:"Seu mdia kit digital se atualiza automaticamente com novos pontos, fotos, dados de audincia e localizao. Clientes podem navegar pelo mapa interativo, filtrar por caractersticas e solicitar oramentos sem sua interveno."},dashboard:{title:"Automao de dashboard",description:"Dashboards inteligentes que consolidam dados de todos os mdulos automaticamente. KPIs atualizados em tempo real, grficos interativos, comparativos de performance e alertas preditivos para antecipar problemas antes que aconteam."}};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-12"})}),e.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[e.jsx("a",{href:"#produtos",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Produtos"}),e.jsx("a",{href:"#solucoes",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Solues"}),e.jsx("a",{href:"#recursos",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Recursos"}),e.jsx("button",{onClick:()=>t("/planos"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Preos"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/login"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Iniciar sesso"}),e.jsx("button",{onClick:()=>{s("index:header:ver-demonstracao")},className:"hidden md:flex items-center gap-2 px-6 py-2.5 border border-blue-600 text-blue-600 rounded-full hover:bg-blue-50 transition-colors",children:"Ver demonstrao"}),e.jsxs("button",{onClick:()=>{s("index:header:teste-gratis-30-dias")},className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:shadow-lg transition-all",children:["Teste Grtis 30 dias",e.jsx(Na,{className:"w-4 h-4"})]})]})]})}),e.jsx("section",{id:"produtos",className:"landing-hero-section landing-anchor pb-20 px-6 bg-gradient-to-b from-gray-50 to-white overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-blue-500/5 rounded-[55px] hero-shell",children:[e.jsxs("div",{className:"text-center mb-8 hero-content",children:[e.jsxs("h1",{className:"hero-title text-gray-900 mb-5",children:["A plataforma completa para",e.jsx("br",{}),"dominar sua mdia OOH/DOOH"]}),e.jsxs("p",{className:"hero-subtitle text-gray-700 max-w-4xl mx-auto mb-8",children:["Centralize inventrio, propostas, campanhas e financeiro em uma nica sute inteligente.",e.jsx("br",{}),"Elimine planilhas desatualizadas e multiplique suas vendas."]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("button",{onClick:()=>{s("index:hero:teste-gratis-30-dias")},className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-xl rounded-full hover:shadow-xl transition-all",children:["Teste Grtis 30 dias",e.jsx(Na,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-gray-600",children:"No  necessrio carto de crdito"})]})]}),e.jsx("div",{className:"hero-stage max-w-5xl mx-auto",children:e.jsx("div",{className:"hero-preview-viewport",children:Object.keys(Ex).map(_=>{const k=_,T=k===n&&!N,M=k===o&&N,F=k===n&&N,O=u.has(k);let Z="130%",q=0,$="opacity 0s";return T?(Z="0",q=1,$="opacity 0s"):M?(Z="-130%",q=.92,$="all 340ms ease-in-out"):F?(Z="0",q=1,$="all 340ms ease-in-out"):O&&(Z="-130%",q=0,$="opacity 0s"),e.jsxs("div",{className:"absolute inset-0",style:{transform:`translateX(${Z})`,opacity:q,transition:$,pointerEvents:T?"auto":"none",zIndex:M?5:F?10:T?15:0},children:[e.jsx("div",{className:"hero-img-back",style:{animation:T?"float-secondary 3.2s ease-in-out infinite":"none",animationDelay:"0.5s"},children:e.jsx("img",{src:Ex[k].image2,alt:`${k} - Vista 2`,className:"hero-img",style:{transform:"rotate(-1.5deg) scale(0.88)",transformOrigin:"center center"}})}),e.jsx("div",{className:"hero-img-front",style:{animation:T?"float-primary 2.8s ease-in-out infinite":"none",zIndex:10},children:e.jsx("img",{src:Ex[k].image1,alt:`${k} - Vista 1`,className:"hero-img hero-img--front",style:{transform:"rotate(1.2deg)",transformOrigin:"center center"}})})]},k)})})}),e.jsxs("div",{className:"hero-module-card hidden lg:block",children:[e.jsx("p",{className:"text-center text-gray-900 mb-6",children:"O que voc gostaria de gerenciar hoje?"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Inventrio",key:"inventario"},{label:"Propostas",key:"propostas"},{label:"Campanhas",key:"campanhas"},{label:"Financeiro",key:"financeiro"},{label:"Reservas",key:"reservas"},{label:"Clientes",key:"clientes"},{label:"Proprietrios",key:"proprietarios"},{label:"Relatrios",key:"relatorios"},{label:"Outros...",key:"outros"}].map((_,k)=>e.jsxs("button",{onClick:()=>S(_.key),className:`border rounded-xl p-4 text-center transition-all cursor-pointer ${n===_.key?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-100":"border-gray-200 hover:border-blue-300 hover:bg-blue-50/30"}`,children:[e.jsx("div",{className:`w-4 h-4 border rounded mb-2 mx-auto transition-all ${n===_.key?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:n===_.key&&e.jsx(wa,{className:"w-3 h-3 text-white"})}),e.jsx("p",{className:"text-xs text-gray-700",children:_.label})]},k))}),e.jsxs("button",{onClick:()=>{s("index:produtos:teste-gratis-30-dias")},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:shadow-lg transition-all",children:["Teste Grtis 30 dias",e.jsx(Na,{className:"w-5 h-5"})]})]})]})})}),e.jsx("section",{id:"solucoes",className:"landing-anchor py-16 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-medium text-gray-900 text-center mb-10",children:["Solues para todos os negcios.",e.jsx("br",{}),"Uma nica plataforma."]}),e.jsx("div",{className:"solutions-tabs",children:[{label:"Inventrio",key:"inventario"},{label:"Propostas",key:"propostas"},{label:"Campanhas",key:"campanhas"},{label:"Financeiro",key:"financeiro"},{label:"Mdia Kit",key:"midiakit"},{label:"Dashboard",key:"dashboard"}].map(_=>e.jsx("button",{onClick:()=>v(_.key),className:`solutions-tab ${f===_.key?"solutions-tab--active":""}`,children:_.label},_.key))}),e.jsxs("div",{className:"solutions-layout",children:[e.jsx("div",{className:"solutions-left-card bg-gradient-to-r from-blue-500 to-blue-700",children:e.jsxs("div",{className:"solutions-left-inner",children:[e.jsxs("div",{className:"solutions-left-text",children:[e.jsx("h3",{className:"solutions-left-title",children:ir[f].title}),e.jsx("p",{className:"solutions-left-desc",children:ir[f].description}),e.jsxs("button",{onClick:()=>{s(`index:solucoes:${f}:teste-gratis-30-dias`)},className:"solutions-left-cta",children:["Teste Grtis 30 dias",e.jsx(Na,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"solutions-left-preview",children:[ir[f].badges?.map(_=>e.jsxs("div",{className:`solutions-badge ${IT[_.position]}`,children:[_.icon,e.jsx("span",{children:_.label})]},_.label)),e.jsx("div",{className:"solutions-preview-surface",children:e.jsx("div",{className:"solutions-preview-frame",children:e.jsx("img",{src:ir[f].screenshot,alt:"Preview do mdulo",className:"solutions-preview-img"})})})]})]})}),e.jsxs("div",{className:"solutions-right",children:[e.jsxs("div",{className:"solutions-right-statCard",children:[e.jsx("img",{src:ir[f].statLogo,alt:"Logo",className:"solutions-stat-logo"}),e.jsxs("p",{className:"solutions-stat",children:[e.jsx("span",{className:"solutions-stat-strong",children:ir[f].statText})," ",ir[f].statSubtext]})]}),e.jsxs("div",{className:"solutions-right-testimonialCard",children:[e.jsx("p",{className:"solutions-quote",children:ir[f].testimonial.quote}),e.jsx("div",{className:"solutions-divider"}),e.jsxs("div",{className:"solutions-person",children:[e.jsx("img",{src:ir[f].testimonial.avatar,alt:ir[f].testimonial.name,className:"solutions-avatar"}),e.jsxs("div",{className:"solutions-person-text",children:[e.jsx("p",{className:"solutions-person-name",children:ir[f].testimonial.name}),e.jsx("p",{className:"solutions-person-role",children:ir[f].testimonial.role})]})]})]})]})]})]})}),e.jsx("section",{id:"recursos",className:"landing-anchor efficiency-section",children:e.jsxs("div",{className:"efficiency-wrap",children:[e.jsxs("div",{className:"efficiency-header",children:[e.jsx("div",{className:"efficiency-iconWrap",children:e.jsx("img",{src:yT,alt:"Automao"})}),e.jsxs("h2",{className:"efficiency-heading",children:["Mais eficincia.",e.jsx("br",{}),"Multiplicada por automao."]})]}),e.jsxs("div",{className:"efficiency-grid",children:[e.jsx("div",{className:"efficiency-menu",children:[{label:"Automao de reservas",dot:"blue",key:"reservas"},{label:"Gerador de relatrios",dot:"red",key:"relatorios"},{label:"Automao financeira",dot:"yellow",key:"financeira"},{label:"Automao de propostas",dot:"green",key:"propostas"},{label:"Automao do mdia kit",dot:"blue2",key:"midiakit"},{label:"Automao de dashboard",dot:"red2",key:"dashboard"}].map(_=>e.jsxs("button",{onClick:()=>g(_.key),className:`efficiency-item ${x===_.key?"efficiency-item--active":""}`,type:"button",children:[e.jsx("span",{className:`efficiency-dot efficiency-dot--${_.dot}`,"aria-hidden":"true"}),e.jsx("span",{className:"efficiency-itemLabel",children:_.label})]},_.key))}),e.jsxs("div",{className:"efficiency-content",children:[e.jsx("h3",{className:"efficiency-content-title",children:E[x].title}),e.jsx("p",{className:"efficiency-content-desc",children:E[x].description})]})]})]})}),e.jsx("section",{className:"diff-section",children:e.jsxs("div",{className:"diff-container",children:[e.jsx("h2",{className:"diff-title",children:"O diferencial da onemedia.com"}),[{key:"planilhas",front:{color:"diff-theme-blue",title:"Gesto centralizada do seu inventrio",desc:"Automao que elimina retrabalho e multiplica sua produtividade operacional diariamente.",fallback:e.jsx(gT,{className:"w-20 h-20 text-blue-600"})},back:{statColor:"diff-theme-blue",statMain:"80%",statSub:`menos tempo
em planilhas`,quote:'"A automao transformou nossa rotina. O que levava horas em planilhas agora  feito em minutos, sem erros. Ganhamos uma agilidade impressionante."'}},{key:"visibilidade",front:{color:"diff-theme-red",title:"Visibilidade total em tempo real",desc:"Decises estratgicas baseadas em dados precisos, no em suposies arriscadas.",fallback:e.jsx(li,{className:"w-20 h-20 text-gray-500"})},back:{statColor:"diff-theme-red",statMain:"100%",statSub:`de visibilidade
sobre o inventrio`,quote:'"Agora tomamos decises estratgicas em minutos, com base em dados reais, no em palpites. A visibilidade  total."'}},{key:"resultados",front:{color:"diff-theme-yellow",title:"Implementao em minutos",desc:"Configure rapidamente e comece a ver resultados transformadores ainda hoje.",fallback:e.jsx(T4,{className:"w-20 h-20 text-orange-500"})},back:{statColor:"diff-theme-yellow",statMain:"15min",statSub:`tempo mdio
de configurao`,quote:'"Conectamos nossas telas, importamos o inventrio e comeamos a rodar campanhas no mesmo dia. Foi plug-and-play."'}},{key:"integracao",front:{color:"diff-theme-green",title:"Integrao completa e inteligente",desc:"Todos os mdulos conectados para fluxo de trabalho perfeito e eficiente.",fallback:e.jsx(vp,{className:"w-20 h-20 text-gray-600"})},back:{statColor:"diff-theme-green",statMain:"3x",statSub:`mais propostas
aprovadas`,quote:'"Agora, uma proposta aprovada gera automaticamente o contrato e a ordem de servio. Nossa equipe parou de bater cabea."'}}].map((_,k)=>{const T=k%2===1,M=e.jsx("div",{className:"diff-card diff-surface diff-iconCard",children:e.jsx(MT,{name:_.key==="integracao"?"integrao":_.key,fallback:_.front.fallback,className:"w-24 h-24 object-contain",alt:_.key})}),F=e.jsxs("div",{className:`diff-card diff-textCard ${_.key==="planilhas"?"diff-textCard--blue":""} ${_.key==="visibilidade"?"diff-textCard--red":""} ${_.key==="resultados"?"diff-textCard--yellow":""} ${_.key==="integracao"?"diff-textCard--green":""}`,children:[e.jsx("h3",{className:"diff-textTitle",children:_.front.title}),e.jsx("p",{className:"diff-textDesc",children:_.front.desc})]}),O=e.jsxs("div",{className:`diff-card diff-statCard ${_.key==="planilhas"?"diff-statCard--blue":""} ${_.key==="visibilidade"?"diff-statCard--red":""} ${_.key==="resultados"?"diff-statCard--yellow":""} ${_.key==="integracao"?"diff-statCard--green":""}`,children:[e.jsx("div",{className:"diff-statMain",children:_.back.statMain}),e.jsx("div",{className:"diff-statSub",children:String(_.back.statSub).split(`
`).map((q,$)=>e.jsxs("span",{children:[q,$<String(_.back.statSub).split(`
`).length-1?e.jsx("br",{}):null]},$))})]}),Z=e.jsxs("div",{className:"diff-card diff-surface diff-testimonial",children:[e.jsxs("div",{className:"diff-testimonial-header",children:[e.jsxs("div",{className:"diff-testimonial-person",children:[e.jsx("img",{src:Fw,className:"diff-avatar",alt:"Carlos Mendes"}),e.jsxs("div",{className:"diff-person-meta",children:[e.jsx("p",{className:"diff-person-name",children:"Carlos Mendes"}),e.jsx("p",{className:"diff-person-role",children:"Diretor Comercial, OutdoorBR"})]})]}),e.jsx("img",{src:o0,alt:"OutdoorBR",className:"diff-brand"})]}),e.jsx("p",{className:"diff-quote",children:_.back.quote})]});return e.jsx("div",{className:"differential-flip diff-row",children:e.jsxs("div",{className:"differential-flip-inner",children:[e.jsx("div",{className:"differential-face differential-front",children:e.jsx("div",{className:`diff-pair ${T?"diff-pair--reverse":""}`,children:T?e.jsxs(e.Fragment,{children:[F,M]}):e.jsxs(e.Fragment,{children:[M,F]})})}),e.jsx("div",{className:"differential-face differential-back",children:e.jsx("div",{className:`diff-pair ${T?"diff-pair--reverse":""}`,children:T?e.jsxs(e.Fragment,{children:[Z,O]}):e.jsxs(e.Fragment,{children:[O,Z]})})})]})},_.key)})]})}),e.jsx(Lw,{}),e.jsx("section",{className:"security-section",children:e.jsxs("div",{className:"security-wrap",children:[e.jsx("div",{className:"security-iconWrap","aria-hidden":"true",children:e.jsx("img",{src:bT,alt:"",className:"security-icon"})}),e.jsx("h2",{className:"security-title",children:"Segurana e Confiabilidade"}),e.jsxs("div",{className:"security-block",children:[e.jsx("h3",{className:"security-heading",children:"Proteo total dos seus dados:"}),e.jsxs("ul",{className:"security-list",children:[e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Criptografia SSL"})]}),e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Backup automtico"})]}),e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Conformidade LGPD"})]}),e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Acesso seguro multi-dispositivo"})]})]})]}),e.jsxs("div",{className:"security-block security-block--support",children:[e.jsx("h3",{className:"security-heading",children:"Suporte que funciona:"}),e.jsx("ul",{className:"security-list",children:e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"E-mail prioritrio"})]})})]})]})}),e.jsx("footer",{className:"bg-white py-16 px-6 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-10 mb-6"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/planos"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Preos"}),e.jsx("p",{onClick:()=>w(!0),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Entre em contato conosco"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Produtos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#solucoes",onClick:()=>v("inventario"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Inventrio"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("propostas"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Propostas"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("campanhas"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Campanhas"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("financeiro"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Financeiro"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("midiakit"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Mdia Kit"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("dashboard"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Dashboard"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Solues"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Agncias"}),e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Veculos"}),e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Proprietrios"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recursos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Blog"}),e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Documentao"}),e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Suporte"}),e.jsx("p",{onClick:()=>t("/contato"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Contato"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-gray-600",children:" 2026 OneMedia. Todos os direitos reservados."}),e.jsxs("div",{className:"flex gap-6 text-gray-600",children:[e.jsx("a",{href:"/privacidade",onClick:_=>{_.preventDefault(),t("/privacidade")},className:"hover:text-blue-600 transition-colors",children:"Privacidade"}),e.jsx("a",{href:"/termos",onClick:_=>{_.preventDefault(),t("/termos")},className:"hover:text-blue-600 transition-colors",children:"Termos"})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",onClick:_=>_.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Entre em contato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha como prefere falar conosco:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("a",{href:"https://wa.me/5561982541672?text=Ol!%20Gostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%20Poderia%20me%20ajudar?",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resposta rpida"})]})]}),e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com?subject=Interesse%20na%20plataforma%20OneMedia&body=Ol!%0A%0AGostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%0A%0APoderia%20me%20enviar%20mais%20informaes?%0A%0AObrigado!",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"thifi.contato.oficial@gmail.com"})]})]})]}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-6 px-6 py-3 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Fechar"})]})})]})}function RT({currentStep:t,steps:s}){const n=s.map((r,o)=>({number:o+1,title:r,isCompleted:o<t-1,isActive:o===t-1}));return e.jsx("div",{className:"flex items-center justify-center mb-8",children:n.map((r,o)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-all font-semibold ${r.isCompleted?"bg-green-500 text-white shadow-lg shadow-green-500/30":r.isActive?"bg-gradient-to-br from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-500/30":"bg-gray-200 text-gray-500"}`,children:r.isCompleted?e.jsx(wa,{className:"w-6 h-6"}):e.jsx("span",{className:"text-lg",children:r.number})}),e.jsx("span",{className:`mt-2 text-sm font-medium hidden sm:block ${r.isActive?"text-blue-600":r.isCompleted?"text-green-600":"text-gray-500"}`,children:r.title})]}),o<n.length-1&&e.jsx("div",{className:`w-16 sm:w-24 h-1 mx-2 rounded-full transition-all ${r.isCompleted?"bg-green-500":"bg-gray-200"}`})]},r.number))})}const OT=[{id:"9606a2fb-e7a9-4c77-b834-e566b87cdc0b",range:"0-50",name:"At 50 pontos",description:"Ideal para operaes menores que esto comeando",minPoints:0,maxPoints:50,monthlyPrice:29900,priceLabel:"R$ 299",isPopular:!1},{id:"1be52bed-89e1-4543-b833-8195afadd3be",range:"50-100",name:"50 a 100 pontos",description:"Para empresas em crescimento com inventrio moderado",minPoints:50,maxPoints:100,monthlyPrice:39900,priceLabel:"R$ 399",isPopular:!1},{id:"890bdd79-075b-4ff0-9684-e2fdff6ac74f",range:"101-150",name:"101 a 150 pontos",description:"Plano popular para operaes estabelecidas",minPoints:101,maxPoints:150,monthlyPrice:49900,priceLabel:"R$ 499",isPopular:!0},{id:"092ab0d7-0a88-49c5-a174-50633c37263d",range:"151-200",name:"151 a 200 pontos",description:"Para empresas com inventrio robusto",minPoints:151,maxPoints:200,monthlyPrice:59900,priceLabel:"R$ 599",isPopular:!1},{id:"db9c2c5a-eb13-4c0c-8560-b99e204028c4",range:"201-250",name:"201 a 250 pontos",description:"Operaes de mdio a grande porte",minPoints:201,maxPoints:250,monthlyPrice:69900,priceLabel:"R$ 699",isPopular:!1},{id:"6bf244fc-1d2c-4071-8d8f-9448e9a29c74",range:"251-300",name:"251 a 300 pontos",description:"Para grandes veculos regionais",minPoints:251,maxPoints:300,monthlyPrice:79900,priceLabel:"R$ 799",isPopular:!1},{id:"3e7fd9bc-d171-4a96-a05d-a6e085cbc77d",range:"301-350",name:"301 a 350 pontos",description:"Operaes de grande escala",minPoints:301,maxPoints:350,monthlyPrice:89900,priceLabel:"R$ 899",isPopular:!1},{id:"b1e59d89-f5f0-49fb-8852-ee73b197dd6c",range:"351-400",name:"351 a 400 pontos",description:"Para grandes redes nacionais",minPoints:351,maxPoints:400,monthlyPrice:99900,priceLabel:"R$ 999",isPopular:!1},{id:"8f155086-63fb-459c-9f97-7b7fd2880861",range:"401-plus",name:"Mais de 400 pontos",description:"Plano enterprise customizado para sua operao",minPoints:401,maxPoints:null,monthlyPrice:0,priceLabel:"Sob consulta",isPopular:!1}],kx=9900;function $w(t){return t<=1?0:t===2?kx:t===3?Math.round(kx*1.15):t===4?Math.round(kx*1.3):0}function LT(t){return $w(t)/100}function FT(t){return t<=1?"1 proprietrio":`${t} proprietrios`}function $T(t){return t<=1?"1 proprietrio (incluso)":`At ${t} proprietrios por ponto`}const zb={solo:{range:"0-50",platformId:"9606a2fb-e7a9-4c77-b834-e566b87cdc0b"},core:{range:"50-100",platformId:"1be52bed-89e1-4543-b833-8195afadd3be"},start:{range:"101-150",platformId:"890bdd79-075b-4ff0-9684-e2fdff6ac74f"},pro:{range:"151-200",platformId:"092ab0d7-0a88-49c5-a174-50633c37263d"},"pro-2000":{range:"401-plus",platformId:"8f155086-63fb-459c-9f97-7b7fd2880861"}},zw=300,Bb={width:"min(300px, calc(100vw - 48px))",minWidth:"min(300px, calc(100vw - 48px))",maxWidth:zw};function zT({text:t}){return e.jsxs("span",{style:{position:"relative",display:"inline-block",color:"#9ca3af",fontSize:"0.875rem",fontWeight:500},children:[t,e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),e.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]})]})}function BT({data:t,onChange:s,onNext:n,error:r}){const[o,c]=m.useState(Ua.minPoints),u=Rw(o),h=m.useMemo(()=>Ow(u),[u]),f=m.useRef(null),[v,x]=m.useState(!1),g=m.useMemo(()=>t.selectedPlatformPlanId?Object.entries(zb).find(([,_])=>_.platformId===t.selectedPlatformPlanId)?.[0]??null:null,[t.selectedPlatformPlanId]),j=_=>{const k=zb[_];k&&s({...t,selectedPlanRange:k.range,selectedPlatformPlanId:k.platformId})},w=_=>{f.current?.scrollBy({left:_==="left"?-320:zw+20,behavior:"smooth"})},N=_=>e.jsx("div",{className:"p-5 flex flex-col flex-1 gap-3",children:_}),C=_=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:"Limites"}),e.jsx("div",{className:"space-y-1.5",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-700",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ia,{className:"w-3.5 h-3.5 text-gray-400"}),"Pontos"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:_})]})})]}),S=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Todos os Recursos no Marketplace e mais:"}),e.jsx("ul",{className:"space-y-1.5 text-xs text-gray-600 flex-1",children:Mw.map(_=>e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(Ui,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}),_]},_))})]}),E=_=>({width:16,height:16,borderRadius:"50%",flexShrink:0,background:"white",transition:"border 0.15s",border:g===_?"5px solid #2563eb":"2px solid #d1d5db"});return e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Comece seu teste grtis em 3 passos"}),e.jsx("p",{className:"text-gray-600",children:"Escolha o volume de pontos que voc pretende gerenciar. Voc pode mudar o plano depois."})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Arraste ou use as setas para ver os planos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w("left"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx(rd,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>w("right"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx(Hl,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{ref:f,className:"flex gap-5 overflow-x-auto snap-x snap-mandatory pb-6",style:{scrollbarWidth:"none"},children:[Iw.map(_=>{const k=g===_.id;return e.jsxs("button",{onClick:()=>j(_.id),style:Bb,className:`relative text-left flex-shrink-0 snap-start bg-white rounded-2xl flex flex-col transition-all duration-200 ${k?"border-2 border-blue-600 shadow-lg":"border border-gray-200 shadow-sm hover:border-blue-300 hover:shadow-md"}`,children:[_.tag&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-50 text-blue-700 text-[11px] font-semibold px-2 py-0.5 rounded-full border border-blue-100",children:[e.jsx(Lo,{className:"w-2.5 h-2.5"}),_.tag]})}),N(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{style:E(_.id)}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:_.name})]}),e.jsxs("div",{children:[_.strikePrice&&e.jsx("p",{children:e.jsx(zT,{text:_.strikePrice})}),e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro ms"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",_.monthlyPrice]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:_.description}),e.jsx("hr",{className:"border-gray-100"}),C(_.points),e.jsx("hr",{className:"border-gray-100"}),S(),e.jsx("div",{className:`mt-auto w-full py-2.5 rounded-xl text-center text-sm font-semibold transition-colors ${k?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:k?"Selecionado ":"Selecionar plano"})]}))]},_.id)}),(()=>{const _=g==="pro-2000";return e.jsxs("button",{onClick:()=>j("pro-2000"),style:Bb,className:`relative text-left flex-shrink-0 snap-start bg-white rounded-2xl flex flex-col transition-all duration-200 ${_?"border-2 border-blue-600 shadow-lg":"border-2 border-blue-200 shadow-sm hover:border-blue-400 hover:shadow-md"}`,children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-600 text-white text-[11px] font-semibold px-2 py-0.5 rounded-full",children:[e.jsx(Lo,{className:"w-2.5 h-2.5"}),"Escalvel"]})}),N(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{style:E("pro-2000")}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:Ua.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro ms"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",h,"/ms"]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 space-y-2",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-gray-800",children:[e.jsx("span",{children:"Pontos"}),e.jsxs("span",{children:[o," pts"]})]}),e.jsx("input",{type:"range",min:Ua.minPoints,max:Ua.maxPoints,step:Ua.step,value:o,onChange:k=>c(Number(k.target.value)),className:"w-full accent-blue-600"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Arraste para ajustar pontos e ver o preo."})]}),e.jsx("hr",{className:"border-gray-100"}),C(o),e.jsx("hr",{className:"border-gray-100"}),S(),e.jsx("div",{className:`mt-auto w-full py-2.5 rounded-xl text-center text-sm font-semibold transition-colors ${_?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:_?"Selecionado ":"Selecionar plano"})]}))]})})()]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mb-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-1",children:"Multi-Proprietrios"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Permite cadastrar at 4 proprietrios por ponto de mdia. Por padro, todos os planos incluem 1 proprietrio por ponto."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[{qty:"1",value:"Incluso",color:"text-green-600",bg:"bg-gray-50 border-gray-200"},{qty:"2",value:"R$ 99/ms",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{qty:"3",value:"R$ 113,85/ms",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{qty:"4",value:"R$ 128,70/ms",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"}].map(({qty:_,value:k,color:T,bg:M})=>e.jsxs("div",{className:`rounded-xl ${M} border px-3 py-4 text-center flex flex-col items-center gap-1.5`,children:[e.jsx("div",{className:"text-xl font-bold text-gray-800 leading-none",children:_}),e.jsxs("div",{className:"text-xs text-gray-500 leading-tight",children:["proprietrio",_!=="1"?"s":""]}),e.jsx("div",{className:`text-xs font-semibold ${T} leading-tight`,children:k})]},_))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(bw,{className:"w-5 h-5 text-gray-400"})}),v&&e.jsx("div",{className:"absolute right-0 top-10 w-64 bg-white rounded-xl shadow-xl p-4 border border-gray-200 z-10 text-xs text-gray-600",children:"O add-on Multi-Proprietrios permite associar mais de um proprietrio por ponto de mdia, facilitando a gesto de receitas e comisses por proprietrio."})]})]})}),r&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-700 font-medium",children:r})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:"Prximo"})})]})}function Dr(t){return t.replace(/\D/g,"")}function Ub(t){const s=Dr(t);return s.length===10||s.length===11}function h0(t){const s=Dr(t);if(s.length===0)return"";const n=s.slice(0,2);if(s.length<=2)return`(${s}`;if(s.length===10){const r=s.slice(2,6),o=s.slice(6,10);return`(${n}) ${r}-${o}`}if(s.length===11){const r=s.slice(2,7),o=s.slice(7,11);return`(${n}) ${r}-${o}`}if(s.length<10){const r=s.slice(2,6),o=s.slice(6);return`(${n}) ${r}${o?"-"+o:""}`}return h0(s.slice(0,11))}function Bw(t){return Dr(t).slice(0,11)}function Uw(t){const s=t.length>=8,n=/[A-Z]/.test(t),r=/\d/.test(t),o=/[^A-Za-z0-9]/.test(t);return{minLength:s,hasUpperCase:n,hasNumber:r,hasSpecialChar:o,isValid:s&&n&&r&&o}}function p0(t){return(t||"").trim().replace(/\s+/g,"").toLowerCase()}function Vw(t){const s=p0(t);if(!s)return null;if(!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9-]+)+$/i.test(s))return"E-mail invlido.";if(s.includes(".."))return'E-mail invlido (no pode conter ".." ).';const r=s.split("@")[1]||"";return r.endsWith(".con.br")?'E-mail invlido. Voc quis dizer ".com.br"?':/\.com\.br[a-z0-9]+$/i.test(r)?'E-mail invlido. Verifique o final do domnio (use ".com.br", sem letras extras).':null}function UT(t){return Vw(t)===null}function VT(t){const s=Dr(t);return s.length<=2?s:s.length<=5?`${s.slice(0,2)}.${s.slice(2)}`:s.length<=8?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5)}`:s.length<=12?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8)}`:`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8,12)}-${s.slice(12,14)}`}function HT(t){return Dr(t).length===14}const yu=[{uf:"AC",name:"Acre"},{uf:"AL",name:"Alagoas"},{uf:"AP",name:"Amap"},{uf:"AM",name:"Amazonas"},{uf:"BA",name:"Bahia"},{uf:"CE",name:"Cear"},{uf:"DF",name:"Distrito Federal"},{uf:"ES",name:"Esprito Santo"},{uf:"GO",name:"Gois"},{uf:"MA",name:"Maranho"},{uf:"MT",name:"Mato Grosso"},{uf:"MS",name:"Mato Grosso do Sul"},{uf:"MG",name:"Minas Gerais"},{uf:"PA",name:"Par"},{uf:"PB",name:"Paraba"},{uf:"PR",name:"Paran"},{uf:"PE",name:"Pernambuco"},{uf:"PI",name:"Piau"},{uf:"RJ",name:"Rio de Janeiro"},{uf:"RN",name:"Rio Grande do Norte"},{uf:"RS",name:"Rio Grande do Sul"},{uf:"RO",name:"Rondnia"},{uf:"RR",name:"Roraima"},{uf:"SC",name:"Santa Catarina"},{uf:"SP",name:"So Paulo"},{uf:"SE",name:"Sergipe"},{uf:"TO",name:"Tocantins"}];function qT(t){if(!t)return yu;const s=t.toLowerCase();return yu.filter(n=>n.name.toLowerCase().includes(s)||n.uf.toLowerCase().includes(s))}function WT({data:t,onChange:s,onNext:n,onBack:r,errors:o}){const[c,u]=m.useState(Dr(t.phone)),[h,f]=m.useState(t.state),[v,x]=m.useState(!1),[g,j]=m.useState(yu),w=(_,k)=>{s({...t,[_]:k})},N=_=>{const k=VT(_);w("cnpj",k)},C=_=>{const k=Bw(_);u(k),w("phone",k)},S=_=>{f(_),x(!0);const k=qT(_);j(k);const T=yu.find(M=>M.uf.toUpperCase()===_.toUpperCase());T&&w("state",T.uf)},E=(_,k)=>{f(_),w("state",_),x(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Dados da empresa"}),e.jsx("p",{className:"text-gray-600",children:"Essas informaes sero usadas para notas, contratos e relatrios."})]}),e.jsxs("div",{className:"space-y-5 mb-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome fantasia da empresa ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.fantasyName,onChange:_=>w("fantasyName",_.target.value),placeholder:"Ex: Outdoor Brasil Publicidade",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.fantasyName?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.fantasyName&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.fantasyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razo social"}),e.jsx("input",{type:"text",value:t.legalName,onChange:_=>w("legalName",_.target.value),placeholder:"Ex: Outdoor Brasil Publicidade Ltda",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNPJ ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.cnpj,onChange:_=>N(_.target.value),placeholder:"00.000.000/0000-00",maxLength:18,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.cnpj?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.cnpj&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.cnpj})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone / WhatsApp"}),e.jsx("input",{type:"tel",value:h0(c),onChange:_=>C(_.target.value),placeholder:"(11) 99999-9999",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.phone?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.phone}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"10 ou 11 dgitos (com DDD)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site"}),e.jsx("input",{type:"url",value:t.website,onChange:_=>w("website",_.target.value),placeholder:"https://www.exemplo.com.br",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UF / Estado"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h,onChange:_=>S(_.target.value),onFocus:()=>{x(!0),j(yu)},onBlur:()=>{setTimeout(()=>x(!1),200)},placeholder:"SP ou So Paulo",maxLength:20,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.state?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx(Ru,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),o.state&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.state}),v&&g.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(_=>e.jsxs("button",{type:"button",onMouseDown:()=>E(_.uf,_.name),className:"w-full px-4 py-2.5 text-left hover:bg-blue-50 text-sm transition-colors",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:_.uf}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["- ",_.name]})]},_.uf))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade"}),e.jsx("input",{type:"text",value:t.city,onChange:_=>w("city",_.target.value),placeholder:"Ex: So Paulo",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.city?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.city&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.city})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pas"}),e.jsx("input",{type:"text",value:t.country,onChange:_=>w("country",_.target.value),placeholder:"Brasil",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero estimado de usurios internos"}),e.jsx("input",{type:"text",value:t.estimatedUsers,onChange:_=>w("estimatedUsers",_.target.value),placeholder:"Ex: 5",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Apenas para inteligncia comercial, no afeta o plano"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:r,className:"px-10 py-3.5 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-medium",children:"Voltar"}),e.jsx("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:"Prximo"})]})]})}function GT({data:t,onChange:s,onSubmit:n,onBack:r,errors:o,isLoading:c}){const[u,h]=m.useState(!1),[f,v]=m.useState(!1),[x,g]=m.useState(Dr(t.phone)),j=(C,S)=>{s({...t,[C]:S})},w=C=>{const S=Bw(C);g(S),j("phone",S)},N=Uw(t.password);return e.jsxs("div",{children:[o.api&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-700 font-medium whitespace-pre-line",children:o.api})}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Seus dados de acesso"}),e.jsx("p",{className:"text-gray-600",children:"Voc ser o administrador da conta. Depois poder convidar outros usurios."})]}),e.jsxs("div",{className:"space-y-5 mb-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome completo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:C=>j("name",C.target.value),placeholder:"Ex: Joo Silva",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.name?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["E-mail corporativo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",value:t.email,onChange:C=>j("email",p0(C.target.value)),placeholder:"seu.email@empresa.com.br",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.email?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Telefone / WhatsApp ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",value:h0(x),onChange:C=>w(C.target.value),placeholder:"(11) 99999-9999",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.phone?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.phone}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"10 ou 11 dgitos (com DDD)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:t.password,onChange:C=>j("password",C.target.value),placeholder:"Crie uma senha forte",className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.password?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:u?e.jsx(Cg,{className:"w-5 h-5"}):e.jsx(li,{className:"w-5 h-5"})})]}),t.password&&e.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-100 rounded-xl space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Sua senha deve conter:"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[N.minLength?e.jsx(wa,{className:"w-4 h-4 text-green-600"}):e.jsx(Ca,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:N.minLength?"text-green-700 font-medium":"text-gray-600",children:"Mnimo de 8 caracteres"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[N.hasUpperCase?e.jsx(wa,{className:"w-4 h-4 text-green-600"}):e.jsx(Ca,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:N.hasUpperCase?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 letra maiscula (A-Z)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[N.hasNumber?e.jsx(wa,{className:"w-4 h-4 text-green-600"}):e.jsx(Ca,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:N.hasNumber?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 nmero (0-9)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[N.hasSpecialChar?e.jsx(wa,{className:"w-4 h-4 text-green-600"}):e.jsx(Ca,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:N.hasSpecialChar?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 caractere especial (!@#$%&*...)"})]})]})]}),o.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.password})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirmar senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",value:t.confirmPassword,onChange:C=>j("confirmPassword",C.target.value),placeholder:"Digite a senha novamente",className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.confirmPassword?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:f?e.jsx(Cg,{className:"w-5 h-5"}):e.jsx(li,{className:"w-5 h-5"})})]}),o.confirmPassword&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.confirmPassword})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.acceptedTerms,onChange:C=>j("acceptedTerms",C.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Li e aceito os"," ",e.jsx("a",{href:"/termos",target:"_blank",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Termos de Uso"})," ","e a"," ",e.jsx("a",{href:"/privacidade",target:"_blank",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Poltica de Privacidade"}),". ",e.jsx("span",{className:"text-red-600",children:"*"})]})]}),o.acceptedTerms&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.acceptedTerms})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:r,disabled:c,className:"px-10 py-3.5 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all disabled:opacity-50 font-medium",children:"Voltar"}),e.jsx("button",{onClick:n,disabled:c,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg shadow-blue-500/30 font-medium",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):"Concluir cadastro"})]})]})}function qc(t,s="Ocorreu um erro. Tente novamente."){const n=t,r=n?.response?.status,o=n?.response?.data,c=o?.message,u=typeof c=="string"&&c.trim()?c:Array.isArray(c)?c.filter(Boolean).join(`
`):typeof n?.message=="string"&&n.message.trim()?n.message:s,h=typeof o?.code=="string"&&o.code.trim()?o.code:void 0,f=typeof o?.retryAfterSeconds=="number"?o.retryAfterSeconds:void 0;return{message:u,code:h,status:r,retryAfterSeconds:f}}function ZT({companyName:t,userEmail:s}){const n=is(),[r,o]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState(0);m.useEffect(()=>{if(h<=0)return;const x=window.setInterval(()=>{f(g=>Math.max(0,g-1))},1e3);return()=>window.clearInterval(x)},[h]);const v=async()=>{if(s)try{u(null),o(!0);const x=await Tn.post("/auth/resend-verification",{email:s}),g=typeof x.data?.message=="string"&&x.data.message.trim()?x.data.message:"Se a conta existir e o e-mail ainda no estiver verificado, enviamos uma nova confirmao.";u(g);const j=typeof x.data?.retryAfterSeconds=="number"?x.data.retryAfterSeconds:60;f(Math.max(1,Math.min(600,j)))}catch(x){const g=qc(x,"No foi possvel reenviar o e-mail. Tente novamente.");u(g.message),g.retryAfterSeconds&&f(Math.max(1,Math.min(600,g.retryAfterSeconds)))}finally{o(!1)}};return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30",children:e.jsx(Hh,{className:"w-14 h-14 text-white"})})}),e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 mb-6",children:"Conta criada com sucesso!"}),e.jsxs("div",{className:"max-w-lg mx-auto space-y-4 mb-10",children:[e.jsxs("p",{className:"text-gray-600 text-lg",children:["Parabns! A conta da empresa ",e.jsx("span",{className:"font-semibold text-gray-900",children:t})," foi criada com sucesso e voc j pode comear seu teste grtis de 30 dias."]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-5",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[" Enviamos um e-mail de confirmao para ",e.jsx("span",{className:"font-semibold",children:s})," com um link para ativar sua conta."]})}),e.jsx("p",{className:"text-gray-600",children:"Para acessar a plataforma, confirme seu e-mail primeiro. Depois disso, volte aqui e faa login."}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{type:"button",onClick:v,disabled:r||h>0,className:"inline-flex items-center justify-center gap-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-xl hover:bg-blue-50 transition-all font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(Lu,{className:"w-4 h-4"}),r?"Enviando...":h>0?`Reenviar em ${h}s`:"Reenviar e-mail de confirmao"]}),c?e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:c}):e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No recebeu? Verifique a caixa de spam e promoes."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>n("/login"),className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:[e.jsx(s4,{className:"w-5 h-5"}),"Ir para Login"]}),e.jsxs("button",{onClick:()=>n("/"),className:"inline-flex items-center gap-2 bg-white border-2 border-gray-300 text-gray-700 px-10 py-3.5 rounded-xl hover:bg-gray-50 transition-all font-medium",children:[e.jsx(Fk,{className:"w-5 h-5"}),"Voltar para o site"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Precisa de ajuda?"," ",e.jsx("button",{onClick:()=>n("/contato"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Fale com nosso time comercial"})]})]})}const $l="/assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5-CDYQAuU1.png";function KT(){const t=is(),[s,n]=m.useState(1),[r,o]=m.useState(!1),[c,u]=m.useState(!1),[h,f]=m.useState({estimatedPoints:null,selectedPlanRange:null,selectedPlatformPlanId:null}),[v,x]=m.useState({fantasyName:"",legalName:"",cnpj:"",phone:"",website:"",city:"",state:"",country:"Brasil",estimatedUsers:""}),[g,j]=m.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",acceptedTerms:!1}),[w,N]=m.useState(null),[C,S]=m.useState({}),[E,_]=m.useState({});m.useEffect(()=>{const X=new URLSearchParams(window.location.search).get("planRange"),I=X?OT.find(B=>B.range===X):void 0;X&&I&&f({estimatedPoints:null,selectedPlanRange:X,selectedPlatformPlanId:I.id})},[]);const k=()=>!h.selectedPlanRange||!h.selectedPlatformPlanId?(N("Selecione um plano para continuar"),!1):(N(null),!0),T=()=>{const $={};return v.fantasyName.trim()||($.fantasyName="Nome fantasia  obrigatrio"),v.cnpj.trim()?HT(v.cnpj)||($.cnpj="CNPJ deve ter 14 dgitos"):$.cnpj="CNPJ  obrigatrio",v.phone&&!Ub(v.phone)&&($.phone="Telefone deve ter 10 ou 11 dgitos (com DDD)"),S($),Object.keys($).length===0},M=()=>{const $={};if(g.name.trim()||($.name="Nome completo  obrigatrio"),g.email.trim()?UT(g.email)||($.email=Vw(g.email)??"E-mail invlido"):$.email="E-mail  obrigatrio",g.phone.trim()?Ub(g.phone)||($.phone="Telefone deve ter 10 ou 11 dgitos (com DDD)"):$.phone="Telefone  obrigatrio",!g.password)$.password="Senha  obrigatria";else{const X=Uw(g.password);if(!X.isValid){const I=[];X.minLength||I.push("8 caracteres"),X.hasUpperCase||I.push("1 letra maiscula"),X.hasNumber||I.push("1 nmero"),X.hasSpecialChar||I.push("1 caractere especial"),$.password=`A senha deve conter: ${I.join(", ")}`}}return g.password!==g.confirmPassword&&($.confirmPassword="As senhas no coincidem"),g.acceptedTerms||($.acceptedTerms="Voc deve aceitar os termos para continuar"),_($),Object.keys($).length===0},F=()=>{k()&&n(2)},O=()=>{T()&&n(3)},Z=async()=>{if(M()){u(!0);try{if(!h.selectedPlatformPlanId){n(1),N("Selecione um plano para continuar");return}const $=v.estimatedUsers?.trim()?Number(Dr(v.estimatedUsers)):void 0,X={planId:h.selectedPlatformPlanId,companyName:v.fantasyName,cnpj:v.cnpj?Dr(v.cnpj):void 0,companyPhone:v.phone?Dr(v.phone):void 0,site:v.website||void 0,addressCity:v.city||void 0,addressState:v.state||void 0,addressCountry:v.country||void 0,estimatedUsers:typeof $=="number"&&!Number.isNaN($)?$:void 0,adminName:g.name,adminEmail:p0(g.email),adminPhone:g.phone?Dr(g.phone):void 0,adminPassword:g.password,adminPasswordConfirmation:g.confirmPassword,acceptTerms:!!g.acceptedTerms};await Tn.post("/signup",X),o(!0)}catch($){const X=$?.response?.data?.message,I=Array.isArray(X)?X.join(`
`):typeof X=="string"?X:"Erro ao criar conta. Verifique os dados e tente novamente.";_({api:I})}finally{u(!1)}}},q=["Plano","Empresa","Acesso"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:$l,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 py-6 sm:py-12",children:r?e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-12",children:e.jsx(ZT,{companyName:v.fantasyName,userEmail:g.email})}):e.jsxs(e.Fragment,{children:[e.jsx(RT,{currentStep:s,steps:q}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-4 sm:p-10 mt-5 sm:mt-8",children:[s===1&&e.jsx(BT,{data:h,onChange:f,onNext:F,error:w}),s===2&&e.jsx(WT,{data:v,onChange:x,onNext:O,onBack:()=>n(1),errors:C}),s===3&&e.jsx(GT,{data:g,onChange:j,onSubmit:Z,onBack:()=>n(2),errors:E,isLoading:c})]})]})})]})}function QT({onSubmit:t,isLoading:s,error:n,errorAction:r}){const o=is(),[c,u]=m.useState(!1),[h,f]=m.useState(""),[v,x]=m.useState(""),[g,j]=m.useState(!1),[w,N]=m.useState({}),{openWaitlist:C}=qo(),S=()=>{const k={};return h.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)||(k.email="E-mail invlido"):k.email="E-mail  obrigatrio",v||(k.password="Senha  obrigatria"),N(k),Object.keys(k).length===0},E=async k=>{k.preventDefault(),S()&&await t({email:h,password:v,rememberMe:g})},_=()=>{o("/forgot-password")};return e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-gray-900 mb-2",children:"Bem-vindo de volta"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Entre com suas credenciais para acessar o sistema"})]}),n&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:[e.jsx("p",{className:"text-sm text-red-700",children:n}),r?e.jsx("div",{className:"mt-3",children:r}):null]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["E-mail corporativo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(zo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:h,onChange:k=>f(k.target.value),placeholder:"seu.email@empresa.com.br",className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${w.email?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,disabled:s})]}),w.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:w.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(xp,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:c?"text":"password",value:v,onChange:k=>x(k.target.value),placeholder:"",className:`w-full pl-12 pr-12 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${w.password?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,disabled:s}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",disabled:s,children:c?e.jsx(Cg,{className:"w-5 h-5"}):e.jsx(li,{className:"w-5 h-5"})})]}),w.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:w.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:k=>j(k.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600",disabled:s}),e.jsx("span",{className:"text-sm text-gray-700",children:"Lembrar de mim neste dispositivo"})]}),e.jsx("button",{type:"button",onClick:_,className:"text-sm text-blue-600 hover:text-blue-700 hover:underline font-medium",disabled:s,children:"Esqueci minha senha"})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 font-medium",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):"Entrar"}),e.jsxs("p",{className:"text-center text-sm text-gray-600 pt-2",children:["Ainda no tem conta?"," ",e.jsx("button",{type:"button",onClick:()=>{C("privacidade:cta:comecar-teste-gratis")},className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Comear teste grtis"})]})]})}function XT({email:t,onSubmit:s,onBack:n,isLoading:r,error:o}){const[c,u]=m.useState(["","","","","",""]),h=m.useRef([]);m.useEffect(()=>{h.current[0]?.focus()},[]);const f=(w,N)=>{if(!/^\d*$/.test(N))return;const C=[...c];C[w]=N.slice(-1),u(C),N&&w<5&&h.current[w+1]?.focus()},v=(w,N)=>{N.key==="Backspace"&&!c[w]&&w>0&&h.current[w-1]?.focus()},x=w=>{w.preventDefault();const N=w.clipboardData.getData("text").replace(/\D/g,"");if(N.length===6){const C=N.split("");u(C),h.current[5]?.focus()}},g=async w=>{w.preventDefault();const N=c.join("");N.length===6&&await s({email:t,code:N})},j=c.every(w=>w!=="");return e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[e.jsx("div",{className:"mb-4 md:mb-6 flex justify-center",children:e.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-[#4F46E5]/10 rounded-full flex items-center justify-center",children:e.jsx(Su,{className:"w-7 h-7 md:w-8 md:h-8 text-[#4F46E5]"})})}),e.jsx("h2",{className:"text-gray-900 mb-2",children:"Confirme sua identidade"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base px-2",children:"Digite o cdigo de 6 dgitos enviado para seu mtodo de autenticao configurado"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 break-all px-2",children:t})]}),o&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:o})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-3 text-center",children:"Cdigo de verificao"}),e.jsx("div",{className:"flex gap-1.5 sm:gap-2 justify-center",onPaste:x,children:c.map((w,N)=>e.jsx("input",{ref:C=>{h.current[N]=C},type:"text",inputMode:"numeric",maxLength:1,value:w,onChange:C=>f(N,C.target.value),onKeyDown:C=>v(N,C),className:"w-10 h-12 sm:w-12 sm:h-14 text-center text-lg sm:text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4F46E5] focus:border-[#4F46E5] transition-all",disabled:r},N))}),e.jsxs("p",{className:"text-xs text-gray-500 text-center mt-3 px-2",children:[" Dica para teste: use o cdigo ",e.jsx("span",{className:"font-mono font-semibold",children:"123456"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"submit",disabled:r||!j,className:"w-full bg-[#4F46E5] text-white px-6 md:px-8 py-3 rounded-lg hover:bg-[#4338CA] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Verificando..."]}):"Confirmar cdigo"}),e.jsxs("button",{type:"button",onClick:n,disabled:r,className:"w-full px-6 md:px-8 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx(rn,{className:"w-5 h-5"}),"Voltar"]})]})]})}const YT={};function JT(){const t=is(),{login:s,verifyTwoFactor:n,requiresTwoFactor:r,pendingEmail:o}=Vo(),[c,u]=m.useState(!1),[h,f]=m.useState(null),[v,x]=m.useState(""),[g,j]=m.useState(!1),[w,N]=m.useState(!1),[C,S]=m.useState(null),[E,_]=m.useState(0);m.useEffect(()=>{ii()},[]),m.useEffect(()=>{if(h!=="ACCOUNT_BLOCKED")return;const $="__one_media_cache_rescue_login__";sessionStorage.getItem($)!=="1"&&(sessionStorage.setItem($,"1"),(async()=>{try{if(ii(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),"serviceWorker"in navigator){const X=await navigator.serviceWorker.getRegistrations();await Promise.all(X.map(I=>I.unregister()))}if("caches"in window){const X=await caches.keys();await Promise.all(X.map(I=>caches.delete(I)))}}catch{}finally{window.location.replace("/login")}})())},[h]);const k=m.useMemo(()=>v||o||"",[v,o]);m.useEffect(()=>{if(E<=0)return;const $=window.setInterval(()=>{_(X=>Math.max(0,X-1))},1e3);return()=>window.clearInterval($)},[E]);const T=async()=>{if(k)try{S(null),N(!0);const $=await Tn.post("/auth/resend-verification",{email:k}),X=typeof $.data?.message=="string"&&$.data.message.trim()?$.data.message:"Se a conta existir e o e-mail ainda no estiver verificado, enviamos uma nova confirmao.";S(X);const I=typeof $.data?.retryAfterSeconds=="number"?$.data.retryAfterSeconds:60;_(Math.max(1,Math.min(600,I)))}catch($){const X=qc($,"No foi possvel reenviar o e-mail. Tente novamente.");S(X.message),X.retryAfterSeconds&&_(Math.max(1,Math.min(600,X.retryAfterSeconds)))}finally{N(!1)}},M=async $=>{try{f(null),S(null),x($.email),j(!1),u(!0),await s($)}catch(X){const I=qc(X,"Erro ao fazer login");f(I.message),j(I.code==="EMAIL_NOT_VERIFIED")}finally{u(!1)}},F=async $=>{try{f(null),S(null),j(!1),u(!0),await n($)}catch(X){const I=qc(X,"Erro ao verificar cdigo");f(I.message),j(I.code==="EMAIL_NOT_VERIFIED")}finally{u(!1)}},O=()=>{f(null)},Z=$=>{const X=Tn.defaults.baseURL||"/api",I=X==="__MISSING_API_BASE_URL__"?"/api":X,te=`${(YT?.VITE_APP_URL||window.location.origin).replace(/\/$/,"")}/oauth-callback`;return`${I.replace(/\/$/,"")}/auth/${$}?redirect_uri=${encodeURIComponent(te)}`},q=$=>{const X=Z($);window.location.href=X};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:[r&&o?e.jsx(XT,{email:o,onSubmit:F,onBack:O,isLoading:c,error:h}):e.jsx(QT,{onSubmit:M,isLoading:c,error:h,errorAction:g&&k?e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{type:"button",onClick:T,disabled:w||E>0,className:"inline-flex w-full items-center justify-center rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-blue-700 ring-1 ring-inset ring-blue-200 hover:bg-blue-50 disabled:opacity-60 disabled:cursor-not-allowed",children:w?"Enviando...":E>0?`Reenviar em ${E}s`:"Reenviar e-mail de confirmao"}),e.jsx("p",{className:"text-xs text-red-700/80",children:"Confirme o e-mail para liberar o acesso. Verifique tambm a caixa de spam."}),C?e.jsx("p",{className:"text-xs text-gray-600",children:C}):null]}):null}),!r&&e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[e.jsx("span",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{children:"ou"}),e.jsx("span",{className:"flex-1 h-px bg-gray-200"})]}),e.jsxs("button",{type:"button",onClick:()=>q("google"),className:"w-full rounded-xl px-4 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 transition-colors flex items-center justify-center gap-3 shadow-sm",children:[e.jsxs("svg",{"aria-hidden":!0,viewBox:"0 0 24 24",className:"h-5 w-5 shrink-0",role:"img",children:[e.jsx("path",{fill:"#EA4335",d:"M23.5 12.3c0-.8-.1-1.6-.3-2.3H12v4.4h6.5c-.3 1.4-1 2.6-2.1 3.4v2.8h3.3c1.9-1.7 3-4.2 3-7.3z"}),e.jsx("path",{fill:"#34A853",d:"M12 24c2.7 0 5-.9 6.6-2.5l-3.3-2.8c-.9.6-2 1-3.3 1-2.6 0-4.7-1.7-5.5-4H3.1v2.5C4.6 21.8 7.5 24 12 24z"}),e.jsx("path",{fill:"#FBBC05",d:"M6.5 14.7c-.2-.6-.3-1.3-.3-2s.1-1.4.3-2V8.2H3.1C2.4 9.5 2 11 2 12.7s.4 3.2 1.1 4.5l3.4-2.5z"}),e.jsx("path",{fill:"#4285F4",d:"M12 7.5c1.5 0 2.8.5 3.8 1.5l2.9-2.9C17 3.8 14.7 2.7 12 2.7 8.5 2.7 5.6 4.9 4.2 8.2l3.4 2.5c.8-2.3 2.9-3.9 5.4-3.9z"})]}),"Entrar com Google"]}),e.jsxs("button",{type:"button",onClick:()=>q("outlook"),className:"w-full rounded-xl px-4 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 transition-colors flex items-center justify-center gap-3 shadow-sm",children:[e.jsxs("svg",{"aria-hidden":!0,viewBox:"0 0 48 48",className:"h-5 w-5 shrink-0",role:"img",children:[e.jsx("rect",{x:"6",y:"6",width:"36",height:"36",rx:"4",fill:"#0078D4"}),e.jsx("path",{fill:"#ffffff",d:"M13 14h10c4.4 0 7 2.4 7 6.5 0 4.4-2.9 7-7.5 7H16v6.5H13V14zm3 11h6.3c2.8 0 4.4-1.4 4.4-4s-1.5-4-4.3-4H16v8z"})]}),"Entrar com Outlook"]})]})]}),e.jsx("div",{className:"mt-8 text-center px-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Problemas para acessar?"," ",e.jsx("button",{onClick:()=>t("/contato"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Entre em contato com o suporte"})]})})]})]})}function eD(t){const s=t?.response?.data?.message;return typeof s=="string"&&s.trim()?s:"No foi possvel confirmar seu e-mail. Tente novamente."}function tD(){const t=is(),s=m.useMemo(()=>new URLSearchParams(window.location.search).get("token"),[]),[n,r]=m.useState("loading"),[o,c]=m.useState("Confirmando seu e-mail...");return m.useEffect(()=>{let u=!1;return(async()=>{if(!s){r("error"),c("Token de verificao no encontrado. Verifique se voc abriu o link completo do e-mail.");return}r("loading"),c("Confirmando seu e-mail...");try{if(await Tn.post("/auth/verify-email",{token:s}),u)return;r("success"),c("E-mail confirmado com sucesso! Agora voc j pode fazer login.")}catch(f){if(u)return;r("error"),c(eD(f))}})(),()=>{u=!0}},[s]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:$l,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:e.jsxs("div",{className:"text-center",children:[n==="loading"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-blue-50 flex items-center justify-center",children:e.jsx("div",{className:"h-7 w-7 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),n==="success"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-green-50 flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n==="error"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-red-50 flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n==="loading"&&"Confirmando e-mail",n==="success"&&"Tudo certo!",n==="error"&&"No foi possvel confirmar"]}),e.jsx("p",{className:"mt-3 text-gray-600",children:o}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>t("/login"),className:"w-full sm:w-auto px-6 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors",children:"Ir para Login"}),e.jsx("button",{onClick:()=>t("/"),className:"w-full sm:w-auto px-6 py-3 rounded-xl border border-gray-200 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Voltar ao site"})]}),n==="error"&&e.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"Se o link expirou, voc pode solicitar um novo e-mail de confirmao na tela de login."})]})})})]})}function sD(){const t=is(),[s,n]=m.useState(""),[r,o]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState(0);m.useEffect(()=>{if(h<=0)return;const x=window.setInterval(()=>{f(g=>Math.max(0,g-1))},1e3);return()=>window.clearInterval(x)},[h]);const v=async x=>{if(x.preventDefault(),!(r||h>0))try{o(!0),u(null);const g=await Tn.post("/auth/forgot-password",{email:s}),j=typeof g.data?.message=="string"&&g.data.message.trim()?g.data.message:"Se existir uma conta para este e-mail, enviaremos um link de redefinio.";u(j),ye.success(j);const w=typeof g.data?.retryAfterSeconds=="number"?g.data.retryAfterSeconds:0;w>0&&f(Math.max(1,Math.min(600,w)))}catch(g){const j=qc(g,"No foi possvel enviar o e-mail. Tente novamente.");u(j.message),ye.error(j.message),j.retryAfterSeconds&&f(Math.max(1,Math.min(600,j.retryAfterSeconds)))}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/login"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Esqueceu sua senha?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Informe seu e-mail. Se existir uma conta, enviaremos um link para redefinir sua senha."}),e.jsxs("form",{onSubmit:v,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"E-mail"}),e.jsx("input",{type:"email",value:s,onChange:x=>n(x.target.value),placeholder:"seuemail@exemplo.com",className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-gray-900 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100",required:!0})]}),e.jsx("button",{type:"submit",disabled:r||h>0,className:"w-full rounded-xl bg-blue-600 px-4 py-3 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:r?"Enviando...":h>0?`Aguarde ${h}s`:"Enviar link de redefinio"})]}),c?e.jsx("p",{className:"mt-4 text-sm text-gray-700",children:c}):null,e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t("/login"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium text-sm",children:"Voltar para o login"})})]})})]})}function nD(){const t=is(),s=m.useMemo(()=>{try{return new URLSearchParams(window.location.search).get("token")??""}catch{return""}},[]),[n,r]=m.useState(""),[o,c]=m.useState(""),[u,h]=m.useState(!1),f=async v=>{if(v.preventDefault(),!u){if(!s){ye.error("Token invlido. Abra o link do e-mail novamente.");return}if(n.length<8){ye.error("A senha deve ter no mnimo 8 caracteres.");return}if(n!==o){ye.error("As senhas no conferem.");return}try{h(!0);const g=(await Tn.post("/auth/reset-password",{token:s,newPassword:n})).data?.message?.trim()||"Senha atualizada. Voc j pode fazer login.";ye.success(g),t("/login")}catch(x){const g=qc(x,"No foi possvel redefinir a senha.");ye.error(g.message)}finally{h(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/login"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Redefinir senha"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Digite sua nova senha abaixo."}),s?null:e.jsx("div",{className:"mt-6 rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:"Token invlido. Abra o link do e-mail novamente."}),e.jsxs("form",{onSubmit:f,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nova senha"}),e.jsx("input",{type:"password",value:n,onChange:v=>r(v.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-gray-900 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100",minLength:8,required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Mnimo de 8 caracteres."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar nova senha"}),e.jsx("input",{type:"password",value:o,onChange:v=>c(v.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-gray-900 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100",minLength:8,required:!0})]}),e.jsx("button",{type:"submit",disabled:u||!s,className:"w-full rounded-xl bg-blue-600 px-4 py-3 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:u?"Salvando...":"Atualizar senha"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t("/login"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium text-sm",children:"Voltar para o login"})})]})})]})}function aD(){const{user:t,logout:s}=Vo(),n=is();if(!t)return n("/login"),null;const r=[{icon:Cw,name:"Dashboard",path:"/dashboard",disabled:!1},{icon:Hc,name:"Inventrio",path:"/inventario",disabled:!0},{icon:i0,name:"Clientes",path:"/clientes",disabled:!0},{icon:Js,name:"Propostas",path:"/propostas",disabled:!0},{icon:Aw,name:"Campanhas",path:"/campanhas",disabled:!0},{icon:wu,name:"Reservas",path:"/reservas",disabled:!0},{icon:Cu,name:"Financeiro",path:"/financeiro",disabled:!0},{icon:zo,name:"Mensagens",path:"/mensagens",disabled:!0},{icon:Pk,name:"Mdia Kit",path:"/midiakit",disabled:!0},{icon:t0,name:"Atividades",path:"/atividades",disabled:!0},{icon:vp,name:"Configuraes",path:"/configuracoes",disabled:!0}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(a4,{className:"w-4 h-4"}),"Sair"]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-gray-900 mb-2",children:["Bem-vindo, ",t.name.split(" ")[0],"!"]}),e.jsx("p",{className:"text-gray-600",children:"Voc est autenticado no sistema OOH Manager"}),t.twoFactorEnabled&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:[e.jsx("span",{children:""}),"2FA Ativado (",t.twoFactorType,")"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>e.jsx("button",{onClick:()=>!o.disabled&&n(o.path),disabled:o.disabled,className:`p-6 bg-white rounded-xl border-2 transition-all text-left ${o.disabled?"border-gray-200 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-[#4F46E5] hover:shadow-md cursor-pointer"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${o.disabled?"bg-gray-100":"bg-[#4F46E5]/10"}`,children:e.jsx(o.icon,{className:`w-6 h-6 ${o.disabled?"text-gray-400":"text-[#4F46E5]"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:o.name}),e.jsx("p",{className:"text-sm text-gray-500",children:o.disabled?"Em desenvolvimento":"Acessar mdulo"})]})]})},o.path))}),e.jsxs("div",{className:"mt-8 p-6 bg-blue-50 border border-blue-200 rounded-xl",children:[e.jsx("h3",{className:"text-blue-900 mb-2",children:" Login realizado com sucesso!"}),e.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"Esta  uma interface de demonstrao. Os mdulos do sistema esto sendo desenvolvidos e sero habilitados em breve."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-semibold mb-1",children:"Dados do usurio:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ID: ",t.id]}),e.jsxs("li",{children:[" Company ID: ",t.companyId]}),e.jsxs("li",{children:[" Status: ",t.status]}),e.jsxs("li",{children:[" Super Admin: ",t.isSuperAdmin?"Sim":"No"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-semibold mb-1",children:"Credenciais de teste:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1",children:[e.jsx("li",{children:" Com 2FA: carlos.mendes@outdoorbrasil.com.br"}),e.jsx("li",{children:" Sem 2FA: ana.silva@outdoorbrasil.com.br"}),e.jsx("li",{children:" Senha: senha123"}),e.jsx("li",{children:" Cdigo 2FA: 123456"})]})]})]})]})]})]})}function rD(){const t=is();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3",children:e.jsx("img",{src:$l,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16 lg:py-24",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-gray-900 mb-3 sm:mb-5",children:"Fale com nosso time comercial"}),e.jsx("p",{className:"text-base sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Interessado no plano Enterprise ou tem dvidas? Entre em contato conosco."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com",className:"bg-white rounded-2xl p-5 sm:p-8 border-2 border-gray-200 hover:border-blue-600 transition-all hover:shadow-xl group",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-4 sm:mb-5 group-hover:bg-gradient-to-br group-hover:from-blue-600 group-hover:to-blue-700 transition-all shadow-lg shadow-transparent group-hover:shadow-blue-500/30",children:e.jsx(zo,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 group-hover:text-white transition-colors"})}),e.jsx("h3",{className:"text-base sm:text-xl font-semibold text-gray-900 mb-2",children:"E-mail"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:"Envie um e-mail para nossa equipe comercial"}),e.jsx("p",{className:"text-blue-600 font-medium text-sm sm:text-base group-hover:text-blue-700",children:"thifi.contato.oficial@gmail.com"})]}),e.jsxs("a",{href:"https://wa.me/5561982541672",target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-2xl p-5 sm:p-8 border-2 border-gray-200 hover:border-blue-600 transition-all hover:shadow-xl group",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-4 sm:mb-5 group-hover:bg-gradient-to-br group-hover:from-blue-600 group-hover:to-blue-700 transition-all shadow-lg shadow-transparent group-hover:shadow-blue-500/30",children:e.jsx(Il,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 group-hover:text-white transition-colors"})}),e.jsx("h3",{className:"text-base sm:text-xl font-semibold text-gray-900 mb-2",children:"WhatsApp"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:"Fale diretamente com nosso time"}),e.jsx("p",{className:"text-blue-600 font-medium text-sm sm:text-base group-hover:text-blue-700",children:"(61) 98254-1672"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>t("/"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors font-medium",children:[e.jsx(rn,{className:"w-4 h-4"}),"Voltar para o site"]})})]})]})}function iD(){const t=is(),{openWaitlist:s}=qo();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 sm:h-20 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:e.jsx("img",{src:$l,alt:"OneMedia",className:"h-7 sm:h-10 transition-transform group-hover:scale-105"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#4F46E5] transition-colors px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg hover:bg-gray-50",children:[e.jsx(rn,{className:"w-4 h-4"}),"Voltar ao site"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 sm:w-20 sm:h-20 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-3xl shadow-xl mb-5",children:e.jsx(Px,{className:"w-7 h-7 sm:w-10 sm:h-10 text-white"})}),e.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Termos de Uso"}),e.jsx("p",{className:"text-base sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Conhea as regras e diretrizes para o uso da plataforma OneMedia."})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Px,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"1. Aceitao dos Termos"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"Ao acessar e usar o OneMedia, voc concorda em cumprir e estar vinculado a estes Termos de Uso. Se voc no concordar com qualquer parte destes termos, no dever usar nossa plataforma."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Su,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"2. Descrio do Servio"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"O OneMedia  uma plataforma SaaS completa para gesto de mdia OOH/DOOH, incluindo mdulos de inventrio, propostas comerciais, campanhas, gesto financeira, mdia kit e muito mais. Oferecemos ferramentas especializadas para agncias, veculos e proprietrios de mdia exterior."})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(s0,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold mb-2 sm:mb-3",children:"3. Perodo de Teste Gratuito"}),e.jsx("p",{className:"text-sm sm:text-base leading-relaxed opacity-95 mb-3",children:"Oferecemos um perodo de teste gratuito de 30 dias com acesso completo  plataforma. Durante este perodo:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Acesso completo a todos os recursos"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Sem necessidade de carto de crdito"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Cancelamento a qualquer momento"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(vu,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"4. Uso Aceitvel"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed mb-3",children:"Voc concorda em usar o servio apenas para fins legais e de acordo com todas as leis aplicveis.  estritamente proibido:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Utilizar a plataforma para atividades ilegais ou fraudulentas"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Tentar acessar reas restritas ou dados de outros usurios"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Fazer engenharia reversa ou copiar funcionalidades da plataforma"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Sobrecarregar nossos servidores com uso abusivo"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(fk,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"5. Propriedade Intelectual"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"Todo o contedo, recursos, funcionalidades e design do OneMedia so de propriedade exclusiva da empresa e protegidos por direitos autorais, marcas registradas e outras leis de propriedade intelectual. Os dados inseridos por voc permanecem de sua propriedade."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(M4,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"6. Limitao de Responsabilidade"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed mb-3",children:'O OneMedia  fornecido "como est". No garantimos que o servio ser ininterrupto ou livre de erros. Em nenhuma circunstncia seremos responsveis por:'}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Perda de dados ou lucros cessantes"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Danos indiretos ou consequenciais"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Uso indevido da plataforma por terceiros"})]})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Px,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold mb-2 sm:mb-3",children:"7. Modificaes dos Termos"}),e.jsx("p",{className:"text-sm sm:text-base leading-relaxed opacity-95",children:"Reservamo-nos o direito de modificar estes termos a qualquer momento. Alteraes significativas sero notificadas por email ou atravs da plataforma. O uso continuado aps as modificaes constitui aceitao dos novos termos."})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ltima atualizao: ",e.jsx("span",{className:"font-medium text-gray-900",children:new Date().toLocaleDateString("pt-BR")})]})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>{s("termos:cta:comecar-teste-gratis")},className:"inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white px-8 py-4 rounded-full hover:shadow-xl hover:scale-105 transition-all text-lg font-medium",children:["Comear teste grtis",e.jsx(rn,{className:"w-5 h-5 rotate-180"})]})})]})]})}function oD(){const t=is(),{openWaitlist:s}=qo();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 sm:h-20 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:e.jsx("img",{src:$l,alt:"OneMedia",className:"h-7 sm:h-10 transition-transform group-hover:scale-105"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#4F46E5] transition-colors px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg hover:bg-gray-50",children:[e.jsx(rn,{className:"w-4 h-4"}),"Voltar ao site"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl shadow-xl mb-5",children:e.jsx(Su,{className:"w-7 h-7 sm:w-10 sm:h-10 text-white"})}),e.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Poltica de Privacidade"}),e.jsx("p",{className:"text-base sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Sua privacidade  fundamental para ns. Conhea como protegemos e gerenciamos seus dados."})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(li,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"1. Informaes que Coletamos"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3",children:"Coletamos informaes que voc nos fornece diretamente, incluindo:"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Nome completo e informaes de contato"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Dados da empresa (CNPJ, razo social, etc.)"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Informaes de inventrio de mdia"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Dados de campanhas e propostas"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Js,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"2. Como Usamos suas Informaes"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3",children:"Usamos as informaes coletadas para:"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Fornecer, manter e melhorar nossos servios"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Processar transaes e enviar notificaes"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Responder a comentrios e perguntas"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Enviar informaes tcnicas e atualizaes"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(i0,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"3. Compartilhamento de Informaes"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"No vendemos, trocamos ou transferimos suas informaes pessoais para terceiros sem seu consentimento, exceto quando necessrio para fornecer o servio ou quando exigido por lei."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(xp,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"4. Segurana dos Dados"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"Implementamos medidas de segurana apropriadas para proteger suas informaes contra acesso no autorizado, alterao, divulgao ou destruio."})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Su,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold mb-2 sm:mb-3",children:"5. LGPD - Lei Geral de Proteo de Dados"}),e.jsx("p",{className:"text-sm sm:text-base leading-relaxed opacity-95",children:"Estamos em conformidade com a LGPD (Lei 13.709/2018). Voc tem direito de acessar, corrigir, excluir ou solicitar a portabilidade de seus dados pessoais a qualquer momento."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(zo,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"6. Contato"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed mb-3",children:"Para questes sobre privacidade ou proteo de dados, entre em contato:"}),e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com",className:"inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-700 font-medium transition-colors text-sm sm:text-base",children:[e.jsx(zo,{className:"w-4 h-4"}),"thifi.contato.oficial@gmail.com"]})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ltima atualizao: ",e.jsx("span",{className:"font-medium text-gray-900",children:new Date().toLocaleDateString("pt-BR")})]})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>{s("privacidade:cta:comecar-teste-gratis")},className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full hover:shadow-xl hover:scale-105 transition-all text-lg font-medium",children:["Comear teste grtis",e.jsx(rn,{className:"w-5 h-5 rotate-180"})]})})]})]})}function lD(){const t=is(),{openWaitlist:s}=qo();return e.jsx("div",{className:"mobile-landing-topbar fixed top-0 left-0 right-0 z-50 bg-white/95 dark:bg-gray-950/95 backdrop-blur border-b border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-2 flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-8 w-auto"}),e.jsx("span",{className:"hidden sm:inline text-xs text-gray-600 dark:text-gray-300 whitespace-nowrap",children:"Suite OOH/DOOH"})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:()=>t("/login"),className:"text-xs sm:text-sm text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400 whitespace-nowrap",children:"Entrar"}),e.jsxs("button",{onClick:()=>s("mobile-topbar:teste-gratis"),className:"inline-flex items-center gap-1 rounded-full bg-blue-600 px-3 py-2 text-[11px] font-semibold text-white shadow-sm hover:bg-blue-700 whitespace-nowrap",children:["Teste grtis",e.jsx(Na,{className:"h-4 w-4"})]}),e.jsx("button",{"aria-label":"Menu",className:"p-2 text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400 lg:hidden",children:e.jsx(n0,{className:"h-5 w-5"})})]})]})})}const cD=[{label:"Inventrio e faces",value:"Organize tudo em minutos"},{label:"Propostas e reservas",value:"Envie e feche rpido"},{label:"Financeiro automtico",value:"Cobrana e alertas"}],dD=["Clear Channel","JCDecaux","Kallas","MediaOut","OutdoorBR"];function uD(){is();const{openWaitlist:t}=qo();return e.jsx("section",{className:"pb-16 md:pb-20 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-950",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 dark:bg-blue-950/40 px-3 py-1 text-xs font-semibold text-blue-700 dark:text-blue-300",children:[e.jsx(El,{className:"h-4 w-4"}),"Nova experincia mobile"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-gray-900 dark:text-gray-100 leading-snug",children:"Tudo que seu time precisa para vender mdia OOH/DOOH sem planilhas."}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-300",children:"Capture leads, organize inventrio, envie propostas e cobre automaticamente com a mesma plataforma que voc j usa no desktop."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>t("mobile-landing:hero:trial-30-days"),className:"inline-flex items-center justify-center gap-2 rounded-full bg-blue-600 px-5 py-3 text-white font-semibold shadow-md hover:bg-blue-700",children:["Testar grtis 30 dias",e.jsx(Na,{className:"h-5 w-5"})]}),e.jsxs("button",{onClick:()=>t("mobile-landing:hero:talk-to-sales"),className:"inline-flex items-center justify-center gap-2 rounded-full border border-gray-300 dark:border-gray-700 px-5 py-3 text-sm font-semibold text-gray-900 dark:text-gray-100 hover:border-blue-200 dark:hover:border-blue-700",children:["Falar com vendas",e.jsx(_4,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 shadow-sm p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Ba,alt:"OneMedia",className:"h-8"}),e.jsx(kw,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"SLA e suporte humano"})]}),e.jsx("div",{className:"rounded-xl border border-gray-100 dark:border-gray-800 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 p-3",children:e.jsx("img",{src:yp,alt:"Dashboard",className:"w-full rounded-lg shadow"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:cD.map(s=>e.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-gray-50 dark:bg-gray-800 px-3 py-2",children:[e.jsx(wa,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.label}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 font-semibold",children:s.value})]})]},s.label))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Confiado por equipes de mdia"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[dD.map(s=>e.jsx("span",{className:"rounded-full border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-xs font-semibold text-gray-700 dark:text-gray-200 shadow-sm",children:s},s)),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-xs font-semibold text-gray-700 dark:text-gray-200 shadow-sm",children:[e.jsx("img",{src:o0,alt:"OutdoorBR",className:"h-4"}),"OutdoorBR"]})]})]})]})})}const Tx=[{key:"inventario",title:"Inventrio e pontos",description:"Cadastro geolocalizado de pontos, faces e donos com fotos e status em tempo real.",bullets:["Geolocalizao automtica","Faces com checklist de qualidade","Versionamento e histrico"],stat:"70% tempo operacional",image:l0,icon:ia,accent:"from-blue-500/10 to-blue-600/5"},{key:"propostas",title:"Propostas e reservas",description:"Monte propostas com disponibilidade real, templates e assinatura digital.",bullets:["Templates com fotos reais","Disponibilidade em tempo real","Envio com tracking"],stat:"+85% converso",image:c0,icon:Js,accent:"from-purple-500/10 to-purple-600/5"},{key:"campanhas",title:"Campanhas e ativaes",description:"Planeje veiculaes, controle ocupao e acompanhe SLA por cliente.",bullets:["Calendrio visual","Alertas de sobreposio","Paineis por cliente"],stat:"100% visibilidade de veiculao",image:d0,icon:gu,accent:"from-amber-500/10 to-orange-500/5"},{key:"financeiro",title:"Financeiro automatizado",description:"Cobrana ligada s campanhas, boletos e alertas de inadimplncia.",bullets:["Baixas automticas","Emisso recorrente","Relatrios de margem"],stat:"78% inadimplncia",image:u0,icon:Fu,accent:"from-emerald-500/10 to-emerald-600/5"},{key:"insights",title:"Dashboard e mdia kit",description:"Inteligncia em tempo real e mdia kit digital com mapa interativo.",bullets:["KPIs em tempo real","Mapa com filtros","Compartilhamento seguro"],stat:"+92% engajamento",image:yp,icon:El,accent:"from-indigo-500/10 to-indigo-600/5"}];function mD(){const[t,s]=m.useState(Tx[0].key),[n,r]=m.useState(0),o=m.useMemo(()=>Tx.map(x=>({...x})),[]),c=o.find(x=>x.key===t)??o[0],u=c.icon,h=x=>{s(x);const g=o.findIndex(j=>j.key===x);g>=0&&r(g)},f=()=>{r(x=>{const g=(x+1)%o.length;return s(o[g].key),g})},v=()=>{r(x=>{const g=(x-1+o.length)%o.length;return s(o[g].key),g})};return m.useEffect(()=>{const x=window.setInterval(()=>{f()},3e3);return()=>window.clearInterval(x)},[o.length]),e.jsx("section",{id:"mobile-modulos",className:"py-16 md:py-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300",children:"Fluxos na palma da mo"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Escolha o mdulo e veja o fluxo mobile"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Navegao simples, cartes claros e os mesmos dados do desktop, sem abrir mo da velocidade."})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:Tx.map(x=>e.jsxs("button",{onClick:()=>h(x.key),className:`flex items-center gap-2 whitespace-nowrap rounded-full border px-3 py-2 text-sm font-semibold shadow-sm transition-colors ${x.key===t?"border-blue-600 bg-blue-50 dark:bg-blue-950/50 text-blue-700 dark:text-blue-300":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200 hover:border-blue-200 dark:hover:border-blue-700"}`,children:[e.jsx(x.icon,{className:"h-4 w-4"}),x.title]},x.key))}),e.jsxs("div",{className:`relative rounded-2xl border border-gray-100 dark:border-gray-800 bg-gradient-to-br ${c.accent} dark:from-gray-900 dark:to-gray-950 p-4 shadow-sm space-y-4`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white dark:bg-gray-900 text-blue-600 dark:text-blue-300 shadow",children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:c.description})]})]}),e.jsxs("div",{className:"rounded-xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 p-3 shadow-sm relative overflow-hidden",children:[e.jsx("img",{src:c.image,alt:c.title,className:"w-full rounded-lg transition-opacity duration-300"},c.key),e.jsx("div",{className:"absolute inset-y-0 left-2 flex items-center",children:e.jsx("button",{"aria-label":"Anterior",onClick:v,className:"rounded-full bg-white/80 dark:bg-gray-900/90 border border-gray-200 dark:border-gray-700 p-2 shadow hover:bg-white dark:hover:bg-gray-900",children:e.jsx(rd,{className:"h-5 w-5 text-gray-700 dark:text-gray-200"})})}),e.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center",children:e.jsx("button",{"aria-label":"Prximo",onClick:f,className:"rounded-full bg-white/80 dark:bg-gray-900/90 border border-gray-200 dark:border-gray-700 p-2 shadow hover:bg-white dark:hover:bg-gray-900",children:e.jsx(Hl,{className:"h-5 w-5 text-gray-700 dark:text-gray-200"})})})]}),e.jsx("div",{className:"space-y-2",children:c.bullets.map(x=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-200",children:[e.jsx(wa,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:x})]},x))}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-white dark:bg-gray-900 px-4 py-3 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(Na,{className:"h-4 w-4 text-blue-600"}),"Resultado direto no app"]}),e.jsx("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-950/50 px-3 py-1 rounded-full",children:c.stat})]})]})]})})}const hD=[{title:"Seguro e confivel",description:"Controle de acesso por papel, logs de ao e backups automticos.",icon:kw},{title:"Onboarding assistido",description:"Migrao guiada de planilhas e treinamento para seu time em 7 dias.",icon:Il},{title:"Rpido para usar",description:"Interfaces claras no mobile e desktop, com os mesmos dados e permisses.",icon:uk}],pD=[{title:"Vendas",points:["Propostas com fotos reais","Follow-up com tracking","Aprovao digital"]},{title:"Operaes",points:["Checklists em campo","Disponibilidade em tempo real","Alertas de sobreposio"]},{title:"Financeiro",points:["Cobrana ligada  campanha","Recorrncia automtica","Dash de margem e impostos"]},{title:"Marketing",points:["Mdia kit interativo","Mapa com filtros","Links pblicos com token"]}];function fD(){return e.jsx("section",{className:"py-16 md:py-20 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300",children:"Sempre simples, nunca bsico"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Projetado para a rotina em campo"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Modo offline para checklists, notificaes rpidas e layouts claros no celular."})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-950 p-4 shadow-sm flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-semibold text-sm",children:[e.jsx(G4,{className:"h-4 w-4"}),"Mobile primeiro"]}),e.jsx("img",{src:m0,alt:"Mdia kit",className:"w-full rounded-xl"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Mapa, fotos, reservas e cobranas em telas otimizadas para toque."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-100 dark:border-gray-800 bg-gradient-to-br from-blue-500/10 to-blue-600/5 dark:from-gray-800 dark:to-gray-900 p-4 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300 font-semibold text-sm",children:[e.jsx(Vk,{className:"h-4 w-4"}),"Desktop sincronizado"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Nada de verses diferentes: a mesma base de dados em qualquer dispositivo."}),e.jsxs("div",{className:"rounded-xl bg-white dark:bg-gray-950 border border-gray-100 dark:border-gray-800 p-3 shadow-sm space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-800 dark:text-gray-100",children:[e.jsx(El,{className:"h-4 w-4 text-blue-600"}),"Automao pronta para uso"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Reservas liberam cobrana, campanhas alimentam dashboards e mdia kit atualiza sozinho."})]})]})]}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-3",children:hD.map(t=>e.jsxs("div",{className:"rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-950 p-4 shadow-sm space-y-2",children:[e.jsx(t.icon,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:t.description})]},t.title))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Funciona para qualquer time"}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:pD.map(t=>e.jsxs("div",{className:"rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-950 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx(Ui,{className:"h-4 w-4 text-green-600"}),t.title]}),e.jsx("ul",{className:"mt-2 space-y-1",children:t.points.map(s=>e.jsxs("li",{className:"text-xs text-gray-600 dark:text-gray-300",children:[" ",s]},s))})]},t.title))})]})]})})}function xD(){is();const{openWaitlist:t}=qo();return e.jsx("section",{className:"py-16 md:py-20",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 space-y-6",children:e.jsxs("div",{className:"rounded-3xl border border-blue-100 dark:border-blue-900/60 bg-gradient-to-br from-blue-50 to-white dark:from-gray-900 dark:to-gray-950 p-6 shadow-sm space-y-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300",children:"Pronto para usar"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Coloque seu inventrio, propostas e financeiro no celular da equipe em dias, no meses."}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Teste com dados reais, convide seu time e mantenha tudo sincronizado com o desktop. Sem carto e com suporte humano."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>t("mobile-landing:cta:trial-30-days"),className:"inline-flex items-center justify-center gap-2 rounded-full bg-blue-600 px-5 py-3 text-white font-semibold shadow-md hover:bg-blue-700",children:["Criar conta grtis",e.jsx(Na,{className:"h-5 w-5"})]}),e.jsxs("button",{onClick:()=>t("mobile-landing:cta:talk"),className:"inline-flex items-center justify-center gap-2 rounded-full border border-gray-300 dark:border-gray-700 px-5 py-3 text-sm font-semibold text-gray-900 dark:text-gray-100 hover:border-blue-200 dark:hover:border-blue-700",children:["Falar com especialista",e.jsx(Mk,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600 dark:text-gray-300",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white dark:bg-gray-900 px-3 py-1 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx(Il,{className:"h-4 w-4 text-blue-600"}),"Onboarding assistido"]}),e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white dark:bg-gray-900 px-3 py-1 border border-gray-200 dark:border-gray-700 shadow-sm",children:"Suporte em portugus"}),e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white dark:bg-gray-900 px-3 py-1 border border-gray-200 dark:border-gray-700 shadow-sm",children:"Cancelamento a qualquer momento"})]})]})})})}function gD(){const t=is(),s=[{title:"Solues",links:[{label:"Para veculos OOH/DOOH",href:"#"},{label:"Para redes digitais",href:"#"}]},{title:"Recursos",links:[{label:"API (em breve)",href:"#"},{label:"Integraes",href:"#"}]},{title:"Legal",links:[{label:"Poltica de Privacidade",href:"/privacidade",isRoute:!0},{label:"Termos de Uso",href:"/termos",isRoute:!0}]}];return e.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4F46E5] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900 dark:text-gray-100",children:"OneMedia"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Gesto de Mdia Exterior  Inventrio, propostas, campanhas e financeiro em uma s plataforma."})]}),s.map(n=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 dark:text-gray-100 mb-4",children:n.title}),e.jsx("ul",{className:"space-y-2",children:n.links.map(r=>e.jsx("li",{children:r.isRoute?e.jsx("button",{onClick:()=>t(r.href),className:"text-sm text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:r.label}):e.jsx("a",{href:r.href,className:"text-sm text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:r.label})},r.label))})]},n.title))]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 dark:border-gray-800 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[" ",new Date().getFullYear()," OneMedia. Todos os direitos reservados."]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:e.jsx(Sw,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://instagram.com/thifi.agency",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:e.jsx(ww,{className:"w-5 h-5"})}),e.jsx("a",{href:"mailto:thifi.contato.oficial@gmail.com",className:"text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:e.jsx(zo,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://wa.me/5561982541672",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:e.jsx(Il,{className:"w-5 h-5"})})]})]})]})})}function vD(){return e.jsxs("div",{className:"mobile-landing-page min-h-screen bg-white text-gray-900 dark:bg-gray-950 dark:text-gray-100 overflow-x-hidden",children:[e.jsx(lD,{}),e.jsxs("main",{className:"mobile-landing-main space-y-12 md:space-y-14",children:[e.jsx(uD,{}),e.jsx(mD,{}),e.jsx(fD,{}),e.jsx(xD,{})]}),e.jsx(gD,{})]})}function yD(){const t=is(),{openWaitlist:s}=qo(),[n,r]=m.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:$l,alt:"OneMedia",className:"h-12"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors",children:[e.jsx(rn,{className:"w-5 h-5"}),"Voltar para Home"]})]})}),e.jsx("div",{className:"pt-32 pb-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl font-medium text-gray-900 mb-6",children:["Escolha o plano ideal",e.jsx("br",{}),"para o seu negcio"]}),e.jsx("p",{className:"text-2xl font-extralight text-gray-700 max-w-3xl mx-auto",children:"Todas as funcionalidades essenciais para revolucionar sua gesto de mdia OOH/DOOH"})]}),e.jsx("div",{className:"mb-16",children:e.jsx(Lw,{})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 rounded-3xl p-12 text-center text-white",children:[e.jsx("h2",{className:"text-4xl font-semibold mb-4",children:"Experimente grtis por 30 dias"}),e.jsx("p",{className:"text-xl mb-8 opacity-95",children:"Teste todas as funcionalidades sem compromisso. No  necessrio carto de crdito."}),e.jsxs("button",{onClick:()=>{s("planos:cta:comecar-teste-gratis")},className:"flex items-center gap-3 px-12 py-5 bg-white text-blue-700 text-2xl rounded-full hover:shadow-2xl transition-all mx-auto font-semibold",children:["Comear teste grtis",e.jsx(Na,{className:"w-7 h-7"})]})]}),e.jsxs("div",{className:"mt-20",children:[e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 text-center mb-12",children:"Perguntas Frequentes"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Posso mudar de plano depois?"}),e.jsx("p",{className:"text-gray-700",children:"Sim! Voc pode fazer upgrade ou downgrade do seu plano a qualquer momento, sem burocracia."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Como funciona o perodo de teste?"}),e.jsx("p",{className:"text-gray-700",children:"Voc tem acesso completo a todas as funcionalidades por 30 dias. No pedimos carto de crdito."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Qual a forma de pagamento?"}),e.jsx("p",{className:"text-gray-700",children:"Aceitamos carto de crdito, boleto bancrio e transferncia bancria para planos anuais."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Tem desconto para pagamento anual?"}),e.jsx("p",{className:"text-gray-700",children:"Sim! Oferecemos 20% de desconto para pagamentos anuais antecipados."})]})]})]})]})}),e.jsx("footer",{className:"bg-white py-16 px-6 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("img",{src:$l,alt:"OneMedia",className:"h-10 mb-6"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/planos"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Preos"}),e.jsx("p",{onClick:()=>r(!0),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Entre em contato conosco"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Produtos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Inventrio"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Propostas"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Campanhas"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Financeiro"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Mdia Kit"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Dashboard"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Solues"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Agncias"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Veculos"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Proprietrios"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recursos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Blog"}),e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Documentao"}),e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Suporte"}),e.jsx("p",{onClick:()=>t("/contato"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Contato"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-gray-600",children:" 2026 OneMedia. Todos os direitos reservados."}),e.jsxs("div",{className:"flex gap-6 text-gray-600",children:[e.jsx("button",{type:"button",onClick:()=>t("/privacidade"),className:"hover:text-blue-600 transition-colors",children:"Privacidade"}),e.jsx("button",{type:"button",onClick:()=>t("/termos"),className:"hover:text-blue-600 transition-colors",children:"Termos"})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>r(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Entre em contato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha como prefere falar conosco:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("a",{href:"https://wa.me/5561982541672?text=Ol!%20Gostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%20Poderia%20me%20ajudar?",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resposta rpida"})]})]}),e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com?subject=Interesse%20na%20plataforma%20OneMedia&body=Ol!%0A%0AGostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%0A%0APoderia%20me%20enviar%20mais%20informaes?%0A%0AObrigado!",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"thifi.contato.oficial@gmail.com"})]})]})]}),e.jsx("button",{onClick:()=>r(!1),className:"w-full mt-6 px-6 py-3 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Fechar"})]})})]})}function bD(){const t=import.meta?.env?.DEV===!0,s=import.meta?.env?.VITE_API_URL,n=typeof s=="string"?s.trim().replace(/\/$/,""):"";return n||(t?"http://localhost:3333/api":"/api")}function jD(){const t=m.useMemo(()=>{const de=window.location.pathname.split("/").filter(Boolean),Ne=de.findIndex(Be=>Be==="p");return Ne>=0?de[Ne+1]:de[1]},[]),s=m.useMemo(()=>bD(),[]),n=m.useMemo(()=>new URLSearchParams(window.location.search).get("m"),[t]),r=m.useMemo(()=>new URLSearchParams(window.location.search).get("t"),[t]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),[x,g]=m.useState(""),[j,w]=m.useState(""),[N,C]=m.useState(""),[S,E]=m.useState(!1),[_,k]=m.useState(null),[T,M]=m.useState(null),[F,O]=m.useState(null),[Z,q]=m.useState(null),[$,X]=m.useState([]),[I,B]=m.useState(!1),[te,ue]=m.useState(null),[Y,ce]=m.useState(""),[U,ne]=m.useState(!1),[Q,z]=m.useState(null),[se,G]=m.useState(""),[ee,V]=m.useState(""),re=m.useRef(null),ae=m.useRef([]);ae.current=$;const me=m.useRef(!1),oe=!!r;m.useEffect(()=>{try{const de=localStorage.getItem(`portal_name_${t}`),Ne=localStorage.getItem(`portal_contact_${t}`);de&&G(de),Ne&&V(Ne)}catch{}},[t]),m.useEffect(()=>{(async()=>{try{if(h(!0),v(null),!t)throw new Error("Link invlido (hash ausente).");const Ne=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}`),Be=await Ne.json().catch(()=>null);if(!Ne.ok)throw new Error(Be?.message||"No foi possvel carregar a proposta");c(Be)}catch(Ne){v(Ne?.message||"Erro ao carregar proposta"),c(null)}finally{h(!1)}})()},[s,t]);const Pe=async de=>{try{if(!t||me.current)return;me.current=!0,de?.silent||(B(!0),ue(null));const Ne=re.current,Be=Ne?Ne.scrollHeight-Ne.scrollTop-Ne.clientHeight<60:!0,He=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/messages`),gt=await He.json().catch(()=>[]);if(!He.ok)throw new Error(gt&&(gt.message||gt.error)||"Erro ao carregar mensagens");const pe=Array.isArray(gt)?gt:[];X(pe),requestAnimationFrame(()=>{const $e=re.current;$e&&Be&&($e.scrollTop=$e.scrollHeight)})}catch(Ne){(!de?.silent||ae.current.length===0)&&ue(Ne?.message||"Erro ao carregar mensagens")}finally{me.current=!1,de?.silent||B(!1)}};m.useEffect(()=>{Pe({silent:!1})},[s,t]),m.useEffect(()=>{if(!t)return;const de=window.setInterval(()=>{typeof document<"u"&&document.visibilityState!=="visible"||Pe({silent:!0})},3e3);return()=>window.clearInterval(de)},[s,t]);const We=async()=>{try{if(E(!0),k(null),M(null),!r)throw new Error("Token ausente.");const de=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,signerName:x.trim(),signerEmail:j.trim(),comment:N.trim()})}),Ne=await de.json().catch(()=>null);if(!de.ok)throw new Error(Ne?.message||"No foi possvel aprovar");M("Proposta aprovada com sucesso!"),c(Be=>Be&&{...Be,status:"APROVADA"})}catch(de){k(de?.message||"Erro ao aprovar")}finally{E(!1)}},Je=async()=>{try{if(E(!0),k(null),M(null),!r)throw new Error("Token ausente.");const de=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,signerName:x.trim(),signerEmail:j.trim(),comment:N.trim()})}),Ne=await de.json().catch(()=>null);if(!de.ok)throw new Error(Ne?.message||"No foi possvel rejeitar");M("Proposta rejeitada."),c(Be=>Be&&{...Be,status:"REPROVADA"})}catch(de){k(de?.message||"Erro ao rejeitar")}finally{E(!1)}},tt=async(de,Ne)=>{try{if(O(de),q(null),!r)throw new Error("Token ausente.");const Be=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/media-decisions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,decisions:[{proposalItemId:de,decisionStatus:Ne}],signerName:(se||x).trim()||void 0,signerEmail:(ee||j).trim()||void 0,comment:N.trim()||void 0})}),He=await Be.json().catch(()=>null);if(!Be.ok)throw new Error(He?.message||"No foi possvel salvar a deciso");c(He)}catch(Be){q(Be?.message||"Erro ao salvar deciso")}finally{O(null)}},nt=async()=>{if(!n||!t)return;const de=(se||x).trim(),Ne=(ee||j).trim(),Be=Y.trim();if(z(null),!de){z("Informe seu nome para enviar a mensagem.");return}if(!Ne){z("Informe seu e-mail (ou contato) para enviar a mensagem.");return}if(!Be){z("Escreva uma mensagem.");return}try{ne(!0);try{localStorage.setItem(`portal_name_${t}`,de),localStorage.setItem(`portal_contact_${t}`,Ne)}catch{}const He=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,senderName:de,senderContact:Ne,contentText:Be})}),gt=await He.json().catch(()=>null);if(!He.ok)throw new Error(gt?.message||"No foi possvel enviar a mensagem");ce(""),Pe({silent:!0})}catch(He){z(He?.message||"Erro ao enviar mensagem")}finally{ne(!1)}};if(u)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600",children:"Carregando proposta..."})});if(f||!o)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Proposta indisponvel"}),e.jsx("p",{className:"text-gray-600 mt-2",children:f||"No foi possvel carregar a proposta."})]})});const ct=de=>typeof de!="number"||Number.isNaN(de)?"":de.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),wt=de=>{if(!de)return"";const Ne=new Date(de);return Number.isNaN(Ne.getTime())?"":Ne.toLocaleDateString("pt-BR")},pt=de=>{if(!de)return"";const Ne=new Date(de);return Number.isNaN(Ne.getTime())?"":Ne.toLocaleString("pt-BR")},It=Array.isArray(o.items)?o.items:[],Lt=It.filter(de=>!!de.mediaUnitId),J=It.filter(de=>de.mediaUnitId?String(de.decisionStatus||"PENDING").toUpperCase()!=="REJECTED":!0),ve=Lt.reduce((de,Ne)=>{const Be=String(Ne.decisionStatus||"PENDING").toUpperCase();return Be==="REJECTED"?de.rejected+=1:Be==="ACCEPTED"?de.accepted+=1:de.pending+=1,de},{accepted:0,rejected:0,pending:0}),xe=o.clientName||o.client?.companyName||o.client?.contactName||"Cliente",Ve=de=>typeof de!="number"||Number.isNaN(de)?"":String(de);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:o.title||"Proposta"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Para: ",xe]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${o.status==="APROVADA"?"bg-green-100 text-green-800":o.status==="REPROVADA"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:o.status}),e.jsx("a",{className:"inline-flex items-center justify-center rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-900 hover:bg-gray-50",href:`${s}/public/proposals/${t}/pdf`,target:"_blank",rel:"noreferrer",children:"Baixar proposta (PDF)"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Valor total"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ct(o.totalAmount)}),typeof o.discountAmount=="number"&&o.discountAmount>0?e.jsxs("p",{className:"text-sm text-green-700",children:["Desconto: -",ct(o.discountAmount),o.discountPercent?` (${o.discountPercent}%)`:""]}):o.discountPercent?e.jsxs("p",{className:"text-sm text-green-700",children:["Desconto: -",o.discountPercent,"%"]}):null]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Validade"}),e.jsx("p",{className:"text-gray-900",children:wt(o.validUntil)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Responsvel"}),e.jsx("p",{className:"text-gray-900",children:o.responsibleUserName||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-gray-900",children:[wt(o.startDate)," ",o.endDate?` ${wt(o.endDate)}`:""]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Condies"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:o.conditionsText||""})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Observaes"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:o.notes||""})]}),J.length>0&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Itens"}),e.jsx("div",{className:"mt-2 divide-y divide-gray-200 rounded-xl border border-gray-100",children:J.map(de=>{const Ne=de.product?.name||de.mediaUnit?.label||de.description||"Item",Be=de.description&&(de.product?.name||de.mediaUnit?.label)?de.description:null;return e.jsxs("div",{className:"p-3 flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Ne}),Be?e.jsx("p",{className:"text-xs text-gray-600 mt-0.5 whitespace-pre-wrap",children:Be}):null,e.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:[wt(de.startDate)," ",de.endDate?` ${wt(de.endDate)}`:""]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:["x",Ve(de.quantity??1)]}),typeof de.totalPrice=="number"?(()=>{const He=typeof de.quantity=="number"?de.quantity:1,gt=typeof de.unitPrice=="number"?de.unitPrice:0,pe=He*gt,$e=de.totalPrice,Xe=Math.max(0,pe-$e),mt=de.discountPercent,fe=de.discountAmount,Ye=mt?`${mt}%`:fe?`R$ ${ct(fe)}`:null;return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ct($e)}),Xe>0?e.jsxs("p",{className:"text-[11px] text-red-600",children:["-",ct(Xe),Ye?` (${Ye})`:""]}):null]})})():null,typeof de.unitPrice=="number"?e.jsxs("p",{className:"text-[11px] text-gray-500",children:[ct(de.unitPrice)," / un"]}):null]})]},de.id)})})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Converse com a equipe responsvel por esta proposta."})]}),!n&&e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Somente leitura",e.jsx("div",{children:"Pea  equipe o link com permisso de mensagens."})]})]}),e.jsx("div",{className:"mt-4",children:I?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando mensagens"}):te?e.jsx("div",{className:"text-sm text-red-600",children:te}):$.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma mensagem ainda."}):e.jsx("div",{ref:re,className:"max-h-80 overflow-y-auto space-y-3 rounded-xl bg-gray-50 p-4",children:$.map(de=>{const Ne=de?.senderType==="CLIENTE"||de?.direction==="IN";return e.jsx("div",{className:`flex ${Ne?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm ${Ne?"bg-indigo-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[e.jsx("div",{className:"text-[11px] opacity-80 mb-1",children:de?.senderName||(Ne?"Cliente":"Equipe")}),e.jsx("div",{className:"whitespace-pre-wrap",children:de.contentText}),e.jsx("div",{className:"text-[10px] opacity-70 mt-1",children:de.createdAt?new Date(de.createdAt).toLocaleString("pt-BR"):""})]})},de.id)})})}),n?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu nome"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:se,onChange:de=>G(de.target.value),placeholder:"Ex.: Joo Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu e-mail (ou contato)"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:ee,onChange:de=>V(de.target.value),placeholder:"Ex.: joao@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Mensagem"}),e.jsx("textarea",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm min-h-[96px]",value:Y,onChange:de=>ce(de.target.value),placeholder:"Escreva sua mensagem"})]}),Q&&e.jsx("div",{className:"text-sm text-red-600",children:Q}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-indigo-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:nt,disabled:U,children:U?"Enviando":"Enviar mensagem"})]}):null]}),oe&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ao"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Voc recebeu um link com permisso para ",e.jsx("span",{className:"font-medium",children:"aprovar"})," ou ",e.jsx("span",{className:"font-medium",children:"rejeitar"})," esta proposta."]}),Lt.length>0&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-gray-50 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Deciso por ponto de mdia"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Escolha ",e.jsx("span",{className:"font-medium",children:"Aceito"})," ou ",e.jsx("span",{className:"font-medium",children:"Recuso"})," para cada ponto de mdia. Produtos/Servios no entram nessa deciso."]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Aceitos:"})," ",ve.accepted," "," ",e.jsx("span",{className:"font-medium text-red-700",children:"Recusados:"})," ",ve.rejected," "," ",e.jsx("span",{className:"font-medium text-gray-700",children:"Pendentes:"})," ",ve.pending]})]}),Z&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:Z}),e.jsx("div",{className:"mt-3 divide-y divide-gray-200 rounded-xl border border-gray-200 bg-white",children:Lt.map(de=>{const Ne=de.mediaUnit?.label||de.description||"Ponto de mdia",Be=String(de.decisionStatus||"PENDING").toUpperCase(),He=Be==="ACCEPTED",gt=Be==="REJECTED",pe=F===de.id;return e.jsxs("div",{className:"p-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Ne}),e.jsxs("p",{className:"text-[11px] text-gray-500 mt-0.5",children:[wt(de.startDate)," ",de.endDate?` ${wt(de.endDate)}`:""]}),typeof de.totalPrice=="number"?e.jsxs("p",{className:"text-xs text-gray-700 mt-1",children:["Total: ",ct(de.totalPrice)]}):null]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:`hidden sm:inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${gt?"bg-red-100 text-red-800":He?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:gt?"RECUSADO":He?"ACEITO":"PENDENTE"}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border disabled:opacity-50 ${He?"bg-green-600 text-white border-green-600":"bg-white text-gray-900 border-gray-200 hover:bg-green-50"}`,onClick:()=>tt(de.id,"ACCEPTED"),disabled:pe||S||o.status==="APROVADA"||o.status==="REPROVADA",children:pe&&He?"Salvando":"Aceito"}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border disabled:opacity-50 ${gt?"bg-red-600 text-white border-red-600":"bg-white text-gray-900 border-gray-200 hover:bg-red-50"}`,onClick:()=>tt(de.id,"REJECTED"),disabled:pe||S||o.status==="APROVADA"||o.status==="REPROVADA",children:pe&&gt?"Salvando":"Recuso"})]})]},de.id)})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu nome"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:x,onChange:de=>g(de.target.value),placeholder:"Ex.: Joo Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu e-mail"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:j,onChange:de=>w(de.target.value),placeholder:"Ex.: joao@email.com"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Comentrio (opcional)"}),e.jsx("textarea",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm min-h-[96px]",value:N,onChange:de=>C(de.target.value),placeholder:"Deixe um comentrio..."})]}),_&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:_}),T&&e.jsx("div",{className:"mt-3 text-sm text-green-700",children:T}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-green-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:We,disabled:S,children:S?"Enviando":"Aprovar"}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:Je,disabled:S,children:S?"Enviando":"Rejeitar"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ...",o.id.slice(-6),"  Atualizado em ",pt(o.updatedAt)]})]})})}function Hw(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(n=Hw(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function f0(){for(var t,s,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(s=Hw(t))&&(r&&(r+=" "),r+=s);return r}const x0="-",ND=t=>{const s=CD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const h=u.split(x0);return h[0]===""&&h.length!==1&&h.shift(),qw(h,s)||wD(u)},getConflictingClassGroupIds:(u,h)=>{const f=n[u]||[];return h&&r[u]?[...f,...r[u]]:f}}},qw=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),o=r?qw(t.slice(1),r):void 0;if(o)return o;if(s.validators.length===0)return;const c=t.join(x0);return s.validators.find(({validator:u})=>u(c))?.classGroupId},Vb=/^\[(.+)\]$/,wD=t=>{if(Vb.test(t)){const s=Vb.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},CD=t=>{const{theme:s,prefix:n}=t,r={nextPart:new Map,validators:[]};return _D(Object.entries(t.classGroups),n).forEach(([c,u])=>{Sg(u,r,c,s)}),r},Sg=(t,s,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const c=o===""?s:Hb(s,o);c.classGroupId=n;return}if(typeof o=="function"){if(SD(o)){Sg(o(r),s,n,r);return}s.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([c,u])=>{Sg(u,Hb(s,c),n,r)})})},Hb=(t,s)=>{let n=t;return s.split(x0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},SD=t=>t.isThemeGetter,_D=(t,s)=>s?t.map(([n,r])=>{const o=r.map(c=>typeof c=="string"?s+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([u,h])=>[s+u,h])):c);return[n,o]}):t,AD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const o=(c,u)=>{n.set(c,u),s++,s>t&&(s=0,r=n,n=new Map)};return{get(c){let u=n.get(c);if(u!==void 0)return u;if((u=r.get(c))!==void 0)return o(c,u),u},set(c,u){n.has(c)?n.set(c,u):o(c,u)}}},Ww="!",PD=t=>{const{separator:s,experimentalParseClassName:n}=t,r=s.length===1,o=s[0],c=s.length,u=h=>{const f=[];let v=0,x=0,g;for(let S=0;S<h.length;S++){let E=h[S];if(v===0){if(E===o&&(r||h.slice(S,S+c)===s)){f.push(h.slice(x,S)),x=S+c;continue}if(E==="/"){g=S;continue}}E==="["?v++:E==="]"&&v--}const j=f.length===0?h:h.substring(x),w=j.startsWith(Ww),N=w?j.substring(1):j,C=g&&g>x?g-x:void 0;return{modifiers:f,hasImportantModifier:w,baseClassName:N,maybePostfixModifierPosition:C}};return n?h=>n({className:h,parseClassName:u}):u},ED=t=>{if(t.length<=1)return t;const s=[];let n=[];return t.forEach(r=>{r[0]==="["?(s.push(...n.sort(),r),n=[]):n.push(r)}),s.push(...n.sort()),s},kD=t=>({cache:AD(t.cacheSize),parseClassName:PD(t),...ND(t)}),TD=/\s+/,DD=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=s,c=[],u=t.trim().split(TD);let h="";for(let f=u.length-1;f>=0;f-=1){const v=u[f],{modifiers:x,hasImportantModifier:g,baseClassName:j,maybePostfixModifierPosition:w}=n(v);let N=!!w,C=r(N?j.substring(0,w):j);if(!C){if(!N){h=v+(h.length>0?" "+h:h);continue}if(C=r(j),!C){h=v+(h.length>0?" "+h:h);continue}N=!1}const S=ED(x).join(":"),E=g?S+Ww:S,_=E+C;if(c.includes(_))continue;c.push(_);const k=o(C,N);for(let T=0;T<k.length;++T){const M=k[T];c.push(E+M)}h=v+(h.length>0?" "+h:h)}return h};function ID(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=Gw(s))&&(r&&(r+=" "),r+=n);return r}const Gw=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=Gw(t[r]))&&(n&&(n+=" "),n+=s);return n};function MD(t,...s){let n,r,o,c=u;function u(f){const v=s.reduce((x,g)=>g(x),t());return n=kD(v),r=n.cache.get,o=n.cache.set,c=h,h(f)}function h(f){const v=r(f);if(v)return v;const x=DD(f,n);return o(f,x),x}return function(){return c(ID.apply(null,arguments))}}const Bs=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},Zw=/^\[(?:([a-z-]+):)?(.+)\]$/i,RD=/^\d+\/\d+$/,OD=new Set(["px","full","screen"]),LD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$D=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ri=t=>Wc(t)||OD.has(t)||RD.test(t),Po=t=>id(t,"length",KD),Wc=t=>!!t&&!Number.isNaN(Number(t)),Dx=t=>id(t,"number",Wc),au=t=>!!t&&Number.isInteger(Number(t)),UD=t=>t.endsWith("%")&&Wc(t.slice(0,-1)),Jt=t=>Zw.test(t),Eo=t=>LD.test(t),VD=new Set(["length","size","percentage"]),HD=t=>id(t,VD,Kw),qD=t=>id(t,"position",Kw),WD=new Set(["image","url"]),GD=t=>id(t,WD,XD),ZD=t=>id(t,"",QD),ru=()=>!0,id=(t,s,n)=>{const r=Zw.exec(t);return r?r[1]?typeof s=="string"?r[1]===s:s.has(r[1]):n(r[2]):!1},KD=t=>FD.test(t)&&!$D.test(t),Kw=()=>!1,QD=t=>zD.test(t),XD=t=>BD.test(t),YD=()=>{const t=Bs("colors"),s=Bs("spacing"),n=Bs("blur"),r=Bs("brightness"),o=Bs("borderColor"),c=Bs("borderRadius"),u=Bs("borderSpacing"),h=Bs("borderWidth"),f=Bs("contrast"),v=Bs("grayscale"),x=Bs("hueRotate"),g=Bs("invert"),j=Bs("gap"),w=Bs("gradientColorStops"),N=Bs("gradientColorStopPositions"),C=Bs("inset"),S=Bs("margin"),E=Bs("opacity"),_=Bs("padding"),k=Bs("saturate"),T=Bs("scale"),M=Bs("sepia"),F=Bs("skew"),O=Bs("space"),Z=Bs("translate"),q=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",Jt,s],I=()=>[Jt,s],B=()=>["",Ri,Po],te=()=>["auto",Wc,Jt],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",Jt],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[Wc,Jt];return{cacheSize:500,separator:":",theme:{colors:[ru],spacing:[Ri,Po],blur:["none","",Eo,Jt],brightness:z(),borderColor:[t],borderRadius:["none","","full",Eo,Jt],borderSpacing:I(),borderWidth:B(),contrast:z(),grayscale:ne(),hueRotate:z(),invert:ne(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[UD,Po],inset:X(),margin:X(),opacity:z(),padding:I(),saturate:z(),scale:z(),sepia:ne(),skew:z(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Jt]}],container:["container"],columns:[{columns:[Eo]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),Jt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",au,Jt]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Jt]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",au,Jt]}],"grid-cols":[{"grid-cols":[ru]}],"col-start-end":[{col:["auto",{span:["full",au,Jt]},Jt]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[ru]}],"row-start-end":[{row:["auto",{span:[au,Jt]},Jt]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Jt]}],gap:[{gap:[j]}],"gap-x":[{"gap-x":[j]}],"gap-y":[{"gap-y":[j]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Jt,s]}],"min-w":[{"min-w":[Jt,s,"min","max","fit"]}],"max-w":[{"max-w":[Jt,s,"none","full","min","max","fit","prose",{screen:[Eo]},Eo]}],h:[{h:[Jt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Jt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Jt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Jt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Eo,Po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Dx]}],"font-family":[{font:[ru]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jt]}],"line-clamp":[{"line-clamp":["none",Wc,Dx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ri,Jt]}],"list-image":[{"list-image":["none",Jt]}],"list-style-type":[{list:["none","disc","decimal",Jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ri,Po]}],"underline-offset":[{"underline-offset":["auto",Ri,Jt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),qD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GD]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Y()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ri,Jt]}],"outline-w":[{outline:[Ri,Po]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Ri,Po]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Eo,ZD]}],"shadow-color":[{shadow:[ru]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ce(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",Eo,Jt]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[g]}],saturate:[{saturate:[k]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Jt]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Jt]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[au,Jt]}],"translate-x":[{"translate-x":[Z]}],"translate-y":[{"translate-y":[Z]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ri,Po,Dx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Qw=MD(YD);function Nt(...t){return Qw(f0(t))}function Re({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Nt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function ci({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:Nt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function di({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:Nt("leading-none",t),...s})}function Le({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:Nt("px-6 [&:last-child]:pb-6",t),...s})}function qb(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function qi(...t){return s=>{let n=!1;const r=t.map(o=>{const c=qb(o,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let o=0;o<r.length;o++){const c=r[o];typeof c=="function"?c():qb(t[o],null)}}}}function ns(...t){return m.useCallback(qi(...t),t)}var JD=Symbol.for("react.lazy"),Wh=Qg[" use ".trim().toString()];function eI(t){return typeof t=="object"&&t!==null&&"then"in t}function Xw(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===JD&&"_payload"in t&&eI(t._payload)}function bp(t){const s=tI(t),n=m.forwardRef((r,o)=>{let{children:c,...u}=r;Xw(c)&&typeof Wh=="function"&&(c=Wh(c._payload));const h=m.Children.toArray(c),f=h.find(nI);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}var Yw=bp("Slot");function tI(t){const s=m.forwardRef((n,r)=>{let{children:o,...c}=n;if(Xw(o)&&typeof Wh=="function"&&(o=Wh(o._payload)),m.isValidElement(o)){const u=rI(o),h=aI(c,o.props);return o.type!==m.Fragment&&(h.ref=r?qi(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var sI=Symbol("radix.slottable");function nI(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===sI}function aI(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function rI(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Wb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Gb=f0,g0=(t,s)=>n=>{var r;if(s?.variants==null)return Gb(t,n?.class,n?.className);const{variants:o,defaultVariants:c}=s,u=Object.keys(o).map(v=>{const x=n?.[v],g=c?.[v];if(x===null)return null;const j=Wb(x)||Wb(g);return o[v][j]}),h=n&&Object.entries(n).reduce((v,x)=>{let[g,j]=x;return j===void 0||(v[g]=j),v},{}),f=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((v,x)=>{let{class:g,className:j,...w}=x;return Object.entries(w).every(N=>{let[C,S]=N;return Array.isArray(S)?S.includes({...c,...h}[C]):{...c,...h}[C]===S})?[...v,g,j]:v},[]);return Gb(t,u,f,n?.class,n?.className)},iI=g0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ke({className:t,variant:s,asChild:n=!1,...r}){const o=n?Yw:"span";return e.jsx(o,{"data-slot":"badge",className:Nt(iI({variant:s}),t),...r})}const v0=g0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function K({className:t,variant:s,size:n,asChild:r=!1,type:o,...c}){const u=r?Yw:"button";return e.jsx(u,{"data-slot":"button",className:Nt(v0({variant:s,size:n,className:t})),type:r?void 0:o??"button",...c})}const Ce=m.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{ref:r,type:s,"data-slot":"input",className:Nt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n}));Ce.displayName="Input";function _g(t,[s,n]){return Math.min(n,Math.max(s,t))}function lt(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function oI(t,s){const n=m.createContext(s),r=c=>{const{children:u,...h}=c,f=m.useMemo(()=>h,Object.values(h));return e.jsx(n.Provider,{value:f,children:u})};r.displayName=t+"Provider";function o(c){const u=m.useContext(n);if(u)return u;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[r,o]}function Pa(t,s=[]){let n=[];function r(c,u){const h=m.createContext(u),f=n.length;n=[...n,u];const v=g=>{const{scope:j,children:w,...N}=g,C=j?.[t]?.[f]||h,S=m.useMemo(()=>N,Object.values(N));return e.jsx(C.Provider,{value:S,children:w})};v.displayName=c+"Provider";function x(g,j){const w=j?.[t]?.[f]||h,N=m.useContext(w);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[v,x]}const o=()=>{const c=n.map(u=>m.createContext(u));return function(h){const f=h?.[t]||c;return m.useMemo(()=>({[`__scope${t}`]:{...h,[t]:f}}),[h,f])}};return o.scopeName=t,[r,lI(o,...s)]}function lI(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const u=r.reduce((h,{useScope:f,scopeName:v})=>{const g=f(c)[`__scope${v}`];return{...h,...g}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:u}),[u])}};return n.scopeName=s.scopeName,n}function Zb(t){const s=cI(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(uI);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function cI(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=hI(o),h=mI(c,o.props);return o.type!==m.Fragment&&(h.ref=r?qi(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var dI=Symbol("radix.slottable");function uI(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===dI}function mI(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function hI(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function y0(t){const s=t+"CollectionProvider",[n,r]=Pa(s),[o,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),u=C=>{const{scope:S,children:E}=C,_=Ue.useRef(null),k=Ue.useRef(new Map).current;return e.jsx(o,{scope:S,itemMap:k,collectionRef:_,children:E})};u.displayName=s;const h=t+"CollectionSlot",f=Zb(h),v=Ue.forwardRef((C,S)=>{const{scope:E,children:_}=C,k=c(h,E),T=ns(S,k.collectionRef);return e.jsx(f,{ref:T,children:_})});v.displayName=h;const x=t+"CollectionItemSlot",g="data-radix-collection-item",j=Zb(x),w=Ue.forwardRef((C,S)=>{const{scope:E,children:_,...k}=C,T=Ue.useRef(null),M=ns(S,T),F=c(x,E);return Ue.useEffect(()=>(F.itemMap.set(T,{ref:T,...k}),()=>void F.itemMap.delete(T))),e.jsx(j,{[g]:"",ref:M,children:_})});w.displayName=x;function N(C){const S=c(t+"CollectionConsumer",C);return Ue.useCallback(()=>{const _=S.collectionRef.current;if(!_)return[];const k=Array.from(_.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((F,O)=>k.indexOf(F.ref.current)-k.indexOf(O.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:u,Slot:v,ItemSlot:w},N,r]}var pI=m.createContext(void 0);function od(t){const s=m.useContext(pI);return t||s||"ltr"}function fI(t){const s=xI(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(vI);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function xI(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=bI(o),h=yI(c,o.props);return o.type!==m.Fragment&&(h.ref=r?qi(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var gI=Symbol("radix.slottable");function vI(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gI}function yI(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function bI(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var jI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Tt=jI.reduce((t,s)=>{const n=fI(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Jw(t,s){t&&sd.flushSync(()=>t.dispatchEvent(s))}function Fn(t){const s=m.useRef(t);return m.useEffect(()=>{s.current=t}),m.useMemo(()=>(...n)=>s.current?.(...n),[])}function NI(t,s=globalThis?.document){const n=Fn(t);m.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var wI="DismissableLayer",Ag="dismissableLayer.update",CI="dismissableLayer.pointerDownOutside",SI="dismissableLayer.focusOutside",Kb,e1=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jp=m.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:u,onDismiss:h,...f}=t,v=m.useContext(e1),[x,g]=m.useState(null),j=x?.ownerDocument??globalThis?.document,[,w]=m.useState({}),N=ns(s,O=>g(O)),C=Array.from(v.layers),[S]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(S),_=x?C.indexOf(x):-1,k=v.layersWithOutsidePointerEventsDisabled.size>0,T=_>=E,M=PI(O=>{const Z=O.target,q=[...v.branches].some($=>$.contains(Z));!T||q||(o?.(O),u?.(O),O.defaultPrevented||h?.())},j),F=EI(O=>{const Z=O.target;[...v.branches].some($=>$.contains(Z))||(c?.(O),u?.(O),O.defaultPrevented||h?.())},j);return NI(O=>{_===v.layers.size-1&&(r?.(O),!O.defaultPrevented&&h&&(O.preventDefault(),h()))},j),m.useEffect(()=>{if(x)return n&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(Kb=j.body.style.pointerEvents,j.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(x)),v.layers.add(x),Qb(),()=>{n&&v.layersWithOutsidePointerEventsDisabled.size===1&&(j.body.style.pointerEvents=Kb)}},[x,j,n,v]),m.useEffect(()=>()=>{x&&(v.layers.delete(x),v.layersWithOutsidePointerEventsDisabled.delete(x),Qb())},[x,v]),m.useEffect(()=>{const O=()=>w({});return document.addEventListener(Ag,O),()=>document.removeEventListener(Ag,O)},[]),e.jsx(Tt.div,{...f,ref:N,style:{pointerEvents:k?T?"auto":"none":void 0,...t.style},onFocusCapture:lt(t.onFocusCapture,F.onFocusCapture),onBlurCapture:lt(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:lt(t.onPointerDownCapture,M.onPointerDownCapture)})});jp.displayName=wI;var _I="DismissableLayerBranch",AI=m.forwardRef((t,s)=>{const n=m.useContext(e1),r=m.useRef(null),o=ns(s,r);return m.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(Tt.div,{...t,ref:o})});AI.displayName=_I;function PI(t,s=globalThis?.document){const n=Fn(t),r=m.useRef(!1),o=m.useRef(()=>{});return m.useEffect(()=>{const c=h=>{if(h.target&&!r.current){let f=function(){t1(CI,n,v,{discrete:!0})};const v={originalEvent:h};h.pointerType==="touch"?(s.removeEventListener("click",o.current),o.current=f,s.addEventListener("click",o.current,{once:!0})):f()}else s.removeEventListener("click",o.current);r.current=!1},u=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),s.removeEventListener("pointerdown",c),s.removeEventListener("click",o.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function EI(t,s=globalThis?.document){const n=Fn(t),r=m.useRef(!1);return m.useEffect(()=>{const o=c=>{c.target&&!r.current&&t1(SI,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",o),()=>s.removeEventListener("focusin",o)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Qb(){const t=new CustomEvent(Ag);document.dispatchEvent(t)}function t1(t,s,n,{discrete:r}){const o=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),r?Jw(o,c):o.dispatchEvent(c)}var Ix=0;function b0(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Xb()),document.body.insertAdjacentElement("beforeend",t[1]??Xb()),Ix++,()=>{Ix===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Ix--}},[])}function Xb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Mx="focusScope.autoFocusOnMount",Rx="focusScope.autoFocusOnUnmount",Yb={bubbles:!1,cancelable:!0},kI="FocusScope",Np=m.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:c,...u}=t,[h,f]=m.useState(null),v=Fn(o),x=Fn(c),g=m.useRef(null),j=ns(s,C=>f(C)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let C=function(k){if(w.paused||!h)return;const T=k.target;h.contains(T)?g.current=T:Do(g.current,{select:!0})},S=function(k){if(w.paused||!h)return;const T=k.relatedTarget;T!==null&&(h.contains(T)||Do(g.current,{select:!0}))},E=function(k){if(document.activeElement===document.body)for(const M of k)M.removedNodes.length>0&&Do(h)};document.addEventListener("focusin",C),document.addEventListener("focusout",S);const _=new MutationObserver(E);return h&&_.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",S),_.disconnect()}}},[r,h,w.paused]),m.useEffect(()=>{if(h){ej.add(w);const C=document.activeElement;if(!h.contains(C)){const E=new CustomEvent(Mx,Yb);h.addEventListener(Mx,v),h.dispatchEvent(E),E.defaultPrevented||(TI(OI(s1(h)),{select:!0}),document.activeElement===C&&Do(h))}return()=>{h.removeEventListener(Mx,v),setTimeout(()=>{const E=new CustomEvent(Rx,Yb);h.addEventListener(Rx,x),h.dispatchEvent(E),E.defaultPrevented||Do(C??document.body,{select:!0}),h.removeEventListener(Rx,x),ej.remove(w)},0)}}},[h,v,x,w]);const N=m.useCallback(C=>{if(!n&&!r||w.paused)return;const S=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(S&&E){const _=C.currentTarget,[k,T]=DI(_);k&&T?!C.shiftKey&&E===T?(C.preventDefault(),n&&Do(k,{select:!0})):C.shiftKey&&E===k&&(C.preventDefault(),n&&Do(T,{select:!0})):E===_&&C.preventDefault()}},[n,r,w.paused]);return e.jsx(Tt.div,{tabIndex:-1,...u,ref:j,onKeyDown:N})});Np.displayName=kI;function TI(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(Do(r,{select:s}),document.activeElement!==n)return}function DI(t){const s=s1(t),n=Jb(s,t),r=Jb(s.reverse(),t);return[n,r]}function s1(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Jb(t,s){for(const n of t)if(!II(n,{upTo:s}))return n}function II(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function MI(t){return t instanceof HTMLInputElement&&"select"in t}function Do(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&MI(t)&&s&&t.select()}}var ej=RI();function RI(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=tj(t,s),t.unshift(s)},remove(s){t=tj(t,s),t[0]?.resume()}}}function tj(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function OI(t){return t.filter(s=>s.tagName!=="A")}var Dn=globalThis?.document?m.useLayoutEffect:()=>{},LI=Qg[" useId ".trim().toString()]||(()=>{}),FI=0;function Ir(t){const[s,n]=m.useState(LI());return Dn(()=>{n(r=>r??String(FI++))},[t]),t||(s?`radix-${s}`:"")}const $I=["top","right","bottom","left"],Bo=Math.min,$a=Math.max,Gh=Math.round,ih=Math.floor,oi=t=>({x:t,y:t}),zI={left:"right",right:"left",bottom:"top",top:"bottom"},BI={start:"end",end:"start"};function Pg(t,s,n){return $a(t,Bo(s,n))}function Vi(t,s){return typeof t=="function"?t(s):t}function Hi(t){return t.split("-")[0]}function ld(t){return t.split("-")[1]}function j0(t){return t==="x"?"y":"x"}function N0(t){return t==="y"?"height":"width"}const UI=new Set(["top","bottom"]);function ai(t){return UI.has(Hi(t))?"y":"x"}function w0(t){return j0(ai(t))}function VI(t,s,n){n===void 0&&(n=!1);const r=ld(t),o=w0(t),c=N0(o);let u=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[c]>s.floating[c]&&(u=Zh(u)),[u,Zh(u)]}function HI(t){const s=Zh(t);return[Eg(t),s,Eg(s)]}function Eg(t){return t.replace(/start|end/g,s=>BI[s])}const sj=["left","right"],nj=["right","left"],qI=["top","bottom"],WI=["bottom","top"];function GI(t,s,n){switch(t){case"top":case"bottom":return n?s?nj:sj:s?sj:nj;case"left":case"right":return s?qI:WI;default:return[]}}function ZI(t,s,n,r){const o=ld(t);let c=GI(Hi(t),n==="start",r);return o&&(c=c.map(u=>u+"-"+o),s&&(c=c.concat(c.map(Eg)))),c}function Zh(t){return t.replace(/left|right|bottom|top/g,s=>zI[s])}function KI(t){return{top:0,right:0,bottom:0,left:0,...t}}function n1(t){return typeof t!="number"?KI(t):{top:t,right:t,bottom:t,left:t}}function Kh(t){const{x:s,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:s,right:s+r,bottom:n+o,x:s,y:n}}function aj(t,s,n){let{reference:r,floating:o}=t;const c=ai(s),u=w0(s),h=N0(u),f=Hi(s),v=c==="y",x=r.x+r.width/2-o.width/2,g=r.y+r.height/2-o.height/2,j=r[h]/2-o[h]/2;let w;switch(f){case"top":w={x,y:r.y-o.height};break;case"bottom":w={x,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-o.width,y:g};break;default:w={x:r.x,y:r.y}}switch(ld(s)){case"start":w[u]-=j*(n&&v?-1:1);break;case"end":w[u]+=j*(n&&v?-1:1);break}return w}const QI=async(t,s,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:c=[],platform:u}=n,h=c.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(s));let v=await u.getElementRects({reference:t,floating:s,strategy:o}),{x,y:g}=aj(v,r,f),j=r,w={},N=0;for(let C=0;C<h.length;C++){const{name:S,fn:E}=h[C],{x:_,y:k,data:T,reset:M}=await E({x,y:g,initialPlacement:r,placement:j,strategy:o,middlewareData:w,rects:v,platform:u,elements:{reference:t,floating:s}});x=_??x,g=k??g,w={...w,[S]:{...w[S],...T}},M&&N<=50&&(N++,typeof M=="object"&&(M.placement&&(j=M.placement),M.rects&&(v=M.rects===!0?await u.getElementRects({reference:t,floating:s,strategy:o}):M.rects),{x,y:g}=aj(v,j,f)),C=-1)}return{x,y:g,placement:j,strategy:o,middlewareData:w}};async function _u(t,s){var n;s===void 0&&(s={});const{x:r,y:o,platform:c,rects:u,elements:h,strategy:f}=t,{boundary:v="clippingAncestors",rootBoundary:x="viewport",elementContext:g="floating",altBoundary:j=!1,padding:w=0}=Vi(s,t),N=n1(w),S=h[j?g==="floating"?"reference":"floating":g],E=Kh(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(S)))==null||n?S:S.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(h.floating)),boundary:v,rootBoundary:x,strategy:f})),_=g==="floating"?{x:r,y:o,width:u.floating.width,height:u.floating.height}:u.reference,k=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h.floating)),T=await(c.isElement==null?void 0:c.isElement(k))?await(c.getScale==null?void 0:c.getScale(k))||{x:1,y:1}:{x:1,y:1},M=Kh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:_,offsetParent:k,strategy:f}):_);return{top:(E.top-M.top+N.top)/T.y,bottom:(M.bottom-E.bottom+N.bottom)/T.y,left:(E.left-M.left+N.left)/T.x,right:(M.right-E.right+N.right)/T.x}}const XI=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:o,rects:c,platform:u,elements:h,middlewareData:f}=s,{element:v,padding:x=0}=Vi(t,s)||{};if(v==null)return{};const g=n1(x),j={x:n,y:r},w=w0(o),N=N0(w),C=await u.getDimensions(v),S=w==="y",E=S?"top":"left",_=S?"bottom":"right",k=S?"clientHeight":"clientWidth",T=c.reference[N]+c.reference[w]-j[w]-c.floating[N],M=j[w]-c.reference[w],F=await(u.getOffsetParent==null?void 0:u.getOffsetParent(v));let O=F?F[k]:0;(!O||!await(u.isElement==null?void 0:u.isElement(F)))&&(O=h.floating[k]||c.floating[N]);const Z=T/2-M/2,q=O/2-C[N]/2-1,$=Bo(g[E],q),X=Bo(g[_],q),I=$,B=O-C[N]-X,te=O/2-C[N]/2+Z,ue=Pg(I,te,B),Y=!f.arrow&&ld(o)!=null&&te!==ue&&c.reference[N]/2-(te<I?$:X)-C[N]/2<0,ce=Y?te<I?te-I:te-B:0;return{[w]:j[w]+ce,data:{[w]:ue,centerOffset:te-ue-ce,...Y&&{alignmentOffset:ce}},reset:Y}}}),YI=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:o,middlewareData:c,rects:u,initialPlacement:h,platform:f,elements:v}=s,{mainAxis:x=!0,crossAxis:g=!0,fallbackPlacements:j,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:C=!0,...S}=Vi(t,s);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const E=Hi(o),_=ai(h),k=Hi(h)===h,T=await(f.isRTL==null?void 0:f.isRTL(v.floating)),M=j||(k||!C?[Zh(h)]:HI(h)),F=N!=="none";!j&&F&&M.push(...ZI(h,C,N,T));const O=[h,...M],Z=await _u(s,S),q=[];let $=((r=c.flip)==null?void 0:r.overflows)||[];if(x&&q.push(Z[E]),g){const te=VI(o,u,T);q.push(Z[te[0]],Z[te[1]])}if($=[...$,{placement:o,overflows:q}],!q.every(te=>te<=0)){var X,I;const te=(((X=c.flip)==null?void 0:X.index)||0)+1,ue=O[te];if(ue&&(!(g==="alignment"?_!==ai(ue):!1)||$.every(U=>ai(U.placement)===_?U.overflows[0]>0:!0)))return{data:{index:te,overflows:$},reset:{placement:ue}};let Y=(I=$.filter(ce=>ce.overflows[0]<=0).sort((ce,U)=>ce.overflows[1]-U.overflows[1])[0])==null?void 0:I.placement;if(!Y)switch(w){case"bestFit":{var B;const ce=(B=$.filter(U=>{if(F){const ne=ai(U.placement);return ne===_||ne==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(ne=>ne>0).reduce((ne,Q)=>ne+Q,0)]).sort((U,ne)=>U[1]-ne[1])[0])==null?void 0:B[0];ce&&(Y=ce);break}case"initialPlacement":Y=h;break}if(o!==Y)return{reset:{placement:Y}}}return{}}}};function rj(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function ij(t){return $I.some(s=>t[s]>=0)}const JI=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...o}=Vi(t,s);switch(r){case"referenceHidden":{const c=await _u(s,{...o,elementContext:"reference"}),u=rj(c,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:ij(u)}}}case"escaped":{const c=await _u(s,{...o,altBoundary:!0}),u=rj(c,n.floating);return{data:{escapedOffsets:u,escaped:ij(u)}}}default:return{}}}}},a1=new Set(["left","top"]);async function e5(t,s){const{placement:n,platform:r,elements:o}=t,c=await(r.isRTL==null?void 0:r.isRTL(o.floating)),u=Hi(n),h=ld(n),f=ai(n)==="y",v=a1.has(u)?-1:1,x=c&&f?-1:1,g=Vi(s,t);let{mainAxis:j,crossAxis:w,alignmentAxis:N}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return h&&typeof N=="number"&&(w=h==="end"?N*-1:N),f?{x:w*x,y:j*v}:{x:j*v,y:w*x}}const t5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:o,y:c,placement:u,middlewareData:h}=s,f=await e5(s,t);return u===((n=h.offset)==null?void 0:n.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:o+f.x,y:c+f.y,data:{...f,placement:u}}}}},s5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:o}=s,{mainAxis:c=!0,crossAxis:u=!1,limiter:h={fn:S=>{let{x:E,y:_}=S;return{x:E,y:_}}},...f}=Vi(t,s),v={x:n,y:r},x=await _u(s,f),g=ai(Hi(o)),j=j0(g);let w=v[j],N=v[g];if(c){const S=j==="y"?"top":"left",E=j==="y"?"bottom":"right",_=w+x[S],k=w-x[E];w=Pg(_,w,k)}if(u){const S=g==="y"?"top":"left",E=g==="y"?"bottom":"right",_=N+x[S],k=N-x[E];N=Pg(_,N,k)}const C=h.fn({...s,[j]:w,[g]:N});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[j]:c,[g]:u}}}}}},n5=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:o,rects:c,middlewareData:u}=s,{offset:h=0,mainAxis:f=!0,crossAxis:v=!0}=Vi(t,s),x={x:n,y:r},g=ai(o),j=j0(g);let w=x[j],N=x[g];const C=Vi(h,s),S=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const k=j==="y"?"height":"width",T=c.reference[j]-c.floating[k]+S.mainAxis,M=c.reference[j]+c.reference[k]-S.mainAxis;w<T?w=T:w>M&&(w=M)}if(v){var E,_;const k=j==="y"?"width":"height",T=a1.has(Hi(o)),M=c.reference[g]-c.floating[k]+(T&&((E=u.offset)==null?void 0:E[g])||0)+(T?0:S.crossAxis),F=c.reference[g]+c.reference[k]+(T?0:((_=u.offset)==null?void 0:_[g])||0)-(T?S.crossAxis:0);N<M?N=M:N>F&&(N=F)}return{[j]:w,[g]:N}}}},a5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:o,rects:c,platform:u,elements:h}=s,{apply:f=()=>{},...v}=Vi(t,s),x=await _u(s,v),g=Hi(o),j=ld(o),w=ai(o)==="y",{width:N,height:C}=c.floating;let S,E;g==="top"||g==="bottom"?(S=g,E=j===(await(u.isRTL==null?void 0:u.isRTL(h.floating))?"start":"end")?"left":"right"):(E=g,S=j==="end"?"top":"bottom");const _=C-x.top-x.bottom,k=N-x.left-x.right,T=Bo(C-x[S],_),M=Bo(N-x[E],k),F=!s.middlewareData.shift;let O=T,Z=M;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(Z=k),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(O=_),F&&!j){const $=$a(x.left,0),X=$a(x.right,0),I=$a(x.top,0),B=$a(x.bottom,0);w?Z=N-2*($!==0||X!==0?$+X:$a(x.left,x.right)):O=C-2*(I!==0||B!==0?I+B:$a(x.top,x.bottom))}await f({...s,availableWidth:Z,availableHeight:O});const q=await u.getDimensions(h.floating);return N!==q.width||C!==q.height?{reset:{rects:!0}}:{}}}};function wp(){return typeof window<"u"}function cd(t){return r1(t)?(t.nodeName||"").toLowerCase():"#document"}function Ha(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function pi(t){var s;return(s=(r1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function r1(t){return wp()?t instanceof Node||t instanceof Ha(t).Node:!1}function Rr(t){return wp()?t instanceof Element||t instanceof Ha(t).Element:!1}function ui(t){return wp()?t instanceof HTMLElement||t instanceof Ha(t).HTMLElement:!1}function oj(t){return!wp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ha(t).ShadowRoot}const r5=new Set(["inline","contents"]);function $u(t){const{overflow:s,overflowX:n,overflowY:r,display:o}=Or(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!r5.has(o)}const i5=new Set(["table","td","th"]);function o5(t){return i5.has(cd(t))}const l5=[":popover-open",":modal"];function Cp(t){return l5.some(s=>{try{return t.matches(s)}catch{return!1}})}const c5=["transform","translate","scale","rotate","perspective"],d5=["transform","translate","scale","rotate","perspective","filter"],u5=["paint","layout","strict","content"];function C0(t){const s=S0(),n=Rr(t)?Or(t):t;return c5.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||d5.some(r=>(n.willChange||"").includes(r))||u5.some(r=>(n.contain||"").includes(r))}function m5(t){let s=Uo(t);for(;ui(s)&&!ed(s);){if(C0(s))return s;if(Cp(s))return null;s=Uo(s)}return null}function S0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const h5=new Set(["html","body","#document"]);function ed(t){return h5.has(cd(t))}function Or(t){return Ha(t).getComputedStyle(t)}function Sp(t){return Rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Uo(t){if(cd(t)==="html")return t;const s=t.assignedSlot||t.parentNode||oj(t)&&t.host||pi(t);return oj(s)?s.host:s}function i1(t){const s=Uo(t);return ed(s)?t.ownerDocument?t.ownerDocument.body:t.body:ui(s)&&$u(s)?s:i1(s)}function Au(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const o=i1(t),c=o===((r=t.ownerDocument)==null?void 0:r.body),u=Ha(o);if(c){const h=kg(u);return s.concat(u,u.visualViewport||[],$u(o)?o:[],h&&n?Au(h):[])}return s.concat(o,Au(o,[],n))}function kg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function o1(t){const s=Or(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const o=ui(t),c=o?t.offsetWidth:n,u=o?t.offsetHeight:r,h=Gh(n)!==c||Gh(r)!==u;return h&&(n=c,r=u),{width:n,height:r,$:h}}function _0(t){return Rr(t)?t:t.contextElement}function Gc(t){const s=_0(t);if(!ui(s))return oi(1);const n=s.getBoundingClientRect(),{width:r,height:o,$:c}=o1(s);let u=(c?Gh(n.width):n.width)/r,h=(c?Gh(n.height):n.height)/o;return(!u||!Number.isFinite(u))&&(u=1),(!h||!Number.isFinite(h))&&(h=1),{x:u,y:h}}const p5=oi(0);function l1(t){const s=Ha(t);return!S0()||!s.visualViewport?p5:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function f5(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Ha(t)?!1:s}function zl(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),c=_0(t);let u=oi(1);s&&(r?Rr(r)&&(u=Gc(r)):u=Gc(t));const h=f5(c,n,r)?l1(c):oi(0);let f=(o.left+h.x)/u.x,v=(o.top+h.y)/u.y,x=o.width/u.x,g=o.height/u.y;if(c){const j=Ha(c),w=r&&Rr(r)?Ha(r):r;let N=j,C=kg(N);for(;C&&r&&w!==N;){const S=Gc(C),E=C.getBoundingClientRect(),_=Or(C),k=E.left+(C.clientLeft+parseFloat(_.paddingLeft))*S.x,T=E.top+(C.clientTop+parseFloat(_.paddingTop))*S.y;f*=S.x,v*=S.y,x*=S.x,g*=S.y,f+=k,v+=T,N=Ha(C),C=kg(N)}}return Kh({width:x,height:g,x:f,y:v})}function _p(t,s){const n=Sp(t).scrollLeft;return s?s.left+n:zl(pi(t)).left+n}function c1(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-_p(t,n),o=n.top+s.scrollTop;return{x:r,y:o}}function x5(t){let{elements:s,rect:n,offsetParent:r,strategy:o}=t;const c=o==="fixed",u=pi(r),h=s?Cp(s.floating):!1;if(r===u||h&&c)return n;let f={scrollLeft:0,scrollTop:0},v=oi(1);const x=oi(0),g=ui(r);if((g||!g&&!c)&&((cd(r)!=="body"||$u(u))&&(f=Sp(r)),ui(r))){const w=zl(r);v=Gc(r),x.x=w.x+r.clientLeft,x.y=w.y+r.clientTop}const j=u&&!g&&!c?c1(u,f):oi(0);return{width:n.width*v.x,height:n.height*v.y,x:n.x*v.x-f.scrollLeft*v.x+x.x+j.x,y:n.y*v.y-f.scrollTop*v.y+x.y+j.y}}function g5(t){return Array.from(t.getClientRects())}function v5(t){const s=pi(t),n=Sp(t),r=t.ownerDocument.body,o=$a(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),c=$a(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+_p(t);const h=-n.scrollTop;return Or(r).direction==="rtl"&&(u+=$a(s.clientWidth,r.clientWidth)-o),{width:o,height:c,x:u,y:h}}const lj=25;function y5(t,s){const n=Ha(t),r=pi(t),o=n.visualViewport;let c=r.clientWidth,u=r.clientHeight,h=0,f=0;if(o){c=o.width,u=o.height;const x=S0();(!x||x&&s==="fixed")&&(h=o.offsetLeft,f=o.offsetTop)}const v=_p(r);if(v<=0){const x=r.ownerDocument,g=x.body,j=getComputedStyle(g),w=x.compatMode==="CSS1Compat"&&parseFloat(j.marginLeft)+parseFloat(j.marginRight)||0,N=Math.abs(r.clientWidth-g.clientWidth-w);N<=lj&&(c-=N)}else v<=lj&&(c+=v);return{width:c,height:u,x:h,y:f}}const b5=new Set(["absolute","fixed"]);function j5(t,s){const n=zl(t,!0,s==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,c=ui(t)?Gc(t):oi(1),u=t.clientWidth*c.x,h=t.clientHeight*c.y,f=o*c.x,v=r*c.y;return{width:u,height:h,x:f,y:v}}function cj(t,s,n){let r;if(s==="viewport")r=y5(t,n);else if(s==="document")r=v5(pi(t));else if(Rr(s))r=j5(s,n);else{const o=l1(t);r={x:s.x-o.x,y:s.y-o.y,width:s.width,height:s.height}}return Kh(r)}function d1(t,s){const n=Uo(t);return n===s||!Rr(n)||ed(n)?!1:Or(n).position==="fixed"||d1(n,s)}function N5(t,s){const n=s.get(t);if(n)return n;let r=Au(t,[],!1).filter(h=>Rr(h)&&cd(h)!=="body"),o=null;const c=Or(t).position==="fixed";let u=c?Uo(t):t;for(;Rr(u)&&!ed(u);){const h=Or(u),f=C0(u);!f&&h.position==="fixed"&&(o=null),(c?!f&&!o:!f&&h.position==="static"&&!!o&&b5.has(o.position)||$u(u)&&!f&&d1(t,u))?r=r.filter(x=>x!==u):o=h,u=Uo(u)}return s.set(t,r),r}function w5(t){let{element:s,boundary:n,rootBoundary:r,strategy:o}=t;const u=[...n==="clippingAncestors"?Cp(s)?[]:N5(s,this._c):[].concat(n),r],h=u[0],f=u.reduce((v,x)=>{const g=cj(s,x,o);return v.top=$a(g.top,v.top),v.right=Bo(g.right,v.right),v.bottom=Bo(g.bottom,v.bottom),v.left=$a(g.left,v.left),v},cj(s,h,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function C5(t){const{width:s,height:n}=o1(t);return{width:s,height:n}}function S5(t,s,n){const r=ui(s),o=pi(s),c=n==="fixed",u=zl(t,!0,c,s);let h={scrollLeft:0,scrollTop:0};const f=oi(0);function v(){f.x=_p(o)}if(r||!r&&!c)if((cd(s)!=="body"||$u(o))&&(h=Sp(s)),r){const w=zl(s,!0,c,s);f.x=w.x+s.clientLeft,f.y=w.y+s.clientTop}else o&&v();c&&!r&&o&&v();const x=o&&!r&&!c?c1(o,h):oi(0),g=u.left+h.scrollLeft-f.x-x.x,j=u.top+h.scrollTop-f.y-x.y;return{x:g,y:j,width:u.width,height:u.height}}function Ox(t){return Or(t).position==="static"}function dj(t,s){if(!ui(t)||Or(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return pi(t)===n&&(n=n.ownerDocument.body),n}function u1(t,s){const n=Ha(t);if(Cp(t))return n;if(!ui(t)){let o=Uo(t);for(;o&&!ed(o);){if(Rr(o)&&!Ox(o))return o;o=Uo(o)}return n}let r=dj(t,s);for(;r&&o5(r)&&Ox(r);)r=dj(r,s);return r&&ed(r)&&Ox(r)&&!C0(r)?n:r||m5(t)||n}const _5=async function(t){const s=this.getOffsetParent||u1,n=this.getDimensions,r=await n(t.floating);return{reference:S5(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function A5(t){return Or(t).direction==="rtl"}const P5={convertOffsetParentRelativeRectToViewportRelativeRect:x5,getDocumentElement:pi,getClippingRect:w5,getOffsetParent:u1,getElementRects:_5,getClientRects:g5,getDimensions:C5,getScale:Gc,isElement:Rr,isRTL:A5};function m1(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function E5(t,s){let n=null,r;const o=pi(t);function c(){var h;clearTimeout(r),(h=n)==null||h.disconnect(),n=null}function u(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),c();const v=t.getBoundingClientRect(),{left:x,top:g,width:j,height:w}=v;if(h||s(),!j||!w)return;const N=ih(g),C=ih(o.clientWidth-(x+j)),S=ih(o.clientHeight-(g+w)),E=ih(x),k={rootMargin:-N+"px "+-C+"px "+-S+"px "+-E+"px",threshold:$a(0,Bo(1,f))||1};let T=!0;function M(F){const O=F[0].intersectionRatio;if(O!==f){if(!T)return u();O?u(!1,O):r=setTimeout(()=>{u(!1,1e-7)},1e3)}O===1&&!m1(v,t.getBoundingClientRect())&&u(),T=!1}try{n=new IntersectionObserver(M,{...k,root:o.ownerDocument})}catch{n=new IntersectionObserver(M,k)}n.observe(t)}return u(!0),c}function k5(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,v=_0(t),x=o||c?[...v?Au(v):[],...Au(s)]:[];x.forEach(E=>{o&&E.addEventListener("scroll",n,{passive:!0}),c&&E.addEventListener("resize",n)});const g=v&&h?E5(v,n):null;let j=-1,w=null;u&&(w=new ResizeObserver(E=>{let[_]=E;_&&_.target===v&&w&&(w.unobserve(s),cancelAnimationFrame(j),j=requestAnimationFrame(()=>{var k;(k=w)==null||k.observe(s)})),n()}),v&&!f&&w.observe(v),w.observe(s));let N,C=f?zl(t):null;f&&S();function S(){const E=zl(t);C&&!m1(C,E)&&n(),C=E,N=requestAnimationFrame(S)}return n(),()=>{var E;x.forEach(_=>{o&&_.removeEventListener("scroll",n),c&&_.removeEventListener("resize",n)}),g?.(),(E=w)==null||E.disconnect(),w=null,f&&cancelAnimationFrame(N)}}const T5=t5,D5=s5,I5=YI,M5=a5,R5=JI,uj=XI,O5=n5,L5=(t,s,n)=>{const r=new Map,o={platform:P5,...n},c={...o.platform,_c:r};return QI(t,s,{...o,platform:c})};var F5=typeof document<"u",$5=function(){},Ih=F5?m.useLayoutEffect:$5;function Qh(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,o;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!Qh(t[r],s[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,o[r]))return!1;for(r=n;r--!==0;){const c=o[r];if(!(c==="_owner"&&t.$$typeof)&&!Qh(t[c],s[c]))return!1}return!0}return t!==t&&s!==s}function h1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mj(t,s){const n=h1(t);return Math.round(s*n)/n}function Lx(t){const s=m.useRef(t);return Ih(()=>{s.current=t}),s}function z5(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:c,floating:u}={},transform:h=!0,whileElementsMounted:f,open:v}=t,[x,g]=m.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[j,w]=m.useState(r);Qh(j,r)||w(r);const[N,C]=m.useState(null),[S,E]=m.useState(null),_=m.useCallback(U=>{U!==F.current&&(F.current=U,C(U))},[]),k=m.useCallback(U=>{U!==O.current&&(O.current=U,E(U))},[]),T=c||N,M=u||S,F=m.useRef(null),O=m.useRef(null),Z=m.useRef(x),q=f!=null,$=Lx(f),X=Lx(o),I=Lx(v),B=m.useCallback(()=>{if(!F.current||!O.current)return;const U={placement:s,strategy:n,middleware:j};X.current&&(U.platform=X.current),L5(F.current,O.current,U).then(ne=>{const Q={...ne,isPositioned:I.current!==!1};te.current&&!Qh(Z.current,Q)&&(Z.current=Q,sd.flushSync(()=>{g(Q)}))})},[j,s,n,X,I]);Ih(()=>{v===!1&&Z.current.isPositioned&&(Z.current.isPositioned=!1,g(U=>({...U,isPositioned:!1})))},[v]);const te=m.useRef(!1);Ih(()=>(te.current=!0,()=>{te.current=!1}),[]),Ih(()=>{if(T&&(F.current=T),M&&(O.current=M),T&&M){if($.current)return $.current(T,M,B);B()}},[T,M,B,$,q]);const ue=m.useMemo(()=>({reference:F,floating:O,setReference:_,setFloating:k}),[_,k]),Y=m.useMemo(()=>({reference:T,floating:M}),[T,M]),ce=m.useMemo(()=>{const U={position:n,left:0,top:0};if(!Y.floating)return U;const ne=mj(Y.floating,x.x),Q=mj(Y.floating,x.y);return h?{...U,transform:"translate("+ne+"px, "+Q+"px)",...h1(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:Q}},[n,h,Y.floating,x.x,x.y]);return m.useMemo(()=>({...x,update:B,refs:ue,elements:Y,floatingStyles:ce}),[x,B,ue,Y,ce])}const B5=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?uj({element:r.current,padding:o}).fn(n):{}:r?uj({element:r,padding:o}).fn(n):{}}}},U5=(t,s)=>({...T5(t),options:[t,s]}),V5=(t,s)=>({...D5(t),options:[t,s]}),H5=(t,s)=>({...O5(t),options:[t,s]}),q5=(t,s)=>({...I5(t),options:[t,s]}),W5=(t,s)=>({...M5(t),options:[t,s]}),G5=(t,s)=>({...R5(t),options:[t,s]}),Z5=(t,s)=>({...B5(t),options:[t,s]});var K5="Arrow",p1=m.forwardRef((t,s)=>{const{children:n,width:r=10,height:o=5,...c}=t;return e.jsx(Tt.svg,{...c,ref:s,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});p1.displayName=K5;var Q5=p1;function A0(t){const[s,n]=m.useState(void 0);return Dn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let u,h;if("borderBoxSize"in c){const f=c.borderBoxSize,v=Array.isArray(f)?f[0]:f;u=v.inlineSize,h=v.blockSize}else u=t.offsetWidth,h=t.offsetHeight;n({width:u,height:h})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var P0="Popper",[f1,Ap]=Pa(P0),[X5,x1]=f1(P0),g1=t=>{const{__scopePopper:s,children:n}=t,[r,o]=m.useState(null);return e.jsx(X5,{scope:s,anchor:r,onAnchorChange:o,children:n})};g1.displayName=P0;var v1="PopperAnchor",y1=m.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...o}=t,c=x1(v1,n),u=m.useRef(null),h=ns(s,u),f=m.useRef(null);return m.useEffect(()=>{const v=f.current;f.current=r?.current||u.current,v!==f.current&&c.onAnchorChange(f.current)}),r?null:e.jsx(Tt.div,{...o,ref:h})});y1.displayName=v1;var E0="PopperContent",[Y5,J5]=f1(E0),b1=m.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:c="center",alignOffset:u=0,arrowPadding:h=0,avoidCollisions:f=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:g="partial",hideWhenDetached:j=!1,updatePositionStrategy:w="optimized",onPlaced:N,...C}=t,S=x1(E0,n),[E,_]=m.useState(null),k=ns(s,ae=>_(ae)),[T,M]=m.useState(null),F=A0(T),O=F?.width??0,Z=F?.height??0,q=r+(c!=="center"?"-"+c:""),$=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},X=Array.isArray(v)?v:[v],I=X.length>0,B={padding:$,boundary:X.filter(tM),altBoundary:I},{refs:te,floatingStyles:ue,placement:Y,isPositioned:ce,middlewareData:U}=z5({strategy:"fixed",placement:q,whileElementsMounted:(...ae)=>k5(...ae,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[U5({mainAxis:o+Z,alignmentAxis:u}),f&&V5({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?H5():void 0,...B}),f&&q5({...B}),W5({...B,apply:({elements:ae,rects:me,availableWidth:oe,availableHeight:Pe})=>{const{width:We,height:Je}=me.reference,tt=ae.floating.style;tt.setProperty("--radix-popper-available-width",`${oe}px`),tt.setProperty("--radix-popper-available-height",`${Pe}px`),tt.setProperty("--radix-popper-anchor-width",`${We}px`),tt.setProperty("--radix-popper-anchor-height",`${Je}px`)}}),T&&Z5({element:T,padding:h}),sM({arrowWidth:O,arrowHeight:Z}),j&&G5({strategy:"referenceHidden",...B})]}),[ne,Q]=w1(Y),z=Fn(N);Dn(()=>{ce&&z?.()},[ce,z]);const se=U.arrow?.x,G=U.arrow?.y,ee=U.arrow?.centerOffset!==0,[V,re]=m.useState();return Dn(()=>{E&&re(window.getComputedStyle(E).zIndex)},[E]),e.jsx("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ce?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:V,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Y5,{scope:n,placedSide:ne,onArrowChange:M,arrowX:se,arrowY:G,shouldHideArrow:ee,children:e.jsx(Tt.div,{"data-side":ne,"data-align":Q,...C,ref:k,style:{...C.style,animation:ce?void 0:"none"}})})})});b1.displayName=E0;var j1="PopperArrow",eM={top:"bottom",right:"left",bottom:"top",left:"right"},N1=m.forwardRef(function(s,n){const{__scopePopper:r,...o}=s,c=J5(j1,r),u=eM[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(Q5,{...o,ref:n,style:{...o.style,display:"block"}})})});N1.displayName=j1;function tM(t){return t!==null}var sM=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:o}=s,u=o.arrow?.centerOffset!==0,h=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[v,x]=w1(n),g={start:"0%",center:"50%",end:"100%"}[x],j=(o.arrow?.x??0)+h/2,w=(o.arrow?.y??0)+f/2;let N="",C="";return v==="bottom"?(N=u?g:`${j}px`,C=`${-f}px`):v==="top"?(N=u?g:`${j}px`,C=`${r.floating.height+f}px`):v==="right"?(N=`${-f}px`,C=u?g:`${w}px`):v==="left"&&(N=`${r.floating.width+f}px`,C=u?g:`${w}px`),{data:{x:N,y:C}}}});function w1(t){const[s,n="center"]=t.split("-");return[s,n]}var C1=g1,S1=y1,_1=b1,A1=N1,nM="Portal",Pp=m.forwardRef((t,s)=>{const{container:n,...r}=t,[o,c]=m.useState(!1);Dn(()=>c(!0),[]);const u=n||o&&globalThis?.document?.body;return u?ON.createPortal(e.jsx(Tt.div,{...r,ref:s}),u):null});Pp.displayName=nM;function aM(t){const s=rM(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(oM);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function rM(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=cM(o),h=lM(c,o.props);return o.type!==m.Fragment&&(h.ref=r?qi(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var iM=Symbol("radix.slottable");function oM(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===iM}function lM(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function cM(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var dM=Qg[" useInsertionEffect ".trim().toString()]||Dn;function hr({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,u]=uM({defaultProp:s,onChange:n}),h=t!==void 0,f=h?t:o;{const x=m.useRef(t!==void 0);m.useEffect(()=>{const g=x.current;g!==h&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=h},[h,r])}const v=m.useCallback(x=>{if(h){const g=mM(x)?x(t):x;g!==t&&u.current?.(g)}else c(x)},[h,t,c,u]);return[f,v]}function uM({defaultProp:t,onChange:s}){const[n,r]=m.useState(t),o=m.useRef(n),c=m.useRef(s);return dM(()=>{c.current=s},[s]),m.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function mM(t){return typeof t=="function"}function k0(t){const s=m.useRef({value:t,previous:t});return m.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var P1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hM="VisuallyHidden",pM=m.forwardRef((t,s)=>e.jsx(Tt.span,{...t,ref:s,style:{...P1,...t.style}}));pM.displayName=hM;var fM=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Dc=new WeakMap,oh=new WeakMap,lh={},Fx=0,E1=function(t){return t&&(t.host||E1(t.parentNode))},xM=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=E1(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},gM=function(t,s,n,r){var o=xM(s,Array.isArray(t)?t:[t]);lh[n]||(lh[n]=new WeakMap);var c=lh[n],u=[],h=new Set,f=new Set(o),v=function(g){!g||h.has(g)||(h.add(g),v(g.parentNode))};o.forEach(v);var x=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(j){if(h.has(j))x(j);else try{var w=j.getAttribute(r),N=w!==null&&w!=="false",C=(Dc.get(j)||0)+1,S=(c.get(j)||0)+1;Dc.set(j,C),c.set(j,S),u.push(j),C===1&&N&&oh.set(j,!0),S===1&&j.setAttribute(n,"true"),N||j.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",j,E)}})};return x(s),h.clear(),Fx++,function(){u.forEach(function(g){var j=Dc.get(g)-1,w=c.get(g)-1;Dc.set(g,j),c.set(g,w),j||(oh.has(g)||g.removeAttribute(r),oh.delete(g)),w||g.removeAttribute(n)}),Fx--,Fx||(Dc=new WeakMap,Dc=new WeakMap,oh=new WeakMap,lh={})}},T0=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=fM(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),gM(r,o,n,"aria-hidden")):function(){return null}},si=function(){return si=Object.assign||function(s){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},si.apply(this,arguments)};function k1(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)s.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function vM(t,s,n){if(n||arguments.length===2)for(var r=0,o=s.length,c;r<o;r++)(c||!(r in s))&&(c||(c=Array.prototype.slice.call(s,0,r)),c[r]=s[r]);return t.concat(c||Array.prototype.slice.call(s))}var Mh="right-scroll-bar-position",Rh="width-before-scroll-bar",yM="with-scroll-bars-hidden",bM="--removed-body-scroll-bar-size";function $x(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function jM(t,s){var n=m.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=s,n.facade}var NM=typeof window<"u"?m.useLayoutEffect:m.useEffect,hj=new WeakMap;function wM(t,s){var n=jM(null,function(r){return t.forEach(function(o){return $x(o,r)})});return NM(function(){var r=hj.get(n);if(r){var o=new Set(r),c=new Set(t),u=n.current;o.forEach(function(h){c.has(h)||$x(h,null)}),c.forEach(function(h){o.has(h)||$x(h,u)})}hj.set(n,t)},[t]),n}function CM(t){return t}function SM(t,s){s===void 0&&(s=CM);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var u=s(c,r);return n.push(u),function(){n=n.filter(function(h){return h!==u})}},assignSyncMedium:function(c){for(r=!0;n.length;){var u=n;n=[],u.forEach(c)}n={push:function(h){return c(h)},filter:function(){return n}}},assignMedium:function(c){r=!0;var u=[];if(n.length){var h=n;n=[],h.forEach(c),u=n}var f=function(){var x=u;u=[],x.forEach(c)},v=function(){return Promise.resolve().then(f)};v(),n={push:function(x){u.push(x),v()},filter:function(x){return u=u.filter(x),n}}}};return o}function _M(t){t===void 0&&(t={});var s=SM(null);return s.options=si({async:!0,ssr:!1},t),s}var T1=function(t){var s=t.sideCar,n=k1(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,si({},n))};T1.isSideCarExport=!0;function AM(t,s){return t.useMedium(s),T1}var D1=_M(),zx=function(){},Ep=m.forwardRef(function(t,s){var n=m.useRef(null),r=m.useState({onScrollCapture:zx,onWheelCapture:zx,onTouchMoveCapture:zx}),o=r[0],c=r[1],u=t.forwardProps,h=t.children,f=t.className,v=t.removeScrollBar,x=t.enabled,g=t.shards,j=t.sideCar,w=t.noRelative,N=t.noIsolation,C=t.inert,S=t.allowPinchZoom,E=t.as,_=E===void 0?"div":E,k=t.gapMode,T=k1(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=j,F=wM([n,s]),O=si(si({},T),o);return m.createElement(m.Fragment,null,x&&m.createElement(M,{sideCar:D1,removeScrollBar:v,shards:g,noRelative:w,noIsolation:N,inert:C,setCallbacks:c,allowPinchZoom:!!S,lockRef:n,gapMode:k}),u?m.cloneElement(m.Children.only(h),si(si({},O),{ref:F})):m.createElement(_,si({},O,{className:f,ref:F}),h))});Ep.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ep.classNames={fullWidth:Rh,zeroRight:Mh};var PM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=PM();return s&&t.setAttribute("nonce",s),t}function kM(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function TM(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var DM=function(){var t=0,s=null;return{add:function(n){t==0&&(s=EM())&&(kM(s,n),TM(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},IM=function(){var t=DM();return function(s,n){m.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},I1=function(){var t=IM(),s=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return s},MM={left:0,top:0,right:0,gap:0},Bx=function(t){return parseInt(t||"",10)||0},RM=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],o=s[t==="padding"?"paddingRight":"marginRight"];return[Bx(n),Bx(r),Bx(o)]},OM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return MM;var s=RM(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},LM=I1(),Zc="data-scroll-locked",FM=function(t,s,n,r){var o=t.left,c=t.top,u=t.right,h=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(yM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(Zc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mh,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(Rh,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(Mh," .").concat(Mh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rh," .").concat(Rh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Zc,`] {
    `).concat(bM,": ").concat(h,`px;
  }
`)},pj=function(){var t=parseInt(document.body.getAttribute(Zc)||"0",10);return isFinite(t)?t:0},$M=function(){m.useEffect(function(){return document.body.setAttribute(Zc,(pj()+1).toString()),function(){var t=pj()-1;t<=0?document.body.removeAttribute(Zc):document.body.setAttribute(Zc,t.toString())}},[])},zM=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;$M();var c=m.useMemo(function(){return OM(o)},[o]);return m.createElement(LM,{styles:FM(c,!s,o,n?"":"!important")})},Tg=!1;if(typeof window<"u")try{var ch=Object.defineProperty({},"passive",{get:function(){return Tg=!0,!0}});window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{Tg=!1}var Ic=Tg?{passive:!1}:!1,BM=function(t){return t.tagName==="TEXTAREA"},M1=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!BM(t)&&n[s]==="visible")},UM=function(t){return M1(t,"overflowY")},VM=function(t){return M1(t,"overflowX")},fj=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=R1(t,r);if(o){var c=O1(t,r),u=c[1],h=c[2];if(u>h)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},HM=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},qM=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},R1=function(t,s){return t==="v"?UM(s):VM(s)},O1=function(t,s){return t==="v"?HM(s):qM(s)},WM=function(t,s){return t==="h"&&s==="rtl"?-1:1},GM=function(t,s,n,r,o){var c=WM(t,window.getComputedStyle(s).direction),u=c*r,h=n.target,f=s.contains(h),v=!1,x=u>0,g=0,j=0;do{if(!h)break;var w=O1(t,h),N=w[0],C=w[1],S=w[2],E=C-S-c*N;(N||E)&&R1(t,h)&&(g+=E,j+=N);var _=h.parentNode;h=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!f&&h!==document.body||f&&(s.contains(h)||s===h));return(x&&Math.abs(g)<1||!x&&Math.abs(j)<1)&&(v=!0),v},dh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},xj=function(t){return[t.deltaX,t.deltaY]},gj=function(t){return t&&"current"in t?t.current:t},ZM=function(t,s){return t[0]===s[0]&&t[1]===s[1]},KM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},QM=0,Mc=[];function XM(t){var s=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),o=m.useState(QM++)[0],c=m.useState(I1)[0],u=m.useRef(t);m.useEffect(function(){u.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var C=vM([t.lockRef.current],(t.shards||[]).map(gj),!0).filter(Boolean);return C.forEach(function(S){return S.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),C.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var h=m.useCallback(function(C,S){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!u.current.allowPinchZoom;var E=dh(C),_=n.current,k="deltaX"in C?C.deltaX:_[0]-E[0],T="deltaY"in C?C.deltaY:_[1]-E[1],M,F=C.target,O=Math.abs(k)>Math.abs(T)?"h":"v";if("touches"in C&&O==="h"&&F.type==="range")return!1;var Z=window.getSelection(),q=Z&&Z.anchorNode,$=q?q===F||q.contains(F):!1;if($)return!1;var X=fj(O,F);if(!X)return!0;if(X?M=O:(M=O==="v"?"h":"v",X=fj(O,F)),!X)return!1;if(!r.current&&"changedTouches"in C&&(k||T)&&(r.current=M),!M)return!0;var I=r.current||M;return GM(I,S,C,I==="h"?k:T)},[]),f=m.useCallback(function(C){var S=C;if(!(!Mc.length||Mc[Mc.length-1]!==c)){var E="deltaY"in S?xj(S):dh(S),_=s.current.filter(function(M){return M.name===S.type&&(M.target===S.target||S.target===M.shadowParent)&&ZM(M.delta,E)})[0];if(_&&_.should){S.cancelable&&S.preventDefault();return}if(!_){var k=(u.current.shards||[]).map(gj).filter(Boolean).filter(function(M){return M.contains(S.target)}),T=k.length>0?h(S,k[0]):!u.current.noIsolation;T&&S.cancelable&&S.preventDefault()}}},[]),v=m.useCallback(function(C,S,E,_){var k={name:C,delta:S,target:E,should:_,shadowParent:YM(E)};s.current.push(k),setTimeout(function(){s.current=s.current.filter(function(T){return T!==k})},1)},[]),x=m.useCallback(function(C){n.current=dh(C),r.current=void 0},[]),g=m.useCallback(function(C){v(C.type,xj(C),C.target,h(C,t.lockRef.current))},[]),j=m.useCallback(function(C){v(C.type,dh(C),C.target,h(C,t.lockRef.current))},[]);m.useEffect(function(){return Mc.push(c),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:j}),document.addEventListener("wheel",f,Ic),document.addEventListener("touchmove",f,Ic),document.addEventListener("touchstart",x,Ic),function(){Mc=Mc.filter(function(C){return C!==c}),document.removeEventListener("wheel",f,Ic),document.removeEventListener("touchmove",f,Ic),document.removeEventListener("touchstart",x,Ic)}},[]);var w=t.removeScrollBar,N=t.inert;return m.createElement(m.Fragment,null,N?m.createElement(c,{styles:KM(o)}):null,w?m.createElement(zM,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function YM(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const JM=AM(D1,XM);var kp=m.forwardRef(function(t,s){return m.createElement(Ep,si({},t,{ref:s,sideCar:JM}))});kp.classNames=Ep.classNames;var eR=[" ","Enter","ArrowUp","ArrowDown"],tR=[" ","Enter"],Bl="Select",[Tp,Dp,sR]=y0(Bl),[dd]=Pa(Bl,[sR,Ap]),Ip=Ap(),[nR,Go]=dd(Bl),[aR,rR]=dd(Bl),L1=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:o,onOpenChange:c,value:u,defaultValue:h,onValueChange:f,dir:v,name:x,autoComplete:g,disabled:j,required:w,form:N}=t,C=Ip(s),[S,E]=m.useState(null),[_,k]=m.useState(null),[T,M]=m.useState(!1),F=od(v),[O,Z]=hr({prop:r,defaultProp:o??!1,onChange:c,caller:Bl}),[q,$]=hr({prop:u,defaultProp:h,onChange:f,caller:Bl}),X=m.useRef(null),I=S?N||!!S.closest("form"):!0,[B,te]=m.useState(new Set),ue=Array.from(B).map(Y=>Y.props.value).join(";");return e.jsx(C1,{...C,children:e.jsxs(nR,{required:w,scope:s,trigger:S,onTriggerChange:E,valueNode:_,onValueNodeChange:k,valueNodeHasChildren:T,onValueNodeHasChildrenChange:M,contentId:Ir(),value:q,onValueChange:$,open:O,onOpenChange:Z,dir:F,triggerPointerDownPosRef:X,disabled:j,children:[e.jsx(Tp.Provider,{scope:s,children:e.jsx(aR,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(Y=>{te(ce=>new Set(ce).add(Y))},[]),onNativeOptionRemove:m.useCallback(Y=>{te(ce=>{const U=new Set(ce);return U.delete(Y),U})},[]),children:n})}),I?e.jsxs(l2,{"aria-hidden":!0,required:w,tabIndex:-1,name:x,autoComplete:g,value:q,onChange:Y=>$(Y.target.value),disabled:j,form:N,children:[q===void 0?e.jsx("option",{value:""}):null,Array.from(B)]},ue):null]})})};L1.displayName=Bl;var F1="SelectTrigger",$1=m.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,c=Ip(n),u=Go(F1,n),h=u.disabled||r,f=ns(s,u.onTriggerChange),v=Dp(n),x=m.useRef("touch"),[g,j,w]=d2(C=>{const S=v().filter(k=>!k.disabled),E=S.find(k=>k.value===u.value),_=u2(S,C,E);_!==void 0&&u.onValueChange(_.value)}),N=C=>{h||(u.onOpenChange(!0),w()),C&&(u.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return e.jsx(S1,{asChild:!0,...c,children:e.jsx(Tt.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":c2(u.value)?"":void 0,...o,ref:f,onClick:lt(o.onClick,C=>{C.currentTarget.focus(),x.current!=="mouse"&&N(C)}),onPointerDown:lt(o.onPointerDown,C=>{x.current=C.pointerType;const S=C.target;S.hasPointerCapture(C.pointerId)&&S.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(N(C),C.preventDefault())}),onKeyDown:lt(o.onKeyDown,C=>{const S=g.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&j(C.key),!(S&&C.key===" ")&&eR.includes(C.key)&&(N(),C.preventDefault())})})})});$1.displayName=F1;var z1="SelectValue",B1=m.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:o,children:c,placeholder:u="",...h}=t,f=Go(z1,n),{onValueNodeHasChildrenChange:v}=f,x=c!==void 0,g=ns(s,f.onValueNodeChange);return Dn(()=>{v(x)},[v,x]),e.jsx(Tt.span,{...h,ref:g,style:{pointerEvents:"none"},children:c2(f.value)?e.jsx(e.Fragment,{children:u}):c})});B1.displayName=z1;var iR="SelectIcon",U1=m.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...o}=t;return e.jsx(Tt.span,{"aria-hidden":!0,...o,ref:s,children:r||""})});U1.displayName=iR;var oR="SelectPortal",V1=t=>e.jsx(Pp,{asChild:!0,...t});V1.displayName=oR;var Ul="SelectContent",H1=m.forwardRef((t,s)=>{const n=Go(Ul,t.__scopeSelect),[r,o]=m.useState();if(Dn(()=>{o(new DocumentFragment)},[]),!n.open){const c=r;return c?sd.createPortal(e.jsx(q1,{scope:t.__scopeSelect,children:e.jsx(Tp.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(W1,{...t,ref:s})});H1.displayName=Ul;var Pr=10,[q1,Zo]=dd(Ul),lR="SelectContentImpl",cR=aM("SelectContent.RemoveScroll"),W1=m.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:c,onPointerDownOutside:u,side:h,sideOffset:f,align:v,alignOffset:x,arrowPadding:g,collisionBoundary:j,collisionPadding:w,sticky:N,hideWhenDetached:C,avoidCollisions:S,...E}=t,_=Go(Ul,n),[k,T]=m.useState(null),[M,F]=m.useState(null),O=ns(s,ae=>T(ae)),[Z,q]=m.useState(null),[$,X]=m.useState(null),I=Dp(n),[B,te]=m.useState(!1),ue=m.useRef(!1);m.useEffect(()=>{if(k)return T0(k)},[k]),b0();const Y=m.useCallback(ae=>{const[me,...oe]=I().map(Je=>Je.ref.current),[Pe]=oe.slice(-1),We=document.activeElement;for(const Je of ae)if(Je===We||(Je?.scrollIntoView({block:"nearest"}),Je===me&&M&&(M.scrollTop=0),Je===Pe&&M&&(M.scrollTop=M.scrollHeight),Je?.focus(),document.activeElement!==We))return},[I,M]),ce=m.useCallback(()=>Y([Z,k]),[Y,Z,k]);m.useEffect(()=>{B&&ce()},[B,ce]);const{onOpenChange:U,triggerPointerDownPosRef:ne}=_;m.useEffect(()=>{if(k){let ae={x:0,y:0};const me=Pe=>{ae={x:Math.abs(Math.round(Pe.pageX)-(ne.current?.x??0)),y:Math.abs(Math.round(Pe.pageY)-(ne.current?.y??0))}},oe=Pe=>{ae.x<=10&&ae.y<=10?Pe.preventDefault():k.contains(Pe.target)||U(!1),document.removeEventListener("pointermove",me),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",oe,{capture:!0})}}},[k,U,ne]),m.useEffect(()=>{const ae=()=>U(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[U]);const[Q,z]=d2(ae=>{const me=I().filter(We=>!We.disabled),oe=me.find(We=>We.ref.current===document.activeElement),Pe=u2(me,ae,oe);Pe&&setTimeout(()=>Pe.ref.current.focus())}),se=m.useCallback((ae,me,oe)=>{const Pe=!ue.current&&!oe;(_.value!==void 0&&_.value===me||Pe)&&(q(ae),Pe&&(ue.current=!0))},[_.value]),G=m.useCallback(()=>k?.focus(),[k]),ee=m.useCallback((ae,me,oe)=>{const Pe=!ue.current&&!oe;(_.value!==void 0&&_.value===me||Pe)&&X(ae)},[_.value]),V=r==="popper"?Dg:G1,re=V===Dg?{side:h,sideOffset:f,align:v,alignOffset:x,arrowPadding:g,collisionBoundary:j,collisionPadding:w,sticky:N,hideWhenDetached:C,avoidCollisions:S}:{};return e.jsx(q1,{scope:n,content:k,viewport:M,onViewportChange:F,itemRefCallback:se,selectedItem:Z,onItemLeave:G,itemTextRefCallback:ee,focusSelectedItem:ce,selectedItemText:$,position:r,isPositioned:B,searchRef:Q,children:e.jsx(kp,{as:cR,allowPinchZoom:!0,children:e.jsx(Np,{asChild:!0,trapped:_.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:lt(o,ae=>{_.trigger?.focus({preventScroll:!0}),ae.preventDefault()}),children:e.jsx(jp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:e.jsx(V,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ae=>ae.preventDefault(),...E,...re,onPlaced:()=>te(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:lt(E.onKeyDown,ae=>{const me=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!me&&ae.key.length===1&&z(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Pe=I().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const We=ae.target,Je=Pe.indexOf(We);Pe=Pe.slice(Je+1)}setTimeout(()=>Y(Pe)),ae.preventDefault()}})})})})})})});W1.displayName=lR;var dR="SelectItemAlignedPosition",G1=m.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,c=Go(Ul,n),u=Zo(Ul,n),[h,f]=m.useState(null),[v,x]=m.useState(null),g=ns(s,O=>x(O)),j=Dp(n),w=m.useRef(!1),N=m.useRef(!0),{viewport:C,selectedItem:S,selectedItemText:E,focusSelectedItem:_}=u,k=m.useCallback(()=>{if(c.trigger&&c.valueNode&&h&&v&&C&&S&&E){const O=c.trigger.getBoundingClientRect(),Z=v.getBoundingClientRect(),q=c.valueNode.getBoundingClientRect(),$=E.getBoundingClientRect();if(c.dir!=="rtl"){const We=$.left-Z.left,Je=q.left-We,tt=O.left-Je,nt=O.width+tt,ct=Math.max(nt,Z.width),wt=window.innerWidth-Pr,pt=_g(Je,[Pr,Math.max(Pr,wt-ct)]);h.style.minWidth=nt+"px",h.style.left=pt+"px"}else{const We=Z.right-$.right,Je=window.innerWidth-q.right-We,tt=window.innerWidth-O.right-Je,nt=O.width+tt,ct=Math.max(nt,Z.width),wt=window.innerWidth-Pr,pt=_g(Je,[Pr,Math.max(Pr,wt-ct)]);h.style.minWidth=nt+"px",h.style.right=pt+"px"}const X=j(),I=window.innerHeight-Pr*2,B=C.scrollHeight,te=window.getComputedStyle(v),ue=parseInt(te.borderTopWidth,10),Y=parseInt(te.paddingTop,10),ce=parseInt(te.borderBottomWidth,10),U=parseInt(te.paddingBottom,10),ne=ue+Y+B+U+ce,Q=Math.min(S.offsetHeight*5,ne),z=window.getComputedStyle(C),se=parseInt(z.paddingTop,10),G=parseInt(z.paddingBottom,10),ee=O.top+O.height/2-Pr,V=I-ee,re=S.offsetHeight/2,ae=S.offsetTop+re,me=ue+Y+ae,oe=ne-me;if(me<=ee){const We=X.length>0&&S===X[X.length-1].ref.current;h.style.bottom="0px";const Je=v.clientHeight-C.offsetTop-C.offsetHeight,tt=Math.max(V,re+(We?G:0)+Je+ce),nt=me+tt;h.style.height=nt+"px"}else{const We=X.length>0&&S===X[0].ref.current;h.style.top="0px";const tt=Math.max(ee,ue+C.offsetTop+(We?se:0)+re)+oe;h.style.height=tt+"px",C.scrollTop=me-ee+C.offsetTop}h.style.margin=`${Pr}px 0`,h.style.minHeight=Q+"px",h.style.maxHeight=I+"px",r?.(),requestAnimationFrame(()=>w.current=!0)}},[j,c.trigger,c.valueNode,h,v,C,S,E,c.dir,r]);Dn(()=>k(),[k]);const[T,M]=m.useState();Dn(()=>{v&&M(window.getComputedStyle(v).zIndex)},[v]);const F=m.useCallback(O=>{O&&N.current===!0&&(k(),_?.(),N.current=!1)},[k,_]);return e.jsx(mR,{scope:n,contentWrapper:h,shouldExpandOnScrollRef:w,onScrollButtonChange:F,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:e.jsx(Tt.div,{...o,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});G1.displayName=dR;var uR="SelectPopperPosition",Dg=m.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Pr,...c}=t,u=Ip(n);return e.jsx(_1,{...u,...c,ref:s,align:r,collisionPadding:o,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dg.displayName=uR;var[mR,D0]=dd(Ul,{}),Ig="SelectViewport",Z1=m.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...o}=t,c=Zo(Ig,n),u=D0(Ig,n),h=ns(s,c.onViewportChange),f=m.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Tp.Slot,{scope:n,children:e.jsx(Tt.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:lt(o.onScroll,v=>{const x=v.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:j}=u;if(j?.current&&g){const w=Math.abs(f.current-x.scrollTop);if(w>0){const N=window.innerHeight-Pr*2,C=parseFloat(g.style.minHeight),S=parseFloat(g.style.height),E=Math.max(C,S);if(E<N){const _=E+w,k=Math.min(N,_),T=_-k;g.style.height=k+"px",g.style.bottom==="0px"&&(x.scrollTop=T>0?T:0,g.style.justifyContent="flex-end")}}}f.current=x.scrollTop})})})]})});Z1.displayName=Ig;var K1="SelectGroup",[hR,pR]=dd(K1),Q1=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=Ir();return e.jsx(hR,{scope:n,id:o,children:e.jsx(Tt.div,{role:"group","aria-labelledby":o,...r,ref:s})})});Q1.displayName=K1;var X1="SelectLabel",Y1=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=pR(X1,n);return e.jsx(Tt.div,{id:o.id,...r,ref:s})});Y1.displayName=X1;var Xh="SelectItem",[fR,J1]=dd(Xh),e2=m.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:c,...u}=t,h=Go(Xh,n),f=Zo(Xh,n),v=h.value===r,[x,g]=m.useState(c??""),[j,w]=m.useState(!1),N=ns(s,_=>f.itemRefCallback?.(_,r,o)),C=Ir(),S=m.useRef("touch"),E=()=>{o||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(fR,{scope:n,value:r,disabled:o,textId:C,isSelected:v,onItemTextChange:m.useCallback(_=>{g(k=>k||(_?.textContent??"").trim())},[]),children:e.jsx(Tp.ItemSlot,{scope:n,value:r,disabled:o,textValue:x,children:e.jsx(Tt.div,{role:"option","aria-labelledby":C,"data-highlighted":j?"":void 0,"aria-selected":v&&j,"data-state":v?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...u,ref:N,onFocus:lt(u.onFocus,()=>w(!0)),onBlur:lt(u.onBlur,()=>w(!1)),onClick:lt(u.onClick,()=>{S.current!=="mouse"&&E()}),onPointerUp:lt(u.onPointerUp,()=>{S.current==="mouse"&&E()}),onPointerDown:lt(u.onPointerDown,_=>{S.current=_.pointerType}),onPointerMove:lt(u.onPointerMove,_=>{S.current=_.pointerType,o?f.onItemLeave?.():S.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lt(u.onPointerLeave,_=>{_.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:lt(u.onKeyDown,_=>{f.searchRef?.current!==""&&_.key===" "||(tR.includes(_.key)&&E(),_.key===" "&&_.preventDefault())})})})})});e2.displayName=Xh;var mu="SelectItemText",t2=m.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:o,...c}=t,u=Go(mu,n),h=Zo(mu,n),f=J1(mu,n),v=rR(mu,n),[x,g]=m.useState(null),j=ns(s,E=>g(E),f.onItemTextChange,E=>h.itemTextRefCallback?.(E,f.value,f.disabled)),w=x?.textContent,N=m.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:w},f.value),[f.disabled,f.value,w]),{onNativeOptionAdd:C,onNativeOptionRemove:S}=v;return Dn(()=>(C(N),()=>S(N)),[C,S,N]),e.jsxs(e.Fragment,{children:[e.jsx(Tt.span,{id:f.textId,...c,ref:j}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?sd.createPortal(c.children,u.valueNode):null]})});t2.displayName=mu;var s2="SelectItemIndicator",n2=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return J1(s2,n).isSelected?e.jsx(Tt.span,{"aria-hidden":!0,...r,ref:s}):null});n2.displayName=s2;var Mg="SelectScrollUpButton",a2=m.forwardRef((t,s)=>{const n=Zo(Mg,t.__scopeSelect),r=D0(Mg,t.__scopeSelect),[o,c]=m.useState(!1),u=ns(s,r.onScrollButtonChange);return Dn(()=>{if(n.viewport&&n.isPositioned){let h=function(){const v=f.scrollTop>0;c(v)};const f=n.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[n.viewport,n.isPositioned]),o?e.jsx(i2,{...t,ref:u,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=n;h&&f&&(h.scrollTop=h.scrollTop-f.offsetHeight)}}):null});a2.displayName=Mg;var Rg="SelectScrollDownButton",r2=m.forwardRef((t,s)=>{const n=Zo(Rg,t.__scopeSelect),r=D0(Rg,t.__scopeSelect),[o,c]=m.useState(!1),u=ns(s,r.onScrollButtonChange);return Dn(()=>{if(n.viewport&&n.isPositioned){let h=function(){const v=f.scrollHeight-f.clientHeight,x=Math.ceil(f.scrollTop)<v;c(x)};const f=n.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[n.viewport,n.isPositioned]),o?e.jsx(i2,{...t,ref:u,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=n;h&&f&&(h.scrollTop=h.scrollTop+f.offsetHeight)}}):null});r2.displayName=Rg;var i2=m.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,c=Zo("SelectScrollButton",n),u=m.useRef(null),h=Dp(n),f=m.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return m.useEffect(()=>()=>f(),[f]),Dn(()=>{h().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[h]),e.jsx(Tt.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:lt(o.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:lt(o.onPointerMove,()=>{c.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:lt(o.onPointerLeave,()=>{f()})})}),xR="SelectSeparator",o2=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(Tt.div,{"aria-hidden":!0,...r,ref:s})});o2.displayName=xR;var Og="SelectArrow",gR=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=Ip(n),c=Go(Og,n),u=Zo(Og,n);return c.open&&u.position==="popper"?e.jsx(A1,{...o,...r,ref:s}):null});gR.displayName=Og;var vR="SelectBubbleInput",l2=m.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const o=m.useRef(null),c=ns(r,o),u=k0(s);return m.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==s&&x){const g=new Event("change",{bubbles:!0});x.call(h,s),h.dispatchEvent(g)}},[u,s]),e.jsx(Tt.select,{...n,style:{...P1,...n.style},ref:c,defaultValue:s})});l2.displayName=vR;function c2(t){return t===""||t===void 0}function d2(t){const s=Fn(t),n=m.useRef(""),r=m.useRef(0),o=m.useCallback(u=>{const h=n.current+u;s(h),(function f(v){n.current=v,window.clearTimeout(r.current),v!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(h)},[s]),c=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,c]}function u2(t,s,n){const o=s.length>1&&Array.from(s).every(v=>v===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let u=yR(t,Math.max(c,0));o.length===1&&(u=u.filter(v=>v!==n));const f=u.find(v=>v.textValue.toLowerCase().startsWith(o.toLowerCase()));return f!==n?f:void 0}function yR(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var bR=L1,jR=$1,NR=B1,wR=U1,CR=V1,SR=H1,_R=Z1,AR=Q1,PR=Y1,ER=e2,kR=t2,TR=n2,DR=a2,IR=r2,MR=o2;function _t({...t}){return e.jsx(bR,{"data-slot":"select",...t})}function RR({...t}){return e.jsx(AR,{"data-slot":"select-group",...t})}function At({...t}){return e.jsx(NR,{"data-slot":"select-value",...t})}function Pt({className:t,size:s="default",children:n,...r}){return e.jsxs(jR,{"data-slot":"select-trigger","data-size":s,className:Nt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,e.jsx(wR,{asChild:!0,children:e.jsx(Ru,{className:"size-4 opacity-50"})})]})}function Et({className:t,children:s,position:n="popper",...r}){return e.jsx(CR,{children:e.jsxs(SR,{"data-slot":"select-content",className:Nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(LR,{}),e.jsx(_R,{className:Nt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(FR,{})]})})}function OR({className:t,...s}){return e.jsx(PR,{"data-slot":"select-label",className:Nt("text-muted-foreground px-2 py-1.5 text-xs",t),...s})}function Oe({className:t,children:s,...n}){return e.jsxs(ER,{"data-slot":"select-item",className:Nt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(TR,{children:e.jsx(wa,{className:"size-4"})})}),e.jsx(kR,{children:s})]})}function vj({className:t,...s}){return e.jsx(MR,{"data-slot":"select-separator",className:Nt("bg-border pointer-events-none -mx-1 my-1 h-px",t),...s})}function LR({className:t,...s}){return e.jsx(DR,{"data-slot":"select-scroll-up-button",className:Nt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(yw,{className:"size-4"})})}function FR({className:t,...s}){return e.jsx(IR,{"data-slot":"select-scroll-down-button",className:Nt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ru,{className:"size-4"})})}function $R(t,s){return m.useReducer((n,r)=>s[n][r]??n,t)}var oa=t=>{const{present:s,children:n}=t,r=zR(s),o=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),c=ns(r.ref,BR(o));return typeof n=="function"||r.isPresent?m.cloneElement(o,{ref:c}):null};oa.displayName="Presence";function zR(t){const[s,n]=m.useState(),r=m.useRef(null),o=m.useRef(t),c=m.useRef("none"),u=t?"mounted":"unmounted",[h,f]=$R(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const v=uh(r.current);c.current=h==="mounted"?v:"none"},[h]),Dn(()=>{const v=r.current,x=o.current;if(x!==t){const j=c.current,w=uh(v);t?f("MOUNT"):w==="none"||v?.display==="none"?f("UNMOUNT"):f(x&&j!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,f]),Dn(()=>{if(s){let v;const x=s.ownerDocument.defaultView??window,g=w=>{const C=uh(r.current).includes(CSS.escape(w.animationName));if(w.target===s&&C&&(f("ANIMATION_END"),!o.current)){const S=s.style.animationFillMode;s.style.animationFillMode="forwards",v=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=S)})}},j=w=>{w.target===s&&(c.current=uh(r.current))};return s.addEventListener("animationstart",j),s.addEventListener("animationcancel",g),s.addEventListener("animationend",g),()=>{x.clearTimeout(v),s.removeEventListener("animationstart",j),s.removeEventListener("animationcancel",g),s.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:m.useCallback(v=>{r.current=v?getComputedStyle(v):null,n(v)},[])}}function uh(t){return t?.animationName||"none"}function BR(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function UR(t){const s=VR(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(qR);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function VR(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=GR(o),h=WR(c,o.props);return o.type!==m.Fragment&&(h.ref=r?qi(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var HR=Symbol("radix.slottable");function qR(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===HR}function WR(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function GR(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Mp="Dialog",[m2,h2]=Pa(Mp),[ZR,Fr]=m2(Mp),p2=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:o,onOpenChange:c,modal:u=!0}=t,h=m.useRef(null),f=m.useRef(null),[v,x]=hr({prop:r,defaultProp:o??!1,onChange:c,caller:Mp});return e.jsx(ZR,{scope:s,triggerRef:h,contentRef:f,contentId:Ir(),titleId:Ir(),descriptionId:Ir(),open:v,onOpenChange:x,onOpenToggle:m.useCallback(()=>x(g=>!g),[x]),modal:u,children:n})};p2.displayName=Mp;var f2="DialogTrigger",x2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Fr(f2,n),c=ns(s,o.triggerRef);return e.jsx(Tt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":R0(o.open),...r,ref:c,onClick:lt(t.onClick,o.onOpenToggle)})});x2.displayName=f2;var I0="DialogPortal",[KR,g2]=m2(I0,{forceMount:void 0}),v2=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:o}=t,c=Fr(I0,s);return e.jsx(KR,{scope:s,forceMount:n,children:m.Children.map(r,u=>e.jsx(oa,{present:n||c.open,children:e.jsx(Pp,{asChild:!0,container:o,children:u})}))})};v2.displayName=I0;var Yh="DialogOverlay",y2=m.forwardRef((t,s)=>{const n=g2(Yh,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,c=Fr(Yh,t.__scopeDialog);return c.modal?e.jsx(oa,{present:r||c.open,children:e.jsx(XR,{...o,ref:s})}):null});y2.displayName=Yh;var QR=UR("DialogOverlay.RemoveScroll"),XR=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Fr(Yh,n);return e.jsx(kp,{as:QR,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(Tt.div,{"data-state":R0(o.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),Vl="DialogContent",b2=m.forwardRef((t,s)=>{const n=g2(Vl,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,c=Fr(Vl,t.__scopeDialog);return e.jsx(oa,{present:r||c.open,children:c.modal?e.jsx(YR,{...o,ref:s}):e.jsx(JR,{...o,ref:s})})});b2.displayName=Vl;var YR=m.forwardRef((t,s)=>{const n=Fr(Vl,t.__scopeDialog),r=m.useRef(null),o=ns(s,n.contentRef,r);return m.useEffect(()=>{const c=r.current;if(c)return T0(c)},[]),e.jsx(j2,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:lt(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0;(u.button===2||h)&&c.preventDefault()}),onFocusOutside:lt(t.onFocusOutside,c=>c.preventDefault())})}),JR=m.forwardRef((t,s)=>{const n=Fr(Vl,t.__scopeDialog),r=m.useRef(!1),o=m.useRef(!1);return e.jsx(j2,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(r.current||n.triggerRef.current?.focus(),c.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(r.current=!0,c.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=c.target;n.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.current&&c.preventDefault()}})}),j2=m.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:c,...u}=t,h=Fr(Vl,n),f=m.useRef(null),v=ns(s,f);return b0(),e.jsxs(e.Fragment,{children:[e.jsx(Np,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:c,children:e.jsx(jp,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":R0(h.open),...u,ref:v,onDismiss:()=>h.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(t3,{titleId:h.titleId}),e.jsx(n3,{contentRef:f,descriptionId:h.descriptionId})]})]})}),M0="DialogTitle",N2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Fr(M0,n);return e.jsx(Tt.h2,{id:o.titleId,...r,ref:s})});N2.displayName=M0;var w2="DialogDescription",C2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Fr(w2,n);return e.jsx(Tt.p,{id:o.descriptionId,...r,ref:s})});C2.displayName=w2;var S2="DialogClose",_2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Fr(S2,n);return e.jsx(Tt.button,{type:"button",...r,ref:s,onClick:lt(t.onClick,()=>o.onOpenChange(!1))})});_2.displayName=S2;function R0(t){return t?"open":"closed"}var A2="DialogTitleWarning",[e3,P2]=oI(A2,{contentName:Vl,titleName:M0,docsSlug:"dialog"}),t3=({titleId:t})=>{const s=P2(A2),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},s3="DialogDescriptionWarning",n3=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${P2(s3).contentName}}.`;return m.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},O0=p2,a3=x2,L0=v2,zu=y2,F0=b2,$0=N2,z0=C2,Rp=_2;function _s({...t}){return e.jsx(O0,{"data-slot":"dialog",...t})}function r3({...t}){return e.jsx(L0,{"data-slot":"dialog-portal",...t})}const E2=m.forwardRef(({className:t,...s},n)=>e.jsx(zu,{ref:n,"data-slot":"dialog-overlay",className:Nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));E2.displayName=zu.displayName;function As({className:t,children:s,...n}){return e.jsxs(r3,{"data-slot":"dialog-portal",children:[e.jsx(E2,{}),e.jsxs(F0,{"data-slot":"dialog-content",className:Nt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(Rp,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ca,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Rs({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:Nt("flex flex-col gap-2 text-center sm:text-left",t),...s})}function B0({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:Nt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Os({className:t,...s}){return e.jsx($0,{"data-slot":"dialog-title",className:Nt("text-lg leading-none font-semibold",t),...s})}function dr({className:t,...s}){return e.jsx(z0,{"data-slot":"dialog-description",className:Nt("text-muted-foreground text-sm",t),...s})}var Op="Checkbox",[i3]=Pa(Op),[o3,U0]=i3(Op);function l3(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:o,disabled:c,form:u,name:h,onCheckedChange:f,required:v,value:x="on",internal_do_not_use_render:g}=t,[j,w]=hr({prop:n,defaultProp:o??!1,onChange:f,caller:Op}),[N,C]=m.useState(null),[S,E]=m.useState(null),_=m.useRef(!1),k=N?!!u||!!N.closest("form"):!0,T={checked:j,disabled:c,setChecked:w,control:N,setControl:C,name:h,form:u,value:x,hasConsumerStoppedPropagationRef:_,required:v,defaultChecked:$o(o)?!1:o,isFormControl:k,bubbleInput:S,setBubbleInput:E};return e.jsx(o3,{scope:s,...T,children:c3(g)?g(T):r})}var k2="CheckboxTrigger",T2=m.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},o)=>{const{control:c,value:u,disabled:h,checked:f,required:v,setControl:x,setChecked:g,hasConsumerStoppedPropagationRef:j,isFormControl:w,bubbleInput:N}=U0(k2,t),C=ns(o,x),S=m.useRef(f);return m.useEffect(()=>{const E=c?.form;if(E){const _=()=>g(S.current);return E.addEventListener("reset",_),()=>E.removeEventListener("reset",_)}},[c,g]),e.jsx(Tt.button,{type:"button",role:"checkbox","aria-checked":$o(f)?"mixed":f,"aria-required":v,"data-state":L2(f),"data-disabled":h?"":void 0,disabled:h,value:u,...r,ref:C,onKeyDown:lt(s,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:lt(n,E=>{g(_=>$o(_)?!0:!_),N&&w&&(j.current=E.isPropagationStopped(),j.current||E.stopPropagation())})})});T2.displayName=k2;var D2=m.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:c,required:u,disabled:h,value:f,onCheckedChange:v,form:x,...g}=t;return e.jsx(l3,{__scopeCheckbox:n,checked:o,defaultChecked:c,disabled:h,required:u,onCheckedChange:v,name:r,form:x,value:f,internal_do_not_use_render:({isFormControl:j})=>e.jsxs(e.Fragment,{children:[e.jsx(T2,{...g,ref:s,__scopeCheckbox:n}),j&&e.jsx(O2,{__scopeCheckbox:n})]})})});D2.displayName=Op;var I2="CheckboxIndicator",M2=m.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...o}=t,c=U0(I2,n);return e.jsx(oa,{present:r||$o(c.checked)||c.checked===!0,children:e.jsx(Tt.span,{"data-state":L2(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...t.style}})})});M2.displayName=I2;var R2="CheckboxBubbleInput",O2=m.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:u,required:h,disabled:f,name:v,value:x,form:g,bubbleInput:j,setBubbleInput:w}=U0(R2,t),N=ns(n,w),C=k0(c),S=A0(r);m.useEffect(()=>{const _=j;if(!_)return;const k=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(k,"checked").set,F=!o.current;if(C!==c&&M){const O=new Event("click",{bubbles:F});_.indeterminate=$o(c),M.call(_,$o(c)?!1:c),_.dispatchEvent(O)}},[j,C,c,o]);const E=m.useRef($o(c)?!1:c);return e.jsx(Tt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??E.current,required:h,disabled:f,name:v,value:x,form:g,...s,tabIndex:-1,ref:N,style:{...s.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});O2.displayName=R2;function c3(t){return typeof t=="function"}function $o(t){return t==="indeterminate"}function L2(t){return $o(t)?"indeterminate":t?"checked":"unchecked"}function qa({className:t,...s}){return e.jsx(D2,{"data-slot":"checkbox",className:Nt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(M2,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(wa,{className:"size-3.5"})})})}function d3(t,s){return m.useReducer((n,r)=>s[n][r]??n,t)}var V0="ScrollArea",[F2]=Pa(V0),[u3,pr]=F2(V0),$2=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:c=600,...u}=t,[h,f]=m.useState(null),[v,x]=m.useState(null),[g,j]=m.useState(null),[w,N]=m.useState(null),[C,S]=m.useState(null),[E,_]=m.useState(0),[k,T]=m.useState(0),[M,F]=m.useState(!1),[O,Z]=m.useState(!1),q=ns(s,X=>f(X)),$=od(o);return e.jsx(u3,{scope:n,type:r,dir:$,scrollHideDelay:c,scrollArea:h,viewport:v,onViewportChange:x,content:g,onContentChange:j,scrollbarX:w,onScrollbarXChange:N,scrollbarXEnabled:M,onScrollbarXEnabledChange:F,scrollbarY:C,onScrollbarYChange:S,scrollbarYEnabled:O,onScrollbarYEnabledChange:Z,onCornerWidthChange:_,onCornerHeightChange:T,children:e.jsx(Tt.div,{dir:$,...u,ref:q,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":k+"px",...t.style}})})});$2.displayName=V0;var z2="ScrollAreaViewport",B2=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:r,nonce:o,...c}=t,u=pr(z2,n),h=m.useRef(null),f=ns(s,h,u.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(Tt.div,{"data-radix-scroll-area-viewport":"",...c,ref:f,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});B2.displayName=z2;var fi="ScrollAreaScrollbar",U2=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=pr(fi,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:u}=o,h=t.orientation==="horizontal";return m.useEffect(()=>(h?c(!0):u(!0),()=>{h?c(!1):u(!1)}),[h,c,u]),o.type==="hover"?e.jsx(m3,{...r,ref:s,forceMount:n}):o.type==="scroll"?e.jsx(h3,{...r,ref:s,forceMount:n}):o.type==="auto"?e.jsx(V2,{...r,ref:s,forceMount:n}):o.type==="always"?e.jsx(H0,{...r,ref:s}):null});U2.displayName=fi;var m3=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=pr(fi,t.__scopeScrollArea),[c,u]=m.useState(!1);return m.useEffect(()=>{const h=o.scrollArea;let f=0;if(h){const v=()=>{window.clearTimeout(f),u(!0)},x=()=>{f=window.setTimeout(()=>u(!1),o.scrollHideDelay)};return h.addEventListener("pointerenter",v),h.addEventListener("pointerleave",x),()=>{window.clearTimeout(f),h.removeEventListener("pointerenter",v),h.removeEventListener("pointerleave",x)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(oa,{present:n||c,children:e.jsx(V2,{"data-state":c?"visible":"hidden",...r,ref:s})})}),h3=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=pr(fi,t.__scopeScrollArea),c=t.orientation==="horizontal",u=Fp(()=>f("SCROLL_END"),100),[h,f]=d3("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(h==="idle"){const v=window.setTimeout(()=>f("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(v)}},[h,o.scrollHideDelay,f]),m.useEffect(()=>{const v=o.viewport,x=c?"scrollLeft":"scrollTop";if(v){let g=v[x];const j=()=>{const w=v[x];g!==w&&(f("SCROLL"),u()),g=w};return v.addEventListener("scroll",j),()=>v.removeEventListener("scroll",j)}},[o.viewport,c,f,u]),e.jsx(oa,{present:n||h!=="hidden",children:e.jsx(H0,{"data-state":h==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:lt(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:lt(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),V2=m.forwardRef((t,s)=>{const n=pr(fi,t.__scopeScrollArea),{forceMount:r,...o}=t,[c,u]=m.useState(!1),h=t.orientation==="horizontal",f=Fp(()=>{if(n.viewport){const v=n.viewport.offsetWidth<n.viewport.scrollWidth,x=n.viewport.offsetHeight<n.viewport.scrollHeight;u(h?v:x)}},10);return td(n.viewport,f),td(n.content,f),e.jsx(oa,{present:r||c,children:e.jsx(H0,{"data-state":c?"visible":"hidden",...o,ref:s})})}),H0=m.forwardRef((t,s)=>{const{orientation:n="vertical",...r}=t,o=pr(fi,t.__scopeScrollArea),c=m.useRef(null),u=m.useRef(0),[h,f]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),v=Z2(h.viewport,h.content),x={...r,sizes:h,onSizesChange:f,hasThumb:v>0&&v<1,onThumbChange:j=>c.current=j,onThumbPointerUp:()=>u.current=0,onThumbPointerDown:j=>u.current=j};function g(j,w){return y3(j,u.current,h,w)}return n==="horizontal"?e.jsx(p3,{...x,ref:s,onThumbPositionChange:()=>{if(o.viewport&&c.current){const j=o.viewport.scrollLeft,w=yj(j,h,o.dir);c.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:j=>{o.viewport&&(o.viewport.scrollLeft=j)},onDragScroll:j=>{o.viewport&&(o.viewport.scrollLeft=g(j,o.dir))}}):n==="vertical"?e.jsx(f3,{...x,ref:s,onThumbPositionChange:()=>{if(o.viewport&&c.current){const j=o.viewport.scrollTop,w=yj(j,h);c.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:j=>{o.viewport&&(o.viewport.scrollTop=j)},onDragScroll:j=>{o.viewport&&(o.viewport.scrollTop=g(j))}}):null}),p3=m.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...o}=t,c=pr(fi,t.__scopeScrollArea),[u,h]=m.useState(),f=m.useRef(null),v=ns(s,f,c.onScrollbarXChange);return m.useEffect(()=>{f.current&&h(getComputedStyle(f.current))},[f]),e.jsx(q2,{"data-orientation":"horizontal",...o,ref:v,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Lp(n)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,g)=>{if(c.viewport){const j=c.viewport.scrollLeft+x.deltaX;t.onWheelScroll(j),Q2(j,g)&&x.preventDefault()}},onResize:()=>{f.current&&c.viewport&&u&&r({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:ep(u.paddingLeft),paddingEnd:ep(u.paddingRight)}})}})}),f3=m.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...o}=t,c=pr(fi,t.__scopeScrollArea),[u,h]=m.useState(),f=m.useRef(null),v=ns(s,f,c.onScrollbarYChange);return m.useEffect(()=>{f.current&&h(getComputedStyle(f.current))},[f]),e.jsx(q2,{"data-orientation":"vertical",...o,ref:v,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Lp(n)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,g)=>{if(c.viewport){const j=c.viewport.scrollTop+x.deltaY;t.onWheelScroll(j),Q2(j,g)&&x.preventDefault()}},onResize:()=>{f.current&&c.viewport&&u&&r({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:ep(u.paddingTop),paddingEnd:ep(u.paddingBottom)}})}})}),[x3,H2]=F2(fi),q2=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:h,onThumbPositionChange:f,onDragScroll:v,onWheelScroll:x,onResize:g,...j}=t,w=pr(fi,n),[N,C]=m.useState(null),S=ns(s,q=>C(q)),E=m.useRef(null),_=m.useRef(""),k=w.viewport,T=r.content-r.viewport,M=Fn(x),F=Fn(f),O=Fp(g,10);function Z(q){if(E.current){const $=q.clientX-E.current.left,X=q.clientY-E.current.top;v({x:$,y:X})}}return m.useEffect(()=>{const q=$=>{const X=$.target;N?.contains(X)&&M($,T)};return document.addEventListener("wheel",q,{passive:!1}),()=>document.removeEventListener("wheel",q,{passive:!1})},[k,N,T,M]),m.useEffect(F,[r,F]),td(N,O),td(w.content,O),e.jsx(x3,{scope:n,scrollbar:N,hasThumb:o,onThumbChange:Fn(c),onThumbPointerUp:Fn(u),onThumbPositionChange:F,onThumbPointerDown:Fn(h),children:e.jsx(Tt.div,{...j,ref:S,style:{position:"absolute",...j.style},onPointerDown:lt(t.onPointerDown,q=>{q.button===0&&(q.target.setPointerCapture(q.pointerId),E.current=N.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),Z(q))}),onPointerMove:lt(t.onPointerMove,Z),onPointerUp:lt(t.onPointerUp,q=>{const $=q.target;$.hasPointerCapture(q.pointerId)&&$.releasePointerCapture(q.pointerId),document.body.style.webkitUserSelect=_.current,w.viewport&&(w.viewport.style.scrollBehavior=""),E.current=null})})})}),Jh="ScrollAreaThumb",W2=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=H2(Jh,t.__scopeScrollArea);return e.jsx(oa,{present:n||o.hasThumb,children:e.jsx(g3,{ref:s,...r})})}),g3=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:r,...o}=t,c=pr(Jh,n),u=H2(Jh,n),{onThumbPositionChange:h}=u,f=ns(s,g=>u.onThumbChange(g)),v=m.useRef(void 0),x=Fp(()=>{v.current&&(v.current(),v.current=void 0)},100);return m.useEffect(()=>{const g=c.viewport;if(g){const j=()=>{if(x(),!v.current){const w=b3(g,h);v.current=w,h()}};return h(),g.addEventListener("scroll",j),()=>g.removeEventListener("scroll",j)}},[c.viewport,x,h]),e.jsx(Tt.div,{"data-state":u.hasThumb?"visible":"hidden",...o,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:lt(t.onPointerDownCapture,g=>{const w=g.target.getBoundingClientRect(),N=g.clientX-w.left,C=g.clientY-w.top;u.onThumbPointerDown({x:N,y:C})}),onPointerUp:lt(t.onPointerUp,u.onThumbPointerUp)})});W2.displayName=Jh;var q0="ScrollAreaCorner",G2=m.forwardRef((t,s)=>{const n=pr(q0,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?e.jsx(v3,{...t,ref:s}):null});G2.displayName=q0;var v3=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,...r}=t,o=pr(q0,n),[c,u]=m.useState(0),[h,f]=m.useState(0),v=!!(c&&h);return td(o.scrollbarX,()=>{const x=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(x),f(x)}),td(o.scrollbarY,()=>{const x=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(x),u(x)}),v?e.jsx(Tt.div,{...r,ref:s,style:{width:c,height:h,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function ep(t){return t?parseInt(t,10):0}function Z2(t,s){const n=t/s;return isNaN(n)?0:n}function Lp(t){const s=Z2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*s;return Math.max(r,18)}function y3(t,s,n,r="ltr"){const o=Lp(n),c=o/2,u=s||c,h=o-u,f=n.scrollbar.paddingStart+u,v=n.scrollbar.size-n.scrollbar.paddingEnd-h,x=n.content-n.viewport,g=r==="ltr"?[0,x]:[x*-1,0];return K2([f,v],g)(t)}function yj(t,s,n="ltr"){const r=Lp(s),o=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,c=s.scrollbar.size-o,u=s.content-s.viewport,h=c-r,f=n==="ltr"?[0,u]:[u*-1,0],v=_g(t,f);return K2([0,u],[0,h])(v)}function K2(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(n-t[0])}}function Q2(t,s){return t>0&&t<s}var b3=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function o(){const c={left:t.scrollLeft,top:t.scrollTop},u=n.left!==c.left,h=n.top!==c.top;(u||h)&&s(),n=c,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function Fp(t,s){const n=Fn(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,s)},[n,s])}function td(t,s){const n=Fn(s);Dn(()=>{let r=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(r),o.unobserve(t)}}},[t,n])}var j3=$2,N3=B2,w3=G2;function Ml({className:t,children:s,...n}){return e.jsxs(j3,{"data-slot":"scroll-area",className:Nt("relative overflow-hidden",t),...n,children:[e.jsx(N3,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(C3,{}),e.jsx(w3,{})]})}function C3({className:t,orientation:s="vertical",...n}){return e.jsx(U2,{"data-slot":"scroll-area-scrollbar",orientation:s,className:Nt("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(W2,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const S3="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Rl(t){const[s,n]=m.useState(!1),r=()=>{n(!0)},{src:o,alt:c,style:u,className:h,...f}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${h??""}`,style:u,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:S3,alt:"Error loading image",...f,"data-original-url":o})})}):e.jsx("img",{src:o,alt:c,className:h,style:u,...f,onError:r})}var hu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var _3=hu.exports,bj;function A3(){return bj||(bj=1,(function(t,s){(function(n,r){r(s)})(_3,(function(n){var r="1.9.4";function o(i){var d,y,A,R;for(y=1,A=arguments.length;y<A;y++){R=arguments[y];for(d in R)i[d]=R[d]}return i}var c=Object.create||(function(){function i(){}return function(d){return i.prototype=d,new i}})();function u(i,d){var y=Array.prototype.slice;if(i.bind)return i.bind.apply(i,y.call(arguments,1));var A=y.call(arguments,2);return function(){return i.apply(d,A.length?A.concat(y.call(arguments)):arguments)}}var h=0;function f(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function v(i,d,y){var A,R,W,he;return he=function(){A=!1,R&&(W.apply(y,R),R=!1)},W=function(){A?R=arguments:(i.apply(y,arguments),setTimeout(he,d),A=!0)},W}function x(i,d,y){var A=d[1],R=d[0],W=A-R;return i===A&&y?i:((i-R)%W+W)%W+R}function g(){return!1}function j(i,d){if(d===!1)return i;var y=Math.pow(10,d===void 0?6:d);return Math.round(i*y)/y}function w(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function N(i){return w(i).split(/\s+/)}function C(i,d){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var y in d)i.options[y]=d[y];return i.options}function S(i,d,y){var A=[];for(var R in i)A.push(encodeURIComponent(y?R.toUpperCase():R)+"="+encodeURIComponent(i[R]));return(!d||d.indexOf("?")===-1?"?":"&")+A.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function _(i,d){return i.replace(E,function(y,A){var R=d[A];if(R===void 0)throw new Error("No value provided for variable "+y);return typeof R=="function"&&(R=R(d)),R})}var k=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function T(i,d){for(var y=0;y<i.length;y++)if(i[y]===d)return y;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var O=0;function Z(i){var d=+new Date,y=Math.max(0,16-(d-O));return O=d+y,window.setTimeout(i,y)}var q=window.requestAnimationFrame||F("RequestAnimationFrame")||Z,$=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function X(i,d,y){if(y&&q===Z)i.call(d);else return q.call(window,u(i,d))}function I(i){i&&$.call(window,i)}var B={__proto__:null,extend:o,create:c,bind:u,get lastId(){return h},stamp:f,throttle:v,wrapNum:x,falseFn:g,formatNum:j,trim:w,splitWords:N,setOptions:C,getParamString:S,template:_,isArray:k,indexOf:T,emptyImageUrl:M,requestFn:q,cancelFn:$,requestAnimFrame:X,cancelAnimFrame:I};function te(){}te.extend=function(i){var d=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=d.__super__=this.prototype,A=c(y);A.constructor=d,d.prototype=A;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(d[R]=this[R]);return i.statics&&o(d,i.statics),i.includes&&(ue(i.includes),o.apply(null,[A].concat(i.includes))),o(A,i),delete A.statics,delete A.includes,A.options&&(A.options=y.options?c(y.options):{},o(A.options,i.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var W=0,he=A._initHooks.length;W<he;W++)A._initHooks[W].call(this)}},d},te.include=function(i){var d=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=d,this.mergeOptions(i.options)),this},te.mergeOptions=function(i){return o(this.prototype.options,i),this},te.addInitHook=function(i){var d=Array.prototype.slice.call(arguments,1),y=typeof i=="function"?i:function(){this[i].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function ue(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=k(i)?i:[i];for(var d=0;d<i.length;d++)i[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(i,d,y){if(typeof i=="object")for(var A in i)this._on(A,i[A],d);else{i=N(i);for(var R=0,W=i.length;R<W;R++)this._on(i[R],d,y)}return this},off:function(i,d,y){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var A in i)this._off(A,i[A],d);else{i=N(i);for(var R=arguments.length===1,W=0,he=i.length;W<he;W++)R?this._off(i[W]):this._off(i[W],d,y)}return this},_on:function(i,d,y,A){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(i,d,y)===!1){y===this&&(y=void 0);var R={fn:d,ctx:y};A&&(R.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(R)}},_off:function(i,d,y){var A,R,W;if(this._events&&(A=this._events[i],!!A)){if(arguments.length===1){if(this._firingCount)for(R=0,W=A.length;R<W;R++)A[R].fn=g;delete this._events[i];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var he=this._listens(i,d,y);if(he!==!1){var Se=A[he];this._firingCount&&(Se.fn=g,this._events[i]=A=A.slice()),A.splice(he,1)}}},fire:function(i,d,y){if(!this.listens(i,y))return this;var A=o({},d,{type:i,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var R=this._events[i];if(R){this._firingCount=this._firingCount+1||1;for(var W=0,he=R.length;W<he;W++){var Se=R[W],ke=Se.fn;Se.once&&this.off(i,ke,Se.ctx),ke.call(Se.ctx||this,A)}this._firingCount--}}return y&&this._propagateEvent(A),this},listens:function(i,d,y,A){typeof i!="string"&&console.warn('"string" type argument expected');var R=d;typeof d!="function"&&(A=!!d,R=void 0,y=void 0);var W=this._events&&this._events[i];if(W&&W.length&&this._listens(i,R,y)!==!1)return!0;if(A){for(var he in this._eventParents)if(this._eventParents[he].listens(i,d,y,A))return!0}return!1},_listens:function(i,d,y){if(!this._events)return!1;var A=this._events[i]||[];if(!d)return!!A.length;y===this&&(y=void 0);for(var R=0,W=A.length;R<W;R++)if(A[R].fn===d&&A[R].ctx===y)return R;return!1},once:function(i,d,y){if(typeof i=="object")for(var A in i)this._on(A,i[A],d,!0);else{i=N(i);for(var R=0,W=i.length;R<W;R++)this._on(i[R],d,y,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var d in this._eventParents)this._eventParents[d].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var ce=te.extend(Y);function U(i,d,y){this.x=y?Math.round(i):i,this.y=y?Math.round(d):d}var ne=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(i){return this.clone()._add(Q(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Q(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new U(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new U(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(i){i=Q(i);var d=i.x-this.x,y=i.y-this.y;return Math.sqrt(d*d+y*y)},equals:function(i){return i=Q(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Q(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+j(this.x)+", "+j(this.y)+")"}};function Q(i,d,y){return i instanceof U?i:k(i)?new U(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new U(i.x,i.y):new U(i,d,y)}function z(i,d){if(i)for(var y=d?[i,d]:i,A=0,R=y.length;A<R;A++)this.extend(y[A])}z.prototype={extend:function(i){var d,y;if(!i)return this;if(i instanceof U||typeof i[0]=="number"||"x"in i)d=y=Q(i);else if(i=se(i),d=i.min,y=i.max,!d||!y)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=y.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(i){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var d,y;return typeof i[0]=="number"||i instanceof U?i=Q(i):i=se(i),i instanceof z?(d=i.min,y=i.max):d=y=i,d.x>=this.min.x&&y.x<=this.max.x&&d.y>=this.min.y&&y.y<=this.max.y},intersects:function(i){i=se(i);var d=this.min,y=this.max,A=i.min,R=i.max,W=R.x>=d.x&&A.x<=y.x,he=R.y>=d.y&&A.y<=y.y;return W&&he},overlaps:function(i){i=se(i);var d=this.min,y=this.max,A=i.min,R=i.max,W=R.x>d.x&&A.x<y.x,he=R.y>d.y&&A.y<y.y;return W&&he},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var d=this.min,y=this.max,A=Math.abs(d.x-y.x)*i,R=Math.abs(d.y-y.y)*i;return se(Q(d.x-A,d.y-R),Q(y.x+A,y.y+R))},equals:function(i){return i?(i=se(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function se(i,d){return!i||i instanceof z?i:new z(i,d)}function G(i,d){if(i)for(var y=d?[i,d]:i,A=0,R=y.length;A<R;A++)this.extend(y[A])}G.prototype={extend:function(i){var d=this._southWest,y=this._northEast,A,R;if(i instanceof V)A=i,R=i;else if(i instanceof G){if(A=i._southWest,R=i._northEast,!A||!R)return this}else return i?this.extend(re(i)||ee(i)):this;return!d&&!y?(this._southWest=new V(A.lat,A.lng),this._northEast=new V(R.lat,R.lng)):(d.lat=Math.min(A.lat,d.lat),d.lng=Math.min(A.lng,d.lng),y.lat=Math.max(R.lat,y.lat),y.lng=Math.max(R.lng,y.lng)),this},pad:function(i){var d=this._southWest,y=this._northEast,A=Math.abs(d.lat-y.lat)*i,R=Math.abs(d.lng-y.lng)*i;return new G(new V(d.lat-A,d.lng-R),new V(y.lat+A,y.lng+R))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof V||"lat"in i?i=re(i):i=ee(i);var d=this._southWest,y=this._northEast,A,R;return i instanceof G?(A=i.getSouthWest(),R=i.getNorthEast()):A=R=i,A.lat>=d.lat&&R.lat<=y.lat&&A.lng>=d.lng&&R.lng<=y.lng},intersects:function(i){i=ee(i);var d=this._southWest,y=this._northEast,A=i.getSouthWest(),R=i.getNorthEast(),W=R.lat>=d.lat&&A.lat<=y.lat,he=R.lng>=d.lng&&A.lng<=y.lng;return W&&he},overlaps:function(i){i=ee(i);var d=this._southWest,y=this._northEast,A=i.getSouthWest(),R=i.getNorthEast(),W=R.lat>d.lat&&A.lat<y.lat,he=R.lng>d.lng&&A.lng<y.lng;return W&&he},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,d){return i?(i=ee(i),this._southWest.equals(i.getSouthWest(),d)&&this._northEast.equals(i.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(i,d){return i instanceof G?i:new G(i,d)}function V(i,d,y){if(isNaN(i)||isNaN(d))throw new Error("Invalid LatLng object: ("+i+", "+d+")");this.lat=+i,this.lng=+d,y!==void 0&&(this.alt=+y)}V.prototype={equals:function(i,d){if(!i)return!1;i=re(i);var y=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return y<=(d===void 0?1e-9:d)},toString:function(i){return"LatLng("+j(this.lat,i)+", "+j(this.lng,i)+")"},distanceTo:function(i){return me.distance(this,re(i))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(i){var d=180*i/40075017,y=d/Math.cos(Math.PI/180*this.lat);return ee([this.lat-d,this.lng-y],[this.lat+d,this.lng+y])},clone:function(){return new V(this.lat,this.lng,this.alt)}};function re(i,d,y){return i instanceof V?i:k(i)&&typeof i[0]!="object"?i.length===3?new V(i[0],i[1],i[2]):i.length===2?new V(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new V(i.lat,"lng"in i?i.lng:i.lon,i.alt):d===void 0?null:new V(i,d,y)}var ae={latLngToPoint:function(i,d){var y=this.projection.project(i),A=this.scale(d);return this.transformation._transform(y,A)},pointToLatLng:function(i,d){var y=this.scale(d),A=this.transformation.untransform(i,y);return this.projection.unproject(A)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var d=this.projection.bounds,y=this.scale(i),A=this.transformation.transform(d.min,y),R=this.transformation.transform(d.max,y);return new z(A,R)},infinite:!1,wrapLatLng:function(i){var d=this.wrapLng?x(i.lng,this.wrapLng,!0):i.lng,y=this.wrapLat?x(i.lat,this.wrapLat,!0):i.lat,A=i.alt;return new V(y,d,A)},wrapLatLngBounds:function(i){var d=i.getCenter(),y=this.wrapLatLng(d),A=d.lat-y.lat,R=d.lng-y.lng;if(A===0&&R===0)return i;var W=i.getSouthWest(),he=i.getNorthEast(),Se=new V(W.lat-A,W.lng-R),ke=new V(he.lat-A,he.lng-R);return new G(Se,ke)}},me=o({},ae,{wrapLng:[-180,180],R:6371e3,distance:function(i,d){var y=Math.PI/180,A=i.lat*y,R=d.lat*y,W=Math.sin((d.lat-i.lat)*y/2),he=Math.sin((d.lng-i.lng)*y/2),Se=W*W+Math.cos(A)*Math.cos(R)*he*he,ke=2*Math.atan2(Math.sqrt(Se),Math.sqrt(1-Se));return this.R*ke}}),oe=6378137,Pe={R:oe,MAX_LATITUDE:85.0511287798,project:function(i){var d=Math.PI/180,y=this.MAX_LATITUDE,A=Math.max(Math.min(y,i.lat),-y),R=Math.sin(A*d);return new U(this.R*i.lng*d,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(i){var d=180/Math.PI;return new V((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*d,i.x*d/this.R)},bounds:(function(){var i=oe*Math.PI;return new z([-i,-i],[i,i])})()};function We(i,d,y,A){if(k(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=d,this._c=y,this._d=A}We.prototype={transform:function(i,d){return this._transform(i.clone(),d)},_transform:function(i,d){return d=d||1,i.x=d*(this._a*i.x+this._b),i.y=d*(this._c*i.y+this._d),i},untransform:function(i,d){return d=d||1,new U((i.x/d-this._b)/this._a,(i.y/d-this._d)/this._c)}};function Je(i,d,y,A){return new We(i,d,y,A)}var tt=o({},me,{code:"EPSG:3857",projection:Pe,transformation:(function(){var i=.5/(Math.PI*Pe.R);return Je(i,.5,-i,.5)})()}),nt=o({},tt,{code:"EPSG:900913"});function ct(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function wt(i,d){var y="",A,R,W,he,Se,ke;for(A=0,W=i.length;A<W;A++){for(Se=i[A],R=0,he=Se.length;R<he;R++)ke=Se[R],y+=(R?"L":"M")+ke.x+" "+ke.y;y+=d?ze.svg?"z":"x":""}return y||"M0 0"}var pt=document.documentElement.style,It="ActiveXObject"in window,Lt=It&&!document.addEventListener,J="msLaunchUri"in navigator&&!("documentMode"in document),ve=Fe("webkit"),xe=Fe("android"),Ve=Fe("android 2")||Fe("android 3"),de=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ne=xe&&Fe("Google")&&de<537&&!("AudioNode"in window),Be=!!window.opera,He=!J&&Fe("chrome"),gt=Fe("gecko")&&!ve&&!Be&&!It,pe=!He&&Fe("safari"),$e=Fe("phantom"),Xe="OTransition"in pt,mt=navigator.platform.indexOf("Win")===0,fe=It&&"transition"in pt,Ye="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ve,dt="MozPerspective"in pt,kt=!window.L_DISABLE_3D&&(fe||Ye||dt)&&!Xe&&!$e,ht=typeof orientation<"u"||Fe("mobile"),Ft=ht&&ve,ms=ht&&Ye,hs=!window.PointerEvent&&window.MSPointerEvent,Ps=!!(window.PointerEvent||hs),Yt="ontouchstart"in window||!!window.TouchEvent,Gs=!window.L_NO_TOUCH&&(Yt||Ps),Ct=ht&&Be,Mt=ht&&gt,Wt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Es=(function(){var i=!1;try{var d=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,d),window.removeEventListener("testPassiveEventSupport",g,d)}catch{}return i})(),xs=(function(){return!!document.createElement("canvas").getContext})(),fs=!!(document.createElementNS&&ct("svg").createSVGRect),Ee=!!fs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),rt=!fs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var d=i.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),it=navigator.platform.indexOf("Mac")===0,we=navigator.platform.indexOf("Linux")===0;function Fe(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ze={ie:It,ielt9:Lt,edge:J,webkit:ve,android:xe,android23:Ve,androidStock:Ne,opera:Be,chrome:He,gecko:gt,safari:pe,phantom:$e,opera12:Xe,win:mt,ie3d:fe,webkit3d:Ye,gecko3d:dt,any3d:kt,mobile:ht,mobileWebkit:Ft,mobileWebkit3d:ms,msPointer:hs,pointer:Ps,touch:Gs,touchNative:Yt,mobileOpera:Ct,mobileGecko:Mt,retina:Wt,passiveEvents:Es,canvas:xs,svg:fs,vml:rt,inlineSvg:Ee,mac:it,linux:we},$t=ze.msPointer?"MSPointerDown":"pointerdown",Bt=ze.msPointer?"MSPointerMove":"pointermove",ks=ze.msPointer?"MSPointerUp":"pointerup",as=ze.msPointer?"MSPointerCancel":"pointercancel",ys={touchstart:$t,touchmove:Bt,touchend:ks,touchcancel:as},Cs={touchstart:De,touchmove:le,touchend:le,touchcancel:le},en={},un=!1;function In(i,d,y){return d==="touchstart"&&gd(),Cs[d]?(y=Cs[d].bind(this,y),i.addEventListener(ys[d],y,!1),y):(console.warn("wrong event specified:",d),g)}function Yo(i,d,y){if(!ys[d]){console.warn("wrong event specified:",d);return}i.removeEventListener(ys[d],y,!1)}function Ki(i){en[i.pointerId]=i}function Kl(i){en[i.pointerId]&&(en[i.pointerId]=i)}function Jo(i){delete en[i.pointerId]}function gd(){un||(document.addEventListener($t,Ki,!0),document.addEventListener(Bt,Kl,!0),document.addEventListener(ks,Jo,!0),document.addEventListener(as,Jo,!0),un=!0)}function le(i,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var y in en)d.touches.push(en[y]);d.changedTouches=[d],i(d)}}function De(i,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Ks(d),le(i,d)}function qt(i){var d={},y,A;for(A in i)y=i[A],d[A]=y&&y.bind?y.bind(i):y;return i=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var bs=200;function Zt(i,d){i.addEventListener("dblclick",d);var y=0,A;function R(W){if(W.detail!==1){A=W.detail;return}if(!(W.pointerType==="mouse"||W.sourceCapabilities&&!W.sourceCapabilities.firesTouchEvents)){var he=vi(W);if(!(he.some(function(ke){return ke instanceof HTMLLabelElement&&ke.attributes.for})&&!he.some(function(ke){return ke instanceof HTMLInputElement||ke instanceof HTMLSelectElement}))){var Se=Date.now();Se-y<=bs?(A++,A===2&&d(qt(W))):A=1,y=Se}}}return i.addEventListener("click",R),{dblclick:d,simDblclick:R}}function Zs(i,d){i.removeEventListener("dblclick",d.dblclick),i.removeEventListener("click",d.simDblclick)}var Ut=Xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mn=Xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rs=mn==="webkitTransition"||mn==="OTransition"?mn+"End":"transitionend";function St(i){return typeof i=="string"?document.getElementById(i):i}function Ts(i,d){var y=i.style[d]||i.currentStyle&&i.currentStyle[d];if((!y||y==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(i,null);y=A?A[d]:null}return y==="auto"?null:y}function ft(i,d,y){var A=document.createElement(i);return A.className=d||"",y&&y.appendChild(A),A}function ds(i){var d=i.parentNode;d&&d.removeChild(i)}function zn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ga(i){var d=i.parentNode;d&&d.lastChild!==i&&d.appendChild(i)}function fr(i){var d=i.parentNode;d&&d.firstChild!==i&&d.insertBefore(i,d.firstChild)}function Qi(i,d){if(i.classList!==void 0)return i.classList.contains(d);var y=Ql(i);return y.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(y)}function Ht(i,d){if(i.classList!==void 0)for(var y=N(d),A=0,R=y.length;A<R;A++)i.classList.add(y[A]);else if(!Qi(i,d)){var W=Ql(i);vd(i,(W?W+" ":"")+d)}}function Ls(i,d){i.classList!==void 0?i.classList.remove(d):vd(i,w((" "+Ql(i)+" ").replace(" "+d+" "," ")))}function vd(i,d){i.className.baseVal===void 0?i.className=d:i.className.baseVal=d}function Ql(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Bn(i,d){"opacity"in i.style?i.style.opacity=d:"filter"in i.style&&Ku(i,d)}function Ku(i,d){var y=!1,A="DXImageTransform.Microsoft.Alpha";try{y=i.filters.item(A)}catch{if(d===1)return}d=Math.round(d*100),y?(y.Enabled=d!==100,y.Opacity=d):i.style.filter+=" progid:"+A+"(opacity="+d+")"}function Xi(i){for(var d=document.documentElement.style,y=0;y<i.length;y++)if(i[y]in d)return i[y];return!1}function Ea(i,d,y){var A=d||new U(0,0);i.style[Ut]=(ze.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(y?" scale("+y+")":"")}function tn(i,d){i._leaflet_pos=d,ze.any3d?Ea(i,d):(i.style.left=d.x+"px",i.style.top=d.y+"px")}function xr(i){return i._leaflet_pos||new U(0,0)}var ps,Yi,Xl;if("onselectstart"in document)ps=function(){zt(window,"selectstart",Ks)},Yi=function(){Ds(window,"selectstart",Ks)};else{var xi=Xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ps=function(){if(xi){var i=document.documentElement.style;Xl=i[xi],i[xi]="none"}},Yi=function(){xi&&(document.documentElement.style[xi]=Xl,Xl=void 0)}}function Yl(){zt(window,"dragstart",Ks)}function Jl(){Ds(window,"dragstart",Ks)}var el,tl;function Ji(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ka(),el=i,tl=i.style.outlineStyle,i.style.outlineStyle="none",zt(window,"keydown",ka))}function ka(){el&&(el.style.outlineStyle=tl,el=void 0,tl=void 0,Ds(window,"keydown",ka))}function gr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Za(i){var d=i.getBoundingClientRect();return{x:d.width/i.offsetWidth||1,y:d.height/i.offsetHeight||1,boundingClientRect:d}}var sl={__proto__:null,TRANSFORM:Ut,TRANSITION:mn,TRANSITION_END:rs,get:St,getStyle:Ts,create:ft,remove:ds,empty:zn,toFront:Ga,toBack:fr,hasClass:Qi,addClass:Ht,removeClass:Ls,setClass:vd,getClass:Ql,setOpacity:Bn,testProp:Xi,setTransform:Ea,setPosition:tn,getPosition:xr,get disableTextSelection(){return ps},get enableTextSelection(){return Yi},disableImageDrag:Yl,enableImageDrag:Jl,preventOutline:Ji,restoreOutline:ka,getSizedParentNode:gr,getScale:Za};function zt(i,d,y,A){if(d&&typeof d=="object")for(var R in d)bd(i,R,d[R],y);else{d=N(d);for(var W=0,he=d.length;W<he;W++)bd(i,d[W],y,A)}return this}var yn="_leaflet_events";function Ds(i,d,y,A){if(arguments.length===1)yd(i),delete i[yn];else if(d&&typeof d=="object")for(var R in d)ec(i,R,d[R],y);else if(d=N(d),arguments.length===2)yd(i,function(Se){return T(d,Se)!==-1});else for(var W=0,he=d.length;W<he;W++)ec(i,d[W],y,A);return this}function yd(i,d){for(var y in i[yn]){var A=y.split(/\d/)[0];(!d||d(A))&&ec(i,A,null,null,y)}}var gi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bd(i,d,y,A){var R=d+f(y)+(A?"_"+f(A):"");if(i[yn]&&i[yn][R])return this;var W=function(Se){return y.call(A||i,Se||window.event)},he=W;!ze.touchNative&&ze.pointer&&d.indexOf("touch")===0?W=In(i,d,W):ze.touch&&d==="dblclick"?W=Zt(i,W):"addEventListener"in i?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?i.addEventListener(gi[d]||d,W,ze.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(W=function(Se){Se=Se||window.event,rl(i,Se)&&he(Se)},i.addEventListener(gi[d],W,!1)):i.addEventListener(d,he,!1):i.attachEvent("on"+d,W),i[yn]=i[yn]||{},i[yn][R]=W}function ec(i,d,y,A,R){R=R||d+f(y)+(A?"_"+f(A):"");var W=i[yn]&&i[yn][R];if(!W)return this;!ze.touchNative&&ze.pointer&&d.indexOf("touch")===0?Yo(i,d,W):ze.touch&&d==="dblclick"?Zs(i,W):"removeEventListener"in i?i.removeEventListener(gi[d]||d,W,!1):i.detachEvent("on"+d,W),i[yn][R]=null}function Ka(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function tc(i){return bd(i,"wheel",Ka),this}function nl(i){return zt(i,"mousedown touchstart dblclick contextmenu",Ka),i._leaflet_disable_click=!0,this}function Ks(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Ta(i){return Ks(i),Ka(i),this}function vi(i){if(i.composedPath)return i.composedPath();for(var d=[],y=i.target;y;)d.push(y),y=y.parentNode;return d}function al(i,d){if(!d)return new U(i.clientX,i.clientY);var y=Za(d),A=y.boundingClientRect;return new U((i.clientX-A.left)/y.x-d.clientLeft,(i.clientY-A.top)/y.y-d.clientTop)}var ef=ze.linux&&ze.chrome?window.devicePixelRatio:ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qu(i){return ze.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/ef:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function rl(i,d){var y=d.relatedTarget;if(!y)return!0;try{for(;y&&y!==i;)y=y.parentNode}catch{return!1}return y!==i}var sc={__proto__:null,on:zt,off:Ds,stopPropagation:Ka,disableScrollPropagation:tc,disableClickPropagation:nl,preventDefault:Ks,stop:Ta,getPropagationPath:vi,getMousePosition:al,getWheelDelta:Qu,isExternalTarget:rl,addListener:zt,removeListener:Ds},nc=ce.extend({run:function(i,d,y,A){this.stop(),this._el=i,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=xr(i),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(i){var d=+new Date-this._startTime,y=this._duration*1e3;d<y?this._runFrame(this._easeOut(d/y),i):(this._runFrame(1),this._complete())},_runFrame:function(i,d){var y=this._startPos.add(this._offset.multiplyBy(i));d&&y._round(),tn(this._el,y),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),ls=ce.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,d){d=C(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(re(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=mn&&ze.any3d&&!ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),zt(this._proxy,rs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,d,y){if(d=d===void 0?this._zoom:this._limitZoom(d),i=this._limitCenter(re(i),d,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=o({animate:y.animate},y.zoom),y.pan=o({animate:y.animate,duration:y.duration},y.pan));var A=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,d,y.zoom):this._tryAnimatedPan(i,y.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(i,d,y.pan&&y.pan.noMoveStart),this},setZoom:function(i,d){return this._loaded?this.setView(this.getCenter(),i,{zoom:d}):(this._zoom=i,this)},zoomIn:function(i,d){return i=i||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,d)},zoomOut:function(i,d){return i=i||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,d)},setZoomAround:function(i,d,y){var A=this.getZoomScale(d),R=this.getSize().divideBy(2),W=i instanceof U?i:this.latLngToContainerPoint(i),he=W.subtract(R).multiplyBy(1-1/A),Se=this.containerPointToLatLng(R.add(he));return this.setView(Se,d,{zoom:y})},_getBoundsCenterZoom:function(i,d){d=d||{},i=i.getBounds?i.getBounds():ee(i);var y=Q(d.paddingTopLeft||d.padding||[0,0]),A=Q(d.paddingBottomRight||d.padding||[0,0]),R=this.getBoundsZoom(i,!1,y.add(A));if(R=typeof d.maxZoom=="number"?Math.min(d.maxZoom,R):R,R===1/0)return{center:i.getCenter(),zoom:R};var W=A.subtract(y).divideBy(2),he=this.project(i.getSouthWest(),R),Se=this.project(i.getNorthEast(),R),ke=this.unproject(he.add(Se).divideBy(2).add(W),R);return{center:ke,zoom:R}},fitBounds:function(i,d){if(i=ee(i),!i.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(i,d);return this.setView(y.center,y.zoom,d)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,d){return this.setView(i,this._zoom,{pan:d})},panBy:function(i,d){if(i=Q(i).round(),d=d||{},!i.x&&!i.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new nc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Ht(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,y,d.duration||.25,d.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,d,y){if(y=y||{},y.animate===!1||!ze.any3d)return this.setView(i,d,y);this._stop();var A=this.project(this.getCenter()),R=this.project(i),W=this.getSize(),he=this._zoom;i=re(i),d=d===void 0?he:d;var Se=Math.max(W.x,W.y),ke=Se*this.getZoomScale(he,d),qe=R.distanceTo(A)||1,ot=1.42,Dt=ot*ot;function Kt(Ss){var fo=Ss?-1:1,ff=Ss?ke:Se,xf=ke*ke-Se*Se+fo*Dt*Dt*qe*qe,Si=2*ff*Dt*qe,_i=xf/Si,Ai=Math.sqrt(_i*_i+1)-_i,gc=Ai<1e-9?-18:Math.log(Ai);return gc}function bn(Ss){return(Math.exp(Ss)-Math.exp(-Ss))/2}function hn(Ss){return(Math.exp(Ss)+Math.exp(-Ss))/2}function Yn(Ss){return bn(Ss)/hn(Ss)}var Vn=Kt(0);function ho(Ss){return Se*(hn(Vn)/hn(Vn+ot*Ss))}function Bd(Ss){return Se*(hn(Vn)*Yn(Vn+ot*Ss)-bn(Vn))/Dt}function Wr(Ss){return 1-Math.pow(1-Ss,1.5)}var gm=Date.now(),Ci=(Kt(1)-Vn)/ot,Ja=y.duration?1e3*y.duration:1e3*Ci*.8;function po(){var Ss=(Date.now()-gm)/Ja,fo=Wr(Ss)*Ci;Ss<=1?(this._flyToFrame=X(po,this),this._move(this.unproject(A.add(R.subtract(A).multiplyBy(Bd(fo)/qe)),he),this.getScaleZoom(Se/ho(fo),he),{flyTo:!0})):this._move(i,d)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),po.call(this),this},flyToBounds:function(i,d){var y=this._getBoundsCenterZoom(i,d);return this.flyTo(y.center,y.zoom,d)},setMaxBounds:function(i){return i=ee(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var d=this.options.minZoom;return this.options.minZoom=i,this._loaded&&d!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var d=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&d!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,d){this._enforcingBounds=!0;var y=this.getCenter(),A=this._limitCenter(y,this._zoom,ee(i));return y.equals(A)||this.panTo(A,d),this._enforcingBounds=!1,this},panInside:function(i,d){d=d||{};var y=Q(d.paddingTopLeft||d.padding||[0,0]),A=Q(d.paddingBottomRight||d.padding||[0,0]),R=this.project(this.getCenter()),W=this.project(i),he=this.getPixelBounds(),Se=se([he.min.add(y),he.max.subtract(A)]),ke=Se.getSize();if(!Se.contains(W)){this._enforcingBounds=!0;var qe=W.subtract(Se.getCenter()),ot=Se.extend(W).getSize().subtract(ke);R.x+=qe.x<0?-ot.x:ot.x,R.y+=qe.y<0?-ot.y:ot.y,this.panTo(this.unproject(R),d),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),A=d.divideBy(2).round(),R=y.divideBy(2).round(),W=A.subtract(R);return!W.x&&!W.y?this:(i.animate&&i.pan?this.panBy(W):(i.pan&&this._rawPanBy(W),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),y=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,y,i):navigator.geolocation.getCurrentPosition(d,y,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var d=i.code,y=i.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var d=i.coords.latitude,y=i.coords.longitude,A=new V(d,y),R=A.toBounds(i.coords.accuracy*2),W=this._locateOptions;if(W.setView){var he=this.getBoundsZoom(R);this.setView(A,W.maxZoom?Math.min(he,W.maxZoom):he)}var Se={latlng:A,bounds:R,timestamp:i.timestamp};for(var ke in i.coords)typeof i.coords[ke]=="number"&&(Se[ke]=i.coords[ke]);this.fire("locationfound",Se)}},addHandler:function(i,d){if(!d)return this;var y=this[i]=new d(this);return this._handlers.push(y),this.options[i]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ds(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ds(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,d){var y="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),A=ft("div",y,d||this._mapPane);return i&&(this._panes[i]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),d=this.unproject(i.getBottomLeft()),y=this.unproject(i.getTopRight());return new G(d,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,d,y){i=ee(i),y=Q(y||[0,0]);var A=this.getZoom()||0,R=this.getMinZoom(),W=this.getMaxZoom(),he=i.getNorthWest(),Se=i.getSouthEast(),ke=this.getSize().subtract(y),qe=se(this.project(Se,A),this.project(he,A)).getSize(),ot=ze.any3d?this.options.zoomSnap:1,Dt=ke.x/qe.x,Kt=ke.y/qe.y,bn=d?Math.max(Dt,Kt):Math.min(Dt,Kt);return A=this.getScaleZoom(bn,A),ot&&(A=Math.round(A/(ot/100))*(ot/100),A=d?Math.ceil(A/ot)*ot:Math.floor(A/ot)*ot),Math.max(R,Math.min(W,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,d){var y=this._getTopLeftPoint(i,d);return new z(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,d){var y=this.options.crs;return d=d===void 0?this._zoom:d,y.scale(i)/y.scale(d)},getScaleZoom:function(i,d){var y=this.options.crs;d=d===void 0?this._zoom:d;var A=y.zoom(i*y.scale(d));return isNaN(A)?1/0:A},project:function(i,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(re(i),d)},unproject:function(i,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(Q(i),d)},layerPointToLatLng:function(i){var d=Q(i).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(i){var d=this.project(re(i))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(re(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ee(i))},distance:function(i,d){return this.options.crs.distance(re(i),re(d))},containerPointToLayerPoint:function(i){return Q(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Q(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var d=this.containerPointToLayerPoint(Q(i));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(i)))},mouseEventToContainerPoint:function(i){return al(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var d=this._container=St(i);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");zt(d,"scroll",this._onScroll,this),this._containerId=f(d)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ze.any3d,Ht(i,"leaflet-container"+(ze.touch?" leaflet-touch":"")+(ze.retina?" leaflet-retina":"")+(ze.ielt9?" leaflet-oldie":"")+(ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Ts(i,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tn(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ht(i.markerPane,"leaflet-zoom-hide"),Ht(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,d,y){tn(this._mapPane,new U(0,0));var A=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var R=this._zoom!==d;this._moveStart(R,y)._move(i,d)._moveEnd(R),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(i,d){return i&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(i,d,y,A){d===void 0&&(d=this._zoom);var R=this._zoom!==d;return this._zoom=d,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),A?y&&y.pinch&&this.fire("zoom",y):((R||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){tn(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var d=i?Ds:zt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),ze.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,d){for(var y=[],A,R=d==="mouseout"||d==="mouseover",W=i.target||i.srcElement,he=!1;W;){if(A=this._targets[f(W)],A&&(d==="click"||d==="preclick")&&this._draggableMoved(A)){he=!0;break}if(A&&A.listens(d,!0)&&(R&&!rl(W,i)||(y.push(A),R))||W===this._container)break;W=W.parentNode}return!y.length&&!he&&!R&&this.listens(d,!0)&&(y=[this]),y},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var d=i.target||i.srcElement;if(!(!this._loaded||d._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(d))){var y=i.type;y==="mousedown"&&Ji(d),this._fireDOMEvent(i,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,d,y){if(i.type==="click"){var A=o({},i);A.type="preclick",this._fireDOMEvent(A,A.type,y)}var R=this._findEventTargets(i,d);if(y){for(var W=[],he=0;he<y.length;he++)y[he].listens(d,!0)&&W.push(y[he]);R=W.concat(R)}if(R.length){d==="contextmenu"&&Ks(i);var Se=R[0],ke={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var qe=Se.getLatLng&&(!Se._radius||Se._radius<=10);ke.containerPoint=qe?this.latLngToContainerPoint(Se.getLatLng()):this.mouseEventToContainerPoint(i),ke.layerPoint=this.containerPointToLayerPoint(ke.containerPoint),ke.latlng=qe?Se.getLatLng():this.layerPointToLatLng(ke.layerPoint)}for(he=0;he<R.length;he++)if(R[he].fire(d,ke,!0),ke.originalEvent._stopped||R[he].options.bubblingMouseEvents===!1&&T(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,d=this._handlers.length;i<d;i++)this._handlers[i].disable()},whenReady:function(i,d){return this._loaded?i.call(d||this,{target:this}):this.on("load",i,d),this},_getMapPanePos:function(){return xr(this._mapPane)||new U(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,d){var y=i&&d!==void 0?this._getNewPixelOrigin(i,d):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,d){var y=this.getSize()._divideBy(2);return this.project(i,d)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,d,y){var A=this._getNewPixelOrigin(y,d);return this.project(i,d)._subtract(A)},_latLngBoundsToNewLayerBounds:function(i,d,y){var A=this._getNewPixelOrigin(y,d);return se([this.project(i.getSouthWest(),d)._subtract(A),this.project(i.getNorthWest(),d)._subtract(A),this.project(i.getSouthEast(),d)._subtract(A),this.project(i.getNorthEast(),d)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,d,y){if(!y)return i;var A=this.project(i,d),R=this.getSize().divideBy(2),W=new z(A.subtract(R),A.add(R)),he=this._getBoundsOffset(W,y,d);return Math.abs(he.x)<=1&&Math.abs(he.y)<=1?i:this.unproject(A.add(he),d)},_limitOffset:function(i,d){if(!d)return i;var y=this.getPixelBounds(),A=new z(y.min.add(i),y.max.add(i));return i.add(this._getBoundsOffset(A,d))},_getBoundsOffset:function(i,d,y){var A=se(this.project(d.getNorthEast(),y),this.project(d.getSouthWest(),y)),R=A.min.subtract(i.min),W=A.max.subtract(i.max),he=this._rebound(R.x,-W.x),Se=this._rebound(R.y,-W.y);return new U(he,Se)},_rebound:function(i,d){return i+d>0?Math.round(i-d)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(d))},_limitZoom:function(i){var d=this.getMinZoom(),y=this.getMaxZoom(),A=ze.any3d?this.options.zoomSnap:1;return A&&(i=Math.round(i/A)*A),Math.max(d,Math.min(y,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ls(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,d){var y=this._getCenterOffset(i)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,d),!0)},_createAnimProxy:function(){var i=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(d){var y=Ut,A=this._proxy.style[y];Ea(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),A===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ds(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),d=this.getZoom();Ea(this._proxy,this.project(i,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,d,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(d),R=this._getCenterOffset(i)._divideBy(1-1/A);return y.animate!==!0&&!this.getSize().contains(R)?!1:(X(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(i,d,!0)},this),!0)},_animateZoom:function(i,d,y,A){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=d,Ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:d,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ls(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $r(i,d){return new ls(i,d)}var Qn=te.extend({options:{position:"topright"},initialize:function(i){C(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var d=this._map;return d&&d.removeControl(this),this.options.position=i,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var d=this._container=this.onAdd(i),y=this.getPosition(),A=i._controlCorners[y];return Ht(d,"leaflet-control"),y.indexOf("bottom")!==-1?A.insertBefore(d,A.firstChild):A.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ds(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),zr=function(i){return new Qn(i)};ls.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},d="leaflet-",y=this._controlContainer=ft("div",d+"control-container",this._container);function A(R,W){var he=d+R+" "+d+W;i[R+W]=ft("div",he,y)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ds(this._controlCorners[i]);ds(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jd=Qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,d,y,A){return y<A?-1:A<y?1:0}},initialize:function(i,d,y){C(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in i)this._addLayer(i[A],A);for(A in d)this._addLayer(d[A],A,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Qn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,d){return this._addLayer(i,d),this._map?this._update():this},addOverlay:function(i,d){return this._addLayer(i,d,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var d=this._getLayer(f(i));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Ls(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ls(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",d=this._container=ft("div",i),y=this.options.collapsed;d.setAttribute("aria-haspopup",!0),nl(d),tc(d);var A=this._section=ft("section",i+"-list");y&&(this._map.on("click",this.collapse,this),zt(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=ft("a",i+"-toggle",d);R.href="#",R.title="Layers",R.setAttribute("role","button"),zt(R,{keydown:function(W){W.keyCode===13&&this._expandSafely()},click:function(W){Ks(W),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=ft("div",i+"-base",A),this._separator=ft("div",i+"-separator",A),this._overlaysList=ft("div",i+"-overlays",A),d.appendChild(A)},_getLayer:function(i){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&f(this._layers[d].layer)===i)return this._layers[d]},_addLayer:function(i,d,y){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:d,overlay:y}),this.options.sortLayers&&this._layers.sort(u(function(A,R){return this.options.sortFunction(A.layer,R.layer,A.name,R.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zn(this._baseLayersList),zn(this._overlaysList),this._layerControlInputs=[];var i,d,y,A,R=0;for(y=0;y<this._layers.length;y++)A=this._layers[y],this._addItem(A),d=d||A.overlay,i=i||!A.overlay,R+=A.overlay?0:1;return this.options.hideSingleBase&&(i=i&&R>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=d&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var d=this._getLayer(f(i.target)),y=d.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;y&&this._map.fire(y,d)},_createRadioElement:function(i,d){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(d?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=y,A.firstChild},_addItem:function(i){var d=document.createElement("label"),y=this._map.hasLayer(i.layer),A;i.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=y):A=this._createRadioElement("leaflet-base-layers_"+f(this),y),this._layerControlInputs.push(A),A.layerId=f(i.layer),zt(A,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+i.name;var W=document.createElement("span");d.appendChild(W),W.appendChild(A),W.appendChild(R);var he=i.overlay?this._overlaysList:this._baseLayersList;return he.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,d,y,A=[],R=[];this._handlingClick=!0;for(var W=i.length-1;W>=0;W--)d=i[W],y=this._getLayer(d.layerId).layer,d.checked?A.push(y):d.checked||R.push(y);for(W=0;W<R.length;W++)this._map.hasLayer(R[W])&&this._map.removeLayer(R[W]);for(W=0;W<A.length;W++)this._map.hasLayer(A[W])||this._map.addLayer(A[W]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,d,y,A=this._map.getZoom(),R=i.length-1;R>=0;R--)d=i[R],y=this._getLayer(d.layerId).layer,d.disabled=y.options.minZoom!==void 0&&A<y.options.minZoom||y.options.maxZoom!==void 0&&A>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,zt(i,"click",Ks),this.expand();var d=this;setTimeout(function(){Ds(i,"click",Ks),d._preventClick=!1})}}),ac=function(i,d,y){return new jd(i,d,y)},eo=Qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var d="leaflet-control-zoom",y=ft("div",d+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,d+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,d+"-out",y,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,d,y,A,R){var W=ft("a",y,A);return W.innerHTML=i,W.href="#",W.title=d,W.setAttribute("role","button"),W.setAttribute("aria-label",d),nl(W),zt(W,"click",Ta),zt(W,"click",R,this),zt(W,"click",this._refocusOnMap,this),W},_updateDisabled:function(){var i=this._map,d="leaflet-disabled";Ls(this._zoomInButton,d),Ls(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ht(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ht(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});ls.mergeOptions({zoomControl:!0}),ls.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new eo,this.addControl(this.zoomControl))});var Xu=function(i){return new eo(i)},Un=Qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var d="leaflet-control-scale",y=ft("div",d),A=this.options;return this._addScales(A,d+"-line",y),i.on(A.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),y},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,d,y){i.metric&&(this._mScale=ft("div",d,y)),i.imperial&&(this._iScale=ft("div",d,y))},_update:function(){var i=this._map,d=i.getSize().y/2,y=i.distance(i.containerPointToLatLng([0,d]),i.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(y)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var d=this._getRoundNum(i),y=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,y,d/i)},_updateImperial:function(i){var d=i*3.2808399,y,A,R;d>5280?(y=d/5280,A=this._getRoundNum(y),this._updateScale(this._iScale,A+" mi",A/y)):(R=this._getRoundNum(d),this._updateScale(this._iScale,R+" ft",R/d))},_updateScale:function(i,d,y){i.style.width=Math.round(this.options.maxWidth*y)+"px",i.innerHTML=d},_getRoundNum:function(i){var d=Math.pow(10,(Math.floor(i)+"").length-1),y=i/d;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,d*y}}),to=function(i){return new Un(i)},Nd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yi=Qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ze.inlineSvg?Nd+" ":"")+"Leaflet</a>"},initialize:function(i){C(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),nl(this._container);for(var d in i._layers)i._layers[d].getAttribution&&this.addAttribution(i._layers[d].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var d in this._attributions)this._attributions[d]&&i.push(d);var y=[];this.options.prefix&&y.push(this.options.prefix),i.length&&y.push(i.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});ls.mergeOptions({attributionControl:!0}),ls.addInitHook(function(){this.options.attributionControl&&new yi().addTo(this)});var tf=function(i){return new yi(i)};Qn.Layers=jd,Qn.Zoom=eo,Qn.Scale=Un,Qn.Attribution=yi,zr.layers=ac,zr.zoom=Xu,zr.scale=to,zr.attribution=tf;var ca=te.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ca.addTo=function(i,d){return i.addHandler(d,this),this};var wd={Events:Y},so=ze.touch?"touchstart mousedown":"mousedown",Da=ce.extend({options:{clickTolerance:3},initialize:function(i,d,y,A){C(this,A),this._element=i,this._dragStartTarget=d||i,this._preventOutline=y},enable:function(){this._enabled||(zt(this._dragStartTarget,so,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Da._dragging===this&&this.finishDrag(!0),Ds(this._dragStartTarget,so,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Qi(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Da._dragging===this&&this.finishDrag();return}if(!(Da._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Da._dragging=this,this._preventOutline&&Ji(this._element),Yl(),ps(),!this._moving)){this.fire("down");var d=i.touches?i.touches[0]:i,y=gr(this._element);this._startPoint=new U(d.clientX,d.clientY),this._startPos=xr(this._element),this._parentScale=Za(y);var A=i.type==="mousedown";zt(document,A?"mousemove":"touchmove",this._onMove,this),zt(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var d=i.touches&&i.touches.length===1?i.touches[0]:i,y=new U(d.clientX,d.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,Ks(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ht(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),tn(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Ls(document.body,"leaflet-dragging"),this._lastTarget&&(Ls(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ds(document,"mousemove touchmove",this._onMove,this),Ds(document,"mouseup touchend touchcancel",this._onUp,this),Jl(),Yi();var d=this._moved&&this._moving;this._moving=!1,Da._dragging=!1,d&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Cd(i,d,y){var A,R=[1,4,2,8],W,he,Se,ke,qe,ot,Dt,Kt;for(W=0,ot=i.length;W<ot;W++)i[W]._code=bi(i[W],d);for(Se=0;Se<4;Se++){for(Dt=R[Se],A=[],W=0,ot=i.length,he=ot-1;W<ot;he=W++)ke=i[W],qe=i[he],ke._code&Dt?qe._code&Dt||(Kt=ic(qe,ke,Dt,d,y),Kt._code=bi(Kt,d),A.push(Kt)):(qe._code&Dt&&(Kt=ic(qe,ke,Dt,d,y),Kt._code=bi(Kt,d),A.push(Kt)),A.push(ke));i=A}return i}function Yu(i,d){var y,A,R,W,he,Se,ke,qe,ot;if(!i||i.length===0)throw new Error("latlngs not passed");da(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Dt=re([0,0]),Kt=ee(i),bn=Kt.getNorthWest().distanceTo(Kt.getSouthWest())*Kt.getNorthEast().distanceTo(Kt.getNorthWest());bn<1700&&(Dt=Sd(i));var hn=i.length,Yn=[];for(y=0;y<hn;y++){var Vn=re(i[y]);Yn.push(d.project(re([Vn.lat-Dt.lat,Vn.lng-Dt.lng])))}for(Se=ke=qe=0,y=0,A=hn-1;y<hn;A=y++)R=Yn[y],W=Yn[A],he=R.y*W.x-W.y*R.x,ke+=(R.x+W.x)*he,qe+=(R.y+W.y)*he,Se+=he*3;Se===0?ot=Yn[0]:ot=[ke/Se,qe/Se];var ho=d.unproject(Q(ot));return re([ho.lat+Dt.lat,ho.lng+Dt.lng])}function Sd(i){for(var d=0,y=0,A=0,R=0;R<i.length;R++){var W=re(i[R]);d+=W.lat,y+=W.lng,A++}return re([d/A,y/A])}var sf={__proto__:null,clipPolygon:Cd,polygonCenter:Yu,centroid:Sd};function rc(i,d){if(!d||!i.length)return i.slice();var y=d*d;return i=rf(i,y),i=af(i,y),i}function Ju(i,d,y){return Math.sqrt(ji(i,d,y,!0))}function nf(i,d,y){return ji(i,d,y)}function af(i,d){var y=i.length,A=typeof Uint8Array<"u"?Uint8Array:Array,R=new A(y);R[0]=R[y-1]=1,_d(i,R,d,0,y-1);var W,he=[];for(W=0;W<y;W++)R[W]&&he.push(i[W]);return he}function _d(i,d,y,A,R){var W=0,he,Se,ke;for(Se=A+1;Se<=R-1;Se++)ke=ji(i[Se],i[A],i[R],!0),ke>W&&(he=Se,W=ke);W>y&&(d[he]=1,_d(i,d,y,A,he),_d(i,d,y,he,R))}function rf(i,d){for(var y=[i[0]],A=1,R=0,W=i.length;A<W;A++)of(i[A],i[R])>d&&(y.push(i[A]),R=A);return R<W-1&&y.push(i[W-1]),y}var Ad;function em(i,d,y,A,R){var W=A?Ad:bi(i,y),he=bi(d,y),Se,ke,qe;for(Ad=he;;){if(!(W|he))return[i,d];if(W&he)return!1;Se=W||he,ke=ic(i,d,Se,y,R),qe=bi(ke,y),Se===W?(i=ke,W=qe):(d=ke,he=qe)}}function ic(i,d,y,A,R){var W=d.x-i.x,he=d.y-i.y,Se=A.min,ke=A.max,qe,ot;return y&8?(qe=i.x+W*(ke.y-i.y)/he,ot=ke.y):y&4?(qe=i.x+W*(Se.y-i.y)/he,ot=Se.y):y&2?(qe=ke.x,ot=i.y+he*(ke.x-i.x)/W):y&1&&(qe=Se.x,ot=i.y+he*(Se.x-i.x)/W),new U(qe,ot,R)}function bi(i,d){var y=0;return i.x<d.min.x?y|=1:i.x>d.max.x&&(y|=2),i.y<d.min.y?y|=4:i.y>d.max.y&&(y|=8),y}function of(i,d){var y=d.x-i.x,A=d.y-i.y;return y*y+A*A}function ji(i,d,y,A){var R=d.x,W=d.y,he=y.x-R,Se=y.y-W,ke=he*he+Se*Se,qe;return ke>0&&(qe=((i.x-R)*he+(i.y-W)*Se)/ke,qe>1?(R=y.x,W=y.y):qe>0&&(R+=he*qe,W+=Se*qe)),he=i.x-R,Se=i.y-W,A?he*he+Se*Se:new U(R,W)}function da(i){return!k(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function tm(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),da(i)}function sm(i,d){var y,A,R,W,he,Se,ke,qe;if(!i||i.length===0)throw new Error("latlngs not passed");da(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ot=re([0,0]),Dt=ee(i),Kt=Dt.getNorthWest().distanceTo(Dt.getSouthWest())*Dt.getNorthEast().distanceTo(Dt.getNorthWest());Kt<1700&&(ot=Sd(i));var bn=i.length,hn=[];for(y=0;y<bn;y++){var Yn=re(i[y]);hn.push(d.project(re([Yn.lat-ot.lat,Yn.lng-ot.lng])))}for(y=0,A=0;y<bn-1;y++)A+=hn[y].distanceTo(hn[y+1])/2;if(A===0)qe=hn[0];else for(y=0,W=0;y<bn-1;y++)if(he=hn[y],Se=hn[y+1],R=he.distanceTo(Se),W+=R,W>A){ke=(W-A)/R,qe=[Se.x-ke*(Se.x-he.x),Se.y-ke*(Se.y-he.y)];break}var Vn=d.unproject(Q(qe));return re([Vn.lat+ot.lat,Vn.lng+ot.lng])}var nm={__proto__:null,simplify:rc,pointToSegmentDistance:Ju,closestPointOnSegment:nf,clipSegment:em,_getEdgeIntersection:ic,_getBitCode:bi,_sqClosestPointOnSegment:ji,isFlat:da,_flat:tm,polylineCenter:sm},Pd={project:function(i){return new U(i.lng,i.lat)},unproject:function(i){return new V(i.y,i.x)},bounds:new z([-180,-90],[180,90])},Ed={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var d=Math.PI/180,y=this.R,A=i.lat*d,R=this.R_MINOR/y,W=Math.sqrt(1-R*R),he=W*Math.sin(A),Se=Math.tan(Math.PI/4-A/2)/Math.pow((1-he)/(1+he),W/2);return A=-y*Math.log(Math.max(Se,1e-10)),new U(i.lng*d*y,A)},unproject:function(i){for(var d=180/Math.PI,y=this.R,A=this.R_MINOR/y,R=Math.sqrt(1-A*A),W=Math.exp(-i.y/y),he=Math.PI/2-2*Math.atan(W),Se=0,ke=.1,qe;Se<15&&Math.abs(ke)>1e-7;Se++)qe=R*Math.sin(he),qe=Math.pow((1-qe)/(1+qe),R/2),ke=Math.PI/2-2*Math.atan(W*qe)-he,he+=ke;return new V(he*d,i.x*d/y)}},lf={__proto__:null,LonLat:Pd,Mercator:Ed,SphericalMercator:Pe},cf=o({},me,{code:"EPSG:3395",projection:Ed,transformation:(function(){var i=.5/(Math.PI*Ed.R);return Je(i,.5,-i,.5)})()}),am=o({},me,{code:"EPSG:4326",projection:Pd,transformation:Je(1/180,1,-1/180,.5)}),df=o({},ae,{projection:Pd,transformation:Je(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,d){var y=d.lng-i.lng,A=d.lat-i.lat;return Math.sqrt(y*y+A*A)},infinite:!0});ae.Earth=me,ae.EPSG3395=cf,ae.EPSG3857=tt,ae.EPSG900913=nt,ae.EPSG4326=am,ae.Simple=df;var Ia=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var d=i.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var y=this.getEvents();d.on(y,this),this.once("remove",function(){d.off(y,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});ls.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var d=f(i);return this._layers[d]?this:(this._layers[d]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var d=f(i);return this._layers[d]?(this._loaded&&i.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return f(i)in this._layers},eachLayer:function(i,d){for(var y in this._layers)i.call(d,this._layers[y]);return this},_addLayers:function(i){i=i?k(i)?i:[i]:[];for(var d=0,y=i.length;d<y;d++)this.addLayer(i[d])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var d=f(i);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,d=-1/0,y=this._getZoomSpan();for(var A in this._zoomBoundLayers){var R=this._zoomBoundLayers[A].options;i=R.minZoom===void 0?i:Math.min(i,R.minZoom),d=R.maxZoom===void 0?d:Math.max(d,R.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=i===1/0?void 0:i,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Br=Ia.extend({initialize:function(i,d){C(this,d),this._layers={};var y,A;if(i)for(y=0,A=i.length;y<A;y++)this.addLayer(i[y])},addLayer:function(i){var d=this.getLayerId(i);return this._layers[d]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var d=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(i){var d=typeof i=="number"?i:this.getLayerId(i);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var d=Array.prototype.slice.call(arguments,1),y,A;for(y in this._layers)A=this._layers[y],A[i]&&A[i].apply(A,d);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,d){for(var y in this._layers)i.call(d,this._layers[y]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),il=function(i,d){return new Br(i,d)},vr=Br.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Br.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Br.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new G;for(var d in this._layers){var y=this._layers[d];i.extend(y.getBounds?y.getBounds():y.getLatLng())}return i}}),rm=function(i,d){return new vr(i,d)},Ni=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){C(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,d){var y=this._getIconUrl(i);if(!y){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(y,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(A,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(i,d){var y=this.options,A=y[d+"Size"];typeof A=="number"&&(A=[A,A]);var R=Q(A),W=Q(d==="shadow"&&y.shadowAnchor||y.iconAnchor||R&&R.divideBy(2,!0));i.className="leaflet-marker-"+d+" "+(y.className||""),W&&(i.style.marginLeft=-W.x+"px",i.style.marginTop=-W.y+"px"),R&&(i.style.width=R.x+"px",i.style.height=R.y+"px")},_createImg:function(i,d){return d=d||document.createElement("img"),d.src=i,d},_getIconUrl:function(i){return ze.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function im(i){return new Ni(i)}var no=Ni.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof no.imagePath!="string"&&(no.imagePath=this._detectIconPath()),(this.options.imagePath||no.imagePath)+Ni.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var d=function(y,A,R){var W=A.exec(y);return W&&W[R]};return i=d(i,/^url\((['"])?(.+)\1\)$/,2),i&&d(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=ft("div","leaflet-default-icon-path",document.body),d=Ts(i,"background-image")||Ts(i,"backgroundImage");if(document.body.removeChild(i),d=this._stripUrl(d),d)return d;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),kd=ca.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Da(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ht(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ls(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var d=this._marker,y=d._map,A=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,W=xr(d._icon),he=y.getPixelBounds(),Se=y.getPixelOrigin(),ke=se(he.min._subtract(Se).add(R),he.max._subtract(Se).subtract(R));if(!ke.contains(W)){var qe=Q((Math.max(ke.max.x,W.x)-ke.max.x)/(he.max.x-ke.max.x)-(Math.min(ke.min.x,W.x)-ke.min.x)/(he.min.x-ke.min.x),(Math.max(ke.max.y,W.y)-ke.max.y)/(he.max.y-ke.max.y)-(Math.min(ke.min.y,W.y)-ke.min.y)/(he.min.y-ke.min.y)).multiplyBy(A);y.panBy(qe,{animate:!1}),this._draggable._newPos._add(qe),this._draggable._startPos._add(qe),tn(d._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=X(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,i)))},_onDrag:function(i){var d=this._marker,y=d._shadow,A=xr(d._icon),R=d._map.layerPointToLatLng(A);y&&tn(y,A),d._latlng=R,i.latlng=R,i.oldLatLng=this._oldLatLng,d.fire("move",i).fire("drag",i)},_onDragEnd:function(i){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),yr=Ia.extend({options:{icon:new no,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,d){C(this,d),this._latlng=re(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var d=this._latlng;return this._latlng=re(i),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=i.icon.createIcon(this._icon),A=!1;y!==this._icon&&(this._icon&&this._removeIcon(),A=!0,i.title&&(y.title=i.title),y.tagName==="IMG"&&(y.alt=i.alt||"")),Ht(y,d),i.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(y,"focus",this._panOnFocus,this);var R=i.icon.createShadow(this._shadow),W=!1;R!==this._shadow&&(this._removeShadow(),W=!0),R&&(Ht(R,d),R.alt=""),this._shadow=R,i.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&W&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ds(this._icon,"focus",this._panOnFocus,this),ds(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ds(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&tn(this._icon,i),this._shadow&&tn(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var d=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),kd)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new kd(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Bn(this._icon,i),this._shadow&&Bn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var d=this.options.icon.options,y=d.iconSize?Q(d.iconSize):Q(0,0),A=d.iconAnchor?Q(d.iconAnchor):Q(0,0);i.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:y.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uf(i,d){return new yr(i,d)}var Ur=Ia.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return C(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),oc=Ur.extend({options:{fill:!0,radius:10},initialize:function(i,d){C(this,d),this._latlng=re(i),this._radius=this.options.radius},setLatLng:function(i){var d=this._latlng;return this._latlng=re(i),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var d=i&&i.radius||this._radius;return Ur.prototype.setStyle.call(this,i),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,d=this._radiusY||i,y=this._clickTolerance(),A=[i+y,d+y];this._pxBounds=new z(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function om(i,d){return new oc(i,d)}var lc=oc.extend({initialize:function(i,d,y){if(typeof d=="number"&&(d=o({},y,{radius:d})),C(this,d),this._latlng=re(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new G(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ur.prototype.setStyle,_project:function(){var i=this._latlng.lng,d=this._latlng.lat,y=this._map,A=y.options.crs;if(A.distance===me.distance){var R=Math.PI/180,W=this._mRadius/me.R/R,he=y.project([d+W,i]),Se=y.project([d-W,i]),ke=he.add(Se).divideBy(2),qe=y.unproject(ke).lat,ot=Math.acos((Math.cos(W*R)-Math.sin(d*R)*Math.sin(qe*R))/(Math.cos(d*R)*Math.cos(qe*R)))/R;(isNaN(ot)||ot===0)&&(ot=W/Math.cos(Math.PI/180*d)),this._point=ke.subtract(y.getPixelOrigin()),this._radius=isNaN(ot)?0:ke.x-y.project([qe,i-ot]).x,this._radiusY=ke.y-he.y}else{var Dt=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(Dt).x}this._updateBounds()}});function ol(i,d,y){return new lc(i,d,y)}var Xn=Ur.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,d){C(this,d),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var d=1/0,y=null,A=ji,R,W,he=0,Se=this._parts.length;he<Se;he++)for(var ke=this._parts[he],qe=1,ot=ke.length;qe<ot;qe++){R=ke[qe-1],W=ke[qe];var Dt=A(i,R,W,!0);Dt<d&&(d=Dt,y=A(i,R,W))}return y&&(y.distance=Math.sqrt(d)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sm(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,d){return d=d||this._defaultShape(),i=re(i),d.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new G,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return da(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var d=[],y=da(i),A=0,R=i.length;A<R;A++)y?(d[A]=re(i[A]),this._bounds.extend(d[A])):d[A]=this._convertLatLngs(i[A]);return d},_project:function(){var i=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),d=new U(i,i);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(i,d,y){var A=i[0]instanceof V,R=i.length,W,he;if(A){for(he=[],W=0;W<R;W++)he[W]=this._map.latLngToLayerPoint(i[W]),y.extend(he[W]);d.push(he)}else for(W=0;W<R;W++)this._projectLatlngs(i[W],d,y)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,y,A,R,W,he,Se,ke;for(y=0,R=0,W=this._rings.length;y<W;y++)for(ke=this._rings[y],A=0,he=ke.length;A<he-1;A++)Se=em(ke[A],ke[A+1],i,A,!0),Se&&(d[R]=d[R]||[],d[R].push(Se[0]),(Se[1]!==ke[A+1]||A===he-2)&&(d[R].push(Se[1]),R++))}},_simplifyPoints:function(){for(var i=this._parts,d=this.options.smoothFactor,y=0,A=i.length;y<A;y++)i[y]=rc(i[y],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,d){var y,A,R,W,he,Se,ke=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(y=0,W=this._parts.length;y<W;y++)for(Se=this._parts[y],A=0,he=Se.length,R=he-1;A<he;R=A++)if(!(!d&&A===0)&&Ju(i,Se[R],Se[A])<=ke)return!0;return!1}});function mf(i,d){return new Xn(i,d)}Xn._flat=tm;var br=Xn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var d=Xn.prototype._convertLatLngs.call(this,i),y=d.length;return y>=2&&d[0]instanceof V&&d[0].equals(d[y-1])&&d.pop(),d},_setLatLngs:function(i){Xn.prototype._setLatLngs.call(this,i),da(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return da(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,d=this.options.weight,y=new U(d,d);if(i=new z(i.min.subtract(y),i.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,R=this._rings.length,W;A<R;A++)W=Cd(this._rings[A],i,!0),W.length&&this._parts.push(W)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var d=!1,y,A,R,W,he,Se,ke,qe;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(W=0,ke=this._parts.length;W<ke;W++)for(y=this._parts[W],he=0,qe=y.length,Se=qe-1;he<qe;Se=he++)A=y[he],R=y[Se],A.y>i.y!=R.y>i.y&&i.x<(R.x-A.x)*(i.y-A.y)/(R.y-A.y)+A.x&&(d=!d);return d||Xn.prototype._containsPoint.call(this,i,!0)}});function hf(i,d){return new br(i,d)}var Qa=vr.extend({initialize:function(i,d){C(this,d),this._layers={},i&&this.addData(i)},addData:function(i){var d=k(i)?i:i.features,y,A,R;if(d){for(y=0,A=d.length;y<A;y++)R=d[y],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var W=this.options;if(W.filter&&!W.filter(i))return this;var he=ao(i,W);return he?(he.feature=hc(i),he.defaultOptions=he.options,this.resetStyle(he),W.onEachFeature&&W.onEachFeature(i,he),this.addLayer(he)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(d){this._setLayerStyle(d,i)},this)},_setLayerStyle:function(i,d){i.setStyle&&(typeof d=="function"&&(d=d(i.feature)),i.setStyle(d))}});function ao(i,d){var y=i.type==="Feature"?i.geometry:i,A=y?y.coordinates:null,R=[],W=d&&d.pointToLayer,he=d&&d.coordsToLatLng||dc,Se,ke,qe,ot;if(!A&&!y)return null;switch(y.type){case"Point":return Se=he(A),cc(W,i,Se,d);case"MultiPoint":for(qe=0,ot=A.length;qe<ot;qe++)Se=he(A[qe]),R.push(cc(W,i,Se,d));return new vr(R);case"LineString":case"MultiLineString":return ke=ll(A,y.type==="LineString"?0:1,he),new Xn(ke,d);case"Polygon":case"MultiPolygon":return ke=ll(A,y.type==="Polygon"?1:2,he),new br(ke,d);case"GeometryCollection":for(qe=0,ot=y.geometries.length;qe<ot;qe++){var Dt=ao({geometry:y.geometries[qe],type:"Feature",properties:i.properties},d);Dt&&R.push(Dt)}return new vr(R);case"FeatureCollection":for(qe=0,ot=y.features.length;qe<ot;qe++){var Kt=ao(y.features[qe],d);Kt&&R.push(Kt)}return new vr(R);default:throw new Error("Invalid GeoJSON object.")}}function cc(i,d,y,A){return i?i(d,y):new yr(y,A&&A.markersInheritOptions&&A)}function dc(i){return new V(i[1],i[0],i[2])}function ll(i,d,y){for(var A=[],R=0,W=i.length,he;R<W;R++)he=d?ll(i[R],d-1,y):(y||dc)(i[R]),A.push(he);return A}function uc(i,d){return i=re(i),i.alt!==void 0?[j(i.lng,d),j(i.lat,d),j(i.alt,d)]:[j(i.lng,d),j(i.lat,d)]}function mc(i,d,y,A){for(var R=[],W=0,he=i.length;W<he;W++)R.push(d?mc(i[W],da(i[W])?0:d-1,y,A):uc(i[W],A));return!d&&y&&R.length>0&&R.push(R[0].slice()),R}function ro(i,d){return i.feature?o({},i.feature,{geometry:d}):hc(d)}function hc(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Td={toGeoJSON:function(i){return ro(this,{type:"Point",coordinates:uc(this.getLatLng(),i)})}};yr.include(Td),lc.include(Td),oc.include(Td),Xn.include({toGeoJSON:function(i){var d=!da(this._latlngs),y=mc(this._latlngs,d?1:0,!1,i);return ro(this,{type:(d?"Multi":"")+"LineString",coordinates:y})}}),br.include({toGeoJSON:function(i){var d=!da(this._latlngs),y=d&&!da(this._latlngs[0]),A=mc(this._latlngs,y?2:d?1:0,!0,i);return d||(A=[A]),ro(this,{type:(y?"Multi":"")+"Polygon",coordinates:A})}}),Br.include({toMultiPoint:function(i){var d=[];return this.eachLayer(function(y){d.push(y.toGeoJSON(i).geometry.coordinates)}),ro(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(i){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(i);var y=d==="GeometryCollection",A=[];return this.eachLayer(function(R){if(R.toGeoJSON){var W=R.toGeoJSON(i);if(y)A.push(W.geometry);else{var he=hc(W);he.type==="FeatureCollection"?A.push.apply(A,he.features):A.push(he)}}}),y?ro(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function lm(i,d){return new Qa(i,d)}var Ma=lm,Vr=Ia.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,d,y){this._url=i,this._bounds=ee(d),C(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ds(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ga(this._image),this},bringToBack:function(){return this._map&&fr(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ee(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",d=this._image=i?this._url:ft("img");if(Ht(d,"leaflet-image-layer"),this._zoomAnimated&&Ht(d,"leaflet-zoom-animated"),this.options.className&&Ht(d,this.options.className),d.onselectstart=g,d.onmousemove=g,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(i){var d=this._map.getZoomScale(i.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Ea(this._image,y,d)},_reset:function(){var i=this._image,d=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=d.getSize();tn(i,d.min),i.style.width=y.x+"px",i.style.height=y.y+"px"},_updateOpacity:function(){Bn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),cm=function(i,d,y){return new Vr(i,d,y)},Dd=Vr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",d=this._image=i?this._url:ft("video");if(Ht(d,"leaflet-image-layer"),this._zoomAnimated&&Ht(d,"leaflet-zoom-animated"),this.options.className&&Ht(d,this.options.className),d.onselectstart=g,d.onmousemove=g,d.onloadeddata=u(this.fire,this,"load"),i){for(var y=d.getElementsByTagName("source"),A=[],R=0;R<y.length;R++)A.push(y[R].src);this._url=y.length>0?A:[d.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var W=0;W<this._url.length;W++){var he=ft("source");he.src=this._url[W],d.appendChild(he)}}});function dm(i,d,y){return new Dd(i,d,y)}var Id=Vr.extend({_initImage:function(){var i=this._image=this._url;Ht(i,"leaflet-image-layer"),this._zoomAnimated&&Ht(i,"leaflet-zoom-animated"),this.options.className&&Ht(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function Md(i,d,y){return new Id(i,d,y)}var Xa=Ia.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,d){i&&(i instanceof V||k(i))?(this._latlng=re(i),C(this,d)):(C(this,i),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Bn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Bn(this._container,1),this.bringToFront(),this.options.interactive&&(Ht(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Bn(this._container,0),this._removeTimeout=setTimeout(u(ds,void 0,this._container),200)):ds(this._container),this.options.interactive&&(Ls(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=re(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ga(this._container),this},bringToBack:function(){return this._map&&fr(this._container),this},_prepareOpen:function(i){var d=this._source;if(!d._map)return!1;if(d instanceof vr){d=null;var y=this._source._layers;for(var A in y)if(y[A]._map){d=y[A];break}if(!d)return!1;this._source=d}if(!i)if(d.getCenter)i=d.getCenter();else if(d.getLatLng)i=d.getLatLng();else if(d.getBounds)i=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")i.innerHTML=d;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),d=Q(this.options.offset),y=this._getAnchor();this._zoomAnimated?tn(this._container,i.add(y)):d=d.add(i).add(y);var A=this._containerBottom=-d.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=A+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});ls.include({_initOverlay:function(i,d,y,A){var R=d;return R instanceof i||(R=new i(A).setContent(d)),y&&R.setLatLng(y),R}}),Ia.include({_initOverlay:function(i,d,y,A){var R=y;return R instanceof i?(C(R,A),R._source=this):(R=d&&!A?d:new i(A,this),R.setContent(y)),R}});var pc=Xa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Xa.prototype.openOn.call(this,i)},onAdd:function(i){Xa.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ur||this._source.on("preclick",Ka))},onRemove:function(i){Xa.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ur||this._source.off("preclick",Ka))},getEvents:function(){var i=Xa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",d=this._container=ft("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=ft("div",i+"-content-wrapper",d);if(this._contentNode=ft("div",i+"-content",y),nl(d),tc(this._contentNode),zt(d,"contextmenu",Ka),this._tipContainer=ft("div",i+"-tip-container",d),this._tip=ft("div",i+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=ft("a",i+"-close-button",d);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',zt(A,"click",function(R){Ks(R),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,d=i.style;d.width="",d.whiteSpace="nowrap";var y=i.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),d.width=y+1+"px",d.whiteSpace="",d.height="";var A=i.offsetHeight,R=this.options.maxHeight,W="leaflet-popup-scrolled";R&&A>R?(d.height=R+"px",Ht(i,W)):Ls(i,W),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var d=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),y=this._getAnchor();tn(this._container,d.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,d=parseInt(Ts(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+d,A=this._containerWidth,R=new U(this._containerLeft,-y-this._containerBottom);R._add(xr(this._container));var W=i.layerPointToContainerPoint(R),he=Q(this.options.autoPanPadding),Se=Q(this.options.autoPanPaddingTopLeft||he),ke=Q(this.options.autoPanPaddingBottomRight||he),qe=i.getSize(),ot=0,Dt=0;W.x+A+ke.x>qe.x&&(ot=W.x+A-qe.x+ke.x),W.x-ot-Se.x<0&&(ot=W.x-Se.x),W.y+y+ke.y>qe.y&&(Dt=W.y+y-qe.y+ke.y),W.y-Dt-Se.y<0&&(Dt=W.y-Se.y),(ot||Dt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ot,Dt]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),io=function(i,d){return new pc(i,d)};ls.mergeOptions({closePopupOnClick:!0}),ls.include({openPopup:function(i,d,y){return this._initOverlay(pc,i,d,y).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Ia.include({bindPopup:function(i,d){return this._popup=this._initOverlay(pc,this._popup,i,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof vr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Ta(i);var d=i.layer||i.target;if(this._popup._source===d&&!(d instanceof Ur)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=d,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var oo=Xa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Xa.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Xa.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Xa.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",d=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var d,y,A=this._map,R=this._container,W=A.latLngToContainerPoint(A.getCenter()),he=A.layerPointToContainerPoint(i),Se=this.options.direction,ke=R.offsetWidth,qe=R.offsetHeight,ot=Q(this.options.offset),Dt=this._getAnchor();Se==="top"?(d=ke/2,y=qe):Se==="bottom"?(d=ke/2,y=0):Se==="center"?(d=ke/2,y=qe/2):Se==="right"?(d=0,y=qe/2):Se==="left"?(d=ke,y=qe/2):he.x<W.x?(Se="right",d=0,y=qe/2):(Se="left",d=ke+(ot.x+Dt.x)*2,y=qe/2),i=i.subtract(Q(d,y,!0)).add(ot).add(Dt),Ls(R,"leaflet-tooltip-right"),Ls(R,"leaflet-tooltip-left"),Ls(R,"leaflet-tooltip-top"),Ls(R,"leaflet-tooltip-bottom"),Ht(R,"leaflet-tooltip-"+Se),tn(R,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Bn(this._container,i)},_animateZoom:function(i){var d=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(d)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),cl=function(i,d){return new oo(i,d)};ls.include({openTooltip:function(i,d,y){return this._initOverlay(oo,i,d,y).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Ia.include({bindTooltip:function(i,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(oo,this._tooltip,i,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var d=i?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[d](y),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof vr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var d=typeof i.getElement=="function"&&i.getElement();d&&(zt(d,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),zt(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var d=typeof i.getElement=="function"&&i.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var d=i.latlng,y,A;this._tooltip.options.sticky&&i.originalEvent&&(y=this._map.mouseEventToContainerPoint(i.originalEvent),A=this._map.containerPointToLayerPoint(y),d=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(d)}});var fc=Ni.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var d=i&&i.tagName==="DIV"?i:document.createElement("div"),y=this.options;if(y.html instanceof Element?(zn(d),d.appendChild(y.html)):d.innerHTML=y.html!==!1?y.html:"",y.bgPos){var A=Q(y.bgPos);d.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function um(i){return new fc(i)}Ni.Default=no;var Hr=Ia.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){C(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ds(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ga(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof U?i:new U(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var d=this.getPane().children,y=-i(-1/0,1/0),A=0,R=d.length,W;A<R;A++)W=d[A].style.zIndex,d[A]!==this._container&&W&&(y=i(y,+W));isFinite(y)&&(this.options.zIndex=y+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ze.ielt9){Bn(this._container,this.options.opacity);var i=+new Date,d=!1,y=!1;for(var A in this._tiles){var R=this._tiles[A];if(!(!R.current||!R.loaded)){var W=Math.min(1,(i-R.loaded)/200);Bn(R.el,W),W<1?d=!0:(R.active?y=!0:this._onOpaqueTile(R),R.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),d&&(I(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,d=this.options.maxZoom;if(i!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===i?(this._levels[y].el.style.zIndex=d-Math.abs(i-y),this._onUpdateLevel(y)):(ds(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var A=this._levels[i],R=this._map;return A||(A=this._levels[i]={},A.el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=d,A.origin=R.project(R.unproject(R.getPixelOrigin()),i).round(),A.zoom=i,this._setZoomTransform(A,R.getCenter(),R.getZoom()),g(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,d,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)d=this._tiles[i],d.retain=d.current;for(i in this._tiles)if(d=this._tiles[i],d.current&&!d.active){var A=d.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var d in this._tiles)this._tiles[d].coords.z===i&&this._removeTile(d)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ds(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,d,y,A){var R=Math.floor(i/2),W=Math.floor(d/2),he=y-1,Se=new U(+R,+W);Se.z=+he;var ke=this._tileCoordsToKey(Se),qe=this._tiles[ke];return qe&&qe.active?(qe.retain=!0,!0):(qe&&qe.loaded&&(qe.retain=!0),he>A?this._retainParent(R,W,he,A):!1)},_retainChildren:function(i,d,y,A){for(var R=2*i;R<2*i+2;R++)for(var W=2*d;W<2*d+2;W++){var he=new U(R,W);he.z=y+1;var Se=this._tileCoordsToKey(he),ke=this._tiles[Se];if(ke&&ke.active){ke.retain=!0;continue}else ke&&ke.loaded&&(ke.retain=!0);y+1<A&&this._retainChildren(R,W,y+1,A)}},_resetView:function(i){var d=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var d=this.options;return d.minNativeZoom!==void 0&&i<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<i?d.maxNativeZoom:i},_setView:function(i,d,y,A){var R=Math.round(d);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var W=this.options.updateWhenZooming&&R!==this._tileZoom;(!A||W)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(i),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(i,d)},_setZoomTransforms:function(i,d){for(var y in this._levels)this._setZoomTransform(this._levels[y],i,d)},_setZoomTransform:function(i,d,y){var A=this._map.getZoomScale(y,i.zoom),R=i.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(d,y)).round();ze.any3d?Ea(i.el,R,A):tn(i.el,R)},_resetGrid:function(){var i=this._map,d=i.options.crs,y=this._tileSize=this.getTileSize(),A=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,d.wrapLng[0]],A).x/y.x),Math.ceil(i.project([0,d.wrapLng[1]],A).x/y.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([d.wrapLat[0],0],A).y/y.x),Math.ceil(i.project([d.wrapLat[1],0],A).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var d=this._map,y=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),A=d.getZoomScale(y,this._tileZoom),R=d.project(i,this._tileZoom).floor(),W=d.getSize().divideBy(A*2);return new z(R.subtract(W),R.add(W))},_update:function(i){var d=this._map;if(d){var y=this._clampZoom(d.getZoom());if(i===void 0&&(i=d.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(i),R=this._pxBoundsToTileRange(A),W=R.getCenter(),he=[],Se=this.options.keepBuffer,ke=new z(R.getBottomLeft().subtract([Se,-Se]),R.getTopRight().add([Se,-Se]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var qe in this._tiles){var ot=this._tiles[qe].coords;(ot.z!==this._tileZoom||!ke.contains(new U(ot.x,ot.y)))&&(this._tiles[qe].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(i,y);return}for(var Dt=R.min.y;Dt<=R.max.y;Dt++)for(var Kt=R.min.x;Kt<=R.max.x;Kt++){var bn=new U(Kt,Dt);if(bn.z=this._tileZoom,!!this._isValidTile(bn)){var hn=this._tiles[this._tileCoordsToKey(bn)];hn?hn.current=!0:he.push(bn)}}if(he.sort(function(Vn,ho){return Vn.distanceTo(W)-ho.distanceTo(W)}),he.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Yn=document.createDocumentFragment();for(Kt=0;Kt<he.length;Kt++)this._addTile(he[Kt],Yn);this._level.el.appendChild(Yn)}}}},_isValidTile:function(i){var d=this._map.options.crs;if(!d.infinite){var y=this._globalTileRange;if(!d.wrapLng&&(i.x<y.min.x||i.x>y.max.x)||!d.wrapLat&&(i.y<y.min.y||i.y>y.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(i);return ee(this.options.bounds).overlaps(A)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var d=this._map,y=this.getTileSize(),A=i.scaleBy(y),R=A.add(y),W=d.unproject(A,i.z),he=d.unproject(R,i.z);return[W,he]},_tileCoordsToBounds:function(i){var d=this._tileCoordsToNwSe(i),y=new G(d[0],d[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var d=i.split(":"),y=new U(+d[0],+d[1]);return y.z=+d[2],y},_removeTile:function(i){var d=this._tiles[i];d&&(ds(d.el),delete this._tiles[i],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ht(i,"leaflet-tile");var d=this.getTileSize();i.style.width=d.x+"px",i.style.height=d.y+"px",i.onselectstart=g,i.onmousemove=g,ze.ielt9&&this.options.opacity<1&&Bn(i,this.options.opacity)},_addTile:function(i,d){var y=this._getTilePos(i),A=this._tileCoordsToKey(i),R=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(R),this.createTile.length<2&&X(u(this._tileReady,this,i,null,R)),tn(R,y),this._tiles[A]={el:R,coords:i,current:!0},d.appendChild(R),this.fire("tileloadstart",{tile:R,coords:i})},_tileReady:function(i,d,y){d&&this.fire("tileerror",{error:d,tile:y,coords:i});var A=this._tileCoordsToKey(i);y=this._tiles[A],y&&(y.loaded=+new Date,this._map._fadeAnimated?(Bn(y.el,0),I(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),d||(Ht(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ze.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var d=new U(this._wrapX?x(i.x,this._wrapX):i.x,this._wrapY?x(i.y,this._wrapY):i.y);return d.z=i.z,d},_pxBoundsToTileRange:function(i){var d=this.getTileSize();return new z(i.min.unscaleBy(d).floor(),i.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function lo(i){return new Hr(i)}var qr=Hr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,d){this._url=i,d=C(this,d),d.detectRetina&&ze.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,d){return this._url===i&&d===void 0&&(d=!0),this._url=i,d||this.redraw(),this},createTile:function(i,d){var y=document.createElement("img");return zt(y,"load",u(this._tileOnLoad,this,d,y)),zt(y,"error",u(this._tileOnError,this,d,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(i),y},getTileUrl:function(i){var d={r:ze.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-i.y;this.options.tms&&(d.y=y),d["-y"]=y}return _(this._url,o(d,this.options))},_tileOnLoad:function(i,d){ze.ielt9?setTimeout(u(i,this,null,d),0):i(null,d)},_tileOnError:function(i,d,y){var A=this.options.errorTileUrl;A&&d.getAttribute("src")!==A&&(d.src=A),i(y,d)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,d=this.options.maxZoom,y=this.options.zoomReverse,A=this.options.zoomOffset;return y&&(i=d-i),i+A},_getSubdomain:function(i){var d=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var i,d;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(d=this._tiles[i].el,d.onload=g,d.onerror=g,!d.complete)){d.src=M;var y=this._tiles[i].coords;ds(d),delete this._tiles[i],this.fire("tileabort",{tile:d,coords:y})}},_removeTile:function(i){var d=this._tiles[i];if(d)return d.el.setAttribute("src",M),Hr.prototype._removeTile.call(this,i)},_tileReady:function(i,d,y){if(!(!this._map||y&&y.getAttribute("src")===M))return Hr.prototype._tileReady.call(this,i,d,y)}});function Rd(i,d){return new qr(i,d)}var dl=qr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,d){this._url=i;var y=o({},this.defaultWmsParams);for(var A in d)A in this.options||(y[A]=d[A]);d=C(this,d);var R=d.detectRetina&&ze.retina?2:1,W=this.getTileSize();y.width=W.x*R,y.height=W.y*R,this.wmsParams=y},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,qr.prototype.onAdd.call(this,i)},getTileUrl:function(i){var d=this._tileCoordsToNwSe(i),y=this._crs,A=se(y.project(d[0]),y.project(d[1])),R=A.min,W=A.max,he=(this._wmsVersion>=1.3&&this._crs===am?[R.y,R.x,W.y,W.x]:[R.x,R.y,W.x,W.y]).join(","),Se=qr.prototype.getTileUrl.call(this,i);return Se+S(this.wmsParams,Se,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+he},setParams:function(i,d){return o(this.wmsParams,i),d||this.redraw(),this}});function mm(i,d){return new dl(i,d)}qr.WMS=dl,Rd.wms=mm;var Ya=Ia.extend({options:{padding:.1},initialize:function(i){C(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,d){var y=this._map.getZoomScale(d,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,d),W=A.multiplyBy(-y).add(R).subtract(this._map._getNewPixelOrigin(i,d));ze.any3d?Ea(this._container,W,y):tn(this._container,W)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,d=this._map.getSize(),y=this._map.containerPointToLayerPoint(d.multiplyBy(-i)).round();this._bounds=new z(y,y.add(d.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Od=Ya.extend({options:{tolerance:0},getEvents:function(){var i=Ya.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ya.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");zt(i,"mousemove",this._onMouseMove,this),zt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),zt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,ds(this._container),Ds(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var d in this._layers)i=this._layers[d],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ya.prototype._update.call(this);var i=this._bounds,d=this._container,y=i.getSize(),A=ze.retina?2:1;tn(d,i.min),d.width=A*y.x,d.height=A*y.y,d.style.width=y.x+"px",d.style.height=y.y+"px",ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Ya.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var d=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var d=i._order,y=d.next,A=d.prev;y?y.prev=A:this._drawLast=A,A?A.next=y:this._drawFirst=y,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var d=i.options.dashArray.split(/[, ]+/),y=[],A,R;for(R=0;R<d.length;R++){if(A=Number(d[R]),isNaN(A))return;y.push(A)}i.options._dashArray=y}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var d=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(i._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(i._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var d=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,d=this._redrawBounds;if(this._ctx.save(),d){var y=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)i=A.layer,(!d||i._pxBounds&&i._pxBounds.intersects(d))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,d){if(this._drawing){var y,A,R,W,he=i._parts,Se=he.length,ke=this._ctx;if(Se){for(ke.beginPath(),y=0;y<Se;y++){for(A=0,R=he[y].length;A<R;A++)W=he[y][A],ke[A?"lineTo":"moveTo"](W.x,W.y);d&&ke.closePath()}this._fillStroke(ke,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var d=i._point,y=this._ctx,A=Math.max(Math.round(i._radius),1),R=(Math.max(Math.round(i._radiusY),1)||A)/A;R!==1&&(y.save(),y.scale(1,R)),y.beginPath(),y.arc(d.x,d.y/R,A,0,Math.PI*2,!1),R!==1&&y.restore(),this._fillStroke(y,i)}},_fillStroke:function(i,d){var y=d.options;y.fill&&(i.globalAlpha=y.fillOpacity,i.fillStyle=y.fillColor||y.color,i.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(i.setLineDash&&i.setLineDash(d.options&&d.options._dashArray||[]),i.globalAlpha=y.opacity,i.lineWidth=y.weight,i.strokeStyle=y.color,i.lineCap=y.lineCap,i.lineJoin=y.lineJoin,i.stroke())},_onClick:function(i){for(var d=this._map.mouseEventToLayerPoint(i),y,A,R=this._drawFirst;R;R=R.next)y=R.layer,y.options.interactive&&y._containsPoint(d)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(y))&&(A=y);this._fireEvent(A?[A]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,d)}},_handleMouseOut:function(i){var d=this._hoveredLayer;d&&(Ls(this._container,"leaflet-interactive"),this._fireEvent([d],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,d){if(!this._mouseHoverThrottled){for(var y,A,R=this._drawFirst;R;R=R.next)y=R.layer,y.options.interactive&&y._containsPoint(d)&&(A=y);A!==this._hoveredLayer&&(this._handleMouseOut(i),A&&(Ht(this._container,"leaflet-interactive"),this._fireEvent([A],i,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,d,y){this._map._fireDOMEvent(d,y||d.type,i)},_bringToFront:function(i){var d=i._order;if(d){var y=d.next,A=d.prev;if(y)y.prev=A;else return;A?A.next=y:y&&(this._drawFirst=y),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(i)}},_bringToBack:function(i){var d=i._order;if(d){var y=d.next,A=d.prev;if(A)A.next=y;else return;y?y.prev=A:A&&(this._drawLast=A),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(i)}}});function Ld(i){return ze.canvas?new Od(i):null}var co=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),hm={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ya.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var d=i._container=co("shape");Ht(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",i._path=co("path"),d.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var d=i._container;this._container.appendChild(d),i.options.interactive&&i.addInteractiveTarget(d)},_removePath:function(i){var d=i._container;ds(d),i.removeInteractiveTarget(d),delete this._layers[f(i)]},_updateStyle:function(i){var d=i._stroke,y=i._fill,A=i.options,R=i._container;R.stroked=!!A.stroke,R.filled=!!A.fill,A.stroke?(d||(d=i._stroke=co("stroke")),R.appendChild(d),d.weight=A.weight+"px",d.color=A.color,d.opacity=A.opacity,A.dashArray?d.dashStyle=k(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=A.lineCap.replace("butt","flat"),d.joinstyle=A.lineJoin):d&&(R.removeChild(d),i._stroke=null),A.fill?(y||(y=i._fill=co("fill")),R.appendChild(y),y.color=A.fillColor||A.color,y.opacity=A.fillOpacity):y&&(R.removeChild(y),i._fill=null)},_updateCircle:function(i){var d=i._point.round(),y=Math.round(i._radius),A=Math.round(i._radiusY||y);this._setPath(i,i._empty()?"M0 0":"AL "+d.x+","+d.y+" "+y+","+A+" 0,"+65535*360)},_setPath:function(i,d){i._path.v=d},_bringToFront:function(i){Ga(i._container)},_bringToBack:function(i){fr(i._container)}},Ra=ze.vml?co:ct,wi=Ya.extend({_initContainer:function(){this._container=Ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ds(this._container),Ds(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ya.prototype._update.call(this);var i=this._bounds,d=i.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,y.setAttribute("width",d.x),y.setAttribute("height",d.y)),tn(y,i.min),y.setAttribute("viewBox",[i.min.x,i.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(i){var d=i._path=Ra("path");i.options.className&&Ht(d,i.options.className),i.options.interactive&&Ht(d,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ds(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var d=i._path,y=i.options;d&&(y.stroke?(d.setAttribute("stroke",y.color),d.setAttribute("stroke-opacity",y.opacity),d.setAttribute("stroke-width",y.weight),d.setAttribute("stroke-linecap",y.lineCap),d.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?d.setAttribute("stroke-dasharray",y.dashArray):d.removeAttribute("stroke-dasharray"),y.dashOffset?d.setAttribute("stroke-dashoffset",y.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),y.fill?(d.setAttribute("fill",y.fillColor||y.color),d.setAttribute("fill-opacity",y.fillOpacity),d.setAttribute("fill-rule",y.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(i,d){this._setPath(i,wt(i._parts,d))},_updateCircle:function(i){var d=i._point,y=Math.max(Math.round(i._radius),1),A=Math.max(Math.round(i._radiusY),1)||y,R="a"+y+","+A+" 0 1,0 ",W=i._empty()?"M0 0":"M"+(d.x-y)+","+d.y+R+y*2+",0 "+R+-y*2+",0 ";this._setPath(i,W)},_setPath:function(i,d){i._path.setAttribute("d",d)},_bringToFront:function(i){Ga(i._path)},_bringToBack:function(i){fr(i._path)}});ze.vml&&wi.include(hm);function xc(i){return ze.svg||ze.vml?new wi(i):null}ls.include({getRenderer:function(i){var d=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var d=this._paneRenderers[i];return d===void 0&&(d=this._createRenderer({pane:i}),this._paneRenderers[i]=d),d},_createRenderer:function(i){return this.options.preferCanvas&&Ld(i)||xc(i)}});var pm=br.extend({initialize:function(i,d){br.prototype.initialize.call(this,this._boundsToLatLngs(i),d)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ee(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function pf(i,d){return new pm(i,d)}wi.create=Ra,wi.pointsToPath=wt,Qa.geometryToLayer=ao,Qa.coordsToLatLng=dc,Qa.coordsToLatLngs=ll,Qa.latLngToCoords=uc,Qa.latLngsToCoords=mc,Qa.getFeature=ro,Qa.asFeature=hc,ls.mergeOptions({boxZoom:!0});var uo=ca.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ds(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ds(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ps(),Yl(),this._startPoint=this._map.mouseEventToContainerPoint(i),zt(document,{contextmenu:Ta,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),Ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var d=new z(this._point,this._startPoint),y=d.getSize();tn(this._box,d.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(ds(this._box),Ls(this._container,"leaflet-crosshair")),Yi(),Jl(),Ds(document,{contextmenu:Ta,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new G(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ls.addInitHook("addHandler","boxZoom",uo),ls.mergeOptions({doubleClickZoom:!0});var fm=ca.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var d=this._map,y=d.getZoom(),A=d.options.zoomDelta,R=i.originalEvent.shiftKey?y-A:y+A;d.options.doubleClickZoom==="center"?d.setZoom(R):d.setZoomAround(i.containerPoint,R)}});ls.addInitHook("addHandler","doubleClickZoom",fm),ls.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fd=ca.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Da(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ls(this._map._container,"leaflet-grab"),Ls(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=ee(this._map.options.maxBounds);this._offsetLimit=se(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var d=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(d),this._prunePositions(d)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,d){return i-(i-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;i.x<d.min.x&&(i.x=this._viscousLimit(i.x,d.min.x)),i.y<d.min.y&&(i.y=this._viscousLimit(i.y,d.min.y)),i.x>d.max.x&&(i.x=this._viscousLimit(i.x,d.max.x)),i.y>d.max.y&&(i.y=this._viscousLimit(i.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,d=Math.round(i/2),y=this._initialWorldOffset,A=this._draggable._newPos.x,R=(A-d+y)%i+d-y,W=(A+d+y)%i-d-y,he=Math.abs(R+y)<Math.abs(W+y)?R:W;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=he},_onDragEnd:function(i){var d=this._map,y=d.options,A=!y.inertia||i.noInertia||this._times.length<2;if(d.fire("dragend",i),A)d.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),W=(this._lastTime-this._times[0])/1e3,he=y.easeLinearity,Se=R.multiplyBy(he/W),ke=Se.distanceTo([0,0]),qe=Math.min(y.inertiaMaxSpeed,ke),ot=Se.multiplyBy(qe/ke),Dt=qe/(y.inertiaDeceleration*he),Kt=ot.multiplyBy(-Dt/2).round();!Kt.x&&!Kt.y?d.fire("moveend"):(Kt=d._limitOffset(Kt,d.options.maxBounds),X(function(){d.panBy(Kt,{duration:Dt,easeLinearity:he,noMoveStart:!0,animate:!0})}))}}});ls.addInitHook("addHandler","dragging",Fd),ls.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $d=ca.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),zt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ds(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,d=document.documentElement,y=i.scrollTop||d.scrollTop,A=i.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(A,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var d=this._panKeys={},y=this.keyCodes,A,R;for(A=0,R=y.left.length;A<R;A++)d[y.left[A]]=[-1*i,0];for(A=0,R=y.right.length;A<R;A++)d[y.right[A]]=[i,0];for(A=0,R=y.down.length;A<R;A++)d[y.down[A]]=[0,i];for(A=0,R=y.up.length;A<R;A++)d[y.up[A]]=[0,-1*i]},_setZoomDelta:function(i){var d=this._zoomKeys={},y=this.keyCodes,A,R;for(A=0,R=y.zoomIn.length;A<R;A++)d[y.zoomIn[A]]=i;for(A=0,R=y.zoomOut.length;A<R;A++)d[y.zoomOut[A]]=-i},_addHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ds(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var d=i.keyCode,y=this._map,A;if(d in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(A=this._panKeys[d],i.shiftKey&&(A=Q(A).multiplyBy(3)),y.options.maxBounds&&(A=y._limitOffset(Q(A),y.options.maxBounds)),y.options.worldCopyJump){var R=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(A)));y.panTo(R)}else y.panBy(A)}else if(d in this._zoomKeys)y.setZoom(y.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;Ta(i)}}});ls.addInitHook("addHandler","keyboard",$d),ls.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Is=ca.extend({addHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ds(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var d=Qu(i),y=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var A=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),A),Ta(i)},_performZoom:function(){var i=this._map,d=i.getZoom(),y=this._map.options.zoomSnap||0;i._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,W=y?Math.ceil(R/y)*y:R,he=i._limitZoom(d+(this._delta>0?W:-W))-d;this._delta=0,this._startTime=null,he&&(i.options.scrollWheelZoom==="center"?i.setZoom(d+he):i.setZoomAround(this._lastMousePos,d+he))}});ls.addInitHook("addHandler","scrollWheelZoom",Is);var zd=600;ls.mergeOptions({tapHold:ze.touchNative&&ze.safari&&ze.mobile,tapTolerance:15});var ul=ca.extend({addHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ds(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var d=i.touches[0];this._startPos=this._newPos=new U(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(zt(document,"touchend",Ks),zt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),zd),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Ds(document,"touchend",Ks),Ds(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Ds(document,"touchend touchcancel contextmenu",this._cancel,this),Ds(document,"touchmove",this._onMove,this)},_onMove:function(i){var d=i.touches[0];this._newPos=new U(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,d){var y=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});y._simulated=!0,d.target.dispatchEvent(y)}});ls.addInitHook("addHandler","tapHold",ul),ls.mergeOptions({touchZoom:ze.touch,bounceAtZoomLimits:!0});var mo=ca.extend({addHooks:function(){Ht(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ls(this._map._container,"leaflet-touch-zoom"),Ds(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var d=this._map;if(!(!i.touches||i.touches.length!==2||d._animatingZoom||this._zooming)){var y=d.mouseEventToContainerPoint(i.touches[0]),A=d.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(y.add(A)._divideBy(2))),this._startDist=y.distanceTo(A),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),Ks(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var d=this._map,y=d.mouseEventToContainerPoint(i.touches[0]),A=d.mouseEventToContainerPoint(i.touches[1]),R=y.distanceTo(A)/this._startDist;if(this._zoom=d.getScaleZoom(R,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&R<1||this._zoom>d.getMaxZoom()&&R>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var W=y._add(A)._divideBy(2)._subtract(this._centerPoint);if(R===1&&W.x===0&&W.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(W),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var he=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(he,this,!0),Ks(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Ds(document,"touchmove",this._onTouchMove,this),Ds(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ls.addInitHook("addHandler","touchZoom",mo),ls.BoxZoom=uo,ls.DoubleClickZoom=fm,ls.Drag=Fd,ls.Keyboard=$d,ls.ScrollWheelZoom=Is,ls.TapHold=ul,ls.TouchZoom=mo,n.Bounds=z,n.Browser=ze,n.CRS=ae,n.Canvas=Od,n.Circle=lc,n.CircleMarker=oc,n.Class=te,n.Control=Qn,n.DivIcon=fc,n.DivOverlay=Xa,n.DomEvent=sc,n.DomUtil=sl,n.Draggable=Da,n.Evented=ce,n.FeatureGroup=vr,n.GeoJSON=Qa,n.GridLayer=Hr,n.Handler=ca,n.Icon=Ni,n.ImageOverlay=Vr,n.LatLng=V,n.LatLngBounds=G,n.Layer=Ia,n.LayerGroup=Br,n.LineUtil=nm,n.Map=ls,n.Marker=yr,n.Mixin=wd,n.Path=Ur,n.Point=U,n.PolyUtil=sf,n.Polygon=br,n.Polyline=Xn,n.Popup=pc,n.PosAnimation=nc,n.Projection=lf,n.Rectangle=pm,n.Renderer=Ya,n.SVG=wi,n.SVGOverlay=Id,n.TileLayer=qr,n.Tooltip=oo,n.Transformation=We,n.Util=B,n.VideoOverlay=Dd,n.bind=u,n.bounds=se,n.canvas=Ld,n.circle=ol,n.circleMarker=om,n.control=zr,n.divIcon=um,n.extend=o,n.featureGroup=rm,n.geoJSON=lm,n.geoJson=Ma,n.gridLayer=lo,n.icon=im,n.imageOverlay=cm,n.latLng=re,n.latLngBounds=ee,n.layerGroup=il,n.map=$r,n.marker=uf,n.point=Q,n.polygon=hf,n.polyline=mf,n.popup=io,n.rectangle=pf,n.setOptions=C,n.stamp=f,n.svg=xc,n.svgOverlay=Md,n.tileLayer=Rd,n.tooltip=cl,n.transformation=Je,n.version=r,n.videoOverlay=dm;var xm=window.L;n.noConflict=function(){return window.L=xm,this},window.L=n}))})(hu,hu.exports)),hu.exports}var Ko=A3();const Bu=Zg(Ko);function X2(t,s){const n=m.useRef(s);m.useEffect(function(){s!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),s!=null&&t.attributionControl.addAttribution(s)),n.current=s},[t,s])}const P3=1;function E3(t){return Object.freeze({__version:P3,map:t})}function $p(t,s){return Object.freeze({...t,...s})}const Y2=m.createContext(null),J2=Y2.Provider;function zp(){const t=m.useContext(Y2);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function eC(t){function s(n,r){const{instance:o,context:c}=t(n).current;return m.useImperativeHandle(r,()=>o),n.children==null?null:Ue.createElement(J2,{value:c},n.children)}return m.forwardRef(s)}function k3(t){function s(n,r){const[o,c]=m.useState(!1),{instance:u}=t(n,c).current;m.useImperativeHandle(r,()=>u),m.useEffect(function(){o&&u.update()},[u,o,n.children]);const h=u._contentNode;return h?sd.createPortal(n.children,h):null}return m.forwardRef(s)}function T3(t){function s(n,r){const{instance:o}=t(n).current;return m.useImperativeHandle(r,()=>o),null}return m.forwardRef(s)}function W0(t,s){const n=m.useRef();m.useEffect(function(){return s!=null&&t.instance.on(s),n.current=s,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,s])}function Bp(t,s){const n=t.pane??s.pane;return n?{...t,pane:n}:t}function D3(t,s){return function(r,o){const c=zp(),u=t(Bp(r,c),c);return X2(c.map,r.attribution),W0(u.current,r.eventHandlers),s(u.current,c,r,o),u}}function ud(t,s,n){return Object.freeze({instance:t,context:s,container:n})}function Up(t,s){return s==null?function(r,o){const c=m.useRef();return c.current||(c.current=t(r,o)),c}:function(r,o){const c=m.useRef();c.current||(c.current=t(r,o));const u=m.useRef(r),{instance:h}=c.current;return m.useEffect(function(){u.current!==r&&(s(h,r,u.current),u.current=r)},[h,r,o]),c}}function tC(t,s){m.useEffect(function(){return(s.layerContainer??s.map).addLayer(t.instance),function(){s.layerContainer?.removeLayer(t.instance),s.map.removeLayer(t.instance)}},[s,t])}function sC(t){return function(n){const r=zp(),o=t(Bp(n,r),r);return X2(r.map,n.attribution),W0(o.current,n.eventHandlers),tC(o.current,r),o}}function I3(t,s){const n=m.useRef();m.useEffect(function(){if(s.pathOptions!==n.current){const o=s.pathOptions??{};t.instance.setStyle(o),n.current=o}},[t,s])}function M3(t){return function(n){const r=zp(),o=t(Bp(n,r),r);return W0(o.current,n.eventHandlers),tC(o.current,r),I3(o.current,n),o}}function R3(t,s){const n=Up(t,s),r=sC(n);return eC(r)}function O3(t,s){const n=Up(t),r=D3(n,s);return k3(r)}function G0(t,s){const n=Up(t,s),r=M3(n);return eC(r)}function L3(t,s){const n=Up(t,s),r=sC(n);return T3(r)}function F3(t,s,n){const{opacity:r,zIndex:o}=s;r!=null&&r!==n.opacity&&t.setOpacity(r),o!=null&&o!==n.zIndex&&t.setZIndex(o)}function Z0(){return zp().map}function nC(t){const s=Z0();return m.useEffect(function(){return s.on(t),function(){s.off(t)}},[s,t]),s}function Lg(){return Lg=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function $3({bounds:t,boundsOptions:s,center:n,children:r,className:o,id:c,placeholder:u,style:h,whenReady:f,zoom:v,...x},g){const[j]=m.useState({className:o,id:c,style:h}),[w,N]=m.useState(null);m.useImperativeHandle(g,()=>w?.map??null,[w]);const C=m.useCallback(E=>{if(E!==null&&w===null){const _=new Ko.Map(E,x);n!=null&&v!=null?_.setView(n,v):t!=null&&_.fitBounds(t,s),f!=null&&_.whenReady(f),N(E3(_))}},[]);m.useEffect(()=>()=>{w?.map.remove()},[w]);const S=w?Ue.createElement(J2,{value:w},r):u??null;return Ue.createElement("div",Lg({},j,{ref:C}),S)}const aC=m.forwardRef($3),Fg=R3(function({position:s,...n},r){const o=new Ko.Marker(s,n);return ud(o,$p(r,{overlayContainer:o}))},function(s,n,r){n.position!==r.position&&s.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&s.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&s.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&s.setOpacity(n.opacity),s.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?s.dragging.enable():s.dragging.disable())}),jj=G0(function({positions:s,...n},r){const o=new Ko.Polygon(s,n);return ud(o,$p(r,{overlayContainer:o}))},function(s,n,r){n.positions!==r.positions&&s.setLatLngs(n.positions)}),z3=G0(function({positions:s,...n},r){const o=new Ko.Polyline(s,n);return ud(o,$p(r,{overlayContainer:o}))},function(s,n,r){n.positions!==r.positions&&s.setLatLngs(n.positions)}),B3=O3(function(s,n){const r=new Ko.Popup(s,n.overlayContainer);return ud(r,n)},function(s,n,{position:r},o){m.useEffect(function(){const{instance:u}=s;function h(v){v.popup===u&&(u.update(),o(!0))}function f(v){v.popup===u&&o(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){n.map.off({popupopen:h,popupclose:f}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(u)}},[s,n,o,r])}),U3=G0(function({bounds:s,...n},r){const o=new Ko.Rectangle(s,n);return ud(o,$p(r,{overlayContainer:o}))},function(s,n,r){n.bounds!==r.bounds&&s.setBounds(n.bounds)}),rC=L3(function({url:s,...n},r){const o=new Ko.TileLayer(s,Bp(n,r));return ud(o,r)},function(s,n,r){F3(s,n,r);const{url:o}=n;o!=null&&o!==r.url&&s.setUrl(o)}),V3={};delete Bu.Icon.Default.prototype._getIconUrl;Bu.Icon.Default.mergeOptions({iconRetinaUrl:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",import.meta.url).href,iconUrl:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",import.meta.url).href,shadowUrl:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",import.meta.url).href});const H3="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png",q3="/figma-assets/outdoor.png";function W3(){const t=V3??{},s=typeof window<"u"?window.__ENV__??{}:{};return String(t.URL_ONE_MEDIA??t.VITE_URL_ONE_MEDIA??s.URL_ONE_MEDIA??"").trim()}function G3(t){const s=String(t??"").trim();return s?/^https?:\/\//i.test(s)?s:`https://${s}`:"#"}function Z3(t){const s=String(t??"").replace(/\D/g,"");return s||null}function Zn(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function K3(t){if(!t)return"";const s=Number(t.discountValue??0);return t.discountType===ti.PERCENT?`-${s}%`:`-${Zn(s)}`}function mh(t,s){if(!s)return t;const n=Number(s.discountValue??0);return!Number.isFinite(t)||!Number.isFinite(n)||n<=0?t:s.discountType===ti.PERCENT?Math.max(0,t*(1-n/100)):Math.max(0,t-n)}function Q3(t){const s=[[t.addressStreet,t.addressNumber].filter(Boolean).join(", "),t.addressDistrict,[t.addressCity,t.addressState].filter(Boolean).join(" - ")].filter(Boolean).join(" | "),n=[t.basePriceWeek!=null?`Semanal: ${Zn(t.basePriceWeek)}`:null,t.basePriceMonth!=null?`Mensal: ${Zn(t.basePriceMonth)}`:null,t.basePriceDay!=null?`Diria: ${Zn(t.basePriceDay)}`:null].filter(Boolean).join(" | "),r=t.availability??"Disponvel",o=t.unitsCount!=null?`Faces/Telas: ${t.unitsCount} (Livres: ${t.availableUnitsCount??0})`:null,c=t.dailyImpressions?`Impacto/dia: ${t.dailyImpressions}`:null,u=t.latitude&&t.longitude?`Mapa: https://www.google.com/maps?q=${t.latitude},${t.longitude}`:null;return[` ${t.name} (${t.type})`,s?`  - Endereo: ${s}`:null,t.subcategory?`  - Categoria: ${t.subcategory}`:null,t.environment?`  - Ambiente: ${t.environment}`:null,`  - Status: ${r}`,o?`  - ${o}`:null,c?`  - ${c}`:null,n?`  - ${n}`:null,u?`  - ${u}`:null].filter(Boolean).join(`
`)}function X3(t,s){const n=`https://wa.me/${encodeURIComponent(t)}?text=${encodeURIComponent(s)}`;window.open(n,"_blank","noopener,noreferrer")}function Y3({lat:t,lng:s}){const n=Z0();return m.useEffect(()=>{!Number.isFinite(t)||!Number.isFinite(s)||n.setView([t,s],Math.max(n.getZoom(),14),{animate:!0})},[t,s,n]),null}function J3(){const t=Z0();return m.useEffect(()=>{const s=window.setTimeout(()=>{t.invalidateSize()},0);return()=>window.clearTimeout(s)},[t]),m.useEffect(()=>{const s=()=>t.invalidateSize();return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[t]),null}function iC({mode:t="internal",token:s}){const[n,r]=m.useState(""),[o,c]=m.useState("all"),[u,h]=m.useState("all"),[f,v]=m.useState("all"),[x,g]=m.useState("all"),[j,w]=m.useState(""),[N,C]=m.useState(!1),[S,E]=m.useState(""),[_,k]=m.useState(""),[T,M]=m.useState(""),[F,O]=m.useState(!1),[Z,q]=m.useState([]),[$,X]=m.useState(!1),[I,B]=m.useState(null),[te,ue]=m.useState(null),[Y,ce]=m.useState(!1),[U,ne]=m.useState(null);m.useEffect(()=>{const pe=new URLSearchParams(window.location.search),$e=(pe.get("q")||"").trim(),Xe=(pe.get("type")||"").trim(),mt=(pe.get("city")||"").trim(),fe=(pe.get("state")||"").trim(),Ye=(pe.get("status")||"").trim(),dt=(pe.get("ownerCompanyId")||"").trim();$e&&r($e),(Xe===Xt.OOH||Xe===Xt.DOOH)&&c(Xe),mt&&h(mt),fe&&v(fe),(Ye==="Disponvel"||Ye==="Parcial"||Ye==="Ocupado")&&g(Ye),dt&&w(dt)},[]),m.useEffect(()=>{const pe=new URLSearchParams(window.location.search);j?pe.set("ownerCompanyId",j):pe.delete("ownerCompanyId");const $e=pe.toString(),Xe=$e?`${window.location.pathname}?${$e}`:window.location.pathname;window.history.replaceState(null,"",Xe)},[j]);const Q=m.useMemo(()=>te?.points??[],[te?.points]),z=te?.company??null,se=m.useMemo(()=>te?.ownerCompanies??[],[te?.ownerCompanies]),G=async()=>{try{if(ce(!0),ne(null),t==="public"){const Xe=(s||"").trim();if(!Xe){ne("Link invlido: token ausente."),ue(null);return}const mt=await Tn.get("/public/media-kit",{params:{token:Xe,ownerCompanyId:j||void 0}});ue(mt.data);const fe=mt.data.selectedOwnerCompanyId??"";fe&&fe!==j&&w(fe);return}const pe=await Ie.get("/media-kit",{params:{ownerCompanyId:j||void 0}});ue(pe.data);const $e=pe.data.selectedOwnerCompanyId??"";$e&&$e!==j&&w($e)}catch(pe){const $e=pe?.response?.status===401?"Voc no tem permisso para acessar este Mdia Kit.":"No foi possvel carregar o Mdia Kit.";ne($e),ue(null)}finally{ce(!1)}};m.useEffect(()=>{G()},[t,s,j]);const ee=m.useMemo(()=>{const pe=new Set(Q.map($e=>$e.addressCity).filter(Boolean));return Array.from(pe).sort()},[Q]),V=m.useMemo(()=>{const pe=new Set(Q.map($e=>$e.addressState).filter(Boolean));return Array.from(pe).sort()},[Q]);m.useEffect(()=>{u!=="all"&&ee.length>0&&!ee.includes(u)&&h("all")},[ee]),m.useEffect(()=>{f!=="all"&&V.length>0&&!V.includes(f)&&v("all")},[V]);const re=m.useMemo(()=>{let pe=[...Q];if(o!=="all"&&(pe=pe.filter($e=>$e.type===o)),u!=="all"&&(pe=pe.filter($e=>$e.addressCity===u)),f!=="all"&&(pe=pe.filter($e=>$e.addressState===f)),x!=="all"&&(pe=pe.filter($e=>{const Xe=$e.availability??"Disponvel";return x==="Disponvel"?Xe==="Disponvel"||Xe==="Parcial":Xe===x})),n.trim()){const $e=n.toLowerCase();pe=pe.filter(Xe=>Xe.name.toLowerCase().includes($e)||Xe.addressCity?.toLowerCase().includes($e)||Xe.addressState?.toLowerCase().includes($e)||Xe.addressStreet?.toLowerCase().includes($e)||Xe.addressDistrict?.toLowerCase().includes($e))}return pe},[Q,o,u,f,x,n]),ae=pe=>{if(!pe.latitude||!pe.longitude)return null;const $e=Number(pe.latitude),Xe=Number(pe.longitude);if(!Number.isFinite($e)||!Number.isFinite(Xe))return null;const mt=16,fe="600x300",Ye=`${$e},${Xe}`,dt=`${$e},${Xe},red-pushpin`;return`https://staticmap.openstreetmap.de/staticmap.php?center=${encodeURIComponent(Ye)}&zoom=${mt}&size=${fe}&markers=${encodeURIComponent(dt)}`},me=pe=>{if(!pe.latitude||!pe.longitude)return null;const $e=Number(pe.latitude),Xe=Number(pe.longitude);if(!Number.isFinite($e)||!Number.isFinite(Xe))return null;const mt=.0045,fe=Xe-mt,Ye=Xe+mt,dt=$e+mt,kt=$e-mt,ht=`${fe},${kt},${Ye},${dt}`;return`https://www.openstreetmap.org/export/embed.html?bbox=${encodeURIComponent(ht)}&layer=mapnik&marker=${encodeURIComponent(`${$e},${Xe}`)}`};function oe({point:pe}){const $e=ae(pe),Xe=me(pe),[mt,fe]=m.useState(!1);return!$e||!Xe?e.jsx("div",{className:"px-3 py-3 text-xs text-gray-500",children:"Sem coordenadas para preview do mapa."}):mt?e.jsx("iframe",{title:`Mapa de ${pe.name}`,src:Xe,className:"w-full h-full",loading:"lazy",referrerPolicy:"no-referrer",style:{border:0}}):e.jsx("img",{src:$e,alt:`Mapa de ${pe.name}`,className:"w-full h-full object-cover",loading:"lazy",referrerPolicy:"no-referrer",onError:()=>fe(!0)})}const Pe=pe=>{try{const $e=document.createElement("textarea");$e.value=pe,$e.style.position="fixed",$e.style.left="-999999px",$e.style.top="-999999px",document.body.appendChild($e),$e.focus(),$e.select();const Xe=document.execCommand("copy");return document.body.removeChild($e),Xe}catch{return!1}},We=pe=>{try{const $e=new URL(pe),Xe=$e.searchParams,mt=n.trim();return mt?Xe.set("q",mt):Xe.delete("q"),o!=="all"?Xe.set("type",String(o)):Xe.delete("type"),u!=="all"?Xe.set("city",u):Xe.delete("city"),f!=="all"?Xe.set("state",f):Xe.delete("state"),x!=="all"?Xe.set("status",String(x)):Xe.delete("status"),Be?Xe.set("ownerCompanyId",Be):Xe.delete("ownerCompanyId"),$e.toString()}catch{return pe}},Je=async()=>{if(S)return S;try{const pe=await Ie.get("/media-kit/share-link"),$e=`${window.location.origin}/mk?token=${encodeURIComponent(pe.data.token)}`;return E($e),$e}catch{return ye.error("No foi possvel gerar o link pblico do Mdia Kit."),""}},tt=pe=>{try{const $e=new URL(pe);return $e.pathname="/menu",$e.toString()}catch{return`${window.location.origin}/menu`}},nt=async()=>{C(!0);const pe=await Je();pe&&(k(We(pe)),M(tt(pe)))},ct=async()=>{const pe=await Je();if(!pe)return;const $e=We(pe);k($e),$e&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText($e).then(()=>{ye.success("Link do Mdia Kit copiado para a rea de transferncia!"),C(!1)}).catch(()=>{Pe($e)?(ye.success("Link do Mdia Kit copiado para a rea de transferncia!"),C(!1)):ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")}):Pe($e)?(ye.success("Link do Mdia Kit copiado para a rea de transferncia!"),C(!1)):ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)"))},wt=async()=>{const pe=await Je();if(!pe)return;const $e=tt(pe);if(M($e),!$e)return;const Xe=()=>{ye.success("Link do Cardpio (prottipo) copiado para a rea de transferncia!"),C(!1)};navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText($e).then(Xe).catch(()=>{Pe($e)?Xe():ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")}):Pe($e)?Xe():ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")},pt=pe=>{B(pe),X(!0)},It=pe=>{const $e=Z3(He?.phone);if(!$e){ye.error("Nmero de WhatsApp da empresa no cadastrado.");return}if(!pe.length){ye.info("Selecione pelo menos um ponto.");return}const mt=[`Ol! Gostaria de solicitar uma proposta${He?.name?` (${He.name})`:""}.`,"","Pontos selecionados:",...pe.map(fe=>Q3(fe))].join(`
`);X3($e,mt)},Lt=()=>{q([]),O(!0)},J=m.useMemo(()=>{if(!Z.length)return[];const pe=new Map(Q.map($e=>[$e.id,$e]));return Z.map($e=>pe.get($e)).filter(Boolean)},[Z,Q]),ve=m.useMemo(()=>re.filter(pe=>Number.isFinite(Number(pe.latitude))&&Number.isFinite(Number(pe.longitude))),[re]),xe=m.useMemo(()=>{const pe=ve[0],$e=pe?.latitude!=null?Number(pe.latitude):-23.5505,Xe=pe?.longitude!=null?Number(pe.longitude):-46.6333;return{lat:$e,lng:Xe}},[ve]),[Ve,de]=m.useState(null),Ne=W3(),Be=m.useMemo(()=>j||te?.selectedOwnerCompanyId||se[0]?.id||"",[j,te?.selectedOwnerCompanyId,se]),He=m.useMemo(()=>{const pe=se.find($e=>$e.id===Be);return pe?{id:pe.id,name:pe.name,logoUrl:pe.logoUrl??null,primaryColor:null,email:pe.email??null,phone:pe.phone??null,site:pe.site??null,addressCity:pe.addressCity??null,addressState:pe.addressState??null}:z},[se,Be,z]),gt=He?.addressCity||He?.addressState?`${He?.addressCity??""}${He?.addressState?`, ${He.addressState}`:""}`:"";return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsxs("div",{className:"relative bg-cover",style:{backgroundImage:`url(${q3})`,backgroundPosition:"center -420px"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-8 md:px-10 py-20 md:py-28 min-h-[504px] md:min-h-[662px]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-6",children:[e.jsx("img",{src:H3,alt:"OneMedia",className:"h-8 md:h-10"}),e.jsx("div",{className:"flex items-center gap-2",children:t==="internal"&&e.jsxs(K,{variant:"secondary",className:"gap-2",onClick:nt,children:[e.jsx(Ew,{className:"w-4 h-4"}),"Compartilhar"]})})]}),e.jsxs("div",{className:"mt-14 md:mt-20 max-w-2xl",children:[e.jsx("h1",{className:"text-white text-3xl md:text-4xl font-semibold",children:"Mdia Kit Digital"}),He?.name&&e.jsxs("p",{className:"text-white/80 mt-2",children:[He.name,gt?`  ${gt}`:""]}),e.jsxs(K,{className:"mt-6 gap-2",onClick:Lt,children:[e.jsx(Il,{className:"w-4 h-4"}),"Solicitar Proposta"]})]})]})]}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:flex-wrap gap-3",children:[e.jsxs("div",{className:"flex-1 relative min-w-[220px]",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ce,{placeholder:"Buscar por nome, cidade ou endereo...",className:"pl-10",value:n,onChange:pe=>r(pe.target.value)})]}),e.jsxs(_t,{value:o,onValueChange:pe=>c(pe),children:[e.jsx(Pt,{className:"w-full lg:w-44",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos os tipos"}),e.jsx(Oe,{value:Xt.OOH,children:"OOH"}),e.jsx(Oe,{value:Xt.DOOH,children:"DOOH"})]})]}),e.jsxs(_t,{value:u,onValueChange:pe=>h(pe),children:[e.jsx(Pt,{className:"w-full lg:w-44",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todas as cidades"}),ee.map(pe=>e.jsx(Oe,{value:pe,children:pe},pe))]})]}),e.jsxs(_t,{value:f,onValueChange:pe=>v(pe),children:[e.jsx(Pt,{className:"w-full lg:w-32",children:e.jsx(At,{placeholder:"UF"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todas UFs"}),V.map(pe=>e.jsx(Oe,{value:pe,children:pe},pe))]})]}),e.jsxs(_t,{value:x,onValueChange:pe=>g(pe),children:[e.jsx(Pt,{className:"w-full lg:w-40",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos"}),e.jsx(Oe,{value:"Disponvel",children:"Disponvel"}),e.jsx(Oe,{value:"Parcial",children:"Parcial"}),e.jsx(Oe,{value:"Ocupado",children:"Ocupado"})]})]}),se.length>1&&e.jsxs(_t,{value:Be,onValueChange:pe=>{w(pe),de(null)},children:[e.jsx(Pt,{className:"w-full lg:w-64",children:e.jsx(At,{placeholder:"Empresa responsvel"})}),e.jsx(Et,{children:se.map(pe=>e.jsxs(Oe,{value:pe.id,children:[pe.name,pe.isPrimary?" (principal)":""]},pe.id))})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6 w-full flex-1",children:Y?e.jsx(Re,{children:e.jsx(Le,{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Carregando Mdia Kit"})})}):U?e.jsx(Re,{children:e.jsxs(Le,{className:"py-12 text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:U}),e.jsx(K,{variant:"outline",onClick:G,children:"Tentar novamente"})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:re.length===0?e.jsx(Re,{children:e.jsx(Le,{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum ponto de mdia encontrado com os filtros selecionados."})})}):e.jsx("div",{className:"space-y-4",children:re.map(pe=>{const $e=pe.unitsCount??pe.units?.length??0,Xe=pe.occupiedUnitsCount??0,mt=pe.availableUnitsCount??Math.max($e-Xe,0),fe=pe.availability??(mt>0?"Disponvel":"Ocupado");return e.jsx(Re,{className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0 bg-gray-100 rounded-xl overflow-hidden",style:{width:180,height:200,minWidth:180},children:[e.jsx(Rl,{src:pe.mainImageUrl||"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800",alt:pe.name,className:"w-full h-full object-cover"}),e.jsx(Ke,{className:"absolute top-1 left-1 bg-indigo-500 text-[10px] px-2 py-0.5",children:pe.type}),e.jsx(Ke,{className:`absolute top-1 right-1 text-[10px] px-2 py-0.5 ${fe==="Disponvel"?"bg-green-500":fe==="Parcial"?"bg-amber-500":"bg-orange-500"}`,children:fe}),pe.promotion?e.jsxs(Ke,{className:"absolute bottom-1 left-1 bg-orange-500 text-white text-[10px] px-2 py-0.5",children:["Promoo ",K3(pe.promotion)]}):null]}),e.jsxs("div",{className:"flex-1 min-w-0 grid grid-cols-1 sm:grid-cols-[1fr_1.2fr_auto] gap-4 items-start",children:[e.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[e.jsxs("div",{children:["Faces/Telas: ",$e]}),e.jsxs("div",{children:["Livres: ",mt]}),e.jsxs("div",{children:["Impacto/dia:"," ",pe.dailyImpressions?`${Math.floor(Number(pe.dailyImpressions)/1e3)}k`:""]})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-gray-900 font-semibold truncate",children:pe.name}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-start gap-2",children:[e.jsx(ia,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[[pe.addressStreet,pe.addressNumber].filter(Boolean).join(", ")||"",pe.addressDistrict?`  ${pe.addressDistrict}`:"",pe.addressCity||pe.addressState?`  ${[pe.addressCity,pe.addressState].filter(Boolean).join(" / ")}`:""]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[pe.subcategory?e.jsxs("div",{children:["Categoria: ",pe.subcategory]}):null,pe.environment?e.jsxs("div",{children:["Ambiente: ",pe.environment]}):null]})]}),e.jsxs("div",{className:"w-full sm:w-52 flex-shrink-0 flex flex-col sm:items-end gap-2 px-4",children:[e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("div",{className:"text-indigo-600 font-semibold whitespace-nowrap",children:pe.basePriceMonth!=null?pe.promotion?e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[Zn(pe.basePriceMonth),"/ms"]}),e.jsxs("span",{children:[Zn(mh(pe.basePriceMonth,pe.promotion)),"/ms"]})]}):`${Zn(pe.basePriceMonth)}/ms`:""}),e.jsx("div",{className:"text-indigo-600 font-semibold whitespace-nowrap",children:pe.basePriceWeek!=null?pe.promotion?e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[Zn(pe.basePriceWeek),"/semana"]}),e.jsxs("span",{children:[Zn(mh(pe.basePriceWeek,pe.promotion)),"/semana"]})]}):`${Zn(pe.basePriceWeek)}/semana`:""})]}),e.jsxs(K,{className:"gap-2 self-end",onClick:()=>{de(pe.id),pt(pe)},children:[e.jsx(li,{className:"w-4 h-4"}),"Ver Detalhes"]})]})]})]})},pe.id)})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Re,{className:"overflow-hidden lg:sticky lg:top-6",children:e.jsx(Le,{className:"p-0",children:e.jsx("div",{className:"h-[420px] sm:h-[520px]",style:{height:"clamp(420px, 60vh, 520px)",minHeight:420},children:ve.length===0?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-white text-sm text-gray-500",children:"Nenhum ponto com coordenadas para exibir no mapa."}):e.jsxs(aC,{center:[xe.lat,xe.lng],zoom:12,scrollWheelZoom:!0,className:"w-full h-full",style:{height:"100%",width:"100%"},children:[e.jsx(rC,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(J3,{}),Ve&&(()=>{const pe=ve.find($e=>$e.id===Ve);return!pe||pe.latitude==null||pe.longitude==null?null:e.jsx(Y3,{lat:Number(pe.latitude),lng:Number(pe.longitude)})})(),ve.map(pe=>{const $e=Number(pe.latitude),Xe=Number(pe.longitude);return!Number.isFinite($e)||!Number.isFinite(Xe)?null:e.jsx(Fg,{position:[$e,Xe],eventHandlers:{click:()=>{de(pe.id),pt(pe)}},children:e.jsx(B3,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:pe.name}),e.jsx("div",{className:"text-xs text-gray-600",children:[pe.addressCity,pe.addressState].filter(Boolean).join(" / ")||""}),e.jsx(K,{size:"sm",className:"w-full",onClick:()=>pt(pe),children:"Ver Detalhes"})]})})},pe.id)})]},`mk-map-${Be}-${ve.length}`)})})})})]})}),e.jsx("footer",{className:"text-white mt-10 w-full",style:{backgroundImage:"linear-gradient(180deg, #0b1220 0%, #0f172a 60%, #020617 100%)",backgroundColor:"#0b1220",color:"#ffffff"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-14 pb-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Empresa responsvel pelos pontos"}),He?e.jsxs("div",{className:"inline-flex items-center gap-3 rounded-md bg-white/10 p-2",children:[He.logoUrl?e.jsx(Rl,{src:He.logoUrl,alt:He.name,className:"h-10 w-10 object-contain"}):e.jsx("div",{className:"h-10 w-10 rounded-md bg-white/10 flex items-center justify-center",children:e.jsx(Ob,{className:"w-5 h-5 text-white/80"})}),e.jsx("span",{className:"font-semibold text-white",children:He.name})]}):e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-white/10 px-3 py-2 text-sm text-white/90",children:[e.jsx(Ob,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Contato & Localizao"}),e.jsxs("div",{className:"space-y-2 text-sm text-white/90",children:[(He?.addressCity||He?.addressState)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Local"}),e.jsx("div",{children:[He?.addressCity,He?.addressState].filter(Boolean).join(" - ")})]}),He?.email&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Email"}),e.jsx("div",{children:He.email})]}),He?.phone&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Telefone"}),e.jsx("div",{children:He.phone})]}),He?.site&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Site"}),e.jsx("a",{href:G3(He.site),target:"_blank",rel:"noreferrer noopener",className:"text-white/90 hover:text-white hover:underline",children:He.site})]})]})]}),e.jsxs("div",{className:"md:text-right",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Redes Sociais"}),e.jsxs("div",{className:"flex md:justify-end gap-3",children:[e.jsx("a",{href:Ne||"#",target:Ne?"_blank":void 0,rel:Ne?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(Sw,{className:"w-10 h-10"})}),e.jsx("a",{href:Ne||"#",target:Ne?"_blank":void 0,rel:Ne?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(ww,{className:"w-10 h-10"})}),e.jsx("a",{href:Ne||"#",target:Ne?"_blank":void 0,rel:Ne?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(_k,{className:"w-10 h-10"})}),e.jsx("a",{href:Ne||"#",target:Ne?"_blank":void 0,rel:Ne?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(oT,{className:"w-10 h-10"})})]})]})]}),e.jsxs("div",{className:"border-t border-white/10 mt-8 pt-4 text-center text-xs text-white/60",children:[" 2026"," ",e.jsx("a",{href:Ne||"#",target:Ne?"_blank":void 0,rel:Ne?"noreferrer noopener":void 0,className:"text-white/70 hover:text-white hover:underline",children:"OneMedia"}),". Todos os direitos reservados. |"," ",e.jsx("a",{href:"/privacidade",className:"hover:underline",children:"Poltica de Privacidade"})," |"," ",e.jsx("a",{href:"/termos",className:"hover:underline",children:"Termos de Uso"})]})]})}),e.jsx(_s,{open:F,onOpenChange:O,children:e.jsxs(As,{className:"max-w-2xl",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Solicitar Proposta"}),e.jsxs(dr,{children:["Selecione um ou mais pontos e clique em ",e.jsx("b",{children:"Solicitar"})," para enviar uma mensagem no WhatsApp da empresa."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[Z.length," selecionado(s)  ",re.length," ponto(s) na lista"]}),e.jsx(K,{variant:"outline",onClick:()=>{Z.length===re.length?q([]):q(re.map(pe=>pe.id))},children:Z.length===re.length?"Desmarcar todos":"Selecionar todos"})]}),e.jsx("div",{className:"rounded-md border border-gray-200",children:e.jsx(Ml,{className:"h-[360px]",children:e.jsx("div",{className:"p-3 space-y-2",children:re.map(pe=>{const $e=Z.includes(pe.id);return e.jsxs("button",{type:"button",onClick:()=>{q(Xe=>Xe.includes(pe.id)?Xe.filter(mt=>mt!==pe.id):[...Xe,pe.id])},className:"w-full text-left rounded-md hover:bg-gray-50 px-2 py-2 flex items-start gap-3",children:[e.jsx(qa,{checked:$e,className:"mt-1"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:pe.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[pe.addressCity,pe.addressState].filter(Boolean).join(" / ")||""})]})]},pe.id)})})})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(K,{variant:"outline",onClick:()=>O(!1),children:"Cancelar"}),e.jsxs(K,{className:"gap-2",onClick:()=>{It(J),O(!1)},disabled:Z.length===0,children:[e.jsx(Il,{className:"w-4 h-4"}),"Solicitar"]})]})]})]})}),e.jsx(_s,{open:$,onOpenChange:pe=>{X(pe),pe||B(null)},children:e.jsxs(As,{className:"max-w-4xl",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Detalhes do ponto"}),e.jsx(dr,{children:"Informaes completas do ponto e localizao no mapa."})]}),I?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200 bg-gray-50",children:e.jsx("div",{className:"h-56",children:e.jsx(Rl,{src:I.mainImageUrl||"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800",alt:I.name,className:"w-full h-full object-cover"})})}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200 bg-gray-50",children:e.jsx("div",{className:"h-56",children:e.jsx(oe,{point:I})})})]}),e.jsxs("div",{className:"lg:col-span-2 flex flex-col",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"bg-indigo-500",children:I.type}),e.jsx(Ke,{className:(I.availability??"Disponvel")==="Disponvel"?"bg-green-500":(I.availability??"Disponvel")==="Parcial"?"bg-amber-500":"bg-orange-500",children:I.availability??"Disponvel"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I.name}),e.jsxs("div",{className:"text-sm text-gray-700",children:[[I.addressStreet,I.addressNumber].filter(Boolean).join(", "),I.addressDistrict?`  ${I.addressDistrict}`:"",(I.addressCity||I.addressState)&&e.jsxs(e.Fragment,{children:["  ",[I.addressCity,I.addressState].filter(Boolean).join(" / ")]})]}),I.description&&e.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:I.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Faces/Telas"}),e.jsx("div",{className:"text-gray-900",children:I.unitsCount??""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Livres"}),e.jsx("div",{className:"text-gray-900",children:I.availableUnitsCount??""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Impacto/dia"}),e.jsx("div",{className:"text-gray-900",children:I.dailyImpressions??""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Categoria"}),e.jsx("div",{className:"text-gray-900",children:I.subcategory??""})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Semanal"}),I?.promotion&&I.basePriceWeek!=null?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-xs text-gray-400 line-through",children:Zn(I.basePriceWeek)}),e.jsx("div",{className:"text-gray-900",children:Zn(mh(I.basePriceWeek,I.promotion))})]}):e.jsx("div",{className:"text-gray-900",children:Zn(I.basePriceWeek)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensal"}),I?.promotion&&I.basePriceMonth!=null?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-xs text-gray-400 line-through",children:Zn(I.basePriceMonth)}),e.jsx("div",{className:"text-gray-900",children:Zn(mh(I.basePriceMonth,I.promotion))})]}):e.jsx("div",{className:"text-gray-900",children:Zn(I.basePriceMonth)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[e.jsxs(K,{className:"gap-2",onClick:()=>{It([I])},children:[e.jsx(Il,{className:"w-4 h-4"}),"Solicitar proposta"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>{I.latitude&&I.longitude?window.open(`https://www.google.com/maps?q=${I.latitude},${I.longitude}`,"_blank"):ye.info("Coordenadas GPS no cadastradas para este ponto de mdia.")},children:[e.jsx(ia,{className:"w-4 h-4"}),"Abrir no mapa"]})]})]})]}):e.jsx("div",{className:"py-6 text-sm text-gray-600",children:"Nenhum ponto selecionado."})]})}),t==="internal"&&e.jsx(_s,{open:N,onOpenChange:C,children:e.jsxs(As,{children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Compartilhar Mdia Kit"}),e.jsx(dr,{children:"Compartilhe o link pblico do Mdia Kit com seus clientes. Se voc tiver filtros ativos, o link j abre com esses filtros aplicados (mas quem receber pode alter-los)."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Link do Mdia Kit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{readOnly:!0,value:_||"Gerando link...",className:"flex-1"}),e.jsxs(K,{onClick:ct,className:"gap-2",disabled:!_,children:[e.jsx($n,{className:"w-4 h-4"}),"Copiar"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Link do Cardpio (prottipo)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{readOnly:!0,value:T||"Gerando link...",className:"flex-1"}),e.jsxs(K,{onClick:wt,className:"gap-2",disabled:!T,children:[e.jsx($n,{className:"w-4 h-4"}),"Copiar"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Abre o fluxo do Cardpio (UF  Cidade  Pontos  Carrinho  Enviar proposta)."})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Qualquer pessoa com o link pode visualizar seu portflio. Se o link incluir filtros, eles sero aplicados inicialmente  e depois podem ser alterados normalmente."})]})]})})]})}function eO(){const t=new URLSearchParams(window.location.search),s=t.get("token")||t.get("t")||void 0;return e.jsx(iC,{mode:"public",token:s||void 0})}const oC=m.createContext(()=>{}),is=()=>m.useContext(oC);function tO(t){const s=String(t??"").trim().toLowerCase();return s==="agency"?"agency":s==="promotions"?"promotions":"default"}function lC(t){const s=new URLSearchParams;Object.entries(t||{}).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Qo(t){const s=new URLSearchParams(window.location.search),n=s.get("token")||s.get("t")||"",r=tO(s.get("flow")),o=(s.get("ownerCompanyId")||s.get("owner")||s.get("oc")||"").trim()||null,c=String(s.get("uf")||"").trim(),u=String(s.get("city")||"").trim(),h=String(s.get("pointId")||s.get("id")||s.get("point")||"").trim()||null;return{token:n,flow:r,ownerCompanyId:o,uf:c?c.toUpperCase():null,city:u||null,pointId:h}}function Uu(t){return t==="agency"}function cC(t){const s=Number(t);return Number.isFinite(s)?Math.max(0,Math.min(500,s)):0}function Vp(t){return cC(t?.agencyMarkupPercent)}function ri(t,s){const n=Number(t);if(!Number.isFinite(n))return null;const r=cC(s);return r<=0?n:Number((n*(1+r/100)).toFixed(2))}function sO(t,s,n){return`${t}${lC({token:s.token,flow:s.flow,ownerCompanyId:s.ownerCompanyId??void 0,uf:s.uf??void 0,city:s.city??void 0})}`}const nO="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png",aO="/figma-assets/outdoor.png";function rO(){const t=is(),{token:s,ownerCompanyId:n}=m.useMemo(()=>{const o=Qo();return{token:o.token,ownerCompanyId:o.ownerCompanyId}},[]),r=o=>{t(sO("/menu/uf",{token:s,flow:o,ownerCompanyId:n}))};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:aO,alt:"",className:"h-full w-full object-cover opacity-25",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/85 via-white/70 to-gray-50"})]}),e.jsxs("div",{className:"relative mx-auto max-w-5xl px-4 pt-10 pb-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:nO,alt:"OneMedia",className:"h-9 w-9"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Cardpio de Outdoor"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Prottipo (sem login)"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"})})]}),e.jsxs("div",{className:"mt-7",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Monte sua seleo do jeito certo"}),e.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600 max-w-2xl",children:"Escolha o modo de navegao e siga por UF  Cidade  Pontos at enviar sua solicitao."})]}),e.jsxs("div",{className:"mt-7 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Re,{className:"border-gray-200/70 bg-white/70 backdrop-blur-sm shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(Le,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-gray-900/5 flex items-center justify-center",children:e.jsx(n0,{className:"h-4 w-4 text-gray-800"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Cardpio"})]}),e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Padro"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Explore todo o inventrio e monte sua seleo sem filtros especiais."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"UF  Cidade"}),e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Pontos e faces"}),e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Carrinho"})]}),e.jsxs(K,{className:"mt-5 w-full gap-2",onClick:()=>r("default"),children:["Comear",e.jsx(Na,{className:"h-4 w-4"})]})]})}),e.jsx(Re,{className:"border-gray-200/70 bg-white/70 backdrop-blur-sm shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(Le,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-gray-900/5 flex items-center justify-center",children:e.jsx(Tw,{className:"h-4 w-4 text-gray-800"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Promoes"})]}),e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Oferta"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Navegue focado em oportunidades. Ideal para aproveitar condies promocionais."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Somente em oferta"}),e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Face & ponto"}),e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Validade"})]}),e.jsxs(K,{className:"mt-5 w-full gap-2",onClick:()=>r("promotions"),children:["Ver promoes",e.jsx(Na,{className:"h-4 w-4"})]})]})}),e.jsx(Re,{className:"border-gray-200/70 bg-white/70 backdrop-blur-sm shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(Le,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-gray-900/5 flex items-center justify-center",children:e.jsx(Wo,{className:"h-4 w-4 text-gray-800"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Sou Agncia"})]}),e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Markup"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Use o fluxo com precificao de agncia (markup configurvel no Super Admin)."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Precificao agncia"}),e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Markup global"}),e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Transparente"})]}),e.jsxs(K,{className:"mt-5 w-full gap-2",onClick:()=>r("agency"),children:["Entrar como agncia",e.jsx(Na,{className:"h-4 w-4"})]})]})})]}),e.jsx("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:e.jsx(K,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>t(`/mk${lC({token:s,ownerCompanyId:n??void 0})}`),children:"Voltar para o Mdia Kit"})}),!s&&e.jsx(Re,{className:"mt-6 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"Ateno"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:"Este prottipo funciona melhor quando aberto a partir do link compartilhado (com token)."})]})})]})]})})}const iO={AC:{uf:"AC",name:"Acre"},AL:{uf:"AL",name:"Alagoas"},AP:{uf:"AP",name:"Amap"},AM:{uf:"AM",name:"Amazonas"},BA:{uf:"BA",name:"Bahia"},CE:{uf:"CE",name:"Cear"},DF:{uf:"DF",name:"Distrito Federal"},ES:{uf:"ES",name:"Esprito Santo"},GO:{uf:"GO",name:"Gois"},MA:{uf:"MA",name:"Maranho"},MT:{uf:"MT",name:"Mato Grosso"},MS:{uf:"MS",name:"Mato Grosso do Sul"},MG:{uf:"MG",name:"Minas Gerais"},PA:{uf:"PA",name:"Par"},PB:{uf:"PB",name:"Paraba"},PR:{uf:"PR",name:"Paran"},PE:{uf:"PE",name:"Pernambuco"},PI:{uf:"PI",name:"Piau"},RJ:{uf:"RJ",name:"Rio de Janeiro"},RN:{uf:"RN",name:"Rio Grande do Norte"},RS:{uf:"RS",name:"Rio Grande do Sul"},RO:{uf:"RO",name:"Rondnia"},RR:{uf:"RR",name:"Roraima"},SC:{uf:"SC",name:"Santa Catarina"},SP:{uf:"SP",name:"So Paulo"},SE:{uf:"SE",name:"Sergipe"},TO:{uf:"TO",name:"Tocantins"}};function oO(t){const s=String(t??"").trim().toUpperCase();return iO[s]?.name??s}const Nj=new Map,Ux=new Map;function lO(t,s){return`${t}::${s??""}`}const cO=60*1e3;async function dO(t){const s=String(t.token??"").trim(),n=t.ownerCompanyId??null;if(!s)throw new Error("Token ausente. Abra o Cardpio a partir do link compartilhado.");const r=lO(s,n),o=Date.now(),c=Nj.get(r);if(!t.force&&c&&o-c.fetchedAt<cO)return c.data;const u=Ux.get(r);if(u)return u;const h=(async()=>{try{const f=await Tn.get("/public/media-kit",{params:{token:s,ownerCompanyId:n||void 0}});return Nj.set(r,{data:f.data,fetchedAt:Date.now()}),f.data}finally{Ux.delete(r)}})();return Ux.set(r,h),h}function uO(t){const s=t.availability;if(s==="Disponvel"||s==="Parcial"||s==="Ocupado")return s;const n=t.unitsCount??t.units?.length??0,r=t.occupiedUnitsCount??0,o=t.availableUnitsCount??Math.max(n-r,0);return n<=0?"Disponvel":o<=0?"Ocupado":r>0?"Parcial":"Disponvel"}function mO(t){const s=String(t??"").trim().toUpperCase();return s===Xt.OOH?Xt.OOH:s===Xt.DOOH?Xt.DOOH:null}function hO(t){return!!(t?.code==="ERR_CANCELED"||t?.name==="CanceledError"||t?.__CANCEL__===!0||typeof t?.message=="string"&&/cancel/i.test(t.message))}function md(t){const s=m.useMemo(()=>String(t.token??"").trim(),[t.token]),n=t.ownerCompanyId??null,[r,o]=m.useState(null),[c,u]=m.useState(!1),[h,f]=m.useState(null),[v,x]=m.useState(0),g=m.useCallback(()=>x(j=>j+1),[]);return m.useEffect(()=>{let j=!0;return(async()=>{if(!s){o(null),f("Token ausente. Abra o Cardpio a partir do link compartilhado.");return}try{u(!0),f(null);const N=await dO({token:s,ownerCompanyId:n,force:v>0});if(!j)return;o(N)}catch(N){if(!j)return;const S=N?.response?.status===401?"Voc no tem permisso para acessar este Cardpio.":hO(N)?"Requisio cancelada.":N?.message||"No foi possvel carregar o Cardpio.";o(null),f(S)}finally{if(!j)return;u(!1)}})(),()=>{j=!1}},[s,n,v]),{data:r,loading:c,error:h,reload:g}}function wj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function pO(){const t=is(),[s,n]=m.useState(""),{token:r,flow:o,ownerCompanyId:c}=m.useMemo(()=>Qo(),[]),{data:u,loading:h,error:f,reload:v}=md({token:r,ownerCompanyId:c}),x=m.useMemo(()=>{const g=u?.points??[],j=new Map;for(const C of g){const S=String(C.addressState??"").trim().toUpperCase(),E=String(C.addressCity??"").trim();if(!S)continue;const _=j.get(S)??{points:0,cities:new Set};_.points+=1,E&&_.cities.add(E),j.set(S,_)}const w=Array.from(j.entries()).map(([C,S])=>({uf:C,name:oO(C),pointsCount:S.points,citiesCount:S.cities.size})).sort((C,S)=>C.uf.localeCompare(S.uf,"pt-BR")),N=s.trim().toLowerCase();return N?w.filter(C=>C.uf.toLowerCase().includes(N)||C.name.toLowerCase().includes(N)):w},[u?.points,s]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"UF  Cidade"}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(`/menu${wj({token:r,flow:o,ownerCompanyId:c})}`),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Selecione o Estado (UF)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"As UFs abaixo so derivadas do inventrio real do Mdia Kit pblico."})]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:v,disabled:h,children:[e.jsx(Fl,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Ce,{value:s,onChange:g=>n(g.target.value),placeholder:"Buscar UF ou nome do estado..."})}),f&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:f})]})}),e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:h&&x.length===0?Array.from({length:6}).map((g,j)=>e.jsx(Re,{className:"animate-pulse",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"h-4 w-16 rounded bg-gray-200"}),e.jsx("div",{className:"mt-2 h-3 w-32 rounded bg-gray-200"}),e.jsx("div",{className:"mt-3 h-8 w-full rounded bg-gray-200"})]})},j)):x.map(g=>e.jsx(Re,{className:"transition-shadow hover:shadow-sm",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(l4,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:g.uf}),e.jsx("div",{className:"text-xs text-gray-600",children:g.name}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[g.pointsCount," ponto(s)  ",g.citiesCount," cidade(s)"]})]}),e.jsxs(K,{size:"sm",className:"gap-2",onClick:()=>t(`/menu/cidades${wj({token:r,uf:g.uf,flow:o,ownerCompanyId:c})}`),children:["Escolher",e.jsx(Na,{className:"h-4 w-4"})]})]})})},g.uf))}),!h&&!f&&x.length===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"Nenhuma UF encontrada. Verifique se o token  vlido e se h pontos publicados no Mdia Kit."})]})})}function Cj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function fO(){const t=is(),[s,n]=m.useState(""),{token:r,flow:o,ownerCompanyId:c,uf:u}=m.useMemo(()=>Qo(),[]),{data:h,loading:f,error:v,reload:x}=md({token:r,ownerCompanyId:c}),g=m.useMemo(()=>{const j=h?.points??[],w=new Map;for(const S of j){const E=String(S.addressState??"").trim().toUpperCase();if(!u||E!==u)continue;const _=String(S.addressCity??"").trim();_&&w.set(_,(w.get(_)??0)+1)}const N=Array.from(w.entries()).map(([S,E])=>({city:S,pointsCount:E})).sort((S,E)=>S.city.localeCompare(E.city,"pt-BR")),C=s.trim().toLowerCase();return C?N.filter(S=>S.city.toLowerCase().includes(C)):N},[h?.points,u,s]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["UF: ",e.jsx("b",{children:u||""}),"  Cidade"]}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(`/menu/uf${Cj({token:r,uf:u,flow:o,ownerCompanyId:c})}`),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Selecione a Cidade"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"As cidades abaixo so derivadas do inventrio real do Mdia Kit pblico."})]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:x,disabled:f,children:[e.jsx(Fl,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Ce,{value:s,onChange:j=>n(j.target.value),placeholder:"Buscar cidade..."})}),v&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:v})]})}),e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:f&&g.length===0?Array.from({length:6}).map((j,w)=>e.jsx(Re,{className:"animate-pulse",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"h-4 w-24 rounded bg-gray-200"}),e.jsx("div",{className:"mt-2 h-3 w-32 rounded bg-gray-200"}),e.jsx("div",{className:"mt-3 h-8 w-full rounded bg-gray-200"})]})},w)):g.map(j=>e.jsx(Re,{className:"transition-shadow hover:shadow-sm",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(Wo,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:j.city}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[j.pointsCount," ponto(s)"]})]}),e.jsxs(K,{size:"sm",className:"gap-2",onClick:()=>t(`/menu/pontos${Cj({token:r,uf:u,city:j.city,flow:o,ownerCompanyId:c})}`),children:["Ver pontos",e.jsx(Na,{className:"h-4 w-4"})]})]})})},j.city))}),!f&&!v&&g.length===0&&e.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:["Nenhuma cidade encontrada para a UF ",e.jsx("b",{children:u||""}),"."]})]})})}function Sj(t){if(t==null)return"";try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(t)}catch{return`R$ ${Math.round(t)}`}}function Vx(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function xO(){const t=is(),[s,n]=m.useState(""),{token:r,flow:o,ownerCompanyId:c,uf:u,city:h}=m.useMemo(()=>Qo(),[]),{data:f,loading:v,error:x,reload:g}=md({token:r,ownerCompanyId:c}),j=Uu(o),w=j?Vp(f?.company):0,N=m.useMemo(()=>(f?.points??[]).filter(E=>{const _=String(E.addressState??"").trim().toUpperCase(),k=String(E.addressCity??"").trim();if(u&&_!==u||h&&k!==h)return!1;const T=s.trim().toLowerCase();return T?String(E.name??"").toLowerCase().includes(T)||String(E.subcategory??"").toLowerCase().includes(T)||String(E.addressDistrict??"").toLowerCase().includes(T)||String(E.addressStreet??"").toLowerCase().includes(T):!0}).sort((E,_)=>String(E.name).localeCompare(String(_.name),"pt-BR")),[f?.points,u,h,s]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[u||""," / ",h||"","  Pontos"]}),j&&w>0&&e.jsxs(Ke,{className:"ml-1",variant:"outline",children:["Sou Agncia: +",w,"%"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(`/menu/cidades${Vx({token:r,uf:u,flow:o,ownerCompanyId:c})}`),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(`/menu/carrinho${Vx({token:r,flow:o,ownerCompanyId:c})}`),children:[e.jsx(Yc,{className:"h-4 w-4"}),"Carrinho"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Selecione o Ponto"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Clique em um ponto para ver detalhes e faces disponveis."})]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:g,disabled:v,children:[e.jsx(Fl,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Ce,{value:s,onChange:C=>n(C.target.value),placeholder:"Buscar ponto, bairro, rua..."})}),x&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:x})]})}),e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-3 md:grid-cols-2 xl:grid-cols-3",children:v&&N.length===0?Array.from({length:9}).map((C,S)=>e.jsx(Re,{className:"animate-pulse",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"h-4 w-48 rounded bg-gray-200"}),e.jsx("div",{className:"mt-2 h-3 w-40 rounded bg-gray-200"}),e.jsx("div",{className:"mt-4 h-10 w-full rounded bg-gray-200"})]})},S)):N.map(C=>{const S=j?ri(C.basePriceMonth,w):C.basePriceMonth,E=j?ri(C.basePriceWeek,w):C.basePriceWeek;return e.jsx(Re,{className:"cursor-pointer transition-shadow hover:shadow-sm",onClick:()=>t(`/menu/detalhe${Vx({token:r,pointId:C.id,flow:o,ownerCompanyId:c})}`),children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(X4,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:C.name}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Wo,{className:"h-3.5 w-3.5"}),C.addressDistrict||"","  ",C.addressStreet||""," ",C.addressNumber||""]})})]}),e.jsx(Ke,{variant:"outline",className:"whitespace-nowrap",children:C.type})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-gray-700",children:["Ms: ",e.jsx("b",{children:Sj(S)})]}),e.jsxs("span",{className:"rounded bg-gray-100 px-2 py-1 text-gray-700",children:["Semana: ",e.jsx("b",{children:Sj(E)})]})]}),C.unitsCount!==void 0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[C.unitsCount," face(s)  ",C.availableUnitsCount??0," disponvel(is)"]})]})]})})},C.id)})}),!v&&!x&&N.length===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"Nenhum ponto encontrado."})]})})}var gO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vO=gO.reduce((t,s)=>{const n=bp(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),yO="Separator",_j="horizontal",bO=["horizontal","vertical"],dC=m.forwardRef((t,s)=>{const{decorative:n,orientation:r=_j,...o}=t,c=jO(r)?r:_j,h=n?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return e.jsx(vO.div,{"data-orientation":c,...h,...o,ref:s})});dC.displayName=yO;function jO(t){return bO.includes(t)}var NO=dC;function Ys({className:t,orientation:s="horizontal",decorative:n=!0,...r}){return e.jsx(NO,{"data-slot":"separator-root",decorative:n,orientation:s,className:Nt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}const uC="menu_cart";function Ol(){return new Date().toISOString()}function wO(){try{const t=globalThis.crypto;if(t?.randomUUID)return t.randomUUID()}catch{}return`mc_${Math.random().toString(36).slice(2,10)}_${Date.now().toString(36)}`}function hd(t){const s=Math.max(0,Math.floor(Number(t?.years)||0)),n=Math.max(0,Math.floor(Number(t?.months)||0)),r=Math.max(0,Math.floor(Number(t?.days)||0));return{years:s,months:n,days:r}}function Hp(t){const s=hd(t),n=s.years*365+s.months*30+s.days;return Math.max(1,Math.min(365*100,Math.floor(n||0)))}function K0(t){const s=Math.max(1,Math.min(36500,Math.floor(Number(t)||30))),n=Math.floor(s/365),r=s%365,o=Math.floor(r/30),c=r%30;return{years:n,months:o,days:c}}function tp(t){const s=hd(t),n=[];return s.years&&n.push(`${s.years} ${s.years===1?"ano":"anos"}`),s.months&&n.push(`${s.months} ${s.months===1?"ms":"meses"}`),(s.days||n.length===0)&&n.push(`${s.days||0} ${s.days===1?"dia":"dias"}`),n.join(", ")}function mC(t){if(!t)return null;const s=String(t.id||"").trim(),n=String(t.pointId||"").trim();if(!s||!n)return null;const r=t.unitId===null||t.unitId===void 0?null:String(t.unitId),o=t.duration?hd(t.duration):K0(t.durationDays),c=Hp(o);return{id:s,pointId:n,unitId:r,duration:o,durationDays:c,addedAt:String(t.addedAt||Ol()),snapshot:t.snapshot||{}}}function Wl(){try{const t=localStorage.getItem(uC);if(!t)return{version:2,updatedAt:Ol(),items:[]};const s=JSON.parse(t),n=Array.isArray(s?.items)?s.items:Array.isArray(s)?s:[],r=[];for(const o of n){const c=mC(o);c&&r.push(c)}return{version:2,updatedAt:String(s?.updatedAt||Ol()),items:r}}catch{return{version:2,updatedAt:Ol(),items:[]}}}function Vu(t){const s=Array.isArray(t?.items)?t.items:[],n=[];for(const o of s){const c=mC(o);c&&n.push(c)}const r={version:2,updatedAt:Ol(),items:n};localStorage.setItem(uC,JSON.stringify(r))}function pu(){return Wl().items.length}function Aj(t,s,n){return t.pointId===s&&String(t.unitId??"")===String(n??"")}function hC(t){const s=Wl(),n=t.unit??null,r=t.duration?hd(t.duration):K0(Number.isFinite(Number(t.durationDays))?Number(t.durationDays):30),o=Hp(r),c=t.point,u=String(c.name||"").trim()||"Ponto",h=[[String(c.addressStreet??"").trim(),String(c.addressNumber??"").trim()].filter(Boolean).join(", "),String(c.addressDistrict??"").trim()].filter(Boolean).join("  "),f={pointName:u,pointType:c.type,addressLine:h||void 0,city:String(c.addressCity??"").trim()||void 0,state:String(c.addressState??"").trim()||void 0,imageUrl:(n?.imageUrl??c.mainImageUrl)||void 0,unitLabel:n?.label?String(n.label):void 0,unitType:n?.unitType,priceMonth:n?.priceMonth??c.basePriceMonth??null,priceWeek:n?.priceWeek??c.basePriceWeek??null},v=c.id,x=n?.id??null,g=s.items.some(w=>Aj(w,v,x)),j={id:g?s.items.find(w=>Aj(w,v,x)).id:wO(),pointId:v,unitId:x,duration:r,durationDays:o,addedAt:Ol(),snapshot:f};return g?{added:!1,item:j}:(s.items=[...s.items,j],Vu(s),{added:!0,item:j})}function CO(t){const s=Wl();s.items=s.items.filter(n=>n.id!==t),Vu(s)}function Hx(t,s){const n=Wl(),r=hd(s),o=Hp(r);n.items=n.items.map(c=>c.id===t?{...c,duration:r,durationDays:o}:c),Vu(n)}function SO(t){const s=Wl(),n=hd(t),r=Hp(n);s.items=s.items.map(o=>({...o,duration:n,durationDays:r})),Vu(s)}function pC(){Vu({updatedAt:Ol(),items:[]})}function pd(t){const s=String(t.addressStreet??"").trim(),n=String(t.addressNumber??"").trim(),r=String(t.addressDistrict??"").trim(),o=String(t.addressCity??"").trim(),c=String(t.addressState??"").trim();return[[s,n].filter(Boolean).join(", "),r,[o,c].filter(Boolean).join(" - ")].filter(Boolean).join("  ")}function qx(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function hh(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function Pj(t){if(t==null)return null;if(typeof t=="number"&&Number.isFinite(t))return t;const s=String(t).trim();if(!s)return null;const n=s.replace(",","."),r=Number(n);return Number.isFinite(r)?r:null}function fC(t){const s=t,n=Pj(s.latitude??s.lat??s.location?.lat),r=Pj(s.longitude??s.lng??s.location?.lng??s.location?.lon);return n===null||r===null||n<-90||n>90||r<-180||r>180||pd(t)&&n==0&&r==0?null:{lat:n,lng:r}}function _O(t){const s=fC(t);if(s)return`https://www.google.com/maps?q=${encodeURIComponent(`${s.lat},${s.lng}`)}`;const n=pd(t);return n?`https://www.google.com/maps?q=${encodeURIComponent(n)}`:"https://www.google.com/maps"}function AO(t){const s=fC(t);if(s)return`https://www.google.com/maps?q=${encodeURIComponent(`${s.lat},${s.lng}`)}&z=15&output=embed`;const n=pd(t);return n?`https://www.google.com/maps?q=${encodeURIComponent(n)}&z=15&output=embed`:null}function PO(){const t=is(),{token:s,pointId:n,uf:r,city:o,flow:c,ownerCompanyId:u}=m.useMemo(()=>{const O=Qo();return{token:O.token,pointId:O.pointId,uf:O.uf,city:O.city,flow:O.flow,ownerCompanyId:O.ownerCompanyId}},[]),{data:h,loading:f,error:v}=md({token:s,ownerCompanyId:u}),x=Uu(c),g=x?Vp(h?.company):0,j=m.useMemo(()=>(h?.points??[]).find(Z=>String(Z.id)===String(n))??null,[h?.points,n]),[w,N]=m.useState(()=>{try{return pu()}catch{return 0}});m.useEffect(()=>{try{N(pu())}catch{N(0)}const O=Z=>{if(Z.key==="menu_cart")try{N(pu())}catch{N(0)}};return window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)},[n]);const C=m.useMemo(()=>`/menu/pontos${qx({token:s,uf:r,city:o,flow:c,ownerCompanyId:u})}`,[s,r,o,c,u]),S=()=>{if(!j)return;const O=Array.isArray(j.units)?j.units.filter($=>$?.isActive!==!1):[];if(O.length>1){t(`/menu/faces${qx({token:s,id:j.id,uf:r,city:o,flow:c,ownerCompanyId:u})}`);return}const Z=O.length===1?O[0]:null,{added:q}=hC({point:j,unit:Z,duration:{years:0,months:1,days:0}});if(q){ye.success("Adicionado ao carrinho",{description:j.name});try{N(pu())}catch{}}else ye.info("Este item j est no seu carrinho",{description:j.name})},E=j?uO(j):null,_=j?mO(j.type)??j.type:null,k=m.useMemo(()=>Array.isArray(j?.units)?j.units.filter(Z=>Z?.isActive!==!1):[],[j]),T=m.useMemo(()=>{const O=[j?.mainImageUrl,...k.map(Z=>Z.imageUrl||"")].map(Z=>String(Z||"").trim()).filter(Boolean);return Array.from(new Set(O))},[j?.mainImageUrl,k]),M=j?_O(j):"https://www.google.com/maps",F=j?AO(j):null;return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),x&&g>0&&e.jsxs(Ke,{variant:"outline",className:"rounded-full",children:["Agncia +",g,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Detalhe do ponto"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[w>0&&e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(`/menu/carrinho${qx({token:s,uf:r,city:o,flow:c,ownerCompanyId:u})}`),children:[e.jsx(Yc,{className:"h-4 w-4"}),"Ver carrinho (",w,")"]}),e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(C),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})]})]}),v&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:v})]})}),f&&!j&&e.jsx(Re,{className:"mt-5 animate-pulse",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"h-5 w-56 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-3 h-3 w-80 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-6 h-40 w-full bg-gray-200 rounded"})]})}),!f&&!v&&!j&&e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Ponto no encontrado"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte para a lista e selecione outro ponto."}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{variant:"outline",onClick:()=>t(C),children:"Voltar para a lista"})})]})}),j&&e.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:j.name}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:pd(j)||"Endereo no informado"}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[_&&e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:_}),E&&e.jsx(Ke,{className:E==="Disponvel"?"rounded-full bg-emerald-100 text-emerald-900 hover:bg-emerald-100":E==="Parcial"?"rounded-full bg-amber-100 text-amber-900 hover:bg-amber-100":"rounded-full bg-rose-100 text-rose-900 hover:bg-rose-100",children:E}),j.subcategory&&e.jsx(Ke,{variant:"outline",className:"rounded-full",children:j.subcategory}),j.environment&&e.jsx(Ke,{variant:"outline",className:"rounded-full",children:j.environment})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Preo base"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:hh(ri(j.basePriceMonth,g))}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Mensal  ",hh(ri(j.basePriceWeek,g))," semanal"]})]})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Galeria"}),e.jsx("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-2",children:T.length>0?T.map(O=>e.jsx("div",{className:"h-40 w-64 flex-none overflow-hidden rounded-xl bg-gray-100",children:e.jsx(Rl,{src:O,alt:j.name,className:"h-full w-full object-cover"})},O)):e.jsx("div",{className:"h-40 w-full rounded-xl bg-gray-100 flex items-center justify-center text-sm text-gray-500",children:"Nenhuma imagem disponvel"})})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(fp,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:"Faces/Telas"})]}),e.jsx("div",{className:"mt-2 text-gray-600",children:k.length>0?`${k.length} unidade(s) ativa(s)`:""}),typeof j.dailyImpressions=="number"&&e.jsxs("div",{className:"mt-2 text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Impacto/dia:"})," ",j.dailyImpressions]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(ia,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:"Localizao"})]}),e.jsxs("div",{className:"mt-2 text-gray-600",children:[j.addressDistrict?`${j.addressDistrict}  `:"",j.addressCity||"",j.addressState?`/${j.addressState}`:""]}),e.jsx("div",{className:"mt-3",children:e.jsxs("a",{href:M,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm font-semibold text-blue-700 hover:text-blue-800",children:["Abrir no Google Maps",e.jsx(Ou,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsxs(K,{className:"gap-2",onClick:S,children:[e.jsx(Yc,{className:"h-4 w-4"}),k.length>1?"Selecionar faces/telas":"Adicionar ao carrinho"]}),e.jsx(K,{variant:"outline",onClick:()=>t(C),children:"Voltar para a lista"})]})]})}),e.jsx(Re,{className:"mt-4",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Mapa (preview)"}),e.jsx("div",{className:"mt-3 overflow-hidden rounded-xl border border-gray-200 bg-gray-100",children:F?e.jsx("iframe",{title:"Mapa",src:F,className:"h-64 w-full",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}):e.jsx("div",{className:"h-64 w-full flex items-center justify-center text-sm text-gray-600",children:"Coordenadas no informadas  use o boto Abrir no Google Maps."})})]})})]}),e.jsx("div",{children:e.jsx(Re,{children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Unidades"}),e.jsx("div",{className:"mt-3 space-y-3",children:k.length>0?k.map(O=>e.jsxs("div",{className:"rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[O.unitType==="SCREEN"?"Tela":"Face"," ",O.label]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[O.widthM&&O.heightM?`${O.widthM}m  ${O.heightM}m`:"Dimenses no informadas",O.orientation?`  ${O.orientation}`:""]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:hh(ri(O.priceMonth??j.basePriceMonth,g))})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-700",children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:hh(ri(O.priceWeek??j.basePriceWeek,g))})]}),O.imageUrl&&e.jsx("div",{className:"mt-3 h-28 w-full overflow-hidden rounded-lg bg-gray-100",children:e.jsx(Rl,{src:O.imageUrl,alt:O.label,className:"h-full w-full object-cover"})})]},O.id)):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma face/tela cadastrada neste ponto."})})]})})})]})]})})}function ph(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Ej(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function EO(){const t=is(),{token:s,pointId:n,uf:r,city:o,flow:c,ownerCompanyId:u}=m.useMemo(()=>{const M=Qo();return{token:M.token,pointId:M.pointId||"",uf:M.uf||"",city:M.city||"",flow:M.flow,ownerCompanyId:M.ownerCompanyId}},[]),{data:h,loading:f,error:v}=md({token:s,ownerCompanyId:u}),x=Uu(c),g=x?Vp(h?.company):0,j=m.useMemo(()=>(h?.points??[]).find(F=>String(F.id)===String(n))??null,[h?.points,n]),w=m.useMemo(()=>Array.isArray(j?.units)?j.units.filter(F=>F?.isActive!==!1):[],[j]),[N,C]=m.useState({}),S=m.useMemo(()=>Object.values(N).filter(Boolean).length,[N]),E=m.useMemo(()=>`/menu/detalhe${ph({token:s,id:n,uf:r,city:o,flow:c,ownerCompanyId:u})}`,[s,n,r,o,c,u]),_=(M,F)=>{C(O=>({...O,[M]:F}))},k=()=>{if(!j)return;const M=Object.keys(N).filter(O=>N[O]);if(M.length===0){ye.info("Selecione pelo menos uma face/tela.");return}let F=0;M.forEach(O=>{const Z=w.find($=>$.id===O)??null;hC({point:j,unit:Z,duration:{years:0,months:1,days:0}}).added&&(F+=1)}),F>0?ye.success("Adicionado ao carrinho",{description:`${F} item(ns) adicionado(s).`}):ye.info("Esses itens j estavam no carrinho."),t(`/menu/carrinho${ph({token:s,uf:r,city:o,flow:c,ownerCompanyId:u})}`)},T=m.useMemo(()=>pu(),[S,n]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),x&&g>0&&e.jsxs(Ke,{variant:"outline",className:"rounded-full",children:["Agncia +",g,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Seleo de faces/telas"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[T>0&&e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(`/menu/carrinho${ph({token:s,uf:r,city:o,flow:c,ownerCompanyId:u})}`),children:[e.jsx(Yc,{className:"h-4 w-4"}),"Ver carrinho (",T,")"]}),e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(E),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})]})]}),v&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:v})]})}),f&&e.jsx(Re,{className:"mt-5 animate-pulse",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"h-5 w-56 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-3 h-3 w-80 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-6 h-40 w-full bg-gray-200 rounded"})]})}),!f&&!v&&!j&&e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Ponto no encontrado"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte e selecione outro ponto."}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{variant:"outline",onClick:()=>t(`/menu/pontos${ph({token:s,uf:r,city:o})}`),children:"Voltar para a lista"})})]})}),j&&e.jsx(e.Fragment,{children:e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:j.name}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:pd(j)||"Endereo no informado"}),e.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Selecione as faces/telas que deseja incluir no carrinho."})]}),e.jsxs(K,{className:"gap-2",onClick:k,disabled:w.length===0,children:[e.jsx(Yc,{className:"h-4 w-4"}),"Adicionar selecionadas (",S,")"]})]}),e.jsx(Ys,{className:"my-5"}),e.jsx("div",{className:"space-y-3",children:w.length>0?w.map(M=>{const F=!!N[M.id],O=ri(M.priceMonth??j.basePriceMonth,g),Z=ri(M.priceWeek??j.basePriceWeek,g);return e.jsx("div",{className:"rounded-xl border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qa,{checked:F,onCheckedChange:q=>_(M.id,q===!0),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[M.unitType==="SCREEN"?"Tela":"Face"," ",M.label]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[M.widthM&&M.heightM?`${M.widthM}m  ${M.heightM}m`:"Dimenses no informadas",M.orientation?`  ${M.orientation}`:""]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:Ej(O)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:Ej(Z)})]})]})]}),e.jsx("div",{className:"h-20 w-28 overflow-hidden rounded-lg bg-gray-100",children:e.jsx(Rl,{src:M.imageUrl||j.mainImageUrl||"",alt:M.label,className:"h-full w-full object-cover"})})]})},M.id)}):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma face/tela ativa cadastrada neste ponto."})})]})})})]})})}function kj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Tj(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function kO(){const t=is(),{token:s,uf:n,city:r,flow:o,ownerCompanyId:c}=m.useMemo(()=>{const O=Qo();return{token:O.token,uf:O.uf||"",city:O.city||"",flow:O.flow,ownerCompanyId:O.ownerCompanyId}},[]),{data:u}=md({token:s,ownerCompanyId:c}),h=Uu(o),f=h?Vp(u?.company):0,[v,x]=m.useState(0),g=m.useMemo(()=>Wl(),[v]);m.useEffect(()=>{const O=Z=>{Z.key==="menu_cart"&&x(q=>q+1)};return window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)},[]);const j=m.useMemo(()=>`/menu/pontos${kj({token:s,uf:n,city:r,flow:o,ownerCompanyId:c})}`,[s,n,r,o,c]),[w,N]=m.useState("0"),[C,S]=m.useState("1"),[E,_]=m.useState("0"),k=()=>{const O={years:Math.max(0,Math.floor(Number(w)||0)),months:Math.max(0,Math.floor(Number(C)||0)),days:Math.max(0,Math.floor(Number(E)||0))};SO(O),x(Z=>Z+1),ye.success("Durao aplicada para todos os itens",{description:tp(O)})},T=O=>{CO(O),x(Z=>Z+1),ye.success("Item removido do carrinho")},M=()=>{pC(),x(O=>O+1),ye.success("Carrinho limpo")},F=m.useMemo(()=>{const O=u?.points??[];return g.items.map(Z=>{const q=O.find(ne=>ne.id===Z.pointId)??null,$=q?.units?.find(ne=>ne.id===Z.unitId)??null,X=Z.snapshot?.pointName||q?.name||"Ponto",I=Z.snapshot?.unitLabel||$?.label||"",B=q?pd(q):Z.snapshot?.addressLine||"",te=Z.snapshot?.imageUrl||$?.imageUrl||q?.mainImageUrl||"",ue=Z.snapshot?.priceMonth??$?.priceMonth??q?.basePriceMonth??null,Y=Z.snapshot?.priceWeek??$?.priceWeek??q?.basePriceWeek??null,ce=h?ri(ue,f):ue,U=h?ri(Y,f):Y;return{item:Z,pointName:X,unitLabel:I,address:B,img:te,priceMonth:ce,priceWeek:U}})},[g.items,u?.points,h,f]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),h&&f>0&&e.jsxs(Ke,{variant:"outline",className:"rounded-full",children:["Agncia +",f,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Carrinho"}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(j),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sua seleo"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Itens salvos neste navegador. Na prxima etapa, este carrinho vira uma solicitao de proposta."})]}),g.items.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(K,{variant:"outline",className:"gap-2",onClick:M,children:[e.jsx(Aa,{className:"h-4 w-4"}),"Limpar"]})})]}),g.items.length===0?e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gray-100 flex items-center justify-center",children:e.jsx(Yc,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seu carrinho est vazio"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte para a lista de pontos e adicione itens."})]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(K,{onClick:()=>t(j),children:"Ver pontos"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:g.items.length})," item(ns)"]}),e.jsxs("div",{className:"sm:ml-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Anos"}),e.jsx(Ce,{type:"number",min:0,value:w,onChange:O=>N(O.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Meses"}),e.jsx(Ce,{type:"number",min:0,value:C,onChange:O=>S(O.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Dias"}),e.jsx(Ce,{type:"number",min:0,value:E,onChange:O=>_(O.target.value)})]})]}),e.jsx(K,{variant:"outline",onClick:k,children:"Aplicar para todos"})]})]})})}),e.jsx("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3",children:F.map(({item:O,pointName:Z,unitLabel:q,address:$,img:X,priceMonth:I,priceWeek:B})=>e.jsx(Re,{className:"hover:shadow-sm transition-shadow",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-28 sm:w-32",children:e.jsx("div",{className:"aspect-[4/3] w-full overflow-hidden rounded-xl bg-gray-100",children:e.jsx(Rl,{src:X,alt:Z,className:"h-full w-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 truncate",children:Z}),q&&e.jsx("div",{className:"mt-1 text-xs text-gray-700",children:q}),$&&e.jsx("div",{className:"mt-1 text-xs text-gray-600 line-clamp-2",children:$})]}),e.jsx(K,{variant:"ghost",size:"icon",onClick:()=>T(O.id),title:"Remover",children:e.jsx(Aa,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:Tj(I)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:Tj(B)})]})]}),e.jsx(Ys,{className:"my-3"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Durao"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full sm:w-auto",children:[e.jsx(Ce,{type:"number",min:0,value:String(O.duration?.years??0),onChange:te=>{Hx(O.id,{...O.duration,years:Number(te.target.value||0)}),x(ue=>ue+1)},placeholder:"Anos"}),e.jsx(Ce,{type:"number",min:0,value:String(O.duration?.months??0),onChange:te=>{Hx(O.id,{...O.duration,months:Number(te.target.value||0)}),x(ue=>ue+1)},placeholder:"Meses"}),e.jsx(Ce,{type:"number",min:0,value:String(O.duration?.days??0),onChange:te=>{Hx(O.id,{...O.duration,days:Number(te.target.value||0)}),x(ue=>ue+1)},placeholder:"Dias"})]}),e.jsxs("div",{className:"sm:ml-auto text-xs text-gray-600",children:[tp(O.duration),O.durationDays>=30?"  Mensal":"  Perodo curto"]})]})]})]})})},O.id))}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsx(K,{onClick:()=>t(j),variant:"outline",children:"Adicionar mais pontos"}),e.jsx(K,{onClick:()=>t(`/menu/checkout${kj({token:s,uf:n,city:r,flow:o,ownerCompanyId:c})}`),className:"gap-2",children:"Continuar"})]})]})]})})}var TO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],DO=TO.reduce((t,s)=>{const n=bp(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),IO="Label",xC=m.forwardRef((t,s)=>e.jsx(DO.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));xC.displayName=IO;var MO=xC;function je({className:t,...s}){return e.jsx(MO,{"data-slot":"label",className:Nt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Wa=m.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{ref:n,"data-slot":"textarea",className:Nt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s}));Wa.displayName="Textarea";function fh(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function RO(t){const s=String(t||"").trim();return/.+@.+\..+/.test(s)}function OO(t){return String(t||"").replace(/\D+/g,"")}function LO(){const t=is(),{token:s,uf:n,city:r,flow:o,ownerCompanyId:c}=m.useMemo(()=>{const O=Qo();return{token:O.token,uf:O.uf||"",city:O.city||"",flow:O.flow,ownerCompanyId:O.ownerCompanyId}},[]),u=m.useMemo(()=>Wl(),[]),h=m.useMemo(()=>`/menu/carrinho${fh({token:s,uf:n,city:r,flow:o,ownerCompanyId:c})}`,[s,n,r,o,c]),[f,v]=m.useState(""),[x,g]=m.useState(""),[j,w]=m.useState(""),[N,C]=m.useState(""),[S,E]=m.useState(""),[_,k]=m.useState(""),[T,M]=m.useState(!1),F=async()=>{const O=String(f||"").trim(),Z=String(j||"").trim(),q=OO(x),$=String(s||"").trim();if(!$){ye.error("Token ausente. Abra o Cardpio a partir do link compartilhado.");return}if(!u.items.length){ye.error("Seu carrinho est vazio."),t(`/menu/pontos${fh({token:$,uf:n,city:r,flow:o,ownerCompanyId:c})}`);return}if(!O){ye.error("Informe seu nome.");return}if(!q||q.length<10){ye.error("Informe um WhatsApp/telefone vlido.");return}if(!RO(Z)){ye.error("Informe um e-mail vlido.");return}M(!0);try{const X=await Tn.post("/public/menu/request",{token:$,customerName:O,customerEmail:Z,customerPhone:x,customerCompanyName:N||void 0,customerCnpj:S||void 0,notes:_||void 0,items:u.items,uf:n||void 0,city:r||void 0,flow:o}),I=String(X?.data?.requestId||"").trim();if(!I)throw new Error("Resposta invlida: requestId ausente.");pC(),ye.success("Solicitao enviada!"),t(`/menu/enviado${fh({token:$,rid:I,uf:n,city:r,flow:o,ownerCompanyId:c})}`)}catch(X){const I=X?.response?.data?.message||X?.message||"Falha ao enviar solicitao.";ye.error("No foi possvel enviar",{description:String(I)})}finally{M(!1)}};return u.items.length?e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Checkout"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(h),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enviar solicitao de proposta"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Preencha seus dados e envie. O responsvel receber por e-mail automaticamente."})]}),e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-5",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Resumo do carrinho"}),e.jsx("div",{className:"mt-2 space-y-2",children:u.items.map(O=>e.jsxs("div",{className:"flex items-start justify-between gap-3 text-sm",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 truncate",children:[O.snapshot?.pointName||"Ponto",O.snapshot?.unitLabel?`  ${O.snapshot.unitLabel}`:""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[O.snapshot?.city?`${O.snapshot.city}`:"",O.snapshot?.state?`/${O.snapshot.state}`:"",O.snapshot?.addressLine?`  ${O.snapshot.addressLine}`:""]})]}),e.jsx("div",{className:"shrink-0 text-xs text-gray-700",children:e.jsx("span",{className:"font-semibold",children:tp(O.duration)})})]},O.id))})]})}),e.jsx(Re,{className:"mt-4",children:e.jsxs(Le,{className:"py-5",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seus dados"}),e.jsx(Ys,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome *"}),e.jsx(Ce,{value:f,onChange:O=>v(O.target.value),placeholder:"Seu nome"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"WhatsApp/Telefone *"}),e.jsx(Ce,{value:x,onChange:O=>g(O.target.value),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(je,{children:"E-mail *"}),e.jsx(Ce,{value:j,onChange:O=>w(O.target.value),placeholder:"seuemail@exemplo.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Empresa (opcional)"}),e.jsx(Ce,{value:N,onChange:O=>C(O.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"CNPJ (opcional)"}),e.jsx(Ce,{value:S,onChange:O=>E(O.target.value),placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(je,{children:"Observaes (opcional)"}),e.jsx(Wa,{value:_,onChange:O=>k(O.target.value),placeholder:"Ex.: preferncia de bairros, datas desejadas, briefing, etc.",className:"min-h-[110px]"})]})]}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsx(K,{variant:"outline",onClick:()=>t(h),children:"Voltar ao carrinho"}),e.jsxs(K,{onClick:F,disabled:T,className:"gap-2",children:[e.jsx(zo,{className:"h-4 w-4"}),T?"Enviando...":"Enviar solicitao"]})]})]})})]})}):e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),Uu(o)&&e.jsx(Ke,{variant:"outline",className:"rounded-full",children:"Agncia"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Checkout"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(h),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-8",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seu carrinho est vazio"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte para a lista de pontos e adicione itens."}),e.jsx("div",{className:"mt-5",children:e.jsx(K,{onClick:()=>t(`/menu/pontos${fh({token:s,uf:n,city:r})}`),children:"Ver pontos"})})]})})]})})}function Dj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function FO(){const t=is(),{token:s,t:n,rid:r,uf:o,city:c}=m.useMemo(()=>{const w=new URLSearchParams(window.location.search);return{token:w.get("token")||"",t:w.get("t")||"",rid:w.get("rid")||w.get("requestId")||"",uf:String(w.get("uf")||"").trim().toUpperCase(),city:String(w.get("city")||"").trim()}},[]),[u,h]=m.useState(!1),f=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),v=m.useMemo(()=>`/menu/acompanhar${Dj(f)}`,[f]),x=m.useMemo(()=>`${typeof window<"u"?window.location.origin:""}${v}`,[v]),g=async()=>{try{await navigator.clipboard.writeText(x),h(!0),ye.success("Link copiado"),setTimeout(()=>h(!1),1200)}catch{ye.error("No foi possvel copiar o link")}},j=s?`/menu/pontos${Dj({token:s,uf:o,city:c})}`:"/menu";return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Confirmao"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(j),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar ao cardpio"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-11 w-11 rounded-2xl bg-green-50 flex items-center justify-center",children:e.jsx(Ui,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Solicitao enviada"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"O responsvel j recebeu sua solicitao por e-mail. Assim que responder, voc segue com a proposta."}),r&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:r})]}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsxs(K,{className:"gap-2",onClick:()=>t(v),children:[e.jsx(t0,{className:"h-4 w-4"}),"Acompanhar proposta"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:g,children:[e.jsx($n,{className:"h-4 w-4"}),u?"Copiado!":"Copiar link de acompanhamento"]})]}),e.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"* Nesta etapa do prottipo, o acompanhamento mostra o status bsico do envio."})]})]})})})]})})}function fd(t){const s=Number(t?.response?.status||0),n=String(t?.response?.data?.message||t?.response?.data?.error||t?.message||"").trim(),r=n.toLowerCase(),o=r.includes("expir"),c=r.includes("revog")||r.includes("invlid")||r.includes("inval");if([401,403,410].includes(s))return o?{kind:"EXPIRED",title:"Link expirado",description:"Este link expirou. Pea ao responsvel para gerar um novo link."}:{kind:"REVOKED",title:"Link revogado ou invlido",description:"Este link no  mais vlido (pode ter sido regenerado). Pea um novo link ao responsvel."};if(s===404)return{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou pea ao responsvel para reenviar."};if(s===400){if(r.includes("token")||r.includes("ausente")||r.includes("missing"))return{kind:"MISSING_TOKEN",title:"Acesso invlido",description:"Token ausente. Abra o Cardpio a partir do link compartilhado."};if(c)return{kind:"REVOKED",title:"Link revogado ou invlido",description:"Este link no  mais vlido (pode ter sido regenerado). Pea um novo link ao responsvel."}}return{kind:"GENERIC",title:"No foi possvel carregar",description:n||"Falha ao carregar."}}async function mi(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim(),c={view:t.view};return r?c.t=r:c.token=n,(await Tn.get(`/public/menu/request/${encodeURIComponent(s)}`,{params:c})).data}async function $O(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim();return(await Tn.post(`/public/menu/quote/${encodeURIComponent(s)}/send`,{token:n||void 0,t:r||void 0,draft:t.draft})).data}async function zO(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim();return(await Tn.post(`/public/menu/quote/${encodeURIComponent(s)}/reject`,{token:n||void 0,t:r||void 0,reason:t.reason})).data}async function BO(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim();return(await Tn.post(`/public/menu/quote/${encodeURIComponent(s)}/approve`,{token:n||void 0,t:r||void 0})).data}async function gC(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim(),o=t.aud;return(await Tn.post(`/public/menu/link/${encodeURIComponent(s)}/regenerate`,{token:n||void 0,t:r||void 0},{params:{aud:o}})).data}function UO(t){return t==="EXPIRED"?s0:t==="REVOKED"?Gk:t==="NOT_FOUND"?O4:U4}function Q0(t){const s=UO(t.error.kind);return e.jsx(Re,{className:"border-amber-200 bg-amber-50",children:e.jsx(Le,{className:"py-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-11 w-11 rounded-2xl bg-amber-100 flex items-center justify-center",children:e.jsx(s,{className:"h-6 w-6 text-amber-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-amber-900",children:t.error.title}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:t.error.description}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-2",children:[t.primaryAction&&e.jsx(K,{className:"gap-2",variant:t.primaryAction.variant??"default",onClick:t.primaryAction.onClick,disabled:t.primaryAction.disabled,children:t.primaryAction.label}),t.secondaryAction&&e.jsx(K,{className:"gap-2",variant:t.secondaryAction.variant??"outline",onClick:t.secondaryAction.onClick,disabled:t.secondaryAction.disabled,children:t.secondaryAction.label})]})]})]})})})}function Ij(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Mj(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function VO(){const t=is(),{token:s,t:n,rid:r}=m.useMemo(()=>{const S=new URLSearchParams(window.location.search);return{token:S.get("token")||"",t:S.get("t")||"",rid:S.get("rid")||S.get("requestId")||""}},[]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),x=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),g=m.useMemo(()=>`/menu/enviado${Ij(x)}`,[x]),j=m.useMemo(()=>`/menu/proposta${Ij(x)}`,[x]);m.useEffect(()=>{let S=!0;return String(r||"").trim()?((async()=>{try{h(!0),v(null);const E=await mi({requestId:r,token:s,t:n,view:"client"});if(!S)return;c(E)}catch(E){if(!S)return;c(null);const _=fd(E);v(_),_.kind==="GENERIC"&&ye.error(_.title,{description:_.description})}finally{S&&h(!1)}})(),()=>{S=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso invlido",description:"O link est incompleto. Abra o acompanhamento a partir do link enviado."}),()=>{S=!1})},[r,s,n]);const w=m.useMemo(()=>{const S=Array.isArray(o?.events)?o.events:[],E=_=>S.find(k=>k.type===_)?.at||null;return[{key:"REQUEST_SUBMITTED",title:"Solicitao enviada",desc:"Recebemos sua solicitao e enviamos ao responsvel.",at:E("REQUEST_SUBMITTED")},{key:"OWNER_OPENED",title:"Em anlise",desc:"O responsvel est avaliando os itens e condies.",at:E("OWNER_OPENED")},{key:"QUOTE_SENT",title:"Proposta enviada",desc:"Uma verso da proposta foi enviada para voc visualizar.",at:E("QUOTE_SENT")},{key:"QUOTE_OPENED",title:"Proposta visualizada",desc:"Registramos a abertura do link (prottipo).",at:E("QUOTE_OPENED")},{key:"QUOTE_REJECTED",title:"Reviso solicitada",desc:"Voc solicitou reviso/ajuste na proposta.",at:E("QUOTE_REJECTED")},{key:"QUOTE_APPROVED",title:"Aprovada",desc:"A proposta foi aprovada e ficou travada.",at:E("QUOTE_APPROVED")}]},[o]),N=!!o?.currentQuoteVersion,C=m.useMemo(()=>{const S=String(o?.status||"").toUpperCase();return S==="SUBMITTED"?"Solicitao recebida":S==="IN_REVIEW"?"Em anlise":S==="QUOTE_SENT"?"Proposta enviada":S==="REVISION_REQUESTED"?"Reviso solicitada":S==="APPROVED"?"Aprovada":S==="RECEBIDA"?"Solicitao recebida":S||""},[o?.status]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Acompanhar proposta"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:u?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(ra,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:o.id})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Enviado em ",e.jsx("span",{className:"font-semibold",children:Mj(o.createdAt)})]})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Status"}),e.jsxs("div",{className:"mt-2 flex items-start gap-3",children:[e.jsx(rk,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C}),e.jsx("div",{className:"mt-0.5 text-xs text-gray-600",children:N?"Voc j pode abrir a proposta e aprovar/solicitar reviso.":"Aguardando avaliao do responsvel."})]})]}),e.jsx("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:e.jsxs(K,{className:"gap-2",disabled:!N,onClick:()=>t(j),children:[e.jsx(Js,{className:"h-4 w-4"}),"Ver proposta"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seus dados"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Nome:"})," ",e.jsx("span",{className:"font-medium",children:o.customerName})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"WhatsApp:"})," ",o.customerPhone]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"E-mail:"})," ",o.customerEmail]}),o.customerCompanyName&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Empresa:"})," ",o.customerCompanyName]})]})]})]}),o.notes&&e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Observaes"}),e.jsx("div",{className:"mt-2 text-sm text-gray-700 whitespace-pre-wrap",children:o.notes})]})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Linha do tempo"}),e.jsx("div",{className:"mt-3 space-y-3",children:w.map(S=>{const E=!!S.at;return e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-0.5 h-2.5 w-2.5 rounded-full ${E?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title}),e.jsx("div",{className:"text-xs text-gray-500",children:E?Mj(S.at):""})]}),e.jsx("div",{className:"mt-0.5 text-xs text-gray-600",children:S.desc})]})]})},S.key)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Itens solicitados"}),e.jsx("div",{className:"mt-3 space-y-3",children:o.items.map(S=>e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[S.snapshot?.pointName||"Ponto",S.snapshot?.unitLabel?`  ${S.snapshot.unitLabel}`:""]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[S.snapshot?.city?`${S.snapshot.city}`:"",S.snapshot?.state?`/${S.snapshot.state}`:"",S.snapshot?.addressLine?`  ${S.snapshot.addressLine}`:""]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:["Durao: ",e.jsx("span",{className:"font-semibold",children:tp(S.duration||K0(S.durationDays))})]})]},S.id))})]})]}):e.jsx(Q0,{error:f||{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou pea ao responsvel para reenviar."},primaryAction:{label:"Ir para o incio",variant:"outline",onClick:()=>t("/menu")},secondaryAction:{label:"Voltar",variant:"ghost",onClick:()=>t(g)}})})})]})})}function Rj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Rc(t){const s=Number(t||0);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}catch{return`R$ ${s.toFixed(2)}`}}function HO(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function Wx(t,s,n){const r=Math.floor(Number(t)||0);return Number.isFinite(r)?Math.max(s,Math.min(n,r)):s}function qO(t){const s=Wx(t?.years,0,99),n=Wx(t?.months,0,99),r=Wx(t?.days,0,99),o=[];return s&&o.push(`${s} ${s===1?"ano":"anos"}`),n&&o.push(`${n} ${n===1?"ms":"meses"}`),(r||o.length===0)&&o.push(`${r||0} ${r===1?"dia":"dias"}`),o.join(", ")}function WO(){const t=is(),{token:s,t:n,rid:r}=m.useMemo(()=>{const $=new URLSearchParams(window.location.search);return{token:$.get("token")||"",t:$.get("t")||"",rid:$.get("rid")||$.get("requestId")||""}},[]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),[x,g]=m.useState(!1),[j,w]=m.useState(!1),[N,C]=m.useState(""),S=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),E=m.useMemo(()=>`/menu/acompanhar${Rj(S)}`,[S]),_=m.useMemo(()=>{const $=Array.isArray(o?.quotes)?o.quotes:[],X=o?.currentQuoteVersion;return X&&$.find(I=>I.version===X)||null},[o]),k=async()=>{const $=await mi({requestId:r,token:s,t:n,view:"client"});c($)};m.useEffect(()=>{let $=!0;return String(r||"").trim()?((async()=>{try{h(!0),v(null);const X=await mi({requestId:r,token:s,t:n,view:"client"});if(!$)return;c(X)}catch(X){if(!$)return;c(null);const I=fd(X);v(I),I.kind==="GENERIC"&&ye.error(I.title,{description:I.description})}finally{$&&h(!1)}})(),()=>{$=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso invlido",description:"O link est incompleto. Abra a proposta a partir do link enviado."}),()=>{$=!1})},[r,s,n]);const T=!!_&&_?.status!=="APPROVED"&&String(o?.status||"").toUpperCase()!=="APPROVED",M=!!_&&_?.status==="SENT"&&String(o?.status||"").toUpperCase()!=="APPROVED",F=!!_&&(_?.status==="APPROVED"||String(o?.status||"").toUpperCase()==="APPROVED"),O=m.useMemo(()=>{if(!String(r||"").trim())return"";const $=`/api/public/menu/quote/${encodeURIComponent(r)}/contract`,X=Rj(n?{t:n}:{token:s});return`${$}${X}`},[r,n,s]),Z=async()=>{try{g(!0),await BO({requestId:r,token:s,t:n}),ye.success("Aprovada!",{description:"Registramos sua aprovao (prottipo)."}),await k(),t(E)}catch($){const X=$?.response?.data?.message||$?.message||"Falha ao aprovar.";ye.error("No foi possvel aprovar",{description:String(X)})}finally{g(!1)}},q=async()=>{try{g(!0),await zO({requestId:r,token:s,t:n,reason:N}),ye.success("Reviso solicitada",{description:"Enviamos o pedido de reviso ao responsvel (prottipo)."}),w(!1),C(""),await k(),t(E)}catch($){const X=$?.response?.data?.message||$?.message||"Falha ao solicitar reviso.";ye.error("No foi possvel solicitar reviso",{description:String(X)})}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Proposta"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(E),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:u?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(ra,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o?_?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:o.id})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Verso ",e.jsxs("span",{className:"font-semibold",children:["v",_.version]}),"  enviada em"," ",e.jsx("span",{className:"font-semibold",children:HO(_.createdAt)})]})]}),_.status==="APPROVED"&&e.jsxs("div",{className:"mt-4 rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-900",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Ui,{className:"h-4 w-4"}),"Proposta aprovada"]}),e.jsx("div",{className:"mt-1 text-xs text-green-800",children:"Esta verso est travada (prottipo)."})]}),_.status==="REJECTED"&&e.jsxs("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Lb,{className:"h-4 w-4"}),"Reviso solicitada"]}),_.rejectReason&&e.jsx("div",{className:"mt-1 text-xs text-amber-800 whitespace-pre-wrap",children:_.rejectReason})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Base (pontos/faces)"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-gray-900",children:Rc(_.totals.base)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servios"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-gray-900",children:Rc(_.totals.services)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Descontos"}),e.jsxs("div",{className:"mt-1 text-lg font-bold text-gray-900",children:["- ",Rc(_.totals.discount)]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-900 bg-gray-900 px-4 py-3",style:{backgroundColor:"#111827",color:"#ffffff"},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Total"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-white",children:Rc(_.totals.total)})]})]}),Array.isArray(_.draft?.services)&&_.draft.services.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Servios includos"}),e.jsx("div",{className:"mt-3 space-y-2",children:_.draft.services.map(($,X)=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-sm text-gray-900",children:$.name}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Rc($.value)})]},`${$.name}-${X}`))})]})]}),Array.isArray(_.draft?.gifts)&&_.draft.gifts.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Brindes (R$ 0)"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:"Itens gratuitos com perodo de ocupao. No alteram o total da proposta e constam como contrapartida."}),e.jsx("div",{className:"mt-3 space-y-2",children:_.draft.gifts.map($=>e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900 truncate",children:[String($.scope||"").toUpperCase()==="FACE"?"Face":"Ponto",": ",$.label||$.targetId]}),e.jsxs("div",{className:"mt-0.5 text-xs text-gray-600",children:["Perodo: ",qO($.duration)]})]}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Rc(0)})]})},String($.id)))})]})]}),_.draft?.message&&e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Mensagem do responsvel"}),e.jsx("div",{className:"mt-2 text-sm text-gray-700 whitespace-pre-wrap",children:_.draft.message})]})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!F&&e.jsxs(e.Fragment,{children:[e.jsxs(K,{className:"gap-2",disabled:!T||x,onClick:Z,children:[e.jsx(Ui,{className:"h-4 w-4"}),"Aprovar"]}),e.jsxs(K,{variant:"outline",className:"gap-2",disabled:!M||x,onClick:()=>w($=>!$),children:[e.jsx(Lb,{className:"h-4 w-4"}),"Solicitar reviso"]})]}),F&&String(O||"").trim()&&e.jsxs(K,{type:"button",variant:"secondary",className:"gap-2",onClick:()=>window.open(O,"_blank","noopener,noreferrer"),children:[e.jsx(Js,{className:"h-4 w-4"}),"Baixar contrato"]})]}),j&&!F&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-white px-4 py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"O que voc quer ajustar?"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:"Ex.: prazo, desconto, servios, ponto especfico"}),e.jsx("div",{className:"mt-3",children:e.jsx(Wa,{placeholder:"Escreva aqui (opcional)",value:N,onChange:$=>C($.target.value)})}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx(K,{disabled:x,onClick:q,children:"Enviar reviso"}),e.jsx(K,{variant:"ghost",disabled:x,onClick:()=>w(!1),children:"Cancelar"})]})]})]}):e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-2xl bg-gray-100 flex items-center justify-center",children:e.jsx(Js,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Ainda no h proposta"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"O responsvel ainda no enviou a proposta. Voc pode acompanhar pelo status."}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{onClick:()=>t(E),children:"Voltar para acompanhamento"})})]})]})}):e.jsx(Q0,{error:f||{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou pea ao responsvel para reenviar."},primaryAction:{label:"Ir para o incio",variant:"outline",onClick:()=>t("/menu")},secondaryAction:{label:"Voltar para acompanhamento",variant:"ghost",onClick:()=>t(E)}})})})]})})}function Oc(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function _r(t){const s=Number(t||0);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}catch{return`R$ ${s.toFixed(2)}`}}function Lc(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function zi(t,s,n){const r=Math.floor(Number(t)||0);return Number.isFinite(r)?Math.max(s,Math.min(n,r)):s}function Oj(t){const s=zi(t?.years,0,99),n=zi(t?.months,0,99),r=zi(t?.days,0,99),o=[];return s&&o.push(`${s} ${s===1?"ano":"anos"}`),n&&o.push(`${n} ${n===1?"ms":"meses"}`),(r||o.length===0)&&o.push(`${r||0} ${r===1?"dia":"dias"}`),o.join(", ")}const xh=[{name:"Impresso (material)",defaultValue:1200},{name:"Instalao (mo de obra)",defaultValue:600},{name:"Criao/Arte",defaultValue:800},{name:"Logstica",defaultValue:350}];function GO(t){const s=Number(t?.durationDays);if(Number.isFinite(s)&&s>0)return Math.max(1,Math.floor(s));const n=t?.duration||{},r=Number(n?.totalDays);if(Number.isFinite(r)&&r>0)return Math.max(1,Math.floor(r));const o=Math.max(0,Math.floor(Number(n?.years)||0)),c=Math.max(0,Math.floor(Number(n?.months)||0)),u=Math.max(0,Math.floor(Number(n?.days)||0)),h=o*365+c*30+u;return Math.max(1,Math.floor(Number.isFinite(h)&&h>0?h:30))}function ZO(t){const s=(t||[]).map(u=>{const h=GO(u),f=Number(u?.snapshot?.priceWeek||0),v=Number(u?.snapshot?.priceMonth||0);let x=0;return h<=7&&f>0?x=f:v>0?x=v*Math.max(1,h/30):f>0&&(x=f*Math.max(1,h/7)),Number(x.toFixed(6))}),n=Number(s.reduce((u,h)=>u+h,0).toFixed(2)),r=Math.round(n*100);let o=s.map(u=>Math.round(u*100));const c=o.reduce((u,h)=>u+h,0);return o.length&&c!==r&&(o[o.length-1]+=r-c),{baseGrossCents:r,itemCents:o}}function KO(t,s){const n=q=>Number((Math.max(0,q)/100).toFixed(2)),r=t?.items||[],{baseGrossCents:o,itemCents:c}=ZO(r),u=Math.max(0,Number(s.manualServiceValue||0)),h=Array.isArray(s.services)?s.services:[],f=Number((h.reduce((q,$)=>q+Number($.value||0),0)+u).toFixed(2)),v=Math.round(f*100);let x=0;for(const q of h){const $=Math.max(0,Number(q.value||0));if($<=0)continue;const X=Math.round($*100),I=Math.max(0,Number(q?.discountPercent||0)),B=Math.round(Math.max(0,Number(q?.discountFixed||0))*100),te=Math.round(X*(I/100)),ue=Math.min(X,te+B);x+=ue}x=Math.min(v,Math.max(0,x));let g=Math.max(0,v-x),j=[...c],N=[...Array.isArray(s?.discounts)?s.discounts:[]];if(!N.length){const q=Math.max(0,Number(s?.discountPercent||0)),$=Math.max(0,Number(s?.discountFixed||0)),X=String(s?.discountApplyTo||"ALL").toUpperCase()||"ALL";(q>0||$>0)&&(N=[{id:"legacy_general",scope:"GENERAL",targetId:null,percent:q>0?q:null,fixed:$>0?$:null,appliesTo:X,label:"Desconto geral"}])}const C=q=>{const $=String(q||"").toUpperCase();return $==="FACE"?0:$==="POINT"||$==="PONTO"?1:$==="GENERAL"||$==="GERAL"?2:9},S=N.map((q,$)=>({...q||{},__i:$})).filter(q=>q&&(Number(q?.percent||0)>0||Number(q?.fixed||0)>0)).sort((q,$)=>C(q.scope)-C($.scope)||q.__i-$.__i),E=(q,$)=>{const X=(q||[]).filter(Y=>Number.isFinite(Y)&&Y>=0&&Y<j.length);if(!X.length)return;const I=X.reduce((Y,ce)=>Y+Math.max(0,j[ce]),0);if(I<=0)return;const B=Math.min(Math.max(0,$),I);let te=0;for(let Y=0;Y<X.length;Y++){const ce=X[Y],U=Math.max(0,j[ce]);if(U<=0)continue;let ne=Y===X.length-1?B-te:Math.round(B*U/I);if(ne=Math.min(U,Math.max(0,ne)),j[ce]=U-ne,te+=ne,te>=B)break}let ue=B-te;if(ue>0)for(let Y=X.length-1;Y>=0;Y--){const ce=X[Y],U=Math.max(0,j[ce]);if(U<=0)continue;const ne=Math.min(U,ue);if(j[ce]=U-ne,ue-=ne,ue<=0)break}};let _=0,k=0;const T=[],M=()=>j.reduce((q,$)=>q+Math.max(0,$),0);for(const q of S){const $=String(q?.scope||"").trim().toUpperCase(),X=$==="FACE"?"FACE":$==="POINT"||$==="PONTO"?"POINT":"GENERAL",I=String(q?.id||""),B=q?.targetId??null,te=q?.label??null,ue=Math.max(0,Number(q?.percent||0)),Y=Math.round(Math.max(0,Number(q?.fixed||0))*100),ce=String(q?.appliesTo??"ALL").trim().toUpperCase(),U=ce==="BASE"?"BASE":ce==="SERVICES"||ce==="SERVICE"?"SERVICES":"ALL";if(ue<=0&&Y<=0)continue;const ne=re=>{const ae=Math.round(re*(ue/100));return Math.min(Math.max(0,re),Math.max(0,ae+Y))};if(X==="FACE"){const re=r.map((oe,Pe)=>String(oe?.unitId||"")===String(B||"")?Pe:-1).filter(oe=>oe>=0),ae=re.reduce((oe,Pe)=>oe+Math.max(0,j[Pe]),0);if(ae<=0)continue;const me=ne(ae);if(me<=0)continue;E(re,me),_+=me,T.push({id:I,scope:X,targetId:B,appliesTo:"BASE",label:te,percent:ue,fixed:n(Y),base:n(ae),amount:n(me)});continue}if(X==="POINT"){const re=r.map((oe,Pe)=>String(oe?.pointId||"")===String(B||"")?Pe:-1).filter(oe=>oe>=0),ae=re.reduce((oe,Pe)=>oe+Math.max(0,j[Pe]),0);if(ae<=0)continue;const me=ne(ae);if(me<=0)continue;E(re,me),_+=me,T.push({id:I,scope:X,targetId:B,appliesTo:"BASE",label:te,percent:ue,fixed:n(Y),base:n(ae),amount:n(me)});continue}const Q=M(),z=Q+g,se=U==="BASE"?Q:U==="SERVICES"?g:z;if(se<=0)continue;const G=ne(se);if(G<=0)continue;let ee=0,V=0;if(U==="BASE")ee=Math.min(Q,G);else if(U==="SERVICES")V=Math.min(g,G);else{const re=Math.max(1,z);if(ee=Math.round(G*Q/re),V=G-ee,ee>Q){const ae=ee-Q;ee=Q,V+=ae}if(V>g){const ae=V-g;V=g,ee=Math.min(Q,ee+ae)}}if(ee>0&&(E(r.map((re,ae)=>ae),ee),_+=ee),V>0){const re=Math.min(g,V);g-=re,k+=re}T.push({id:I,scope:"GENERAL",targetId:null,appliesTo:U,label:te,percent:ue,fixed:n(Y),base:n(se),amount:n(G),meta:U==="ALL"?{basePart:n(ee),servicesPart:n(V)}:void 0})}const F=Math.max(0,_+k),O=Math.min(o+v,Math.max(0,x+F)),Z=Math.max(0,o+v-O);return{base:n(o),services:n(v),discount:n(O),total:n(Z),breakdown:{baseGross:n(o),baseNet:n(Math.max(0,o-_)),servicesGross:n(v),servicesNet:n(Math.max(0,v-x-k)),servicesLineDiscount:n(x),baseDiscount:n(_),servicesDiscount:n(k),appliedDiscounts:T}}}function QO(){const t=is(),{token:s,t:n,rid:r}=m.useMemo(()=>{const fe=new URLSearchParams(window.location.search);return{token:fe.get("token")||"",t:fe.get("t")||"",rid:fe.get("rid")||fe.get("requestId")||""}},[]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),[x,g]=m.useState(!1),[j,w]=m.useState(!1),[N,C]=m.useState({message:"",services:[],manualServiceValue:null,gifts:[],discounts:[],discountPercent:null,discountFixed:null,discountApplyTo:"ALL"}),[S,E]=m.useState(xh[0]?.name||""),[_,k]=m.useState(xh[0]?.defaultValue||0),T=m.useMemo(()=>{const fe=new Map;for(const Ye of o?.items||[]){const dt=String(Ye?.unitId||"");if(dt&&!fe.has(dt)){const kt=Ye?.snapshot?.pointName||Ye?.snapshot?.mediaPointName||Ye?.pointId||"",ht=Ye?.snapshot?.unitLabel||Ye?.snapshot?.mediaUnitLabel||dt;fe.set(dt,{id:dt,label:kt?`${kt}  ${ht}`:String(ht)})}}return Array.from(fe.values())},[o?.items]),M=m.useMemo(()=>{const fe=new Map;for(const Ye of o?.items||[]){const dt=String(Ye?.pointId||"");if(dt&&!fe.has(dt)){const kt=Ye?.snapshot?.pointName||Ye?.snapshot?.mediaPointName||dt;fe.set(dt,{id:dt,label:String(kt)})}}return Array.from(fe.values())},[o?.items]),[F,O]=m.useState("GENERAL"),[Z,q]=m.useState(""),[$,X]=m.useState("ALL"),[I,B]=m.useState(""),[te,ue]=m.useState(""),[Y,ce]=m.useState("POINT"),[U,ne]=m.useState(""),[Q,z]=m.useState(""),[se,G]=m.useState(""),[ee,V]=m.useState("30");m.useEffect(()=>{if(Y==="FACE"){(!U||!T.some(fe=>fe.id===U))&&ne(T[0]?.id||"");return}(!U||!M.some(fe=>fe.id===U))&&ne(M[0]?.id||"")},[Y,U,T,M]);const re=fe=>{C(Ye=>({...Ye,discounts:(Ye.discounts||[]).filter(dt=>dt.id!==fe)}))},ae=()=>{if(J)return;const fe=Math.max(0,Number(I||0)),Ye=Math.max(0,Number(te||0));if(fe<=0&&Ye<=0){ye.error("Informe um desconto (%) ou (R$).");return}if((F==="FACE"||F==="POINT")&&!Z){ye.error("Selecione o alvo do desconto.");return}const dt=(()=>{try{return`md_${crypto.randomUUID()}`}catch{return`md_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,10)}`}})(),kt=F==="FACE"?T.find(Ft=>Ft.id===Z)?.label||"Desconto por face":F==="POINT"?M.find(Ft=>Ft.id===Z)?.label||"Desconto por ponto":"Desconto geral",ht={id:dt,scope:F,targetId:F==="GENERAL"?null:Z,percent:fe>0?fe:null,fixed:Ye>0?Ye:null,appliesTo:F==="GENERAL"?$:"BASE",label:kt};C(Ft=>({...Ft,discounts:[...Ft.discounts||[],ht],discountPercent:null,discountFixed:null,discountApplyTo:"ALL"})),B(""),ue("")},me=fe=>{C(Ye=>({...Ye,gifts:(Ye.gifts||[]).filter(dt=>dt.id!==fe)}))},oe=()=>{if(J)return;if(Y==="FACE"&&!T.length||Y==="POINT"&&!M.length){ye.error("No h itens suficientes para este brinde.");return}const fe=String(U||"").trim();if(!fe){ye.error("Selecione o alvo do brinde.");return}const Ye=zi(Q,0,10),dt=zi(se,0,24),kt=zi(ee,0,31);let ht=Ye*365+dt*30+kt;if(ht<=0&&(ht=30),(N.gifts||[]).some(Yt=>Yt.scope===Y&&String(Yt.targetId)===String(fe))){ye.error("Esse brinde j foi adicionado para esse alvo.");return}const ms=(()=>{try{return`mg_${crypto.randomUUID()}`}catch{return`mg_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,10)}`}})(),hs=Y==="FACE"?T.find(Yt=>Yt.id===fe)?.label||"Brinde por face":M.find(Yt=>Yt.id===fe)?.label||"Brinde por ponto",Ps={id:ms,scope:Y,targetId:fe,duration:{years:Ye,months:dt,days:kt,totalDays:ht},label:hs};C(Yt=>({...Yt,gifts:[...Yt.gifts||[],Ps]}))},Pe=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),We=o?.links?.client?.token||"",Je=o?.links?.owner?.token||"",tt=m.useMemo(()=>We?`/menu/acompanhar?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(We)}`:`/menu/acompanhar${Oc(Pe)}`,[We,r,Pe]),nt=m.useMemo(()=>We?`/menu/proposta?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(We)}`:`/menu/proposta${Oc(Pe)}`,[We,r,Pe]),ct=m.useMemo(()=>`/menu/dono/enviada${Oc(Pe)}`,[Pe]),wt=m.useMemo(()=>`/menu/dono/revisao${Oc(Pe)}`,[Pe]),pt=m.useMemo(()=>`/menu/dono/aprovada${Oc(Pe)}`,[Pe]),It=m.useMemo(()=>Je?`/menu/dono?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(Je)}`:`/menu/dono${Oc(Pe)}`,[Je,r,Pe]);m.useMemo(()=>{const fe=Array.isArray(o?.quotes)?o.quotes:[],Ye=o?.currentQuoteVersion;return Ye&&fe.find(dt=>dt.version===Ye)||null},[o]);const Lt=String(o?.status||"").toUpperCase(),J=Lt==="APPROVED",ve=m.useMemo(()=>KO(o,N),[o,N]);m.useEffect(()=>{let fe=!0;return String(r||"").trim()?String(n||"").trim()?((async()=>{try{h(!0),v(null);const Ye=await mi({requestId:r,token:s,t:n,view:"owner"});if(!fe)return;c(Ye);const dt=Array.isArray(Ye?.quotes)?Ye.quotes:[],kt=Ye?.currentQuoteVersion,ht=kt?dt.find(Ft=>Ft.version===kt):null;if(ht?.draft){const Ft=Array.isArray(ht.draft?.discounts)?ht.draft.discounts||[]:[],hs=(Array.isArray(ht.draft?.gifts)?ht.draft.gifts||[]:Array.isArray(ht.draft?.brindes)?ht.draft.brindes||[]:[]).map(Mt=>{const Wt=String(Mt?.scope??Mt?.targetType??Mt?.type??"").trim().toUpperCase(),Es=Wt==="POINT"||Wt==="PONTO"?"POINT":"FACE",xs=String(Mt?.targetId??Mt?.target??Mt?.unitId??Mt?.pointId??"").trim();if(!xs)return null;const fs=Mt?.duration??Mt?.period??Mt?.occupation??{},Ee=zi(fs?.years,0,10),rt=zi(fs?.months,0,24),it=zi(fs?.days,0,31);let we=Ee*365+rt*30+it;return we<=0&&(we=30),{id:String(Mt?.id||`mg_legacy_${xs}`),scope:Es,targetId:xs,duration:{years:Ee,months:rt,days:it,totalDays:we},label:Mt?.label??null}}).filter(Boolean),Ps=Math.max(0,Number(ht.draft?.discountPercent||0)),Yt=Math.max(0,Number(ht.draft?.discountFixed||0)),Gs=String(ht.draft?.discountApplyTo||"ALL").toUpperCase()||"ALL",Ct=Ft.length?Ft:Ps>0||Yt>0?[{id:"legacy_general",scope:"GENERAL",targetId:null,percent:Ps>0?Ps:null,fixed:Yt>0?Yt:null,appliesTo:Gs,label:"Desconto geral"}]:[];C({message:ht.draft.message||"",services:Array.isArray(ht.draft.services)?ht.draft.services.map(Mt=>({name:Mt?.name,value:Mt?.value,discountPercent:Mt?.discountPercent??null,discountFixed:Mt?.discountFixed??null})):[],manualServiceValue:ht.draft.manualServiceValue??null,gifts:hs,discounts:Ct,discountPercent:ht.draft.discountPercent??null,discountFixed:ht.draft.discountFixed??null,discountApplyTo:ht.draft?.discountApplyTo??"ALL"})}}catch(Ye){const dt=fd(Ye);c(null),v(dt),dt.kind==="GENERIC"&&ye.error(dt.title,{description:dt.description})}finally{fe&&h(!1)}})(),()=>{fe=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso restrito",description:"Este workspace  exclusivo do responsvel. Abra a partir do link enviado por e-mail."}),()=>{fe=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso invlido",description:"O link est incompleto. Abra o workspace a partir do link do responsvel."}),()=>{fe=!1})},[r,s,n]);const xe=async()=>{const fe=await mi({requestId:r,token:s,t:n,view:"owner"});c(fe)},Ve=typeof window<"u"?window.location.origin:"",de=fe=>`${Ve}${fe}`,Ne=async fe=>{try{await navigator.clipboard.writeText(fe),ye.success("Copiado")}catch{ye.error("No foi possvel copiar")}},Be=async()=>{try{w(!0),await gC({requestId:r,aud:"client",token:s,t:n}),await xe(),ye.success("Link do cliente regenerado",{description:"O link anterior foi invalidado."})}catch(fe){const Ye=fe?.response?.data?.message||fe?.message||"Falha ao regenerar.";ye.error("No foi possvel regenerar",{description:String(Ye)})}finally{w(!1)}},He=fe=>{E(fe);const Ye=xh.find(dt=>dt.name===fe);Ye&&k(Ye.defaultValue)},gt=()=>{const fe=String(S||"").trim(),Ye=Number(_||0);if(!fe||!Number.isFinite(Ye)||Ye<=0)return;const dt={name:fe,value:Ye,discountPercent:null,discountFixed:null};C(kt=>({...kt,services:[...kt.services||[],dt]}))},pe=fe=>{C(Ye=>({...Ye,services:(Ye.services||[]).filter((dt,kt)=>kt!==fe)}))},$e=(fe,Ye)=>{C(dt=>({...dt,services:(dt.services||[]).map((kt,ht)=>ht===fe?{...kt,...Ye}:kt)}))},Xe=async()=>{try{if(J)return;g(!0),await $O({requestId:r,token:s,t:n,draft:N}),ye.success("Proposta enviada",{description:"Verso criada e vinculada ao request (prottipo)."}),t(ct)}catch(fe){const Ye=fe?.response?.data?.message||fe?.message||"Falha ao enviar.";ye.error("No foi possvel enviar",{description:String(Ye)})}finally{g(!1)}},mt=()=>{if(Lt==="APPROVED")return t(pt);if(Lt==="REVISION_REQUESTED")return t(wt);if(Lt==="QUOTE_SENT")return t(ct)};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Workspace do responsvel"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(tt),children:[e.jsx(rn,{className:"h-4 w-4"}),"Acompanhar"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:mt,children:[e.jsx(Js,{className:"h-4 w-4"}),"Estado atual"]})]})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:u?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(ra,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:o.id})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Atualizado em ",e.jsx("span",{className:"font-semibold",children:Lc(o.updatedAt||o.createdAt)})]})]}),o.links&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Link do cliente (assinado)"}),e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:Be,disabled:j,children:[j?e.jsx(ra,{className:"h-4 w-4 animate-spin"}):e.jsx(Pw,{className:"h-4 w-4"}),"Regenerar"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Lc(o.links?.client?.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Lc(o.links?.client?.expiresAt)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>Ne(de(tt)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar acompanhamento"]}),e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>Ne(de(nt)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar proposta"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:de(nt)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Link do dono (workspace)"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Lc(o.links?.owner?.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Lc(o.links?.owner?.expiresAt)})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>Ne(de(It)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar link"]})}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:de(It)})]})]}),J&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-900 bg-gray-900 px-4 py-3 text-sm text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(xp,{className:"h-4 w-4"}),"Proposta aprovada (travada)"]}),e.jsx("div",{className:"mt-1 text-xs text-gray-200",children:"Voc no pode gerar novas verses aps aprovao."})]}),Lt==="REVISION_REQUESTED"&&e.jsxs("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:[e.jsx("div",{className:"font-semibold",children:"Reviso solicitada pelo cliente"}),e.jsx("div",{className:"mt-1 text-xs text-amber-800",children:"Abra a tela de reviso para ver a mensagem do cliente."}),e.jsx("div",{className:"mt-3",children:e.jsx(K,{variant:"outline",onClick:()=>t(wt),children:"Ver reviso"})})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Resumo do cliente"}),e.jsxs("div",{className:"mt-3 rounded-xl border border-gray-200 bg-white px-4 py-3 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Nome:"})," ",e.jsx("span",{className:"font-medium",children:o.customerName})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"WhatsApp:"})," ",o.customerPhone]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"E-mail:"})," ",o.customerEmail]}),o.customerCompanyName&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Empresa:"})," ",o.customerCompanyName]}),o.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Observaes"}),e.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:o.notes})]})]}),e.jsx("div",{className:"mt-5 text-sm font-semibold text-gray-900",children:"Histrico de verses"}),e.jsx("div",{className:"mt-3 space-y-2",children:(Array.isArray(o.quotes)?o.quotes:[]).length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma verso enviada ainda."}):(o.quotes||[]).slice().reverse().map(fe=>e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["v",fe.version]}),e.jsx("div",{className:"text-xs text-gray-600",children:Lc(fe.createdAt)})]}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["Status: ",e.jsx("span",{className:"font-semibold",children:fe.status})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:_r(fe.totals.total)})]})]},fe.version))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Documento editvel (mock)"}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(nt),children:[e.jsx(Ou,{className:"h-4 w-4"}),"Ver como cliente"]})]}),e.jsxs("div",{className:"mt-3 rounded-xl border border-gray-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensagem (opcional)"}),e.jsx("div",{className:"mt-2",children:e.jsx(Wa,{value:String(N.message??""),onChange:fe=>C(Ye=>({...Ye,message:fe.target.value})),placeholder:"Explique condies, prazos, observaes",disabled:J})}),e.jsx(Ys,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Servios"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:S,onChange:fe=>He(fe.target.value),disabled:J,children:xh.map(fe=>e.jsx("option",{value:fe.name,children:fe.name},fe.name))}),e.jsx(Ce,{type:"number",value:Number.isFinite(Number(_))?String(_):"",onChange:fe=>k(Number(fe.target.value||0)),placeholder:"Valor",disabled:J}),e.jsx(K,{variant:"outline",onClick:gt,disabled:J,children:"Adicionar"})]}),(N.services||[]).length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:(N.services||[]).map((fe,Ye)=>{const dt=Math.max(0,Number(fe?.value||0)),kt=Math.max(0,Number(fe?.discountPercent||0)),ht=Math.max(0,Number(fe?.discountFixed||0)),Ft=Number(Math.min(dt,dt*(kt/100)+ht).toFixed(2)),ms=Ft>0;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 rounded-xl border border-gray-200 px-3 py-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm text-gray-900",children:fe.name}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Desconto do servio (opcional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{type:"number",className:"h-9 w-20",value:fe?.discountPercent==null?"":String(fe?.discountPercent),onChange:hs=>$e(Ye,{discountPercent:hs.target.value?Number(hs.target.value):null}),placeholder:"%",disabled:J}),e.jsx(Ce,{type:"number",className:"h-9 w-24",value:fe?.discountFixed==null?"":String(fe?.discountFixed),onChange:hs=>$e(Ye,{discountFixed:hs.target.value?Number(hs.target.value):null}),placeholder:"R$",disabled:J})]}),ms&&e.jsxs("div",{className:"text-xs text-gray-500",children:["(- ",_r(Ft),")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_r(fe.value)}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>pe(Ye),disabled:J,children:"Remover"})]})]},`${fe.name}-${Ye}`)})}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servio manual (R$)"}),e.jsx(Ce,{type:"number",value:N.manualServiceValue==null?"":String(N.manualServiceValue),onChange:fe=>C(Ye=>({...Ye,manualServiceValue:fe.target.value?Number(fe.target.value):null})),placeholder:"0",disabled:J})]}),e.jsx("div",{})]}),e.jsx(Ys,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Descontos"}),e.jsx("div",{className:"mt-2 space-y-2",children:(N.discounts||[]).length===0?e.jsx("div",{className:"rounded-xl border border-gray-200 px-3 py-2 text-xs text-gray-500",children:"Nenhum desconto aplicado."}):(N.discounts||[]).map(fe=>{const Ye=ve?.breakdown?.appliedDiscounts?.find(Ft=>Ft.id===fe.id),dt=fe.scope==="FACE"?"Face":fe.scope==="POINT"?"Ponto":"Geral",kt=fe.scope==="GENERAL"?fe.appliesTo==="BASE"?"Base":fe.appliesTo==="SERVICES"?"Servios":"Tudo":"Base",ht=[fe.percent?`${fe.percent}%`:null,fe.fixed?_r(fe.fixed):null].filter(Boolean);return e.jsx("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:fe.label||`${dt} (${kt})`}),e.jsxs("div",{className:"text-[11px] text-gray-500",children:[dt,fe.scope!=="GENERAL"&&fe.targetId?`  alvo: ${fe.targetId}`:"",fe.scope==="GENERAL"?`  aplicar em: ${kt}`:"",ht.length?`  ${ht.join(" + ")}`:""]}),Ye?.amount?e.jsxs("div",{className:"mt-1 text-[11px] text-gray-600",children:["Impacto: - ",_r(Ye.amount)]}):null]}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>re(fe.id),disabled:J,children:"Remover"})]})},fe.id)})}),e.jsxs("div",{className:"mt-3 rounded-xl border border-gray-200 p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Adicionar desconto"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-5 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Escopo"}),e.jsxs("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:F,onChange:fe=>{const Ye=fe.target.value;O(Ye),q(Ye==="FACE"?T[0]?.id||"":Ye==="POINT"&&M[0]?.id||"")},disabled:J,children:[e.jsx("option",{value:"GENERAL",children:"Geral"}),e.jsx("option",{value:"FACE",children:"Por face"}),e.jsx("option",{value:"POINT",children:"Por ponto"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:F==="GENERAL"?"Aplicar em":"Alvo"}),F==="FACE"?e.jsx("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:Z,onChange:fe=>q(fe.target.value),disabled:J||!T.length,children:T.map(fe=>e.jsx("option",{value:fe.id,children:fe.label},fe.id))}):F==="POINT"?e.jsx("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:Z,onChange:fe=>q(fe.target.value),disabled:J||!M.length,children:M.map(fe=>e.jsx("option",{value:fe.id,children:fe.label},fe.id))}):e.jsxs("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:$,onChange:fe=>X(fe.target.value),disabled:J,children:[e.jsx("option",{value:"ALL",children:"Tudo (base + servios)"}),e.jsx("option",{value:"BASE",children:"Base (pontos/faces)"}),e.jsx("option",{value:"SERVICES",children:"Servios"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"% (sobre escopo)"}),e.jsx(Ce,{type:"number",value:I,onChange:fe=>B(fe.target.value),placeholder:"0",disabled:J})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"R$ fixo"}),e.jsx(Ce,{type:"number",value:te,onChange:fe=>ue(fe.target.value),placeholder:"0",disabled:J})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(K,{className:"w-full",variant:"outline",onClick:ae,disabled:J,children:"Adicionar"})})]}),F==="FACE"&&!T.length||F==="POINT"&&!M.length?e.jsx("div",{className:"mt-2 text-[11px] text-amber-600",children:"No h itens suficientes para listar alvos deste escopo."}):null]}),e.jsx(Ys,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Brindes (R$ 0)"}),e.jsxs("div",{className:"mt-2 text-[12px] text-gray-600",children:["Brindes so itens gratuitos com perodo de ocupao. Eles ",e.jsx("span",{className:"font-semibold",children:"no alteram o total"}),", mas aparecem no documento."]}),e.jsx("div",{className:"mt-3 space-y-2",children:(N.gifts||[]).length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhum brinde adicionado."}):(N.gifts||[]).map(fe=>e.jsx("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900 truncate",children:[fe.scope==="FACE"?"Face":"Ponto",": ",fe.label||fe.targetId]}),e.jsxs("div",{className:"mt-0.5 text-xs text-gray-600",children:["Perodo: ",Oj(fe.duration)]})]}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>me(fe.id),disabled:J,children:"Remover"})]})},fe.id))}),e.jsxs("div",{className:"mt-3 rounded-xl border border-gray-200 p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Adicionar brinde"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-6 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Tipo"}),e.jsxs("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:Y,onChange:fe=>ce(fe.target.value),disabled:J,children:[e.jsx("option",{value:"POINT",children:"Por ponto"}),e.jsx("option",{value:"FACE",children:"Por face"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Alvo"}),Y==="FACE"?e.jsx("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:U,onChange:fe=>ne(fe.target.value),disabled:J||!T.length,children:T.map(fe=>e.jsx("option",{value:fe.id,children:fe.label},fe.id))}):e.jsx("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:U,onChange:fe=>ne(fe.target.value),disabled:J||!M.length,children:M.map(fe=>e.jsx("option",{value:fe.id,children:fe.label},fe.id))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Anos (010)"}),e.jsx(Ce,{type:"number",value:Q,onChange:fe=>z(fe.target.value),placeholder:"0",disabled:J})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Meses (024)"}),e.jsx(Ce,{type:"number",value:se,onChange:fe=>G(fe.target.value),placeholder:"0",disabled:J})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Dias (031)"}),e.jsx(Ce,{type:"number",value:ee,onChange:fe=>V(fe.target.value),placeholder:"30",disabled:J})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(K,{className:"w-full",variant:"outline",onClick:oe,disabled:J,children:"Adicionar brinde"})})]}),e.jsx(Ys,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Resumo (preview)"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Base"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_r(ve.base)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servios"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_r(ve.services)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Descontos"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["- ",_r(ve.discount)]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[11px] text-gray-500",children:[ve.breakdown?.servicesLineDiscount>0?e.jsxs("div",{children:["Servios (linhas): - ",_r(ve.breakdown.servicesLineDiscount)]}):null,(ve.breakdown?.appliedDiscounts||[]).map(fe=>e.jsxs("div",{className:"truncate",children:[fe.label||(fe.scope==="FACE"?"Face":fe.scope==="POINT"?"Ponto":"Geral"),": - ",_r(fe.amount)]},fe.id))]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Brindes (R$ 0)"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[(N.gifts||[]).length," item(ns)"]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[11px] text-gray-500",children:[(N.gifts||[]).slice(0,3).map(fe=>e.jsxs("div",{className:"truncate",children:[fe.scope==="FACE"?"Face":"Ponto",": ",fe.label||fe.targetId,"  ",Oj(fe.duration)]},fe.id)),(N.gifts||[]).length>3?e.jsxs("div",{className:"text-[11px] text-gray-400",children:["+",(N.gifts||[]).length-3," outro(s)"]}):null]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-900 bg-gray-900 px-3 py-2",style:{backgroundColor:"#111827",color:"#ffffff"},children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Total"}),e.jsx("div",{className:"text-sm font-semibold text-white",children:_r(ve.total)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(K,{className:"w-full gap-2",onClick:Xe,disabled:J||x,children:[x?e.jsx(ra,{className:"h-4 w-4 animate-spin"}):e.jsx(Lu,{className:"h-4 w-4"}),"Enviar proposta (gera nova verso)"]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-2",children:[e.jsx(Ok,{className:"h-3.5 w-3.5"}),"Ao reenviar, criamos v1/v2/v3 sem perder histrico."]})]})]})]})]})]}):e.jsx(Q0,{error:f||{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou gere um novo link para o responsvel."},primaryAction:{label:"Ir para o incio",variant:"outline",onClick:()=>t("/menu")}})})})]})})}function Gx(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Fc(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function XO(){const t=is(),{token:s,t:n,rid:r}=m.useMemo(()=>{const O=new URLSearchParams(window.location.search);return{token:O.get("token")||"",t:O.get("t")||"",rid:O.get("rid")||O.get("requestId")||""}},[]),o=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),[c,u]=m.useState(null),[h,f]=m.useState(!0),[v,x]=m.useState(null),[g,j]=m.useState(!1),w=m.useMemo(()=>`/menu/dono${Gx(o)}`,[o]),N=m.useMemo(()=>{const O=Array.isArray(c?.quotes)?c.quotes:[],Z=c?.currentQuoteVersion;return Z&&O.find(q=>q.version===Z)||null},[c]),C=async()=>{if(!String(r||"").trim()||!String(n||"").trim())return;const O=await mi({requestId:r,token:s,t:n,view:"owner"});u(O)};m.useEffect(()=>{let O=!0;return!String(r||"").trim()||!String(n||"").trim()?(u(null),f(!1),x({kind:"MISSING_TOKEN",title:"Acesso restrito",description:"Esta pgina  exclusiva do responsvel. Abra a partir do link enviado por e-mail."}),()=>{O=!1}):((async()=>{try{f(!0),x(null);const Z=await mi({requestId:r,token:s,t:n,view:"owner"});if(!O)return;u(Z)}catch(Z){if(!O)return;u(null);const q=fd(Z);x(q),q.kind==="GENERIC"&&ye.error(q.title,{description:q.description})}finally{O&&f(!1)}})(),()=>{O=!1})},[r,s,n]);const S=typeof window<"u"?window.location.origin:"",E=O=>`${S}${O}`,_=c?.links?.client?.token||"",k=_?`/menu/proposta?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(_)}`:`/menu/proposta${Gx(o)}`,T=_?`/menu/acompanhar?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(_)}`:`/menu/acompanhar${Gx(o)}`,M=async O=>{try{await navigator.clipboard.writeText(O),ye.success("Copiado")}catch{ye.error("No foi possvel copiar")}},F=async()=>{try{j(!0),await gC({requestId:r,aud:"client",token:s,t:n}),await C(),ye.success("Link regenerado",{description:"O link anterior foi invalidado e um novo foi gerado."})}catch(O){const Z=O?.response?.data?.message||O?.message||"Falha ao regenerar.";ye.error("No foi possvel regenerar",{description:String(Z)})}finally{j(!1)}};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dono  Enviada"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(w),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:h?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(ra,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:c.id})]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:C,children:[e.jsx(a0,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx(Ys,{className:"my-5"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Proposta atual"}),e.jsx("div",{className:"mt-2 rounded-xl border border-gray-200 bg-white px-4 py-3 text-sm text-gray-700",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Verso: ",e.jsxs("span",{className:"font-semibold",children:["v",N.version]})]}),e.jsxs("div",{className:"mt-1",children:["Enviada em: ",e.jsx("span",{className:"font-semibold",children:Fc(N.createdAt)})]}),e.jsxs("div",{className:"mt-1",children:["ltima abertura (proposta): ",e.jsx("span",{className:"font-semibold",children:Fc(N.openedAt)})]}),e.jsxs("div",{className:"mt-1",children:["Status: ",e.jsx("span",{className:"font-semibold",children:N.status})]})]}):e.jsx("div",{children:"Nenhuma verso enviada ainda."})}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Link do cliente (proposta)"}),e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:F,disabled:g,children:[g?e.jsx(ra,{className:"h-4 w-4 animate-spin"}):e.jsx(Pw,{className:"h-4 w-4"}),"Regenerar"]})]}),c.links?.client&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Fc(c.links.client.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Fc(c.links.client.expiresAt)})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(K,{className:"gap-2",onClick:()=>t(k),children:[e.jsx(Js,{className:"h-4 w-4"}),"Abrir"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>M(E(k)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:E(k)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Acompanhamento (timeline)"}),c.links?.client&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Fc(c.links.client.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Fc(c.links.client.expiresAt)})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(T),children:[e.jsx(Ou,{className:"h-4 w-4"}),"Abrir"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>M(E(T)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:E(T)})]})]}),e.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"* Etapa 6: links assinados com expirao + rastreio (aberto/expira) + regenerao."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v?.title||"No encontramos essa solicitao."}),e.jsx("div",{className:"text-sm text-gray-600",children:v?.description||"Verifique o link e tente novamente."}),e.jsx("div",{className:"pt-2",children:e.jsx(K,{variant:"outline",onClick:()=>t("/menu"),children:"Ir para o incio"})})]})})})]})})}function YO(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function JO(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function e6(){const t=is(),{token:s,t:n,rid:r}=m.useMemo(()=>{const N=new URLSearchParams(window.location.search);return{token:N.get("token")||"",t:N.get("t")||"",rid:N.get("rid")||N.get("requestId")||""}},[]),o=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),[c,u]=m.useState(null),[h,f]=m.useState(!0),[v,x]=m.useState(null),g=m.useMemo(()=>`/menu/dono${YO(o)}`,[o]),j=m.useMemo(()=>{const N=Array.isArray(c?.quotes)?c.quotes:[],C=c?.currentQuoteVersion;return C&&N.find(S=>S.version===C)||null},[c]),w=async()=>{if(!String(r||"").trim()||!String(n||"").trim())return;const N=await mi({requestId:r,token:s,t:n,view:"owner"});u(N)};return m.useEffect(()=>{let N=!0;return!String(r||"").trim()||!String(n||"").trim()?(u(null),f(!1),x({kind:"MISSING_TOKEN",title:"Acesso restrito",description:"Esta pgina  exclusiva do responsvel. Abra a partir do link enviado por e-mail."}),()=>{N=!1}):((async()=>{try{f(!0),x(null);const C=await mi({requestId:r,token:s,t:n,view:"owner"});if(!N)return;u(C)}catch(C){if(!N)return;u(null);const S=fd(C);x(S),S.kind==="GENERIC"&&ye.error(S.title,{description:S.description})}finally{N&&f(!1)}})(),()=>{N=!1})},[r,s,n]),e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dono  Reviso solicitada"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:w,children:[e.jsx(a0,{className:"h-4 w-4"}),"Atualizar"]})]})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:h?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(ra,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-amber-200 bg-amber-50 px-4 py-3",children:[e.jsx(qh,{className:"h-5 w-5 text-amber-700 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"Cliente solicitou reviso"}),e.jsx("div",{className:"mt-1 text-xs text-amber-800",children:"Ajuste a proposta e envie uma nova verso (v2, v3)."})]})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:c.id}),e.jsx("div",{className:"mt-4 text-sm font-semibold text-gray-900",children:"Verso atual"}),e.jsx("div",{className:"mt-2 text-sm text-gray-700",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["v",j.version,"  enviada em ",e.jsx("span",{className:"font-semibold",children:JO(j.createdAt)})]}),e.jsxs("div",{className:"mt-1",children:["Status: ",e.jsx("span",{className:"font-semibold",children:j.status})]}),j.rejectReason&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensagem do cliente"}),e.jsx("div",{className:"mt-1 rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 whitespace-pre-wrap",children:j.rejectReason})]})]}):e.jsx("div",{children:"Nenhuma verso enviada ainda."})}),e.jsx("div",{className:"mt-5",children:e.jsxs(K,{className:"gap-2",onClick:()=>t(g),children:[e.jsx(j4,{className:"h-4 w-4"}),"Ajustar e enviar nova verso"]})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v?.title||"No encontramos essa solicitao."}),e.jsx("div",{className:"text-sm text-gray-600",children:v?.description||"Verifique o link e tente novamente."}),e.jsx("div",{className:"pt-2",children:e.jsx(K,{variant:"outline",onClick:()=>t("/menu"),children:"Ir para o incio"})})]})})})]})})}function Lj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function t6(t){const s=Number(t||0);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}catch{return`R$ ${s.toFixed(2)}`}}function s6(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function n6(){const t=is(),{token:s,t:n,rid:r}=m.useMemo(()=>{const C=new URLSearchParams(window.location.search);return{token:C.get("token")||"",t:C.get("t")||"",rid:C.get("rid")||C.get("requestId")||""}},[]),o=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),[c,u]=m.useState(null),[h,f]=m.useState(!0),[v,x]=m.useState(null),g=m.useMemo(()=>`/menu/dono${Lj(o)}`,[o]),j=m.useMemo(()=>{const C=Array.isArray(c?.quotes)?c.quotes:[],S=c?.currentQuoteVersion;return S&&C.find(E=>E.version===S)||null},[c]),w=c?.links?.client?.token||"",N=m.useMemo(()=>w?`/menu/proposta?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(w)}`:`/menu/proposta${Lj(o)}`,[w,r,o]);return m.useEffect(()=>{let C=!0;return!String(r||"").trim()||!String(n||"").trim()?(u(null),f(!1),x({kind:"MISSING_TOKEN",title:"Acesso restrito",description:"Esta pgina  exclusiva do responsvel. Abra a partir do link enviado por e-mail."}),()=>{C=!1}):((async()=>{try{f(!0),x(null);const S=await mi({requestId:r,token:s,t:n,view:"owner"});if(!C)return;u(S)}catch(S){if(!C)return;u(null);const E=fd(S);x(E),E.kind==="GENERIC"&&ye.error(E.title,{description:E.description})}finally{C&&f(!1)}})(),()=>{C=!1})},[r,s,n]),e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dono  Aprovada (travada)"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(K,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(rn,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:h?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(ra,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-gray-900 bg-gray-900 px-4 py-3 text-white",children:[e.jsx("div",{className:"mt-0.5 h-9 w-9 rounded-2xl bg-white/10 flex items-center justify-center",children:e.jsx(xp,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Proposta aprovada e travada"}),e.jsx("div",{className:"mt-1 text-xs text-gray-200",children:"Este estado representa o fim do ciclo no prottipo."})]})]}),e.jsx(Ys,{className:"my-5"}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:c.id}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Verso final"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:j?`v${j.version}  ${s6(j.createdAt)}`:""})]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>t(N),children:[e.jsx(Js,{className:"h-4 w-4"}),"Ver proposta"]})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:t6(j.totals.total)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(Ui,{className:"h-4 w-4 text-green-600"}),j.status]})]})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v?.title||"No encontramos essa solicitao."}),e.jsx("div",{className:"text-sm text-gray-600",children:v?.description||"Verifique o link e tente novamente."}),e.jsx("div",{className:"pt-2",children:e.jsx(K,{variant:"outline",onClick:()=>t("/menu"),children:"Ir para o incio"})})]})})})]})})}function a6(){const t=is(),[s,n]=m.useState(null);return m.useEffect(()=>{const r=new URLSearchParams(window.location.search),o=new URLSearchParams(window.location.hash.replace(/^#/,"")),c=r.get("access_token")??r.get("token")??o.get("access_token")??o.get("token"),u=r.get("refresh_token")??o.get("refresh_token"),h=r.get("error")??o.get("error");if(h){n(decodeURIComponent(h));return}if(!c){n("Token de acesso no encontrado na resposta do servidor.");return}localStorage.setItem("access_token",c),u&&localStorage.setItem("refresh_token",u),window.history.replaceState(null,"","/oauth-callback"),t("/app")},[]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-sm w-full bg-white rounded-2xl border border-gray-200 shadow-sm p-8 text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mx-auto",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Falha na autenticao"}),e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full py-2.5 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Voltar para o login"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Autenticando, aguarde"})]})})}const r6=[{id:"dashboard",label:"Dashboard",icon:Cw},{id:"inventory",label:"Inventrio",icon:ia},{id:"mediamap",label:"Mdia Map",icon:_w},{id:"clients",label:"Clientes",icon:i0},{id:"products",label:"Produtos/Servios",icon:Hc},{id:"proposals",label:"Propostas",icon:Js},{id:"campaigns",label:"Campanhas",icon:Aw},{id:"reservations",label:"Reservas",icon:wu},{id:"financial",label:"Financeiro",icon:Fu},{id:"messages",label:"Mensagens",icon:p4},{id:"mediakit",label:"Mdia Kit",icon:jw},{id:"promotions",label:"Promoes",icon:Tw},{id:"activities",label:"Atividades",icon:t0},{id:"settings",label:"Configuraes",icon:vp}];function Fj({currentPage:t,onNavigate:s,isSuperAdmin:n,isMobile:r=!1}){const{company:o,subscription:c,pointsLimit:u,daysRemainingInTrial:h}=Ho();return e.jsxs("div",{className:"w-64 md:w-64 bg-white border-r border-gray-200 flex flex-col h-full overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h1",{className:"text-indigo-600",children:"OneMedia"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gesto de Mdia Exterior"})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[r6.map(f=>{const v=f.icon,x=t===f.id;return e.jsxs("button",{onClick:()=>s(f.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${x?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(v,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:f.label})]},f.id)}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-t border-gray-200"}),e.jsxs("button",{onClick:()=>s("superadmin"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${t==="superadmin"?"bg-red-50 text-red-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Su,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Super Admin"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-indigo-900 text-sm",children:"Plano Atual"}),e.jsxs("p",{className:"text-indigo-600 mt-1",children:["At ",u," pontos"]}),h!==null&&e.jsxs("p",{className:"text-gray-600 text-xs mt-2",children:[h," dias de teste restantes"]}),c&&e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:$T(c.maxOwnersPerMediaPoint)})]})})]})}function $j(t){if(!t)return"Erro inesperado";if(typeof t=="string")return t;if(t instanceof Error)return t.message||"Erro inesperado";const s=t;if(typeof s?.message=="string"&&s.message.trim())return s.message.trim();try{return JSON.stringify(t)}catch{return"Erro inesperado"}}function ta(t){const{enabled:s,mode:n,deps:r,fetcher:o,computeMock:c,mockDelayMs:u=220,fallbackToMock:h=!0}=t,[f,v]=m.useState(0),[x,g]=m.useState({status:s?"loading":"idle",data:void 0,errorMessage:void 0,source:n==="backend"?"backend":"mock"}),j=m.useMemo(()=>n==="backend"?"backend":"mock",[n]);return m.useEffect(()=>{if(!s){g({status:"idle",data:void 0,errorMessage:void 0,source:j});return}g(S=>({...S,status:"loading",errorMessage:void 0,source:j}));const w=new AbortController;let N;return(async()=>{try{if(n==="backend"){if(!o)throw new Error("Fetcher no configurado para modo backend");const E=await o(w.signal);if(w.signal.aborted)return;g({status:"ready",data:E,errorMessage:void 0,source:"backend"});return}if(await new Promise(E=>{N=window.setTimeout(()=>E(),u)}),w.signal.aborted)return;const S=c();if(w.signal.aborted)return;g({status:"ready",data:S,errorMessage:void 0,source:"mock"})}catch(S){if(w.signal.aborted)return;if(n==="backend"&&h)try{const _=c();g({status:"ready",data:_,errorMessage:void 0,source:"mock-fallback"});return}catch(_){const k=$j(_);g({status:"error",data:void 0,errorMessage:k,source:"backend"});return}const E=$j(S);g({status:"error",data:void 0,errorMessage:E,source:j})}})(),()=>{w.abort(),N&&window.clearTimeout(N)}},[s,n,f,j,...r]),{...x,refetch:()=>v(w=>w+1)}}const i6=import.meta?.env?.VITE_API_BASE_URL??"";function o6(t,s){const n=(t||"").replace(/\/$/,""),r=(s||"").startsWith("/")?s:`/${s}`;return`${n}${r}`}async function l6(t){try{return await t.text()}catch{return""}}function c6(t,s){let n=`Erro HTTP ${t}`,r;const o=(s||"").trim();if(o)try{const c=JSON.parse(o);r=c,typeof c?.message=="string"&&c.message.trim()?n=c.message.trim():typeof c?.error=="string"&&c.error.trim()&&(n=c.error.trim())}catch{n=o.length>200?`${o.slice(0,200)}...`:o}return{status:t,message:n,details:r}}async function sa(t,s,n){const r=o6(i6,t)+(s?`?${s}`:""),o=await fetch(r,{method:"GET",credentials:"include",headers:{Accept:"application/json",...n?.headers||{}},signal:n?.signal});if(!o.ok){const c=await l6(o);throw c6(o.status,c)}if(o.status!==204)return await o.json()}const Zx=import.meta?.env?.VITE_DASHBOARD_DATA_MODE==="backend"?"backend":"mock",Oh=20,es={overview:"/api/dashboard/overview",funnel:"/api/dashboard/funnel",alerts:"/api/dashboard/alerts",drilldown:"/api/dashboard/drilldown",commercialSummary:"/api/dashboard/commercial/summary",stalledProposals:"/api/dashboard/proposals/stalled",sellerRanking:"/api/dashboard/commercial/sellers/ranking",revenueTimeseries:"/api/dashboard/revenue/timeseries",cashflowTimeseries:"/api/dashboard/cashflow/timeseries",topClients:"/api/dashboard/top/clients",receivablesAgingSummary:"/api/dashboard/receivables/aging/summary",oohOpsSummary:"/api/dashboard/ooh/ops/summary",doohProofOfPlaySummary:"/api/dashboard/dooh/proof-of-play/summary",inventoryMap:"/api/dashboard/inventory/map",inventoryRanking:"/api/dashboard/inventory/ranking"};function cs(t){return((t??0)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Cn(t){let s=2166136261;for(let n=0;n<t.length;n++)s^=t.charCodeAt(n),s=Math.imul(s,16777619);return Math.abs(s)}function Fi(t,s,n){return Math.max(s,Math.min(n,t))}function Kx(t,s=10){const n=[];let r=t%40+20;for(let o=0;o<s;o++){const c=(t+o*97)%11-5;r=Fi(r+c,5,95),n.push(r)}return n}function lr(t){return(t||"").trim().toLowerCase()}function Jr(t,s){const n=lr(t),r=lr(s);return r?n.includes(r):!0}function d6(t){const s=new Set,n=[];for(const r of t)s.has(r.id)||(s.add(r.id),n.push(r));return n}function wn(t,s){return s==="id"?t.id:s==="title"?t.title:s==="subtitle"?t.subtitle:s==="status"?t.status:s==="amountCents"?t.amountCents:t.fields?t.fields[s]:void 0}function gn(t,s){if(t==null)return"";if(s==="currency")return cs(Number(t)||0);if(s==="percent")return`${Math.round(Number(t)||0)}%`;if(s==="datetime"){const n=Date.parse(String(t));return Number.isFinite(n)?new Date(n).toLocaleString("pt-BR"):String(t)}if(s==="date"){const n=Date.parse(String(t));return Number.isFinite(n)?new Date(n).toLocaleDateString("pt-BR"):String(t)}return String(t)}function Yr(t){try{return new Date(t).toLocaleDateString("pt-BR")}catch{return t}}function zj(t){const s=t.map(c=>(c?.valueCents??0)/100),n=Math.max(...s,1),r=Math.min(...s,0),o=Math.max(1,n-r);return s.map(c=>{const u=(c-r)/o*90+5;return Math.round(Fi(u,5,95))})}function u6(t){const s=[],n=[];return t.query&&(s.push(`busca "${t.query}"`),n.push("Limpe o campo de busca.")),t.city&&(s.push(`cidade/regio "${t.city}"`),n.push("Remova o filtro de cidade/regio.")),t.mediaType&&t.mediaType!=="ALL"&&(s.push(`tipo ${t.mediaType}`),n.push("Tente alternar para OOH + DOOH.")),s.length?{hint:`Com os filtros atuais (${s.join(", ")}), no encontramos resultados.`,suggestions:n}:{hint:void 0,suggestions:void 0}}function m6(t,s){const n=(s||"").trim(),r=u6(t),o=[];return n&&o.push(n.replace(/\.*$/,"")),r.hint&&o.push(r.hint),r.suggestions&&r.suggestions.length&&o.push(`Sugestes: ${r.suggestions.join(" ")}`),o.filter(Boolean).join(" ")}function Mr(t){const s=String(t??"");return/([\n\r";,])/.test(s)?`"${s.replace(/"/g,'""')}"`:s}function qp(t,s,n="text/plain;charset=utf-8"){const r=new Blob([s],{type:n}),o=URL.createObjectURL(r),c=document.createElement("a");c.href=o,c.download=t,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(o)}function wl(t,s,n){const r=(n||[{id:"id",label:"id",get:f=>f.id},{id:"title",label:"item",get:f=>f.title},{id:"subtitle",label:"cidade",get:f=>f.subtitle},{id:"status",label:"status",get:f=>f.status},{id:"amountCents",label:"valor",get:f=>f.amountCents}]).filter(f=>f.csv!==!1),c=[r.map(f=>f.label).map(Mr).join(";")];for(const f of s){const v=r.map(x=>{const g=x.get(f);return x.id==="amountCents"?gn(g,"currency"):x.id.toLowerCase().includes("percent")?gn(g,"percent"):x.id==="lastSeen"?gn(g,"datetime"):x.id==="dueDate"?gn(g,"date"):gn(g)});c.push(v.map(Mr).join(";"))}const h=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"drilldown"}.csv`;qp(h,c.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado",{description:h})}function h6(t,s,n){const o=[["bucket","amount","total"].join(";")];for(const h of s)o.push([Mr(h.label),Mr(cs(h.amountCents)),Mr(typeof n=="number"?cs(n):"")].join(";"));const u=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"dashboard"}_aging.csv`;qp(u,o.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado (mock)",{description:u})}function Bj(t,s){const r=[["date","value"].join(";")];for(const u of s)r.push([Mr(u.date),Mr(cs(u.valueCents))].join(";"));const c=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"dashboard"}.csv`;qp(c,r.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado",{description:c})}function gh(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function p6(){return Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(s=>{if(s.tagName.toLowerCase()==="style")return`<style>${s.textContent||""}</style>`;const r=s.href;return r?`<link rel="stylesheet" href="${r}">`:""}).join(`
`)}function f6(){return`
    @page { size: A4; margin: 12mm; }
    html, body { background: white !important; }
    [data-no-print], .no-print, .backend-hint { display: none !important; }
    .print-avoid-break { break-inside: avoid; page-break-inside: avoid; }
    .print-header { display:flex; justify-content:space-between; align-items:flex-start; gap:16px; }
    .print-title { font-size: 16px; font-weight: 700; margin: 0; }
    .print-subtitle { font-size: 12px; color: #6b7280; margin: 4px 0 0 0; }
    .print-meta { margin-top: 10px; display:flex; flex-wrap:wrap; gap:8px; }
    .print-pill { font-size: 11px; color:#374151; background:#f3f4f6; padding:6px 10px; border-radius: 9999px; }
    .print-pill span { color:#6b7280; }
    .print-separator { height: 1px; background:#e5e7eb; margin: 12px 0; }
  `}function x6(t,s){const n=window.open("","_blank","noopener,noreferrer");return n?(n.document.open(),n.document.write(t),n.document.close(),n.document.title=s,n):(ye.error("No foi possvel abrir a janela de impresso. Verifique o bloqueador de pop-ups."),null)}function g6({title:t,subtitle:s,meta:n,contentHtml:r}){const o=p6(),c=f6(),u=(n||[]).filter(v=>v.value).map(v=>`<div class="print-pill"><span>${gh(v.label)}:</span> ${gh(v.value)}</div>`).join(""),h=`
    <!doctype html>
    <html>
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        ${o}
        <style>${c}</style>
      </head>
      <body>
        <div>
          <div class="print-header">
            <div>
              <h1 class="print-title">${gh(t)}</h1>
              ${s?`<p class="print-subtitle">${gh(s)}</p>`:""}
            </div>
          </div>
          ${u?`<div class="print-meta">${u}</div>`:""}
          <div class="print-separator"></div>
          ${r}
        </div>
        <script>
          window.addEventListener('load', () => {
            setTimeout(() => window.print(), 50);
          });
        <\/script>
      </body>
    </html>
  `;x6(h,t)&&ye.success("Abrindo impresso (PDF)...")}function Uj({element:t,title:s,subtitle:n,meta:r}){const o=`<div>${t.outerHTML}</div>`;g6({title:s,subtitle:n,meta:r,contentHtml:o})}function Qx(t){const s={id:"amountCents",label:"Valor",align:"right",sortable:!0,sortKey:"amountCents",get:r=>r.amountCents,render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"currency")})},n={defaultSort:{by:"amountCents",dir:"desc"},columns:[{id:"id",label:"ID",sortable:!0,sortKey:"id",get:r=>r.id},{id:"title",label:"Item",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"status",label:"Status",sortable:!0,sortKey:"status",get:r=>r.status},s]};if(!t)return n;switch(t){case"topClients":return{defaultSort:{by:"amountCents",dir:"desc"},rowAction:{label:"Abrir Comercial",page:"proposals"},columns:[{id:"title",label:"Cliente",sortable:!0,sortKey:"title",get:r=>r.title},{id:"campaignsCount",label:"Campanhas",align:"right",sortable:!0,sortKey:"campaignsCount",get:r=>wn(r,"campaignsCount"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},s]};case"inventoryRanking":return{defaultSort:{by:"occupancyPercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ponto",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"occupancyPercent",label:"Ocupao",align:"right",sortable:!0,sortKey:"occupancyPercent",get:r=>wn(r,"occupancyPercent"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"percent")})},{id:"activeCampaigns",label:"Campanhas",align:"right",sortable:!0,sortKey:"activeCampaigns",get:r=>wn(r,"activeCampaigns"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},{id:"revenueCents",label:"Receita",align:"right",sortable:!0,sortKey:"revenueCents",get:r=>wn(r,"revenueCents")??r.amountCents,render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"currency")})}]};case"inventoryPin":return{defaultSort:{by:"endsAt",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ativo",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Campanha",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"region",label:"Regio",sortable:!0,sortKey:"region",get:r=>wn(r,"region")},{id:"line",label:"Linha",sortable:!0,sortKey:"line",get:r=>wn(r,"line")},{id:"startsAt",label:"Incio",sortable:!0,sortKey:"startsAt",get:r=>wn(r,"startsAt"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"date")})},{id:"endsAt",label:"Fim",sortable:!0,sortKey:"endsAt",get:r=>wn(r,"endsAt"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"date")})},{id:"status",label:"Status",sortable:!0,sortKey:"status",get:r=>r.status},s]};case"inventoryRegionLine":return{defaultSort:{by:"occupancyPercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ponto",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"region",label:"Regio",sortable:!0,sortKey:"region",get:r=>wn(r,"region")},{id:"line",label:"Linha",sortable:!0,sortKey:"line",get:r=>wn(r,"line")},{id:"occupancyPercent",label:"Ocupao",align:"right",sortable:!0,sortKey:"occupancyPercent",get:r=>wn(r,"occupancyPercent"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"percent")})},{id:"activeCampaigns",label:"Campanhas",align:"right",sortable:!0,sortKey:"activeCampaigns",get:r=>wn(r,"activeCampaigns"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},{id:"revenueCents",label:"Receita",align:"right",sortable:!0,sortKey:"revenueCents",get:r=>wn(r,"revenueCents")??r.amountCents,render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"currency")})}]};case"receivablesOverdue":return{defaultSort:{by:"dueDate",dir:"asc"},rowAction:{label:"Abrir Financeiro",page:"financial"},columns:[{id:"title",label:"Fatura",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cliente",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"dueDate",label:"Vencimento",sortable:!0,sortKey:"dueDate",get:r=>wn(r,"dueDate"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"date")})},s]};case"proofOfPlay":return{defaultSort:{by:"uptimePercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Tela",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"uptimePercent",label:"Uptime",align:"right",sortable:!0,sortKey:"uptimePercent",get:r=>wn(r,"uptimePercent"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"percent")})},{id:"plays",label:"Plays",align:"right",sortable:!0,sortKey:"plays",get:r=>wn(r,"plays"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},{id:"lastSeen",label:"ltima",sortable:!0,sortKey:"lastSeen",get:r=>wn(r,"lastSeen"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"datetime")})}]};case"aging":return{defaultSort:{by:"amountCents",dir:"desc"},rowAction:{label:"Abrir Financeiro",page:"financial"},columns:[{id:"title",label:"Faixa",sortable:!0,sortKey:"title",get:r=>r.title},s]};default:return n}}const kn={fetchOverviewKpis:(t,s)=>{const n=Cn(`${t}:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=120+n%90,o=18+n%22,c=28+n%42,u=6+n%12,h=(25e5+n%8e6)*1,f=14+n%30,v=Math.floor(h/Math.max(1,u)),x=18e5+n%7e6,g=6e5+n%35e5,j=8e4+n%9e5,w=46+n%42;return{inventoryTotalPoints:r,proposalsTotal:o,approvalRatePercent:c,campaignsActiveCount:u,campaignsActiveAmountCents:h,clientsActiveCount:f,averageTicketCents:v,revenueRecognizedCents:x,revenueToInvoiceCents:g,receivablesOverdueCents:j,occupancyPercent:w,trends:{revenue:{deltaPercent:n%19-7,points:Kx(n+11)},occupancy:{deltaPercent:n%13-4,points:Kx(n+29)},proposals:{deltaPercent:n%21-8,points:Kx(n+53)}}}},fetchCommercialFunnel:(t,s)=>{const n=Cn(`${t}:funnel:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=[{key:"lead",label:"Leads",count:22+n%20,amountCents:0},{key:"prospect",label:"Prospects",count:14+n%16,amountCents:0},{key:"sent",label:"Propostas Enviadas",count:9+n%10,amountCents:9e5+n%22e5},{key:"approved",label:"Aprovadas",count:4+n%6,amountCents:7e5+n%18e5},{key:"active",label:"Em Veiculao",count:3+n%5,amountCents:65e4+n%15e5}],o=Array.from({length:6}).map((h,f)=>{const v=`PROP-${n%9e3+1e3+f}`;return{id:v,title:`Proposta ${v}`,client:["Alpha","Beta","Gamma","Delta","Epsilon","Zeta"][f%6],daysWithoutUpdate:6+(n+f*17)%23,amountCents:12e4+(n+f*777)%9e5}}),c=lr(s.query),u=c?o.filter(h=>Jr(`${h.id} ${h.title} ${h.client}`,c)):o;return{stages:r,averageDaysToClose:9+n%17,stalledProposals:u}},fetchCommercialSummary:(t,s)=>{const n=Cn(`${t}:commercialSummary:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=kn.fetchCommercialFunnel(t,s),o=18+n%28,c=25+n%55,u=r.averageDaysToClose,h=r.stages.reduce((v,x)=>v+(x.amountCents||0),0),f=r.stalledProposals.length;return{proposalsTotal:o,approvalRatePercent:c,averageDaysToClose:u,activePipelineAmountCents:h,stalledProposalsCount:f}},fetchStalledProposals:(t,s)=>({rows:kn.fetchCommercialFunnel(t,s).stalledProposals}),fetchSellerRanking:(t,s)=>{const n=Cn(`${t}:sellerRanking:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=["Ana","Bruno","Carla","Diego","Eduarda","Felipe","Giovana","Henrique"],c=Array.from({length:8}).map((f,v)=>{const x=`USR-${n%7e3+2e3+v}`,g=1+(n+v*11)%12,j=1+(n+v*19)%16,w=38e4+(n+v*997)%42e5,N=22e4+(n+v*733)%36e5;return{id:x,name:o[v%o.length],city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][v%5],dealsWon:g,dealsInPipeline:j,amountWonCents:w,amountPipelineCents:N}}),u=lr(s.query),h=u?c.filter(f=>Jr(`${f.id} ${f.name} ${f.city||""}`,u)):c;return h.sort((f,v)=>(v.amountWonCents??0)-(f.amountWonCents??0)),{rows:h}},fetchAlerts:(t,s)=>{const n=Cn(`${t}:alerts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=u=>u[n%u.length],o=[{id:`AL-${n%1e3}`,severity:"HIGH",title:"Faturas vencendo em 7 dias",description:`Voc tem ${3+n%8} cobranas perto do vencimento.`,ctaLabel:"Ver financeiro",ctaPage:"financial"},{id:`AL-${(n+1)%1e3}`,severity:"MEDIUM",title:"Campanhas aguardando material",description:`Existem ${2+n%4} campanhas paradas aguardando envio de material.`,ctaLabel:"Ver campanhas",ctaPage:"campaigns"},{id:`AL-${(n+2)%1e3}`,severity:r(["LOW","MEDIUM"]),title:"Ocupao abaixo do esperado em uma regio",description:"Identificamos pontos com baixa ocupao no perodo selecionado.",ctaLabel:"Ver inventrio",ctaPage:"inventory"}],c=lr(s.query);return c?o.filter(u=>Jr(`${u.title} ${u.description}`,c)):o},fetchDrilldown:(t,s,n,r)=>{const o=r?.params?Object.entries(r.params).sort(([k],[T])=>k.localeCompare(T)).map(([k,T])=>`${k}=${T}`).join("&"):"",c=Cn(`${t}:drill:${s}:${n.datePreset}:${n.query}:${n.city}:${n.mediaType}:${o}`),u=55+c%25,h=lr(n.query),f=Array.from({length:u}).map((k,T)=>{const M=["Braslia","Goinia","So Paulo","Recife","Curitiba"][T%5],F={id:`${s}-${c%9e3+1e3+T}`,title:`${s.toUpperCase()}  Item ${c%90+T+1}`,subtitle:M,amountCents:8e4+(c+T*1234)%14e5,status:["ATIVA","AGUARDANDO","VENCIDA","APROVADA"][T%4],fields:{}};if(s==="topClients"&&(F.title=`Cliente ${c%70+T+1}`,F.status=void 0,F.fields={campaignsCount:1+(c+T)%8,averageTicketCents:Math.floor((F.amountCents||0)/Math.max(1,1+(c+T)%8))}),s==="inventoryRanking"||s==="occupancy"){const O=Fi(35+(c+T*7)%60,0,100);F.title=`Ponto ${String.fromCharCode(65+T%26)}-${c%90+T+1}`,F.status=void 0,F.fields={occupancyPercent:O,activeCampaigns:(c+T)%6,revenueCents:F.amountCents}}if(s==="inventoryPin"){const O=r?.params?.pinId||"PIN",Z=new Date;Z.setDate(Z.getDate()-(T%20+1));const q=new Date(Z);q.setDate(q.getDate()+(T%40+7)),F.title=`Ativo ${c%120+T+1}`,F.subtitle=`Campanha ${c%60+T%20+1}  ${O}`,F.status=["ATIVA","PAUSADA","AGENDADA"][T%3],F.fields={region:r?.params?.region,line:r?.params?.line,startsAt:Z.toISOString(),endsAt:q.toISOString()}}if(s==="inventoryRegionLine"){const O=Fi(35+(c+T*7)%60,0,100);F.title=`Ponto ${String.fromCharCode(65+T%26)}-${c%90+T+1}`,F.status=void 0,F.subtitle=r?.params?.region||F.subtitle,F.fields={region:r?.params?.region,line:r?.params?.line,occupancyPercent:O,activeCampaigns:(c+T)%6,revenueCents:F.amountCents}}if(s==="oohOps"){const O=new Date;O.setDate(O.getDate()+(T%12-3)),F.title=`Pendncia OOH ${c%40+T+1}`,F.status=["OK","PENDING","LATE"][T%3],F.amountCents=void 0,F.fields={dueDate:O.toISOString()}}if(s==="proofOfPlay"){const O=new Date;O.setMinutes(O.getMinutes()-(T%180+5)),F.title=`Tela ${c%300+T+1}`,F.status=void 0,F.amountCents=void 0,F.fields={uptimePercent:Fi(72+(c+T*9)%28,0,100),plays:1e3+(c+T*17)%9e3,lastSeen:O.toISOString()}}if(s==="aging"){const O=["0-7","8-15","16-30","31-60","61+"],Z=O[T%O.length];F.id=`aging-${Z}-${T}`,F.title=Z,F.subtitle=void 0,F.status=void 0,F.amountCents=2e4+(c+T*999)%28e5,F.fields={}}return F}),v=h?f.filter(k=>Jr(`${k.id} ${k.title} ${k.subtitle||""} ${k.status||""}`,h)):f,x=r?.sortBy,g=r?.sortDir||"desc",j=x?[...v].sort((k,T)=>{const M=wn(k,x),F=wn(T,x),O=typeof M=="number"?M:Number.NaN,Z=typeof F=="number"?F:Number.NaN;let q=0;if(Number.isFinite(O)&&Number.isFinite(Z))q=O-Z;else{const $=M==null?"":String(M),X=F==null?"":String(F),I=Date.parse($),B=Date.parse(X);Number.isFinite(I)&&Number.isFinite(B)?q=I-B:q=$.localeCompare(X,"pt-BR")}return g==="asc"?q:-q}):v,w=Math.max(1,Math.min(r?.limit??Oh,100));let N=0;if(r?.cursor){const k=Number.parseInt(String(r.cursor),10);N=Number.isFinite(k)&&k>0?k:0}const C=j.slice(N,N+w),S=N+w,E=S<j.length,_=E?String(S):void 0;return{rows:C,paging:{hasMore:E,nextCursor:_}}},fetchRevenueTimeseries:(t,s)=>{const n=Cn(`${t}:revts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=new Date,o=s.datePreset==="7d"?7:s.datePreset==="30d"?14:18;return{points:Array.from({length:o}).map((u,h)=>{const f=new Date(r);f.setDate(f.getDate()-(o-1-h));const v=35e4+n%9e5,x=(n+h*131)%17-8,g=v+x*42e3+h%3*15e3;return{date:f.toISOString(),valueCents:g}})}},fetchCashflowTimeseries:(t,s)=>{const n=Cn(`${t}:cashts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=new Date,o=s.datePreset==="7d"?7:s.datePreset==="30d"?14:18;return{points:Array.from({length:o}).map((u,h)=>{const f=new Date(r);f.setDate(f.getDate()-(o-1-h));const v=18e4+n%65e4,x=(n+h*97)%21-10,g=v+x*38e3+(h%4-1)*12e3;return{date:f.toISOString(),valueCents:g}})}},fetchInventoryMap:(t,s)=>{const n=Cn(`${t}:invmap:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=Array.from({length:18}).map((h,f)=>{const v=`MP-${n%9e3+1e3+f}`,x=Fi(35+(n+f*13)%60,0,100);return{id:v,label:`Ponto ${String.fromCharCode(65+f%26)}-${n%90+f+1}`,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],occupancyPercent:x,region:["Centro","Norte","Sul","Leste","Oeste"][f%5],line:["Linha A","Linha B","Linha C"][f%3],lat:-15.7+(n+f*3)%100/1e3,lng:-47.9+(n+f*7)%100/1e3}}),c=lr(s.query);return{pins:c?o.filter(h=>Jr(`${h.id} ${h.label} ${h.city||""}`,c)):o}},fetchInventoryRanking:(t,s)=>{const n=Cn(`${t}:invrank:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=Array.from({length:12}).map((h,f)=>{const v=`UNIT-${n%8e3+2e3+f}`,x=Fi(40+(n+f*17)%55,0,100),g=14e4+(n+f*999)%12e5,j=1+(n+f*29)%6;return{id:v,label:["Painel","Empena","Relgio","Totem","Outdoor"][f%5]+` ${String.fromCharCode(65+f%26)}`,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],occupancyPercent:x,activeCampaigns:j,revenueCents:g}}),c=lr(s.query),u=c?o.filter(h=>Jr(`${h.id} ${h.label} ${h.city||""}`,c)):o;return u.sort((h,f)=>(f.occupancyPercent??0)-(h.occupancyPercent??0)),{rows:u}},fetchTopClients:(t,s)=>{const n=Cn(`${t}:topclients:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Omega","Sigma","Kappa","Lambda"],c=Array.from({length:10}).map((f,v)=>{const x=`CL-${n%6e3+3e3+v}`,g=35e4+(n+v*997)%38e5,j=1+(n+v*37)%6,w=Math.floor(g/Math.max(1,j));return{id:x,name:o[v%o.length]+(v<5?"":` ${String.fromCharCode(65+v%26)}`),city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][v%5],amountCents:g,campaignsCount:j,averageTicketCents:w}}),u=lr(s.query),h=u?c.filter(f=>Jr(`${f.id} ${f.name} ${f.city||""}`,u)):c;return h.sort((f,v)=>(v.amountCents??0)-(f.amountCents??0)),{rows:h}},fetchReceivablesAgingSummary:(t,s)=>{const n=Cn(`${t}:aging:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=9e5+n%55e5,o=[.22,.18,.27,.33],u=["0-7 dias","8-15 dias","16-30 dias","31+ dias"].map((h,f)=>{const v=(n+f*31)%11-5,x=Fi(o[f]+v*.005,.08,.6),g=Math.round(r*x);return{label:h,amountCents:g}});return{totalCents:r,buckets:u}},fetchOohOpsSummary:(t,s)=>{const n=Cn(`${t}:oohops:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=["OK","PENDING","LATE"],c=["Aguardando material","Agendar instalao","Revisar arte","Pendncia de foto","Recolher prova","Confirmar local"],u=Array.from({length:10}).map((x,g)=>{const j=`OPS-${n%7e3+1e3+g}`,w=new Date;w.setDate(w.getDate()+(n+g*7)%12-4);const N=o[(n+g*13)%o.length];return{id:j,title:c[g%c.length],status:N,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][g%5],dueDate:w.toISOString()}}),h=lr(s.query),f=h?u.filter(x=>Jr(`${x.id} ${x.title} ${x.city||""} ${x.status}`,h)):u,v=x=>x==="LATE"?2:x==="PENDING"?1:0;return f.sort((x,g)=>v(g.status)-v(x.status)),{items:f}},fetchDoohProofOfPlaySummary:(t,s)=>{const n=Cn(`${t}:pop:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=Array.from({length:10}).map((h,f)=>{const v=`SCR-${n%9e3+1e3+f}`,x=Fi(88+(n+f*9)%15,0,100),g=1200+(n+f*77)%6200,j=new Date;return j.setMinutes(j.getMinutes()-(n+f*23)%600),{id:v,screen:`Tela ${String.fromCharCode(65+f%26)}-${n%90+f+1}`,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],uptimePercent:x,plays:g,lastSeen:j.toISOString()}}),c=lr(s.query),u=c?o.filter(h=>Jr(`${h.id} ${h.screen} ${h.city||""}`,c)):o;return u.sort((h,f)=>(f.uptimePercent??0)-(h.uptimePercent??0)),{rows:u}},getPublicMapUrl:t=>{const s=Cn(t);return`https://onemedia.app/public/map/${t}?t=${s%1e5}`}};function v6(t){const s=new Date,n=new Date(s);return t==="7d"?n.setDate(n.getDate()-7):t==="30d"?n.setDate(n.getDate()-30):t==="90d"?n.setDate(n.getDate()-90):t==="ytd"&&(n.setMonth(0,1),n.setHours(0,0,0,0)),{dateFrom:n.toISOString(),dateTo:s.toISOString()}}function vC(t){const{dateFrom:s,dateTo:n}=v6(t.datePreset);return{dateFrom:s,dateTo:n,q:t.query?.trim()?t.query.trim():void 0,city:t.city?.trim()?t.city.trim():void 0,mediaType:t.mediaType==="ALL"?void 0:t.mediaType}}function Lh(t,s){const n=new URLSearchParams,r={dateFrom:t.dateFrom,dateTo:t.dateTo,q:t.q,city:t.city,mediaType:t.mediaType,...s||{}};for(const[o,c]of Object.entries(r)){if(c==null)continue;const u=String(c).trim();u&&n.set(o,u)}return n.toString()}function X0(t){return typeof t=="string"?t:""}function Fh(t){return Array.isArray(t)?t.map(X0).filter(Boolean):typeof t=="string"?[t]:[]}function Xx(t,s){const n=t.map(r=>r.toLowerCase());return s.some(r=>n.includes(r.toLowerCase()))}function y6(t){const s=X0(t?.role||t?.type||t?.profile),n=Fh(t?.roles),r=Fh(t?.permissions||t?.perms),o=Fh(t?.scopes),c=[s,...n,...r,...o].filter(Boolean);return{role:s,roles:n,perms:r,scopes:o,all:c}}function b6(t){const s=Fh(t?.modules||t?.features||t?.enabledModules),n=X0(t?.plan||t?.tier),r=[...s,n].filter(Boolean);return{modules:s,plan:n,all:r}}function j6(t,s){const n=y6(t),r=b6(s),o=["finance","financial","billing","invoices","payments","contas","faturamento","financeiro","DASHBOARD_FINANCE","dashboard:finance","finance:read","billing:read"],c=Xx(n.all,o)||Xx(r.all,o),u=["readonly","read_only","DASHBOARD_VIEWS_READONLY","dashboard:views:readonly"],h=!Xx(n.all,u);return{allowedTabs:["executivo","comercial","operacoes",...c?["financeiro"]:[],"inventario"],canViewFinance:c,canManageSavedViews:h}}function yC(t,s){return`oneMedia.dashboard.savedViews.v1:${t}:${s}`}function N6(){const t=typeof crypto<"u"?crypto:void 0;return t&&typeof t.randomUUID=="function"?t.randomUUID():`view_${Date.now()}_${Math.random().toString(16).slice(2)}`}function Yx(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function w6(t){if(!Yx(t))return null;const s=typeof t.id=="string"?t.id:void 0,n=typeof t.name=="string"?t.name:void 0,r=typeof t.tab=="string"?t.tab:void 0,o=Yx(t.filters)?t.filters:void 0,c=Yx(t.layout)?t.layout:{version:1},u=typeof t.createdAt=="string"?t.createdAt:new Date().toISOString(),h=typeof t.updatedAt=="string"?t.updatedAt:u;return!s||!n||!r||!o?null:{id:s,name:n,tab:r,filters:o,layout:c,createdAt:u,updatedAt:h}}function Y0(t,s){if(typeof window>"u")return[];try{const n=window.localStorage.getItem(yC(t,s));if(!n)return[];const r=JSON.parse(n);if(!Array.isArray(r))return[];const o=r.map(w6).filter(c=>c!==null);return o.sort((c,u)=>c.updatedAt<u.updatedAt?1:-1),o}catch{return[]}}function bC(t,s,n){if(!(typeof window>"u"))try{window.localStorage.setItem(yC(t,s),JSON.stringify(n))}catch{}}function C6(t,s,n){const r=Y0(t,s),o=r.findIndex(u=>u.id===n.id),c=[...r];return o>=0?c[o]=n:c.unshift(n),c.sort((u,h)=>u.updatedAt<h.updatedAt?1:-1),bC(t,s,c),c}function S6(t,s,n){const o=Y0(t,s).filter(c=>c.id!==n);return bC(t,s,o),o}const _6=50,Mo=new Map;function A6(t,s){for(Mo.has(t)&&Mo.delete(t),Mo.set(t,s);Mo.size>_6;){const n=Mo.keys().next().value;if(!n)break;Mo.delete(n)}}function ga(t,s){const[n,r]=m.useState(()=>Mo.get(t)?.value);return m.useEffect(()=>{const o=Mo.get(t);r(o?.value)},[t]),m.useEffect(()=>{if(s?.status!=="ready"||s.data===void 0||s.data===null)return;const o={value:s.data,ts:Date.now()};A6(t,o),r(s.data)},[t,s?.status,s?.data]),s?.data??n}function P6(){try{const s=new URL(window.location.href).searchParams.get("dashboardMetrics");return s==="1"||s==="true"?!0:window.localStorage.getItem("dashboard.metrics")==="1"}catch{return!1}}function na(t,s,n){const r=m.useMemo(()=>typeof window<"u"?P6():!1,[]),o=m.useRef(null),c=m.useRef(""),u=`${n.companyId||""}|${n.tab||""}|${n.backendQs||""}`;m.useEffect(()=>{if(r){if(s.status==="loading"){o.current=performance.now();return}if((s.status==="ready"||s.status==="error")&&o.current!=null){const h=Math.max(0,Math.round(performance.now()-o.current)),f=`${t}|${u}|${s.status}|${s.source||""}|${h}`;if(f===c.current){o.current=null;return}c.current=f;const v={widgetKey:t,status:s.status,ms:h,source:s.source,companyId:n.companyId,tab:n.tab,backendQs:n.backendQs,error:s.status==="error"?s.errorMessage||"unknown":void 0};h>=1500?console.warn("[dashboard][widget]",v):console.info("[dashboard][widget]",v),o.current=null}}},[r,t,u,s.status,s.source,s.errorMessage,n.companyId,n.tab,n.backendQs])}let Vj=!1;function E6(){try{const s=new URL(window.location.href).searchParams.get("dashboardQa");return s==="1"||s==="true"?!0:window.localStorage.getItem("dashboard.qa")==="1"}catch{return!1}}function Cl(t,s){if(!t)throw new Error(s)}function k6(){if(!Vj&&!(typeof window>"u")&&E6()){Vj=!0;try{Cl(Mr("abc")==="abc","escapeCsvValue basic"),Cl(Mr("a;b").includes('"'),"escapeCsvValue delimiter"),Cl(Mr(`a
 b`).includes('"'),"escapeCsvValue newline");const t=vC({datePreset:"30d",query:"  hello  ",city:"  ",mediaType:"ALL"});Cl(t.q==="hello","buildDashboardBackendQuery trims query"),Cl(t.city===void 0,"buildDashboardBackendQuery omits empty city");const s=Lh(t);Cl(s.includes("q=hello"),"toQueryString includes trimmed q"),Cl(!s.includes("city="),"toQueryString omits empty city"),console.info("[dashboard][qa] ok")}catch(t){console.error("[dashboard][qa] failed",t)}}}class T6 extends m.Component{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(s){try{this.props.onError?.(s)}catch{}}render(){return this.state.hasError?this.props.fallback:this.props.children}}const D6="oneMedia.dashboard.rollout.config.v1",I6="oneMedia.dashboard.rollout.force.v1",J0=()=>typeof window<"u"?window:null;function Kc(t){return(t||"").trim()}function jC(t){const s=J0();if(!s)return null;try{const n=s.localStorage.getItem(t);return n?JSON.parse(n):null}catch{return null}}function M6(t,s){const n=J0();if(n)try{n.localStorage.setItem(t,JSON.stringify(s))}catch{}}function iu(t){try{return import.meta?.env?.[t]||void 0}catch{return}}function vh(t){return t?t.split(",").map(s=>s.trim()).filter(Boolean):[]}function R6(){const t=J0();return t?new URLSearchParams(t.location.search):new URLSearchParams}function NC(t,s){return`${I6}:${Kc(t)||"na"}:${Kc(s)||"na"}`}function Hj(t){const s=t.ttlMs??864e5,n=Date.now()+s,r={variant:t.variant,until:n,reason:t.reason};M6(NC(t.companyId,t.userId),r)}function O6(){const t=jC(D6)||{},s=iu("VITE_DASHBOARD_ROLLOUT_DEFAULT"),n=vh(iu("VITE_DASHBOARD_ROLLOUT_ENABLED_COMPANIES")),r=vh(iu("VITE_DASHBOARD_ROLLOUT_ENABLED_USERS")),o=vh(iu("VITE_DASHBOARD_ROLLOUT_DISABLED_COMPANIES")),c=vh(iu("VITE_DASHBOARD_ROLLOUT_DISABLED_USERS"));return{defaultVariant:t.defaultVariant||(s==="compact"?"compact":s==="v2"?"v2":void 0),enabledCompanies:yh([...t.enabledCompanies||[],...n]),enabledUsers:yh([...t.enabledUsers||[],...r]),disabledCompanies:yh([...t.disabledCompanies||[],...o]),disabledUsers:yh([...t.disabledUsers||[],...c])}}function yh(t){const s=new Set;return t.forEach(n=>{const r=Kc(n);r&&s.add(r)}),Array.from(s)}function L6(t){const s=(t||"").trim().toLowerCase();return s?s==="v2"||s==="new"?"v2":s==="compact"||s==="safe"||s==="v1"||s==="off"?"compact":null:null}function F6(t){const s=(t||"").trim().toLowerCase();if(s){if(s==="backend")return"backend";if(s==="mock")return"mock"}}function $6(t){const s=Kc(t.companyId),n=Kc(t.userId)||Kc(t.userEmail),r=!!t.canOverride,o=R6(),c=o.get("dashboard"),u=o.get("dashboardData"),h=L6(c),f=F6(u);if(h)return{variant:h,reason:`Override por URL (?dashboard=${c})`,source:"query",dataModeOverride:f,canOverride:r,debug:{queryDashboard:c||void 0,queryDataMode:u||void 0}};const v=jC(NC(s,n));if(v&&typeof v.until=="number"&&v.until>Date.now())return{variant:v.variant,reason:v.reason||"Override forado (rollback/mitigao)",source:"forced",dataModeOverride:f,canOverride:r,debug:{forcedUntil:v.until,forcedVariant:v.variant,queryDataMode:u||void 0}};const x=O6(),g=new Set(x.disabledCompanies||[]),j=new Set(x.disabledUsers||[]),w=new Set(x.enabledCompanies||[]),N=new Set(x.enabledUsers||[]);if(s&&g.has(s))return{variant:"compact",reason:"Bloqueado por empresa (denylist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};if(n&&j.has(n))return{variant:"compact",reason:"Bloqueado por usurio (denylist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};if(s&&w.has(s))return{variant:"v2",reason:"Habilitado por empresa (allowlist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};if(n&&N.has(n))return{variant:"v2",reason:"Habilitado por usurio (allowlist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};const C=x.defaultVariant||"v2";return{variant:C,reason:C==="v2"?"Padro (v2)":"Padro (compact)",source:x.defaultVariant?"env":"default",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}}}const wC=[{id:"overview-kpis",title:"KPIs principais (Executivo)",description:"Comparar os KPIs do topo com a fonte oficial (relatorios/queries do backend).",route:es.overview,fields:["inventoryTotalPoints","proposalsTotal","approvalRatePercent","campaignsActiveCount","revenueTotal","revenueMtd","revenueYtd","receivablesOpen"],tolerance:0},{id:"commercial-funnel",title:"Funil Comercial",description:"Conferir volumes por etapa e totals.",route:es.funnel,fields:["stages[].count","stages[].value","totalCount","totalValue"],tolerance:0},{id:"inventory-map",title:"Inventario / Mapa (pins)",description:"Conferir contagem de pontos, ocupacao e coordenadas (lat/lng).",route:es.inventoryMap,fields:["pins[].id","pins[].lat","pins[].lng","pins[].occupancy","pins[].region","pins[].line"]},{id:"inventory-ranking",title:"Inventario / Ranking",description:"Conferir top pontos por performance.",route:es.inventoryRanking,fields:["rows[].id","rows[].name","rows[].occupancy","rows[].impressions"]},{id:"finance-aging",title:"Financeiro / Aging",description:"Conferir buckets (faixas) e totals.",route:es.receivablesAgingSummary,fields:["buckets[].label","buckets[].amount","totalOpen"]},{id:"ops-proof-of-play",title:"Operacoes / Proof of Play",description:"Conferir eventos POP no periodo do filtro.",route:es.doohProofOfPlaySummary,fields:["rows[].mediaId","rows[].plays","rows[].lastPlayedAt"]}],z6="oneMedia.dashboard.parity.marks.v1";function ev(t,s){const n=(t||"na").trim(),r=(s||"na").trim();return`${z6}:${n}:${r}`}function B6(t,s){if(typeof window>"u")return{};try{const n=window.localStorage.getItem(ev(t,s));if(!n)return{};const r=JSON.parse(n);return r&&typeof r=="object"?r:{}}catch{return{}}}function U6(t,s,n){if(!(typeof window>"u"))try{window.localStorage.setItem(ev(t,s),JSON.stringify(n))}catch{}}function V6(t,s,n,r){const o={...n,[r]:!n[r]};return U6(t,s,o),o}function H6(t,s){if(!(typeof window>"u"))try{window.localStorage.removeItem(ev(t,s))}catch{}}function q6(){return wC.map(t=>`- [ ] ${t.title}  (${t.route})
  Campos: ${t.fields.join(", ")}`).join(`
`)}function Bi({className:t=""}){return e.jsx("div",{className:`animate-pulse rounded bg-gray-100 ${t}`})}function CC({title:t,description:s}){return e.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t}),s?e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-sm",children:s}):null]})}function SC({title:t,description:s}){return e.jsxs("div",{className:"py-8",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t}),s?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s}):null]})}function $g({points:t}){if(!t||t.length===0)return null;const s=80,n=24,r=t.map((u,h)=>h/Math.max(1,t.length-1)*s),o=t.map(u=>n-u/100*n),c=t.map((u,h)=>`${h===0?"M":"L"} ${r[h].toFixed(2)} ${o[h].toFixed(2)}`).join(" ");return e.jsx("svg",{width:s,height:n,viewBox:`0 0 ${s} ${n}`,children:e.jsx("path",{d:c,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400"})})}function W6({value:t}){const s=t>0?"+":"",n=t>0?"text-green-600":t<0?"text-red-600":"text-gray-500";return e.jsxs("span",{className:`text-xs ${n}`,children:[s,t,"%"]})}function ou({active:t,icon:s,label:n,onClick:r}){return e.jsxs("button",{type:"button",onClick:r,className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors border ${t?"bg-white text-gray-900 border-gray-200 shadow-sm":"bg-transparent text-gray-600 border-transparent hover:bg-white/60"}`,children:[s,n]})}function Oi({label:t,value:s}){return e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 text-xs whitespace-nowrap",children:[e.jsxs("span",{className:"text-gray-500",children:[t,":"]})," ",s]})}function G6({severity:t}){const s=t==="HIGH"?"bg-red-500":t==="MEDIUM"?"bg-yellow-500":"bg-green-500";return e.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${s}`})}function or({id:t,title:s,subtitle:n,actions:r,loading:o,error:c,empty:u,emptyTitle:h,emptyDescription:f,children:v}){return e.jsx("div",{id:t,className:"print-avoid-break",children:e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(di,{children:s}),n?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n}):null]}),r?e.jsx("div",{className:"flex items-center gap-2","data-no-print":!0,children:r}):null]})}),e.jsx(Le,{children:o?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Bi,{className:"h-5 w-1/2"}),e.jsx(Bi,{className:"h-5 w-2/3"}),e.jsx(Bi,{className:"h-32 w-full"})]}):c?e.jsx(SC,{title:c.title,description:c.description}):u?e.jsx(CC,{title:h||"Sem dados",description:f}):v})]})})}function fn({label:t,value:s,helper:n,delta:r,spark:o,onClick:c,loading:u}){return e.jsx(Re,{className:c?"cursor-pointer hover:shadow-sm":"",onClick:c,children:e.jsxs(Le,{className:"pt-5",children:[e.jsx("p",{className:"text-xs text-gray-500",children:t}),u?e.jsxs("div",{className:"mt-2",children:[e.jsx(Bi,{className:"h-7 w-2/3"}),e.jsx(Bi,{className:"h-4 w-1/2 mt-2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-900 mt-1",children:s||""}),n?e.jsx("p",{className:`text-xs text-gray-500 mt-2 ${n.includes("BACKEND:")?"backend-hint":""}`.trim(),children:n}):null,typeof r=="number"&&o?e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(W6,{value:r}),e.jsx($g,{points:o})]}):null]})]})})}function bh(t,s,n){return Math.max(s,Math.min(n,t))}function qj(t){return t>=75?"bg-red-500 border-red-600":t>=45?"bg-yellow-400 border-yellow-500":"bg-green-500 border-green-600"}function Z6(t){return t>=75?{label:"Alta",className:"text-red-700 bg-red-50 border-red-200"}:t>=45?{label:"Media",className:"text-yellow-800 bg-yellow-50 border-yellow-200"}:{label:"Baixa",className:"text-green-700 bg-green-50 border-green-200"}}function K6(){const t=m.useRef(null),[s,n]=m.useState({width:0,height:0});return m.useEffect(()=>{const r=t.current;if(!r)return;const o=new ResizeObserver(c=>{const u=c[0];if(!u)return;const h=u.contentRect;n({width:Math.round(h.width),height:Math.round(h.height)})});return o.observe(r),()=>o.disconnect()},[]),{ref:t,...s}}function _C(t){return t.map((r,o)=>{const c=typeof r.lat=="number"?r.lat:-15.78+(o%9-4)*.01,u=typeof r.lng=="number"?r.lng:-47.9+(o%11-5)*.01,h=String(r.region||r.city||"Regiao").trim()||"Regiao",f=String(r.line||`Linha ${String.fromCharCode(65+o%3)}`).trim()||"Linha";return{...r,lat:c,lng:u,regionSafe:h,lineSafe:f}})}function Q6(t,s,n){const r=_C(t),o=r.map(C=>C.lat),c=r.map(C=>C.lng),u=Math.min(...o),h=Math.max(...o),f=Math.min(...c),v=Math.max(...c),x=24,g=Math.max(1,s-x*2),j=Math.max(1,n-x*2),w=Math.max(1e-9,h-u),N=Math.max(1e-9,v-f);return r.map(C=>{const S=(C.lng-f)/N,E=(C.lat-u)/w,_=x+S*g,k=x+(1-E)*j;return{...C,x:_,y:k,regionSafe:C.regionSafe,lineSafe:C.lineSafe}})}function X6(t,s){const r=34/Math.max(.6,s),o=new Set,c=[];for(let u=0;u<t.length;u++){const h=t[u];if(o.has(h.id))continue;const f=[h];o.add(h.id);for(let j=u+1;j<t.length;j++){const w=t[j];if(o.has(w.id))continue;const N=w.x-h.x,C=w.y-h.y;Math.sqrt(N*N+C*C)<=r&&(f.push(w),o.add(w.id))}if(f.length===1){c.push({id:`pin:${h.id}`,x:h.x,y:h.y,count:1,occupancyAvg:h.occupancyPercent,pins:[h]});continue}const v=Math.round(f.reduce((j,w)=>j+w.x,0)/f.length),x=Math.round(f.reduce((j,w)=>j+w.y,0)/f.length),g=f.reduce((j,w)=>j+(w.occupancyPercent||0),0)/f.length;c.push({id:`cluster:${f[0].id}:${f.length}`,x:v,y:x,count:f.length,occupancyAvg:g,pins:f})}return c}function Y6(t){return t>=75?"bg-red-100 border-red-200":t>=45?"bg-yellow-100 border-yellow-200":"bg-green-100 border-green-200"}function J6(t){const s=m.useMemo(()=>_C(t.pins),[t.pins]),n=m.useMemo(()=>{const c=new Set;for(const u of s)c.add(u.regionSafe);return Array.from(c).slice(0,6)},[s]),r=m.useMemo(()=>{const c=new Set;for(const u of s)c.add(u.lineSafe);return Array.from(c).slice(0,5)},[s]),o=m.useMemo(()=>{const c=new Map;for(const u of s){const h=`${u.regionSafe}::${u.lineSafe}`,f=c.get(h)||{sum:0,count:0};c.set(h,{sum:f.sum+(u.occupancyPercent||0),count:f.count+1})}return c},[s]);return n.length===0||r.length===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fp,{className:"w-4 h-4 text-gray-700"}),e.jsx("p",{className:"text-sm text-gray-900",children:"Ocupacao por regiao e linha"}),e.jsx("p",{className:"text-xs text-gray-500",children:"(clique para abrir lista)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left font-medium text-gray-700 px-2 py-2 border-b border-gray-200",children:"Regiao"}),r.map(c=>e.jsx("th",{className:"text-left font-medium text-gray-700 px-2 py-2 border-b border-gray-200",children:c},c))]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 border-b border-gray-100 text-gray-900 whitespace-nowrap",children:c}),r.map(u=>{const h=`${c}::${u}`,f=o.get(h),v=f&&f.count?f.sum/f.count:0,x=f?.count||0;return e.jsx("td",{className:"px-2 py-2 border-b border-gray-100",children:e.jsx("button",{type:"button",className:`w-full border rounded-md px-2 py-1 text-left ${Y6(v)}`,onClick:()=>t.onSelect?.(c,u),disabled:x===0,title:x===0?"Sem pontos":"Abrir drilldown",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"tabular-nums text-gray-900",children:[Math.round(v),"%"]}),e.jsx("span",{className:"text-gray-600",children:x})]})})},h)})]},c))})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-green-200 border border-green-300"}),"baixa"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-yellow-200 border border-yellow-300"}),"media"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-red-200 border border-red-300"}),"alta"]})]})]})}function eL(t){const s=t.height??320,{ref:n,width:r}=K6(),o=m.useMemo(()=>Q6(t.pins,Math.max(1,r),s),[t.pins,r,s]),[c,u]=m.useState(1),[h,f]=m.useState({x:0,y:0}),[v,x]=m.useState(!1),g=m.useRef(null),[j,w]=m.useState(!0),[N,C]=m.useState(!0),[S,E]=m.useState(null),_=m.useMemo(()=>j?c>=2.2?o.map(I=>({id:`pin:${I.id}`,x:I.x,y:I.y,count:1,occupancyAvg:I.occupancyPercent,pins:[I]})):X6(o,c):o.map(I=>({id:`pin:${I.id}`,x:I.x,y:I.y,count:1,occupancyAvg:I.occupancyPercent,pins:[I]})),[o,c,j]),k=m.useCallback(I=>{if(I.preventDefault(),!r)return;const te=I.deltaY>0?.92:1.08,ue=bh(c*te,.8,6);if(ue==c)return;const Y=I.currentTarget.getBoundingClientRect(),ce=I.clientX-Y.left,U=I.clientY-Y.top,ne=ce-(ce-h.x)*(ue/c),Q=U-(U-h.y)*(ue/c);u(ue),f({x:ne,y:Q})},[c,h.x,h.y,r]),T=m.useCallback(I=>{I.currentTarget.setPointerCapture(I.pointerId),x(!0),g.current={x:I.clientX,y:I.clientY,panX:h.x,panY:h.y}},[h.x,h.y]),M=m.useCallback(I=>{if(!v||!g.current)return;const B=I.clientX-g.current.x,te=I.clientY-g.current.y;f({x:g.current.panX+B,y:g.current.panY+te})},[v]),F=m.useCallback(()=>{x(!1),g.current=null},[]),O=m.useCallback(()=>{u(1),f({x:0,y:0})},[]),Z=m.useCallback((I,B,te)=>{const ue=n.current;if(!ue){u(te);return}const Y=ue.getBoundingClientRect(),ce=Y.width/2,U=Y.height/2;u(te),f({x:ce-I*te,y:U-B*te})},[n]),q=m.useCallback(()=>u(I=>bh(I*1.25,.8,6)),[]),$=m.useCallback(()=>u(I=>bh(I*.8,.8,6)),[]),X=m.useMemo(()=>[{label:"0-44% (baixa)",dot:"bg-green-500 border-green-600"},{label:"45-74% (media)",dot:"bg-yellow-400 border-yellow-500"},{label:"75-100% (alta)",dot:"bg-red-500 border-red-600"}],[]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:O,title:"Reset view",children:e.jsx(Fl,{className:"w-4 h-4"})}),e.jsx(K,{variant:"outline",className:"h-9",onClick:$,title:"Zoom out",children:e.jsx(x4,{className:"w-4 h-4"})}),e.jsx(K,{variant:"outline",className:"h-9",onClick:q,title:"Zoom in",children:e.jsx(Sn,{className:"w-4 h-4"})}),e.jsxs(K,{variant:"outline",className:"h-9",onClick:()=>w(I=>!I),title:"Clusters",children:[e.jsx(fp,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2 text-sm",children:j?"Cluster":"Pins"})]}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>C(I=>!I),title:"Heatmap",children:e.jsx("span",{className:"text-sm",children:N?"Heat ON":"Heat OFF"})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"tabular-nums",children:["Zoom ",c.toFixed(2),"x"]}),e.jsx("span",{children:""}),e.jsxs("span",{className:"tabular-nums",children:[t.pins.length," pins"]})]})]}),e.jsxs("div",{ref:n,className:"relative w-full rounded-lg border border-gray-200 overflow-hidden select-none",style:{height:s},onWheel:k,onPointerDown:T,onPointerMove:M,onPointerUp:F,onPointerCancel:F,children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0"}}),e.jsx("div",{className:"absolute inset-0",style:{transform:`translate(${h.x}px, ${h.y}px) scale(${c})`,transformOrigin:"0 0"},children:e.jsxs("div",{className:"relative",style:{width:Math.max(1,r),height:s},children:[N&&o.map(I=>e.jsx("div",{className:"absolute rounded-full blur-2xl opacity-40",style:{left:I.x-28,top:I.y-28,width:56,height:56},children:e.jsx("div",{className:`w-full h-full rounded-full ${qj(I.occupancyPercent).split(" ")[0]} opacity-30`})},`heat:${I.id}`)),_.map(I=>{const B=I.count>1,te=B?30:16,ue=I.x-te/2,Y=I.y-te/2,ce=qj(I.occupancyAvg),U=!B&&I.pins[0]&&I.pins[0].id===t.selectedPinId;return e.jsx("button",{type:"button",className:`absolute rounded-full border ${ce} flex items-center justify-center text-white shadow-sm ${U?"ring-2 ring-gray-900 ring-offset-2":""}`,style:{left:ue,top:Y,width:te,height:te},onClick:ne=>{if(ne.stopPropagation(),B){Z(I.x,I.y,bh(c*1.7,.8,6));return}const Q=I.pins[0];Q&&t.onPinClick?.(Q)},onMouseEnter:ne=>{const Q=I.pins[0];if(!Q)return;const z=ne.currentTarget.getBoundingClientRect();E({x:z.left+z.width/2,y:z.top,title:B?`${I.count} pins`:Q.label,subtitle:B?"Cluster":Q.city||Q.region,occ:Math.round(I.occupancyAvg)})},onMouseLeave:()=>E(null),title:B?`${I.count} pontos`:I.pins[0]?.label,children:B?e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:I.count}):null},I.id)})]})}),e.jsx("div",{className:"absolute left-3 bottom-3 bg-white/90 backdrop-blur rounded-md border border-gray-200 px-2 py-2 space-y-1",children:X.map(I=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-sm border ${I.dot}`}),e.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:I.label})]},I.label))})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.pins.slice(0,8).map(I=>{const B=Z6(I.occupancyPercent);return e.jsxs("button",{type:"button",className:`text-xs px-2 py-1 rounded-md border ${B.className} hover:opacity-90`,onClick:()=>t.onPinClick?.(I),children:[I.label," ",e.jsxs("span",{className:"tabular-nums",children:[Math.round(I.occupancyPercent),"%"]})]},I.id)})}),S?e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:S.x,top:S.y,transform:"translate(-50%, -8px)"},children:e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white shadow-lg px-3 py-2",children:[e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:S.title}),S.subtitle?e.jsx("p",{className:"text-xs text-gray-500",children:S.subtitle}):null,e.jsxs("p",{className:"text-xs text-gray-700",children:["Ocupacao: ",e.jsxs("span",{className:"tabular-nums",children:[S.occ,"%"]})]})]})}):null]})}function Wj({onNavigate:t}){const{user:s}=Vo(),{company:n}=Ho(),[r,o]=m.useState("executivo"),c={datePreset:"30d",query:"",city:"",mediaType:"ALL"},[u,h]=m.useState(c),[f,v]=m.useState(c),[x,g]=m.useState(!1);m.useEffect(()=>{if(!(u.query!==f.query||u.city!==f.city)){g(!1);return}g(!0);const De=window.setTimeout(()=>{v(qt=>({...qt,query:u.query,city:u.city})),g(!1)},350);return()=>window.clearTimeout(De)},[u.query,u.city,f.query,f.city]);const j=m.useMemo(()=>j6(s,n),[s,n]),w=m.useMemo(()=>$6({companyId:n?.id,userId:s?.id,userEmail:s?.email,canOverride:j.canManageSavedViews}),[n?.id,s?.id,s?.email,j.canManageSavedViews]),[N,C]=m.useState(()=>{const le=w.dataModeOverride??Zx;return w.variant==="compact"?"mock":le});m.useEffect(()=>{const le=w.dataModeOverride??Zx;C(w.variant==="compact"?"mock":le)},[w.dataModeOverride,w.variant]),m.useEffect(()=>{if(N==="backend")try{sessionStorage.getItem("oneMedia.dashboard.dataMode.session")==="mock"&&C("mock")}catch{}},[N]);const S=le=>{w.canOverride&&(Hj({companyId:n?.id,userId:s?.id||s?.email,variant:le,ttlMs:1440*60*1e3,reason:"Override manual (Etapa 16)"}),window.location.reload())},[E,_]=m.useState(!1),[k,T]=m.useState({});m.useEffect(()=>{T(B6(n?.id,s?.id||s?.email))},[n?.id,s?.id,s?.email]);const M=m.useMemo(()=>String(n?.id??""),[n]),F=m.useMemo(()=>{const le=s;return String(le?.id??le?.uid??le?.userId??le?.email??"")},[s]),[O,Z]=m.useState([]),[q,$]=m.useState(""),[X,I]=m.useState(!1),[B,te]=m.useState("create"),[ue,Y]=m.useState(""),ce=m.useMemo(()=>(j.allowedTabs||[]).join("|"),[j.allowedTabs]),[U,ne]=m.useState(!1),[Q,z]=m.useState(!1),se=m.useMemo(()=>vC(f),[f]),G=m.useMemo(()=>Lh(se),[se]),[ee,V]=m.useState({open:!1,key:void 0,title:"",rows:[],hint:void 0,status:"idle",errorMessage:void 0,sortBy:void 0,sortDir:void 0,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""}),re=ta({enabled:!!n,mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchOverviewKpis(n.id,f),fetcher:le=>sa(es.overview,G,{signal:le})}),ae=ta({enabled:!!n,mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchCommercialFunnel(n.id,f),fetcher:le=>sa(es.funnel,G,{signal:le})}),me=ta({enabled:!!n&&r==="comercial",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchCommercialSummary(n.id,f),fetcher:le=>sa(es.commercialSummary,G,{signal:le})}),oe=ta({enabled:!!n&&r==="comercial",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchStalledProposals(n.id,f),fetcher:le=>sa(es.stalledProposals,G,{signal:le})}),Pe=ta({enabled:!!n&&r==="comercial",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchSellerRanking(n.id,f),fetcher:le=>sa(es.sellerRanking,G,{signal:le})}),We=ta({enabled:!!n,mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchAlerts(n.id,f),fetcher:le=>sa(es.alerts,G,{signal:le})}),Je=m.useMemo(()=>ee.key?Lh(se,{cursor:ee.cursor,limit:String(Oh),sortBy:ee.sortBy,sortDir:ee.sortDir,...ee.params||{}}):G,[se,G,ee.key,ee.cursor,ee.sortBy,ee.sortDir,ee.params]),tt=ta({enabled:!!n&&ee.open&&!!ee.key,mode:N,deps:[n?.id,ee.key,Je],computeMock:()=>kn.fetchDrilldown(n.id,ee.key,f,{cursor:ee.cursor,limit:Oh,sortBy:ee.sortBy,sortDir:ee.sortDir,params:ee.params}),fetcher:le=>sa(`${es.drilldown}/${ee.key}`,Je,{signal:le})});m.useEffect(()=>{ee.open&&V(le=>({...le,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:le.key?"loading":le.status,errorMessage:void 0}))},[G]),m.useEffect(()=>{if(!(!ee.open||!ee.key)){if(tt.status==="loading"){V(le=>({...le,status:"loading",errorMessage:void 0}));return}if(tt.status==="error"){V(le=>({...le,status:"error",errorMessage:tt.errorMessage||"Erro inesperado ao carregar detalhes"}));return}if(tt.status==="ready"){const le=tt.data,De=le?.paging||{},qt=De.nextCursor??De.cursor,bs=!!(De.hasMore&&qt),Zt=le?.rows||[];V(Zs=>{const mn=!!(Zs.cursor&&Zs.rows.length>0)?d6([...Zs.rows||[],...Zt]):Zt;return{...Zs,rows:mn,status:"ready",errorMessage:void 0,hasMore:bs,nextCursor:qt}})}}},[ee.open,ee.key,tt.status,tt.data,tt.errorMessage]);const nt=ta({enabled:!!n&&r==="executivo",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchRevenueTimeseries(n.id,f),fetcher:le=>sa(es.revenueTimeseries,G,{signal:le})}),ct=ta({enabled:!!n&&r==="financeiro",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchCashflowTimeseries(n.id,f),fetcher:le=>sa(es.cashflowTimeseries,G,{signal:le})}),wt=ta({enabled:!!n&&r==="inventario",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchInventoryMap(n.id,f),fetcher:le=>sa(es.inventoryMap,G,{signal:le})}),pt=ta({enabled:!!n&&r==="inventario",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchInventoryRanking(n.id,f),fetcher:le=>sa(es.inventoryRanking,G,{signal:le})}),It=ta({enabled:!!n&&r==="executivo",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchTopClients(n.id,f),fetcher:le=>sa(es.topClients,G,{signal:le})}),Lt=ta({enabled:!!n&&r==="financeiro",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchReceivablesAgingSummary(n.id,f),fetcher:le=>sa(es.receivablesAgingSummary,G,{signal:le})}),J=ta({enabled:!!n&&r==="operacoes",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchOohOpsSummary(n.id,f),fetcher:le=>sa(es.oohOpsSummary,G,{signal:le})}),ve=ta({enabled:!!n&&r==="operacoes",mode:N,deps:[n?.id,G],computeMock:()=>kn.fetchDoohProofOfPlaySummary(n.id,f),fetcher:le=>sa(es.doohProofOfPlaySummary,G,{signal:le})}),xe=ga(`overview:${n?.id||""}:${G}`,re),Ve=ga(`funnel:${n?.id||""}:${G}`,ae),de=ga(`commercialSummary:${n?.id||""}:${G}`,me),Ne=ga(`alerts:${n?.id||""}:${G}`,We),Be=Ne||[],He=ga(`revenueTs:${n?.id||""}:${G}`,nt),gt=ga(`cashflowTs:${n?.id||""}:${G}`,ct),pe=ga(`inventoryMap:${n?.id||""}:${G}`,wt),$e=ga(`inventoryRanking:${n?.id||""}:${G}`,pt),Xe=ga(`topClients:${n?.id||""}:${G}`,It),mt=ga(`aging:${n?.id||""}:${G}`,Lt),fe=ga(`oohOps:${n?.id||""}:${G}`,J),Ye=ga(`pop:${n?.id||""}:${G}`,ve),dt=ga(`stalledProposals:${n?.id||""}:${G}`,oe),kt=ga(`sellerRanking:${n?.id||""}:${G}`,Pe),ht=He?.points||[],Ft=gt?.points||[],ms=pe?.pins||[],hs=$e?.rows||[],Ps=Xe?.rows||[],Yt=fe?.items||[],Gs=Ye?.rows||[],Ct=dt?.rows||[],Mt=kt?.rows||[],Wt=m.useMemo(()=>({companyId:n?.id?String(n.id):void 0,tab:r,backendQs:G}),[n?.id,r,G]);na("overview",re,Wt),na("alerts",We,Wt),na("funnel",ae,Wt),na("commercialSummary",me,Wt),na("stalledProposals",oe,Wt),na("sellerRanking",Pe,Wt),na("revenueTs",nt,Wt),na("cashflowTs",ct,Wt),na("topClients",It,Wt),na("aging",Lt,Wt),na("oohOps",J,Wt),na("pop",ve,Wt),na("inventoryMap",wt,Wt),na("inventoryRanking",pt,Wt),na("drilldown",tt,Wt),m.useEffect(()=>{k6()},[]),m.useEffect(()=>{w.variant==="compact"&&r!=="executivo"&&o("executivo")},[w.variant,r]),m.useEffect(()=>{if(!(N!=="backend"||![re,We].some(De=>{const qt=String(De?.source||"");return De.status==="error"||qt.includes("fallback")}))){C("mock");try{sessionStorage.setItem("oneMedia.dashboard.dataMode.session","mock")}catch{}ye.error("Dashboard: fallback para mock",{description:"O backend falhou para alguns widgets. Mantendo a UI estvel enquanto investigamos."})}},[N,re.status,We.status,re.source,We.source]);const Es=m.useMemo(()=>n?kn.getPublicMapUrl(n.id):"",[n]);m.useEffect(()=>{V(()=>({open:!1,key:void 0,title:"",rows:[],hint:void 0,status:"idle",errorMessage:void 0,sortBy:void 0,sortDir:void 0,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""}))},[r]),m.useEffect(()=>{j.allowedTabs.includes(r)||o(j.allowedTabs[0]||"executivo")},[ce,r]),m.useEffect(()=>{j.canManageSavedViews&&(!M||!F||Z(Y0(M,F)))},[M,F,j.canManageSavedViews]),m.useEffect(()=>{q&&(O.some(le=>le.id===q)||$(""))},[q,O]);const xs=le=>m6(f,le);if(!n||!s)return e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dashboard..."})]})})});const fs=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(Es),z(!0),ye.success("Link do mapa copiado para a rea de transferncia!"),setTimeout(()=>z(!1),2e3);else{const le=document.createElement("textarea");le.value=Es,le.style.position="fixed",le.style.left="-999999px",le.style.top="-999999px",document.body.appendChild(le),le.focus(),le.select();try{document.execCommand("copy")?(z(!0),ye.success("Link do mapa copiado para a rea de transferncia!"),setTimeout(()=>z(!1),2e3)):ye.error("No foi possvel copiar. Por favor, copie manualmente.")}catch{ye.error("No foi possvel copiar. Por favor, copie manualmente.")}document.body.removeChild(le)}}catch{ye.error("No foi possvel copiar. Por favor, copie manualmente.")}},Ee=async()=>{try{const le=q6();if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(le),ye.success("Checklist de paridade copiado!");return}const De=document.createElement("textarea");De.value=le,De.style.position="fixed",De.style.left="-999999px",De.style.top="-999999px",document.body.appendChild(De),De.focus(),De.select();const qt=document.execCommand("copy");document.body.removeChild(De),qt?ye.success("Checklist de paridade copiado!"):ye.error("No foi possvel copiar.")}catch{ye.error("No foi possvel copiar.")}},rt=(le,De,qt,bs)=>{const Zt={};if(bs)for(const[Ts,ft]of Object.entries(bs))typeof ft=="string"&&ft.length>0&&(Zt[Ts]=ft);const Zs=Qx(De),Ut=Zs.defaultSort?.by,mn=Zs.defaultSort?.dir,rs=Lh(se,{limit:String(Oh),sortBy:Ut,sortDir:mn,...Zt}),St=`BACKEND: GET ${es.drilldown}/${De}?${rs}`;V({open:!0,key:De,params:Object.keys(Zt).length?Zt:void 0,title:le,rows:[],hint:qt?`${qt}  ${St}`:St,status:"loading",errorMessage:void 0,sortBy:Ut,sortDir:mn,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""})},it=le=>{const De=String(n?.name??n?.title??n?.label??n.id),qt=`${Yr(se.dateFrom)} - ${Yr(se.dateTo)}`,bs=[{label:"Empresa",value:De},{label:"Aba",value:Bt(r)},{label:"Perodo",value:qt},{label:"Tipo",value:String(u.mediaType)}];return u.query&&bs.push({label:"Busca",value:String(u.query)}),u.city&&bs.push({label:"Cidade",value:String(u.city)}),[...le||[],...bs]},we=le=>{const De=document.getElementById("dashboard-export-root");if(!De){ye.error("No foi possvel exportar PDF: rea do dashboard no encontrada");return}const qt=new Date().toISOString().slice(0,7),bs=le==="monthly"?`Snapshot mensal  ${Bt(r)}`:`Dashboard  ${Bt(r)}`,Zt=String(n?.name??n?.title??n?.label??n.id),Zs=it(le==="monthly"?[{label:"Snapshot",value:qt}]:void 0);Uj({element:De,title:bs,subtitle:Zt,meta:Zs})},Fe=(le,De)=>{const qt=document.getElementById(le);if(!qt){ye.error("No foi possvel exportar o widget: elemento no encontrado");return}const bs=`${String(n?.name??n?.title??n.id)}  ${Bt(r)}`;Uj({element:qt,title:De,subtitle:bs,meta:it()})},ze=()=>{const De=new Date().toISOString().slice(0,10).replace(/-/g,""),bs=`dashboard_${Bt(r).toLowerCase().replace(/[^a-z0-9]+/gi,"_")}_${De}.csv`,Zt=[],Zs=String(n?.name??n?.title??n?.label??n.id);Zt.push(["Empresa",Zs]),Zt.push(["Aba",Bt(r)]),Zt.push(["Perodo",`${Yr(se.dateFrom)} - ${Yr(se.dateTo)}`]),Zt.push(["Tipo",String(u.mediaType)]),u.city&&Zt.push(["Cidade",String(u.city)]),u.query&&Zt.push(["Busca",String(u.query)]);const Ut=(rs,St)=>Zt.push([rs,St==null?"":String(St)]);if(r==="executivo"){xe&&(Ut("Receita reconhecida",cs(xe.revenueRecognizedCents)),Ut("A faturar",cs(xe.revenueToInvoiceCents)),Ut("Ocupao",`${xe.occupancyPercent}%`),Ut("Inadimplncia",cs(xe.receivablesOverdueCents)),Ut("Campanhas ativas",xe.campaignsActiveCount),Ut("Clientes ativos",xe.clientsActiveCount),Ut("Ticket mdio",cs(xe.averageTicketCents)));const rs=Be.filter(ft=>ft.severity==="HIGH").length,St=Be.filter(ft=>ft.severity==="MEDIUM").length,Ts=Be.filter(ft=>ft.severity==="LOW").length;Ut("Alertas HIGH",rs),Ut("Alertas MEDIUM",St),Ut("Alertas LOW",Ts),Ps.slice(0,8).forEach((ft,ds)=>{Ut(`Top cliente ${ds+1}`,`${ft.name}  ${cs(ft.amountCents)} (${ft.campaignsCount} camp.)`)})}else if(r==="comercial")de&&(Ut("Propostas (total)",de.proposalsTotal),Ut("Taxa de aprovao",`${de.approvalRatePercent}%`),Ut("Ciclo mdio (dias)",de.averageDaysToClose),Ut("Pipeline ativo",cs(de.activePipelineAmountCents)),Ut("Propostas paradas",de.stalledProposalsCount)),Ve?.stages?.forEach(rs=>{Ut(`Funil  ${rs.label} (qtde)`,rs.count),Ut(`Funil  ${rs.label} (valor)`,cs(rs.amountCents))}),Ct.slice(0,8).forEach((rs,St)=>{Ut(`Parada ${St+1}`,`${rs.title}  ${rs.client}  ${rs.daysWithoutUpdate}d  ${cs(rs.amountCents)}`)}),Mt.slice(0,8).forEach((rs,St)=>{Ut(`Vendedor ${St+1}`,`${rs.name}  ganhos: ${rs.dealsWon} (${cs(rs.amountWonCents)})  pipeline: ${rs.dealsInPipeline}`)});else if(r==="operacoes"){const rs=Yt.filter(zn=>zn.status==="OK").length,St=Yt.filter(zn=>zn.status==="PENDING").length,Ts=Yt.filter(zn=>zn.status==="LATE").length;Ut("OOH  itens OK",rs),Ut("OOH  pendncias",St),Ut("OOH  atrasos",Ts);const ft=Gs.length?Math.round(Gs.reduce((zn,Ga)=>zn+Ga.uptimePercent,0)/Gs.length):0,ds=Gs.reduce((zn,Ga)=>zn+Ga.plays,0);Ut("DOOH  telas",Gs.length),Ut("DOOH  uptime mdio",`${ft}%`),Ut("DOOH  plays",ds)}else if(r==="financeiro")Ft.length&&Ut("Fluxo caixa (ltimo)",cs(Ft[Ft.length-1].valueCents)),mt&&(Ut("Recebveis (total)",cs(mt.totalCents)),mt.buckets.slice(0,12).forEach(rs=>{Ut(`Aging  ${rs.label}`,cs(rs.amountCents))}));else if(r==="inventario"){Ut("Pins (mapa)",ms.length);const rs=ms.length?Math.round(ms.reduce((St,Ts)=>St+(Ts.occupancyPercent||0),0)/ms.length):0;Ut("Ocupao mdia (mapa)",`${rs}%`),hs.slice(0,10).forEach((St,Ts)=>{Ut(`Ranking ${Ts+1}`,`${St.label}${St.city?` (${St.city})`:""}  occ: ${St.occupancyPercent}%  camp: ${St.activeCampaigns}  ${cs(St.revenueCents)}`)})}const mn=["key;value",...Zt.map(([rs,St])=>[rs,St].map(Mr).join(";"))];qp(bs,mn.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado",{description:bs})},$t=()=>{h(c),v(c),ye.success("Filtros limpos")},Bt=le=>le==="executivo"?"Executivo":le==="comercial"?"Comercial":le==="operacoes"?"Operaes":le==="financeiro"?"Financeiro":le==="inventario"?"Inventrio":le,ks=le=>{const De=j.allowedTabs.includes(le.tab)?le.tab:j.allowedTabs[0]||"executivo";De!=le.tab?ye.message("Viso aplicada com ajustes",{description:`A aba "${Bt(le.tab)}" no est liberada para seu perfil. Abrimos "${Bt(De)}".`}):ye.success(`Viso aplicada: ${le.name}`),o(De),h(le.filters),v(le.filters)},as=le=>{if($(le),!le)return;const De=O.find(qt=>qt.id===le);De&&ks(De)},ys=le=>{if(j.canManageSavedViews){if(te(le),le==="update"&&q){const De=O.find(qt=>qt.id===q);Y(De?.name||"")}else Y(`Minha viso - ${Bt(r)}`);I(!0)}},Cs=()=>{if(!j.canManageSavedViews)return;if(!M||!F){ye.error("No foi possvel salvar a viso: faltam dados de usurio/empresa");return}const le=(ue||"").trim();if(!le){ye.error("Informe um nome para a viso");return}const De=new Date().toISOString(),qt={version:1},bs=B==="update"?O.find(mn=>mn.id===q):void 0,Zt=bs?.id||N6(),Zs={id:Zt,name:le,tab:r,filters:u,layout:qt,createdAt:bs?.createdAt||De,updatedAt:De},Ut=C6(M,F,Zs);Z(Ut),$(Zt),I(!1),ye.success(B==="update"?"Viso atualizada":"Viso salva",{description:"MVP (localStorage). BACKEND: futuramente /dashboard/views (por usurio/empresa)."})},en=()=>{if(!j.canManageSavedViews||!M||!F||!q)return;const le=O.find(bs=>bs.id===q);if(!window.confirm(`Excluir a viso "${le?.name||"Sem nome"}"?`))return;const qt=S6(M,F,q);Z(qt),$(""),ye.success("Viso excluda")},un=(le,De)=>De.status==="error"?{title:le,description:De.errorMessage||"Tente novamente."}:null,In=re.status!=="ready",Yo=ae.status!=="ready",Ki=me.status!=="ready",Kl=()=>{try{Hj({companyId:n?.id,userId:s?.id||s?.email,variant:"compact",ttlMs:3600*1e3,reason:"Rollback automtico: erro de runtime"})}catch{}},Jo=w.variant==="compact"||w.source!=="default"||N!==Zx,gd=e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Dashboard em modo seguro"})}),e.jsxs(Le,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ocorreu um erro ao renderizar o dashboard. Para evitar impacto em produo, mantivemos a tela em modo compacto (menor risco)."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(K,{className:"h-9",onClick:()=>window.location.reload(),children:"Recarregar"}),w.canOverride?e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>S("v2"),children:"Tentar v2"}):null]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Rollout: ",e.jsx("span",{className:"font-medium",children:w.variant})," (",w.source,")  dados:"," ",e.jsx("span",{className:"font-medium",children:N})]})]})]})});return e.jsx(T6,{fallback:gd,onError:Kl,children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Viso geral  filtros globais  drill-down por widget (mock)"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(K,{className:"h-9 flex items-center gap-2",onClick:()=>t("proposals"),children:[e.jsx(Sn,{className:"w-4 h-4"}),"Nova Proposta"]}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>t("inventory"),children:[e.jsx(Sn,{className:"w-4 h-4"}),"Nova Mdia"]}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>t("mediakit"),children:[e.jsx(jw,{className:"w-4 h-4"}),"Mdia Kit"]}),w.canOverride?e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>_(!0),children:[e.jsx(ck,{className:"w-4 h-4"}),"Paridade"]}):null,w.variant!=="compact"?e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ne(!0),children:[e.jsx(Ew,{className:"w-4 h-4"}),"Compartilhar Mapa"]}):null]})]}),Jo?e.jsx(Re,{children:e.jsx(Le,{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Rollout:"})," ",w.variant," (",w.source,")  ",w.reason,e.jsx("span",{className:"mx-2",children:""}),e.jsx("span",{className:"font-medium",children:"Dados:"})," ",N]}),w.canOverride?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-8 text-xs",onClick:()=>S("v2"),children:"Forar v2"}),e.jsx(K,{variant:"outline",className:"h-8 text-xs",onClick:()=>S("compact"),children:"Rollback"})]}):null]})})}):null,e.jsx(Re,{children:e.jsxs(Le,{className:"pt-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(pp,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"Filtros globais"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Todos os widgets reagem a estes filtros"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[j.canManageSavedViews?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"h-9 rounded-md border border-gray-200 bg-white px-3 text-sm min-w-[180px]",value:q,onChange:le=>as(le.target.value),children:[e.jsx("option",{value:"",children:"Vises salvas"}),O.map(le=>e.jsx("option",{value:le.id,children:le.name},le.id))]}),q?e.jsx(K,{variant:"ghost",className:"h-9 px-2",onClick:()=>$(""),title:"Desselecionar",children:e.jsx(Ca,{className:"w-4 h-4"})}):null]}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ys("create"),children:[e.jsx(Sn,{className:"w-4 h-4"}),"Salvar viso"]}),q?e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ys("update"),children:[e.jsx(wa,{className:"w-4 h-4"}),"Atualizar"]}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:en,children:[e.jsx(Ca,{className:"w-4 h-4"}),"Excluir"]})]}):null]}):null,e.jsx(K,{variant:"outline",className:"h-9",onClick:$t,children:"Limpar"}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:ze,children:[e.jsx(Dl,{className:"w-4 h-4"}),"Exportar CSV"]}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>we("view"),children:[e.jsx(Dl,{className:"w-4 h-4"}),"Exportar PDF"]}),e.jsxs(K,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>we("monthly"),children:[e.jsx(Dl,{className:"w-4 h-4"}),"Snapshot mensal"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Perodo"}),e.jsxs("select",{className:"w-full h-9 rounded-md border border-gray-200 bg-white px-3 text-sm",value:u.datePreset,onChange:le=>{const De=le.target.value;h(qt=>({...qt,datePreset:De})),v(qt=>({...qt,datePreset:De}))},children:[e.jsx("option",{value:"7d",children:"ltimos 7 dias"}),e.jsx("option",{value:"30d",children:"ltimos 30 dias"}),e.jsx("option",{value:"90d",children:"ltimos 90 dias"}),e.jsx("option",{value:"ytd",children:"Ano (YTD)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Buscar"}),e.jsx(Ce,{value:u.query,onChange:le=>h(De=>({...De,query:le.target.value})),placeholder:"cliente, campanha, proposta...",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Cidade/Regio"}),e.jsx(Ce,{value:u.city,onChange:le=>h(De=>({...De,city:le.target.value})),placeholder:"ex: Braslia",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full h-9 rounded-md border border-gray-200 bg-white px-3 text-sm",value:u.mediaType,onChange:le=>{const De=le.target.value;h(qt=>({...qt,mediaType:De})),v(qt=>({...qt,mediaType:De}))},children:[e.jsx("option",{value:"ALL",children:"OOH + DOOH"}),e.jsx("option",{value:"OOH",children:"OOH"}),e.jsx("option",{value:"DOOH",children:"DOOH"})]})]})]}),x?e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Aplicando filtros"}):null,e.jsxs("div",{className:"mt-4 flex items-center gap-2 flex-wrap",children:[e.jsx(Oi,{label:"Perodo",value:u.datePreset.toUpperCase()}),u.query?e.jsx(Oi,{label:"Busca",value:u.query}):null,u.city?e.jsx(Oi,{label:"Cidade",value:u.city}):null,e.jsx(Oi,{label:"Tipo",value:u.mediaType})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[j.allowedTabs.includes("executivo")?e.jsx(ou,{active:r==="executivo",icon:e.jsx(r0,{className:"w-4 h-4"}),label:"Executivo",onClick:()=>o("executivo")}):null,w.variant!=="compact"&&j.allowedTabs.includes("comercial")?e.jsx(ou,{active:r==="comercial",icon:e.jsx(gu,{className:"w-4 h-4"}),label:"Comercial",onClick:()=>o("comercial")}):null,w.variant!=="compact"&&j.allowedTabs.includes("operacoes")?e.jsx(ou,{active:r==="operacoes",icon:e.jsx(KE,{className:"w-4 h-4"}),label:"Operaes",onClick:()=>o("operacoes")}):null,w.variant!=="compact"&&j.allowedTabs.includes("financeiro")?e.jsx(ou,{active:r==="financeiro",icon:e.jsx(Fu,{className:"w-4 h-4"}),label:"Financeiro",onClick:()=>o("financeiro")}):null,w.variant!=="compact"&&j.allowedTabs.includes("inventario")?e.jsx(ou,{active:r==="inventario",icon:e.jsx(Wo,{className:"w-4 h-4"}),label:"Inventrio",onClick:()=>o("inventario")}):null]})]}),r==="executivo"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Receita reconhecida",value:xe?cs(xe.revenueRecognizedCents):void 0,delta:xe?.trends.revenue.deltaPercent,spark:xe?.trends.revenue.points,loading:In,onClick:()=>rt("Receita reconhecida","revenueRecognized","BACKEND: /dashboard/revenue/recognized")}),e.jsx(fn,{label:"A faturar",value:xe?cs(xe.revenueToInvoiceCents):void 0,helper:"Forecast simplificado (mock)",loading:In,onClick:()=>rt("A faturar","revenueToInvoice","BACKEND: /dashboard/revenue/to-invoice")}),e.jsx(fn,{label:"Ocupao",value:xe?`${xe.occupancyPercent}%`:void 0,delta:xe?.trends.occupancy.deltaPercent,spark:xe?.trends.occupancy.points,loading:In,onClick:()=>rt("Ocupao","occupancy","BACKEND: /dashboard/occupancy")}),e.jsx(fn,{label:"Inadimplncia",value:xe?cs(xe.receivablesOverdueCents):void 0,helper:"Aging (mock)",loading:In,onClick:()=>rt("Inadimplncia","receivablesOverdue","BACKEND: /dashboard/receivables/aging")})]}),e.jsx(or,{id:"dash-widget-alerts",title:"Ateno hoje",subtitle:"Alertas inteligentes (mock)  filtrados pela busca",loading:We.status==="loading"&&!Ne,error:un("Falha ao carregar alertas",We),empty:Be.length===0&&We.status==="ready",emptyTitle:"Sem alertas",emptyDescription:xs("Nada para destacar com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>We.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-alerts","Ateno hoje"),children:"Exportar PDF"})]}),children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:Be.map(le=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(G6,{severity:le.severity}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:le.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:le.description})]}),e.jsx(qh,{className:"w-4 h-4 text-gray-400"})]}),le.ctaLabel&&le.ctaPage?e.jsx(K,{variant:"outline",className:"w-full mt-3 h-9",onClick:()=>t(le.ctaPage),children:le.ctaLabel}):null]},le.id))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(or,{id:"dash-widget-revenue-trend",title:"Tendncia de Receita",subtitle:`Srie (${nt.source})`,loading:nt.status==="loading"&&!He,error:un("Falha ao carregar srie",nt),empty:ht.length===0&&nt.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("No h pontos para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>nt.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Bj("tendencia_receita",ht),children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-revenue-trend","Tendncia de Receita"),children:"Exportar PDF"})]}),children:ht.length>0?e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:cs(ht[ht.length-1].valueCents)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ltimo ponto: ",Yr(ht[ht.length-1].date)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.revenueTimeseries,"?",G]})]}),e.jsx($g,{points:zj(ht)})]}):e.jsx("div",{className:"h-40 border border-dashed border-gray-200 rounded-lg flex items-center justify-center text-sm text-gray-500",children:"Srie sem dados"})}),e.jsx(or,{id:"dash-widget-top-clients",title:"Top Clientes",subtitle:`Ranking (${It.source})`,loading:It.status==="loading"&&!Xe,error:un("Falha ao carregar ranking",It),empty:Ps.length===0&&It.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("Nenhum cliente encontrado com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>It.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{const le=Ps.map(De=>({id:De.id,title:De.name,subtitle:`${De.city||""}  Campanhas: ${De.campaignsCount}`.trim(),status:"",amountCents:De.amountCents}));wl("top_clientes",le)},children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-top-clients","Top Clientes"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Top Clientes","topClients",`BACKEND: ${es.topClients}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Ps.slice(0,5).map((le,De)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[De+1,". ",le.name]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[le.city?`${le.city}  `:"","Campanhas: ",le.campaignsCount,typeof le.averageTicketCents=="number"?`  Ticket: ${cs(le.averageTicketCents)}`:""]})]}),e.jsx("span",{className:"text-sm text-gray-700",children:cs(le.amountCents)})]},le.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.topClients,"?",G]})]})})]})]}):null,r==="comercial"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Propostas (perodo)",value:de?String(de.proposalsTotal):void 0,delta:xe?.trends.proposals.deltaPercent,spark:xe?.trends.proposals.points,loading:Ki,onClick:()=>rt("Propostas","proposalsTotal","BACKEND: /dashboard/proposals")}),e.jsx(fn,{label:"Taxa de aprovao",value:de?`${de.approvalRatePercent}%`:void 0,helper:`BACKEND: ${es.commercialSummary}?${G}`,loading:Ki}),e.jsx(fn,{label:"Ciclo mdio",value:de?`${de.averageDaysToClose} dias`:Ve?`${Ve.averageDaysToClose} dias`:void 0,helper:`BACKEND: ${es.commercialSummary}?${G}`,loading:Ki&&Yo}),e.jsx(fn,{label:"Campanhas ativas",value:xe?String(xe.campaignsActiveCount):void 0,helper:xe?`Total: ${cs(xe.campaignsActiveAmountCents)}`:"",loading:In,onClick:()=>rt("Campanhas ativas","campaignsActive","BACKEND: /dashboard/campaigns/active")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(or,{id:"dash-widget-funnel",title:"Funil comercial",subtitle:`Pipeline por etapa (${ae.source})`,loading:Yo,error:un("Falha ao carregar funil",ae),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>ae.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{if(!Ve)return;const le=Ve.stages.map(De=>({id:De.key,title:De.label,subtitle:`Qtd: ${De.count}`,status:"",amountCents:De.amountCents}));wl("funil_comercial",le)},children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-funnel","Funil comercial"),children:"Exportar PDF"})]}),children:Ve?e.jsxs("div",{className:"space-y-4",children:[Ve.stages.map(le=>{const De=Math.max(...Ve.stages.map(bs=>bs.count),1),qt=Math.round(le.count/De*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:le.label}),e.jsx("p",{className:"text-sm text-gray-900",children:le.count})]}),e.jsx("div",{className:"w-full h-2 rounded bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-gray-300",style:{width:`${qt}%`}})}),le.amountCents>0?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:cs(le.amountCents)}):null]},le.key)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-4 backend-hint",children:["BACKEND: ",es.funnel,"?",G]})]}):null}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(or,{id:"dash-widget-stalled-proposals",title:"Propostas paradas",subtitle:`Aes rpidas (${oe.source})`,loading:oe.status==="loading"&&!dt,error:un("Falha ao carregar lista",oe),empty:Ct.length===0&&oe.status==="ready",emptyTitle:"Nada aqui",emptyDescription:xs("Nenhuma proposta parou com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>oe.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{const le=Ct.map(De=>({id:De.id,title:De.title,subtitle:`${De.client}  ${De.daysWithoutUpdate} dias sem atualizao`,status:"",amountCents:De.amountCents}));wl("propostas_paradas",le)},children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-stalled-proposals","Propostas paradas"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Propostas paradas","stalledProposals",`BACKEND: ${es.stalledProposals}?${G}`),children:"Ver todas"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Ct.slice(0,5).map(le=>e.jsx("button",{type:"button",className:"w-full text-left border border-gray-200 rounded-lg p-3 hover:bg-gray-50",onClick:()=>t("proposals"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:le.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[le.client,"  ",le.daysWithoutUpdate," dias sem atualizao"]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:cs(le.amountCents)})]})},le.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.stalledProposals,"?",G]})]})}),e.jsx(or,{id:"dash-widget-seller-ranking",title:"Ranking de vendedores",subtitle:`Performance (${Pe.source})`,loading:Pe.status==="loading"&&!kt,error:un("Falha ao carregar ranking",Pe),empty:Mt.length===0&&Pe.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("Nenhum vendedor encontrado com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Pe.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{const le=Mt.map(De=>({id:De.id,title:De.name,subtitle:`${De.city||""}  Ganhas: ${De.dealsWon}  Pipeline: ${De.dealsInPipeline}`.trim(),status:"",amountCents:De.amountWonCents}));wl("ranking_vendedores",le)},children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-seller-ranking","Ranking de vendedores"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Ranking de vendedores","sellerRanking",`BACKEND: ${es.sellerRanking}?${G}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Mt.slice(0,6).map((le,De)=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[De+1,". ",le.name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[le.city?`${le.city}  `:"","Ganhas: ",le.dealsWon,"  Pipeline: ",le.dealsInPipeline]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-700",children:cs(le.amountWonCents)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Pipeline: ",cs(le.amountPipelineCents)]})]})]},le.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.sellerRanking,"?",G]})]})})]})]})]}):null,r==="operacoes"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Aguardando material",value:String(2+Cn(n.id)%7),helper:"SLA (mock)",onClick:()=>rt("Aguardando material","awaitingMaterial","BACKEND: /dashboard/campaigns/awaiting-material")}),e.jsx(fn,{label:"Em instalao",value:String(1+Cn(n.id+"inst")%5),helper:"BACKEND: /dashboard/ops/installation"}),e.jsx(fn,{label:"DOOH Uptime",value:`${92+Cn(n.id+"upt")%7}%`,helper:"BACKEND: /dashboard/dooh/uptime"}),e.jsx(fn,{label:"Falhas / Offline",value:String(Cn(n.id+"off")%9),helper:"BACKEND: /dashboard/dooh/offline"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(or,{id:"dash-widget-ooh-ops",title:"Status operacional (OOH)",subtitle:`Checklist / SLA / pendncias (${J.source})`,loading:J.status==="loading"&&!fe,error:un("Falha ao carregar status operacional",J),empty:Yt.length===0&&J.status==="ready",emptyTitle:"Sem pendncias",emptyDescription:xs("Nada em aberto com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>J.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{const le=Yt.map(De=>({id:De.id,title:De.title,subtitle:`${De.city||""}${De.dueDate?`  At: ${Yr(De.dueDate)}`:""}`.trim(),status:De.status}));wl("ooh_status_operacional",le)},children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-ooh-ops","Status operacional (OOH)"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Status operacional (OOH)","oohOps",`BACKEND: ${es.oohOpsSummary}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Yt.slice(0,6).map(le=>{const De=le.status==="OK"?"bg-green-100 text-green-700":le.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-700";return e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:le.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[le.city?`${le.city}  `:"",le.dueDate?`At: ${Yr(le.dueDate)}`:""]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${De}`,children:le.status})]},le.id)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.oohOpsSummary,"?",G]})]})}),e.jsx(or,{id:"dash-widget-pop",title:"Proof-of-play (DOOH)",subtitle:`Relatrio POP (${ve.source})`,loading:ve.status==="loading"&&!Ye,error:un("Falha ao carregar POP",ve),empty:Gs.length===0&&ve.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("Nenhum registro POP com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>ve.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{const le=Gs.map(De=>({id:De.id,title:De.screen,subtitle:`${De.city||""}${De.lastSeen?`  ${Yr(De.lastSeen)}`:""}`.trim(),status:`${De.uptimePercent}%`}));wl("proof_of_play",le)},children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-pop","Proof-of-play (DOOH)"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Proof-of-play (DOOH)","proofOfPlay",`BACKEND: ${es.doohProofOfPlaySummary}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Gs.slice(0,6).map(le=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:le.screen}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[le.city?`${le.city}  `:"","Plays: ",le.plays,"  ltimo: ",le.lastSeen?Yr(le.lastSeen):""]})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:[le.uptimePercent,"%"]})]},le.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.doohProofOfPlaySummary,"?",G]})]})})]})]}):null,r==="financeiro"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Contas a receber",value:xe?cs(xe.revenueToInvoiceCents+9e5):void 0,helper:"Forecast (mock)",loading:In,onClick:()=>rt("Contas a receber","receivablesOpen","BACKEND: /dashboard/receivables/open")}),e.jsx(fn,{label:"A vencer (7 dias)",value:xe?cs(xe.revenueToInvoiceCents*.35):void 0,helper:"BACKEND: /dashboard/receivables/due-7d",loading:In}),e.jsx(fn,{label:"Vencidas",value:xe?cs(xe.receivablesOverdueCents):void 0,helper:"Aging (mock)",loading:In,onClick:()=>rt("Vencidas","receivablesOverdue","BACKEND: /dashboard/receivables/overdue")}),e.jsx(fn,{label:"Recebido no ms",value:xe?cs(xe.revenueRecognizedCents*.42):void 0,helper:"BACKEND: /dashboard/cashflow/received-this-month",loading:In})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(or,{id:"dash-widget-cashflow",title:"Fluxo de caixa",subtitle:`Srie (${ct.source})`,loading:ct.status==="loading"&&!gt,error:un("Falha ao carregar srie",ct),empty:Ft.length===0&&ct.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("No h pontos para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>ct.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Bj("fluxo_caixa",Ft),children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-cashflow","Fluxo de caixa"),children:"Exportar PDF"})]}),children:Ft.length>0?e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:cs(Ft[Ft.length-1].valueCents)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ltimo ponto: ",Yr(Ft[Ft.length-1].date)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.cashflowTimeseries,"?",G]})]}),e.jsx($g,{points:zj(Ft)})]}):e.jsx("div",{className:"h-40 border border-dashed border-gray-200 rounded-lg flex items-center justify-center text-sm text-gray-500",children:"Srie sem dados"})}),e.jsx(or,{id:"dash-widget-aging",title:"Aging",subtitle:`Distribuio por faixa (${Lt.source})`,loading:Lt.status==="loading"&&!mt,error:un("Falha ao carregar aging",Lt),empty:(mt?.buckets?.length||0)===0&&Lt.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("No h faixas de aging para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Lt.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>h6("aging",mt?.buckets||[],mt?.totalCents),children:"Exportar CSV"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-aging","Aging"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Aging","aging",`BACKEND: ${es.receivablesAgingSummary}`),children:"Ver lista"})]}),children:e.jsxs("div",{className:"space-y-3",children:[(mt?.buckets||[]).map(le=>{const De=Math.max(...(mt?.buckets||[]).map(bs=>bs.amountCents),1),qt=Math.round(le.amountCents/De*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:le.label}),e.jsx("p",{className:"text-sm text-gray-900",children:cs(le.amountCents)})]}),e.jsx("div",{className:"w-full h-2 rounded bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-gray-300",style:{width:`${qt}%`}})})]},le.label)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.receivablesAgingSummary,"?",G]})]})})]})]}):null,r==="inventario"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Inventrio total",value:xe?String(xe.inventoryTotalPoints):void 0,helper:"BACKEND: /dashboard/inventory/summary",loading:In,onClick:()=>t("inventory")}),e.jsx(fn,{label:"Disponveis",value:xe?String(Math.round(xe.inventoryTotalPoints*(1-xe.occupancyPercent/100))):void 0,helper:xe?`Ocupao: ${xe.occupancyPercent}%`:"",loading:In}),e.jsx(fn,{label:"Clientes ativos",value:xe?String(xe.clientsActiveCount):void 0,helper:xe?`Ticket mdio: ${cs(xe.averageTicketCents)}`:"",loading:In}),e.jsx(fn,{label:"Campanhas ativas",value:xe?String(xe.campaignsActiveCount):void 0,helper:xe?`Total: ${cs(xe.campaignsActiveAmountCents)}`:"",loading:In})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(or,{id:"dash-widget-inventory-map",title:"Mapa e ocupao",subtitle:`Pins (${wt.source})`,loading:wt.status==="loading"&&!pe,error:un("Falha ao carregar mapa",wt),empty:ms.length===0&&wt.status==="ready",emptyTitle:"Sem pontos",emptyDescription:xs("Nenhum ponto encontrado para os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>wt.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>ne(!0),children:"Compartilhar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-inventory-map","Mapa e ocupao"),children:"Exportar PDF"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-xs backend-hint",children:["BACKEND: ",es.inventoryMap,"?",G]}),e.jsx(eL,{pins:ms,height:320,onPinClick:le=>rt(`Ponto  ${le.label}`,"inventoryPin","BACKEND: /dashboard/inventory/pin",{pinId:le.id,region:le.region||le.city||void 0,line:le.line||void 0})}),e.jsx(J6,{pins:ms,onSelect:(le,De)=>rt(`Ocupao  ${le} / ${De}`,"inventoryRegionLine","BACKEND: /dashboard/inventory/map/heat",{region:le,line:De})})]})}),e.jsx(or,{id:"dash-widget-inventory-ranking",title:"Ranking de pontos",subtitle:`Top 5 (${pt.source})`,loading:pt.status==="loading"&&!$e,error:un("Falha ao carregar ranking",pt),empty:hs.length===0&&pt.status==="ready",emptyTitle:"Sem dados",emptyDescription:xs("Nenhum ponto ranqueado para os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>pt.refetch(),children:"Recarregar"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>Fe("dash-widget-inventory-ranking","Ranking de pontos"),children:"Exportar PDF"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>rt("Ranking de pontos","inventoryRanking","BACKEND: /dashboard/inventory/ranking"),children:"Ver lista"})]}),children:e.jsxs("div",{className:"space-y-3",children:[hs.slice(0,5).map((le,De)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[De+1,". ",le.label]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[le.city||"","  ",le.activeCampaigns," campanhas  ",cs(le.revenueCents)]})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:[Math.round(le.occupancyPercent),"%"]})]},le.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",es.inventoryRanking,"?",G]})]})})]})]}):null,ee.open?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>V(le=>({...le,open:!1}))}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-[520px] bg-white shadow-xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:ee.title}),ee.hint?e.jsx("p",{className:"text-xs text-gray-500 mt-1 backend-hint",children:ee.hint}):null]}),e.jsx("button",{type:"button",className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>V(le=>({...le,open:!1})),children:e.jsx(Ca,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Ce,{value:ee.search,onChange:le=>V(De=>({...De,search:le.target.value})),placeholder:"Filtrar itens...",className:"h-9"}),e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>{V(le=>({...le,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:"loading",errorMessage:void 0})),tt.refetch()},disabled:!ee.key||ee.status==="loading",children:"Recarregar"})]}),(()=>{const le=lr(ee.search),De=le?ee.rows.filter(Zt=>Jr(`${Zt.id} ${Zt.title} ${Zt.subtitle||""} ${Zt.status||""}`,le)):ee.rows,qt=ee.status==="loading"&&ee.rows.length===0,bs=ee.status==="loading"&&ee.rows.length>0;return e.jsx(e.Fragment,{children:qt?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Bi,{className:"h-5 w-2/3"}),e.jsx(Bi,{className:"h-5 w-1/2"}),e.jsx(Bi,{className:"h-24 w-full"}),e.jsx(Bi,{className:"h-24 w-full"})]}):ee.status==="error"?e.jsx(SC,{title:"Falha ao carregar detalhes",description:ee.errorMessage}):De.length===0?e.jsx(CC,{title:"Sem itens",description:"Nada encontrado para este recorte (ou filtro local)."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[De.length," de ",ee.rows.length," itens carregados",ee.hasMore?"  mais disponvel":""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Fonte: ",tt.source]})]}),(()=>{const Zt=Qx(ee.key),Zs=Zt.columns,Ut=ee.sortBy,mn=ee.sortDir,rs=St=>{if(!St.sortable)return;const Ts=St.sortKey||St.id,ft=Ut===Ts&&mn==="asc"?"desc":"asc";V(ds=>({...ds,sortBy:Ts,sortDir:ft,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:"loading",errorMessage:void 0}))};return e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[Zs.map(St=>{const Ts=(Ut||"")===(St.sortKey||St.id),ft=St.sortable?Ts?mn==="asc"?e.jsx(yw,{className:"w-4 h-4"}):e.jsx(Ru,{className:"w-4 h-4"}):e.jsx(BE,{className:"w-4 h-4 opacity-60"}):null,ds=e.jsxs("span",{className:"inline-flex items-center gap-1",children:[St.label,ft]});return e.jsx("th",{className:["px-3 py-2 text-xs font-medium text-gray-600 whitespace-nowrap",St.align==="right"?"text-right":"text-left"].join(" "),children:St.sortable?e.jsx("button",{type:"button",className:"hover:text-gray-900",onClick:()=>rs(St),children:ds}):ds},St.id)}),Zt.rowAction?e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-600 text-right whitespace-nowrap",children:"Aes"}):null]})}),e.jsx("tbody",{children:De.map(St=>e.jsxs("tr",{className:"border-t border-gray-200",children:[Zs.map(Ts=>{const ft=Ts.get(St),ds=Ts.render?Ts.render(ft,St):e.jsx("span",{children:gn(ft)});return e.jsx("td",{className:["px-3 py-2 text-sm text-gray-800 whitespace-nowrap",Ts.align==="right"?"text-right":"text-left"].join(" "),children:ds},Ts.id)}),Zt.rowAction?e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx(K,{variant:"outline",className:"h-8",onClick:()=>t(Zt.rowAction.page),children:Zt.rowAction.label})}):null]},St.id))})]})})})(),ee.hasMore&&ee.nextCursor?e.jsx(K,{variant:"outline",className:"w-full h-9",onClick:()=>V(Zt=>({...Zt,cursor:Zt.nextCursor,status:"loading",errorMessage:void 0})),disabled:ee.status==="loading",children:bs?"Carregando...":"Carregar mais"}):null,e.jsx(K,{variant:"outline",className:"w-full h-9",onClick:()=>{const Zt=Qx(ee.key);wl(ee.title,De,Zt.columns)},disabled:De.length===0||ee.status==="loading",children:"Exportar CSV (mock)"})]})})})()]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Este drawer  mock. Na integrao, ele abrir listas reais filtradas (com paginao/ordenao)."})})]})]}):null,e.jsx(_s,{open:X,onOpenChange:I,children:e.jsxs(As,{className:"sm:max-w-md",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:B==="update"?"Atualizar viso":"Salvar viso"}),e.jsx(dr,{children:"Salva a aba atual, filtros globais e um layout (MVP) como um preset. No MVP fica no localStorage; depois ser persistido no backend."})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Nome da viso"}),e.jsx(Ce,{value:ue,onChange:le=>Y(le.target.value),className:"h-9"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Oi,{label:"Aba",value:Bt(r)}),e.jsx(Oi,{label:"Perodo",value:u.datePreset.toUpperCase()}),u.city?e.jsx(Oi,{label:"Cidade",value:u.city}):null,u.query?e.jsx(Oi,{label:"Busca",value:u.query}):null,e.jsx(Oi,{label:"Tipo",value:u.mediaType})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(K,{variant:"outline",className:"h-9",onClick:()=>I(!1),children:"Cancelar"}),e.jsx(K,{className:"h-9",onClick:Cs,children:B==="update"?"Atualizar":"Salvar"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"MVP: localStorage. BACKEND SWAP POINT: GET/POST/DELETE /dashboard/views (por usurio/empresa)."})]})]})}),e.jsx(_s,{open:E,onOpenChange:_,children:e.jsxs(As,{className:"max-w-2xl",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Checklist de paridade com o backend"}),e.jsx(dr,{children:"Use esta lista para validar se os nmeros do Dashboard batem com o backend antes do rollout completo."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Dica: execute por empresa e compare os KPIs com relatrios/queries oficiais. Marque os itens conforme aprovar."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"h-8 text-xs",onClick:Ee,children:"Copiar checklist"}),e.jsx(K,{variant:"outline",className:"h-8 text-xs",onClick:()=>{H6(M,F),T({}),ye.success("Checklist resetado")},children:"Reset"})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-md divide-y",children:wC.map(le=>e.jsxs("div",{className:"p-3 flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",className:"mt-1",checked:!!k[le.id],onChange:()=>T(De=>V6(M,F,De,le.id))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:le.title}),e.jsx("p",{className:"text-xs text-gray-500",children:le.description}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Rota: ",e.jsx("span",{className:"font-medium",children:le.route}),"  Campos: ",le.fields.join(", ")]})]})]},le.id))})]})]})}),e.jsx(_s,{open:U,onOpenChange:ne,children:e.jsxs(As,{className:"sm:max-w-md",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Compartilhar mapa de pontos"}),e.jsx(dr,{children:"Compartilhe o link pblico do mapa de pontos de mdia da sua empresa. Qualquer pessoa com o link poder visualizar os pontos disponveis."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"grid flex-1 gap-2",children:e.jsx(Ce,{id:"map-url",value:Es,readOnly:!0,className:"h-9"})}),e.jsx(K,{type:"button",size:"sm",className:"px-3",onClick:fs,children:Q?e.jsxs(e.Fragment,{children:[e.jsx(wa,{className:"h-4 w-4 mr-1"}),"Copiado"]}):e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"h-4 w-4 mr-1"}),"Copiar link"]})})]})]})})]})})}var Jx="rovingFocusGroup.onEntryFocus",tL={bubbles:!1,cancelable:!0},Hu="RovingFocusGroup",[zg,AC,sL]=y0(Hu),[nL,xd]=Pa(Hu,[sL]),[aL,rL]=nL(Hu),PC=m.forwardRef((t,s)=>e.jsx(zg.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(zg.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(iL,{...t,ref:s})})}));PC.displayName=Hu;var iL=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:f,onEntryFocus:v,preventScrollOnEntryFocus:x=!1,...g}=t,j=m.useRef(null),w=ns(s,j),N=od(c),[C,S]=hr({prop:u,defaultProp:h??null,onChange:f,caller:Hu}),[E,_]=m.useState(!1),k=Fn(v),T=AC(n),M=m.useRef(!1),[F,O]=m.useState(0);return m.useEffect(()=>{const Z=j.current;if(Z)return Z.addEventListener(Jx,k),()=>Z.removeEventListener(Jx,k)},[k]),e.jsx(aL,{scope:n,orientation:r,dir:N,loop:o,currentTabStopId:C,onItemFocus:m.useCallback(Z=>S(Z),[S]),onItemShiftTab:m.useCallback(()=>_(!0),[]),onFocusableItemAdd:m.useCallback(()=>O(Z=>Z+1),[]),onFocusableItemRemove:m.useCallback(()=>O(Z=>Z-1),[]),children:e.jsx(Tt.div,{tabIndex:E||F===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...t.style},onMouseDown:lt(t.onMouseDown,()=>{M.current=!0}),onFocus:lt(t.onFocus,Z=>{const q=!M.current;if(Z.target===Z.currentTarget&&q&&!E){const $=new CustomEvent(Jx,tL);if(Z.currentTarget.dispatchEvent($),!$.defaultPrevented){const X=T().filter(Y=>Y.focusable),I=X.find(Y=>Y.active),B=X.find(Y=>Y.id===C),ue=[I,B,...X].filter(Boolean).map(Y=>Y.ref.current);TC(ue,x)}}M.current=!1}),onBlur:lt(t.onBlur,()=>_(!1))})})}),EC="RovingFocusGroupItem",kC=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:c,children:u,...h}=t,f=Ir(),v=c||f,x=rL(EC,n),g=x.currentTabStopId===v,j=AC(n),{onFocusableItemAdd:w,onFocusableItemRemove:N,currentTabStopId:C}=x;return m.useEffect(()=>{if(r)return w(),()=>N()},[r,w,N]),e.jsx(zg.ItemSlot,{scope:n,id:v,focusable:r,active:o,children:e.jsx(Tt.span,{tabIndex:g?0:-1,"data-orientation":x.orientation,...h,ref:s,onMouseDown:lt(t.onMouseDown,S=>{r?x.onItemFocus(v):S.preventDefault()}),onFocus:lt(t.onFocus,()=>x.onItemFocus(v)),onKeyDown:lt(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){x.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=cL(S,x.orientation,x.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let k=j().filter(T=>T.focusable).map(T=>T.ref.current);if(E==="last")k.reverse();else if(E==="prev"||E==="next"){E==="prev"&&k.reverse();const T=k.indexOf(S.currentTarget);k=x.loop?dL(k,T+1):k.slice(T+1)}setTimeout(()=>TC(k))}}),children:typeof u=="function"?u({isCurrentTabStop:g,hasTabStop:C!=null}):u})})});kC.displayName=EC;var oL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lL(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cL(t,s,n){const r=lL(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return oL[r]}function TC(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function dL(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var tv=PC,sv=kC;function uL(t){const s=mL(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(pL);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function mL(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=xL(o),h=fL(c,o.props);return o.type!==m.Fragment&&(h.ref=r?qi(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var hL=Symbol("radix.slottable");function pL(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===hL}function fL(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function xL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Bg=["Enter"," "],gL=["ArrowDown","PageUp","Home"],DC=["ArrowUp","PageDown","End"],vL=[...gL,...DC],yL={ltr:[...Bg,"ArrowRight"],rtl:[...Bg,"ArrowLeft"]},bL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qu="Menu",[Pu,jL,NL]=y0(qu),[Gl,IC]=Pa(qu,[NL,Ap,xd]),Wp=Ap(),MC=xd(),[wL,Zl]=Gl(qu),[CL,Wu]=Gl(qu),RC=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:o,onOpenChange:c,modal:u=!0}=t,h=Wp(s),[f,v]=m.useState(null),x=m.useRef(!1),g=Fn(c),j=od(o);return m.useEffect(()=>{const w=()=>{x.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>x.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),e.jsx(C1,{...h,children:e.jsx(wL,{scope:s,open:n,onOpenChange:g,content:f,onContentChange:v,children:e.jsx(CL,{scope:s,onClose:m.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:x,dir:j,modal:u,children:r})})})};RC.displayName=qu;var SL="MenuAnchor",nv=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,o=Wp(n);return e.jsx(S1,{...o,...r,ref:s})});nv.displayName=SL;var av="MenuPortal",[_L,OC]=Gl(av,{forceMount:void 0}),LC=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:o}=t,c=Zl(av,s);return e.jsx(_L,{scope:s,forceMount:n,children:e.jsx(oa,{present:n||c.open,children:e.jsx(Pp,{asChild:!0,container:o,children:r})})})};LC.displayName=av;var ur="MenuContent",[AL,rv]=Gl(ur),FC=m.forwardRef((t,s)=>{const n=OC(ur,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,c=Zl(ur,t.__scopeMenu),u=Wu(ur,t.__scopeMenu);return e.jsx(Pu.Provider,{scope:t.__scopeMenu,children:e.jsx(oa,{present:r||c.open,children:e.jsx(Pu.Slot,{scope:t.__scopeMenu,children:u.modal?e.jsx(PL,{...o,ref:s}):e.jsx(EL,{...o,ref:s})})})})}),PL=m.forwardRef((t,s)=>{const n=Zl(ur,t.__scopeMenu),r=m.useRef(null),o=ns(s,r);return m.useEffect(()=>{const c=r.current;if(c)return T0(c)},[]),e.jsx(iv,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:lt(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),EL=m.forwardRef((t,s)=>{const n=Zl(ur,t.__scopeMenu);return e.jsx(iv,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),kL=uL("MenuContent.ScrollLock"),iv=m.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:h,onEntryFocus:f,onEscapeKeyDown:v,onPointerDownOutside:x,onFocusOutside:g,onInteractOutside:j,onDismiss:w,disableOutsideScroll:N,...C}=t,S=Zl(ur,n),E=Wu(ur,n),_=Wp(n),k=MC(n),T=jL(n),[M,F]=m.useState(null),O=m.useRef(null),Z=ns(s,O,S.onContentChange),q=m.useRef(0),$=m.useRef(""),X=m.useRef(0),I=m.useRef(null),B=m.useRef("right"),te=m.useRef(0),ue=N?kp:m.Fragment,Y=N?{as:kL,allowPinchZoom:!0}:void 0,ce=ne=>{const Q=$.current+ne,z=T().filter(ae=>!ae.disabled),se=document.activeElement,G=z.find(ae=>ae.ref.current===se)?.textValue,ee=z.map(ae=>ae.textValue),V=UL(ee,Q,G),re=z.find(ae=>ae.textValue===V)?.ref.current;(function ae(me){$.current=me,window.clearTimeout(q.current),me!==""&&(q.current=window.setTimeout(()=>ae(""),1e3))})(Q),re&&setTimeout(()=>re.focus())};m.useEffect(()=>()=>window.clearTimeout(q.current),[]),b0();const U=m.useCallback(ne=>B.current===I.current?.side&&HL(ne,I.current?.area),[]);return e.jsx(AL,{scope:n,searchRef:$,onItemEnter:m.useCallback(ne=>{U(ne)&&ne.preventDefault()},[U]),onItemLeave:m.useCallback(ne=>{U(ne)||(O.current?.focus(),F(null))},[U]),onTriggerLeave:m.useCallback(ne=>{U(ne)&&ne.preventDefault()},[U]),pointerGraceTimerRef:X,onPointerGraceIntentChange:m.useCallback(ne=>{I.current=ne},[]),children:e.jsx(ue,{...Y,children:e.jsx(Np,{asChild:!0,trapped:o,onMountAutoFocus:lt(c,ne=>{ne.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:e.jsx(jp,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:v,onPointerDownOutside:x,onFocusOutside:g,onInteractOutside:j,onDismiss:w,children:e.jsx(tv,{asChild:!0,...k,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:F,onEntryFocus:lt(f,ne=>{E.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(_1,{role:"menu","aria-orientation":"vertical","data-state":eS(S.open),"data-radix-menu-content":"",dir:E.dir,..._,...C,ref:Z,style:{outline:"none",...C.style},onKeyDown:lt(C.onKeyDown,ne=>{const z=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,se=ne.ctrlKey||ne.altKey||ne.metaKey,G=ne.key.length===1;z&&(ne.key==="Tab"&&ne.preventDefault(),!se&&G&&ce(ne.key));const ee=O.current;if(ne.target!==ee||!vL.includes(ne.key))return;ne.preventDefault();const re=T().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);DC.includes(ne.key)&&re.reverse(),zL(re)}),onBlur:lt(t.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(q.current),$.current="")}),onPointerMove:lt(t.onPointerMove,Eu(ne=>{const Q=ne.target,z=te.current!==ne.clientX;if(ne.currentTarget.contains(Q)&&z){const se=ne.clientX>te.current?"right":"left";B.current=se,te.current=ne.clientX}}))})})})})})})});FC.displayName=ur;var TL="MenuGroup",ov=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Tt.div,{role:"group",...r,ref:s})});ov.displayName=TL;var DL="MenuLabel",$C=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Tt.div,{...r,ref:s})});$C.displayName=DL;var sp="MenuItem",Gj="menu.itemSelect",Gp=m.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...o}=t,c=m.useRef(null),u=Wu(sp,t.__scopeMenu),h=rv(sp,t.__scopeMenu),f=ns(s,c),v=m.useRef(!1),x=()=>{const g=c.current;if(!n&&g){const j=new CustomEvent(Gj,{bubbles:!0,cancelable:!0});g.addEventListener(Gj,w=>r?.(w),{once:!0}),Jw(g,j),j.defaultPrevented?v.current=!1:u.onClose()}};return e.jsx(zC,{...o,ref:f,disabled:n,onClick:lt(t.onClick,x),onPointerDown:g=>{t.onPointerDown?.(g),v.current=!0},onPointerUp:lt(t.onPointerUp,g=>{v.current||g.currentTarget?.click()}),onKeyDown:lt(t.onKeyDown,g=>{const j=h.searchRef.current!=="";n||j&&g.key===" "||Bg.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Gp.displayName=sp;var zC=m.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...c}=t,u=rv(sp,n),h=MC(n),f=m.useRef(null),v=ns(s,f),[x,g]=m.useState(!1),[j,w]=m.useState("");return m.useEffect(()=>{const N=f.current;N&&w((N.textContent??"").trim())},[c.children]),e.jsx(Pu.ItemSlot,{scope:n,disabled:r,textValue:o??j,children:e.jsx(sv,{asChild:!0,...h,focusable:!r,children:e.jsx(Tt.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:v,onPointerMove:lt(t.onPointerMove,Eu(N=>{r?u.onItemLeave(N):(u.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:lt(t.onPointerLeave,Eu(N=>u.onItemLeave(N))),onFocus:lt(t.onFocus,()=>g(!0)),onBlur:lt(t.onBlur,()=>g(!1))})})})}),IL="MenuCheckboxItem",BC=m.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return e.jsx(WC,{scope:t.__scopeMenu,checked:n,children:e.jsx(Gp,{role:"menuitemcheckbox","aria-checked":np(n)?"mixed":n,...o,ref:s,"data-state":cv(n),onSelect:lt(o.onSelect,()=>r?.(np(n)?!0:!n),{checkForDefaultPrevented:!1})})})});BC.displayName=IL;var UC="MenuRadioGroup",[ML,RL]=Gl(UC,{value:void 0,onValueChange:()=>{}}),VC=m.forwardRef((t,s)=>{const{value:n,onValueChange:r,...o}=t,c=Fn(r);return e.jsx(ML,{scope:t.__scopeMenu,value:n,onValueChange:c,children:e.jsx(ov,{...o,ref:s})})});VC.displayName=UC;var HC="MenuRadioItem",qC=m.forwardRef((t,s)=>{const{value:n,...r}=t,o=RL(HC,t.__scopeMenu),c=n===o.value;return e.jsx(WC,{scope:t.__scopeMenu,checked:c,children:e.jsx(Gp,{role:"menuitemradio","aria-checked":c,...r,ref:s,"data-state":cv(c),onSelect:lt(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});qC.displayName=HC;var lv="MenuItemIndicator",[WC,OL]=Gl(lv,{checked:!1}),GC=m.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...o}=t,c=OL(lv,n);return e.jsx(oa,{present:r||np(c.checked)||c.checked===!0,children:e.jsx(Tt.span,{...o,ref:s,"data-state":cv(c.checked)})})});GC.displayName=lv;var LL="MenuSeparator",ZC=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Tt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});ZC.displayName=LL;var FL="MenuArrow",KC=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,o=Wp(n);return e.jsx(A1,{...o,...r,ref:s})});KC.displayName=FL;var $L="MenuSub",[b7,QC]=Gl($L),fu="MenuSubTrigger",XC=m.forwardRef((t,s)=>{const n=Zl(fu,t.__scopeMenu),r=Wu(fu,t.__scopeMenu),o=QC(fu,t.__scopeMenu),c=rv(fu,t.__scopeMenu),u=m.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:f}=c,v={__scopeMenu:t.__scopeMenu},x=m.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return m.useEffect(()=>x,[x]),m.useEffect(()=>{const g=h.current;return()=>{window.clearTimeout(g),f(null)}},[h,f]),e.jsx(nv,{asChild:!0,...v,children:e.jsx(zC,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":eS(n.open),...t,ref:qi(s,o.onTriggerChange),onClick:g=>{t.onClick?.(g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:lt(t.onPointerMove,Eu(g=>{c.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!n.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),x()},100))})),onPointerLeave:lt(t.onPointerLeave,Eu(g=>{x();const j=n.content?.getBoundingClientRect();if(j){const w=n.content?.dataset.side,N=w==="right",C=N?-5:5,S=j[N?"left":"right"],E=j[N?"right":"left"];c.onPointerGraceIntentChange({area:[{x:g.clientX+C,y:g.clientY},{x:S,y:j.top},{x:E,y:j.top},{x:E,y:j.bottom},{x:S,y:j.bottom}],side:w}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(g),g.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:lt(t.onKeyDown,g=>{const j=c.searchRef.current!=="";t.disabled||j&&g.key===" "||yL[r.dir].includes(g.key)&&(n.onOpenChange(!0),n.content?.focus(),g.preventDefault())})})})});XC.displayName=fu;var YC="MenuSubContent",JC=m.forwardRef((t,s)=>{const n=OC(ur,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,c=Zl(ur,t.__scopeMenu),u=Wu(ur,t.__scopeMenu),h=QC(YC,t.__scopeMenu),f=m.useRef(null),v=ns(s,f);return e.jsx(Pu.Provider,{scope:t.__scopeMenu,children:e.jsx(oa,{present:r||c.open,children:e.jsx(Pu.Slot,{scope:t.__scopeMenu,children:e.jsx(iv,{id:h.contentId,"aria-labelledby":h.triggerId,...o,ref:v,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{u.isUsingKeyboardRef.current&&f.current?.focus(),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:lt(t.onFocusOutside,x=>{x.target!==h.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:lt(t.onEscapeKeyDown,x=>{u.onClose(),x.preventDefault()}),onKeyDown:lt(t.onKeyDown,x=>{const g=x.currentTarget.contains(x.target),j=bL[u.dir].includes(x.key);g&&j&&(c.onOpenChange(!1),h.trigger?.focus(),x.preventDefault())})})})})})});JC.displayName=YC;function eS(t){return t?"open":"closed"}function np(t){return t==="indeterminate"}function cv(t){return np(t)?"indeterminate":t?"checked":"unchecked"}function zL(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function BL(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function UL(t,s,n){const o=s.length>1&&Array.from(s).every(v=>v===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let u=BL(t,Math.max(c,0));o.length===1&&(u=u.filter(v=>v!==n));const f=u.find(v=>v.toLowerCase().startsWith(o.toLowerCase()));return f!==n?f:void 0}function VL(t,s){const{x:n,y:r}=t;let o=!1;for(let c=0,u=s.length-1;c<s.length;u=c++){const h=s[c],f=s[u],v=h.x,x=h.y,g=f.x,j=f.y;x>r!=j>r&&n<(g-v)*(r-x)/(j-x)+v&&(o=!o)}return o}function HL(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return VL(n,s)}function Eu(t){return s=>s.pointerType==="mouse"?t(s):void 0}var qL=RC,WL=nv,GL=LC,ZL=FC,KL=ov,QL=$C,XL=Gp,YL=BC,JL=VC,e9=qC,t9=GC,s9=ZC,n9=KC,a9=XC,r9=JC,Zp="DropdownMenu",[i9]=Pa(Zp,[IC]),la=IC(),[o9,tS]=i9(Zp),sS=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:o,defaultOpen:c,onOpenChange:u,modal:h=!0}=t,f=la(s),v=m.useRef(null),[x,g]=hr({prop:o,defaultProp:c??!1,onChange:u,caller:Zp});return e.jsx(o9,{scope:s,triggerId:Ir(),triggerRef:v,contentId:Ir(),open:x,onOpenChange:g,onOpenToggle:m.useCallback(()=>g(j=>!j),[g]),modal:h,children:e.jsx(qL,{...f,open:x,onOpenChange:g,dir:r,modal:h,children:n})})};sS.displayName=Zp;var nS="DropdownMenuTrigger",aS=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,c=tS(nS,n),u=la(n);return e.jsx(WL,{asChild:!0,...u,children:e.jsx(Tt.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:qi(s,c.triggerRef),onPointerDown:lt(t.onPointerDown,h=>{!r&&h.button===0&&h.ctrlKey===!1&&(c.onOpenToggle(),c.open||h.preventDefault())}),onKeyDown:lt(t.onKeyDown,h=>{r||(["Enter"," "].includes(h.key)&&c.onOpenToggle(),h.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault())})})})});aS.displayName=nS;var l9="DropdownMenuPortal",rS=t=>{const{__scopeDropdownMenu:s,...n}=t,r=la(s);return e.jsx(GL,{...r,...n})};rS.displayName=l9;var iS="DropdownMenuContent",oS=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=tS(iS,n),c=la(n),u=m.useRef(!1);return e.jsx(ZL,{id:o.contentId,"aria-labelledby":o.triggerId,...c,...r,ref:s,onCloseAutoFocus:lt(t.onCloseAutoFocus,h=>{u.current||o.triggerRef.current?.focus(),u.current=!1,h.preventDefault()}),onInteractOutside:lt(t.onInteractOutside,h=>{const f=h.detail.originalEvent,v=f.button===0&&f.ctrlKey===!0,x=f.button===2||v;(!o.modal||x)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oS.displayName=iS;var c9="DropdownMenuGroup",d9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(KL,{...o,...r,ref:s})});d9.displayName=c9;var u9="DropdownMenuLabel",m9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(QL,{...o,...r,ref:s})});m9.displayName=u9;var h9="DropdownMenuItem",lS=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(XL,{...o,...r,ref:s})});lS.displayName=h9;var p9="DropdownMenuCheckboxItem",f9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(YL,{...o,...r,ref:s})});f9.displayName=p9;var x9="DropdownMenuRadioGroup",g9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(JL,{...o,...r,ref:s})});g9.displayName=x9;var v9="DropdownMenuRadioItem",y9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(e9,{...o,...r,ref:s})});y9.displayName=v9;var b9="DropdownMenuItemIndicator",j9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(t9,{...o,...r,ref:s})});j9.displayName=b9;var N9="DropdownMenuSeparator",w9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(s9,{...o,...r,ref:s})});w9.displayName=N9;var C9="DropdownMenuArrow",S9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(n9,{...o,...r,ref:s})});S9.displayName=C9;var _9="DropdownMenuSubTrigger",A9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(a9,{...o,...r,ref:s})});A9.displayName=_9;var P9="DropdownMenuSubContent",E9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=la(n);return e.jsx(r9,{...o,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});E9.displayName=P9;var k9=sS,T9=aS,D9=rS,I9=oS,M9=lS;function R9({...t}){return e.jsx(k9,{"data-slot":"dropdown-menu",...t})}function O9({...t}){return e.jsx(T9,{"data-slot":"dropdown-menu-trigger",...t})}function L9({className:t,sideOffset:s=4,...n}){return e.jsx(D9,{children:e.jsx(I9,{"data-slot":"dropdown-menu-content",sideOffset:s,className:Nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function $c({className:t,inset:s,variant:n="default",...r}){return e.jsx(M9,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:Nt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}var Kp="Switch",[F9]=Pa(Kp),[$9,z9]=F9(Kp),cS=m.forwardRef((t,s)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:c,required:u,disabled:h,value:f="on",onCheckedChange:v,form:x,...g}=t,[j,w]=m.useState(null),N=ns(s,k=>w(k)),C=m.useRef(!1),S=j?x||!!j.closest("form"):!0,[E,_]=hr({prop:o,defaultProp:c??!1,onChange:v,caller:Kp});return e.jsxs($9,{scope:n,checked:E,disabled:h,children:[e.jsx(Tt.button,{type:"button",role:"switch","aria-checked":E,"aria-required":u,"data-state":hS(E),"data-disabled":h?"":void 0,disabled:h,value:f,...g,ref:N,onClick:lt(t.onClick,k=>{_(T=>!T),S&&(C.current=k.isPropagationStopped(),C.current||k.stopPropagation())})}),S&&e.jsx(mS,{control:j,bubbles:!C.current,name:r,value:f,checked:E,required:u,disabled:h,form:x,style:{transform:"translateX(-100%)"}})]})});cS.displayName=Kp;var dS="SwitchThumb",uS=m.forwardRef((t,s)=>{const{__scopeSwitch:n,...r}=t,o=z9(dS,n);return e.jsx(Tt.span,{"data-state":hS(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:s})});uS.displayName=dS;var B9="SwitchBubbleInput",mS=m.forwardRef(({__scopeSwitch:t,control:s,checked:n,bubbles:r=!0,...o},c)=>{const u=m.useRef(null),h=ns(u,c),f=k0(n),v=A0(s);return m.useEffect(()=>{const x=u.current;if(!x)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set;if(f!==n&&w){const N=new Event("click",{bubbles:r});w.call(x,n),x.dispatchEvent(N)}},[f,n,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:h,style:{...o.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});mS.displayName=B9;function hS(t){return t?"checked":"unchecked"}var U9=cS,V9=uS;function H9({className:t,...s}){return e.jsx(U9,{"data-slot":"switch",className:Nt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(V9,{"data-slot":"switch-thumb",className:Nt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function pS(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const C=(await Ie.get("/media-points",{params:t})).data,S=Array.isArray(C)?C:C.data,E=Array.isArray(C)?S.length:C.total??S.length;n(S),o(E)}catch(N){f(N)}finally{u(!1)}},x=async N=>{const C=await Ie.post("/media-points",N);return n(S=>[...S,C.data]),C.data},g=async(N,C)=>{const S=await Ie.put(`/media-points/${N}`,C);return n(E=>E.map(_=>_.id===N?S.data:_)),S.data},j=async N=>{await Ie.delete(`/media-points/${N}`),n(C=>C.filter(S=>S.id!==N))},w=async(N,C)=>{const S=new FormData;S.append("file",C);const E=await Ie.post(`/media-points/${N}/image`,S,{headers:{"Content-Type":"multipart/form-data"}});return n(_=>_.map(k=>k.id===N?{...k,mainImageUrl:E.data.mainImageUrl}:k)),E.data};return m.useEffect(()=>{v()},[t.search,t.type,t.city,t.state,t.showInMediaKit,t.page,t.pageSize]),{mediaPoints:s,total:r,loading:c,error:h,refetch:v,createMediaPoint:x,updateMediaPoint:g,deleteMediaPoint:j,uploadMediaPointImage:w}}function fS(){const[t,s]=m.useState([]),[n,r]=m.useState([]),[o,c]=m.useState(!1),[u,h]=m.useState(null),f=async()=>{try{c(!0),h(null);const v=await Ie.get("/media-points/meta");s(Array.isArray(v.data?.cities)?v.data.cities:[]),r(Array.isArray(v.data?.states)?v.data.states:[])}catch(v){h(v),s([]),r([])}finally{c(!1)}};return m.useEffect(()=>{f()},[]),{cities:t,states:n,loading:o,error:u,refetch:f}}var Qp="Tabs",[q9]=Pa(Qp,[xd]),xS=xd(),[W9,dv]=q9(Qp),gS=m.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:c,orientation:u="horizontal",dir:h,activationMode:f="automatic",...v}=t,x=od(h),[g,j]=hr({prop:r,onChange:o,defaultProp:c??"",caller:Qp});return e.jsx(W9,{scope:n,baseId:Ir(),value:g,onValueChange:j,orientation:u,dir:x,activationMode:f,children:e.jsx(Tt.div,{dir:x,"data-orientation":u,...v,ref:s})})});gS.displayName=Qp;var vS="TabsList",yS=m.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,c=dv(vS,n),u=xS(n);return e.jsx(tv,{asChild:!0,...u,orientation:c.orientation,dir:c.dir,loop:r,children:e.jsx(Tt.div,{role:"tablist","aria-orientation":c.orientation,...o,ref:s})})});yS.displayName=vS;var bS="TabsTrigger",jS=m.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...c}=t,u=dv(bS,n),h=xS(n),f=CS(u.baseId,r),v=SS(u.baseId,r),x=r===u.value;return e.jsx(sv,{asChild:!0,...h,focusable:!o,active:x,children:e.jsx(Tt.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":v,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:f,...c,ref:s,onMouseDown:lt(t.onMouseDown,g=>{!o&&g.button===0&&g.ctrlKey===!1?u.onValueChange(r):g.preventDefault()}),onKeyDown:lt(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&u.onValueChange(r)}),onFocus:lt(t.onFocus,()=>{const g=u.activationMode!=="manual";!x&&!o&&g&&u.onValueChange(r)})})})});jS.displayName=bS;var NS="TabsContent",wS=m.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:o,children:c,...u}=t,h=dv(NS,n),f=CS(h.baseId,r),v=SS(h.baseId,r),x=r===h.value,g=m.useRef(x);return m.useEffect(()=>{const j=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(j)},[]),e.jsx(oa,{present:o||x,children:({present:j})=>e.jsx(Tt.div,{"data-state":x?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":f,hidden:!j,id:v,tabIndex:0,...u,ref:s,style:{...t.style,animationDuration:g.current?"0s":void 0},children:j&&c})})});wS.displayName=NS;function CS(t,s){return`${t}-trigger-${s}`}function SS(t,s){return`${t}-content-${s}`}var G9=gS,Z9=yS,K9=jS,Q9=wS;function Wi({className:t,...s}){return e.jsx(G9,{"data-slot":"tabs",className:Nt("flex flex-col gap-2",t),...s})}function Gi({className:t,...s}){return e.jsx(Z9,{"data-slot":"tabs-list",className:Nt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function vs({className:t,...s}){return e.jsx(K9,{"data-slot":"tabs-trigger",className:Nt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function Ms({className:t,...s}){return e.jsx(Q9,{"data-slot":"tabs-content",className:Nt("flex-1 outline-none",t),...s})}var Xp="Collapsible",[X9]=Pa(Xp),[Y9,uv]=X9(Xp),_S=m.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:c,onOpenChange:u,...h}=t,[f,v]=hr({prop:r,defaultProp:o??!1,onChange:u,caller:Xp});return e.jsx(Y9,{scope:n,disabled:c,contentId:Ir(),open:f,onOpenToggle:m.useCallback(()=>v(x=>!x),[v]),children:e.jsx(Tt.div,{"data-state":hv(f),"data-disabled":c?"":void 0,...h,ref:s})})});_S.displayName=Xp;var AS="CollapsibleTrigger",PS=m.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,o=uv(AS,n);return e.jsx(Tt.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":hv(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:s,onClick:lt(t.onClick,o.onOpenToggle)})});PS.displayName=AS;var mv="CollapsibleContent",ES=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=uv(mv,t.__scopeCollapsible);return e.jsx(oa,{present:n||o.open,children:({present:c})=>e.jsx(J9,{...r,ref:s,present:c})})});ES.displayName=mv;var J9=m.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:o,...c}=t,u=uv(mv,n),[h,f]=m.useState(r),v=m.useRef(null),x=ns(s,v),g=m.useRef(0),j=g.current,w=m.useRef(0),N=w.current,C=u.open||h,S=m.useRef(C),E=m.useRef(void 0);return m.useEffect(()=>{const _=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(_)},[]),Dn(()=>{const _=v.current;if(_){E.current=E.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const k=_.getBoundingClientRect();g.current=k.height,w.current=k.width,S.current||(_.style.transitionDuration=E.current.transitionDuration,_.style.animationName=E.current.animationName),f(r)}},[u.open,r]),e.jsx(Tt.div,{"data-state":hv(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!C,...c,ref:x,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:C&&o})});function hv(t){return t?"open":"closed"}var eF=_S;function tF({...t}){return e.jsx(eF,{"data-slot":"collapsible",...t})}function sF({...t}){return e.jsx(PS,{"data-slot":"collapsible-trigger",...t})}function nF({...t}){return e.jsx(ES,{"data-slot":"collapsible-content",...t})}Xt.OOH,Xt.DOOH,Xt.OOH;za.FACE,ni.FLUXO,za.FACE,ni.CONTRA_FLUXO,za.SCREEN,za.SCREEN,za.FACE,ni.FLUXO;Oo.AREA_PARTICULAR,Oo.AREA_PARTICULAR,Oo.DER;const aF=["OUTDOOR","FRONT_LIGHT","TOTEM","EMPENA","PAINEL_RODOVIARIO"],rF=["PAINEL_LED","TELA_DIGITAL","PAINEL_ELETRONICO"],iF=["Shopping Center","Rodovia","Avenida Principal","Terminal de nibus","Centro Comercial","Bairro Residencial","Aeroporto","Estao de Metr"],Ug=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],oF=["A","B","C","D","E"];kh.ACTIVE,kh.ACTIVE,kh.ACTIVE;ss.CLIENTE,ss.PROSPECT,ss.LEAD,ss.CLIENTE,ss.LEAD,ss.INATIVO;us.APROVADA,us.ENVIADA,us.ENVIADA,us.APROVADA,us.APROVADA;an.PRODUTO,On.UNITARIO,an.SERVICO,On.A_PARTIR_DE,an.SERVICO,On.PACOTE,an.SERVICO,On.UNITARIO,an.PRODUTO,On.UNITARIO,an.SERVICO,On.A_PARTIR_DE,an.PRODUTO,On.UNITARIO,an.SERVICO,On.PACOTE;Ns.ATIVA,Ns.EM_INSTALACAO,Ns.ATIVA,Ns.ATIVA,Ns.APROVADA,Ns.AGUARDANDO_MATERIAL;at.PAGA,ws.PIX,at.PAGA,ws.BOLETO,at.PAGA,ws.TRANSFERENCIA,at.ABERTA,at.ABERTA,at.ABERTA,at.ENVIADA,ws.BOLETO,at.ENVIADA,ws.PIX,at.VENCIDA,ws.BOLETO;Gt.ENTRADA,nn.PIX,Gt.ENTRADA,nn.BOLETO,Gt.ENTRADA,nn.PIX,Gt.ENTRADA,nn.BOLETO,Gt.ENTRADA,nn.BOLETO,Gt.ENTRADA,nn.PIX,Gt.ENTRADA,nn.PIX,Gt.ENTRADA,nn.BOLETO,Gt.ENTRADA,nn.PIX,Gt.ENTRADA,nn.BOLETO,Gt.ENTRADA,nn.BOLETO,Gt.ENTRADA,nn.PIX;function lF({open:t,onOpenChange:s,mediaPoint:n,onSave:r}){const o=oe=>{if(!oe)return oe??null;if(oe.startsWith("/uploads/"))return oe;const Pe=oe.indexOf("/uploads/");return Pe>=0?oe.slice(Pe):oe},[c,u]=m.useState(n?.type||Xt.OOH),[h,f]=m.useState({type:Xt.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),[v,x]=m.useState({}),[g,j]=m.useState(null),[w,N]=m.useState(!1),[C,S]=m.useState(null),[E,_]=m.useState(null),{cities:k,refetch:T}=fS(),[M,F]=m.useState(!1),[O,Z]=m.useState(""),[q,$]=m.useState(""),[X,I]=m.useState(null),[B,te]=m.useState(!1);m.useEffect(()=>{j(null),n?(f(n),u(n.type),S(null),_(o(n.mainImageUrl)||null)):(f({type:Xt.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),u(Xt.OOH),S(null),_(null))},[n,t]);const ue=oe=>{u(oe),f(Pe=>({...Pe,type:oe,subcategory:void 0}))},Y=oe=>{const Pe=oe.target.files?.[0]??null;if(S(Pe),Pe){const We=URL.createObjectURL(Pe);_(We)}};m.useEffect(()=>()=>{E&&E.startsWith("blob:")&&URL.revokeObjectURL(E)},[E]);const ce=(oe,Pe)=>{f(We=>({...We,[oe]:Pe})),v[oe]&&x(We=>({...We,[oe]:""}))},U=String(h.addressState??"").trim().toUpperCase(),[ne,Q]=m.useState([]),[z,se]=m.useState(!1);m.useEffect(()=>{let oe=!1;const Pe=Array.isArray(k)?k:[];if(!U){Q(Pe);return}return(async()=>{try{se(!0);const tt=(await Ie.get("/media-points/cities",{params:{state:U}}))?.data,nt=Array.isArray(tt)?tt:Array.isArray(tt?.cities)?tt.cities:[];oe||Q(nt.length?nt:Pe)}catch{oe||Q(Pe)}finally{oe||se(!1)}})(),()=>{oe=!0}},[U,k]);const G=async()=>{const oe=String(q||U).trim().toUpperCase(),Pe=String(O).trim();if(!oe||!Pe){I("Informe a UF e o nome da cidade.");return}try{te(!0),I(null);const Je=(await Ie.post("/media-points/cities",{state:oe,name:Pe})).data;ce("addressState",Je.state??oe),ce("addressCity",Je.name??Pe),await T(),F(!1),Z("")}catch(We){const Je=We?.response?.data?.message||"No foi possvel adicionar a cidade.";I(String(Je))}finally{te(!1)}},ee=oe=>{const Pe=h.socialClasses||[],We=Pe.includes(oe)?Pe.filter(Je=>Je!==oe):[...Pe,oe];ce("socialClasses",We)},V=()=>{const oe={};return h.name?.trim()||(oe.name="Nome do ponto  obrigatrio"),h.addressCity?.trim()||(oe.addressCity="Cidade  obrigatria"),h.addressState?.trim()||(oe.addressState="Estado  obrigatrio"),(h.latitude===void 0||h.latitude===null)&&(oe.latitude="Latitude  obrigatria"),(h.longitude===void 0||h.longitude===null)&&(oe.longitude="Longitude  obrigatria"),x(oe),Object.keys(oe).length===0},re=async()=>{if(!V())return;N(!0),j(null);const{id:oe,companyId:Pe,createdAt:We,updatedAt:Je,units:tt,owners:nt,...ct}=h||{};delete ct.basePriceDay;try{await r({...ct,type:c},C),s(!1)}catch(wt){const pt=wt?.message||"No foi possvel salvar o ponto de mdia.";j(pt)}finally{N(!1)}},ae=()=>{f({type:Xt.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),x({}),j(null),s(!1)},me=c===Xt.OOH?aF:rF;return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:n?"Editar Ponto de Mdia":"Cadastrar Novo Ponto de Mdia (MediaPoint)"}),e.jsx(dr,{children:n?"Atualize os detalhes do ponto de mdia.":"Preencha os campos para cadastrar um novo ponto de mdia."})]}),e.jsxs(Wi,{value:c,onValueChange:oe=>ue(oe),children:[e.jsxs(Gi,{className:"grid w-full grid-cols-2",children:[e.jsx(vs,{value:Xt.OOH,children:"OOH"}),e.jsx(vs,{value:Xt.DOOH,children:"DOOH"})]}),e.jsxs(Ms,{value:c,className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Informaes Bsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome do Ponto *"}),e.jsx(Ce,{placeholder:"Ex: Outdoor Av. Paulista 1000",value:h.name||"",onChange:oe=>ce("name",oe.target.value),className:v.name?"border-red-500":""}),v.name&&e.jsx("p",{className:"text-xs text-red-600",children:v.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Subcategoria"}),e.jsxs(_t,{value:h.subcategory||"",onValueChange:oe=>ce("subcategory",oe),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione a subcategoria"})}),e.jsx(Et,{children:me.map(oe=>e.jsx(Oe,{value:oe,children:oe},oe))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Imagem principal"}),e.jsx(Ce,{type:"file",accept:"image/*",onChange:Y}),E&&e.jsx("div",{className:"mt-2 w-full max-w-sm h-40 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:E,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Selecione uma imagem (PNG/JPG). O upload ser feito ao salvar."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Descrio"}),e.jsx(Wa,{placeholder:"Descreva o ponto de mdia...",value:h.description||"",onChange:oe=>ce("description",oe.target.value),rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Localizao"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"CEP"}),e.jsx(Ce,{placeholder:"00000-000",value:h.addressZipcode||"",onChange:oe=>ce("addressZipcode",oe.target.value)})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{children:"Rua/Avenida"}),e.jsx(Ce,{placeholder:"Ex: Avenida Paulista",value:h.addressStreet||"",onChange:oe=>ce("addressStreet",oe.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nmero"}),e.jsx(Ce,{placeholder:"1000",value:h.addressNumber||"",onChange:oe=>ce("addressNumber",oe.target.value)})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{children:"Bairro"}),e.jsx(Ce,{placeholder:"Ex: Bela Vista",value:h.addressDistrict||"",onChange:oe=>ce("addressDistrict",oe.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(je,{children:"Cidade *"}),e.jsx(K,{type:"button",variant:"ghost",className:"h-7 px-2 text-xs",onClick:()=>{$(U||String(q||"").trim().toUpperCase()),F(!0),I(null)},children:"+ Adicionar"})]}),e.jsxs(_t,{disabled:z,value:h.addressCity||"",onValueChange:oe=>{if(oe==="__add__"){$(U),Z(""),I(null),F(!0);return}ce("addressCity",oe)},children:[e.jsx(Pt,{className:v.addressCity?"border-red-500":"",children:e.jsx(At,{placeholder:z?"Carregando...":ne.length?"Selecione a cidade":"Nenhuma cidade cadastrada"})}),e.jsxs(Et,{children:[ne.map(oe=>e.jsx(Oe,{value:oe,children:oe},oe)),e.jsx(Oe,{value:"__add__",children:"+ Adicionar nova cidade"})]})]}),v.addressCity&&e.jsx("p",{className:"text-xs text-red-600",children:v.addressCity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Estado *"}),e.jsxs(_t,{value:h.addressState||"",onValueChange:oe=>{ce("addressState",oe),ce("addressCity","")},children:[e.jsx(Pt,{className:v.addressState?"border-red-500":"",children:e.jsx(At,{placeholder:"UF"})}),e.jsx(Et,{children:Ug.map(oe=>e.jsx(Oe,{value:oe,children:oe},oe))})]}),v.addressState&&e.jsx("p",{className:"text-xs text-red-600",children:v.addressState})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Pas"}),e.jsx(Ce,{value:h.addressCountry||"Brasil",onChange:oe=>ce("addressCountry",oe.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Latitude *"}),e.jsx(Ce,{type:"number",step:"0.000001",placeholder:"-23.561414",value:h.latitude||"",onChange:oe=>ce("latitude",parseFloat(oe.target.value)),className:v.latitude?"border-red-500":""}),v.latitude&&e.jsx("p",{className:"text-xs text-red-600",children:v.latitude})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Longitude *"}),e.jsx(Ce,{type:"number",step:"0.000001",placeholder:"-46.655881",value:h.longitude||"",onChange:oe=>ce("longitude",parseFloat(oe.target.value)),className:v.longitude?"border-red-500":""}),v.longitude&&e.jsx("p",{className:"text-xs text-red-600",children:v.longitude})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Dados Comerciais e Audincia"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Impactos Dirios"}),e.jsx(Ce,{type:"number",placeholder:"85000",value:h.dailyImpressions||"",onChange:oe=>ce("dailyImpressions",parseInt(oe.target.value)||null)}),!h.dailyImpressions&&e.jsx("p",{className:"text-xs text-amber-600",children:" Recomendado preencher"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{children:"Ambiente"}),e.jsxs(_t,{value:h.environment||"",onValueChange:oe=>ce("environment",oe),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o ambiente"})}),e.jsx(Et,{children:iF.map(oe=>e.jsx(Oe,{value:oe,children:oe},oe))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Classes Sociais Atendidas (socialClasses)"}),e.jsx("div",{className:"flex gap-2",children:oF.map(oe=>e.jsxs(Ke,{variant:h.socialClasses?.includes(oe)?"default":"outline",className:"cursor-pointer",onClick:()=>ee(oe),children:[oe,h.socialClasses?.includes(oe)&&e.jsx(Ca,{className:"w-3 h-3 ml-1"})]},oe))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Preo Mensal (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"8500.00",value:h.basePriceMonth||"",onChange:oe=>ce("basePriceMonth",parseFloat(oe.target.value)||null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Preo Quinzenal (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"2500.00",value:h.basePriceWeek||"",onChange:oe=>ce("basePriceWeek",parseFloat(oe.target.value)||null)})]})]})]}),c===Xt.OOH&&e.jsx(tF,{defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(sF,{asChild:!0,children:e.jsxs(K,{variant:"outline",className:"w-full justify-between bg-orange-50/50 hover:bg-orange-100/50 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hc,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-900",children:"Custos de Produo OOH"})]}),e.jsx(Ru,{className:"w-4 h-4"})]})}),e.jsx(nF,{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-orange-50/30 rounded-lg border border-orange-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure os custos padro de produo para este ponto OOH. Estes valores sero usados como referncia para oramentos e clculos de custo."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Lona (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.lona||"",onChange:oe=>ce("productionCosts",{...h.productionCosts,lona:parseFloat(oe.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material de impresso (lona/tecido)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Adesivo (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.adesivo||"",onChange:oe=>ce("productionCosts",{...h.productionCosts,adesivo:parseFloat(oe.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material adesivo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Vinil (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.vinil||"",onChange:oe=>ce("productionCosts",{...h.productionCosts,vinil:parseFloat(oe.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material vinlico (opcional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Montagem/Instalao (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.montagem||"",onChange:oe=>ce("productionCosts",{...h.productionCosts,montagem:parseFloat(oe.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Mo de obra para instalao"})]})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Visibilidade"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showInMediaKit",checked:h.showInMediaKit||!1,onChange:oe=>ce("showInMediaKit",oe.target.checked),className:"rounded"}),e.jsx(je,{htmlFor:"showInMediaKit",className:"cursor-pointer",children:"Exibir este ponto no Mdia Kit pblico (showInMediaKit)"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Prximo passo"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Aps criar o ponto, voc poder adicionar ",e.jsx("strong",{children:"unidades (MediaUnit)"}),' - faces para OOH ou telas para DOOH - com preos e caractersticas especficas atravs da opo "Gerenciar unidades" no menu do ponto.']})]})]})]}),g&&e.jsx("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:g}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:ae,children:"Cancelar"}),e.jsx(K,{onClick:re,disabled:w,children:w?"Salvando...":n?"Salvar Alteraes":"Salvar Ponto"})]}),e.jsx(_s,{open:M,onOpenChange:oe=>{F(oe),oe||I(null)},children:e.jsxs(As,{children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Adicionar cidade"}),e.jsx(dr,{children:"Cadastre uma nova cidade para aparecer na lista (por UF)."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"UF *"}),e.jsxs(_t,{value:q||U,onValueChange:oe=>$(oe),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"UF"})}),e.jsx(Et,{children:Ug.map(oe=>e.jsx(Oe,{value:oe,children:oe},oe))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome da cidade *"}),e.jsx(Ce,{value:O,onChange:oe=>Z(oe.target.value),placeholder:"Ex.: So Paulo"})]}),X&&e.jsx("p",{className:"text-red-500 text-sm",children:X}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(K,{type:"button",variant:"outline",onClick:()=>F(!1),disabled:B,children:"Cancelar"}),e.jsx(K,{type:"button",onClick:G,disabled:B,children:B?"Salvando...":"Adicionar"})]})]})]})})]})})}function kS(t=!0){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=m.useCallback(async()=>{try{o(!0),u(null);const g=await Ie.get("/owner-companies");n(g.data??[])}catch(g){console.error(g),u(g?.response?.data?.message||g?.message||"Erro ao carregar empresas proprietrias")}finally{o(!1)}},[]);m.useEffect(()=>{t&&h()},[t,h]);const f=m.useCallback(async g=>{const j=await Ie.post("/owner-companies",{name:g.name,document:g.document??void 0,email:g.email??void 0,phone:g.phone??void 0});return await h(),j.data},[h]),v=m.useCallback(async(g,j)=>{const w=await Ie.put(`/owner-companies/${g}`,{name:j.name??void 0,document:j.document??void 0,email:j.email??void 0,phone:j.phone??void 0});return await h(),w.data},[h]),x=m.useCallback(async g=>{await Ie.delete(`/owner-companies/${g}`),await h()},[h]);return{ownerCompanies:s,loading:r,error:c,refetch:h,createOwnerCompany:f,updateOwnerCompany:v,deleteOwnerCompany:x}}function cF({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:r}){const{subscription:o}=Ho(),c=o?.maxOwnersPerMediaPoint??1,{ownerCompanies:u,loading:h,error:f,refetch:v}=kS(t),[x,g]=m.useState([]),[j,w]=m.useState(!1),[N,C]=m.useState(!1),[S,E]=m.useState(null),_=x.length<c,k=async()=>{try{w(!0);const M=await Ie.get(`/media-points/${n}/owners`);g(M.data||[])}catch(M){console.error(M),g([])}finally{w(!1)}};m.useEffect(()=>{t?(k(),v()):(g([]),C(!1),E(null))},[t,n]);const T=async M=>{if(confirm(`Remover proprietrio "${M.ownerCompany?.name??M.ownerName}" deste ponto?`))try{await Ie.delete(`/media-point-owners/${M.id}`),g(F=>F.filter(O=>O.id!==M.id))}catch(F){console.error(F),alert(F?.response?.data?.message||"Erro ao remover proprietrio.")}};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Rs,{children:[e.jsxs(Os,{children:["Proprietrios / Empresas vinculadas  ",r]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Limite atual: ",e.jsx("b",{children:c})," proprietrio(s) por ponto (assinatura multi-proprietrios)."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[x.length," de ",c," proprietrio(s) utilizado(s)"]}),e.jsxs(K,{onClick:()=>{_&&(C(!0),E(null))},disabled:!_,children:[e.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Adicionar Proprietrio"]})]}),!_&&e.jsx(Re,{className:"border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"p-4 text-sm text-amber-900",children:["Voc atingiu o limite de proprietrios por ponto (",c,"). Para adicionar mais, aumente a assinatura multi-proprietrios em Configuraes."]})}),f&&e.jsx(Re,{className:"border-red-200 bg-red-50",children:e.jsx(Le,{className:"p-4 text-sm text-red-900",children:String(f)})}),j&&e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-sm text-gray-500",children:"Carregando proprietrios..."})}),!j&&x.length===0&&e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-sm text-gray-500",children:"Nenhum proprietrio vinculado a este ponto."})}),e.jsx("div",{className:"space-y-3",children:x.map(M=>{const F=M.ownerCompany?.name??M.ownerName,O=!!M.ownerCompany?.isPrimary;return e.jsx(Re,{children:e.jsxs(Le,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:F}),O&&e.jsx(Ke,{variant:"secondary",children:"Empresa prpria"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-x-4 gap-y-1",children:[M.ownerDocument&&e.jsxs("span",{children:["Doc: ",M.ownerDocument]}),M.ownerPhone&&e.jsxs("span",{children:["Tel: ",M.ownerPhone]}),M.regime&&e.jsxs("span",{children:["Regime: ",M.regime]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{E(M),C(!1)},children:e.jsx(gp,{className:"w-4 h-4"})}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>T(M),children:e.jsx(Aa,{className:"w-4 h-4"})})]})]}),(M.derMonthlyFee||M.rentValue||M.fixedExpenseDueDay)&&e.jsx("div",{className:"mt-3 text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[M.derMonthlyFee!=null&&e.jsxs("span",{children:["DER: R$ ",Number(M.derMonthlyFee).toFixed(2)]}),M.rentValue!=null&&e.jsxs("span",{children:["Aluguel: R$ ",Number(M.rentValue).toFixed(2)]}),M.fixedExpenseDueDay!=null&&e.jsxs("span",{children:["Venc.: dia ",M.fixedExpenseDueDay]})]})}),M.notes&&e.jsx("div",{className:"mt-3 text-sm text-gray-600 whitespace-pre-wrap",children:M.notes})]})},M.id)})}),(N||S)&&e.jsx(dF,{owner:S,ownerCompanies:u,ownerCompaniesLoading:h,onSave:async M=>{try{const F={};if(M.ownerCompanyId&&(F.ownerCompanyId=M.ownerCompanyId),!M.ownerCompanyId&&M.ownerName?.trim()&&(F.ownerName=M.ownerName.trim()),M.ownerDocument?.trim()&&(F.ownerDocument=M.ownerDocument.trim()),M.ownerPhone?.trim()&&(F.ownerPhone=M.ownerPhone.trim()),M.regime&&(F.regime=M.regime),M.derMonthlyFee!==void 0&&(F.derMonthlyFee=M.derMonthlyFee),M.rentValue!==void 0&&(F.rentValue=M.rentValue),M.fixedExpenseDueDay!==void 0&&(F.fixedExpenseDueDay=M.fixedExpenseDueDay),M.rentPeriodicity&&(F.rentPeriodicity=M.rentPeriodicity),M.notes?.trim()&&(F.notes=M.notes.trim()),S){const O=await Ie.put(`/media-point-owners/${S.id}`,F);g(Z=>Z.map(q=>q.id===S.id?O.data:q)),E(null)}else{const O=await Ie.post(`/media-points/${n}/owners`,F);g(Z=>[...Z,O.data]),C(!1)}}catch(F){console.error(F),alert(F?.response?.data?.message||"Erro ao salvar proprietrio.")}},onCancel:()=>{C(!1),E(null)}})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(K,{onClick:()=>s(!1),children:"Fechar"})})]})})}function dF({owner:t,ownerCompanies:s,ownerCompaniesLoading:n,onSave:r,onCancel:o}){const[c,u]=m.useState(()=>t?{ownerCompanyId:t.ownerCompanyId??void 0,ownerName:t.ownerName,ownerDocument:t.ownerDocument,ownerPhone:t.ownerPhone??void 0,regime:t.regime,derMonthlyFee:t.derMonthlyFee??void 0,rentValue:t.rentValue??void 0,fixedExpenseDueDay:t.fixedExpenseDueDay??void 0,rentPeriodicity:t.rentPeriodicity??void 0,notes:t.notes??void 0}:{ownerCompanyId:void 0,ownerName:""}),h=(x,g)=>{u(j=>({...j,[x]:g}))},f=!c.ownerCompanyId,v=!!(c.ownerCompanyId||c.ownerName?.trim());return e.jsx(Re,{className:"border-2 border-green-100 bg-green-50/30",children:e.jsxs(Le,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-start gap-2 mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900",children:t?"Editar Proprietrio":"Novo Proprietrio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione a empresa proprietria (cadastrada no SuperAdmin) e preencha os dados de despesas fixas do ponto."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Empresa proprietria *"}),e.jsxs(_t,{value:c.ownerCompanyId||"",onValueChange:x=>h("ownerCompanyId",x||void 0),disabled:n,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:n?"Carregando...":"Selecione"})}),e.jsx(Et,{children:s.map(x=>e.jsxs(Oe,{value:x.id,children:[x.name,x.isPrimary?" (empresa prpria)":""]},x.id))})]}),s.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Nenhuma empresa proprietria encontrada."})]}),f&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome do Proprietrio (fallback) *"}),e.jsx(Ce,{placeholder:"Ex: DER SP / Prefeitura / Joo Silva",value:c.ownerName||"",onChange:x=>h("ownerName",x.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use apenas se no conseguir carregar/selecionar as empresas do SuperAdmin."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Regime"}),e.jsxs(_t,{value:c.regime||"",onValueChange:x=>h("regime",x),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o regime"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:Oo.AREA_PARTICULAR,children:"rea Particular"}),e.jsx(Oe,{value:Oo.ADMIN_PUBLICA,children:"Administrao Pblica"}),e.jsx(Oe,{value:Oo.DER,children:"DER"}),e.jsx(Oe,{value:Oo.OUTRO,children:"Outro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Telefone"}),e.jsx(Ce,{placeholder:"(11) 99999-9999",value:c.ownerPhone||"",onChange:x=>h("ownerPhone",x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Taxa DER mensal (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"300.00",value:c.derMonthlyFee??"",onChange:x=>h("derMonthlyFee",x.target.value?parseFloat(x.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor do aluguel (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"1000.00",value:c.rentValue??"",onChange:x=>h("rentValue",x.target.value?parseFloat(x.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Dia vencimento"}),e.jsx(Ce,{type:"number",placeholder:"10",value:c.fixedExpenseDueDay??"",onChange:x=>h("fixedExpenseDueDay",x.target.value?parseInt(x.target.value):void 0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Periodicidade do aluguel"}),e.jsxs(_t,{value:c.rentPeriodicity||"",onValueChange:x=>h("rentPeriodicity",x),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:uu.MENSAL,children:"Mensal"}),e.jsx(Oe,{value:uu.TRIMESTRAL,children:"Trimestral"}),e.jsx(Oe,{value:uu.ANUAL,children:"Anual"}),e.jsx(Oe,{value:uu.OUTRO,children:"Outro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Observaes"}),e.jsx(Wa,{placeholder:"Ex: Contrato vence em..., reajuste anual..., etc.",value:c.notes||"",onChange:x=>h("notes",x.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:o,children:"Cancelar"}),e.jsx(K,{onClick:()=>r(c),disabled:!v,children:t?"Salvar Alteraes":"Adicionar Proprietrio"})]})]})})}function uF({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:r}){const[o,c]=m.useState([]),[u,h]=m.useState(!1),[f,v]=m.useState(!1),[x,g]=m.useState(null),j=async()=>{if(n)try{v(!0),g(null);const w=await Ie.get(`/media-points/${n}/contracts`);c(w.data??[])}catch(w){console.error(w),g(w?.response?.data?.message||w?.message||"Erro ao carregar contratos")}finally{v(!1)}};return m.useEffect(()=>{t?j():(h(!1),g(null))},[t,n]),e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Rs,{children:[e.jsxs(Os,{children:["Contratos do Ponto - ",r]}),e.jsx("p",{className:"text-gray-600",children:"Upload e gerenciamento dos contratos deste ponto."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:f?e.jsx(Re,{children:e.jsx(Le,{className:"py-8 text-center text-gray-600",children:"Carregando..."})}):x?e.jsx(Re,{children:e.jsxs(Le,{className:"py-6 text-center",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"Erro ao carregar contratos"}),e.jsx("p",{className:"text-sm text-gray-600",children:x}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{variant:"outline",onClick:j,children:"Tentar novamente"})})]})}):o.length===0?e.jsx(Re,{children:e.jsxs(Le,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum contrato cadastrado"}),e.jsxs(K,{onClick:()=>h(!0),children:[e.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Upload Contrato"]})]})}):e.jsxs(e.Fragment,{children:[o.map(w=>e.jsx(Re,{children:e.jsx(Le,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(Js,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900",children:w.fileName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",w.id]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[w.signedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Assinado em: "}),e.jsx("span",{className:"text-gray-900",children:new Date(w.signedAt).toLocaleDateString("pt-BR")})]}),w.expiresAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Vence em: "}),e.jsx("span",{className:"text-gray-900",children:new Date(w.expiresAt).toLocaleDateString("pt-BR")})]})]}),w.url&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 break-all",children:["URL: ",w.url]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:async()=>{try{const N=await Ie.get(`/media-point-contracts/${w.id}/download`,{responseType:"blob"}),C=window.URL.createObjectURL(N.data),S=document.createElement("a");S.href=C,S.download=w.fileName||"contrato",document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(C)}catch(N){console.error(N),alert("Erro ao obter link de download.")}},title:"Download",children:e.jsx(Dl,{className:"w-4 h-4"})}),e.jsx(K,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Excluir este contrato?"))try{await Ie.delete(`/media-point-contracts/${w.id}`),c(C=>C.filter(S=>S.id!==w.id))}catch(C){console.error(C),alert("Erro ao excluir contrato.")}},title:"Excluir",children:e.jsx(Aa,{className:"w-4 h-4"})})]})]})})},w.id)),e.jsxs(K,{variant:"outline",className:"w-full",onClick:()=>h(!0),children:[e.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Upload Contrato"]})]})}),u&&e.jsx(mF,{onSave:async({file:w,signedAt:N,expiresAt:C})=>{try{const S=new FormData;S.append("file",w),N&&S.append("signedAt",N),C&&S.append("expiresAt",C);const E=await Ie.post(`/media-points/${n}/contracts`,S,{headers:{"Content-Type":"multipart/form-data"}});c(_=>[..._,E.data]),h(!1)}catch(S){console.error(S),alert("Erro ao enviar contrato.")}},onCancel:()=>h(!1)})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(K,{onClick:()=>s(!1),children:"Fechar"})})]})})}function mF({onSave:t,onCancel:s}){const[n,r]=m.useState(null),[o,c]=m.useState(""),[u,h]=m.useState("");return e.jsx(Re,{className:"border-2 border-red-100 bg-red-50/30",children:e.jsxs(Le,{className:"pt-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2",children:"Upload de Contrato"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Arquivo PDF *"}),e.jsx(Ce,{type:"file",accept:"application/pdf",onChange:f=>r(f.target.files?.[0]??null)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Somente PDF."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data de assinatura"}),e.jsx(Ce,{type:"date",value:o,onChange:f=>c(f.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data de vencimento"}),e.jsx(Ce,{type:"date",value:u,onChange:f=>h(f.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:s,children:"Cancelar"}),e.jsx(K,{onClick:()=>{if(!n){alert("Selecione um arquivo PDF.");return}t({file:n,signedAt:o||void 0,expiresAt:u||void 0})},children:"Enviar"})]})]})})}function hF({mediaPointId:t}){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=async()=>{if(t)try{o(!0),u(null);const w=(await Ie.get(`/media-points/${t}/units`)).data,N=Array.isArray(w)?w:w.data;n(N)}catch(j){u(j)}finally{o(!1)}},f=async j=>{if(!t)throw new Error("mediaPointId  obrigatrio");const w=await Ie.post(`/media-points/${t}/units`,j);return n(N=>[...N,w.data]),w.data},v=async(j,w)=>{const N=await Ie.put(`/media-units/${j}`,w);return n(C=>C.map(S=>S.id===j?N.data:S)),N.data},x=async j=>{await Ie.delete(`/media-units/${j}`),n(w=>w.filter(N=>N.id!==j))},g=async(j,w)=>{const N=new FormData;N.append("file",w);const C=await Ie.post(`/media-units/${j}/image`,N,{headers:{"Content-Type":"multipart/form-data"}});return n(S=>S.map(E=>E.id===j?{...E,imageUrl:C.data.imageUrl}:E)),C.data};return m.useEffect(()=>{h()},[t]),{units:s,loading:r,error:c,refetch:h,createUnit:f,updateUnit:v,deleteUnit:x,uploadUnitImage:g}}function pF(t){const s={};for(const[n,r]of Object.entries(t))r!=null&&(typeof r=="string"&&r.trim()===""||(s[n]=r));return s}function fF({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:r,mediaPointType:o}){const{units:c,loading:u,error:h,createUnit:f,updateUnit:v,deleteUnit:x,uploadUnitImage:g}=hF({mediaPointId:t?n:null}),[j,w]=m.useState(!1),[N,C]=m.useState(null);m.useEffect(()=>{t||(w(!1),C(null))},[t]);const S=T=>T?T===ni.FLUXO?"Fluxo":"Contra-Fluxo":"-",E=T=>T?T===ni.FLUXO?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",_=o===Xt.OOH?za.FACE:za.SCREEN,k=o===Xt.OOH?"Face":"Tela";return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Rs,{children:[e.jsxs(Os,{children:[k,"s do Ponto - ",r]}),e.jsx("p",{className:"text-gray-600",children:o===Xt.OOH?"Gerencie as faces (unidades de veiculao) deste ponto OOH":"Gerencie as telas (unidades digitais) deste ponto DOOH"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:u?e.jsx(Re,{children:e.jsx(Le,{className:"py-8 text-center text-gray-600",children:"Carregando..."})}):h?e.jsx(Re,{children:e.jsxs(Le,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-3",children:"Erro ao carregar unidades."}),e.jsx("p",{className:"text-sm text-gray-600",children:String(h.message||h)})]})}):c.length===0?e.jsx(Re,{children:e.jsxs(Le,{className:"py-8 text-center",children:[e.jsxs("p",{className:"text-gray-500 mb-4",children:["Nenhuma ",k.toLowerCase()," cadastrada"]}),e.jsxs(K,{onClick:()=>w(!0),children:[e.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Adicionar ",k]})]})}):e.jsxs(e.Fragment,{children:[c.map(T=>e.jsx(Re,{children:e.jsx(Le,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-gray-900",children:T.label}),T.orientation&&e.jsx(Ke,{className:E(T.orientation),children:S(T.orientation)}),e.jsx(Ke,{variant:T.isActive?"default":"secondary",children:T.isActive?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[o===Xt.OOH&&e.jsx(e.Fragment,{children:(T.widthM||T.heightM)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Dimenses: "}),e.jsxs("span",{className:"text-gray-900",children:[T.widthM||"-","m x ",T.heightM||"-","m"]})]})}),o===Xt.DOOH&&e.jsxs(e.Fragment,{children:[T.insertionsPerDay!==void 0&&T.insertionsPerDay!==null&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Inseres/dia: "}),e.jsx("span",{className:"text-gray-900",children:T.insertionsPerDay})]}),T.resolutionWidthPx&&T.resolutionHeightPx&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Resoluo: "}),e.jsxs("span",{className:"text-gray-900",children:[T.resolutionWidthPx,"x",T.resolutionHeightPx,"px"]})]})]}),(T.priceMonth||T.priceWeek)&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Preos: "}),e.jsxs("span",{className:"text-gray-900",children:[T.priceMonth?`R$ ${T.priceMonth}/ms`:"",T.priceWeek?`  R$ ${T.priceWeek}/quinz`:""]})]})]}),T.imageUrl&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Th,{className:"w-4 h-4"}),e.jsx("span",{children:"Imagem disponvel"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:()=>C(T),title:"Editar",children:e.jsx(ql,{className:"w-4 h-4"})}),e.jsx(K,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Excluir esta unidade?"))try{await x(T.id)}catch(F){console.error(F),alert("Erro ao excluir unidade.")}},title:"Excluir",children:e.jsx(Aa,{className:"w-4 h-4"})})]})]})})},T.id)),e.jsxs(K,{variant:"outline",className:"w-full",onClick:()=>w(!0),children:[e.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Adicionar ",k]})]})}),(j||N)&&e.jsx(xF,{unit:N,mediaPointType:o,onSave:async(T,M)=>{try{const F=pF(T);if(N)await v(N.id,F),M&&await g(N.id,M),C(null);else{const O=await f({...F,unitType:_,label:(F.label??"").toString()});M&&await g(O.id,M),w(!1)}}catch(F){console.error(F),alert("Erro ao salvar unidade.")}},onCancel:()=>{w(!1),C(null)}})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(K,{onClick:()=>s(!1),children:"Fechar"})})]})})}function xF({unit:t,mediaPointType:s,onSave:n,onCancel:r}){const[o,c]=m.useState(t?{label:t.label,orientation:t.orientation,widthM:t.widthM,heightM:t.heightM,insertionsPerDay:t.insertionsPerDay,resolutionWidthPx:t.resolutionWidthPx,resolutionHeightPx:t.resolutionHeightPx,priceMonth:t.priceMonth,priceWeek:t.priceWeek}:{label:""}),[u,h]=m.useState(null),[f,v]=m.useState(t?.imageUrl??null);m.useEffect(()=>{t?(c({label:t.label,orientation:t.orientation,widthM:t.widthM,heightM:t.heightM,insertionsPerDay:t.insertionsPerDay,resolutionWidthPx:t.resolutionWidthPx,resolutionHeightPx:t.resolutionHeightPx,priceMonth:t.priceMonth,priceWeek:t.priceWeek}),h(null),v(t.imageUrl??null)):(c({label:""}),h(null),v(null))},[t]);const x=(j,w)=>{c(N=>({...N,[j]:w}))},g=j=>{const w=j.target.files?.[0]??null;if(h(w),w){const N=URL.createObjectURL(w);v(N)}};return m.useEffect(()=>()=>{f&&f.startsWith("blob:")&&URL.revokeObjectURL(f)},[]),e.jsx(Re,{className:"border-2 border-indigo-200",children:e.jsxs(Le,{className:"pt-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t?"Editar Unidade":"Nova Unidade"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome/Label *"}),e.jsx(Ce,{placeholder:s===Xt.OOH?"Ex: Face 1 - Principal":"Ex: Tela 1 - Entrada",value:o.label||"",onChange:j=>x("label",j.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{children:["Imagem da ",s===Xt.OOH?"Face":"Tela"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ce,{type:"file",accept:"image/jpeg,image/png,image/gif",onChange:g,className:"flex-1"}),f&&e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG ou GIF (mx. 4MB)."})]}),s===Xt.OOH&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Largura (m)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"3.00",value:o.widthM??"",onChange:j=>x("widthM",j.target.value?parseFloat(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Altura (m)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"9.00",value:o.heightM??"",onChange:j=>x("heightM",j.target.value?parseFloat(j.target.value):null)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Orientao"}),e.jsxs(_t,{value:o.orientation||"",onValueChange:j=>x("orientation",j||null),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione a orientao"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ni.FLUXO,children:"Fluxo"}),e.jsx(Oe,{value:ni.CONTRA_FLUXO,children:"Contra-Fluxo"})]})]})]})]}),s===Xt.DOOH&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Inseres por Dia"}),e.jsx(Ce,{type:"number",placeholder:"150",value:o.insertionsPerDay??"",onChange:j=>x("insertionsPerDay",j.target.value?parseInt(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Orientao"}),e.jsxs(_t,{value:o.orientation||"",onValueChange:j=>x("orientation",j||null),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione a orientao"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ni.FLUXO,children:"Fluxo"}),e.jsx(Oe,{value:ni.CONTRA_FLUXO,children:"Contra-Fluxo"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Resoluo Largura (px)"}),e.jsx(Ce,{type:"number",placeholder:"1920",value:o.resolutionWidthPx??"",onChange:j=>x("resolutionWidthPx",j.target.value?parseInt(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Resoluo Altura (px)"}),e.jsx(Ce,{type:"number",placeholder:"1080",value:o.resolutionHeightPx??"",onChange:j=>x("resolutionHeightPx",j.target.value?parseInt(j.target.value):null)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Preos (opcional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"text-sm",children:"Preo/Ms (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"5000.00",value:o.priceMonth??"",onChange:j=>x("priceMonth",j.target.value?parseFloat(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"text-sm",children:"Preo/Quinzenal (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"1500.00",value:o.priceWeek??"",onChange:j=>x("priceWeek",j.target.value?parseFloat(j.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:r,children:"Cancelar"}),e.jsx(K,{onClick:()=>n(o,u),disabled:!o.label?.trim(),children:t?"Salvar Alteraes":"Adicionar"})]})]})})}function gF({className:t,...s}){return e.jsx("div",{"data-slot":"skeleton",className:Nt("bg-accent animate-pulse rounded-md",t),...s})}function vF({src:t,alt:s,fallbackSrc:n,loading:r,fetchPriority:o}){const[c,u]=m.useState(!1),[h,f]=m.useState(!1);m.useEffect(()=>{u(!1),f(!1)},[t]);const v=h?n:t;return e.jsxs("div",{className:"relative w-full h-full",children:[!c&&e.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-none overflow-hidden pointer-events-none",children:[e.jsx(gF,{className:"absolute inset-0 w-full h-full rounded-none"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-0 motion-reduce:animate-none",style:{background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.55) 50%, rgba(255,255,255,0) 100%)",width:"60%",height:"100%",transform:"translateX(-120%)",animation:"ooh_sweep 1.1s ease-in-out infinite"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-7 w-7 rounded-full border-2 border-black/20 border-t-black/60 animate-spin motion-reduce:animate-none"})}),e.jsx("style",{children:"@keyframes ooh_sweep{0%{transform:translateX(-120%)}100%{transform:translateX(220%)}}"})]}),e.jsx("img",{src:v,alt:s,draggable:!1,loading:r,fetchPriority:o,decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,onLoad:()=>u(!0),onError:()=>{if(!h){f(!0),u(!1);return}u(!0)}})]})}function yF({point:t,normalizeUploadsUrl:s,fallbackSrc:n}){const r=m.useMemo(()=>{const x=[],g=s(t.mainImageUrl)||n;x.push({src:g,label:"Imagem do ponto",alt:t.name});const j=Array.isArray(t.units)?t.units:[];for(const w of j){if(!w?.imageUrl)continue;const N=s(w.imageUrl);if(!N)continue;const C=w.unitType===za.SCREEN?"tela":"face",S=w.label?.trim();x.push({src:N,label:S?`Imagem da ${C}: ${S}`:`Imagem da ${C}`,alt:S?`${t.name} - ${S}`:`${t.name} - ${C}`})}return x},[t.mainImageUrl,t.name,t.units,s,n]),[o,c]=m.useState(0),u=m.useRef(null);m.useEffect(()=>{o>=r.length&&c(0)},[r.length]);const h=r.length>1,f=()=>c(x=>(x-1+r.length)%r.length),v=()=>c(x=>(x+1)%r.length);return e.jsxs("div",{className:"w-full h-full relative",onTouchStart:x=>{u.current=x.touches?.[0]?.clientX??null},onTouchEnd:x=>{const g=u.current;if(u.current=null,!h||g===null)return;const j=x.changedTouches?.[0]?.clientX;if(j===void 0)return;const w=g-j;Math.abs(w)<50||(w>0?v():f())},children:[e.jsx("div",{className:"w-full h-full overflow-hidden",children:e.jsx("div",{className:"h-full flex transition-transform duration-300 ease-out",style:{transform:`translate3d(-${o*100}%, 0, 0)`},children:r.map((x,g)=>e.jsx("div",{className:"w-full h-full",style:{flex:"0 0 100%",width:"100%"},children:e.jsx(vF,{src:x.src,alt:x.alt,fallbackSrc:n,loading:"lazy",fetchPriority:"auto"})},`${x.src}-${g}`))})}),e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-10 pointer-events-none",children:(()=>{const x=r[o]?.label??"",g=x.length>70?9:x.length>50?10:11;return e.jsx("div",{className:"inline-flex items-center justify-center border border-white/10 shadow-sm px-3 py-1.5 rounded-md min-w-[140px] max-w-[calc(100%-180px)] whitespace-normal break-words hyphens-auto text-center leading-tight",style:{fontSize:`${g}px`,backgroundColor:"#000",color:"#fff"},title:x,children:x})})()}),h&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button","aria-label":"Imagem anterior",className:"absolute left-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-full bg-black/40 hover:bg-black/60 text-white flex items-center justify-center",onClick:x=>{x.stopPropagation(),f()},children:e.jsx(rd,{className:"w-4 h-4"})}),e.jsx("button",{type:"button","aria-label":"Prxima imagem",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-full bg-black/40 hover:bg-black/60 text-white flex items-center justify-center",onClick:x=>{x.stopPropagation(),v()},children:e.jsx(Hl,{className:"w-4 h-4"})})]}),h&&e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-1.5",children:r.map((x,g)=>e.jsx("button",{type:"button","aria-label":`Ir para imagem ${g+1}`,className:`h-1.5 w-1.5 rounded-full transition-all ${g===o?"bg-white":"bg-white/50 hover:bg-white/80"}`,onClick:j=>{j.stopPropagation(),c(g)}},`dot-${g}`))})]})}function bF(){const{refreshPointsUsed:t}=Ho(),s=V=>{if(!V)return V??"";if(V.startsWith("uploads/"))return`/${V}`;if(V.startsWith("/uploads/"))return V;const re=V.indexOf("/uploads/");return re>=0?V.slice(re):V},[n,r]=m.useState(""),[o,c]=m.useState("all"),[u,h]=m.useState("all"),[f,v]=m.useState(1),x=40;m.useEffect(()=>{v(1)},[n,o,u]);const{mediaPoints:g,total:j,loading:w,error:N,refetch:C,uploadMediaPointImage:S}=pS({search:n||void 0,type:o==="all"?void 0:o,city:u==="all"?void 0:u,page:f,pageSize:x}),E=m.useMemo(()=>Math.max(1,Math.ceil((j||0)/x)),[j,x]);m.useEffect(()=>{f>E&&v(E)},[f,E]);const[_,k]=m.useState(!1),[T,M]=m.useState(null),[F,O]=m.useState({open:!1,point:null}),[Z,q]=m.useState({open:!1,point:null}),[$,X]=m.useState({open:!1,point:null}),[I,B]=m.useState(!1),{cities:te}=fS(),ue=te,Y=m.useMemo(()=>g.reduce((V,re)=>V+(re.units?re.units.length:0),0),[g]),ce=g,U=async(V,re)=>{try{const{id:ae,companyId:me,createdAt:oe,updatedAt:Pe,units:We,owners:Je,...tt}=V||{};let nt;if(T?.id?(nt=(await Ie.put(`/media-points/${T.id}`,tt)).data,ye.success("Ponto de mdia atualizado!")):(nt=(await Ie.post("/media-points",tt)).data,ye.success("Ponto de mdia criado!")),re&&nt?.id)try{await S(nt.id,re),ye.success("Imagem do ponto enviada!")}catch(ct){const wt=ct?.response?.data?.message||"Erro ao enviar imagem do ponto";ye.error(wt)}return k(!1),M(null),C(),await t(),nt}catch(ae){const me=ae?.response?.data?.message,oe=Array.isArray(me)?me.join(", "):me||"Erro ao salvar ponto de mdia";throw ye.error(oe),new Error(oe)}},ne=V=>{M(V),k(!0)};m.useEffect(()=>{const V=new URLSearchParams(window.location.search),re=V.get("pointId");if(!re)return;(async()=>{try{const oe=await Ie.get(`/media-points/${re}`);ne(oe.data)}catch{ye.error("No foi possvel abrir este ponto no inventrio.")}})(),V.delete("pointId");const ae=V.toString(),me=`${window.location.pathname}${ae?`?${ae}`:""}`;window.history.replaceState({},"",me)},[]);const Q=async V=>{const re={...V};delete re.id,re.name=`${V.name} (cpia)`;try{const ae=await Ie.post("/media-points",re);return ye.success("Ponto duplicado!"),C(),await t(),ae.data}catch(ae){const me=ae?.response?.data?.message||"Erro ao duplicar ponto";ye.error(me)}},z=async(V,re)=>{try{await Ie.put(`/media-points/${V}`,{showInMediaKit:re}),C()}catch(ae){const me=ae?.response?.data?.message||"Erro ao atualizar mdia kit";ye.error(me)}},se=async V=>{if(confirm("Deseja realmente excluir este ponto de mdia?"))try{await Ie.delete(`/media-points/${V}`),ye.success("Ponto de mdia excludo!"),C(),await t()}catch(re){const ae=re?.response?.data?.message||"Erro ao excluir ponto de mdia";ye.error(ae)}},G=()=>{const V=[["ID","Nome","Tipo","Subcategoria","Cidade","Estado","Impactos/Dia","Preo Mensal","Mdia Kit"].join(","),...g.map(me=>[me.id,me.name,me.type,me.subcategory||"",me.addressCity||"",me.addressState||"",me.dailyImpressions||0,me.basePriceMonth||0,me.showInMediaKit?"Sim":"No"].join(","))].join(`
`),re=new Blob([V],{type:"text/csv;charset=utf-8;"}),ae=document.createElement("a");ae.href=URL.createObjectURL(re),ae.download=`inventario_${new Date().toISOString().split("T")[0]}.csv`,ae.click()},ee=V=>{const re=V.units||[],ae=re.filter(me=>me.isActive);return{total:re.length,active:ae.length}};return e.jsxs("div",{className:"p-8",children:[w&&e.jsx("div",{children:"Carregando inventrio..."}),!w&&N&&e.jsx("div",{children:"Erro ao carregar inventrio."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventrio"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie pontos de mdia (MediaPoint) e unidades (MediaUnit)"})]}),e.jsxs(K,{className:"gap-2",onClick:()=>{M(null),k(!0)},children:[e.jsx(Sn,{className:"w-4 h-4"}),"Novo Ponto"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total de Pontos"}),e.jsx("p",{className:"text-gray-900",children:j})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(Xt.OOH),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pontos OOH"}),e.jsx("p",{className:"text-gray-900",children:g.filter(V=>V.type===Xt.OOH).length})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(Xt.DOOH),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pontos DOOH"}),e.jsx("p",{className:"text-gray-900",children:g.filter(V=>V.type===Xt.DOOH).length})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Unidades (Faces/Telas)"}),e.jsx("p",{className:"text-gray-900",children:Y})]})})]}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ce,{placeholder:"Buscar por nome, cidade, bairro ou subcategoria...",value:n,onChange:V=>r(V.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:o,onValueChange:V=>c(V),children:[e.jsx(Pt,{className:"w-full lg:w-40",children:e.jsx(At,{placeholder:"Tipo"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos os tipos"}),e.jsx(Oe,{value:Xt.OOH,children:"OOH"}),e.jsx(Oe,{value:Xt.DOOH,children:"DOOH"})]})]}),ue.length>0&&e.jsxs(_t,{value:u,onValueChange:V=>h(V),children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Cidade"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todas as cidades"}),ue.map(V=>e.jsx(Oe,{value:V,children:V},V))]})]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:()=>B(!0),children:[e.jsx(Jc,{className:"w-4 h-4"}),"Importar"]}),e.jsxs(K,{variant:"outline",className:"gap-2",onClick:G,children:[e.jsx(Dl,{className:"w-4 h-4"}),"Exportar"]})]})})}),n||o!=="all"||u!=="all"?e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[j," ",j===1?"ponto encontrado":"pontos encontrados"]})}):null,e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:ce.map(V=>{const re=ee(V),ae=V.type===Xt.OOH?"Faces":"Telas";return e.jsxs(Re,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative overflow-hidden rounded-t-xl",children:[e.jsx(yF,{point:V,normalizeUploadsUrl:s,fallbackSrc:"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800"}),e.jsx(Ke,{className:"absolute top-3 left-3 bg-indigo-500",children:V.type}),V.subcategory&&e.jsx(Ke,{variant:"outline",className:"absolute top-3 right-3 bg-white",children:V.subcategory})]}),e.jsxs(Le,{className:"pt-4",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:V.name}),e.jsxs("div",{className:"space-y-2 mb-4",children:[V.addressCity&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ia,{className:"w-4 h-4"}),e.jsxs("span",{children:[V.addressDistrict&&`${V.addressDistrict}, `,V.addressCity,V.addressState&&` - ${V.addressState}`]})]}),V.units&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:ae}),e.jsxs("span",{className:"text-gray-900",children:[re.active," / ",re.total," ativas"]})]}),V.dailyImpressions&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impactos/dia"}),e.jsxs("span",{className:"text-gray-900",children:[(V.dailyImpressions/1e3).toFixed(0),"k"]})]}),V.basePriceMonth&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Preo base"}),e.jsxs("span",{className:"text-gray-900",children:["R$ ",V.basePriceMonth.toLocaleString("pt-BR")]})]}),V.environment&&e.jsx(Ke,{variant:"outline",className:"text-xs",children:V.environment})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H9,{checked:V.showInMediaKit,onCheckedChange:me=>z(V.id,me)}),e.jsx("span",{className:"text-sm text-gray-600",children:"Mdia Kit"})]}),e.jsxs(R9,{children:[e.jsx(O9,{asChild:!0,children:e.jsx("button",{className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground h-8 w-8",onClick:me=>me.stopPropagation(),children:e.jsx(jk,{className:"w-4 h-4"})})}),e.jsxs(L9,{align:"end",children:[e.jsxs($c,{onClick:()=>ne(V),children:[e.jsx(ql,{className:"w-4 h-4 mr-2"}),"Editar ponto"]}),e.jsxs($c,{onClick:()=>X({open:!0,point:V}),children:[e.jsx(fp,{className:"w-4 h-4 mr-2"}),"Gerenciar unidades (",ae.toLowerCase(),")"]}),e.jsxs($c,{onClick:()=>O({open:!0,point:V}),children:[e.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Proprietrios / Empresas vinculadas"]}),e.jsxs($c,{onClick:()=>q({open:!0,point:V}),children:[e.jsx(Js,{className:"w-4 h-4 mr-2"}),"Contratos do ponto"]}),e.jsxs($c,{onClick:()=>Q(V),children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Duplicar ponto"]}),e.jsxs($c,{onClick:()=>se(V.id),children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Excluir ponto"]})]})]})]})]})]},V.id)})}),E>1&&ce.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Pgina ",f," de ",E,"  Mostrando ",ce.length," de ",j]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(K,{variant:"outline",size:"sm",disabled:f<=1,onClick:()=>v(V=>Math.max(1,V-1)),children:"Anterior"}),(()=>{const V=[];if(E<=7)for(let re=1;re<=E;re++)V.push(re);else{V.push(1),f>3&&V.push("...");const re=Math.max(2,f-1),ae=Math.min(E-1,f+1);for(let me=re;me<=ae;me++)V.push(me);f<E-2&&V.push("..."),V.push(E)}return V.map((re,ae)=>{if(re==="...")return e.jsx("span",{className:"px-2 text-gray-500",children:""},`ellipsis-${ae}`);const me=re;return e.jsx(K,{variant:me===f?"default":"outline",size:"sm",onClick:()=>v(me),children:me},me)})})(),e.jsx(K,{variant:"outline",size:"sm",disabled:f>=E,onClick:()=>v(V=>Math.min(E,V+1)),children:"Prxima"})]})]}),ce.length===0&&e.jsx(Re,{children:e.jsxs(Le,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum ponto encontrado com os filtros selecionados"}),e.jsx(K,{variant:"outline",onClick:()=>{r(""),c("all"),h("all")},children:"Limpar Filtros"})]})}),e.jsx(lF,{open:_,onOpenChange:V=>{k(V),V||M(null)},mediaPoint:T,onSave:U}),F.point&&e.jsx(cF,{open:F.open,onOpenChange:V=>O({open:V,point:V?F.point:null}),mediaPointId:F.point.id,mediaPointName:F.point.name}),Z.point&&e.jsx(uF,{open:Z.open,onOpenChange:V=>q({open:V,point:V?Z.point:null}),mediaPointId:Z.point.id,mediaPointName:Z.point.name}),$.point&&e.jsx(fF,{open:$.open,onOpenChange:V=>X({open:V,point:V?$.point:null}),mediaPointId:$.point.id,mediaPointName:$.point.name,mediaPointType:$.point.type}),e.jsx(jF,{open:I,onOpenChange:B,onImported:async()=>{v(1),C(),await t()}})]})}function jF({open:t,onOpenChange:s,onImported:n}){const[r,o]=m.useState(null),[c,u]=m.useState(Xt.OOH),[h,f]=m.useState("xlsx"),[v,x]=m.useState(!1),[g,j]=m.useState([]),w=()=>{o(null),j([]),x(!1),u(Xt.OOH),f("xlsx")};m.useEffect(()=>{t||w()},[t]);const N=async(k,T)=>{try{x(!0);const M=await Ie.get("/media-points/import-template",{params:{type:k,format:T},responseType:"blob"}),F=window.URL.createObjectURL(M.data),O=document.createElement("a");O.href=F,O.download=`template_inventario_${String(k).toLowerCase()}.${T}`,document.body.appendChild(O),O.click(),O.remove(),window.URL.revokeObjectURL(F),ye.success("Modelo baixado!")}catch(M){const F=M?.response?.data?.message||M?.message||"Erro ao baixar modelo";ye.error(F)}finally{x(!1)}},C=async()=>{if(!r){ye.error("Selecione um arquivo .xlsx ou .csv");return}const k=r.name.toLowerCase(),T=k.endsWith(".csv"),M=k.endsWith(".xlsx");if(!T&&!M){ye.error("Formato invlido. Envie um arquivo .xlsx ou .csv");return}const F=10*1024*1024;if(r.size>F){ye.error("Arquivo muito grande (mx. 10MB).");return}x(!0),j([]);try{const O=new FormData;O.append("file",r);const Z=await Ie.post("/media-points/import",O,{params:{defaultType:c},headers:{"Content-Type":"multipart/form-data"}});ye.success(`Importao concluda! ${Z.data?.created??0} ponto(s) criado(s).`),await n?.(),s(!1)}catch(O){const Z=O?.response?.data,q=Z?.message||O?.message||"Erro ao importar. Verifique o arquivo e tente novamente.",$=Array.isArray(Z?.errors)?Z.errors.map(X=>String(X)):[];j($),ye.error(typeof q=="string"?q:"Erro ao importar")}finally{x(!1)}},S=["name","addressCity","addressState","latitude","longitude"],E=["addressStreet","addressNumber","addressDistrict","addressZipcode","addressCountry","subcategory","description","dailyImpressions","environment","socialClasses","showInMediaKit","basePriceMonth","basePriceWeek (Preo Quinzenal)"],_=["productionCosts_lona","productionCosts_adesivo","productionCosts_vinil","productionCosts_montagem"];return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{children:[e.jsx(Rs,{children:e.jsx(Os,{children:"Importar Inventrio"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Importao em Lote"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Importe mltiplos pontos de mdia via Excel (.xlsx) ou CSV (.csv). Imagens no fazem parte do template (devem ser enviadas manualmente no sistema)."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo do Template"}),e.jsxs(_t,{value:c,onValueChange:k=>u(k),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:Xt.OOH,children:"OOH"}),e.jsx(Oe,{value:Xt.DOOH,children:"DOOH"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Formato"}),e.jsxs(_t,{value:h,onValueChange:k=>f(k),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"xlsx",children:"Excel (.xlsx)"}),e.jsx(Oe,{value:"csv",children:"CSV (.csv)"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Baixar Modelo"}),e.jsxs(K,{variant:"outline",className:"w-full",onClick:()=>N(c,h),disabled:v,children:[e.jsx(Dl,{className:"w-4 h-4 mr-2"}),"Baixar Modelo ",c," (",h.toUpperCase(),")"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Selecione o arquivo"}),e.jsx(Ce,{type:"file",accept:".xlsx,.csv",onChange:k=>o(k.target.files?.[0]||null),disabled:v}),r&&e.jsxs("p",{className:"text-sm text-green-600",children:[" ",r.name]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded text-xs text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas obrigatrias (OOH e DOOH):"})}),e.jsx("p",{className:"font-mono break-words",children:S.join(", ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas opcionais (OOH e DOOH):"})}),e.jsx("p",{className:"font-mono break-words",children:E.join(", ")})]}),c===Xt.OOH&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas opcionais adicionais (somente OOH):"})}),e.jsx("p",{className:"font-mono break-words",children:_.join(", ")})]})]}),g.length>0&&e.jsxs("div",{className:"p-3 bg-red-50 rounded text-xs text-red-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Erros encontrados:"}),e.jsx("ul",{className:"list-disc ml-5 space-y-1 max-h-40 overflow-auto",children:g.slice(0,50).map((k,T)=>e.jsx("li",{children:k},T))}),g.length>50&&e.jsx("p",{className:"mt-2 text-red-600",children:"Mostrando os primeiros 50 erros."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:()=>s(!1),disabled:v,children:"Cancelar"}),e.jsx(K,{onClick:C,disabled:!r||v,children:"Importar Pontos"})]})]})]})})}function Vg(t,s,n,r,o,c){if(o-r<=n)return;const u=r+o>>1;TS(t,s,u,r,o,c%2),Vg(t,s,n,r,u-1,c+1),Vg(t,s,n,u+1,o,c+1)}function TS(t,s,n,r,o,c){for(;o>r;){if(o-r>600){const v=o-r+1,x=n-r+1,g=Math.log(v),j=.5*Math.exp(2*g/3),w=.5*Math.sqrt(g*j*(v-j)/v)*(x-v/2<0?-1:1),N=Math.max(r,Math.floor(n-x*j/v+w)),C=Math.min(o,Math.floor(n+(v-x)*j/v+w));TS(t,s,n,N,C,c)}const u=s[2*n+c];let h=r,f=o;for(lu(t,s,r,n),s[2*o+c]>u&&lu(t,s,r,o);h<f;){for(lu(t,s,h,f),h++,f--;s[2*h+c]<u;)h++;for(;s[2*f+c]>u;)f--}s[2*r+c]===u?lu(t,s,r,f):(f++,lu(t,s,f,o)),f<=n&&(r=f+1),n<=f&&(o=f-1)}}function lu(t,s,n,r){eg(t,n,r),eg(s,2*n,2*r),eg(s,2*n+1,2*r+1)}function eg(t,s,n){const r=t[s];t[s]=t[n],t[n]=r}function NF(t,s,n,r,o,c,u){const h=[0,t.length-1,0],f=[];let v,x;for(;h.length;){const g=h.pop(),j=h.pop(),w=h.pop();if(j-w<=u){for(let S=w;S<=j;S++)v=s[2*S],x=s[2*S+1],v>=n&&v<=o&&x>=r&&x<=c&&f.push(t[S]);continue}const N=Math.floor((w+j)/2);v=s[2*N],x=s[2*N+1],v>=n&&v<=o&&x>=r&&x<=c&&f.push(t[N]);const C=(g+1)%2;(g===0?n<=v:r<=x)&&(h.push(w),h.push(N-1),h.push(C)),(g===0?o>=v:c>=x)&&(h.push(N+1),h.push(j),h.push(C))}return f}function wF(t,s,n,r,o,c){const u=[0,t.length-1,0],h=[],f=o*o;for(;u.length;){const v=u.pop(),x=u.pop(),g=u.pop();if(x-g<=c){for(let S=g;S<=x;S++)Zj(s[2*S],s[2*S+1],n,r)<=f&&h.push(t[S]);continue}const j=Math.floor((g+x)/2),w=s[2*j],N=s[2*j+1];Zj(w,N,n,r)<=f&&h.push(t[j]);const C=(v+1)%2;(v===0?n-o<=w:r-o<=N)&&(u.push(g),u.push(j-1),u.push(C)),(v===0?n+o>=w:r+o>=N)&&(u.push(j+1),u.push(x),u.push(C))}return h}function Zj(t,s,n,r){const o=t-n,c=s-r;return o*o+c*c}const CF=t=>t[0],SF=t=>t[1];class Kj{constructor(s,n=CF,r=SF,o=64,c=Float64Array){this.nodeSize=o,this.points=s;const u=s.length<65536?Uint16Array:Uint32Array,h=this.ids=new u(s.length),f=this.coords=new c(s.length*2);for(let v=0;v<s.length;v++)h[v]=v,f[2*v]=n(s[v]),f[2*v+1]=r(s[v]);Vg(h,f,o,0,h.length-1,0)}range(s,n,r,o){return NF(this.ids,this.coords,s,n,r,o,this.nodeSize)}within(s,n,r){return wF(this.ids,this.coords,s,n,r,this.nodeSize)}}const _F={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},ap=Math.fround||(t=>(s=>(t[0]=+s,t[0])))(new Float32Array(1));class AF{constructor(s){this.options=bu(Object.create(_F),s),this.trees=new Array(this.options.maxZoom+1)}load(s){const{log:n,minZoom:r,maxZoom:o,nodeSize:c}=this.options;n&&console.time("total time");const u=`prepare ${s.length} points`;n&&console.time(u),this.points=s;let h=[];for(let f=0;f<s.length;f++)s[f].geometry&&h.push(EF(s[f],f));this.trees[o+1]=new Kj(h,Xj,Yj,c,Float32Array),n&&console.timeEnd(u);for(let f=o;f>=r;f--){const v=+Date.now();h=this._cluster(h,f),this.trees[f]=new Kj(h,Xj,Yj,c,Float32Array),n&&console.log("z%d: %d clusters in %dms",f,h.length,+Date.now()-v)}return n&&console.timeEnd("total time"),this}getClusters(s,n){let r=((s[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,s[1]));let c=s[2]===180?180:((s[2]+180)%360+360)%360-180;const u=Math.max(-90,Math.min(90,s[3]));if(s[2]-s[0]>=360)r=-180,c=180;else if(r>c){const x=this.getClusters([r,o,180,u],n),g=this.getClusters([-180,o,c,u],n);return x.concat(g)}const h=this.trees[this._limitZoom(n)],f=h.range($h(r),zh(u),$h(c),zh(o)),v=[];for(const x of f){const g=h.points[x];v.push(g.numPoints?Qj(g):this.points[g.index])}return v}getChildren(s){const n=this._getOriginId(s),r=this._getOriginZoom(s),o="No cluster with the specified id.",c=this.trees[r];if(!c)throw new Error(o);const u=c.points[n];if(!u)throw new Error(o);const h=this.options.radius/(this.options.extent*Math.pow(2,r-1)),f=c.within(u.x,u.y,h),v=[];for(const x of f){const g=c.points[x];g.parentId===s&&v.push(g.numPoints?Qj(g):this.points[g.index])}if(v.length===0)throw new Error(o);return v}getLeaves(s,n,r){n=n||10,r=r||0;const o=[];return this._appendLeaves(o,s,n,r,0),o}getTile(s,n,r){const o=this.trees[this._limitZoom(s)],c=Math.pow(2,s),{extent:u,radius:h}=this.options,f=h/u,v=(r-f)/c,x=(r+1+f)/c,g={features:[]};return this._addTileFeatures(o.range((n-f)/c,v,(n+1+f)/c,x),o.points,n,r,c,g),n===0&&this._addTileFeatures(o.range(1-f/c,v,1,x),o.points,c,r,c,g),n===c-1&&this._addTileFeatures(o.range(0,v,f/c,x),o.points,-1,r,c,g),g.features.length?g:null}getClusterExpansionZoom(s){let n=this._getOriginZoom(s)-1;for(;n<=this.options.maxZoom;){const r=this.getChildren(s);if(n++,r.length!==1)break;s=r[0].properties.cluster_id}return n}_appendLeaves(s,n,r,o,c){const u=this.getChildren(n);for(const h of u){const f=h.properties;if(f&&f.cluster?c+f.point_count<=o?c+=f.point_count:c=this._appendLeaves(s,f.cluster_id,r,o,c):c<o?c++:s.push(h),s.length===r)break}return c}_addTileFeatures(s,n,r,o,c,u){for(const h of s){const f=n[h],v=f.numPoints;let x,g,j;if(v)x=DS(f),g=f.x,j=f.y;else{const C=this.points[f.index];x=C.properties,g=$h(C.geometry.coordinates[0]),j=zh(C.geometry.coordinates[1])}const w={type:1,geometry:[[Math.round(this.options.extent*(g*c-r)),Math.round(this.options.extent*(j*c-o))]],tags:x};let N;v?N=f.id:this.options.generateId?N=f.index:this.points[f.index].id&&(N=this.points[f.index].id),N!==void 0&&(w.id=N),u.features.push(w)}}_limitZoom(s){return Math.max(this.options.minZoom,Math.min(Math.floor(+s),this.options.maxZoom+1))}_cluster(s,n){const r=[],{radius:o,extent:c,reduce:u,minPoints:h}=this.options,f=o/(c*Math.pow(2,n));for(let v=0;v<s.length;v++){const x=s[v];if(x.zoom<=n)continue;x.zoom=n;const g=this.trees[n+1],j=g.within(x.x,x.y,f),w=x.numPoints||1;let N=w;for(const C of j){const S=g.points[C];S.zoom>n&&(N+=S.numPoints||1)}if(N>w&&N>=h){let C=x.x*w,S=x.y*w,E=u&&w>1?this._map(x,!0):null;const _=(v<<5)+(n+1)+this.points.length;for(const k of j){const T=g.points[k];if(T.zoom<=n)continue;T.zoom=n;const M=T.numPoints||1;C+=T.x*M,S+=T.y*M,T.parentId=_,u&&(E||(E=this._map(x,!0)),u(E,this._map(T)))}x.parentId=_,r.push(PF(C/N,S/N,_,N,E))}else if(r.push(x),N>1)for(const C of j){const S=g.points[C];S.zoom<=n||(S.zoom=n,r.push(S))}}return r}_getOriginId(s){return s-this.points.length>>5}_getOriginZoom(s){return(s-this.points.length)%32}_map(s,n){if(s.numPoints)return n?bu({},s.properties):s.properties;const r=this.points[s.index].properties,o=this.options.map(r);return n&&o===r?bu({},o):o}}function PF(t,s,n,r,o){return{x:ap(t),y:ap(s),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:o}}function EF(t,s){const[n,r]=t.geometry.coordinates;return{x:ap($h(n)),y:ap(zh(r)),zoom:1/0,index:s,parentId:-1}}function Qj(t){return{type:"Feature",id:t.id,properties:DS(t),geometry:{type:"Point",coordinates:[kF(t.x),TF(t.y)]}}}function DS(t){const s=t.numPoints,n=s>=1e4?`${Math.round(s/1e3)}k`:s>=1e3?`${Math.round(s/100)/10}k`:s;return bu(bu({},t.properties),{cluster:!0,cluster_id:t.id,point_count:s,point_count_abbreviated:n})}function $h(t){return t/360+.5}function zh(t){const s=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+s)/(1-s))/Math.PI;return n<0?0:n>1?1:n}function kF(t){return(t-.5)*360}function TF(t){const s=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(s))/Math.PI-90}function bu(t,s){for(const n in s)t[n]=s[n];return t}function Xj(t){return t.x}function Yj(t){return t.y}function pv({...t}){return e.jsx(O0,{"data-slot":"sheet",...t})}function DF({...t}){return e.jsx(L0,{"data-slot":"sheet-portal",...t})}const IS=m.forwardRef(({className:t,...s},n)=>e.jsx(zu,{ref:n,"data-slot":"sheet-overlay",className:Nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));IS.displayName=zu.displayName;function fv({className:t,children:s,side:n="right",hideOverlay:r=!1,overlayClassName:o,...c}){return e.jsxs(DF,{children:[r?null:e.jsx(IS,{className:o}),e.jsxs(F0,{"data-slot":"sheet-content",className:Nt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...c,children:[s,e.jsxs(Rp,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(Ca,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function xv({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:Nt("flex flex-col gap-1.5 p-4",t),...s})}function IF({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-footer",className:Nt("mt-auto flex flex-col gap-2 p-4",t),...s})}function gv({className:t,...s}){return e.jsx($0,{"data-slot":"sheet-title",className:Nt("text-foreground font-semibold",t),...s})}function MS({className:t,...s}){return e.jsx(z0,{"data-slot":"sheet-description",className:Nt("text-muted-foreground text-sm",t),...s})}var RS="Toggle",OS=m.forwardRef((t,s)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...c}=t,[u,h]=hr({prop:n,onChange:o,defaultProp:r??!1,caller:RS});return e.jsx(Tt.button,{type:"button","aria-pressed":u,"data-state":u?"on":"off","data-disabled":t.disabled?"":void 0,...c,ref:s,onClick:lt(t.onClick,()=>{t.disabled||h(!u)})})});OS.displayName=RS;var Xo="ToggleGroup",[LS]=Pa(Xo,[xd]),FS=xd(),vv=Ue.forwardRef((t,s)=>{const{type:n,...r}=t;if(n==="single"){const o=r;return e.jsx(MF,{...o,ref:s})}if(n==="multiple"){const o=r;return e.jsx(RF,{...o,ref:s})}throw new Error(`Missing prop \`type\` expected on \`${Xo}\``)});vv.displayName=Xo;var[$S,zS]=LS(Xo),MF=Ue.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...c}=t,[u,h]=hr({prop:n,defaultProp:r??"",onChange:o,caller:Xo});return e.jsx($S,{scope:t.__scopeToggleGroup,type:"single",value:Ue.useMemo(()=>u?[u]:[],[u]),onItemActivate:h,onItemDeactivate:Ue.useCallback(()=>h(""),[h]),children:e.jsx(BS,{...c,ref:s})})}),RF=Ue.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...c}=t,[u,h]=hr({prop:n,defaultProp:r??[],onChange:o,caller:Xo}),f=Ue.useCallback(x=>h((g=[])=>[...g,x]),[h]),v=Ue.useCallback(x=>h((g=[])=>g.filter(j=>j!==x)),[h]);return e.jsx($S,{scope:t.__scopeToggleGroup,type:"multiple",value:u,onItemActivate:f,onItemDeactivate:v,children:e.jsx(BS,{...c,ref:s})})});vv.displayName=Xo;var[OF,LF]=LS(Xo),BS=Ue.forwardRef((t,s)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:c,dir:u,loop:h=!0,...f}=t,v=FS(n),x=od(u),g={role:"group",dir:x,...f};return e.jsx(OF,{scope:n,rovingFocus:o,disabled:r,children:o?e.jsx(tv,{asChild:!0,...v,orientation:c,dir:x,loop:h,children:e.jsx(Tt.div,{...g,ref:s})}):e.jsx(Tt.div,{...g,ref:s})})}),rp="ToggleGroupItem",US=Ue.forwardRef((t,s)=>{const n=zS(rp,t.__scopeToggleGroup),r=LF(rp,t.__scopeToggleGroup),o=FS(t.__scopeToggleGroup),c=n.value.includes(t.value),u=r.disabled||t.disabled,h={...t,pressed:c,disabled:u},f=Ue.useRef(null);return r.rovingFocus?e.jsx(sv,{asChild:!0,...o,focusable:!u,active:c,ref:f,children:e.jsx(Jj,{...h,ref:s})}):e.jsx(Jj,{...h,ref:s})});US.displayName=rp;var Jj=Ue.forwardRef((t,s)=>{const{__scopeToggleGroup:n,value:r,...o}=t,c=zS(rp,n),u={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},h=c.type==="single"?u:void 0;return e.jsx(OS,{...h,...o,ref:s,onPressedChange:f=>{f?c.onItemActivate(r):c.onItemDeactivate(r)}})}),FF=vv,$F=US;const zF=g0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),VS=m.createContext({size:"default",variant:"default"});function BF({className:t,variant:s,size:n,children:r,...o}){return e.jsx(FF,{"data-slot":"toggle-group","data-variant":s,"data-size":n,className:Nt("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",t),...o,children:e.jsx(VS.Provider,{value:{variant:s,size:n},children:r})})}function jh({className:t,children:s,variant:n,size:r,...o}){const c=m.useContext(VS);return e.jsx($F,{"data-slot":"toggle-group-item","data-variant":c.variant||n,"data-size":c.size||r,className:Nt(zF({variant:c.variant||n,size:c.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...o,children:s})}const Bh=new Map,tg=new Map,eN=2e4,Hg=new Map,sg=new Map,UF=3e4;function mr(t){const s=String(t??"").trim();return s.length?s:void 0}function HS(t){if(!t)return;const n=(Array.isArray(t)?t:[t]).filter(Boolean);if(n.length)return[...n].sort()}function Yp(t){if(!(!t||!t.length))return[...t].sort()}function VF(t){const s=HS(t.availability)?.join(",")??"",n=Yp(t.layers)?.join(",")??"";return[t.bbox??"",String(t.zoom??""),t.at??"",t.type??"",mr(t.city)??"",mr(t.state)??"",mr(t.district)??"",typeof t.showInMediaKit=="boolean"?String(t.showInMediaKit):"",s,n].join("|")}async function HF(t,s){return t.bbox?(await Ie.get("/media-points/map",{params:{bbox:t.bbox,zoom:t.zoom,at:t.at,type:t.type,city:mr(t.city),state:mr(t.state),district:mr(t.district),showInMediaKit:t.showInMediaKit,availability:HS(t.availability),layers:Yp(t.layers)?.join(",")??void 0},signal:s})).data??[]:[]}function qF(){Bh.clear(),Hg.clear()}function WF(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=m.useRef(null),f=m.useMemo(()=>VF(t),[t.bbox,t.zoom,t.at,t.type,t.city,t.state,t.district,t.showInMediaKit,t.availability,(t.layers??[]).join("|")]),v=async(x=!1)=>{try{if(!t.bbox)return h.current?.abort(),n([]),o(!1),u(null),[];const g=Date.now(),j=Bh.get(f);if(!x&&j&&g-j.ts<eN)return n(j.data),o(!1),u(null),j.data;const w=tg.get(f);if(w){o(!0);const E=await w;return n(E),o(!1),u(null),E}h.current?.abort();const N=new AbortController;h.current=N,o(!0),u(null);const C=HF(t,N.signal).then(E=>(Bh.set(f,{ts:Date.now(),data:E}),E)).finally(()=>{tg.delete(f)});tg.set(f,C);const S=await C;return n(S),S}catch(g){const j=String(g?.message??"");return j.includes("canceled")||j.includes("abort")?s:(u(g),[])}finally{o(!1)}};return m.useEffect(()=>{let x=!0;const g=Bh.get(f);g&&Date.now()-g.ts<eN&&(n(g.data),u(null),o(!1));const j=window.setTimeout(()=>{x&&v(!1)},250);return()=>{x=!1,window.clearTimeout(j),h.current?.abort()}},[f]),{points:s,loading:r,error:c,refetch:(x=!0)=>v(x)}}async function GF(t,s){return(await Ie.get(`/media-points/${t}/details`,{params:{at:s}})).data}function ZF(t){const s=String(t.q||"").trim().toLowerCase(),n=Yp(t.layers)?.join(",")??"";return[s,String(t.limit??""),t.type??"",mr(t.city)??"",mr(t.state)??"",mr(t.district)??"",typeof t.showInMediaKit=="boolean"?String(t.showInMediaKit):"",t.bbox??"",n].join("|")}async function KF(t,s){const n=String(t.q||"").trim();if(n.length<2)return[];const r=ZF(t),o=Date.now(),c=Hg.get(r);if(c&&o-c.ts<UF)return c.data;const u=sg.get(r);if(u)return u;const h=Promise.resolve(Ie.get("/media-points/suggestions",{params:{q:n,limit:t.limit,type:t.type,city:mr(t.city),state:mr(t.state),district:mr(t.district),showInMediaKit:t.showInMediaKit,bbox:t.bbox,layers:Yp(t.layers)?.join(",")??void 0},signal:s})).then(f=>{const v=f.data??[];return Hg.set(r,{ts:Date.now(),data:v}),v}).finally(()=>{sg.delete(r)});return sg.set(r,h),h}async function QF(t,s){return s?(await Ie.put(`/media-points/${t}/favorite`)).data:(await Ie.delete(`/media-points/${t}/favorite`)).data}const XF="ONE_MEDIA_MEDIAMAP_PRESELECT_POINT_IDS";function YF(t,s){let n=!1;for(let r=0,o=s.length-1;r<s.length;o=r++){const c=s[r].lng,u=s[r].lat,h=s[o].lng,f=s[o].lat;u>t.lat!=f>t.lat&&t.lng<(h-c)*(t.lat-u)/(f-u+0)+c&&(n=!n)}return n}function JF(t,s){const n=Math.min(t.lat,s.lat),r=Math.max(t.lat,s.lat),o=Math.min(t.lng,s.lng),c=Math.max(t.lng,s.lng);return[{lat:n,lng:o},{lat:n,lng:c},{lat:r,lng:c},{lat:r,lng:o}]}function tN(t){return Bu.latLngBounds(t.map(s=>[s.lat,s.lng]))}function Nh(t){return Number(t.toFixed(6))}function e$(t){const s=t.getBounds(),n=Nh(s.getWest()),r=Nh(s.getSouth()),o=Nh(s.getEast()),c=Nh(s.getNorth()),u=[n,r,o,c],h=`${n},${r},${o},${c}`,f=t.getZoom();return{bboxStr:h,bboxArr:u,zoom:f}}function t$(t){const s=t<10?34:t<100?38:44;return Bu.divIcon({html:`
      <div style="
        width:${s}px;
        height:${s}px;
        border-radius:${s}px;
        background:rgba(79,70,229,0.92);
        color:white;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:12px;
        font-weight:600;
        border:2px solid rgba(255,255,255,0.9);
        box-shadow:0 6px 18px rgba(0,0,0,0.18);
      ">
        ${t}
      </div>
    `,className:"one-media-cluster-icon",iconSize:[s,s],iconAnchor:[s/2,s/2]})}function s$(t){return t.facesOccupiedCount>0&&t.facesOccupiedCount===t.facesTotal?"rgba(239,68,68,0.95)":t.facesOccupiedCount>0?"rgba(245,158,11,0.95)":t.facesNegotiationCount>0?"rgba(168,85,247,0.95)":"rgba(34,197,94,0.95)"}function n$(t){const s=s$(t),n=t.isFavorite?'<div style="position:absolute; top:-6px; right:-6px; width:18px; height:18px; border-radius:18px; background:rgba(17,24,39,0.9); border:2px solid rgba(255,255,255,0.9); display:flex; align-items:center; justify-content:center; font-size:11px;"></div>':"";return Bu.divIcon({html:`
      <div style="position:relative;">
        <div style="
          width:22px;
          height:22px;
          border-radius:22px;
          background:${s};
          border:2px solid rgba(255,255,255,0.95);
          box-shadow:0 6px 18px rgba(0,0,0,0.18);
        "></div>
        ${n}
      </div>
    `,className:"one-media-point-icon",iconSize:[22,22],iconAnchor:[11,11]})}function ng(t){return t.facesTotal>0&&t.facesOccupiedCount===t.facesTotal?"Totalmente ocupada":t.facesOccupiedCount>0?"Parcialmente ocupada":t.facesNegotiationCount>0?"Em negociao":"Livre"}async function sN(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const s=document.createElement("textarea");return s.value=t,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch{return!1}}}function a$({mapRef:t,onViewportChange:s}){const n=nC({moveend(){s(n)},zoomend(){s(n)}});return m.useEffect(()=>{t.current=n;const r=window.setTimeout(()=>{try{n.invalidateSize()}catch{}},0);return s(n),()=>window.clearTimeout(r)},[]),null}function r$({drawMode:t,rectStart:s,onAddVertex:n,onRectStart:r,onRectEnd:o,onCompleteRectangle:c}){const u=nC({click(h){if(t==="polygon"&&n({lat:h.latlng.lat,lng:h.latlng.lng}),t==="rectangle"){const f={lat:h.latlng.lat,lng:h.latlng.lng};if(!s){r(f),o(f);return}c(s,f)}},mousemove(h){t==="rectangle"&&s&&o({lat:h.latlng.lat,lng:h.latlng.lng})}});return m.useEffect(()=>(t!=="none"?u.doubleClickZoom.disable():u.doubleClickZoom.enable(),()=>{u.doubleClickZoom.enable()}),[u,t]),null}function i$(){const t=is(),s=m.useRef(null),n=m.useRef(null),r=m.useRef(null),[o,c]=m.useState(void 0),[u,h]=m.useState(null),[f,v]=m.useState(12),[x,g]=m.useState(!1),[j,w]=m.useState("ALL"),[N,C]=m.useState(""),[S,E]=m.useState(""),[_,k]=m.useState(""),[T,M]=m.useState(""),[F,O]=m.useState(!1),[Z,q]=m.useState([]),[$,X]=m.useState("none"),[I,B]=m.useState([]),[te,ue]=m.useState(null),[Y,ce]=m.useState(null),[U,ne]=m.useState(null),[Q,z]=m.useState([]),[se,G]=m.useState(""),[ee,V]=m.useState([]),[re,ae]=m.useState(!1),[me,oe]=m.useState(!1),[Pe,We]=m.useState(null),[Je,tt]=m.useState(!1),[nt,ct]=m.useState("details"),[wt,pt]=m.useState(null),[It,Lt]=m.useState([]),[J,ve]=m.useState(null),[xe,Ve]=m.useState(!1),[de,Ne]=m.useState(null),Be=Z.length?Z:void 0,{points:He,loading:gt,error:pe,refetch:$e}=WF({bbox:o,zoom:f,type:j==="ALL"?void 0:j,city:S,state:_,district:T,showInMediaKit:F?!0:void 0,availability:N||void 0,layers:Be}),Xe=U?Q:He,mt=m.useMemo(()=>Xe.filter(Ee=>Number.isFinite(Ee.latitude)&&Number.isFinite(Ee.longitude)).map(Ee=>({type:"Feature",properties:{cluster:!1,pointId:Ee.id,...Ee},geometry:{type:"Point",coordinates:[Ee.longitude,Ee.latitude]}})),[Xe]),fe=m.useMemo(()=>{const Ee=new AF({radius:60,maxZoom:20});return Ee.load(mt),Ee},[mt]),Ye=m.useMemo(()=>u?fe.getClusters(u,Math.round(f)):[],[fe,u,f]);m.useEffect(()=>{if(!U||U.length<3){z([]);return}const Ee=U,rt=(He??[]).filter(it=>!Number.isFinite(it.latitude)||!Number.isFinite(it.longitude)?!1:YF({lat:it.latitude,lng:it.longitude},Ee));z(rt)},[U,He]),m.useEffect(()=>{const Ee=rt=>{if(!re)return;const it=n.current;it&&rt.target&&!it.contains(rt.target)&&ae(!1)};return document.addEventListener("mousedown",Ee),()=>document.removeEventListener("mousedown",Ee)},[re]),m.useEffect(()=>{const Ee=String(se||"").trim();if(We(null),Ee.length<2){r.current?.abort(),oe(!1),V([]);return}const rt=window.setTimeout(async()=>{try{r.current?.abort();const it=new AbortController;r.current=it,oe(!0);const we=await KF({q:Ee,limit:10,bbox:o,type:j==="ALL"?void 0:j,city:S,state:_,district:T,showInMediaKit:F?!0:void 0,layers:Be},it.signal);V(we||[]),ae(!0)}catch(it){const we=String(it?.message??"");if(we.includes("canceled")||we.includes("abort"))return;We("Erro ao buscar sugestes")}finally{oe(!1)}},250);return()=>window.clearTimeout(rt)},[se,o,j,S,_,T,F,Be]);const dt=Ee=>{const{bboxStr:rt,bboxArr:it,zoom:we}=e$(Ee);c(rt),h(it),v(we),g(!0)},kt=Ee=>{X(Ee),B([]),ue(null),ce(null),ne(null),z([]),ye.message(Ee==="polygon"?"Modo desenho: polgono":"Modo desenho: retngulo")},ht=()=>{X("none"),B([]),ue(null),ce(null)},Ft=()=>{ht(),ne(null),z([])},ms=()=>{if(I.length<3){ye.error("Adicione pelo menos 3 pontos para formar um polgono");return}const Ee=[...I];ne(Ee),X("none"),B([]);const rt=tN(Ee).pad(.05);s.current?.fitBounds(rt,{animate:!0}),ct("selected"),tt(!0)},hs=(Ee,rt)=>{const it=JF(Ee,rt);ne(it),X("none"),ue(null),ce(null);const we=tN(it).pad(.05);s.current?.fitBounds(we,{animate:!0}),ct("selected"),tt(!0)},Ps=()=>{const Ee=(Q??[]).map(rt=>rt.id).filter(Boolean);if(!Ee.length){ye.error("Nenhum ponto selecionado");return}try{sessionStorage.setItem(XF,JSON.stringify(Ee))}catch{}t("/app/proposals?new=1"),tt(!1)};m.useEffect(()=>{if($==="none")return;const Ee=rt=>{rt.key==="Escape"&&ht()};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},[$]);const Yt=async(Ee,rt)=>{pt(Ee),ct("details"),tt(!0),ve(null),Ne(null),Ve(!0);try{const it=await GF(Ee);if(ve(it),rt?.center!==!1&&it?.point?.latitude&&it?.point?.longitude){const we=Number(it.point.latitude),Fe=Number(it.point.longitude);Number.isFinite(we)&&Number.isFinite(Fe)&&s.current?.setView([we,Fe],Math.max(16,s.current?.getZoom?.()??16),{animate:!0})}}catch{Ne("Erro ao carregar detalhes do ponto")}finally{Ve(!1)}},Gs=(Ee,rt)=>{if(!u)return;const we=fe.getLeaves(Ee,rt).map(Fe=>Fe?.properties).filter(Boolean);Lt(we),ct("cluster"),tt(!0)},Ct=Ee=>{G(Ee.name),ae(!1),s.current&&s.current.setView([Ee.latitude,Ee.longitude],Math.max(16,s.current.getZoom()||16),{animate:!0}),Yt(Ee.id,{center:!1})},Mt=async()=>{if(!J?.point?.id)return;const Ee=J.point.id,rt=!J.point.isFavorite;ve(it=>it&&{...it,point:{...it.point,isFavorite:rt}});try{await QF(Ee,rt),qF(),$e(!0),ye.success(rt?"Adicionado aos favoritos":"Removido dos favoritos")}catch{ve(it=>it&&{...it,point:{...it.point,isFavorite:!rt}}),ye.error("No foi possvel atualizar favorito")}},Wt=async()=>{if(!J?.point?.id)return;const Ee=`${window.location.origin}/app/mediamap?pointId=${J.point.id}`,rt=await sN(Ee);ye[rt?"success":"error"](rt?"Link copiado!":"No foi possvel copiar o link")},Es=async()=>{if(!J?.point)return;const Ee=J.point.latitude,rt=J.point.longitude,it=await sN(`${Ee},${rt}`);ye[it?"success":"error"](it?"Coordenadas copiadas!":"No foi possvel copiar")},xs=()=>{J?.point?.id&&(t(`/app/inventory?pointId=${J.point.id}`),tt(!1))},fs=()=>{J?.point?.id&&(t(`/app/proposals?new=1&mediaPointId=${J.point.id}`),tt(!1))};return m.useEffect(()=>{const Ee=new URLSearchParams(window.location.search),rt=Ee.get("pointId");if(!rt||!x||!s.current)return;Yt(rt,{center:!0}),Ee.delete("pointId");const it=Ee.toString(),we=`${window.location.pathname}${it?`?${it}`:""}`;window.history.replaceState({},"",we)},[x]),e.jsxs("div",{className:"relative h-full w-full",style:{minHeight:"calc(100vh - 64px)",isolation:"isolate"},children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 flex flex-col gap-3",style:{zIndex:30,maxWidth:980,pointerEvents:"auto"},children:e.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm p-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",ref:n,children:[e.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2",children:[e.jsx(hi,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:se,onChange:Ee=>G(Ee.target.value),onFocus:()=>ae(!0),placeholder:"Buscar ponto, endereo, cidade...",className:"flex-1 outline-none text-sm"}),se?e.jsx("button",{type:"button",onClick:()=>{G(""),V([]),ae(!1)},className:"p-1 rounded hover:bg-gray-100","aria-label":"Limpar",children:e.jsx(Ca,{className:"w-4 h-4 text-gray-600"})}):null]}),re&&(me||ee.length>0||Pe)&&e.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-auto",style:{maxHeight:280},children:[me?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Buscando..."}):null,Pe?e.jsx("div",{className:"px-3 py-2 text-sm text-red-600",children:Pe}):null,!me&&!Pe&&ee.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Nenhum resultado"}):null,ee.map(Ee=>e.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-start gap-2",onClick:()=>Ct(Ee),children:[e.jsx(ia,{className:"w-4 h-4 text-indigo-600 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ee.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:[Ee.addressDistrict,Ee.addressCity,Ee.addressState].filter(Boolean).join("  ")})]}),Ee.isFavorite?e.jsx(Lo,{className:"w-4 h-4 text-amber-500 ml-auto mt-0.5"}):null]},Ee.id))]})})]})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx(K,{type:"button",variant:Z.length===0?"default":"outline",size:"sm",className:Nt("h-8",Z.length===0?"mm-indigo":""),onClick:()=>q([]),children:"Todos"}),e.jsxs(BF,{type:"multiple",value:Z,onValueChange:Ee=>q(Ee??[]),variant:"outline",size:"sm",className:"flex flex-wrap gap-2",children:[e.jsx(jh,{value:"mine","aria-label":"Meus",className:"h-8 px-3 whitespace-nowrap",children:"Meus"}),e.jsx(jh,{value:"favorites","aria-label":"Favoritos",className:"h-8 px-3 whitespace-nowrap",children:"Favoritos"}),e.jsx(jh,{value:"campaign","aria-label":"Em campanha",className:"h-8 px-3 whitespace-nowrap",children:"Em campanha"}),e.jsx(jh,{value:"proposal","aria-label":"Em proposta",className:"h-8 px-3 whitespace-nowrap",children:"Em proposta"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(K,{type:"button",variant:$==="polygon"?"default":"outline",size:"sm",className:Nt("h-8",$==="polygon"?"mm-indigo":""),onClick:()=>kt("polygon"),children:[e.jsx(gp,{className:"w-4 h-4 mr-2"})," Polgono"]}),e.jsxs(K,{type:"button",variant:$==="rectangle"?"default":"outline",size:"sm",className:Nt("h-8",$==="rectangle"?"mm-indigo":""),onClick:()=>kt("rectangle"),children:[e.jsx(J4,{className:"w-4 h-4 mr-2"})," Retngulo"]}),$==="polygon"?e.jsxs(K,{type:"button",size:"sm",className:"h-8 gap-2 mm-indigo",disabled:I.length<3,onClick:ms,children:[e.jsx(wa,{className:"w-4 h-4"})," Concluir"]}):null,$!=="none"?e.jsxs(K,{type:"button",variant:"ghost",size:"sm",className:"h-8",onClick:ht,children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"})," Cancelar"]}):U?e.jsxs(K,{type:"button",variant:"ghost",size:"sm",className:"h-8",onClick:Ft,children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"})," Limpar seleo"]}):null,U?e.jsxs(Ke,{className:"bg-indigo-100 text-indigo-800 border border-indigo-200",children:[Q.length," selecionado(s)"]}):null,$!=="none"?e.jsx("span",{className:"text-xs text-gray-600",children:$==="polygon"?"Clique no mapa para adicionar pontos. Conclua para finalizar.":te?"Clique novamente para finalizar o retngulo.":"Clique para marcar o 1 canto do retngulo."}):null]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm",value:j,onChange:Ee=>w(Ee.target.value||"ALL"),children:[e.jsx("option",{value:"ALL",children:"Tipo: todos"}),e.jsx("option",{value:"OOH",children:"OOH"}),e.jsx("option",{value:"DOOH",children:"DOOH"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm",value:N,onChange:Ee=>C(Ee.target.value||""),children:[e.jsx("option",{value:"",children:"Disponibilidade: todas"}),e.jsx("option",{value:"LIVRE",children:"Somente livres"}),e.jsx("option",{value:"OCUPADA",children:"Somente ocupadas"}),e.jsx("option",{value:"EM_NEGOCIACAO",children:"Somente em negociao"})]}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm",value:S,onChange:Ee=>E(Ee.target.value),placeholder:"Cidade"}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm",value:_,onChange:Ee=>k(Ee.target.value),placeholder:"UF"}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm sm:col-span-2 lg:col-span-2",value:T,onChange:Ee=>M(Ee.target.value),placeholder:"Bairro"}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 sm:col-span-2 lg:col-span-1",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:Ee=>O(Ee.target.checked)}),"Somente no Mdia Kit"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx(Ke,{className:"bg-green-100 text-green-700 border border-green-200",children:"Livre"}),e.jsx(Ke,{className:"bg-amber-100 text-amber-700 border border-amber-200",children:"Misto"}),e.jsx(Ke,{className:"bg-red-100 text-red-700 border border-red-200",children:"Ocupado"}),e.jsx(Ke,{className:"bg-purple-100 text-purple-700 border border-purple-200",children:"Negociao"})]})]})}),e.jsxs(aC,{center:[-23.55052,-46.633308],zoom:12,className:"h-full w-full",style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(rC,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(a$,{mapRef:s,onViewportChange:dt}),e.jsx(r$,{drawMode:$,rectStart:te,onAddVertex:Ee=>B(rt=>[...rt,Ee]),onRectStart:ue,onRectEnd:ce,onCompleteRectangle:hs}),U&&U.length>=3?e.jsx(jj,{positions:U.map(Ee=>[Ee.lat,Ee.lng]),pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.12}}):null,$==="polygon"&&I.length?e.jsxs(e.Fragment,{children:[e.jsx(z3,{positions:I.map(Ee=>[Ee.lat,Ee.lng]),pathOptions:{color:"#4F46E5",weight:2,dashArray:"4 6"}}),I.length>=3?e.jsx(jj,{positions:I.map(Ee=>[Ee.lat,Ee.lng]),pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.08,dashArray:"4 6"}}):null]}):null,$==="rectangle"&&te&&Y?e.jsx(U3,{bounds:[[Math.min(te.lat,Y.lat),Math.min(te.lng,Y.lng)],[Math.max(te.lat,Y.lat),Math.max(te.lng,Y.lng)]],pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.08,dashArray:"4 6"}}):null,Ye.map(Ee=>{const[rt,it]=Ee.geometry.coordinates;if(Ee.properties.cluster){const ze=Ee.properties.point_count,$t=Ee.id;return e.jsx(Fg,{position:[it,rt],icon:t$(ze),eventHandlers:{click:()=>{Gs($t,ze);const Bt=Math.min(fe.getClusterExpansionZoom($t),20);s.current?.setView([it,rt],Bt,{animate:!0})}}},`cluster-${$t}`)}const Fe=Ee.properties;return e.jsx(Fg,{position:[Fe.latitude,Fe.longitude],icon:n$(Fe),eventHandlers:{click:()=>void Yt(Fe.id,{center:!1})}},`p-${Fe.id}`)})]}),gt?e.jsx("div",{className:"absolute bottom-4 left-4 bg-white border rounded-lg shadow px-3 py-2 text-sm text-gray-700",children:"Carregando pontos..."}):null,!gt&&pe?e.jsx("div",{className:"absolute bottom-4 left-4 bg-white border border-red-200 rounded-lg shadow px-3 py-2 text-sm text-red-700",children:"Erro ao carregar pontos."}):null,U?e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-white border rounded-xl shadow-sm p-3",style:{zIndex:30,maxWidth:520,pointerEvents:"auto"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("span",{className:"font-medium",children:Q.length})," ponto(s) selecionado(s) na rea"]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:ml-auto",children:[e.jsxs(K,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:()=>{ct("selected"),tt(!0)},children:[e.jsx(Yk,{className:"w-4 h-4"})," Ver lista"]}),e.jsxs(K,{type:"button",size:"sm",className:"gap-2 mm-indigo",disabled:Q.length===0,onClick:Ps,children:[e.jsx(Sn,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(K,{type:"button",size:"sm",variant:"ghost",onClick:Ft,children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"})," Limpar"]})]})]})}):null,e.jsx(pv,{open:Je,onOpenChange:tt,modal:!1,children:e.jsxs(fv,{hideOverlay:!0,side:"right",className:"p-0",style:{width:480,maxWidth:"92vw"},children:[e.jsxs(xv,{className:"space-y-1 p-5 pb-0",children:[e.jsx(gv,{children:nt==="details"?"Detalhes do ponto":nt==="cluster"?"Pontos do cluster":"Selecionados"}),e.jsx(MS,{children:nt==="details"?"Disponibilidade por face e aes rpidas.":nt==="cluster"?`${It.length} ponto(s) neste agrupamento.`:`${Q.length} ponto(s) selecionado(s) na rea.`})]}),e.jsx("div",{className:"px-5 pb-5 pt-4",children:nt==="cluster"?e.jsx(Ml,{className:"pr-3",style:{height:"calc(100vh - 180px)"},children:e.jsx("div",{className:"space-y-2",children:It.map(Ee=>e.jsx("button",{type:"button",className:Nt("w-full text-left border rounded-xl p-3 hover:bg-gray-50",wt===Ee.id&&"border-indigo-300"),onClick:()=>void Yt(Ee.id),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ee.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[Ee.addressDistrict,Ee.addressCity,Ee.addressState].filter(Boolean).join("  ")}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[ng(Ee),"  ",Ee.facesFreeCount,"/",Ee.facesTotal," livres"]})]}),Ee.isFavorite?e.jsx(Lo,{className:"w-4 h-4 text-amber-500 mt-0.5"}):null]})},Ee.id))})}):nt==="selected"?e.jsxs(Ml,{className:"pr-3",style:{height:"calc(100vh - 220px)"},children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(K,{type:"button",size:"sm",className:"gap-2 mm-indigo",disabled:Q.length===0,onClick:Ps,children:[e.jsx(Sn,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(K,{type:"button",size:"sm",variant:"outline",onClick:Ft,className:"gap-2",children:[e.jsx(Aa,{className:"w-4 h-4"})," Limpar seleo"]})]}),e.jsxs("div",{className:"space-y-2",children:[Q.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhum ponto dentro da rea desenhada."}):null,Q.map(Ee=>e.jsx("button",{type:"button",className:Nt("w-full text-left border rounded-xl p-3 hover:bg-gray-50"),onClick:()=>void Yt(Ee.id),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ee.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[Ee.addressDistrict,Ee.addressCity,Ee.addressState].filter(Boolean).join("  ")}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[ng(Ee),"  ",Ee.facesFreeCount,"/",Ee.facesTotal," livres"]})]}),Ee.isFavorite?e.jsx(Lo,{className:"w-4 h-4 text-amber-500 mt-0.5"}):null]})},Ee.id))]})]}):e.jsxs(e.Fragment,{children:[xe?e.jsx("div",{className:"text-sm text-gray-600",children:"Carregando detalhes..."}):null,de?e.jsx("div",{className:"text-sm text-red-700",children:de}):null,!xe&&!de&&J?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-2xl p-4",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-gray-900 font-medium truncate",children:J.point.name}),J.point.isFavorite?e.jsx(Ke,{className:"bg-amber-100 text-amber-800 border border-amber-200",children:"Favorito"}):null,J.point.isMine?e.jsx(Ke,{className:"bg-indigo-100 text-indigo-800 border border-indigo-200",children:"Meu"}):null,J.point.isInCampaign?e.jsx(Ke,{className:"bg-red-100 text-red-800 border border-red-200",children:"Em campanha"}):null,J.point.isInProposal?e.jsx(Ke,{className:"bg-purple-100 text-purple-800 border border-purple-200",children:"Em proposta"}):null]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:[J.point.addressStreet,J.point.addressNumber,J.point.addressDistrict,J.point.addressCity,J.point.addressState].filter(Boolean).join(", ")}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[ng(J),"  ",J.facesFreeCount,"/",J.facesTotal," livres  ",J.facesNegotiationCount," em negociao  ",J.facesOccupiedCount," ocupadas"]})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[e.jsxs(K,{type:"button",size:"sm",className:"gap-2 mm-indigo col-span-2",onClick:fs,children:[e.jsx(Sn,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(K,{type:"button",size:"sm",variant:"outline",className:"gap-2 col-span-2 sm:col-span-1",onClick:xs,children:[e.jsx(Ou,{className:"w-4 h-4"})," Abrir no inventrio"]}),e.jsxs(K,{type:"button",size:"sm",variant:"outline",className:"gap-2 col-span-2 sm:col-span-1",onClick:Mt,children:[e.jsx(Lo,{className:"w-4 h-4"})," ",J.point.isFavorite?"Desfavoritar":"Favoritar"]}),e.jsxs(K,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:Wt,children:[e.jsx($n,{className:"w-4 h-4"})," Copiar link"]}),e.jsxs(K,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:Es,children:[e.jsx($n,{className:"w-4 h-4"})," Copiar coords"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium mb-2",children:"Faces"}),e.jsx(Ml,{className:"pr-3",style:{height:"calc(100vh - 440px)"},children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:J.faces.map(Ee=>{const rt=Ee.status,it=rt==="LIVRE"?"border-green-200 bg-green-50 text-green-700":rt==="OCUPADA"?"border-red-200 bg-red-50 text-red-700":"border-purple-200 bg-purple-50 text-purple-700";return e.jsxs("div",{className:Nt("border rounded-xl p-3 text-xs",it),children:[e.jsx("div",{className:"font-medium text-gray-900",children:Ee.label}),e.jsx("div",{className:"mt-1",children:rt==="LIVRE"?"Livre":rt==="OCUPADA"?"Ocupada":"Em negociao"})]},Ee.id)})})})]})]}):null]})})]})})]})}function o$(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const w={search:t.search,status:t.status,ownerUserId:t.ownerUserId,page:t.page,pageSize:t.pageSize,orderBy:t.sortBy,sortOrder:t.sortOrder};w.orderBy==="contactName"&&(w.orderBy="name");const C=(await Ie.get("/clients",{params:w})).data,S=Array.isArray(C)?C:C.data,E=Array.isArray(C)?S.length:C.total??S.length;n(S),o(E)}catch(w){f(w)}finally{u(!1)}},x=async w=>{const N=await Ie.post("/clients",w);return n(C=>[...C,N.data]),N.data},g=async(w,N)=>{const C=await Ie.put(`/clients/${w}`,N);return n(S=>S.map(E=>E.id===w?C.data:E)),C.data},j=async w=>{await Ie.delete(`/clients/${w}`),n(N=>N.filter(C=>C.id!==w))};return m.useEffect(()=>{v()},[t.search,t.status,t.ownerUserId,t.page,t.pageSize,t.sortBy,t.sortOrder]),{clients:s,total:r,loading:c,error:h,refetch:v,createClient:x,updateClient:g,deleteClient:j}}var Gu=t=>t.type==="checkbox",kl=t=>t instanceof Date,ya=t=>t==null;const qS=t=>typeof t=="object";var vn=t=>!ya(t)&&!Array.isArray(t)&&qS(t)&&!kl(t),l$=t=>vn(t)&&t.target?Gu(t.target)?t.target.checked:t.target.value:t,c$=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,d$=(t,s)=>t.has(c$(s)),u$=t=>{const s=t.constructor&&t.constructor.prototype;return vn(s)&&s.hasOwnProperty("isPrototypeOf")},yv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function En(t){let s;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(yv&&(t instanceof Blob||r))&&(n||vn(t)))if(s=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!u$(t))s=t;else for(const o in t)t.hasOwnProperty(o)&&(s[o]=En(t[o]));else return t;return s}var Jp=t=>/^\w*$/.test(t),cn=t=>t===void 0,bv=t=>Array.isArray(t)?t.filter(Boolean):[],jv=t=>bv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),bt=(t,s,n)=>{if(!s||!vn(t))return n;const r=(Jp(s)?[s]:jv(s)).reduce((o,c)=>ya(o)?o:o[c],t);return cn(r)||r===t?cn(t[s])?n:t[s]:r},ei=t=>typeof t=="boolean",qs=(t,s,n)=>{let r=-1;const o=Jp(s)?[s]:jv(s),c=o.length,u=c-1;for(;++r<c;){const h=o[r];let f=n;if(r!==u){const v=t[h];f=vn(v)||Array.isArray(v)?v:isNaN(+o[r+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=f,t=t[h]}};const nN={BLUR:"blur",FOCUS_OUT:"focusout"},kr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Li={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},m$=Ue.createContext(null);m$.displayName="HookFormContext";var h$=(t,s,n,r=!0)=>{const o={defaultValues:s._defaultValues};for(const c in t)Object.defineProperty(o,c,{get:()=>{const u=c;return s._proxyFormState[u]!==kr.all&&(s._proxyFormState[u]=!r||kr.all),t[u]}});return o};const p$=typeof window<"u"?Ue.useLayoutEffect:Ue.useEffect;var Va=t=>typeof t=="string",f$=(t,s,n,r,o)=>Va(t)?(r&&s.watch.add(t),bt(n,t,o)):Array.isArray(t)?t.map(c=>(r&&s.watch.add(c),bt(n,c))):(r&&(s.watchAll=!0),n),qg=t=>ya(t)||!qS(t);function Ro(t,s,n=new WeakSet){if(qg(t)||qg(s))return Object.is(t,s);if(kl(t)&&kl(s))return t.getTime()===s.getTime();const r=Object.keys(t),o=Object.keys(s);if(r.length!==o.length)return!1;if(n.has(t)||n.has(s))return!0;n.add(t),n.add(s);for(const c of r){const u=t[c];if(!o.includes(c))return!1;if(c!=="ref"){const h=s[c];if(kl(u)&&kl(h)||vn(u)&&vn(h)||Array.isArray(u)&&Array.isArray(h)?!Ro(u,h,n):!Object.is(u,h))return!1}}return!0}var x$=(t,s,n,r,o)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:o||!0}}:{},ju=t=>Array.isArray(t)?t:[t],aN=()=>{let t=[];return{get observers(){return t},next:o=>{for(const c of t)c.next&&c.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(c=>c!==o)}}),unsubscribe:()=>{t=[]}}};function WS(t,s){const n={};for(const r in t)if(t.hasOwnProperty(r)){const o=t[r],c=s[r];if(o&&vn(o)&&c){const u=WS(o,c);vn(u)&&(n[r]=u)}else t[r]&&(n[r]=c)}return n}var aa=t=>vn(t)&&!Object.keys(t).length,Nv=t=>t.type==="file",Tr=t=>typeof t=="function",ip=t=>{if(!yv)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},GS=t=>t.type==="select-multiple",wv=t=>t.type==="radio",g$=t=>wv(t)||Gu(t),ag=t=>ip(t)&&t.isConnected;function v$(t,s){const n=s.slice(0,-1).length;let r=0;for(;r<n;)t=cn(t)?r++:t[s[r++]];return t}function y$(t){for(const s in t)if(t.hasOwnProperty(s)&&!cn(t[s]))return!1;return!0}function xn(t,s){const n=Array.isArray(s)?s:Jp(s)?[s]:jv(s),r=n.length===1?t:v$(t,n),o=n.length-1,c=n[o];return r&&delete r[c],o!==0&&(vn(r)&&aa(r)||Array.isArray(r)&&y$(r))&&xn(t,n.slice(0,-1)),t}var b$=t=>{for(const s in t)if(Tr(t[s]))return!0;return!1};function ZS(t){return Array.isArray(t)||vn(t)&&!b$(t)}function Wg(t,s={}){for(const n in t){const r=t[n];ZS(r)?(s[n]=Array.isArray(r)?[]:{},Wg(r,s[n])):cn(r)||(s[n]=!0)}return s}function Bc(t,s,n){n||(n=Wg(s));for(const r in t){const o=t[r];if(ZS(o))cn(s)||qg(n[r])?n[r]=Wg(o,Array.isArray(o)?[]:{}):Bc(o,ya(s)?{}:s[r],n[r]);else{const c=s[r];n[r]=!Ro(o,c)}}return n}const rN={value:!1,isValid:!1},iN={value:!0,isValid:!0};var KS=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!cn(t[0].attributes.value)?cn(t[0].value)||t[0].value===""?iN:{value:t[0].value,isValid:!0}:iN:rN}return rN},QS=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:r})=>cn(t)?t:s?t===""?NaN:t&&+t:n&&Va(t)?new Date(t):r?r(t):t;const oN={isValid:!1,value:null};var XS=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,oN):oN;function lN(t){const s=t.ref;return Nv(s)?s.files:wv(s)?XS(t.refs).value:GS(s)?[...s.selectedOptions].map(({value:n})=>n):Gu(s)?KS(t.refs).value:QS(cn(s.value)?t.ref.value:s.value,t)}var j$=(t,s,n,r)=>{const o={};for(const c of t){const u=bt(s,c);u&&qs(o,c,u._f)}return{criteriaMode:n,names:[...t],fields:o,shouldUseNativeValidation:r}},op=t=>t instanceof RegExp,cu=t=>cn(t)?t:op(t)?t.source:vn(t)?op(t.value)?t.value.source:t.value:t,cN=t=>({isOnSubmit:!t||t===kr.onSubmit,isOnBlur:t===kr.onBlur,isOnChange:t===kr.onChange,isOnAll:t===kr.all,isOnTouch:t===kr.onTouched});const dN="AsyncFunction";var N$=t=>!!t&&!!t.validate&&!!(Tr(t.validate)&&t.validate.constructor.name===dN||vn(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===dN)),w$=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),uN=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Nu=(t,s,n,r)=>{for(const o of n||Object.keys(t)){const c=bt(t,o);if(c){const{_f:u,...h}=c;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],o)&&!r)return!0;if(u.ref&&s(u.ref,u.name)&&!r)return!0;if(Nu(h,s))break}else if(vn(h)&&Nu(h,s))break}}};function mN(t,s,n){const r=bt(t,n);if(r||Jp(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const c=o.join("."),u=bt(s,c),h=bt(t,c);if(u&&!Array.isArray(u)&&n!==c)return{name:n};if(h&&h.type)return{name:c,error:h};if(h&&h.root&&h.root.type)return{name:`${c}.root`,error:h.root};o.pop()}return{name:n}}var C$=(t,s,n,r)=>{n(t);const{name:o,...c}=t;return aa(c)||Object.keys(c).length>=Object.keys(s).length||Object.keys(c).find(u=>s[u]===(!r||kr.all))},S$=(t,s,n)=>!t||!s||t===s||ju(t).some(r=>r&&(n?r===s:r.startsWith(s)||s.startsWith(r))),_$=(t,s,n,r,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(s||t):(n?r.isOnBlur:o.isOnBlur)?!t:(n?r.isOnChange:o.isOnChange)?t:!0,A$=(t,s)=>!bv(bt(t,s)).length&&xn(t,s),P$=(t,s,n)=>{const r=ju(bt(t,n));return qs(r,"root",s[n]),qs(t,n,r),t};function hN(t,s,n="validate"){if(Va(t)||Array.isArray(t)&&t.every(Va)||ei(t)&&!t)return{type:n,message:Va(t)?t:"",ref:s}}var zc=t=>vn(t)&&!op(t)?t:{value:t,message:""},pN=async(t,s,n,r,o,c)=>{const{ref:u,refs:h,required:f,maxLength:v,minLength:x,min:g,max:j,pattern:w,validate:N,name:C,valueAsNumber:S,mount:E}=t._f,_=bt(n,C);if(!E||s.has(C))return{};const k=h?h[0]:u,T=I=>{o&&k.reportValidity&&(k.setCustomValidity(ei(I)?"":I||""),k.reportValidity())},M={},F=wv(u),O=Gu(u),Z=F||O,q=(S||Nv(u))&&cn(u.value)&&cn(_)||ip(u)&&u.value===""||_===""||Array.isArray(_)&&!_.length,$=x$.bind(null,C,r,M),X=(I,B,te,ue=Li.maxLength,Y=Li.minLength)=>{const ce=I?B:te;M[C]={type:I?ue:Y,message:ce,ref:u,...$(I?ue:Y,ce)}};if(c?!Array.isArray(_)||!_.length:f&&(!Z&&(q||ya(_))||ei(_)&&!_||O&&!KS(h).isValid||F&&!XS(h).isValid)){const{value:I,message:B}=Va(f)?{value:!!f,message:f}:zc(f);if(I&&(M[C]={type:Li.required,message:B,ref:k,...$(Li.required,B)},!r))return T(B),M}if(!q&&(!ya(g)||!ya(j))){let I,B;const te=zc(j),ue=zc(g);if(!ya(_)&&!isNaN(_)){const Y=u.valueAsNumber||_&&+_;ya(te.value)||(I=Y>te.value),ya(ue.value)||(B=Y<ue.value)}else{const Y=u.valueAsDate||new Date(_),ce=Q=>new Date(new Date().toDateString()+" "+Q),U=u.type=="time",ne=u.type=="week";Va(te.value)&&_&&(I=U?ce(_)>ce(te.value):ne?_>te.value:Y>new Date(te.value)),Va(ue.value)&&_&&(B=U?ce(_)<ce(ue.value):ne?_<ue.value:Y<new Date(ue.value))}if((I||B)&&(X(!!I,te.message,ue.message,Li.max,Li.min),!r))return T(M[C].message),M}if((v||x)&&!q&&(Va(_)||c&&Array.isArray(_))){const I=zc(v),B=zc(x),te=!ya(I.value)&&_.length>+I.value,ue=!ya(B.value)&&_.length<+B.value;if((te||ue)&&(X(te,I.message,B.message),!r))return T(M[C].message),M}if(w&&!q&&Va(_)){const{value:I,message:B}=zc(w);if(op(I)&&!_.match(I)&&(M[C]={type:Li.pattern,message:B,ref:u,...$(Li.pattern,B)},!r))return T(B),M}if(N){if(Tr(N)){const I=await N(_,n),B=hN(I,k);if(B&&(M[C]={...B,...$(Li.validate,B.message)},!r))return T(B.message),M}else if(vn(N)){let I={};for(const B in N){if(!aa(I)&&!r)break;const te=hN(await N[B](_,n),k,B);te&&(I={...te,...$(B,te.message)},T(te.message),r&&(M[C]=I))}if(!aa(I)&&(M[C]={ref:k,...I},!r))return M}}return T(!0),M};const E$={mode:kr.onSubmit,reValidateMode:kr.onChange,shouldFocusError:!0};function k$(t={}){let s={...E$,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Tr(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},o=vn(s.defaultValues)||vn(s.values)?En(s.defaultValues||s.values)||{}:{},c=s.shouldUnregister?{}:En(o),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,v=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...x};const j={array:aN(),state:aN()},w=s.criteriaMode===kr.all,N=J=>ve=>{clearTimeout(v),v=setTimeout(J,ve)},C=async J=>{if(!s.disabled&&(x.isValid||g.isValid||J)){const ve=s.resolver?aa((await O()).errors):await q(r,!0);ve!==n.isValid&&j.state.next({isValid:ve})}},S=(J,ve)=>{!s.disabled&&(x.isValidating||x.validatingFields||g.isValidating||g.validatingFields)&&((J||Array.from(h.mount)).forEach(xe=>{xe&&(ve?qs(n.validatingFields,xe,ve):xn(n.validatingFields,xe))}),j.state.next({validatingFields:n.validatingFields,isValidating:!aa(n.validatingFields)}))},E=(J,ve=[],xe,Ve,de=!0,Ne=!0)=>{if(Ve&&xe&&!s.disabled){if(u.action=!0,Ne&&Array.isArray(bt(r,J))){const Be=xe(bt(r,J),Ve.argA,Ve.argB);de&&qs(r,J,Be)}if(Ne&&Array.isArray(bt(n.errors,J))){const Be=xe(bt(n.errors,J),Ve.argA,Ve.argB);de&&qs(n.errors,J,Be),A$(n.errors,J)}if((x.touchedFields||g.touchedFields)&&Ne&&Array.isArray(bt(n.touchedFields,J))){const Be=xe(bt(n.touchedFields,J),Ve.argA,Ve.argB);de&&qs(n.touchedFields,J,Be)}(x.dirtyFields||g.dirtyFields)&&(n.dirtyFields=Bc(o,c)),j.state.next({name:J,isDirty:X(J,ve),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else qs(c,J,ve)},_=(J,ve)=>{qs(n.errors,J,ve),j.state.next({errors:n.errors})},k=J=>{n.errors=J,j.state.next({errors:n.errors,isValid:!1})},T=(J,ve,xe,Ve)=>{const de=bt(r,J);if(de){const Ne=bt(c,J,cn(xe)?bt(o,J):xe);cn(Ne)||Ve&&Ve.defaultChecked||ve?qs(c,J,ve?Ne:lN(de._f)):te(J,Ne),u.mount&&!u.action&&C()}},M=(J,ve,xe,Ve,de)=>{let Ne=!1,Be=!1;const He={name:J};if(!s.disabled){if(!xe||Ve){(x.isDirty||g.isDirty)&&(Be=n.isDirty,n.isDirty=He.isDirty=X(),Ne=Be!==He.isDirty);const gt=Ro(bt(o,J),ve);Be=!!bt(n.dirtyFields,J),gt?xn(n.dirtyFields,J):qs(n.dirtyFields,J,!0),He.dirtyFields=n.dirtyFields,Ne=Ne||(x.dirtyFields||g.dirtyFields)&&Be!==!gt}if(xe){const gt=bt(n.touchedFields,J);gt||(qs(n.touchedFields,J,xe),He.touchedFields=n.touchedFields,Ne=Ne||(x.touchedFields||g.touchedFields)&&gt!==xe)}Ne&&de&&j.state.next(He)}return Ne?He:{}},F=(J,ve,xe,Ve)=>{const de=bt(n.errors,J),Ne=(x.isValid||g.isValid)&&ei(ve)&&n.isValid!==ve;if(s.delayError&&xe?(f=N(()=>_(J,xe)),f(s.delayError)):(clearTimeout(v),f=null,xe?qs(n.errors,J,xe):xn(n.errors,J)),(xe?!Ro(de,xe):de)||!aa(Ve)||Ne){const Be={...Ve,...Ne&&ei(ve)?{isValid:ve}:{},errors:n.errors,name:J};n={...n,...Be},j.state.next(Be)}},O=async J=>{S(J,!0);const ve=await s.resolver(c,s.context,j$(J||h.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return S(J),ve},Z=async J=>{const{errors:ve}=await O(J);if(J)for(const xe of J){const Ve=bt(ve,xe);Ve?qs(n.errors,xe,Ve):xn(n.errors,xe)}else n.errors=ve;return ve},q=async(J,ve,xe={valid:!0})=>{for(const Ve in J){const de=J[Ve];if(de){const{_f:Ne,...Be}=de;if(Ne){const He=h.array.has(Ne.name),gt=de._f&&N$(de._f);gt&&x.validatingFields&&S([Ne.name],!0);const pe=await pN(de,h.disabled,c,w,s.shouldUseNativeValidation&&!ve,He);if(gt&&x.validatingFields&&S([Ne.name]),pe[Ne.name]&&(xe.valid=!1,ve))break;!ve&&(bt(pe,Ne.name)?He?P$(n.errors,pe,Ne.name):qs(n.errors,Ne.name,pe[Ne.name]):xn(n.errors,Ne.name))}!aa(Be)&&await q(Be,ve,xe)}}return xe.valid},$=()=>{for(const J of h.unMount){const ve=bt(r,J);ve&&(ve._f.refs?ve._f.refs.every(xe=>!ag(xe)):!ag(ve._f.ref))&&ae(J)}h.unMount=new Set},X=(J,ve)=>!s.disabled&&(J&&ve&&qs(c,J,ve),!Ro(Q(),o)),I=(J,ve,xe)=>f$(J,h,{...u.mount?c:cn(ve)?o:Va(J)?{[J]:ve}:ve},xe,ve),B=J=>bv(bt(u.mount?c:o,J,s.shouldUnregister?bt(o,J,[]):[])),te=(J,ve,xe={})=>{const Ve=bt(r,J);let de=ve;if(Ve){const Ne=Ve._f;Ne&&(!Ne.disabled&&qs(c,J,QS(ve,Ne)),de=ip(Ne.ref)&&ya(ve)?"":ve,GS(Ne.ref)?[...Ne.ref.options].forEach(Be=>Be.selected=de.includes(Be.value)):Ne.refs?Gu(Ne.ref)?Ne.refs.forEach(Be=>{(!Be.defaultChecked||!Be.disabled)&&(Array.isArray(de)?Be.checked=!!de.find(He=>He===Be.value):Be.checked=de===Be.value||!!de)}):Ne.refs.forEach(Be=>Be.checked=Be.value===de):Nv(Ne.ref)?Ne.ref.value="":(Ne.ref.value=de,Ne.ref.type||j.state.next({name:J,values:En(c)})))}(xe.shouldDirty||xe.shouldTouch)&&M(J,de,xe.shouldTouch,xe.shouldDirty,!0),xe.shouldValidate&&ne(J)},ue=(J,ve,xe)=>{for(const Ve in ve){if(!ve.hasOwnProperty(Ve))return;const de=ve[Ve],Ne=J+"."+Ve,Be=bt(r,Ne);(h.array.has(J)||vn(de)||Be&&!Be._f)&&!kl(de)?ue(Ne,de,xe):te(Ne,de,xe)}},Y=(J,ve,xe={})=>{const Ve=bt(r,J),de=h.array.has(J),Ne=En(ve);qs(c,J,Ne),de?(j.array.next({name:J,values:En(c)}),(x.isDirty||x.dirtyFields||g.isDirty||g.dirtyFields)&&xe.shouldDirty&&j.state.next({name:J,dirtyFields:Bc(o,c),isDirty:X(J,Ne)})):Ve&&!Ve._f&&!ya(Ne)?ue(J,Ne,xe):te(J,Ne,xe),uN(J,h)&&j.state.next({...n,name:J}),j.state.next({name:u.mount?J:void 0,values:En(c)})},ce=async J=>{u.mount=!0;const ve=J.target;let xe=ve.name,Ve=!0;const de=bt(r,xe),Ne=gt=>{Ve=Number.isNaN(gt)||kl(gt)&&isNaN(gt.getTime())||Ro(gt,bt(c,xe,gt))},Be=cN(s.mode),He=cN(s.reValidateMode);if(de){let gt,pe;const $e=ve.type?lN(de._f):l$(J),Xe=J.type===nN.BLUR||J.type===nN.FOCUS_OUT,mt=!w$(de._f)&&!s.resolver&&!bt(n.errors,xe)&&!de._f.deps||_$(Xe,bt(n.touchedFields,xe),n.isSubmitted,He,Be),fe=uN(xe,h,Xe);qs(c,xe,$e),Xe?(!ve||!ve.readOnly)&&(de._f.onBlur&&de._f.onBlur(J),f&&f(0)):de._f.onChange&&de._f.onChange(J);const Ye=M(xe,$e,Xe),dt=!aa(Ye)||fe;if(!Xe&&j.state.next({name:xe,type:J.type,values:En(c)}),mt)return(x.isValid||g.isValid)&&(s.mode==="onBlur"?Xe&&C():Xe||C()),dt&&j.state.next({name:xe,...fe?{}:Ye});if(!Xe&&fe&&j.state.next({...n}),s.resolver){const{errors:kt}=await O([xe]);if(Ne($e),Ve){const ht=mN(n.errors,r,xe),Ft=mN(kt,r,ht.name||xe);gt=Ft.error,xe=Ft.name,pe=aa(kt)}}else S([xe],!0),gt=(await pN(de,h.disabled,c,w,s.shouldUseNativeValidation))[xe],S([xe]),Ne($e),Ve&&(gt?pe=!1:(x.isValid||g.isValid)&&(pe=await q(r,!0)));Ve&&(de._f.deps&&(!Array.isArray(de._f.deps)||de._f.deps.length>0)&&ne(de._f.deps),F(xe,pe,gt,Ye))}},U=(J,ve)=>{if(bt(n.errors,ve)&&J.focus)return J.focus(),1},ne=async(J,ve={})=>{let xe,Ve;const de=ju(J);if(s.resolver){const Ne=await Z(cn(J)?J:de);xe=aa(Ne),Ve=J?!de.some(Be=>bt(Ne,Be)):xe}else J?(Ve=(await Promise.all(de.map(async Ne=>{const Be=bt(r,Ne);return await q(Be&&Be._f?{[Ne]:Be}:Be)}))).every(Boolean),!(!Ve&&!n.isValid)&&C()):Ve=xe=await q(r);return j.state.next({...!Va(J)||(x.isValid||g.isValid)&&xe!==n.isValid?{}:{name:J},...s.resolver||!J?{isValid:xe}:{},errors:n.errors}),ve.shouldFocus&&!Ve&&Nu(r,U,J?de:h.mount),Ve},Q=(J,ve)=>{let xe={...u.mount?c:o};return ve&&(xe=WS(ve.dirtyFields?n.dirtyFields:n.touchedFields,xe)),cn(J)?xe:Va(J)?bt(xe,J):J.map(Ve=>bt(xe,Ve))},z=(J,ve)=>({invalid:!!bt((ve||n).errors,J),isDirty:!!bt((ve||n).dirtyFields,J),error:bt((ve||n).errors,J),isValidating:!!bt(n.validatingFields,J),isTouched:!!bt((ve||n).touchedFields,J)}),se=J=>{J&&ju(J).forEach(ve=>xn(n.errors,ve)),j.state.next({errors:J?n.errors:{}})},G=(J,ve,xe)=>{const Ve=(bt(r,J,{_f:{}})._f||{}).ref,de=bt(n.errors,J)||{},{ref:Ne,message:Be,type:He,...gt}=de;qs(n.errors,J,{...gt,...ve,ref:Ve}),j.state.next({name:J,errors:n.errors,isValid:!1}),xe&&xe.shouldFocus&&Ve&&Ve.focus&&Ve.focus()},ee=(J,ve)=>Tr(J)?j.state.subscribe({next:xe=>"values"in xe&&J(I(void 0,ve),xe)}):I(J,ve,!0),V=J=>j.state.subscribe({next:ve=>{S$(J.name,ve.name,J.exact)&&C$(ve,J.formState||x,pt,J.reRenderRoot)&&J.callback({values:{...c},...n,...ve,defaultValues:o})}}).unsubscribe,re=J=>(u.mount=!0,g={...g,...J.formState},V({...J,formState:g})),ae=(J,ve={})=>{for(const xe of J?ju(J):h.mount)h.mount.delete(xe),h.array.delete(xe),ve.keepValue||(xn(r,xe),xn(c,xe)),!ve.keepError&&xn(n.errors,xe),!ve.keepDirty&&xn(n.dirtyFields,xe),!ve.keepTouched&&xn(n.touchedFields,xe),!ve.keepIsValidating&&xn(n.validatingFields,xe),!s.shouldUnregister&&!ve.keepDefaultValue&&xn(o,xe);j.state.next({values:En(c)}),j.state.next({...n,...ve.keepDirty?{isDirty:X()}:{}}),!ve.keepIsValid&&C()},me=({disabled:J,name:ve})=>{(ei(J)&&u.mount||J||h.disabled.has(ve))&&(J?h.disabled.add(ve):h.disabled.delete(ve))},oe=(J,ve={})=>{let xe=bt(r,J);const Ve=ei(ve.disabled)||ei(s.disabled);return qs(r,J,{...xe||{},_f:{...xe&&xe._f?xe._f:{ref:{name:J}},name:J,mount:!0,...ve}}),h.mount.add(J),xe?me({disabled:ei(ve.disabled)?ve.disabled:s.disabled,name:J}):T(J,!0,ve.value),{...Ve?{disabled:ve.disabled||s.disabled}:{},...s.progressive?{required:!!ve.required,min:cu(ve.min),max:cu(ve.max),minLength:cu(ve.minLength),maxLength:cu(ve.maxLength),pattern:cu(ve.pattern)}:{},name:J,onChange:ce,onBlur:ce,ref:de=>{if(de){oe(J,ve),xe=bt(r,J);const Ne=cn(de.value)&&de.querySelectorAll&&de.querySelectorAll("input,select,textarea")[0]||de,Be=g$(Ne),He=xe._f.refs||[];if(Be?He.find(gt=>gt===Ne):Ne===xe._f.ref)return;qs(r,J,{_f:{...xe._f,...Be?{refs:[...He.filter(ag),Ne,...Array.isArray(bt(o,J))?[{}]:[]],ref:{type:Ne.type,name:J}}:{ref:Ne}}}),T(J,!1,void 0,Ne)}else xe=bt(r,J,{}),xe._f&&(xe._f.mount=!1),(s.shouldUnregister||ve.shouldUnregister)&&!(d$(h.array,J)&&u.action)&&h.unMount.add(J)}}},Pe=()=>s.shouldFocusError&&Nu(r,U,h.mount),We=J=>{ei(J)&&(j.state.next({disabled:J}),Nu(r,(ve,xe)=>{const Ve=bt(r,xe);Ve&&(ve.disabled=Ve._f.disabled||J,Array.isArray(Ve._f.refs)&&Ve._f.refs.forEach(de=>{de.disabled=Ve._f.disabled||J}))},0,!1))},Je=(J,ve)=>async xe=>{let Ve;xe&&(xe.preventDefault&&xe.preventDefault(),xe.persist&&xe.persist());let de=En(c);if(j.state.next({isSubmitting:!0}),s.resolver){const{errors:Ne,values:Be}=await O();n.errors=Ne,de=En(Be)}else await q(r);if(h.disabled.size)for(const Ne of h.disabled)xn(de,Ne);if(xn(n.errors,"root"),aa(n.errors)){j.state.next({errors:{}});try{await J(de,xe)}catch(Ne){Ve=Ne}}else ve&&await ve({...n.errors},xe),Pe(),setTimeout(Pe);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:aa(n.errors)&&!Ve,submitCount:n.submitCount+1,errors:n.errors}),Ve)throw Ve},tt=(J,ve={})=>{bt(r,J)&&(cn(ve.defaultValue)?Y(J,En(bt(o,J))):(Y(J,ve.defaultValue),qs(o,J,En(ve.defaultValue))),ve.keepTouched||xn(n.touchedFields,J),ve.keepDirty||(xn(n.dirtyFields,J),n.isDirty=ve.defaultValue?X(J,En(bt(o,J))):X()),ve.keepError||(xn(n.errors,J),x.isValid&&C()),j.state.next({...n}))},nt=(J,ve={})=>{const xe=J?En(J):o,Ve=En(xe),de=aa(J),Ne=de?o:Ve;if(ve.keepDefaultValues||(o=xe),!ve.keepValues){if(ve.keepDirtyValues){const Be=new Set([...h.mount,...Object.keys(Bc(o,c))]);for(const He of Array.from(Be))bt(n.dirtyFields,He)?qs(Ne,He,bt(c,He)):Y(He,bt(Ne,He))}else{if(yv&&cn(J))for(const Be of h.mount){const He=bt(r,Be);if(He&&He._f){const gt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(ip(gt)){const pe=gt.closest("form");if(pe){pe.reset();break}}}}if(ve.keepFieldsRef)for(const Be of h.mount)Y(Be,bt(Ne,Be));else r={}}c=s.shouldUnregister?ve.keepDefaultValues?En(o):{}:En(Ne),j.array.next({values:{...Ne}}),j.state.next({values:{...Ne}})}h={mount:ve.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!x.isValid||!!ve.keepIsValid||!!ve.keepDirtyValues||!s.shouldUnregister&&!aa(Ne),u.watch=!!s.shouldUnregister,u.action=!1,ve.keepErrors||(n.errors={}),j.state.next({submitCount:ve.keepSubmitCount?n.submitCount:0,isDirty:de?!1:ve.keepDirty?n.isDirty:!!(ve.keepDefaultValues&&!Ro(J,o)),isSubmitted:ve.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:de?{}:ve.keepDirtyValues?ve.keepDefaultValues&&c?Bc(o,c):n.dirtyFields:ve.keepDefaultValues&&J?Bc(o,J):ve.keepDirty?n.dirtyFields:{},touchedFields:ve.keepTouched?n.touchedFields:{},errors:ve.keepErrors?n.errors:{},isSubmitSuccessful:ve.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},ct=(J,ve)=>nt(Tr(J)?J(c):J,ve),wt=(J,ve={})=>{const xe=bt(r,J),Ve=xe&&xe._f;if(Ve){const de=Ve.refs?Ve.refs[0]:Ve.ref;de.focus&&(de.focus(),ve.shouldSelect&&Tr(de.select)&&de.select())}},pt=J=>{n={...n,...J}},Lt={control:{register:oe,unregister:ae,getFieldState:z,handleSubmit:Je,setError:G,_subscribe:V,_runSchema:O,_focusError:Pe,_getWatch:I,_getDirty:X,_setValid:C,_setFieldArray:E,_setDisabledField:me,_setErrors:k,_getFieldArray:B,_reset:nt,_resetDefaultValues:()=>Tr(s.defaultValues)&&s.defaultValues().then(J=>{ct(J,s.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:We,_subjects:j,_proxyFormState:x,get _fields(){return r},get _formValues(){return c},get _state(){return u},set _state(J){u=J},get _defaultValues(){return o},get _names(){return h},set _names(J){h=J},get _formState(){return n},get _options(){return s},set _options(J){s={...s,...J}}},subscribe:re,trigger:ne,register:oe,handleSubmit:Je,watch:ee,setValue:Y,getValues:Q,reset:ct,resetField:tt,clearErrors:se,unregister:ae,setError:G,setFocus:wt,getFieldState:z};return{...Lt,formControl:Lt}}function T$(t={}){const s=Ue.useRef(void 0),n=Ue.useRef(void 0),[r,o]=Ue.useState({isDirty:!1,isValidating:!1,isLoading:Tr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Tr(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!Tr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=k$(t);s.current={...h,formState:r}}const c=s.current.control;return c._options=t,p$(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>o({...c._formState}),reRenderRoot:!0});return o(h=>({...h,isReady:!0})),c._formState.isReady=!0,u},[c]),Ue.useEffect(()=>c._disableForm(t.disabled),[c,t.disabled]),Ue.useEffect(()=>{t.mode&&(c._options.mode=t.mode),t.reValidateMode&&(c._options.reValidateMode=t.reValidateMode)},[c,t.mode,t.reValidateMode]),Ue.useEffect(()=>{t.errors&&(c._setErrors(t.errors),c._focusError())},[c,t.errors]),Ue.useEffect(()=>{t.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,t.shouldUnregister]),Ue.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==r.isDirty&&c._subjects.state.next({isDirty:u})}},[c,r.isDirty]),Ue.useEffect(()=>{var u;t.values&&!Ro(t.values,n.current)?(c._reset(t.values,{keepFieldsRef:!0,...c._options.resetOptions}),!((u=c._options.resetOptions)===null||u===void 0)&&u.keepIsValid||c._setValid(),n.current=t.values,o(h=>({...h}))):c._resetDefaultValues()},[c,t.values]),Ue.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),s.current.formState=h$(r,c),s.current}let Fo=null,Al=null;function fN(){return Fo?Promise.resolve(Fo):Al||(Al=Ie.get("/clients/owners").then(t=>(Fo=t.data??[],Fo)).then(t=>(Al=null,t),t=>{throw Al=null,t}),Al)}function Zu(){const[t,s]=m.useState(Fo??[]),[n,r]=m.useState(!Fo),[o,c]=m.useState(null),u=async()=>{try{r(!0),c(null),Fo=null,Al=null;const f=await fN();return s(f),f}catch(f){return c(f),[]}finally{r(!1)}};m.useEffect(()=>{let f=!1;return(async()=>{try{r(!Fo),c(null);const v=await fN();f||s(v)}catch(v){f||c(v)}finally{f||r(!1)}})(),()=>{f=!0}},[]);const h=m.useMemo(()=>{const f=new Map;for(const v of t)f.set(v.id,v);return f},[t]);return{owners:t,ownersById:h,loading:n,error:o,refetch:u}}function D$({open:t,onOpenChange:s,client:n,onSave:r}){const{owners:o,loading:c}=Zu(),u=m.useMemo(()=>({status:ss.LEAD,contactName:"",email:"",phone:"",role:"",companyName:"",cnpj:"",origin:"",ownerUserId:void 0,addressZipcode:"",addressStreet:"",addressNumber:"",addressDistrict:"",addressCity:"",addressState:"",addressCountry:"Brasil",notes:""}),[]),h=T$({defaultValues:n||u});m.useEffect(()=>{n?h.reset(n):h.reset(u)},[n,h,u]);const f=(j,w)=>{h.setValue(j,w,{shouldDirty:!0})},v=j=>{if(j==null)return;if(typeof j!="string")return String(j);const w=j.trim();return w.length?w:void 0},x=j=>{const w=v(j.contactName??j.name);if(!w)throw new Error("Informe o Nome do Contato.");const N={contactName:w,name:w,status:j.status??ss.LEAD,email:v(j.email),phone:v(j.phone),role:v(j.role),companyName:v(j.companyName),cnpj:v(j.cnpj),origin:v(j.origin),notes:v(j.notes),addressZipcode:v(j.addressZipcode),addressStreet:v(j.addressStreet),addressNumber:v(j.addressNumber),addressDistrict:v(j.addressDistrict),addressCity:v(j.addressCity),addressState:v(j.addressState),addressCountry:v(j.addressCountry)??"Brasil",ownerUserId:v(j.ownerUserId)};return Object.keys(N).forEach(C=>N[C]===void 0&&delete N[C]),N},g=async j=>{try{const w=x(j);let N;n?.id?(N=(await Ie.put(`/clients/${n.id}`,w)).data,ye.success("Cliente atualizado!")):(N=(await Ie.post("/clients",w)).data,ye.success("Cliente criado!")),r(N),s(!1)}catch(w){const N=w?.response?.data?.message,C=Array.isArray(N)?N.join(", "):N||w?.message||"Erro ao salvar cliente";ye.error(C),console.error("Erro ao salvar cliente:",w?.response?.data||w)}};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:n?"Editar Cliente":"Novo Cliente"}),e.jsx(dr,{children:n?"Atualize as informaes do cliente":"Adicione um novo cliente"})]}),e.jsxs("form",{onSubmit:h.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Informaes de Contato"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"contactName",children:"Nome do Contato *"}),e.jsx(Ce,{id:"contactName",...h.register("contactName",{required:!0}),placeholder:"Joo Silva",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"email",children:"Email"}),e.jsx(Ce,{id:"email",type:"email",...h.register("email"),placeholder:"joao@empresa.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"phone",children:"Telefone"}),e.jsx(Ce,{id:"phone",...h.register("phone"),placeholder:"(11) 98765-4321"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"role",children:"Cargo"}),e.jsx(Ce,{id:"role",...h.register("role"),placeholder:"Gerente de Marketing"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Informaes da Empresa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyName",children:"Nome da Empresa"}),e.jsx(Ce,{id:"companyName",...h.register("companyName"),placeholder:"Empresa Ltda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(Ce,{id:"cnpj",...h.register("cnpj"),placeholder:"00.000.000/0000-00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Status e Gesto"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"status",children:"Status *"}),e.jsxs(_t,{value:h.watch("status")||ss.LEAD,onValueChange:j=>f("status",j),children:[e.jsx(Pt,{id:"status",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ss.LEAD,children:"Lead"}),e.jsx(Oe,{value:ss.PROSPECT,children:"Prospect"}),e.jsx(Oe,{value:ss.CLIENTE,children:"Cliente"}),e.jsx(Oe,{value:ss.INATIVO,children:"Inativo"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"origin",children:"Origem"}),e.jsx(Ce,{id:"origin",...h.register("origin"),placeholder:"Indicao, Website..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"ownerUserId",children:"Responsvel Interno"}),e.jsxs(_t,{value:h.watch("ownerUserId")||"none",onValueChange:j=>f("ownerUserId",j==="none"?void 0:j),children:[e.jsx(Pt,{id:"ownerUserId",children:e.jsx(At,{placeholder:c?"Carregando...":"Selecione um responsvel"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"none",children:"Nenhum"}),o.map(j=>e.jsx(Oe,{value:j.id,children:j.name},j.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressZipcode",children:"CEP"}),e.jsx(Ce,{id:"addressZipcode",...h.register("addressZipcode"),placeholder:"01310-100"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"addressStreet",children:"Rua"}),e.jsx(Ce,{id:"addressStreet",...h.register("addressStreet"),placeholder:"Av. Paulista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressNumber",children:"Nmero"}),e.jsx(Ce,{id:"addressNumber",...h.register("addressNumber"),placeholder:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressDistrict",children:"Bairro"}),e.jsx(Ce,{id:"addressDistrict",...h.register("addressDistrict"),placeholder:"Bela Vista"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressCity",children:"Cidade"}),e.jsx(Ce,{id:"addressCity",...h.register("addressCity"),placeholder:"So Paulo"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressState",children:"Estado"}),e.jsxs(_t,{value:h.watch("addressState")||"",onValueChange:j=>f("addressState",j),children:[e.jsx(Pt,{id:"addressState",children:e.jsx(At,{placeholder:"UF"})}),e.jsx(Et,{children:Ug.map(j=>e.jsx(Oe,{value:j,children:j},j))})]})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"addressCountry",children:"Pas"}),e.jsx(Ce,{id:"addressCountry",...h.register("addressCountry"),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"notes",children:"Observaes Internas"}),e.jsx(Wa,{id:"notes",...h.register("notes"),placeholder:"Anotaes internas...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(K,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:h.formState.isSubmitting,children:"Cancelar"}),e.jsx(K,{type:"submit",disabled:h.formState.isSubmitting,children:h.formState.isSubmitting?"Salvando...":n?"Atualizar Cliente":"Salvar Cliente"})]})]})]})})}function ko(t){return{...t,totalAmount:typeof t.totalAmount=="string"?Number(t.totalAmount):t.totalAmount,discountAmount:typeof t.discountAmount=="string"?Number(t.discountAmount):t.discountAmount,discountPercent:typeof t.discountPercent=="string"?Number(t.discountPercent):t.discountPercent,startDate:t.startDate?new Date(t.startDate):void 0,endDate:t.endDate?new Date(t.endDate):void 0,validUntil:t.validUntil?new Date(t.validUntil):void 0,approvedAt:t.approvedAt?new Date(t.approvedAt):void 0,rejectedAt:t.rejectedAt?new Date(t.rejectedAt):void 0,createdAt:t.createdAt?new Date(t.createdAt):void 0,updatedAt:t.updatedAt?new Date(t.updatedAt):void 0,conditionsText:typeof t.conditionsText=="string"?t.conditionsText.replace(/\\n/g,`
`):t.conditionsText,items:Array.isArray(t.items)?t.items.map(s=>({...s,discountApplyTo:s.discountApplyTo??Ws.TOTAL,unitPrice:typeof s.unitPrice=="string"?Number(s.unitPrice):s.unitPrice,totalPrice:typeof s.totalPrice=="string"?Number(s.totalPrice):s.totalPrice,discountAmount:typeof s.discountAmount=="string"?Number(s.discountAmount):s.discountAmount,discountPercent:typeof s.discountPercent=="string"?Number(s.discountPercent):s.discountPercent,startDate:s.startDate?new Date(s.startDate):void 0,endDate:s.endDate?new Date(s.endDate):void 0,createdAt:s.createdAt?new Date(s.createdAt):void 0,updatedAt:s.updatedAt?new Date(s.updatedAt):void 0})):t.items}}function YS(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(t.page??1),[h,f]=m.useState(t.pageSize??40),[v,x]=m.useState(1),[g,j]=m.useState(null),[w,N]=m.useState(!1),[C,S]=m.useState(null),E=m.useRef(null),_=m.useMemo(()=>{const X={...t};return X.status==="all"&&delete X.status,Array.isArray(X.status)&&X.status.length===0&&delete X.status,typeof X.search=="string"&&!X.search.trim()&&delete X.search,X},[t]),k=async()=>{try{N(!0),S(null);const I=(await Ie.get("/proposals",{params:_})).data,B=Array.isArray(I)?I:I.data,te=Array.isArray(I)?B.length:I.total??B.length;if(n(B.map(ko)),o(te),Array.isArray(I))u(t.page??1),f(t.pageSize??B.length),x(1),j(null);else{const ue=I.pageSize??t.pageSize??40,Y=I.totalPages??Math.max(1,Math.ceil(te/ue));u(I.page??t.page??1),f(ue),x(Y),j(I.stats??null)}}catch(X){S(X)}finally{N(!1)}};m.useEffect(()=>{E.current=()=>{k()}},[_.search,_.status,_.clientId,_.responsibleUserId,_.createdFrom,_.createdTo,_.orderBy,_.sortOrder,_.page,_.pageSize]),m.useEffect(()=>{let X=0;const I=()=>{if(typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible")return;const B=Date.now();B-X<800||(X=B,E.current?.())};return window.addEventListener("focus",I),document.addEventListener("visibilitychange",I),()=>{window.removeEventListener("focus",I),document.removeEventListener("visibilitychange",I)}},[]),m.useEffect(()=>{const X=window.setInterval(()=>{typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible"||E.current?.()},15e3);return()=>window.clearInterval(X)},[]);const T=async X=>{const I=await Ie.get(`/proposals/${X}`);return ko(I.data)},M=async X=>{try{const I=await Ie.post("/proposals",X);if(!I.data||typeof I.data!="object")throw new Error("Resposta invlida do servidor (Proxy Error)");const B=ko(I.data);return n(te=>[B,...te]),B}catch(I){throw console.error("Erro ao criar proposta:",I),I}},F=async(X,I)=>{try{const B=await Ie.put(`/proposals/${X}`,I);if(!B.data||typeof B.data!="object")throw new Error("Resposta invlida do servidor");const te=ko(B.data);return n(ue=>ue.map(Y=>Y.id===X?te:Y)),te}catch(B){throw console.error("Erro ao atualizar proposta:",B),B}},O=async(X,I)=>{const B=await Ie.patch(`/proposals/${X}/status`,{status:I}),te=ko(B.data);return n(ue=>ue.map(Y=>Y.id===X?te:Y)),te},Z=async X=>{const I=await Ie.post(`/proposals/${X}/duplicate`);return n(B=>[ko(I.data),...B]),ko(I.data)},q=async X=>{const I=await Ie.post(`/proposals/${X}/approve`),B=ko(I.data);return n(te=>te.map(ue=>ue.id===X?B:ue)),B},$=async X=>(await Ie.get(`/proposals/${X}/pdf`)).data;return m.useEffect(()=>{k()},[_.search,_.status,_.clientId,_.responsibleUserId,_.createdFrom,_.createdTo,_.orderBy,_.sortOrder,_.page,_.pageSize]),{proposals:s,total:r,page:c,pageSize:h,totalPages:v,stats:g??void 0,loading:w,error:C,refetch:k,getProposalById:T,createProposal:M,updateProposal:F,updateProposalStatus:O,duplicateProposal:Z,approveProposal:q,getProposalPdf:$}}function Cv({status:t}){const s=r=>{switch(r){case us.APROVADA:return"bg-green-100 text-green-800";case us.ENVIADA:return"bg-blue-100 text-blue-800";case us.RASCUNHO:return"bg-gray-100 text-gray-800";case us.REPROVADA:return"bg-red-100 text-red-800";case us.EXPIRADA:return"bg-orange-100 text-orange-800"}},n=r=>{switch(r){case us.APROVADA:return"Aprovada";case us.ENVIADA:return"Enviada";case us.RASCUNHO:return"Rascunho";case us.REPROVADA:return"Reprovada";case us.EXPIRADA:return"Expirada"}};return e.jsx(Ke,{className:s(t),children:n(t)})}function I$({clientId:t,onDocumentAdded:s}){const[n,r]=m.useState([]),[o,c]=m.useState(!1),[u,h]=m.useState(!1),[f,v]=m.useState({documentType:"",file:null}),{ownersById:x}=Zu(),g=m.useMemo(()=>k=>k?x.get(k)?.name||k:"",[x]),j=async()=>{try{c(!0);const k=await Ie.get(`/clients/${t}/documents`);r(k.data??[])}catch{ye.error("Erro ao carregar documentos do cliente"),r([])}finally{c(!1)}};m.useEffect(()=>{j()},[t]);const w=k=>{v(T=>({...T,file:k}))},N=async()=>{try{if(!f.file){ye.error("Selecione um arquivo para upload");return}const k=new FormData;k.append("file",f.file),k.append("documentType",(f.documentType||"OUTRO").toString());const M=(await Ie.post(`/clients/${t}/documents`,k,{headers:{"Content-Type":"multipart/form-data"}})).data;ye.success("Documento enviado!"),h(!1),v({documentType:"",file:null}),M?(r(F=>[M,...F]),s?.(M)):await j()}catch(k){const T=k?.response?.data?.message||"Erro ao enviar documento";ye.error(T)}},C=(k,T)=>{const M=window.URL.createObjectURL(k),F=document.createElement("a");F.href=M,F.download=T||"documento",document.body.appendChild(F),F.click(),F.remove(),window.URL.revokeObjectURL(M)},S=async k=>{try{const T=await Ie.get(`/clients/${t}/documents/${k.id}/download`,{responseType:"blob"});C(T.data,k.fileName)}catch{ye.error("Erro ao baixar documento")}},E=async k=>{try{const T=await Ie.get(`/clients/${t}/documents/${k.id}/download`,{responseType:"blob"}),M=window.URL.createObjectURL(T.data);window.open(M,"_blank","noopener,noreferrer"),setTimeout(()=>window.URL.revokeObjectURL(M),6e4)}catch{ye.error("Erro ao visualizar documento")}},_=k=>{const T=new Date(k);return isNaN(T.getTime())?"":T.toLocaleDateString("pt-BR")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:"Documentos"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Gerencie contratos, propostas e outros documentos"})]}),e.jsxs(K,{onClick:()=>h(!0),children:[e.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Upload Documento"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"text-gray-900",children:"Documentos Anexados"})}),o?e.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Carregando documentos..."}):n.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Js,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhum documento anexado"}),e.jsx("p",{className:"text-sm mt-1",children:"Faa upload de documentos relacionados a este cliente"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Arquivo"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Upload por"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:k.fileName})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:k.documentType}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:g(k.uploadedByUserId)}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:_(k.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>E(k),title:"Visualizar",children:e.jsx(li,{className:"w-4 h-4"})}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>S(k),title:"Baixar",children:e.jsx(Dl,{className:"w-4 h-4"})})]})})]},k.id))})]})})]}),e.jsx(_s,{open:u,onOpenChange:h,children:e.jsxs(As,{className:"sm:max-w-md",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:"Upload de Documento"}),e.jsx(dr,{children:"Adicione um documento relacionado a este cliente"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"documentType",children:"Tipo de Documento"}),e.jsx(Ce,{id:"documentType",value:f.documentType,onChange:k=>v(T=>({...T,documentType:k.target.value})),placeholder:"Ex: Contrato, Proposta, CNPJ, etc"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"file",children:"Arquivo"}),e.jsx(Ce,{id:"file",type:"file",onChange:k=>w(k.target.files?.[0]||null),accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Formatos aceitos: PDF, DOC, DOCX, XLS, XLSX, PNG, JPG"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(K,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(K,{onClick:N,children:"Enviar"})]})]})]})})]})}function M$(t){return t.client?e.jsx(R$,{...t,client:t.client}):null}function R$({open:t,onOpenChange:s,client:n,activeTab:r="resumo",onActiveTabChange:o}){const{ownersById:c}=Zu(),u=n.ownerUserId?c.get(n.ownerUserId):null,{proposals:h,loading:f,error:v,refetch:x}=YS({clientId:n.id,pageSize:50}),g=S=>{switch(S){case ss.CLIENTE:return"bg-green-100 text-green-800";case ss.PROSPECT:return"bg-blue-100 text-blue-800";case ss.LEAD:return"bg-yellow-100 text-yellow-800";case ss.INATIVO:return"bg-gray-100 text-gray-800"}},j=S=>{switch(S){case ss.CLIENTE:return"Cliente";case ss.PROSPECT:return"Prospect";case ss.LEAD:return"Lead";case ss.INATIVO:return"Inativo"}},w=S=>{if(!S)return"-";const E=typeof S=="string"?new Date(S):S;return Number.isNaN(E.getTime())?"-":E.toLocaleDateString("pt-BR")},N=S=>{const E=typeof S=="number"?S:Number(S);return Number.isNaN(E)?"-":E.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},C=h.filter(S=>S.status===us.APROVADA).length;return e.jsx(pv,{open:t,onOpenChange:s,children:e.jsxs(fv,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsx(xv,{children:e.jsx(gv,{children:"Detalhes do Cliente"})}),e.jsxs(Wi,{value:r,onValueChange:S=>o?.(S),className:"mt-6",children:[e.jsxs(Gi,{className:"grid w-full grid-cols-4",children:[e.jsx(vs,{value:"resumo",children:"Resumo"}),e.jsx(vs,{value:"documentos",children:"Documentos"}),e.jsx(vs,{value:"propostas",children:"Propostas"}),e.jsx(vs,{value:"atividades",children:"Atividades"})]}),e.jsxs(Ms,{value:"resumo",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-2xl",children:n.contactName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-1",children:n.contactName}),n.role&&e.jsx("p",{className:"text-gray-600 text-sm",children:n.role}),n.companyName&&e.jsx("p",{className:"text-gray-900 text-sm mt-1",children:n.companyName})]})]}),e.jsx(Ke,{className:g(n.status),children:j(n.status)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Informaes de Contato"}),n.email&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(zo,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:n.email})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(C4,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:n.phone})]}),n.cnpj&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Wo,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["CNPJ: ",n.cnpj]})]})]}),(n.addressStreet||n.addressCity||n.addressState)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Endereo"}),e.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[e.jsx(ia,{className:"w-4 h-4 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[n.addressStreet&&n.addressNumber&&e.jsxs("div",{children:[n.addressStreet,", ",n.addressNumber]}),n.addressDistrict&&e.jsx("div",{children:n.addressDistrict}),n.addressCity&&n.addressState&&e.jsxs("div",{children:[n.addressCity," - ",n.addressState]}),n.addressZipcode&&e.jsxs("div",{children:["CEP: ",n.addressZipcode]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Gesto e Origem"}),u&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(dT,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Responsvel: "}),e.jsx("span",{children:u.name})]})]}),n.origin&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Js,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Origem: "}),e.jsx("span",{children:n.origin})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(wu,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Cliente desde: "}),e.jsx("span",{children:w(n.createdAt)})]})]})]}),n.notes&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Observaes Internas"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:n.notes})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-indigo-600 text-sm mb-1",children:"Propostas"}),e.jsx("p",{className:"text-gray-900",children:f?"...":h.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Propostas Aprovadas"}),e.jsx("p",{className:"text-gray-900",children:f?"...":C})]})]})]}),e.jsx(Ms,{value:"documentos",className:"mt-6",children:e.jsx(I$,{clientId:n.id})}),e.jsx(Ms,{value:"propostas",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Propostas do Cliente"}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>x(),disabled:f,children:"Recarregar"})]}),v&&e.jsx("div",{className:"border border-red-200 bg-red-50 text-red-700 rounded-lg p-4 text-sm",children:"Erro ao carregar propostas."}),f?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Carregando propostas..."})}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Js,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhuma proposta cadastrada"})]}):e.jsx("div",{className:"space-y-3",children:h.map(S=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:S.title||`Proposta ${S.id.slice(0,6)}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Criada em ",w(S.createdAt)]})]}),e.jsx(Cv,{status:S.status})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",N(S.totalAmount)]})]},S.id))})]})}),e.jsx(Ms,{value:"atividades",className:"mt-6",children:e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(wu,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"mb-2",children:"Atividades e Histrico"}),e.jsx("p",{className:"text-sm",children:"TODO: Implementar integrao com ActivityLog"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Logs de aes realizadas neste cliente (edies, propostas criadas, etc.)"})]})})]})]})})}function O$({clients:t,onViewDetails:s,onEditClient:n,onViewClientDocuments:r,onDeleteClient:o,page:c,pageSize:u,total:h,onPageChange:f}){const{ownersById:v}=Zu(),x=w=>{switch(w){case ss.CLIENTE:return"bg-green-100 text-green-800";case ss.PROSPECT:return"bg-blue-100 text-blue-800";case ss.LEAD:return"bg-yellow-100 text-yellow-800";case ss.INATIVO:return"bg-gray-100 text-gray-800"}},g=w=>{switch(w){case ss.CLIENTE:return"Cliente";case ss.PROSPECT:return"Prospect";case ss.LEAD:return"Lead";case ss.INATIVO:return"Inativo"}},j=h&&u?Math.max(1,Math.ceil(h/u)):1;return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Email/Telefone"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Responsvel"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Origem"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Propostas"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(w=>{const N=w.ownerUserId?v.get(w.ownerUserId):null,C=w.proposalsCount??0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center",children:w.contactName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900",children:w.contactName}),w.role&&e.jsx("p",{className:"text-gray-500 text-xs",children:w.role})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[w.companyName&&e.jsx("p",{className:"text-gray-900",children:w.companyName}),w.cnpj&&e.jsx("p",{className:"text-gray-500 text-xs",children:w.cnpj}),!w.companyName&&!w.cnpj&&e.jsx("span",{className:"text-gray-400",children:""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[w.email&&e.jsx("div",{className:"text-gray-900",children:w.email}),w.phone&&e.jsx("div",{className:"text-gray-500",children:w.phone}),!w.email&&!w.phone&&e.jsx("span",{className:"text-gray-400",children:""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ke,{className:x(w.status),children:g(w.status)})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:N?.name||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:w.origin||""}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:C}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>s(w),title:"Ver detalhes",children:e.jsx(li,{className:"w-4 h-4"})}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>n(w),title:"Editar cliente",children:e.jsx(ql,{className:"w-4 h-4"})}),e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>r(w),title:"Ver documentos",children:e.jsx(Js,{className:"w-4 h-4"})}),o&&e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>o(w.id),title:"Excluir cliente",children:e.jsx(Aa,{className:"w-4 h-4"})})]})})]},w.id)})})]}),t.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"Nenhum cliente encontrado"})}),h!==void 0&&c!==void 0&&u!==void 0&&f&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 text-sm text-gray-600 border-t border-gray-200",children:[e.jsxs("span",{children:["Pgina ",c," de ",j]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",disabled:c<=1,onClick:()=>f(c-1),children:"Anterior"}),e.jsx(K,{variant:"outline",size:"sm",disabled:c>=j,onClick:()=>f(c+1),children:"Prxima"})]})]})]})}function L$({searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:r,ownerFilter:o,onOwnerChange:c}){const{owners:u}=Zu();return e.jsx(Re,{children:e.jsx(Le,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ce,{value:t,onChange:h=>s(h.target.value),placeholder:"Buscar clientes...",className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:r,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Status"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos os status"}),e.jsx(Oe,{value:ss.LEAD,children:"Lead"}),e.jsx(Oe,{value:ss.PROSPECT,children:"Prospect"}),e.jsx(Oe,{value:ss.CLIENTE,children:"Cliente"}),e.jsx(Oe,{value:ss.INATIVO,children:"Inativo"})]})]}),e.jsxs(_t,{value:o,onValueChange:c,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Responsvel"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos os responsveis"}),u.map(h=>e.jsx(Oe,{value:h.id,children:h.name},h.id))]})]})]})})})}function F$(){const[t,s]=m.useState(""),[n,r]=m.useState("all"),[o,c]=m.useState("all"),[u,h]=m.useState(1),f=40;m.useEffect(()=>{h(1)},[t,n,o]);const{clients:v,total:x,loading:g,error:j,refetch:w}=o$({search:t||void 0,status:n==="all"?void 0:n,ownerUserId:o==="all"?void 0:o,page:u,pageSize:f}),[N,C]=m.useState(!1),[S,E]=m.useState(null),[_,k]=m.useState(null),[T,M]=m.useState("resumo"),F={total:x||v.length,ativos:v.filter(B=>B.status===ss.CLIENTE).length,prospects:v.filter(B=>B.status===ss.PROSPECT).length,leads:v.filter(B=>B.status===ss.LEAD).length},O=()=>{w(),C(!1),E(null)},Z=async B=>{if(confirm("Deseja realmente excluir este cliente?"))try{await Ie.delete(`/clients/${B}`),ye.success("Cliente excludo!"),w()}catch{ye.error("Erro ao excluir cliente")}},q=()=>{E(null),C(!0)},$=B=>{E(B),C(!0)},X=B=>{k(B),M("resumo")},I=B=>{k(B),M("documentos")};return e.jsxs("div",{className:"p-8",children:[g&&e.jsx("div",{children:"Carregando clientes..."}),!g&&j&&e.jsx("div",{children:"Erro ao carregar clientes."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Clientes"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie clientes e anunciantes (Client)"})]}),e.jsxs(K,{className:"gap-2",onClick:q,children:[e.jsx(Sn,{className:"w-4 h-4"}),"Novo Cliente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total de Clientes"}),e.jsx("p",{className:"text-gray-900",children:F.total})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(ss.CLIENTE),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Clientes Ativos"}),e.jsx("p",{className:"text-gray-900",children:F.ativos})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(ss.PROSPECT),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Prospects"}),e.jsx("p",{className:"text-gray-900",children:F.prospects})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(ss.LEAD),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Leads"}),e.jsx("p",{className:"text-gray-900",children:F.leads})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx(L$,{searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:r,ownerFilter:o,onOwnerChange:c})}),(t||n!=="all"||o!=="all")&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[v.length," ",v.length===1?"cliente encontrado":"clientes encontrados"]})}),e.jsx(Re,{children:e.jsx(O$,{clients:v,onViewDetails:X,onEditClient:$,onViewClientDocuments:I,onDeleteClient:Z,page:u,pageSize:f,total:x,onPageChange:h})}),e.jsx(D$,{open:N,onOpenChange:B=>{C(B),B||E(null)},client:S,onSave:O}),e.jsx(M$,{open:!!_,onOpenChange:B=>{B||k(null)},client:_,activeTab:T,onActiveTabChange:M})]})}var $$=Symbol("radix.slottable");function z$(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=$$,s}var JS="AlertDialog",[B$]=Pa(JS,[h2]),Zi=h2(),e_=t=>{const{__scopeAlertDialog:s,...n}=t,r=Zi(s);return e.jsx(O0,{...r,...n,modal:!0})};e_.displayName=JS;var U$="AlertDialogTrigger",V$=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Zi(n);return e.jsx(a3,{...o,...r,ref:s})});V$.displayName=U$;var H$="AlertDialogPortal",t_=t=>{const{__scopeAlertDialog:s,...n}=t,r=Zi(s);return e.jsx(L0,{...r,...n})};t_.displayName=H$;var q$="AlertDialogOverlay",s_=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Zi(n);return e.jsx(zu,{...o,...r,ref:s})});s_.displayName=q$;var Qc="AlertDialogContent",[W$,G$]=B$(Qc),Z$=z$("AlertDialogContent"),n_=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:r,...o}=t,c=Zi(n),u=m.useRef(null),h=ns(s,u),f=m.useRef(null);return e.jsx(e3,{contentName:Qc,titleName:a_,docsSlug:"alert-dialog",children:e.jsx(W$,{scope:n,cancelRef:f,children:e.jsxs(F0,{role:"alertdialog",...c,...o,ref:h,onOpenAutoFocus:lt(o.onOpenAutoFocus,v=>{v.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:v=>v.preventDefault(),onInteractOutside:v=>v.preventDefault(),children:[e.jsx(Z$,{children:r}),e.jsx(Q$,{contentRef:u})]})})})});n_.displayName=Qc;var a_="AlertDialogTitle",r_=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Zi(n);return e.jsx($0,{...o,...r,ref:s})});r_.displayName=a_;var i_="AlertDialogDescription",o_=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Zi(n);return e.jsx(z0,{...o,...r,ref:s})});o_.displayName=i_;var K$="AlertDialogAction",l_=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Zi(n);return e.jsx(Rp,{...o,...r,ref:s})});l_.displayName=K$;var c_="AlertDialogCancel",d_=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:o}=G$(c_,n),c=Zi(n),u=ns(s,o);return e.jsx(Rp,{...c,...r,ref:u})});d_.displayName=c_;var Q$=({contentRef:t})=>{const s=`\`${Qc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qc}\` by passing a \`${i_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},X$=e_,Y$=t_,J$=s_,e8=n_,t8=l_,s8=d_,n8=r_,a8=o_;function r8({...t}){return e.jsx(X$,{"data-slot":"alert-dialog",...t})}function i8({...t}){return e.jsx(Y$,{"data-slot":"alert-dialog-portal",...t})}function o8({className:t,...s}){return e.jsx(J$,{"data-slot":"alert-dialog-overlay",className:Nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function l8({className:t,...s}){return e.jsxs(i8,{children:[e.jsx(o8,{}),e.jsx(e8,{"data-slot":"alert-dialog-content",className:Nt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function c8({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:Nt("flex flex-col gap-2 text-center sm:text-left",t),...s})}function d8({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:Nt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function u8({className:t,...s}){return e.jsx(n8,{"data-slot":"alert-dialog-title",className:Nt("text-lg font-semibold",t),...s})}function m8({className:t,...s}){return e.jsx(a8,{"data-slot":"alert-dialog-description",className:Nt("text-muted-foreground text-sm",t),...s})}function h8({className:t,...s}){return e.jsx(t8,{className:Nt(v0(),t),...s})}function p8({className:t,...s}){return e.jsx(s8,{className:Nt(v0({variant:"outline"}),t),...s})}const Gg="app:data-changed";function rg(t,s){if(typeof window>"u")return;const n={topic:t,payload:s,ts:Date.now()};window.dispatchEvent(new CustomEvent(Gg,{detail:n}))}function f8(t,s){if(typeof window>"u")return()=>{};const n=r=>{const o=r;o?.detail&&o.detail.topic===t&&s(o.detail)};return window.addEventListener(Gg,n),()=>window.removeEventListener(Gg,n)}const x8={};function ig(t){return{...t,basePrice:typeof t?.basePrice=="string"?parseFloat(t.basePrice):typeof t?.basePrice=="number"?t.basePrice:0}}function xN(t){return{total:t.length,produtos:t.filter(s=>s.type===an.PRODUTO).length,servicos:t.filter(s=>s.type===an.SERVICO).length,adicionais:t.filter(s=>s.isAdditional).length}}function u_(t=x8){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState(0),[v,x]=m.useState(1),[g,j]=m.useState(40),[w,N]=m.useState(1),[C,S]=m.useState({total:0,produtos:0,servicos:0,adicionais:0}),E=m.useMemo(()=>{const F={...t};return F.page==null&&(F.page=1),F.pageSize==null&&(F.pageSize=40),F.type==="adicional"&&(F.isAdditional=!0,delete F.type),F.type&&!Object.values(an).includes(F.type)&&delete F.type,typeof F.search=="string"&&F.search.trim()===""&&delete F.search,typeof F.category=="string"&&F.category.trim()===""&&delete F.category,F},[t]),_=m.useCallback(async()=>{try{o(!0),u(null);const O=(await Ie.get("/products",{params:E})).data,Z=Array.isArray(O)?O:O?.data??O?.items??[],q=Array.isArray(Z)?Z.map(ig):[];n(q);const $=Array.isArray(O)?q.length:typeof O?.total=="number"?O.total:q.length,X=Array.isArray(O)?E.page:O?.page??E.page,I=Array.isArray(O)?E.pageSize:O?.pageSize??E.pageSize,B=Array.isArray(O)?Math.max(1,Math.ceil($/I)):O?.totalPages??Math.max(1,Math.ceil($/I));f($),x(X),j(I),N(B);const te=Array.isArray(O)?xN(q):O?.stats;S(te?{total:typeof te.total=="number"?te.total:$,produtos:typeof te.produtos=="number"?te.produtos:0,servicos:typeof te.servicos=="number"?te.servicos:0,adicionais:typeof te.adicionais=="number"?te.adicionais:0}:xN(q))}catch(F){u(F),n([]),f(0),N(1),S({total:0,produtos:0,servicos:0,adicionais:0})}finally{o(!1)}},[E]),k=m.useCallback(async F=>{const O=await Ie.post("/products",F),Z=ig(O.data);return rg("products"),await _(),Z},[_]),T=m.useCallback(async(F,O)=>{const Z=await Ie.put(`/products/${F}`,O),q=ig(Z.data);return rg("products"),await _(),q},[_]),M=m.useCallback(async F=>{await Ie.delete(`/products/${F}`),rg("products"),await _()},[_]);return m.useEffect(()=>{_()},[_]),m.useEffect(()=>f8("products",()=>{_()}),[_]),{products:s,loading:r,error:c,refetch:_,createProduct:k,updateProduct:T,deleteProduct:M,total:h,page:v,pageSize:g,totalPages:w,stats:C}}function g8({searchQuery:t,onSearchChange:s,typeFilter:n,onTypeChange:r}){return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ce,{placeholder:"Buscar por nome, descrio ou categoria...",value:t,onChange:o=>s(o.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:r,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Tipo"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos os tipos"}),e.jsx(Oe,{value:an.PRODUTO,children:"Produtos"}),e.jsx(Oe,{value:an.SERVICO,children:"Servios"}),e.jsx(Oe,{value:"adicional",children:"Adicionais"})]})]})]})}function v8({products:t,onEditProduct:s,onDeleteProduct:n}){const r=c=>c===an.PRODUTO?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",o=c=>{switch(c){case On.UNITARIO:return"Unitrio";case On.A_PARTIR_DE:return"A partir de";case On.PACOTE:return"Pacote"}};return t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum produto/servio encontrado"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>e.jsx(Re,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(Ke,{className:r(c.type),children:c.type===an.PRODUTO?"Produto":"Servio"}),c.isAdditional&&e.jsx(Ke,{variant:"outline",className:"text-xs",children:"Adicional"})]}),e.jsx("h3",{className:"text-gray-900 mb-1",children:c.name}),c.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:c.description}),c.category&&e.jsx("p",{className:"text-gray-500 text-xs mb-3",children:c.category})]})}),e.jsx("div",{className:"border-t border-gray-100 pt-4 mb-4",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-gray-900",children:["R$ ",Number(c.basePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",o(c.priceType),")"]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(c),children:[e.jsx(ql,{className:"w-4 h-4 mr-2"}),"Editar"]}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>n(c),"aria-label":"Excluir produto",children:e.jsx(Aa,{className:"w-4 h-4"})})]})]})},c.id))})}function y8({open:t,onOpenChange:s,product:n,onSave:r}){const[o,c]=m.useState({name:"",description:"",category:"",type:an.PRODUTO,priceType:On.UNITARIO,basePrice:"",isAdditional:!1}),[u,h]=m.useState({});m.useEffect(()=>{c(n?{name:n.name,description:n.description||"",category:n.category||"",type:n.type,priceType:n.priceType,basePrice:n.basePrice.toString(),isAdditional:n.isAdditional}:{name:"",description:"",category:"",type:an.PRODUTO,priceType:On.UNITARIO,basePrice:"",isAdditional:!1}),h({})},[n,t]);const f=()=>{const g={};return o.name.trim()||(g.name="Nome  obrigatrio"),(!o.basePrice||parseFloat(o.basePrice)<=0)&&(g.basePrice="Preo deve ser maior que zero"),h(g),Object.keys(g).length===0},v=g=>{if(g.preventDefault(),!f())return;const j={name:o.name.trim(),description:o.description.trim()||void 0,category:o.category.trim()||void 0,type:o.type,priceType:o.priceType,basePrice:parseFloat(o.basePrice),isAdditional:o.isAdditional};n&&(j.id=n.id,j.updatedAt=new Date),r(j)},x=()=>{s(!1),h({})};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Rs,{children:e.jsx(Os,{children:n?"Editar Produto/Servio":"Cadastrar Produto/Servio"})}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"type",children:["Tipo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_t,{value:o.type,onValueChange:g=>c({...o,type:g}),children:[e.jsx(Pt,{id:"type",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:an.PRODUTO,children:"Produto"}),e.jsx(Oe,{value:an.SERVICO,children:"Servio"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"name",children:["Nome ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ce,{id:"name",placeholder:"Ex: Impresso de Lona",value:o.name,onChange:g=>c({...o,name:g.target.value})}),u.name&&e.jsx("p",{className:"text-red-500 text-sm",children:u.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"category",children:"Categoria"}),e.jsx(Ce,{id:"category",placeholder:"Ex: Material",value:o.category,onChange:g=>c({...o,category:g.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"description",children:"Descrio"}),e.jsx(Wa,{id:"description",placeholder:"Descreva o produto ou servio...",rows:3,value:o.description,onChange:g=>c({...o,description:g.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"priceType",children:["Tipo de Preo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_t,{value:o.priceType,onValueChange:g=>c({...o,priceType:g}),children:[e.jsx(Pt,{id:"priceType",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:On.UNITARIO,children:"Unitrio"}),e.jsx(Oe,{value:On.A_PARTIR_DE,children:"A partir de"}),e.jsx(Oe,{value:On.PACOTE,children:"Pacote"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"basePrice",children:["Preo Base (R$) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ce,{id:"basePrice",type:"number",step:"0.01",min:"0",placeholder:"0,00",value:o.basePrice,onChange:g=>c({...o,basePrice:g.target.value})}),u.basePrice&&e.jsx("p",{className:"text-red-500 text-sm",children:u.basePrice})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{id:"isAdditional",checked:o.isAdditional,onCheckedChange:g=>c({...o,isAdditional:g===!0})}),e.jsx(je,{htmlFor:"isAdditional",className:"cursor-pointer",children:"Este  um item adicional (pode ser includo em propostas)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(K,{type:"button",variant:"outline",onClick:x,children:"Cancelar"}),e.jsx(K,{type:"submit",children:n?"Atualizar":"Salvar"})]})]})]})})}const og=40;function b8(){const[t,s]=m.useState(""),[n,r]=m.useState("all"),[o,c]=m.useState(1),u=m.useMemo(()=>({search:t,type:n!=="all"?n:void 0,page:o,pageSize:og}),[t,n,o]),{products:h,loading:f,error:v,createProduct:x,updateProduct:g,deleteProduct:j,total:w,totalPages:N,stats:C}=u_(u),[S,E]=m.useState(!1),[_,k]=m.useState(null),[T,M]=m.useState(null);m.useEffect(()=>{c(1)},[t,n]),m.useEffect(()=>{o>N&&c(N)},[o,N]);const F=w===0?0:(o-1)*og+1,O=w===0?0:Math.min(o*og,w),Z=async B=>{try{_?.id?(await g(_.id,B),ye.success("Produto atualizado com sucesso!")):(await x(B),ye.success("Produto cadastrado com sucesso!")),E(!1),k(null)}catch{ye.error("Erro ao salvar produto")}},q=()=>{k(null),E(!0)},$=B=>{k(B),E(!0)},X=B=>{M(B)},I=async()=>{if(T)try{await j(T.id),ye.success("Produto excludo com sucesso!")}catch{ye.error("Erro ao excluir produto")}finally{M(null)}};return e.jsxs("div",{className:"p-8",children:[f&&e.jsx("div",{children:"Carregando produtos..."}),!f&&v&&e.jsx("div",{children:"Erro ao carregar produtos."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Produtos e Servios"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie produtos e servios adicionais (Product)"})]}),e.jsxs(K,{className:"gap-2",onClick:q,children:[e.jsx(Sn,{className:"w-4 h-4"}),"Novo Produto/Servio"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("all"),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total"}),e.jsx("p",{className:"text-gray-900",children:C.total})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(an.PRODUTO),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Produtos"}),e.jsx("p",{className:"text-gray-900",children:C.produtos})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(an.SERVICO),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Servios"}),e.jsx("p",{className:"text-gray-900",children:C.servicos})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("adicional"),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Adicionais"}),e.jsx("p",{className:"text-gray-900",children:C.adicionais})]})})]}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"pt-6",children:e.jsx(g8,{searchQuery:t,onSearchChange:s,typeFilter:n,onTypeChange:B=>r(B)})})}),(t||n!=="all")&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[w," ",w===1?"produto/servio encontrado":"produtos/servios encontrados"]})}),e.jsx(v8,{products:h,onEditProduct:$,onDeleteProduct:X}),N>1&&e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3 mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",F,"-",O," de ",w,"  Pgina ",o," de ",N]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{variant:"outline",onClick:()=>c(B=>Math.max(1,B-1)),disabled:o<=1,children:"Anterior"}),e.jsx(K,{variant:"outline",onClick:()=>c(B=>Math.min(N,B+1)),disabled:o>=N,children:"Prxima"})]})]}),e.jsx(y8,{open:S,onOpenChange:B=>{E(B),B||k(null)},product:_,onSave:Z}),e.jsx(r8,{open:!!T,onOpenChange:B=>{B||M(null)},children:e.jsxs(l8,{children:[e.jsxs(c8,{children:[e.jsx(u8,{children:"Confirmar excluso"}),e.jsxs(m8,{children:["Tem certeza que deseja excluir o produto/servio ",e.jsx("strong",{children:T?.name}),"? Esta ao no pode ser desfeita."]})]}),e.jsxs(d8,{children:[e.jsx(p8,{onClick:()=>M(null),children:"Cancelar"}),e.jsx(h8,{onClick:I,children:"Excluir"})]})]})})]})}const j8=[{value:us.RASCUNHO,label:"Rascunho"},{value:us.ENVIADA,label:"Enviada"},{value:us.APROVADA,label:"Aprovada"},{value:us.REPROVADA,label:"Reprovada"},{value:us.EXPIRADA,label:"Expirada"}];function N8({open:t,onOpenChange:s,filters:n,onApplyFilters:r}){const[o,c]=m.useState(n),[u,h]=m.useState([]),[f,v]=m.useState(!1);m.useEffect(()=>{c(n)},[n]),m.useEffect(()=>{t&&(async()=>{try{v(!0);const S=(await Ie.get("/proposals/responsibles")).data,E=Array.isArray(S)?S:Array.isArray(S?.data)?S.data:[];h(E)}catch{h([])}finally{v(!1)}})()},[t]);const x=m.useMemo(()=>u.map(N=>({id:N.id,label:N.name||N.email||N.id})),[u]),g=N=>{c(C=>({...C,proposalStatuses:C.proposalStatuses.includes(N)?C.proposalStatuses.filter(S=>S!==N):[...C.proposalStatuses,N]}))},j=()=>{const N={proposalStatuses:[],campaignStatus:void 0,billingStatus:void 0,responsibleUserId:void 0,createdFrom:void 0,createdTo:void 0};c(N),r(N),s(!1)},w=()=>{r(o),s(!1)};return e.jsx(pv,{open:t,onOpenChange:s,children:e.jsxs(fv,{className:"w-[420px] sm:w-[540px] sm:max-w-[540px] p-0 gap-0",children:[e.jsxs(xv,{className:"border-b px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pp,{className:"w-5 h-5 text-gray-600"}),e.jsx(gv,{className:"text-base",children:"Filtros Avanados"})]}),e.jsx(MS,{children:"Refine a lista de propostas."})]}),e.jsxs("div",{className:"flex-1 overflow-auto px-6 py-5 space-y-7",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Status da Proposta"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j8.map(N=>e.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-3 py-2",children:[e.jsx(qa,{id:`status-${N.value}`,checked:o.proposalStatuses.includes(N.value),onCheckedChange:()=>g(N.value)}),e.jsx(je,{htmlFor:`status-${N.value}`,className:"text-sm",children:N.label})]},N.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Responsvel"}),e.jsxs(_t,{value:o.responsibleUserId||"all",onValueChange:N=>c(C=>({...C,responsibleUserId:N==="all"?void 0:N})),disabled:f,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:f?"Carregando...":"Selecione o responsvel"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos"}),!f&&x.length===0?e.jsx(Oe,{value:"__none",disabled:!0,children:"Nenhum responsvel encontrado"}):null,x.map(N=>e.jsx(Oe,{value:N.id,children:N.label},N.id))]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Perodo de Criao"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(je,{htmlFor:"createdFrom",className:"text-sm text-gray-600",children:"De"}),e.jsx(Ce,{id:"createdFrom",type:"date",value:o.createdFrom||"",onChange:N=>c(C=>({...C,createdFrom:N.target.value||void 0}))})]}),e.jsxs("div",{children:[e.jsx(je,{htmlFor:"createdTo",className:"text-sm text-gray-600",children:"At"}),e.jsx(Ce,{id:"createdTo",type:"date",value:o.createdTo||"",onChange:N=>c(C=>({...C,createdTo:N.target.value||void 0}))})]})]})]})]}),e.jsxs(IF,{className:"border-t bg-background px-6 py-4 flex-row gap-3",children:[e.jsx(K,{variant:"outline",onClick:j,className:"flex-1",children:"Limpar"}),e.jsx(K,{onClick:w,className:"flex-1",children:"Aplicar Filtros"})]})]})})}function Hs(t,s=0){if(t==null)return s;if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=Number(t.replace(",","."));return Number.isFinite(n)?n:s}return s}function wh(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const[n,r,o]=s.toISOString().split("T")[0].split("-");return`${o}/${r}/${n}`}function w8(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return s.toLocaleString("pt-BR")}catch{return""}}async function C8(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const s=document.createElement("textarea");return s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch{return!1}}}function S8({open:t,onOpenChange:s,proposal:n,onNavigate:r}){const o=n??{};m.useEffect(()=>{console.debug("ProposalDetailsDrawer mounted/render, proposal=",n,"open=",t)},[n?.id,t]);const[c,u]=m.useState(null),[h,f]=m.useState(null),[v,x]=m.useState(null),[g,j]=m.useState(!1),[w,N]=m.useState(!1),[C,S]=m.useState(!1),[E,_]=m.useState(null),[k,T]=m.useState(null),[M,F]=m.useState(null);m.useEffect(()=>{!n||!t||(F(null),T(null),_(null),u(o.publicHash??o.public_hash??null))},[n?.id,t]);const O=m.useMemo(()=>o.clientName||n?.client?.companyName||n?.client?.contactName||n?.client?.companyName||n?.client?.contactName||"-",[n,o.clientName]),Z=m.useMemo(()=>{const G=n?.client?.companyName??n?.client?.companyName,ee=n?.client?.contactName??n?.client?.contactName;return G&&ee?ee:null},[n]),q=m.useMemo(()=>o.responsibleUserName||n?.responsibleUser?.name||n?.responsibleUser?.name||"-",[n,o.responsibleUserName]),$=m.useMemo(()=>{if(!n)return[];const G=o.items??o.proposalItems??[];return Array.isArray(G)?G:[]},[n]),X=m.useMemo(()=>n?.conditionsText?String(n.conditionsText).replace(/\\n/g,`
`):"",[n?.conditionsText]),I=m.useMemo(()=>Hs(o.totalAmount,0),[n]),B=G=>Hs(G,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),te=typeof window<"u"?window.location.origin:"",ue=m.useMemo(()=>c&&te?`${te}/p/${c}`:null,[c,te]),Y=m.useMemo(()=>!c||!h||!te?null:`${te}/p/${c}?m=${encodeURIComponent(h)}`,[c,h,te]),ce=m.useMemo(()=>!c||!v||!te?null:`${te}/p/${c}?t=${encodeURIComponent(v)}`,[c,v,te]),U=G=>{if(!G)return null;const ee=String(G),V=ee.match(/filename\*=(?:UTF-8''|)([^;\n]+)/i);if(V?.[1]){const ae=V[1].trim().replace(/^"|"$/g,"");try{return decodeURIComponent(ae)}catch{return ae}}const re=ee.match(/filename=([^;\n]+)/i);return re?.[1]?re[1].trim().replace(/^"|"$/g,""):null},ne=async()=>{if(n)try{S(!0),_(null);const G=c||n.publicHash||n.public_hash||null,ee=G?`/public/proposals/${G}/pdf`:`/proposals/${n.id}/pdf/file`,V=await Ie.get(ee,{responseType:"blob"}),re=V.headers?.["content-disposition"]||V.headers?.["Content-Disposition"],ae=U(re)||`proposta-${n.id}.pdf`,me=new Blob([V.data],{type:"application/pdf"}),oe=window.URL.createObjectURL(me),Pe=document.createElement("a");Pe.href=oe,Pe.download=ae,Pe.rel="noreferrer",document.body.appendChild(Pe),Pe.click(),Pe.remove(),window.URL.revokeObjectURL(oe)}catch(G){_(G?.response?.data?.message||G?.message||"No foi possvel baixar o PDF da proposta")}finally{S(!1)}},Q=async(G,ee)=>{if(!G)return;const V=await C8(G);F(null),T(V?ee:"Copie manualmente (no foi possvel copiar automaticamente).")},z=async()=>{if(n){T(null),F(null);try{j(!0);const G=await Ie.get(`/proposals/${n.id}/public-message-token`),ee=G.data?.token,V=G.data?.publicHash;V&&u(V),ee&&f(ee);const re=V??c;if(!re||!ee)throw new Error("No foi possvel gerar o link de mensagens.");if(!te)throw new Error("No foi possvel determinar a URL do site.");await Q(`${te}/p/${re}?m=${encodeURIComponent(ee)}`,"Link de mensagens copiado.")}catch(G){F(G?.response?.data?.message||G?.message||"Erro ao gerar link de mensagens")}finally{j(!1)}}},se=async()=>{if(n){T(null),F(null);try{N(!0);const G=await Ie.get(`/proposals/${n.id}/public-action-token`),ee=G.data?.token,V=G.data?.publicHash;V&&u(V),ee&&x(ee);const re=V??c;if(!re||!ee)throw new Error("No foi possvel gerar o link de deciso.");if(!te)throw new Error("No foi possvel determinar a URL do site.");await Q(`${te}/p/${re}?t=${encodeURIComponent(ee)}`,"Link de deciso copiado.")}catch(G){F(G?.response?.data?.message||G?.message||"Erro ao gerar link de deciso")}finally{N(!1)}}};return t?e.jsx(_s,{open:t,onOpenChange:s,children:e.jsx(As,{className:"p-0 !w-[96vw] !max-w-[1400px] sm:!max-w-[1400px] h-[90vh] overflow-hidden",children:n?e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("h2",{className:"text-gray-900 truncate",children:n.title||"Proposta"}),e.jsx(Cv,{status:o.status})]})}),e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Total"}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",B(I)]}),Hs(o.discountPercent,0)>0&&e.jsxs("p",{className:"text-green-600 text-sm",children:["Desconto: -",Hs(o.discountPercent,0),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:O}),Z&&e.jsx("p",{className:"text-sm text-gray-600",children:Z})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Responsvel"}),e.jsx("p",{className:"text-gray-900",children:q})]}),o.startDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Data de incio"}),e.jsx("p",{className:"text-gray-900",children:wh(o.startDate)})]}),typeof n.assemblyMaxDays=="number"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Perodo mximo de montagem"}),e.jsxs("p",{className:"text-gray-900",children:[n.assemblyMaxDays," dias"]})]}),n.validUntil&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Validade"}),e.jsx("p",{className:"text-gray-900",children:wh(n.validUntil)})]})]}),X&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Condies / Observaes"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:X})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-900 mb-4",children:["Itens da Proposta (",$.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[$.map((G,ee)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("p",{className:"text-gray-900 flex-1",children:G.description||"Item"}),(()=>{const V=Math.max(1,Hs(G.quantity,1)),re=Hs(G.discountPercent,0),ae=Hs(G.discountAmount,0),me=G.discountApplyTo??"TOTAL",oe=me==="RENT"?"no aluguel":me==="COSTS"?"nos custos":"no total",Pe=Hs(G.unitPrice,0);let We=V*Pe,Je=0,tt=0;const nt=Hs(G.totalPrice??G.total??We,0);if(G.mediaUnitId){const pt=Hs(G.occupationDays,0),It=Math.floor(pt/30),Lt=Math.round(pt%30/15),J=Hs(G.priceMonthSnapshot,0),ve=Hs(G.priceBiweeklySnapshot,0),xe=Hs(G.productionCostSnapshot,0),Ve=Hs(G.installationCostSnapshot,0),de=!!G.clientProvidesBanner,Ne=It*J+Lt*ve,Be=Ve+(de?0:xe);Je=Ne*V,tt=Be*V,We=Je+tt}const ct=Math.max(0,We-nt),wt=re>0?`${re}%`:ae>0?`R$ ${B(ae)}`:null;return e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-gray-900 whitespace-nowrap",children:["R$ ",B(nt)]}),ct>0&&We>0?e.jsxs("div",{className:"mt-0.5 space-y-0.5",children:[e.jsxs("p",{className:"text-[11px] text-gray-500 whitespace-nowrap",children:["Orig: R$ ",B(We)]}),e.jsxs("p",{className:"text-[11px] text-red-600 whitespace-nowrap",children:["Desc",wt?` (${wt} ${oe})`:` (${oe})`,": - R$ ",B(ct)]})]}):null]})})()]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-sm",children:[G.mediaUnitId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Tempo de ocupao"}),e.jsx("p",{className:"text-gray-700",children:G.occupationDays?`${G.occupationDays} dias`:""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Cliente fornece lona"}),e.jsx("p",{className:"text-gray-700",children:G.clientProvidesBanner?"Sim":"No"})]})]}):G.startDate&&G.endDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-gray-700",children:[wh(G.startDate)," - ",wh(G.endDate)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Quantidade"}),e.jsx("p",{className:"text-gray-700",children:G.quantity??1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Preo Unitrio"}),e.jsxs("p",{className:"text-gray-700",children:["R$ ",B(G.unitPrice)]})]})]}),G.mediaUnitId?(()=>{const V=Math.max(1,Hs(G.quantity,1)),re=Hs(G.occupationDays,0),ae=Math.floor(re/30),me=Math.round(re%30/15),oe=Hs(G.priceMonthSnapshot,0),Pe=Hs(G.priceBiweeklySnapshot,0),We=Hs(G.productionCostSnapshot,0),Je=Hs(G.installationCostSnapshot,0),tt=!!G.clientProvidesBanner,nt=(ae*oe+me*Pe)*V,ct=(Je+(tt?0:We))*V,wt=Hs(G.discountPercent,0),pt=Hs(G.discountAmount,0),It=G.discountApplyTo??"TOTAL",Lt=de=>{let Ne=de;return wt>0&&(Ne=Ne*(1-wt/100)),pt>0&&(Ne=Ne-pt),Number.isFinite(Ne)||(Ne=0),Math.max(0,Ne)};let J=G.rentTotalSnapshot!=null?Hs(G.rentTotalSnapshot,0):null,ve=G.upfrontTotalSnapshot!=null?Hs(G.upfrontTotalSnapshot,0):null;if(J==null||ve==null)if(It==="TOTAL"){const de=nt+ct,Ne=Lt(de),Be=de>0?Ne/de:0;J=nt*Be,ve=ct*Be}else It==="RENT"?(J=Lt(nt),ve=ct):It==="COSTS"&&(ve=Lt(ct),J=nt);const xe=Math.abs(nt-(J??0))>.009,Ve=Math.abs(ct-(ve??0))>.009;return nt<=0&&ct<=0?null:e.jsx("div",{className:"mt-3 rounded-md bg-gray-50 p-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Aluguel"}),e.jsxs("p",{className:"text-gray-700 whitespace-nowrap",children:["R$ ",B(nt),xe?`  R$ ${B(J)}`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Custos (produo/instalao)"}),e.jsxs("p",{className:"text-gray-700 whitespace-nowrap",children:["R$ ",B(ct),Ve?`  R$ ${B(ve)}`:""]})]})]})})})():null]},G.id??`${G.description??"item"}-${ee}`)),!$.length&&e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum item adicionado."})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h3",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Kk,{className:"w-4 h-4"})," Links pblicos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Visualizao"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:ue||""}),e.jsx(K,{size:"icon",variant:"outline",disabled:!ue,onClick:()=>Q(ue,"Link de visualizao copiado."),children:e.jsx($n,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Mensagens (portal do cliente)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:Y||""}),e.jsx(K,{size:"icon",variant:"outline",disabled:!Y,onClick:()=>Q(Y,"Link de mensagens copiado."),children:e.jsx($n,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(K,{variant:"outline",onClick:z,disabled:g,className:"w-full sm:w-auto",children:g?"Gerando":"Gerar link de mensagens"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Deciso (aprovar/recusar)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:ce||""}),e.jsx(K,{size:"icon",variant:"outline",disabled:!ce,onClick:()=>Q(ce,"Link de deciso copiado."),children:e.jsx($n,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(K,{variant:"outline",onClick:se,disabled:w,className:"w-full sm:w-auto",children:w?"Gerando":"Gerar link de deciso"})})]}),M&&e.jsx("p",{className:"text-sm text-red-600",children:M}),k&&e.jsx("p",{className:"text-sm text-green-700",children:k}),e.jsx("div",{className:"pt-2",children:e.jsx(K,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>{s(!1),r?.("messages");const G=new URL(window.location.href);G.searchParams.set("proposalId",n.id),G.searchParams.delete("campaignId");const ee=`${G.pathname}?${G.searchParams.toString()}`;try{window.history.pushState({},"",ee),window.dispatchEvent(new Event("app:navigation"))}catch{}},children:"Ir para Mensagens"})})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Proposta (PDF)"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsx(K,{variant:"outline",className:"w-full sm:w-auto",disabled:C,onClick:ne,children:C?"Baixando":"Baixar proposta (PDF)"})}),E&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:E})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Criado em ",w8(o.createdAt)]})})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"Sem detalhes disponveis."})})})}):null}function _8({searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:r,onOpenAdvancedFilters:o}){return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ce,{placeholder:"Buscar por ttulo ou cliente...",value:t,onChange:c=>s(c.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:r,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Status"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos os status"}),e.jsx(Oe,{value:us.RASCUNHO,children:"Rascunho"}),e.jsx(Oe,{value:us.ENVIADA,children:"Enviada"}),e.jsx(Oe,{value:us.APROVADA,children:"Aprovada"}),e.jsx(Oe,{value:us.REPROVADA,children:"Reprovada"}),e.jsx(Oe,{value:us.EXPIRADA,children:"Expirada"})]})]}),e.jsxs(K,{type:"button",variant:"outline",className:"gap-2",onClick:o,children:[e.jsx(pp,{className:"w-4 h-4"}),"Mais Filtros"]})]})}function A8({value:t,onChange:s}){const[n,r]=m.useState([]),[o,c]=m.useState(!1);m.useEffect(()=>{let f=!1;return(async()=>{try{c(!0);const x=40;let g=1;const j=[];for(let w=0;w<50;w++){const C=(await Ie.get("/clients",{params:{page:g,pageSize:x,orderBy:"name",sortOrder:"asc"}})).data,S=Array.isArray(C)?C:C?.data??[];if(j.push(...S),Array.isArray(C))break;const E=C?.totalPages;if(typeof E=="number"&&g>=E||!S.length||S.length<x)break;g+=1}f||r(j)}catch{f||r([])}finally{f||c(!1)}})(),()=>{f=!0}},[]);const u=m.useMemo(()=>(n||[]).map(f=>({id:f.id,label:`${f.contactName||"Sem nome"}${f.companyName?`  ${f.companyName}`:""}`})),[n]),h=f=>{const v=f.target.value;s&&v&&s(v)};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{"data-testid":"client-select",className:"flex h-9 w-full rounded-md border border-input bg-input-background px-3 py-1 text-sm shadow-sm transition-colors outline-none appearance-none cursor-pointer pr-10 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",value:t||"",onChange:h,style:{WebkitAppearance:"none",MozAppearance:"none"},disabled:o,children:[e.jsx("option",{value:"",children:o?"Carregando clientes...":"Selecione o cliente"}),u.map(f=>e.jsx("option",{value:f.id,children:f.label},f.id))]}),e.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-muted-foreground text-xs",children:""})]})}function P8({formData:t,onChange:s,onValidChange:n,onClose:r,onNavigate:o}){const{user:c}=Vo();m.useEffect(()=>{c&&!t.responsibleUserId&&s({responsibleUserId:c.id})},[c,t.responsibleUserId,s]),m.useEffect(()=>{const v=!!t.clientId&&!!t.responsibleUserId;n(v)},[t.clientId,t.responsibleUserId,n]);const u=v=>{s({clientId:v})},h=()=>{r&&r(),o&&o("clients")},f=v=>new Date(`${v}T00:00:00`);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"clientId",className:"required",children:"Cliente *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(A8,{value:t.clientId,onChange:u})}),e.jsx(K,{type:"button",variant:"outline",size:"icon",onClick:h,title:"Ir para mdulo de Clientes",children:e.jsx(Sn,{className:"w-4 h-4"})})]}),!t.clientId&&e.jsx("p",{className:"text-sm text-red-600",children:"Selecione um cliente para continuar"}),e.jsx("p",{className:"text-sm text-gray-500",children:" Precisa cadastrar um cliente novo? Clique no boto + para abrir o mdulo de Clientes."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"title",children:"Ttulo da Proposta"}),e.jsx(Ce,{id:"title",placeholder:"Ex: Campanha OOH Av. Paulista  Q2 2025",value:t.title||"",onChange:v=>s({title:v.target.value})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. D um nome descritivo para identificar facilmente esta proposta."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"campaignStartDate",children:"Data de Incio"}),e.jsx(Ce,{id:"campaignStartDate",type:"date",value:t.campaignStartDate?t.campaignStartDate.toISOString().split("T")[0]:"",onChange:v=>s({campaignStartDate:v.target.value?f(v.target.value):void 0})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. Serve como referncia/padro; a durao real ser definida por item no prximo passo."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"validUntil",children:"Validade da Proposta"}),e.jsx(Ce,{id:"validUntil",type:"date",value:t.validUntil?t.validUntil.toISOString().split("T")[0]:"",onChange:v=>s({validUntil:v.target.value?f(v.target.value):void 0})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data at a qual esta proposta  vlida (padro: 7 dias)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"conditionsText",children:"Condies Comerciais"}),e.jsx(Wa,{id:"conditionsText",rows:4,placeholder:"Descreva as condies de pagamento, prazos, garantias, etc.",value:t.conditionsText||"",onChange:v=>s({conditionsText:v.target.value})})]})]})}function E8({open:t,onOpenChange:s,onAddItem:n,initialMediaPointId:r,allowedMediaPointIds:o,referenceStartDate:c}){const{company:u}=Ho(),h=m.useMemo(()=>(o??[]).join("|"),[o]),f=m.useMemo(()=>new Set((o??[]).filter(Boolean)),[h]),[v,x]=m.useState(""),[g,j]=m.useState("all"),[w,N]=m.useState([]),[C,S]=m.useState([]),[E,_]=m.useState(!1),[k,T]=m.useState(null),[M,F]=m.useState(null),[O,Z]=m.useState(null),q=m.useRef(!1),[$,X]=m.useState([]),[I,B]=m.useState(!1),[te,ue]=m.useState(null),[Y,ce]=m.useState(""),[U,ne]=m.useState(""),[Q,z]=m.useState(1),[se,G]=m.useState(0),[ee,V]=m.useState(0),[re,ae]=m.useState(0),[me,oe]=m.useState(Ws.TOTAL),Pe=360,[We,Je]=m.useState("30"),[tt,nt]=m.useState(30),[ct,wt]=m.useState(!1),[pt,It]=m.useState({}),[Lt,J]=m.useState(null),ve=we=>{const Fe=new Date(we);return Fe.setHours(0,0,0,0),Fe},xe=(we,Fe)=>{const ze=new Date(we);return ze.setDate(ze.getDate()+Math.max(0,Math.floor(Fe))),ze},Ve=m.useMemo(()=>{const we=ve(c??new Date),Fe=xe(we,tt);return{start:we,end:Fe}},[c,tt]),de=we=>{const Fe=Math.max(0,Math.floor(we)),ze=Math.floor(Fe/30),Bt=Fe%30===15?1:0;return{months:ze,biweeks:Bt}},Ne=we=>{const Fe=Number(we);return Number.isFinite(Fe)?Fe:0},Be=m.useMemo(()=>{const we=new Map;for(const Fe of w)we.set(Fe.id,Fe);return we},[w]),He=m.useMemo(()=>{const we=O?Be.get(O.mediaPointId):void 0,Fe=Ne(O?.priceMonth??we?.basePriceMonth??0),ze=Ne(O?.priceWeek??we?.basePriceWeek??0),$t=Ne(O?.productionCosts?.lona??0),Bt=Ne(O?.productionCosts?.montagem??0),{months:ks,biweeks:as}=de(tt),ys=ks*Fe+as*ze,Cs=Bt+(ct?0:$t),en=ys+Cs;return{priceMonth:Fe,priceBiweekly:ze,months:ks,biweeks:as,rentPerUnit:ys,prod:$t,inst:Bt,upfrontPerUnit:Cs,perUnitTotal:en}},[O,tt,ct]),gt=m.useMemo(()=>{const we=Math.max(1,Number(Q)||1),Fe=we*He.rentPerUnit,ze=we*He.upfrontPerUnit,$t=Fe+ze,Bt=Ne(ee),ks=Ne(re),as=me===Ws.RENT?Fe:me===Ws.COSTS?ze:$t,ys=Bt>0?as*Bt/100:ks>0?Math.min(ks,as):0,Cs=Math.max(0,$t-ys),en=Math.max(0,ys);return{qty:we,rentTotal:Fe,upfrontTotal:ze,baseTotal:$t,discountBase:as,discountValue:ys,totalPrice:Cs,computedDiscountValue:en}},[Q,He.rentPerUnit,He.upfrontPerUnit,ee,re,me]),{baseTotal:pe,totalPrice:$e,computedDiscountValue:Xe}=gt;m.useEffect(()=>{if(!O){G(0);return}G(He.perUnitTotal)},[O,He.perUnitTotal]);const mt=we=>we.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),fe=we=>[we.addressStreet,we.addressNumber,we.addressDistrict,we.addressCity,we.addressState].filter(Boolean).join(", "),Ye=we=>{if(we.widthM&&we.heightM){const Fe=Number(we.widthM),ze=Number(we.heightM);return`${Fe}m x ${ze}m`}if(we.resolutionWidthPx&&we.resolutionHeightPx)return`${we.resolutionWidthPx}x${we.resolutionHeightPx}px`},dt=we=>{const Fe=new Date(we).toISOString().slice(0,10),[ze,$t,Bt]=Fe.split("-");return`${Bt}/${$t}/${ze}`};m.useEffect(()=>{const we=async()=>{try{_(!0),T(null),F(null),Z(null),X([]),ue(null),ce("");const Fe=[];let ze=1;const $t=50;for(;;){const ys=(await Ie.get("/media-points",{params:{page:ze,pageSize:$t}})).data,Cs=Array.isArray(ys)?ys:ys?.data??[],en=Array.isArray(ys)?void 0:ys?.total;if(Fe.push(...Cs),Array.isArray(ys)||!Cs.length||typeof en=="number"&&Fe.length>=en)break;ze+=1}const Bt=f.size?Fe.filter(as=>f.has(as.id)):Fe;N(Bt);const ks=Bt.flatMap(as=>(Array.isArray(as?.units)?as.units:Array.isArray(as?.mediaUnits)?as.mediaUnits:[]).map(Cs=>({...Cs,pointId:as.id,pointName:as.name,pointType:as.type,pointAddress:fe(as),dimensions:Ye(Cs),mediaPointId:as.id,productionCosts:as.productionCosts??null})));S(ks)}catch{T("Erro ao carregar mdias do inventrio."),N([]),S([])}finally{_(!1)}};t?(q.current=!1,F(null),Z(null),It({}),J(null),ce(""),ne(""),z(1),V(0),ae(0),Je("30"),nt(30),wt(!1),we()):q.current=!1},[t,h]);const kt=m.useMemo(()=>{const we=new Map;for(const Fe of C){const ze=Fe.mediaPointId;if(!ze)continue;const $t=we.get(ze)??[];$t.push(Fe),we.set(ze,$t)}return we},[C]),ht=m.useMemo(()=>{let we=w;g!=="all"&&(we=we.filter(ze=>ze.type===g));const Fe=v.trim().toLowerCase();return Fe&&(we=we.filter(ze=>{const $t=String(ze.name??"").toLowerCase(),Bt=fe(ze).toLowerCase(),as=(kt.get(ze.id)??[]).some(ys=>String(ys.label??"").toLowerCase().includes(Fe));return $t.includes(Fe)||Bt.includes(Fe)||as})),we},[w,g,v,kt]),Ft=m.useMemo(()=>ht.reduce((we,Fe)=>we+(kt.get(Fe.id)?.length??0),0),[ht,kt]),ms=m.useMemo(()=>M?w.find(we=>we.id===M)??null:null,[w,M]),hs=m.useMemo(()=>M?kt.get(M)??[]:[],[kt,M]);m.useEffect(()=>{if(!t)return;if(!M){It({}),J(null);return}const we=hs;if(!we.length){It({}),J(null);return}let Fe=!1;const ze=Ve.start.toISOString(),$t=Ve.end.toISOString();return It(Bt=>{const ks={...Bt};for(const as of we)ks[as.id]="checking";return ks}),J(null),(async()=>{const Bt=await Promise.allSettled(we.map(ys=>Ie.get("/reservations/availability",{params:{mediaUnitId:ys.id,startDate:ze,endDate:$t}})));if(Fe)return;const ks={};let as=!1;Bt.forEach((ys,Cs)=>{const en=we[Cs]?.id;if(en)if(ys.status==="fulfilled"){const un=!!ys.value?.data?.available;ks[en]=un?"available":"occupied"}else ks[en]="unknown",as=!0}),It(ks),as&&J("No foi possvel verificar a disponibilidade de uma ou mais faces.")})().catch(()=>{if(Fe)return;const Bt={};for(const ks of we)Bt[ks.id]="unknown";It(Bt),J("No foi possvel verificar a disponibilidade das faces.")}),()=>{Fe=!0}},[t,M,hs,Ve.start,Ve.end]),m.useEffect(()=>{if(!t||!M||!hs.length||!Object.keys(pt).length)return;const we=()=>{const ze=hs.find($t=>pt[$t.id]==="available");ze?Ps(ze):Z(null)};if(!O){we();return}const Fe=pt[O.id];(Fe==="occupied"||Fe==="unknown")&&we()},[t,M,hs,pt,O]);const Ps=we=>{Z(we),ne(`${we.pointName||"Ponto"} - ${we.label}`),V(0),ae(0),z(1),Je("30"),nt(30),wt(!1)},Yt=async we=>{try{B(!0),ue(null),X([]),ce("");const Fe=await Ie.get(`/media-points/${we}/owners`),ze=Array.isArray(Fe.data)?Fe.data:Fe.data?.data??[],$t=Array.isArray(ze)?ze:[];X($t);const Bt=$t.find(ks=>ks?.ownerCompany?.isPrimary);Bt?ce(Bt.id):$t.length===1&&ce($t[0].id)}catch{ue("Erro ao carregar empresas vinculadas ao ponto."),X([]),ce("")}finally{B(!1)}},Gs=we=>{F(we.id),Yt(we.id);const Fe=kt.get(we.id)??[];if(Fe.length>0){Ps(Fe[0]);return}Z(null),ne(`${we.name||"Ponto"}`),G(0),V(0),ae(0),z(1),Je("30"),nt(30),wt(!1)};m.useEffect(()=>{if(!t||!w.length||q.current)return;let we=r;if(we&&f.size&&!f.has(we)&&(we=void 0),!we&&(o??[]).length&&(we=(o??[])[0]),!we||(q.current=!0,M===we))return;const Fe=w.find(ze=>ze.id===we);Fe&&Gs(Fe)},[t,r,h,w.length,M]);const Ct=()=>{if(!O)return;const we=tt,Fe=Q*He.rentPerUnit,ze=Q*He.upfrontPerUnit,$t={id:`item${Date.now()}${Math.random()}`,companyId:u?.id||O.companyId||"",proposalId:"",mediaUnitId:O.id,productId:void 0,mediaPointOwnerId:O.id&&Y||null,description:U,occupationDays:we,clientProvidesBanner:ct,priceMonthSnapshot:He.priceMonth,priceBiweeklySnapshot:He.priceBiweekly,productionCostSnapshot:He.prod,installationCostSnapshot:He.inst,rentTotalSnapshot:Fe,upfrontTotalSnapshot:ze,quantity:Q,unitPrice:se,discountPercent:ee>0?ee:void 0,discountAmount:re>0?re:void 0,discountApplyTo:me,totalPrice:$e,createdAt:new Date,updatedAt:new Date};n($t),Mt()},Mt=()=>{x(""),j("all"),F(null),Z(null),It({}),J(null),X([]),ue(null),ce(""),ne(""),z(1),G(0),V(0),ae(0),Je("30"),nt(30),wt(!1),s(!1)},Wt=$.length>0,Es=tt>=15&&tt%15===0&&tt<=Pe,xs=O?pt[O.id]:void 0,fs=xs==="available",Ee=!!O&&!!U&&Q>0&&se>=0&&Es&&fs&&Wt&&!!Y&&!I&&!te,rt=me===Ws.RENT?"o aluguel":me===Ws.COSTS?"os custos (produo/instalao)":"o total do item",it=m.useMemo(()=>{const we=new Set(w.map(Fe=>Fe.type));return Array.from(we)},[w]);return e.jsx(_s,{open:t,onOpenChange:we=>{if(!we)return Mt();s(!0)},children:e.jsxs(As,{style:{width:"96vw",maxWidth:"min(1400px, 96vw)",height:"90vh",maxHeight:"90vh"},className:"flex flex-col p-0 gap-0 overflow-hidden",children:[e.jsx(Rs,{className:"px-6 py-4 border-b",children:e.jsx(Os,{children:"Selecionar Mdia do Inventrio"})}),E&&e.jsx("div",{className:"p-6 text-gray-600",children:"Carregando mdias..."}),!E&&k&&e.jsx("div",{className:"p-6 text-red-600",children:k}),!E&&!k&&e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-1/2 md:h-full h-[40%] md:border-r border-b md:border-b-0 border-gray-200 overflow-y-auto p-4 md:p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ce,{placeholder:"Buscar mdia, ponto ou endereo...",value:v,onChange:we=>x(we.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:g,onValueChange:j,children:[e.jsx(Pt,{className:"w-40",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"all",children:"Todos"}),it.map(we=>e.jsx(Oe,{value:we,children:we},we))]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ht.length," ",ht.length===1?"ponto":"pontos","  ",Ft," ",Ft===1?"mdia":"mdias"," disponvel(is)"]})]}),e.jsxs("div",{className:"space-y-3",children:[ht.map(we=>{const Fe=kt.get(we.id)??[],ze=Number(we?.basePriceMonth??0),$t=Fe.reduce((as,ys)=>{const Cs=Number(ys.priceMonth??0);return!Number.isFinite(Cs)||Cs<=0?as:as===null||Cs<as?Cs:as},null),Bt=$t!==null?$t:Number.isFinite(ze)&&ze>0?ze:null,ks=Fe.length===1?Fe[0].dimensions:void 0;return e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${M===we.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>Gs(we),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:we.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[we.type,Fe.length?`  ${Fe.length} ${Fe.length===1?"unidade":"unidades"}`:"  sem unidades"]}),fe(we)&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-2",children:[e.jsx(ia,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:fe(we)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-indigo-600 font-medium",children:Bt!==null?mt(Bt)+(Fe.length?"/ms":""):"--"}),ks&&e.jsx("span",{className:"text-gray-500",children:ks})]})]}),e.jsx(Hl,{className:"w-4 h-4 text-gray-400"})]})},we.id)}),ht.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum ponto encontrado"})})]})]}),e.jsx("div",{className:"md:w-1/2 md:h-full h-[60%] flex-1 overflow-hidden p-4 md:p-6",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:ms?hs.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"Detalhes da Mdia"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:ms.name}),e.jsx("p",{className:"text-gray-600 mb-2",children:ms.type}),fe(ms)&&e.jsx("p",{className:"text-sm text-gray-500",children:fe(ms)})]})]}),hs.length>1&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Unidade"}),e.jsxs(_t,{value:O?.id??"",onValueChange:we=>{const Fe=hs.find(ze=>ze.id===we);Fe&&Ps(Fe)},children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione uma unidade"})}),e.jsx(Et,{children:hs.map(we=>{const Fe=pt[we.id],ze=Fe!=="available",$t=Fe==="occupied"?" (Ocupado)":Fe==="unknown"?" (Indisponvel)":Fe==="checking"?" (Verificando...)":"";return e.jsxs(Oe,{value:we.id,disabled:ze,children:[we.label,$t]},we.id)})})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Perodo considerado: ",dt(Ve.start),"  ",dt(Ve.end)]}),!c&&e.jsxs("div",{className:"mt-1 text-xs text-amber-700",children:["Defina a ",e.jsx("b",{children:"Data de Incio"})," no passo 1 para checar com preciso."]}),Lt&&e.jsx("div",{className:"mt-1 text-xs text-red-600",children:Lt})]}),O&&e.jsxs("div",{className:"text-xs",children:[hs.length<=1&&e.jsxs("div",{className:"text-gray-500",children:["Perodo considerado: ",dt(Ve.start),"  ",dt(Ve.end)]}),xs==="checking"&&e.jsx("div",{className:"text-gray-500 mt-1",children:"Verificando ocupao..."}),xs==="occupied"&&e.jsx("div",{className:"text-red-600 mt-1",children:"Esta face est ocupada no perodo selecionado."}),xs==="unknown"&&e.jsx("div",{className:"text-red-600 mt-1",children:"No foi possvel verificar a ocupao desta face."})]}),O&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Empresa vinculada *"}),I&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando empresas..."}),!I&&te&&e.jsx("div",{className:"text-sm text-red-600",children:te}),!I&&!te&&($.length?e.jsxs(_t,{value:Y,onValueChange:ce,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:$.length>1?"Selecione a empresa":"Empresa"})}),e.jsx(Et,{children:$.map(we=>{const Fe=(we.ownerCompany?.name||we.ownerName||"Empresa").trim(),ze=(we.ownerCompany?.document||we.ownerDocument||"").trim(),$t=ze?`${Fe}  ${ze}`:Fe;return e.jsx(Oe,{value:we.id,children:$t},we.id)})})]}):e.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:"Este ponto no possui empresa vinculada. Vincule uma empresa ao ponto no Inventrio para poder adicion-lo  proposta."})),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A empresa selecionada ser usada como referncia do item (e no PDF na prxima etapa)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Descrio *"}),e.jsx(Ce,{value:U,onChange:we=>ne(we.target.value),placeholder:"Descrio do item"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Tempo de ocupao *"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(K,{type:"button",size:"sm",variant:We==="15"?"default":"outline",onClick:()=>{Je("15"),nt(15)},children:"15 dias"}),e.jsx(K,{type:"button",size:"sm",variant:We==="30"?"default":"outline",onClick:()=>{Je("30"),nt(30)},children:"30 dias"}),e.jsx(K,{type:"button",size:"sm",variant:We==="custom"?"default":"outline",onClick:()=>{Je("custom"),nt(we=>we>=15?we:15)},children:"Personalizado"})]}),e.jsxs("div",{className:"mt-2",children:[We==="custom"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(K,{type:"button",size:"sm",variant:"outline",onClick:()=>nt(we=>Math.min(Pe,Math.max(0,we)+15)),children:"+15 dias"}),e.jsx(K,{type:"button",size:"sm",variant:"outline",onClick:()=>nt(we=>Math.min(Pe,Math.max(0,we)+30)),children:"+30 dias"}),e.jsx(K,{type:"button",size:"sm",variant:"ghost",onClick:()=>nt(0),children:"Limpar"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Total: ",e.jsx("b",{children:tt})," dias"]})]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",tt," dias"]}),!Es&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Selecione um tempo vlido (mltiplo de 15, mximo ",Pe," dias)."]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(qa,{id:"clientProvidesBanner",checked:ct,onCheckedChange:we=>wt(we===!0)}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientProvidesBanner",className:"text-sm text-gray-700",children:"Cliente ir fornecer a lona"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se marcado, no contabiliza custo de produo (somente instalao/montagem)."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo mensal"}),e.jsx(Ce,{value:mt(He.priceMonth),readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo quinzenal"}),e.jsx(Ce,{value:mt(He.priceBiweekly),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Aluguel por unidade"}),e.jsx("span",{className:"text-gray-900",children:mt(He.rentPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Custos (produo/instalao)"}),e.jsx("span",{className:"text-gray-900",children:mt(He.upfrontPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total por unidade"}),e.jsx("span",{className:"text-gray-900",children:mt(He.perUnitTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Quantidade *"}),e.jsx(Ce,{type:"number",min:"1",value:Q,onChange:we=>z(Math.max(1,parseInt(we.target.value)||1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo por unidade (calculado)"}),e.jsx(Ce,{value:mt(se),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Aplicar desconto em"}),e.jsxs(_t,{value:me,onValueChange:we=>oe(we),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:Ws.TOTAL,children:"Total (aluguel + custos)"}),e.jsx(Oe,{value:Ws.RENT,children:"Aluguel"}),e.jsx(Oe,{value:Ws.COSTS,children:"Custos (produo/instalao)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define sobre qual parte do item o desconto ser aplicado."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Desconto em %"}),e.jsx(Ce,{type:"number",min:"0",step:"0.01",value:ee||0,onChange:we=>{const Fe=Math.max(0,parseFloat(we.target.value)||0);V(Fe),Fe>0&&ae(0)},disabled:!!re})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Desconto em R$"}),e.jsx(Ce,{type:"number",min:"0",step:"0.01",value:re||0,onChange:we=>{const Fe=Math.max(0,parseFloat(we.target.value)||0);ae(Fe),Fe>0&&V(0)},disabled:!!ee})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" Preencha apenas um campo. O desconto ser aplicado sobre ",rt,"."]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:mt($e)})]}),e.jsxs("p",{className:"text-sm text-indigo-700 mt-1",children:[Q," x ",mt(se)]}),Xe>0&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:mt(pe)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",ee>0?` (${ee}%)`:""," (",rt,"):"]}),e.jsxs("span",{children:["-",mt(Xe)]})]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ia,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Este ponto ainda no possui unidades/mdias cadastradas."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cadastre unidades no mdulo de Inventrio."})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ia,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Selecione um ponto para adicionar  proposta"})]})})}),e.jsxs("div",{className:"pt-4 mt-4 border-t flex flex-col sm:flex-row gap-3",children:[e.jsx(K,{variant:"outline",className:"flex-1",onClick:Mt,children:"Cancelar"}),e.jsx(K,{className:"flex-1",onClick:Ct,disabled:!Ee,children:"Adicionar Item"})]})]})})]})]})})}function k8({open:t,onOpenChange:s,defaultPeriod:n,onAddItem:r}){const{company:o}=Ho(),c=m.useMemo(()=>({page:1,pageSize:500}),[]),{products:u,loading:h,error:f,refetch:v}=u_(c),x=ee=>new Date(`${ee}T00:00:00`),[g,j]=m.useState(""),[w,N]=m.useState(""),[C,S]=m.useState(1),[E,_]=m.useState(0),[k,T]=m.useState(0),[M,F]=m.useState(0),[O,Z]=m.useState(n.startDate),[q,$]=m.useState(n.endDate);m.useEffect(()=>{t&&(Z(n.startDate),$(n.endDate),v())},[t,n.startDate,n.endDate,v]);const X=m.useMemo(()=>u.find(ee=>ee.id===g),[u,g]),I=ee=>{j(ee);const V=u.find(re=>re.id===ee);V&&(N(V.name),_(Number(V.basePrice)||0),T(0),F(0))},B=C*E;let te=B;const ue=Number.isFinite(k)?k:0,Y=Number.isFinite(M)?M:0;ue>0&&(te=te*(1-ue/100)),Y>0&&(te=te-Y),te=Math.max(0,te);const ce=Math.max(0,B-te),U=ee=>{const V=Math.max(0,parseFloat(ee)||0);T(V),V>0&&F(0)},ne=ee=>{const V=Math.max(0,parseFloat(ee)||0);F(V),V>0&&T(0)},Q=()=>{if(!g)return;const ee={id:`item${Date.now()}${Math.random()}`,companyId:o?.id||X?.companyId||"",proposalId:"",mediaUnitId:void 0,productId:g,description:w,startDate:O,endDate:q,quantity:C,unitPrice:E,discountPercent:ue>0?ue:void 0,discountAmount:Y>0?Y:void 0,totalPrice:te,createdAt:new Date,updatedAt:new Date};r(ee),z()},z=()=>{j(""),N(""),S(1),_(0),T(0),F(0),Z(n.startDate),$(n.endDate),s(!1)},se=!!g&&!!w&&C>0&&E>=0,G=ee=>(Number.isFinite(ee)?ee:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return e.jsx(_s,{open:t,onOpenChange:ee=>{if(!ee)return z();s(!0)},children:e.jsxs(As,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Rs,{children:e.jsx(Os,{children:"Adicionar Produto/Servio"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"product",children:"Produto/Servio *"}),e.jsxs(_t,{value:g,onValueChange:I,disabled:h,children:[e.jsx(Pt,{id:"product",children:e.jsx(At,{placeholder:h?"Carregando...":f?"Erro ao carregar produtos":"Selecione um produto ou servio"})}),e.jsx(Et,{children:u.map(ee=>e.jsxs(Oe,{value:ee.id,children:[ee.name," - ",G(ee.basePrice||0),ee.category?` (${ee.category})`:""]},ee.id))})]}),X&&e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," ",X.type]}),X.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Descrio:"})," ",X.description]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"description",children:"Descrio para a Proposta *"}),e.jsx(Wa,{id:"description",rows:3,placeholder:"Descreva como este item aparecer na proposta",value:w,onChange:ee=>N(ee.target.value)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Voc pode personalizar a descrio que aparecer na proposta."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"startDate",children:"Data de Incio"}),e.jsx(Ce,{id:"startDate",type:"date",value:O?O.toISOString().split("T")[0]:"",onChange:ee=>Z(ee.target.value?x(ee.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"endDate",children:"Data de Trmino"}),e.jsx(Ce,{id:"endDate",type:"date",value:q?q.toISOString().split("T")[0]:"",onChange:ee=>$(ee.target.value?x(ee.target.value):void 0)})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. Use se o produto/servio tiver perodo especfico."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"quantity",children:"Quantidade *"}),e.jsx(Ce,{id:"quantity",type:"number",min:"1",value:C,onChange:ee=>S(Math.max(1,parseInt(ee.target.value)||1))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"unitPrice",children:"Preo Unitrio (R$) *"}),e.jsx(Ce,{id:"unitPrice",type:"number",min:"0",step:"0.01",value:E,onChange:ee=>_(Math.max(0,parseFloat(ee.target.value)||0))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Desconto do Item (opcional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountPercent",className:"text-sm text-gray-600",children:"Desconto em %"}),e.jsx(Ce,{id:"discountPercent",type:"number",min:"0",step:"0.01",value:k||0,onChange:ee=>U(ee.target.value),disabled:!!M})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountAmount",className:"text-sm text-gray-600",children:"Desconto em R$"}),e.jsx(Ce,{id:"discountAmount",type:"number",min:"0",step:"0.01",value:M||0,onChange:ee=>ne(ee.target.value),disabled:!!k})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:" Preencha apenas um campo. O desconto  aplicado sobre o total deste item."})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:G(te)})]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[C," x ",G(E),ce>0?`  Desc: -${G(ce)}`:""]}),ce>0&&e.jsxs("div",{className:"text-xs text-indigo-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:G(B)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",ue>0?` (${ue}%)`:"",Y>0?` (${G(Y)})`:"",":"]}),e.jsxs("span",{children:["-",G(ce)]})]})]})]})]}),e.jsxs(B0,{children:[e.jsx(K,{variant:"outline",onClick:z,children:"Cancelar"}),e.jsx(K,{onClick:Q,disabled:!se,children:"Adicionar Item"})]})]})})}const du=360;function Ar(t){return(Number.isFinite(t)?t:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function gN(t){return new Date(`${t}T00:00:00`)}function T8({open:t,onOpenChange:s,item:n,onSave:r}){const o=!!n?.mediaUnitId,[c,u]=m.useState(""),[h,f]=m.useState(1),[v,x]=m.useState(0),[g,j]=m.useState(0),[w,N]=m.useState(0),[C,S]=m.useState(Ws.TOTAL),[E,_]=m.useState(void 0),[k,T]=m.useState(void 0),[M,F]=m.useState("30"),[O,Z]=m.useState(30),[q,$]=m.useState(!1);m.useEffect(()=>{if(!(!t||!n))if(u(n.description||""),f(Number(n.quantity)||1),j(Number(n.discountPercent)||0),N(Number(n.discountAmount)||0),S(n.discountApplyTo??Ws.TOTAL),n.mediaUnitId){const ae=Number(n.occupationDays)||30;Z(ae),F(ae===15?"15":ae===30?"30":"custom"),$(!!n.clientProvidesBanner),_(void 0),T(void 0)}else _(n.startDate?new Date(n.startDate):void 0),T(n.endDate?new Date(n.endDate):void 0),$(!1),F("30"),Z(30),x(Number(n.unitPrice)||0)},[t,n]);const X=m.useMemo(()=>{if(!n||!n.mediaUnitId)return{priceMonth:0,priceBiweekly:0,rentPerUnit:0,upfrontPerUnit:0,perUnitTotal:v};const ae=Number.isFinite(O)?O:0,me=Math.min(Math.max(0,ae),du),oe=me>=15&&me%15==0,Pe=Number(n.priceMonthSnapshot)||0,We=Number(n.priceBiweeklySnapshot)||0,Je=Math.floor(me/30),tt=Math.floor(me%30/15),nt=Je*Pe+tt*We,ct=Number(n.installationCostSnapshot)||0,wt=q?0:Number(n.productionCostSnapshot)||0,pt=ct+wt,It=oe?nt+pt:0;return{priceMonth:Pe,priceBiweekly:We,rentPerUnit:nt,upfrontPerUnit:pt,perUnitTotal:It}},[n,O,q,v]);m.useEffect(()=>{t&&n?.mediaUnitId&&x(X.perUnitTotal)},[t,n?.mediaUnitId,X.perUnitTotal]);const I=Math.max(1,Number(h)||1),B=Number.isFinite(g)?g:0,te=Number.isFinite(w)?w:0,ue=o?I*X.rentPerUnit:0,Y=o?I*X.upfrontPerUnit:0,ce=o?ue+Y:I*v,U=o?C:Ws.TOTAL,ne=U===Ws.RENT?ue:U===Ws.COSTS?Y:ce,Q=B>0?ne*B/100:te>0?Math.min(te,ne):0,z=Math.max(0,ce-Q),se=Math.max(0,Q),G=U===Ws.RENT?"o aluguel":U===Ws.COSTS?"os custos (produo/instalao)":"o total do item",ee=!o||O>=15&&O<=du&&O%15===0,V=()=>{if(!n)return;const ae={...n,description:c,quantity:h,unitPrice:v,discountPercent:B>0?B:void 0,discountAmount:te>0?te:void 0,discountApplyTo:o?C:Ws.TOTAL,totalPrice:z,updatedAt:new Date};n.mediaUnitId?(ae.occupationDays=O,ae.clientProvidesBanner=q,ae.startDate=void 0,ae.endDate=void 0):(ae.startDate=E,ae.endDate=k),r(ae),s(!1)},re=()=>{s(!1)};return n?e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-xl",children:[e.jsx(Rs,{children:e.jsx(Os,{children:"Editar Item"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Descrio"}),e.jsx(Wa,{value:c,onChange:ae=>u(ae.target.value)})]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tempo de ocupao"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(K,{type:"button",size:"sm",variant:M==="15"?"default":"outline",onClick:()=>{F("15"),Z(15)},children:"15 dias"}),e.jsx(K,{type:"button",size:"sm",variant:M==="30"?"default":"outline",onClick:()=>{F("30"),Z(30)},children:"30 dias"}),e.jsx(K,{type:"button",size:"sm",variant:M==="custom"?"default":"outline",onClick:()=>{F("custom"),Z(ae=>ae>=15?ae:15)},children:"Personalizado"})]}),M==="custom"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(K,{type:"button",size:"sm",variant:"outline",onClick:()=>Z(ae=>Math.min(du,Math.max(0,ae)+15)),children:"+15 dias"}),e.jsx(K,{type:"button",size:"sm",variant:"outline",onClick:()=>Z(ae=>Math.min(du,Math.max(0,ae)+30)),children:"+30 dias"}),e.jsx(K,{type:"button",size:"sm",variant:"ghost",onClick:()=>Z(0),children:"Limpar"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Total: ",e.jsx("b",{children:O})," dias"]})]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",O," dias"]}),!ee&&e.jsxs("p",{className:"text-xs text-red-600",children:["Selecione um tempo vlido (mltiplo de 15, mximo ",du," dias)."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(qa,{id:"clientProvidesBanner",checked:q,onCheckedChange:ae=>$(ae===!0)}),e.jsxs("div",{children:[e.jsx(je,{htmlFor:"clientProvidesBanner",children:"Cliente ir fornecer a lona"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se marcado, no contabiliza custo de produo (somente instalao/montagem)."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Preo mensal"}),e.jsx(Ce,{value:Ar(X.priceMonth),readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Preo quinzenal"}),e.jsx(Ce,{value:Ar(X.priceBiweekly),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Aluguel por unidade"}),e.jsx("span",{className:"text-gray-900",children:Ar(X.rentPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Custos (produo/instalao)"}),e.jsx("span",{className:"text-gray-900",children:Ar(X.upfrontPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total por unidade"}),e.jsx("span",{className:"text-gray-900",children:Ar(X.perUnitTotal)})]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Data de incio"}),e.jsx(Ce,{type:"date",value:E?E.toISOString().split("T")[0]:"",onChange:ae=>_(ae.target.value?gN(ae.target.value):void 0)})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Data de fim"}),e.jsx(Ce,{type:"date",value:k?k.toISOString().split("T")[0]:"",onChange:ae=>T(ae.target.value?gN(ae.target.value):void 0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Quantidade"}),e.jsx(Ce,{type:"number",min:1,value:h,onChange:ae=>f(Math.max(1,parseInt(ae.target.value)||1))})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Preo Unitrio"}),e.jsx(Ce,{type:o?"text":"number",min:0,step:"0.01",value:o?Ar(v):v,onChange:ae=>{o||x(Math.max(0,parseFloat(ae.target.value)||0))},readOnly:o,disabled:o})]})]}),o&&e.jsxs("div",{children:[e.jsx(je,{children:"Aplicar desconto em"}),e.jsxs(_t,{value:C,onValueChange:ae=>S(ae),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:Ws.TOTAL,children:"Total (aluguel + custos)"}),e.jsx(Oe,{value:Ws.RENT,children:"Aluguel"}),e.jsx(Oe,{value:Ws.COSTS,children:"Custos (produo/instalao)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define sobre qual parte do item o desconto ser aplicado."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Desconto em %"}),e.jsx(Ce,{type:"number",min:0,step:"0.01",value:g||0,onChange:ae=>{const me=Math.max(0,parseFloat(ae.target.value)||0);j(me),me>0&&N(0)},disabled:!!w})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Desconto em R$"}),e.jsx(Ce,{type:"number",min:0,step:"0.01",value:w||0,onChange:ae=>{const me=Math.max(0,parseFloat(ae.target.value)||0);N(me),me>0&&j(0)},disabled:!!g})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" Preencha apenas um campo. O desconto ser aplicado sobre ",G,"."]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:Ar(z)})]}),e.jsxs("p",{className:"text-sm text-indigo-700 mt-1",children:[h," x ",Ar(v)]}),se>0&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:Ar(ce)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",g>0?` (${g}%)`:""," (",G,"):"]}),e.jsxs("span",{children:["-",Ar(se)]})]})]})]})]}),e.jsxs(B0,{children:[e.jsx(K,{variant:"outline",onClick:re,children:"Cancelar"}),e.jsx(K,{onClick:V,disabled:o&&!ee,children:"Salvar"})]})]})}):null}function D8({formData:t,onItemsChange:s,onMetaChange:n,initialMediaPointId:r,initialMediaPointIds:o}){const[c,u]=m.useState(!1),[h,f]=m.useState(!1),[v,x]=m.useState(!1),[g,j]=m.useState(null),[w,N]=m.useState(null),C=r??o?.[0]??null,S=I=>{s([...t.items,I]),u(!1)};m.useEffect(()=>{if((r??o?.[0]??null)&&!h){if((t.items??[]).length>0){f(!0);return}f(!0),u(!0)}},[r,o]);const E=I=>{s([...t.items,I]),x(!1)},_=I=>{j(t.items[I]),N(I)},k=I=>{if(w!==null){const B=[...t.items];B[w]=I,s(B),j(null),N(null)}},T=I=>{const B=t.items.filter((te,ue)=>ue!==I);s(B)},M=I=>{const B=Number.isFinite(I.quantity)?I.quantity:1,te=Number.isFinite(I.unitPrice)?I.unitPrice:0,ue=B*te,Y=Number.isFinite(I.totalPrice)?I.totalPrice:ue,ce=Math.max(0,ue-Y),U=I.discountPercent??0,ne=I.discountAmount??0,Q=I.discountApplyTo??Ws.TOTAL,z=I.mediaUnitId?Q===Ws.RENT?"no aluguel":Q===Ws.COSTS?"nos custos":"no total":null,se=U>0?`${U}%`:ne>0?`R$ ${ne}`:null,G=se?z?`${se} ${z}`:se:null;return{baseTotal:ue,finalTotal:Y,discountValue:ce,label:G,discountPercent:U,discountAmount:ne,applyTo:Q,applyToLabel:z}},F=I=>I.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),O=I=>{if(!I)return"-";const B=new Date(I);if(Number.isNaN(B.getTime()))return"-";const[te,ue,Y]=B.toISOString().split("T")[0].split("-");return`${Y}/${ue}/${te}`},Z=I=>{const B=Number(I??0);return!Number.isFinite(B)||B<=0?"":`${B} dias`},q=I=>{const B=parseFloat(I)||0;n({discountPercent:B,discountAmount:0})},$=I=>{const B=parseFloat(I)||0;n({discountAmount:B,discountPercent:0})},X=I=>{if(I===""){n({assemblyMaxDays:void 0});return}const B=Math.floor(Number(I)),te=Number.isFinite(B)&&B>0?B:void 0;n({assemblyMaxDays:te})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"assemblyMaxDays",children:"Perodo mximo de montagem (dias)"}),e.jsx(Ce,{id:"assemblyMaxDays",type:"number",min:"1",step:"1",placeholder:"Ex.: 7",value:t.assemblyMaxDays??"",onChange:I=>X(I.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Opcional. Aps aprovar a proposta, o check-in deve ocorrer at esse prazo."})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(K,{type:"button",variant:"outline",onClick:()=>u(!0),className:"gap-2",children:[e.jsx(Th,{className:"w-4 h-4"}),"Adicionar Mdia do Inventrio"]}),e.jsxs(K,{type:"button",variant:"outline",onClick:()=>x(!0),className:"gap-2",children:[e.jsx(Hc,{className:"w-4 h-4"}),"Adicionar Produto/Servio"]})]}),t.items.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum item adicionado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Adicione unidades de mdia do seu inventrio ou produtos/servios para compor esta proposta"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(K,{type:"button",variant:"outline",onClick:()=>u(!0),className:"gap-2",children:[e.jsx(Th,{className:"w-4 h-4"}),"Adicionar Mdia"]}),e.jsxs(K,{type:"button",variant:"outline",onClick:()=>x(!0),className:"gap-2",children:[e.jsx(Hc,{className:"w-4 h-4"}),"Adicionar Produto"]})]})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Item"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Tipo"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Tempo de ocupao"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Qtd"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Preo Unit."}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Total"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm text-gray-600",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y",children:t.items.map((I,B)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[I.mediaUnitId?e.jsx(Th,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}):e.jsx(Hc,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-900",children:I.description})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${I.mediaUnitId?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"}`,children:I.mediaUnitId?"Mdia":"Produto"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:I.mediaUnitId?Z(I.occupationDays):I.startDate||I.endDate?`${O(I.startDate)} - ${O(I.endDate)}`:""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:I.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:F(I.unitPrice)}),e.jsx("td",{className:"px-4 py-3 text-gray-900 text-right",children:(()=>{const te=M(I);return e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:F(te.finalTotal)}),te.discountValue>0?e.jsxs("div",{className:"text-[11px] text-gray-500",children:[e.jsxs("div",{children:["Orig: ",F(te.baseTotal)]}),e.jsxs("div",{className:"text-red-600",children:["Desc",te.label?` (${te.label})`:"",": -",F(te.discountValue)]})]}):null]})})()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(K,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(B),className:"h-8 w-8 p-0",children:e.jsx(ql,{className:"w-4 h-4"})}),e.jsx(K,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(B),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Aa,{className:"w-4 h-4"})})]})})]},B))})]})})}),e.jsxs("div",{className:"border-t pt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Descontos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountPercent",children:"Desconto em %"}),e.jsx(Ce,{id:"discountPercent",type:"number",min:"0",step:"0.01",value:t.discountPercent||0,onChange:I=>q(I.target.value),disabled:!!t.discountAmount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountAmount",children:"Desconto em R$"}),e.jsx(Ce,{id:"discountAmount",type:"number",min:"0",step:"0.01",value:t.discountAmount||0,onChange:I=>$(I.target.value),disabled:!!t.discountPercent})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" Preencha apenas um campo. O desconto ser aplicado sobre o subtotal dos itens."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Resumo Financeiro"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal dos itens:"}),e.jsx("span",{className:"text-gray-900",children:F(t.subtotal)})]}),(t.discountPercent||t.discountAmount)&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Desconto",t.discountPercent?` (${t.discountPercent}%)`:"",":"]}),e.jsxs("span",{className:"text-red-600",children:["-"," ",F(t.discountAmount||t.subtotal*(t.discountPercent||0)/100)]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total da Proposta:"}),e.jsx("span",{className:"text-gray-900",children:F(t.totalAmount)})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"O subtotal  calculado automaticamente a partir dos itens."})]})]}),e.jsx(E8,{open:c,onOpenChange:u,onAddItem:S,referenceStartDate:t.campaignStartDate??null,initialMediaPointId:C??void 0,allowedMediaPointIds:o??void 0}),e.jsx(k8,{open:v,onOpenChange:x,defaultPeriod:{startDate:t.campaignStartDate},onAddItem:E}),e.jsx(T8,{open:!!g,onOpenChange:I=>{I||(j(null),N(null))},item:g,onSave:k})]})}function I8(t,s=[]){let n=[];function r(c,u){const h=m.createContext(u);h.displayName=c+"Context";const f=n.length;n=[...n,u];const v=g=>{const{scope:j,children:w,...N}=g,C=j?.[t]?.[f]||h,S=m.useMemo(()=>N,Object.values(N));return e.jsx(C.Provider,{value:S,children:w})};v.displayName=c+"Provider";function x(g,j){const w=j?.[t]?.[f]||h,N=m.useContext(w);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[v,x]}const o=()=>{const c=n.map(u=>m.createContext(u));return function(h){const f=h?.[t]||c;return m.useMemo(()=>({[`__scope${t}`]:{...h,[t]:f}}),[h,f])}};return o.scopeName=t,[r,M8(o,...s)]}function M8(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const u=r.reduce((h,{useScope:f,scopeName:v})=>{const g=f(c)[`__scope${v}`];return{...h,...g}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:u}),[u])}};return n.scopeName=s.scopeName,n}var R8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],m_=R8.reduce((t,s)=>{const n=bp(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),Sv="Progress",_v=100,[O8]=I8(Sv),[L8,F8]=O8(Sv),h_=m.forwardRef((t,s)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:c=$8,...u}=t;(o||o===0)&&!vN(o)&&console.error(z8(`${o}`,"Progress"));const h=vN(o)?o:_v;r!==null&&!yN(r,h)&&console.error(B8(`${r}`,"Progress"));const f=yN(r,h)?r:null,v=lp(f)?c(f,h):void 0;return e.jsx(L8,{scope:n,value:f,max:h,children:e.jsx(m_.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":lp(f)?f:void 0,"aria-valuetext":v,role:"progressbar","data-state":x_(f,h),"data-value":f??void 0,"data-max":h,...u,ref:s})})});h_.displayName=Sv;var p_="ProgressIndicator",f_=m.forwardRef((t,s)=>{const{__scopeProgress:n,...r}=t,o=F8(p_,n);return e.jsx(m_.div,{"data-state":x_(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:s})});f_.displayName=p_;function $8(t,s){return`${Math.round(t/s*100)}%`}function x_(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function lp(t){return typeof t=="number"}function vN(t){return lp(t)&&!isNaN(t)&&t>0}function yN(t,s){return lp(t)&&!isNaN(t)&&t<=s&&t>=0}function z8(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_v}\`.`}function B8(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_v} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var U8=h_,V8=f_;function H8(...t){return Qw(f0(t))}function g_({className:t,value:s,...n}){return e.jsx(U8,{"data-slot":"progress",className:H8("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:e.jsx(V8,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function $s(t,s=0){if(t==null)return s;const n=typeof t=="string"?Number(t):t;return typeof n=="number"&&Number.isFinite(n)?n:s}function Ch(t){if(!t)return;const s=new Date(t);if(Number.isNaN(s.getTime()))return;const n=s.toISOString().split("T")[0],r=new Date(`${n}T00:00:00`);return Number.isNaN(r.getTime())?void 0:r}function q8(t=7){const s=new Date;return s.setHours(0,0,0,0),s.setDate(s.getDate()+t),s}function lg(t,s,n){const r=(t??[]).reduce((h,f)=>h+$s(f.totalPrice,0),0),o=$s(s,0),c=$s(n,0);let u=r;return o>0?u=r-o:c>0&&(u=r-r*c/100),{subtotal:r,totalAmount:Math.max(0,u)}}function W8({open:t,onOpenChange:s,proposal:n,initialMediaPointId:r,initialMediaPointIds:o,onSave:c,onNavigate:u}){const[h,f]=m.useState(1),[v,x]=m.useState(null),[g,j]=m.useState(null),[w,N]=m.useState({clientId:"",responsibleUserId:"",title:"",validUntil:void 0,conditionsText:"",discountPercent:0,discountAmount:0,assemblyMaxDays:void 0,items:[],subtotal:0,totalAmount:0}),[C,S]=m.useState(!1);m.useEffect(()=>{if(n&&t){const I=(n.items??[]).map(Y=>({...Y,quantity:$s(Y.quantity,1),unitPrice:$s(Y.unitPrice,0),totalPrice:$s(Y.totalPrice,0),occupationDays:Y.occupationDays??void 0,clientProvidesBanner:Y.clientProvidesBanner??void 0,priceMonthSnapshot:Y.priceMonthSnapshot??void 0,priceBiweeklySnapshot:Y.priceBiweeklySnapshot??void 0,productionCostSnapshot:Y.productionCostSnapshot??void 0,installationCostSnapshot:Y.installationCostSnapshot??void 0,rentTotalSnapshot:Y.rentTotalSnapshot??void 0,upfrontTotalSnapshot:Y.upfrontTotalSnapshot??void 0,startDate:Ch(Y.startDate),endDate:Ch(Y.endDate)})),B=$s(n.discountPercent,0),te=$s(n.discountAmount,0),ue=lg(I,te,B);N({clientId:n.clientId,responsibleUserId:n.responsibleUserId,title:n.title||"",campaignStartDate:Ch(n.startDate),validUntil:Ch(n.validUntil),conditionsText:(n.conditionsText||"").replace(/\\n/g,`
`),discountPercent:B,discountAmount:te,assemblyMaxDays:n.assemblyMaxDays??void 0,items:I,subtotal:ue.subtotal,totalAmount:ue.totalAmount})}else if(!n&&t){const X=o&&o.length?o:r?[r]:[];j(X.length?X:null),x(X[0]??null),N({clientId:"",responsibleUserId:"",title:"",validUntil:q8(7),conditionsText:"",discountPercent:0,discountAmount:0,assemblyMaxDays:void 0,items:[],subtotal:0,totalAmount:0}),f(1)}},[n,t,r,o]);const E=X=>{N(I=>({...I,...X}))},_=X=>{N(I=>{const B=lg(X,I.discountAmount,I.discountPercent);return{...I,items:X,subtotal:B.subtotal,totalAmount:B.totalAmount}})},k=X=>{N(I=>{const B=X.discountPercent??I.discountPercent,te=X.discountAmount??I.discountAmount,ue=lg(I.items,te,B);return{...I,...X,subtotal:ue.subtotal,totalAmount:ue.totalAmount}})},T=()=>{f(1),s(!1)},M=()=>{h===1&&C&&f(2)},F=()=>{f(1)},O=X=>({clientId:w.clientId,responsibleUserId:w.responsibleUserId,title:w.title,status:X,startDate:w.campaignStartDate?.toISOString(),validUntil:w.validUntil?.toISOString(),assemblyMaxDays:w.assemblyMaxDays?Number(w.assemblyMaxDays):void 0,discountPercent:Number(w.discountPercent||0),discountAmount:Number(w.discountAmount||0),conditionsText:w.conditionsText,items:w.items.map(I=>({mediaUnitId:I.mediaUnitId,mediaPointOwnerId:I.mediaPointOwnerId??void 0,productId:I.productId,description:I.description,quantity:Number(I.quantity),unitPrice:Number(I.unitPrice),discountPercent:Number(I.discountPercent||0),discountAmount:Number(I.discountAmount||0),discountApplyTo:I.discountApplyTo??"TOTAL",occupationDays:I.occupationDays??void 0,clientProvidesBanner:I.clientProvidesBanner??void 0,priceMonthSnapshot:I.priceMonthSnapshot??void 0,priceBiweeklySnapshot:I.priceBiweeklySnapshot??void 0,productionCostSnapshot:I.productionCostSnapshot??void 0,installationCostSnapshot:I.installationCostSnapshot??void 0,rentTotalSnapshot:I.rentTotalSnapshot??void 0,upfrontTotalSnapshot:I.upfrontTotalSnapshot??void 0,startDate:(I.productId||!I.occupationDays)&&I.startDate?new Date(I.startDate).toISOString():void 0,endDate:(I.productId||!I.occupationDays)&&I.endDate?new Date(I.endDate).toISOString():void 0}))}),Z=async()=>{const X=O("RASCUNHO");await c(X)&&s(!1)},q=async()=>{const X=O("ENVIADA");await c(X)&&s(!1)},$=h===1?50:100;return e.jsx(_s,{open:t,onOpenChange:X=>{X||T()},children:e.jsxs(As,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Rs,{children:[e.jsx(Os,{children:n?"Editar Proposta":"Nova Proposta"}),e.jsxs(dr,{children:["Passo ",h," de 2 - ",h===1?"Dados Gerais":"Itens da Proposta"]})]}),e.jsx("div",{className:"px-6",children:e.jsx(g_,{value:$,className:"h-2"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[h===1&&e.jsx(P8,{formData:w,onChange:E,onValidChange:S,onClose:T,onNavigate:u}),h===2&&e.jsx(D8,{formData:w,onItemsChange:_,onMetaChange:k,initialMediaPointId:v,initialMediaPointIds:g})]}),e.jsxs("div",{className:"border-t px-6 py-4 bg-gray-50",children:[h===1&&e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(K,{variant:"outline",onClick:T,children:"Cancelar"}),e.jsx(K,{onClick:M,disabled:!C,children:"Prximo"})]}),h===2&&e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(K,{variant:"ghost",onClick:F,children:"Voltar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(K,{variant:"outline",onClick:Z,children:"Salvar Rascunho"}),e.jsx(K,{onClick:q,disabled:w.items.length===0,children:"Salvar e Enviar"})]})]})]})]})})}function G8(t){if(!t)return"-";const s=new Date(t);if(Number.isNaN(s.getTime()))return"-";const[n,r,o]=s.toISOString().split("T")[0].split("-");return`${o}/${r}/${n}`}function Z8({proposals:t,onViewDetails:s,onEditProposal:n,onSendProposal:r}){if(t.length===0)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma proposta encontrada"})});const o=async c=>{const u=`${window.location.origin}/p/${c}`;try{window.open(u,"_blank","noopener,noreferrer")}catch{}try{await navigator.clipboard.writeText(u)}catch{console.log("Link pblico:",u)}};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Ttulo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Responsvel"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Itens"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Validade"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(c=>{const u=c.client?.companyName||c.client?.contactName||c.clientName||"-",h=c.client?.companyName?c.client?.contactName:void 0,f=c.responsibleUser?.name||c.responsibleUserName||"-",v=c.itemsCount??c.items?.length??void 0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:c.title||"Sem ttulo"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["ID: ...",c.id.slice(-6)]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:u}),h&&e.jsx("p",{className:"text-gray-500 text-sm",children:h})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:f}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:["R$"," ",$s(c.totalAmount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),c.discountPercent!=null&&c.discountPercent>0&&e.jsxs("p",{className:"text-green-600 text-xs",children:["-",c.discountPercent,"% desconto"]}),c.discountPercent==null&&c.discountAmount!=null&&c.discountAmount>0&&e.jsxs("p",{className:"text-green-600 text-xs",children:["-R$"," ",$s(c.discountAmount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:typeof v=="number"?`${v} ${v===1?"item":"itens"}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Cv,{status:c.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:G8(c.validUntil)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{type:"button",variant:"ghost",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),s(c)},"aria-label":"Ver detalhes",children:e.jsx(li,{className:"w-4 h-4"})}),c.status===us.RASCUNHO&&e.jsxs(e.Fragment,{children:[e.jsx(K,{type:"button",variant:"ghost",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),n(c)},"aria-label":"Editar proposta",children:e.jsx(ql,{className:"w-4 h-4"})}),e.jsx(K,{type:"button",variant:"ghost",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),r(c)},"aria-label":"Enviar proposta",children:e.jsx(Lu,{className:"w-4 h-4"})})]}),c.publicHash&&e.jsx(K,{type:"button",variant:"ghost",size:"sm",title:`Copiar link pblico: /p/${c.publicHash}`,onClick:x=>{x.preventDefault(),x.stopPropagation(),o(c.publicHash)},"aria-label":"Link pblico",children:e.jsx(Ou,{className:"w-4 h-4"})})]})})]},c.id)})})]})})}const bN="ONE_MEDIA_MEDIAMAP_PRESELECT_POINT_IDS";class K8 extends m.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s){console.error("Erro ao renderizar detalhes da proposta:",s)}render(){return this.state.hasError?e.jsxs("div",{className:"p-6 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"No foi possvel abrir os detalhes da proposta."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Abra o console do navegador (F12) para ver o erro. Depois volte e tente novamente."}),e.jsx(K,{type:"button",variant:"outline",onClick:this.props.onBack,children:"Voltar"})]}):this.props.children}}function Q8({onNavigate:t}){const[s,n]=m.useState(""),[r,o]=m.useState("all"),[c,u]=m.useState(1),h=40,[f,v]=m.useState({proposalStatuses:[],campaignStatus:void 0,billingStatus:void 0,responsibleUserId:void 0,createdFrom:void 0,createdTo:void 0}),[x,g]=m.useState(!1),j=m.useMemo(()=>{if(r!=="all")return r;if(f.proposalStatuses.length)return f.proposalStatuses},[r,f.proposalStatuses]),{proposals:w,total:N,totalPages:C,stats:S,loading:E,error:_,refetch:k,createProposal:T,updateProposal:M,updateProposalStatus:F,getProposalById:O}=YS({search:s||void 0,status:j,responsibleUserId:f.responsibleUserId,createdFrom:f.createdFrom,createdTo:f.createdTo,orderBy:"createdAt",sortOrder:"desc",page:c,pageSize:h});m.useEffect(()=>{u(1)},[s,r,f.responsibleUserId,f.createdFrom,f.createdTo,f.proposalStatuses.join("|")]);const[Z,q]=m.useState(!1),[$,X]=m.useState(null),[I,B]=m.useState(null),[te,ue]=m.useState(null),[Y,ce]=m.useState(null),[U,ne]=m.useState(!1);m.useEffect(()=>{const me=new URLSearchParams(window.location.search),oe=me.get("new"),Pe=me.get("mediaPointId"),We=me.get("mediaPointIds");let Je=[];if(We&&(Je=We.split(",").map(tt=>String(tt||"").trim()).filter(Boolean)),!Je.length)try{const tt=sessionStorage.getItem(bN);if(tt){const nt=JSON.parse(tt);Array.isArray(nt)&&(Je=nt.map(ct=>String(ct||"").trim()).filter(Boolean))}}catch{}if(!Je.length&&Pe&&(Je=[Pe]),Je.length?(ue(Je),B(Je[0])):(ue(null),B(null)),(oe==="1"||oe==="true"||Je.length)&&(X(null),q(!0)),oe||Pe||We){oe&&me.delete("new"),Pe&&me.delete("mediaPointId"),We&&me.delete("mediaPointIds");const tt=me.toString(),nt=`${window.location.pathname}${tt?`?${tt}`:""}`;window.history.replaceState({},"",nt)}try{sessionStorage.removeItem(bN)}catch{}},[]);const Q=m.useMemo(()=>{const me=new Date().getMonth(),oe=new Date().getFullYear(),Pe=w.filter(pt=>pt.status===us.APROVADA),We=w.filter(pt=>pt.status!==us.RASCUNHO),Je=We.length>0?Math.round(Pe.length/We.length*100):0,nt=Pe.filter(pt=>{if(!pt.approvedAt)return!1;const It=new Date(pt.approvedAt);return It.getMonth()===me&&It.getFullYear()===oe}).reduce((pt,It)=>pt+Number(It.totalAmount??0),0),ct=w.filter(pt=>pt.status===us.ENVIADA),wt=w.filter(pt=>pt.status===us.RASCUNHO);return{approved:Pe.length,approvalRate:Je,totalApprovedAmount:nt,sent:ct.length,drafts:wt.length}},[w]),z=m.useMemo(()=>S??{approved:Q.approved,approvalRate:Q.approvalRate,totalApprovedAmount:Q.totalApprovedAmount,sent:Q.sent,drafts:Q.drafts},[S,Q]),se=()=>{X(null),B(null),ue(null),q(!0)},G=async me=>{try{ne(!0);const oe=await O(me.id);X(oe),q(!0)}catch{ye.error("Erro ao carregar proposta para edio")}finally{ne(!1)}},ee=async me=>{ce(me);try{ne(!0);const oe=await O(me.id);console.debug("Loaded full proposal for details:",oe),ce(Pe=>Pe&&Pe.id===oe.id?oe:Pe)}catch(oe){console.warn("Erro ao carregar detalhes completos da proposta:",oe)}finally{ne(!1)}},V=async me=>{try{await F(me.id,us.ENVIADA),ye.success("Proposta enviada."),k()}catch{ye.error("Erro ao enviar proposta")}},re=async me=>{try{const oe=me.status,{status:Pe,...We}=me;let Je;return $?.id?(Je=await M($.id,We),ye.success("Proposta atualizada com sucesso!")):(Je=await T(We),ye.success("Proposta criada com sucesso!")),oe&&oe!==Je.status&&await F(Je.id,oe),q(!1),X(null),await k(),!0}catch(oe){const Pe=oe?.response?.data?.message||"Erro ao salvar proposta";return ye.error(Pe),!1}},ae=me=>{v(me)};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Propostas"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie propostas comerciais (Proposal + ProposalItem)"})]}),e.jsxs(K,{type:"button",className:"gap-2",onClick:se,disabled:U,children:[e.jsx(Sn,{className:"w-4 h-4"}),"Nova Proposta"]})]}),E&&e.jsx("div",{children:"Carregando propostas..."}),!E&&_&&e.jsx("div",{children:"Erro ao carregar propostas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o(us.APROVADA),children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Aprovadas"}),e.jsx(Hh,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:z.approved}),e.jsxs("p",{className:"text-green-600 text-sm",children:["Taxa: ",z.approvalRate,"%"]})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Valor Aprovado"}),e.jsx(Hh,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("p",{className:"text-gray-900 mb-1",children:["R$"," ",z.totalApprovedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"No ms"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o(us.ENVIADA),children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Enviadas"}),e.jsx(Lu,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:z.sent}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Aguardando retorno"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o(us.RASCUNHO),children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Rascunhos"}),e.jsx(ql,{className:"w-5 h-5 text-gray-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:z.drafts}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Em elaborao"})]})})]}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"pt-6",children:e.jsx(_8,{searchQuery:s,onSearchChange:n,statusFilter:r,onStatusChange:me=>o(me),onOpenAdvancedFilters:()=>g(!0)})})}),(s||r!=="all"||f.proposalStatuses.length>0)&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[w.length," ",w.length===1?"proposta encontrada":"propostas encontradas",N>w.length?` (de ${N})`:""]})}),e.jsxs(Re,{children:[e.jsx(Z8,{proposals:w,onViewDetails:ee,onEditProposal:G,onSendProposal:V}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Pgina ",c," de ",C||1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>u(me=>Math.max(1,me-1)),disabled:E||c<=1,children:"Anterior"}),e.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>u(me=>Math.min(C||1,me+1)),disabled:E||c>=(C||1),children:"Prxima"})]})]})]}),e.jsx(N8,{open:x,onOpenChange:g,filters:f,onApplyFilters:ae}),e.jsx(W8,{open:Z,onOpenChange:me=>{q(me),me||(X(null),B(null),ue(null))},proposal:$,initialMediaPointId:I,initialMediaPointIds:te,onSave:re,onNavigate:t}),e.jsx(K8,{onBack:()=>ce(null),children:e.jsx(S8,{open:!!Y,onOpenChange:me=>{me||ce(null)},proposal:Y,onNavigate:t})})]})}function X8(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=m.useRef(null),x=async()=>{try{u(!0),f(null);const C=(await Ie.get("/campaigns",{params:t})).data,S=Array.isArray(C)?C:C.data,E=Array.isArray(C)?S.length:C.total??S.length;n(S),o(E)}catch(N){f(N)}finally{u(!1)}};m.useEffect(()=>{v.current=()=>{x()}},[t.search,t.status,t.clientId,t.startFrom,t.startTo,t.endFrom,t.endTo,t.page,t.pageSize]),m.useEffect(()=>{let N=0;const C=()=>{if(typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible")return;const S=Date.now();S-N<800||(N=S,v.current?.())};return window.addEventListener("focus",C),document.addEventListener("visibilitychange",C),()=>{window.removeEventListener("focus",C),document.removeEventListener("visibilitychange",C)}},[]);const g=async N=>(await Ie.get(`/campaigns/${N}`)).data,j=async N=>{const C=await Ie.post("/campaigns",N);return n(S=>[C.data,...S]),C.data},w=async(N,C)=>{const S=await Ie.put(`/campaigns/${N}`,C);return n(E=>E.map(_=>_.id===N?S.data:_)),S.data};return m.useEffect(()=>{x()},[t.search,t.status,t.clientId,t.startFrom,t.startTo,t.endFrom,t.endTo,t.page,t.pageSize]),{campaigns:s,total:r,loading:c,error:h,refetch:x,getCampaignById:g,createCampaign:j,updateCampaign:w}}function v_({status:t}){const s=r=>{switch(r){case Ns.CANCELADA:return"bg-red-100 text-red-800";case Ns.EM_VEICULACAO:return"bg-green-100 text-green-800";case Ns.EM_INSTALACAO:return"bg-yellow-100 text-yellow-800";case Ns.ATIVA:case Ns.APROVADA:return"bg-blue-100 text-blue-800";case Ns.AGUARDANDO_MATERIAL:return"bg-orange-100 text-orange-800";case Ns.FINALIZADA:return"bg-gray-100 text-gray-800";case Ns.RASCUNHO:default:return"bg-gray-100 text-gray-800"}},n=r=>{switch(r){case Ns.CANCELADA:return"Cancelada";case Ns.EM_VEICULACAO:return"Em veiculao";case Ns.EM_INSTALACAO:return"Em instalao";case Ns.ATIVA:return"Ativa";case Ns.APROVADA:return"Aprovada";case Ns.AGUARDANDO_MATERIAL:return"Aguardando material";case Ns.FINALIZADA:return"Finalizada";case Ns.RASCUNHO:default:return"Rascunho"}};return e.jsx(Ke,{className:s(t),children:n(t)})}function dn(t){if(t==null||t==="")return null;const s=t instanceof Date?t:new Date(t);return Number.isNaN(s.getTime())?null:s}function ts(t,s="-"){const n=dn(t);return n?n.toLocaleDateString("pt-BR"):s}function Y8(t,s="-"){const n=dn(t);return n?n.toLocaleString("pt-BR"):s}function ja(t,s="R$ 0,00"){const n=typeof t=="number"?t:typeof t=="string"?Number(t):typeof t?.toNumber=="function"?t.toNumber():Number(t);return Number.isFinite(n)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(n):s}function y_(t,s="R$ 0,00"){const n=typeof t=="number"?t:typeof t=="string"?Number(t):typeof t?.toNumber=="function"?t.toNumber():Number(t);return Number.isFinite(n)?ja(n/100,s):s}function b_(t){if(!t)return null;if(/^https?:\/\//i.test(t))return t;const s=t.indexOf("/uploads/"),n=s>=0?t.slice(s):t,r=String(Ie.defaults?.baseURL??"");if(!r||r.startsWith("/"))return n;const o=r.replace(/\/?api\/?$/,"");return`${o.endsWith("/")?o.slice(0,-1):o}${n}`}function J8({campaign:t,showAllActions:s=!0,onViewDetails:n,onCheckIn:r,onGenerateReport:o,onViewBilling:c}){const u=t.client,h=(typeof t.reservedUnitsCount=="number"?t.reservedUnitsCount:void 0)??(typeof t.campaignItemsCount=="number"?t.campaignItemsCount:void 0)??(typeof t.reservationsCount=="number"?t.reservationsCount:void 0)??(t.items||[]).filter(S=>S.mediaUnitId).length,f=async()=>{try{await navigator.clipboard.writeText(t.proposalId),ye.success("ID da proposta copiado")}catch{ye.error("No foi possvel copiar o ID")}},v=$s(t.totalAmountCents,0),x=y_(v),g=!!t.checkInAt,j=dn(t.checkInDeadlineAt),w=dn(t.startDate),N=dn(t.endDate),C=g?`${ts(w)} - ${ts(N)}`:j?`Check-in at ${ts(j)}`:`${ts(w)} - ${ts(N)}`;return e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-gray-900",children:t.name}),e.jsx(v_,{status:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:u?.companyName||u?.contactName||"Cliente no encontrado"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{children:"Proposta ID:"}),e.jsxs("button",{type:"button",className:"font-mono text-gray-700 hover:text-gray-900",title:t.proposalId,onClick:f,children:["...",t.proposalId.slice(-6)]}),e.jsx(K,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",title:"Copiar ID",onClick:f,children:e.jsx($n,{className:"w-4 h-4"})})]}),e.jsx("span",{children:""}),e.jsx("span",{children:C}),e.jsx("span",{children:""}),e.jsxs("span",{children:[h," ",h===1?"unidade":"unidades"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-gray-900",children:x})})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-100",children:[e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>n(t),children:[e.jsx(li,{className:"w-4 h-4"}),"Ver Detalhes"]}),s&&r&&t.status==="EM_INSTALACAO"&&e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>r(t),children:[e.jsx(WE,{className:"w-4 h-4"}),"Check-in"]}),e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>o(t),children:[e.jsx(Js,{className:"w-4 h-4"}),"Relatrio"]}),s&&c&&e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>c(t),children:[e.jsx(Cu,{className:"w-4 h-4"}),"Faturamento"]})]})]})})}function cg({campaigns:t,showAllActions:s=!0,onViewDetails:n,onCheckIn:r,onGenerateReport:o,onViewBilling:c}){return t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma campanha encontrada"})}):e.jsx("div",{className:"space-y-4",children:t.map(u=>e.jsx(J8,{campaign:u,showAllActions:s,onViewDetails:n,onCheckIn:r,onGenerateReport:o,onViewBilling:c},u.id))})}function ez({campaigns:t,onViewDetails:s,onCheckIn:n}){const r=(t||[]).filter(o=>o.status===Ns.EM_INSTALACAO);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pT,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-900",children:"Instalaes OOH"}),e.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Acompanhe campanhas em fase de instalao. Ao concluir a instalao, realize o ",e.jsx("b",{children:"check-in"})," com 1 foto por face."]})]})]})}),r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ia,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"Nenhuma instalao em andamento"}),e.jsx("p",{className:"text-sm",children:"Quando uma campanha estiver em EM_INSTALACAO, ela aparecer aqui."})]}):e.jsx("div",{className:"space-y-4",children:r.map(o=>{const c=dn(o.checkInDeadlineAt),u=dn(o.startDate),h=dn(o.endDate),f=(typeof o.reservedUnitsCount=="number"?o.reservedUnitsCount:void 0)??(typeof o.campaignItemsCount=="number"?o.campaignItemsCount:void 0)??(typeof o.reservationsCount=="number"?o.reservationsCount:void 0)??o.items?.length??0,v=o.client?.contactName||o.client?.companyName||o.clientName||"",x=async()=>{try{await navigator.clipboard.writeText(o.proposalId),ye.success("ID da proposta copiado")}catch{ye.error("No foi possvel copiar o ID")}};return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsx("span",{children:c?`Check-in at ${ts(c)}`:u&&h?`${ts(u)} - ${ts(h)}`:"-"}),e.jsx("span",{children:""}),e.jsxs("span",{children:[f," unidades"]})]}),o.proposalId&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1 inline-flex items-center gap-1",children:[e.jsx("span",{children:"Proposta ID:"}),e.jsxs("button",{type:"button",className:"font-mono text-gray-600 hover:text-gray-900",title:o.proposalId,onClick:x,children:["...",o.proposalId.slice(-6)]}),e.jsx("button",{type:"button",className:"p-1 rounded hover:bg-gray-100",title:"Copiar ID",onClick:x,children:e.jsx($n,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{variant:"outline",onClick:()=>s(o),children:"Ver detalhes"}),n&&e.jsx(K,{onClick:()=>n(o),children:"Check-in"})]})]})},o.id)})})]})}function tz({open:t,onOpenChange:s,campaign:n,defaultTab:r="summary",onRequestCheckIn:o}){const c=is(),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState([]),[j,w]=m.useState([]),[N,C]=m.useState([]),[S,E]=m.useState(null),_=async()=>{if(n)try{h(!0);try{const G=(await Ie.get(`/campaigns/${n.id}/details`))?.data;if(G&&typeof G=="object"&&G.campaign){v(G.campaign),g(Array.isArray(G.invoices)?G.invoices:[]),w(Array.isArray(G.forecastInvoices)?G.forecastInvoices:[]),C(Array.isArray(G.reservations)?G.reservations:[]),E(G.checkIn??null);return}}catch{}const[U,ne,Q,z]=await Promise.allSettled([Ie.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),Ie.get("/billing-invoices/forecast",{params:{campaignId:n.id}}),Ie.get("/reservations",{params:{campaignId:n.id,orderBy:"startDate"}}),Ie.get(`/campaigns/${n.id}/checkin`)]);v(null),g(U.status==="fulfilled"&&Array.isArray(U.value.data)?U.value.data:[]),w(ne.status==="fulfilled"&&Array.isArray(ne.value.data)?ne.value.data:[]),C(Q.status==="fulfilled"&&Array.isArray(Q.value.data)?Q.value.data:[]),E(z.status==="fulfilled"?z.value.data:null)}catch(U){console.error(U),ye.error("Erro ao carregar dados da campanha."),v(null),g([]),w([]),C([]),E(null)}finally{h(!1)}};m.useEffect(()=>{t&&_()},[t,n?.id]);const k=f??n,T=k?.client?.companyName||k?.client?.contactName||k?.clientName||"-",M=!!k?.checkInAt,F=dn(k?.checkInDeadlineAt),O=m.useMemo(()=>{if(!k)return"-";const U=dn(k.startDate),ne=dn(k.endDate);return M?`${ts(U)} - ${ts(ne)}`:F?`Check-in at ${ts(F)}`:`${ts(U)} - ${ts(ne)}`},[k,M,F]),Z=m.useMemo(()=>{const U=x.filter(Q=>Q.status===at.PAGA).reduce((Q,z)=>Q+Number(z.amount||0),0),ne=x.filter(Q=>Q.status===at.ABERTA||Q.status===at.VENCIDA).reduce((Q,z)=>Q+Number(z.amount||0),0);return{paid:U,openAmount:ne}},[x]),q=m.useMemo(()=>{const U=V=>V.status===at.PAGA,ne=V=>V.status===at.CANCELADA;if(!x.length)return{ok:!0,pending:[]};const Q=x.filter(V=>V.type===Ln.UPFRONT&&!ne(V)),z=x.filter(V=>V.type===Ln.RENT&&!ne(V)),se=z.slice().sort((V,re)=>{const ae=V.sequence??9999,me=re.sequence??9999;return ae!==me?ae-me:new Date(V.dueDate).getTime()-new Date(re.dueDate).getTime()})[0];let G=[];if(Q.length||z.length)G=[...Q,...se?[se]:[]];else{const V=Math.min(...x.map(re=>new Date(re.dueDate).getTime()));G=x.filter(re=>new Date(re.dueDate).getTime()===V)}const ee=G.filter(V=>!U(V));return{ok:ee.length===0,pending:ee}},[x]),$=m.useMemo(()=>k?k.approvedAt?new Date(k.approvedAt).getDate():x.length?new Date(x[0].dueDate).getDate():null:null,[k,x]),X=m.useMemo(()=>{const U=Q=>Q.status===at.PAGA,ne=Q=>Q.status===at.CANCELADA;return x.filter(Q=>!U(Q)&&!ne(Q)).slice().sort((Q,z)=>new Date(Q.dueDate).getTime()-new Date(z.dueDate).getTime())[0]||null},[x]),I=m.useMemo(()=>{const U=x.some(Q=>!!Q.requiresConfirmation&&Q.status!==at.PAGA&&Q.status!==at.CANCELADA),ne=j.some(Q=>!!Q.requiresConfirmation);return U||ne},[x,j]),B=S?.faces??[],te=B.filter(U=>!!U?.photo?.photoUrl).length,ue=B.length,Y=B.length>0?B.length:k?.reservedUnitsCount??k?.campaignItemsCount??N.length??0;if(!k)return null;const ce=U=>{const ne=U==="CONFIRMADA"?"bg-green-100 text-green-800":U==="CANCELADA"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800";return e.jsx(Ke,{className:ne,children:U})};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsx(As,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx(Rs,{children:e.jsx(Os,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:k.name}),e.jsx(v_,{status:k.status})]})})}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:T}),e.jsx("span",{children:""}),e.jsx("span",{children:O}),!!k.totalAmountCents&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:y_(k.totalAmountCents)})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:e.jsxs(Wi,{defaultValue:r,className:"h-full flex flex-col min-h-0",children:[e.jsxs(Gi,{className:"w-full justify-start px-6 py-0 h-12 border-b rounded-none bg-transparent overflow-x-auto flex-nowrap",children:[e.jsx(vs,{value:"summary",className:"flex-none",children:"Resumo"}),e.jsx(vs,{value:"media",className:"flex-none",children:"Veiculaes"}),e.jsx(vs,{value:"installations",className:"flex-none",children:"Instalaes OOH"}),e.jsx(vs,{value:"billing",className:"flex-none",children:"Financeiro"}),e.jsx(vs,{value:"messages",className:"flex-none",children:"Mensagens"})]}),e.jsxs(Ms,{value:"summary",className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:[u&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando dados..."}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Unidades planejadas"}),e.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:Y})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Check-in"}),e.jsx("p",{className:"text-2xl font-semibold text-purple-900",children:M?"OK":ue>0?`${te}/${ue}`:""})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Pago"}),e.jsx("p",{className:"text-2xl font-semibold text-green-900",children:ja(Z.paid)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Em Aberto"}),e.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:ja(Z.openAmount)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600",children:e.jsx("b",{children:"Resumo rpido"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ke,{className:"bg-gray-100 text-gray-800",children:["Reservas: ",N.length]}),e.jsxs(Ke,{className:"bg-gray-100 text-gray-800",children:["Faturas: ",x.length]}),k?.proposalId?e.jsxs(Ke,{className:"bg-gray-100 text-gray-800",children:["Proposta: ",k.proposalId.slice(0,8),""]}):null]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["No novo fluxo, as ",e.jsx("b",{children:"reservas"})," so criadas automaticamente ao concluir o ",e.jsx("b",{children:"check-in"})," (1 foto por face). Antes do check-in,  normal a campanha no ter reservas."]})]})]}),e.jsxs(Ms,{value:"media",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Reservas da campanha"}),e.jsx(K,{variant:"outline",size:"sm",onClick:_,disabled:u,children:"Atualizar"})]}),u?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando reservas..."}):N.length===0?e.jsxs("div",{className:"text-sm text-gray-500",children:["Nenhuma reserva encontrada. As reservas sero criadas automaticamente ao concluir o ",e.jsx("b",{children:"check-in"}),"."]}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Ponto / Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden md:table-cell",children:"Responsvel"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden lg:table-cell",children:"Ocupao"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Perodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.mediaPointName||"-"}),e.jsx("div",{className:"text-xs text-gray-600",children:U.mediaUnitLabel||U.mediaUnitId})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden md:table-cell",children:U.responsibleCompanyName||U.responsibleOwnerName||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden lg:table-cell",children:U.occupationDays?`${U.occupationDays} dias`:"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[ts(U.startDate)," - ",ts(U.endDate)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:typeof U.rentAmount=="number"?ja(Number(U.rentAmount||0)):"-"}),e.jsx("td",{className:"px-4 py-3",children:ce(U.status)})]},U.id))})]})})]}),e.jsxs(Ms,{value:"installations",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-blue-900",children:" Check-in de Instalao"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Para iniciar a veiculao, realize o ",e.jsx("b",{children:"check-in"})," enviando 1 foto por face/unidade."]}),!M&&F&&e.jsxs("p",{className:"text-sm text-blue-800",children:["Prazo limite: ",e.jsx("b",{children:ts(F)})]}),M&&k.checkInAt&&e.jsxs("p",{className:"text-sm text-blue-800",children:["Check-in realizado em: ",e.jsx("b",{children:Y8(k.checkInAt)})]}),!M&&S?.blockingReasons?.length?e.jsxs("div",{className:"rounded-lg p-3 text-sm bg-yellow-50 border border-yellow-200 text-yellow-900",children:[e.jsx("div",{className:"font-medium",children:"Pendncias"}),e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-yellow-800 space-y-1",children:S.blockingReasons.slice(0,6).map((U,ne)=>e.jsx("li",{children:U},`${U}-${ne}`))})]}):null,!M&&x.length>0?e.jsxs("div",{className:`rounded-lg p-3 text-sm ${q.ok?"bg-green-50 border border-green-200 text-green-900":"bg-red-50 border border-red-200 text-red-900"}`,children:[q.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in ficar bloqueado",!q.ok&&q.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:q.pending.map(U=>e.jsxs("li",{children:[U.type===Ln.UPFRONT?"Custos iniciais (produo/instalao)":U.type===Ln.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",ts(U.dueDate)]},U.id))}):null]}):null,!M&&o&&k.status==="EM_INSTALACAO"&&e.jsx("div",{children:e.jsx(K,{onClick:()=>o(k),disabled:x.length>0&&!q.ok,children:"Realizar check-in"})})]}),B.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No foi possvel listar as faces/unidades desta campanha. (Caso isso persista, verifique se existem itens de campanha.)"}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Face/Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden md:table-cell",children:"Ponto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Foto"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:B.map(U=>{const ne=b_(U?.photo?.photoUrl??null),Q=!!ne;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.label||U.mediaUnitId}),e.jsx("div",{className:"text-xs text-gray-600",children:U.mediaUnitId})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden md:table-cell",children:U.mediaPointName||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:Q?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:Q?"OK":"Pendente"}),Q?e.jsxs("a",{href:ne,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2",children:[e.jsx("img",{src:ne,alt:"Foto do check-in",className:"w-12 h-12 object-cover rounded-md border"}),e.jsx("span",{className:"text-xs text-gray-600",children:"abrir"})]}):e.jsx("span",{className:"text-xs text-gray-500",children:""})]})})]},U.mediaUnitId)})})]})})]}),e.jsxs(Ms,{value:"billing",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Faturas da campanha"}),e.jsx(K,{variant:"outline",size:"sm",onClick:_,disabled:u,children:"Atualizar"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Regra:"})," o primeiro pagamento deve estar ",e.jsx("b",{children:"pago"})," para liberar o check-in."]}),$?e.jsxs(Ke,{className:"bg-gray-100 text-gray-800",children:["Recorrncia: dia ",$]}):null]}),X?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:["Prximo vencimento: ",e.jsx("b",{children:ts(X.dueDate)})]}):null,I?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana marcada como requer confirmao (regra de 30 dias antes do vencimento)."]}):null]}),x.length>0?e.jsx("div",{className:`border rounded-lg p-4 text-sm ${q.ok?"bg-green-50 border-green-200 text-green-900":"bg-red-50 border-red-200 text-red-900"}`,children:q.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado"}):null,u?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando faturas..."}):x.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma fatura vinculada a esta campanha."}):e.jsx("div",{className:"space-y-3",children:x.map(U=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(U.type===Ln.UPFRONT?"Custos iniciais":U.type===Ln.RENT?"Aluguel":"Fatura")+(U.sequence?`  ciclo ${U.sequence}`:"")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Venc.: ",ts(U.dueDate),"  Valor: ",ja(Number(U.amount||0))]}),U.periodStart&&U.periodEnd?e.jsxs("p",{className:"text-xs text-gray-500",children:["Perodo: ",ts(U.periodStart)," - ",ts(U.periodEnd)]}):null,U.requiresConfirmation?e.jsx("p",{className:"text-xs text-blue-700",children:"Requer confirmao (regra de 30 dias antes do vencimento)"}):null]}),e.jsx(Ke,{className:U.status===at.PAGA?"bg-green-100 text-green-800":U.status===at.VENCIDA?"bg-red-100 text-red-800":U.status===at.CANCELADA?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:U.status})]}),U.paidAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Pago em ",ts(U.paidAt)]})]},U.id))}),u?null:e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-gray-900",children:"Faturas futuras (previsto)"}),e.jsx(Ke,{className:"bg-gray-100 text-gray-800",children:"Forecast"})]}),j.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No h faturas futuras previstas para esta campanha."}):e.jsx("div",{className:"space-y-3",children:j.map(U=>{const ne=dn(U.dueDate),Q=dn(U.periodStart),z=dn(U.periodEnd);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Aluguel",U.sequence?`  ciclo ${U.sequence}`:""]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Venc.: ",ts(ne),"  Valor: ",ja(Number(U.amount||0))]}),Q&&z?e.jsxs("p",{className:"text-xs text-gray-500",children:["Perodo: ",ts(Q)," - ",ts(z)]}):null,U.requiresConfirmation?e.jsx("p",{className:"text-xs text-blue-700",children:"Requer confirmao (regra de 30 dias antes do vencimento)"}):null]}),e.jsx(Ke,{className:"bg-gray-100 text-gray-800",children:"Prevista"})]})},U.id)})})]})]}),e.jsx(Ms,{value:"messages",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Abra o mdulo ",e.jsx("span",{className:"font-medium",children:"Mensagens"})," para conversar no contexto desta campanha."]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(K,{onClick:()=>{k&&(s(!1),c(`/app/messages?campaignId=${k.id}`))},children:"Abrir Mensagens"})})]})})]})})]})})})}function sz({open:t,onOpenChange:s,campaign:n,onCheckInComplete:r}){const[o,c]=m.useState(!1),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState(!1),[j,w]=m.useState([]),[N,C]=m.useState({}),[S,E]=m.useState({}),_=m.useMemo(()=>n?f?.faces?.length?f.faces.map(B=>({mediaUnitId:B.mediaUnitId,label:B.label??void 0})):f?.expectedUnits?.length?f.expectedUnits.map(B=>({mediaUnitId:B.mediaUnitId,label:B.label??void 0})):(n.items||[]).filter(B=>!!B.mediaUnitId).map(B=>({mediaUnitId:B.mediaUnitId,label:void 0})):[],[n,f?.faces,f?.expectedUnits]),k=m.useMemo(()=>{if(!n)return null;const B=dn(f?.checkInDeadlineAt??f?.deadlineAt),te=dn(n.checkInDeadlineAt??null);return B||te},[n,f?.checkInDeadlineAt,f?.deadlineAt]),T=m.useMemo(()=>k?new Date().getTime()>k.getTime():!1,[k]),M=async()=>{if(n)try{h(!0);const B=await Ie.get(`/campaigns/${n.id}/checkin`);v(B.data||null);const te={};for(const ue of B.data?.faces||[])ue.photo?.photoUrl&&(te[ue.mediaUnitId]=ue.photo.photoUrl);for(const ue of B.data?.photos||[])te[ue.mediaUnitId]=ue.photoUrl;for(const ue of B.data?.expectedUnits||[])ue.photoUrl&&(te[ue.mediaUnitId]=ue.photoUrl);E(te)}catch{v(null)}finally{h(!1)}},F=async()=>{if(n)try{g(!0);const B=await Ie.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}});w(Array.isArray(B.data)?B.data:[])}catch{w([])}finally{g(!1)}},O=m.useMemo(()=>{if(!n)return{ok:!0,pending:[],nextDue:null};if(!j?.length)return{ok:!0,pending:[],nextDue:null};const B=z=>z.status===at.PAGA,te=z=>z.status===at.CANCELADA,ue=j.filter(z=>z.type===Ln.UPFRONT&&!te(z)),Y=j.filter(z=>z.type===Ln.RENT&&!te(z)),ce=Y.slice().sort((z,se)=>{const G=z.sequence??9999,ee=se.sequence??9999;return G!==ee?G-ee:new Date(z.dueDate).getTime()-new Date(se.dueDate).getTime()})[0];let U=[];if(ue.length||Y.length)U=[...ue,...ce?[ce]:[]];else{const z=Math.min(...j.map(se=>new Date(se.dueDate).getTime()));U=j.filter(se=>new Date(se.dueDate).getTime()===z)}const ne=U.filter(z=>!B(z)),Q=j.filter(z=>!B(z)&&!te(z)).slice().sort((z,se)=>new Date(z.dueDate).getTime()-new Date(se.dueDate).getTime())[0]||null;return{ok:ne.length===0,pending:ne,nextDue:Q}},[n,j]),Z=m.useMemo(()=>n?n.approvedAt?new Date(n.approvedAt).getDate():O.nextDue?new Date(O.nextDue.dueDate).getDate():j?.length?new Date(j[0].dueDate).getDate():null:null,[n,j,O.nextDue]),q=m.useMemo(()=>j?.some(B=>!!B.requiresConfirmation&&B.status!==at.PAGA&&B.status!==at.CANCELADA),[j]);if(m.useEffect(()=>{t&&(C({}),E({}),M(),F())},[t,n?.id]),!n)return null;const $=(B,te)=>{C(ue=>({...ue,[B]:te}))},X=async()=>{try{const B=await Ie.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),te=Array.isArray(B.data)?B.data:[];if(w(te),te.length===0)return!0;const ue=se=>se.status===at.PAGA,Y=se=>se.status===at.CANCELADA,ce=te.filter(se=>se.type===Ln.UPFRONT&&!Y(se)),U=te.filter(se=>se.type===Ln.RENT&&!Y(se)),ne=U.slice().sort((se,G)=>{const ee=se.sequence??9999,V=G.sequence??9999;return ee!==V?ee-V:new Date(se.dueDate).getTime()-new Date(G.dueDate).getTime()})[0];let Q=[];if(ce.length||U.length)Q=[...ce,...ne?[ne]:[]];else{const se=Math.min(...te.map(G=>new Date(G.dueDate).getTime()));Q=te.filter(G=>new Date(G.dueDate).getTime()===se)}return Q.filter(se=>!ue(se)).length>0?(ye.error("Check-in bloqueado: pagamento inicial pendente."),!1):!0}catch{return!0}},I=async()=>{if(o)return;if(n.status!=="EM_INSTALACAO"){ye.error("Check-in s pode ser feito quando a campanha estiver em EM_INSTALACAO.");return}if(T){ye.error("Prazo de check-in expirado.");return}const B=_.map(Y=>Y.mediaUnitId);if(B.length===0){ye.error("Nenhuma unidade encontrada para check-in.");return}if(B.filter(Y=>!S[Y]&&!N[Y]).length>0){ye.error("Envie 1 foto para todas as faces/unidades para concluir o check-in.");return}if(await X())try{c(!0);for(const ce of B){if(S[ce])continue;const U=N[ce];if(!U)continue;const ne=new FormData;ne.append("file",U);const Q=await Ie.post(`/campaigns/${n.id}/checkin/${ce}/photo`,ne,{headers:{"Content-Type":"multipart/form-data"}});Q.data?.photoUrl&&E(z=>({...z,[ce]:Q.data.photoUrl}))}const Y=await Ie.post(`/campaigns/${n.id}/checkin/confirm`);ye.success("Check-in realizado com sucesso."),s(!1),r?.(Y.data)}catch(Y){console.error(Y);const ce=Y?.response?.data?.message||"Erro ao confirmar check-in.";ye.error(ce)}finally{c(!1)}};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Rs,{children:e.jsxs(Os,{children:["Check-in - ",n.name]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-1",children:[e.jsx("p",{className:"text-sm text-blue-900",children:"Envie 1 foto por face/unidade. O check-in s ser concludo quando todas as fotos estiverem presentes."}),k&&e.jsxs("p",{className:"text-xs text-blue-800",children:["Prazo limite: ",e.jsx("b",{children:ts(k)}),T?e.jsx("span",{className:"ml-2 text-red-700",children:"(expirado)"}):null]}),e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("b",{children:"Importante:"})," o pagamento inicial deve estar quitado para liberar o check-in."]}),Z?e.jsxs("p",{className:"text-xs text-blue-800",children:["Cobrana recorrente: vencimento todo dia ",e.jsx("b",{children:Z}),"."]}):null,q?e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana que requer confirmao do cliente (regra de 30 dias antes do vencimento)."]}):null]}),x?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando status de pagamento..."}):j.length>0?e.jsxs("div",{className:`border rounded-lg p-4 ${O.ok?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm ${O.ok?"text-green-900":"text-red-900"}`,children:O.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado"}),O.nextDue?e.jsxs(Ke,{className:"bg-gray-100 text-gray-800",children:["Prximo venc.: ",ts(O.nextDue.dueDate)]}):null]}),!O.ok&&O.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:O.pending.map(B=>e.jsxs("li",{children:[B.type===Ln.UPFRONT?"Custos iniciais (produo/instalao)":B.type===Ln.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",ts(B.dueDate),"  ",ja(Number(B.amount||0))]},B.id))}):null,q?e.jsxs("p",{className:"mt-2 text-xs text-gray-700",children:["Ateno: h faturas marcadas como ",e.jsx("b",{children:"necessita confirmao"})," (regra de 30 dias antes)."]}):null]}):null,e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm text-gray-900",children:"Unidades para check-in"}),e.jsx(K,{variant:"outline",size:"sm",onClick:M,disabled:u,children:u?"Atualizando...":"Atualizar"})]}),_.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma unidade encontrada."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Foto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map(B=>{const te=S[B.mediaUnitId],ue=N[B.mediaUnitId],Y=!!te||!!ue;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B.label||`ID: ${B.mediaUnitId}`}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(je,{className:"text-xs text-gray-600",children:"Enviar foto"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ce=>$(B.mediaUnitId,ce.target.files?.[0]||null)}),te?e.jsx("a",{href:te,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline",children:"Ver foto enviada"}):ue?e.jsx("div",{className:"text-xs text-gray-600",children:ue.name}):null]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ke,{className:Y?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:Y?"OK":"Pendente"})})]},B.mediaUnitId)})})]})}),f?.blockers?.length||f?.blockingReasons?.length||f?.missingPhotos?.length?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-yellow-900 mb-2",children:"Pendncias"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm text-yellow-800 space-y-1",children:[(f?.blockers||f?.blockingReasons||[]).map(B=>e.jsx("li",{children:B},B)),f?.missingPhotos?.length?e.jsxs("li",{children:["Faltam fotos para ",f.missingPhotos.length," unidade(s)."]},"missing-photos"):null]})]}):null,e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx(K,{variant:"outline",onClick:()=>s(!1),disabled:o,children:"Cancelar"}),e.jsx(K,{onClick:I,disabled:o||T||_.length===0||!!(f?.blockers?.length||f?.blockingReasons?.length)||j.length>0&&!O.ok,children:o?"Confirmando...":"Confirmar Check-in"})]})]})]})})}function nz({open:t,onOpenChange:s,campaign:n}){const[r,o]=m.useState("usage"),[c,u]=m.useState(!1),[h,f]=m.useState(!1),[v,x]=m.useState(null),g=n?.id??null,j=m.useMemo(()=>`Relatrio  ${n?.name||n?.proposalTitle||"Campanha"}`,[n?.name,g]),w=async()=>{if(g)try{u(!0),x(null);const T=(await Ie.get(`/campaigns/${g}/report`,{params:{type:r,mode:"preview"}})).data;x(T?.preview??T?.details??null)}catch(k){ye.error(k?.response?.data?.message||"Falha ao gerar relatrio")}finally{u(!1)}};m.useEffect(()=>{if(t){if(!g){x(null);return}w()}},[t,g,r]);const N=k=>{if(!k)return null;const T=k.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),M=(T?.[1]||T?.[2])?.trim();if(!M)return null;try{return decodeURIComponent(M)}catch{return M}},C=async k=>{if(g)try{f(!0);const T=await Ie.get(`/campaigns/${g}/report`,{params:{type:r,format:k,mode:"download"},responseType:"blob"}),M=T.headers?.["content-type"]||(k==="pdf"?"application/pdf":"text/csv"),F=T.headers?.["content-disposition"],O=N(F)||`relatorio-${g}.${k}`,Z=new Blob([T.data],{type:M}),q=window.URL.createObjectURL(Z),$=document.createElement("a");$.href=q,$.download=O,document.body.appendChild($),$.click(),$.remove(),window.URL.revokeObjectURL(q)}catch(T){ye.error(T?.response?.data?.message||"Falha ao baixar relatrio")}finally{f(!1)}},S=v?.cover||null,E=Array.isArray(v?.photos)?v.photos:[],_=v?.summary||null;return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsx(As,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx(Rs,{children:e.jsx(Os,{children:j})}),e.jsxs("div",{className:"mt-4 flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{className:"space-y-2 md:max-w-sm",children:[e.jsx(je,{children:"Tipo de relatrio"}),e.jsxs(_t,{value:r,onValueChange:k=>o(k),children:[e.jsx(Pt,{className:"w-full",children:e.jsx(At,{placeholder:"Escolha o relatrio"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"usage",children:"Veiculao (geral)"}),e.jsx(Oe,{value:"checkin",children:"Check-in (fotos)"}),e.jsx(Oe,{value:"media",children:"Mdias / Unidades"}),e.jsx(Oe,{value:"billing",children:"Faturamento"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-start md:justify-end gap-2",children:[e.jsx(K,{variant:"outline",onClick:w,disabled:!g||c,children:c?"Gerando...":"Atualizar"}),e.jsx(K,{variant:"outline",onClick:()=>C("csv"),disabled:!g||c||h,children:h?"Baixando...":"Baixar CSV"}),e.jsx(K,{onClick:()=>C("pdf"),disabled:!g||c||h,children:h?"Baixando...":"Baixar PDF"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:g?c?e.jsx("div",{className:"text-sm text-gray-600",children:"Gerando prvia..."}):v?e.jsxs(e.Fragment,{children:[S?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Capa"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:S.title||n?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("div",{className:"text-sm text-gray-900",children:S.clientName||n?.clientName||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsx("div",{className:"text-sm text-gray-900",children:S.startDate||S.endDate?`${ts(S.startDate)}  ${ts(S.endDate)}`:n?.startDate||n?.endDate?`${ts(n?.startDate)}  ${ts(n?.endDate)}`:"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Gerado em"}),e.jsx("div",{className:"text-sm text-gray-900",children:ts(dn(S.generatedAt)||new Date)})]})]})]}):null,_?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Resumo"}),e.jsx("div",{className:"mt-2 text-sm text-gray-900 whitespace-pre-wrap",children:_.text||_})]}):null,E.length>0?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Fotos"}),e.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-3",children:E.slice(0,24).map((k,T)=>{const M=k.photoUrl||k.url||null,F=b_(M);return e.jsx("a",{href:F||void 0,target:"_blank",rel:"noreferrer",className:"block",children:e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[F?e.jsx("img",{src:F,alt:"Foto",className:"w-full h-28 object-cover"}):e.jsx("div",{className:"w-full h-28 bg-gray-50 flex items-center justify-center text-xs text-gray-500",children:"sem foto"}),e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"text-xs text-gray-600 truncate",children:k.label||k.mediaUnitLabel||k.mediaUnitId||"-"})})]})},`${k.mediaUnitId||T}-${T}`)})}),E.length>24?e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Mostrando 24 de ",E.length," fotos."]}):null]}):null]}):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma prvia disponvel."}):e.jsx("div",{className:"text-sm text-gray-600",children:"Selecione uma campanha para gerar o relatrio."})})]})})})}function az({open:t,onOpenChange:s,campaign:n}){const[r,o]=m.useState(!1),[c,u]=m.useState([]),[h,f]=m.useState([]),v=async()=>{if(n)try{o(!0);try{const M=(await Ie.get(`/campaigns/${n.id}/details`))?.data;if(M&&typeof M=="object"){Array.isArray(M.invoices)?u(M.invoices):u([]),Array.isArray(M.forecastInvoices)?f(M.forecastInvoices):f([]);return}}catch{}const[_,k]=await Promise.allSettled([Ie.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),Ie.get("/billing-invoices/forecast",{params:{campaignId:n.id}})]);u(_.status==="fulfilled"&&Array.isArray(_.value.data)?_.value.data:[]),f(k.status==="fulfilled"&&Array.isArray(k.value.data)?k.value.data:[])}catch(_){console.error(_),ye.error("Erro ao carregar faturas da campanha."),u([]),f([])}finally{o(!1)}};m.useEffect(()=>{t&&v()},[t,n?.id]);const x=m.useMemo(()=>{const _=c.filter(M=>M.status===at.PAGA).reduce((M,F)=>M+Number(F.amount||0),0),k=c.filter(M=>M.status===at.ABERTA||M.status===at.VENCIDA).reduce((M,F)=>M+Number(F.amount||0),0),T=h.reduce((M,F)=>M+Number(F.amount||0),0);return{paid:_,openAmount:k,forecastAmount:T}},[c,h]),g=m.useMemo(()=>{const _=q=>q.status===at.PAGA,k=q=>q.status===at.CANCELADA;if(!c.length)return{ok:!0,pending:[]};const T=c.filter(q=>q.type===Ln.UPFRONT&&!k(q)),M=c.filter(q=>q.type===Ln.RENT&&!k(q)),F=M.slice().sort((q,$)=>{const X=q.sequence??9999,I=$.sequence??9999;return X!==I?X-I:new Date(q.dueDate).getTime()-new Date($.dueDate).getTime()})[0];let O=[];if(T.length||M.length)O=[...T,...F?[F]:[]];else{const q=Math.min(...c.map($=>new Date($.dueDate).getTime()));O=c.filter($=>new Date($.dueDate).getTime()===q)}const Z=O.filter(q=>!_(q));return{ok:Z.length===0,pending:Z}},[c]),j=m.useMemo(()=>n?n.approvedAt?new Date(n.approvedAt).getDate():c.length?new Date(c[0].dueDate).getDate():null:null,[n,c]),w=m.useMemo(()=>{const _=T=>T.status===at.PAGA,k=T=>T.status===at.CANCELADA;return c.filter(T=>!_(T)&&!k(T)).slice().sort((T,M)=>new Date(T.dueDate).getTime()-new Date(M.dueDate).getTime())[0]||null},[c]),N=m.useMemo(()=>{const _=c.some(T=>!!T.requiresConfirmation&&T.status!==at.PAGA&&T.status!==at.CANCELADA),k=h.some(T=>!!T.requiresConfirmation);return _||k},[c,h]);if(!n)return null;const C=_=>{switch(_){case at.PAGA:return"Paga";case at.VENCIDA:return"Vencida";case at.CANCELADA:return"Cancelada";default:return"Aberta"}},S=_=>{switch(_){case ws.PIX:return"PIX";case ws.BOLETO:return"Boleto";case ws.CARTAO:return"Carto";case ws.TRANSFERENCIA:return"Transferncia";default:return"-"}},E=()=>{ye.info("Integrao com tela Financeiro ser adicionada no mdulo financeiro.")};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsx(As,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx(Rs,{children:e.jsxs(Os,{children:["Faturamento  ",n.name]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Faturas vinculadas a esta campanha"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-gray-900",children:"Resumo Financeiro"}),e.jsx(K,{variant:"outline",onClick:E,children:"Ver no Financeiro"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Regra:"})," o primeiro pagamento deve estar ",e.jsx("b",{children:"pago"})," para liberar o check-in."]}),j?e.jsxs(Ke,{className:"bg-gray-100 text-gray-800",children:["Recorrncia: dia ",j]}):null]}),w?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:["Prximo vencimento: ",e.jsx("b",{children:ts(w.dueDate)})]}):null,N?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana marcada como requer confirmao (regra de 30 dias antes do vencimento)."]}):null]}),c.length>0?e.jsxs("div",{className:`border rounded-lg p-4 text-sm ${g.ok?"bg-green-50 border-green-200 text-green-900":"bg-red-50 border-red-200 text-red-900"}`,children:[g.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado",!g.ok&&g.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:g.pending.map(_=>e.jsxs("li",{children:[_.type===Ln.UPFRONT?"Custos iniciais (produo/instalao)":_.type===Ln.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",ts(_.dueDate),"  ",ja(Number(_.amount||0))]},_.id))}):null]}):null]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Pago"}),e.jsx("p",{className:"text-gray-900",children:ja(x.paid)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor em Aberto"}),e.jsx("p",{className:"text-gray-900",children:ja(x.openAmount)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Faturas Futuras (previsto)"}),e.jsx("p",{className:"text-gray-900",children:ja(x.forecastAmount)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Faturas"}),r?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando faturas..."}):c.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma fatura encontrada para esta campanha."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Mtodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Pagamento"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ts(_.dueDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ja(Number(_.amount||0))}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ke,{className:_.status===at.PAGA?"bg-green-100 text-green-800":_.status===at.VENCIDA?"bg-red-100 text-red-800":_.status===at.CANCELADA?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:C(_.status)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S(_.paymentMethod)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.paidAt?ts(_.paidAt):"-"})]},_.id))})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Faturas futuras (previsto)"}),e.jsx(Ke,{className:"bg-gray-100 text-gray-800",children:"Forecast"})]}),r?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando previso..."}):h.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No h faturas futuras previstas para esta campanha."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Seq."}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Perodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Ateno"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(_=>{const k=dn(_.dueDate),T=dn(_.periodStart),M=dn(_.periodEnd);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:_.sequence??"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ts(k)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[ts(T),"  ",ts(M)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ja(Number(_.amount||0))}),e.jsx("td",{className:"px-4 py-3",children:_.requiresConfirmation?e.jsx(Ke,{className:"bg-blue-100 text-blue-800",children:"Requer confirmao"}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})})]},_.id)})})]})})]})]})]})]})})})}function rz(){const[t,s]=m.useState(""),[n,r]=m.useState("all"),{campaigns:o,loading:c,error:u,refetch:h}=X8({search:t||void 0,status:n==="all"?void 0:n}),[f,v]=m.useState(null),[x,g]=m.useState("summary"),[j,w]=m.useState(null),[N,C]=m.useState(null),[S,E]=m.useState(null),_=m.useMemo(()=>{const $=new Date().getMonth(),X=new Date().getFullYear(),I=o.filter(Y=>Y.status===Ns.EM_VEICULACAO),B=o.filter(Y=>Y.status===Ns.EM_INSTALACAO),te=o.filter(Y=>{if(Y.status!==Ns.FINALIZADA)return!1;const ce=dn(Y.endDate);return ce?ce.getMonth()===$&&ce.getFullYear()===X:!1}),ue=I.reduce((Y,ce)=>{const U=Number(ce.totalAmountCents||0),ne=U>0?U/100:0;return Y+ne},0);return{emVeiculacao:I.length,emInstalacao:B.length,finalizadasMes:te.length,valorEmVeiculacao:ue}},[o]),k=m.useMemo(()=>o.filter($=>$.status===Ns.EM_INSTALACAO||$.status===Ns.EM_VEICULACAO||$.status===Ns.ATIVA),[o]),T=m.useMemo(()=>o.filter($=>$.status===Ns.FINALIZADA),[o]),M=m.useMemo(()=>o.filter($=>$.status===Ns.CANCELADA),[o]),F=($,X="summary")=>{v($),g(X)},O=$=>{w($)},Z=$=>{C($)},q=$=>{E($)};return e.jsxs("div",{className:"p-8",children:[c&&e.jsx("div",{children:"Carregando campanhas..."}),!c&&u&&e.jsx("div",{children:"Erro ao carregar campanhas."}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Campanhas"}),e.jsx("p",{className:"text-gray-600",children:"Acompanhe campanhas em execuo (Campaign + CampaignItem)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Em Veiculao"}),e.jsx("p",{className:"text-gray-900",children:_.emVeiculacao})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Em Instalao"}),e.jsx("p",{className:"text-gray-900",children:_.emInstalacao})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Finalizadas (Ms)"}),e.jsx("p",{className:"text-gray-900",children:_.finalizadasMes})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Valor em Veiculao"}),e.jsx("p",{className:"text-gray-900",children:ja(_.valorEmVeiculacao)})]})})]}),e.jsxs(Wi,{defaultValue:"active",className:"space-y-6",children:[e.jsxs(Gi,{children:[e.jsx(vs,{value:"active",children:"Em Andamento"}),e.jsx(vs,{value:"finished",children:"Finalizadas"}),e.jsx(vs,{value:"cancelled",children:"Canceladas"}),e.jsx(vs,{value:"installations",children:"Instalaes OOH"})]}),e.jsx(Ms,{value:"active",children:e.jsx(cg,{campaigns:k,showAllActions:!0,onViewDetails:F,onCheckIn:O,onGenerateReport:Z,onViewBilling:q})}),e.jsx(Ms,{value:"finished",children:e.jsx(cg,{campaigns:T,showAllActions:!1,onViewDetails:F,onGenerateReport:Z})}),e.jsx(Ms,{value:"cancelled",children:e.jsx(cg,{campaigns:M,showAllActions:!1,onViewDetails:F,onGenerateReport:Z})}),e.jsx(Ms,{value:"installations",children:e.jsx(ez,{campaigns:o,onViewDetails:$=>F($,"installations"),onCheckIn:O})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Fluxo de Campanhas"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Campanha  criada automaticamente quando Proposta  aprovada. Status:"," ",e.jsx("strong",{children:"EM_INSTALACAO"})," (OOH sendo instalado)  ",e.jsx("strong",{children:"EM_VEICULACAO"})," (no ar)  ",e.jsx("strong",{children:"FINALIZADA"})," (ou ",e.jsx("strong",{children:"CANCELADA"})," por inadimplncia)"]})]}),e.jsx(tz,{open:!!f,onOpenChange:$=>!$&&v(null),campaign:f,defaultTab:x,onRequestCheckIn:O}),e.jsx(sz,{open:!!j,onOpenChange:$=>!$&&w(null),campaign:j,onCheckInComplete:()=>{h()}}),e.jsx(nz,{open:!!N,onOpenChange:$=>!$&&C(null),campaign:N}),e.jsx(az,{open:!!S,onOpenChange:$=>!$&&E(null),campaign:S})]})}function iz(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=async()=>{try{o(!0),u(null);const j=(await Ie.get("/reservations",{params:t})).data,w=Array.isArray(j)?j:j.data;n(w)}catch(g){u(g)}finally{o(!1)}},f=async g=>{const j=await Ie.post("/reservations",g);return n(w=>[...w,j.data]),j.data},v=async(g,j)=>{const w=j?.status;if(!w)throw new Error("status  obrigatrio para atualizar a reserva");const N=await Ie.patch(`/reservations/${g}/status`,{status:w});return n(C=>C.map(S=>S.id===g?N.data:S)),N.data},x=async g=>{await Ie.delete(`/reservations/${g}`),n(j=>j.filter(w=>w.id!==g))};return m.useEffect(()=>{h()},[t.mediaUnitId,t.campaignId,t.proposalId,t.startDate,t.endDate,t.status]),{reservations:s,loading:r,error:c,refetch:h,createReservation:f,updateReservation:v,deleteReservation:x}}function j_({status:t}){const s=r=>{switch(r){case ba.CONFIRMADA:return"bg-green-100 text-green-800";case ba.RESERVADA:return"bg-yellow-100 text-yellow-800";case ba.CANCELADA:return"bg-red-100 text-red-800"}},n=r=>{switch(r){case ba.CONFIRMADA:return"Confirmada";case ba.RESERVADA:return"Em negociao";case ba.CANCELADA:return"Cancelada"}};return e.jsx(Ke,{className:s(t),children:n(t)})}function oz({reservation:t,clientName:s,unitLabel:n,pointName:r,amount:o,onClick:c}){const u=t.mediaUnitType;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:c,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:"text-gray-900",children:s||"Cliente"}),e.jsx(j_,{status:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:r||"Unidade de Mdia"}),e.jsxs("p",{className:"text-gray-500 text-xs mb-2",children:[n||t.mediaUnitLabel||"Unidade","  ",u===za.FACE?"Face":u===za.SCREEN?"Tela":"-"]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[new Date(t.startDate).toLocaleDateString("pt-BR")," -"," ",new Date(t.endDate).toLocaleDateString("pt-BR")]}),e.jsx("span",{className:"text-gray-900",children:typeof o=="number"?`R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"R$ -"})]}),t.proposalTitle&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Proposta: ",t.proposalTitle]}),!t.proposalTitle&&t.proposalId&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Proposta: ...",t.proposalId.slice(-6)]}),t.campaignName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Campanha: ",t.campaignName]}),!t.campaignName&&t.campaignId&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Campanha: ...",t.campaignId.slice(-6)]})]})}function jN(t,s){if(Number.isNaN(t.getTime())||Number.isNaN(s.getTime()))return null;const n=s.getTime()-t.getTime();return n<0?null:Math.floor(n/(1e3*60*60*24))+1}function lz(t){if(!t)return;const s=t.rentTotalSnapshot;if(typeof s=="number"&&Number.isFinite(s)&&s>0)return s;const n=t.rentAmount,r=t.occupationDays;if(typeof n=="number"&&Number.isFinite(n)&&n>0){const x=typeof r=="number"&&r>0?r:void 0,g=new Date(t.startDate),j=new Date(t.endDate),w=jN(g,j),N=x??(w||void 0);return N?n*N:n}const o=t.mediaUnitPriceDay,c=t.mediaPointBasePriceDay,u=typeof o=="number"&&Number.isFinite(o)&&o>0?o:typeof c=="number"&&Number.isFinite(c)&&c>0?c:void 0;if(typeof u!="number")return;const h=new Date(t.startDate),f=new Date(t.endDate),v=jN(h,f);if(v)return u*v}function Sl(t){return typeof t!="number"||!Number.isFinite(t)?"":`R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}function To(t){if(!t)return"";const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("pt-BR")}function cz({status:t}){const s="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(t){case at.PAGA:return e.jsx("span",{className:`${s} bg-green-100 text-green-700`,children:"Paga"});case at.ABERTA:return e.jsx("span",{className:`${s} bg-yellow-100 text-yellow-800`,children:"Em aberto"});case at.VENCIDA:return e.jsx("span",{className:`${s} bg-red-100 text-red-700`,children:"Vencida"});case at.CANCELADA:return e.jsx("span",{className:`${s} bg-gray-100 text-gray-600`,children:"Cancelada"});default:return e.jsx("span",{className:`${s} bg-gray-100 text-gray-700`,children:t})}}function dz({open:t,onOpenChange:s,reservation:n,clientName:r,unitLabel:o,pointName:c,amount:u}){const h=is(),[f,v]=m.useState([]),[x,g]=m.useState([]),[j,w]=m.useState(!1),[N,C]=m.useState(!1),[S,E]=m.useState(null),_=n?.mediaUnitType,k=m.useMemo(()=>u??n?.estimatedAmount??lz(n),[u,n]),T=m.useMemo(()=>{const $=f.filter(I=>I.status===at.PAGA).reduce((I,B)=>I+Number(B.amount??0),0),X=f.filter(I=>I.status===at.ABERTA||I.status===at.VENCIDA).reduce((I,B)=>I+Number(B.amount??0),0);return{paid:$,open:X}},[f]),M=async()=>{if(!n)return;const $={orderBy:"dueDate",orderDirection:"asc"};if(n.campaignId)$.campaignId=n.campaignId;else if(n.proposalId)$.proposalId=n.proposalId;else{v([]);return}w(!0),E(null);try{const X=await Ie.get("/billing-invoices",{params:$}),B=(Array.isArray(X.data)?X.data:[]).map(te=>({...te,amount:Number(te.amount)}));v(B)}catch(X){E(X?.response?.data?.message||"No foi possvel carregar as faturas."),v([])}finally{w(!1)}},F=async()=>{if(!n?.campaignId){g([]);return}C(!0);try{const $=await Ie.get("/billing-invoices/forecast",{params:{campaignId:n.campaignId}}),I=(Array.isArray($.data)?$.data:[]).map(B=>({...B,amount:Number(B.amount)}));g(I)}catch{g([])}finally{C(!1)}};m.useEffect(()=>{t&&n&&(M(),F())},[t,n?.id]);const O=n?.id?n.id.slice(-6):"",Z=()=>{n?.proposalId&&(s(!1),h(`/app/proposals?proposalId=${n.proposalId}`))},q=()=>{n?.campaignId&&(s(!1),h(`/app/campaigns?campaignId=${n.campaignId}`))};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsx(As,{className:"p-0 w-[96vw] max-w-5xl h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"px-6 py-5 border-b",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 pr-10",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Reserva ",O||""]}),n?.status&&e.jsx(j_,{status:n.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c||n?.mediaPointName||"Ponto de Mdia"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Valor estimado"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Sl(k)})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:r||n?.clientName||""})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Unidade"}),e.jsxs("p",{className:"text-sm text-gray-900 truncate",children:[o||n?.mediaUnitLabel||""," "," ",_===za.FACE?"Face":_===za.SCREEN?"Tela":""]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[To(n?.startDate)," - ",To(n?.endDate)]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden px-6 py-5",children:e.jsxs(Wi,{defaultValue:"resumo",className:"h-full",children:[e.jsxs(Gi,{className:"w-full md:w-fit",children:[e.jsxs(vs,{value:"resumo",className:"gap-2",children:[e.jsx(Nw,{className:"w-4 h-4"}),"Resumo"]}),e.jsxs(vs,{value:"origem",className:"gap-2",children:[e.jsx(Js,{className:"w-4 h-4"}),"Origem"]}),e.jsxs(vs,{value:"financeiro",className:"gap-2",children:[e.jsx(Cu,{className:"w-4 h-4"}),"Financeiro"]})]}),e.jsx(Ms,{value:"resumo",className:"flex-1 overflow-hidden",children:e.jsx(Ml,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Detalhes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Proposta"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.proposalTitle||(n?.proposalId?`...${n.proposalId.slice(-6)}`:"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.campaignName||(n?.campaignId?`...${n.campaignId.slice(-6)}`:"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Dias de ocupao"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.occupationDays??""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Aluguel (snapshot)"}),e.jsx("p",{className:"text-sm text-gray-900",children:Sl(n?.rentTotalSnapshot??null)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Custos iniciais (snapshot)"}),e.jsx("p",{className:"text-sm text-gray-900",children:Sl(n?.upfrontTotalSnapshot??null)})]})]})]}),e.jsx("div",{className:"rounded-lg bg-indigo-50 border border-indigo-100 p-4",children:e.jsx("p",{className:"text-sm text-indigo-900",children:"No novo fluxo, as reservas so geradas automaticamente no check-in da campanha e ficam disponveis aqui apenas para consulta."})})]})})}),e.jsx(Ms,{value:"origem",className:"flex-1 overflow-hidden",children:e.jsx(Ml,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Origem da reserva"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reservas so geradas automaticamente no check-in da campanha e ficam disponveis aqui apenas para consulta."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Proposta"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:n?.proposalTitle||""}),e.jsx("div",{className:"mt-2",children:e.jsx(K,{variant:"outline",size:"sm",onClick:Z,disabled:!n?.proposalId,children:"Ver Proposta"})})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:n?.campaignName||""}),e.jsx("div",{className:"mt-2",children:e.jsx(K,{variant:"outline",size:"sm",onClick:q,disabled:!n?.campaignId,children:"Ver Campanha"})})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Responsvel (proprietrio/empresa)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empresa"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.responsibleCompanyName||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nome"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.responsibleOwnerName||""})]})]})]})]})})}),e.jsx(Ms,{value:"financeiro",className:"flex-1 overflow-hidden",children:e.jsx(Ml,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Resumo financeiro"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Faturas vinculadas  campanha/proposta desta reserva."})]}),e.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{M(),F()},disabled:j||N,className:"gap-2",children:[e.jsx(a0,{className:"w-4 h-4"}),"Atualizar"]})]}),S&&e.jsx("p",{className:"text-sm text-red-600 mt-3",children:S}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-green-50 border border-green-100 p-3",children:[e.jsx("p",{className:"text-xs text-green-700",children:"Valor pago"}),e.jsx("p",{className:"text-lg font-semibold text-green-800",children:Sl(T.paid)})]}),e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-100 p-3",children:[e.jsx("p",{className:"text-xs text-yellow-800",children:"Em aberto"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-900",children:Sl(T.open)})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Faturas"}),j?e.jsx("p",{className:"text-sm text-gray-600",children:"Carregando faturas..."}):f.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nenhuma fatura encontrada para esta reserva."}):e.jsx("div",{className:"space-y-2",children:f.map($=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(cz,{status:$.status}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.type==="UPFRONT"?"Custos iniciais":$.type==="RENT"?`Aluguel ${$.sequence?`#${$.sequence}`:""}`:"Fatura"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Venc.: ",To($.dueDate),$.periodStart&&$.periodEnd?`  Perodo: ${To($.periodStart)} - ${To($.periodEnd)}`:""]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Sl(Number($.amount))})})]},$.id))})]}),n?.campaignId&&e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Faturas futuras (previso)"}),N?e.jsx("p",{className:"text-sm text-gray-600",children:"Carregando previso..."}):x.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Sem previso de faturas futuras."}):e.jsx("div",{className:"space-y-2",children:x.map($=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.type==="UPFRONT"?"Custos iniciais":$.type==="RENT"?`Aluguel ${$.sequence?`#${$.sequence}`:""}`:"Fatura"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Venc.: ",To($.dueDate),$.periodStart&&$.periodEnd?`  Perodo: ${To($.periodStart)} - ${To($.periodEnd)}`:""]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Sl(Number($.amount))})})]},$.id))})]})]})})})]})})]})})})}function NN(t,s){const n=new Date(t),r=new Date(s);n.setHours(0,0,0,0),r.setHours(0,0,0,0);const o=r.getTime()-n.getTime();return o<0?0:Math.floor(o/864e5)+1}function wN(t){const s=t.rentTotalSnapshot;if(typeof s=="number"&&Number.isFinite(s)&&s>0)return s;const n=t.rentAmount,r=t.occupationDays;if(typeof n=="number"&&Number.isFinite(n)&&n>0){const x=typeof r=="number"&&r>0?r:void 0,g=new Date(t.startDate),j=new Date(t.endDate),w=NN(g,j),N=x??(w||void 0);return N?n*N:n}const o=t.mediaUnitPriceDay,c=t.mediaPointBasePriceDay,u=typeof o=="number"&&Number.isFinite(o)&&o>0?o:typeof c=="number"&&Number.isFinite(c)&&c>0?c:void 0;if(typeof u!="number")return;const h=new Date(t.startDate),f=new Date(t.endDate),v=NN(h,f);if(v)return u*v}function uz(){const[t,s]=m.useState(new Date),[n,r]=m.useState(new Date),[o,c]=m.useState("ALL"),[u,h]=m.useState(""),[f,v]=m.useState(null),x=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],g=q=>{const $=q.getFullYear(),X=q.getMonth(),I=new Date($,X,1),te=new Date($,X+1,0).getDate(),ue=I.getDay();return{daysInMonth:te,startingDayOfWeek:ue}},{daysInMonth:j,startingDayOfWeek:w}=g(t),N=()=>{const q=new Date(t.getFullYear(),t.getMonth()-1);s(q),r(null)},C=()=>{const q=new Date(t.getFullYear(),t.getMonth()+1);s(q),r(null)},S=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),E=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString(),{reservations:_,loading:k,error:T}=iz({startDate:S,endDate:E,status:o==="ALL"?void 0:o}),M=m.useMemo(()=>{const q=new Set,$=t.getFullYear(),X=t.getMonth(),I=new Date($,X,1);I.setHours(0,0,0,0);const B=new Date($,X+1,0);B.setHours(0,0,0,0);for(const te of _){const ue=new Date(te.startDate),Y=new Date(te.endDate);if(Number.isNaN(ue.getTime())||Number.isNaN(Y.getTime())||(ue.setHours(0,0,0,0),Y.setHours(0,0,0,0),Y<I||ue>B))continue;const ce=ue<I?I:ue,U=Y>B?B:Y;for(let ne=new Date(ce);ne<=U;ne.setDate(ne.getDate()+1))ne.getMonth()===X&&ne.getFullYear()===$&&q.add(ne.getDate())}return q},[_,t]),F=m.useMemo(()=>{const q=_.filter(I=>I.status!==ba.CANCELADA).length,$=_.filter(I=>I.status===ba.CONFIRMADA).length,X=_.filter(I=>I.status!==ba.CANCELADA).reduce((I,B)=>I+(wN(B)??0),0);return{activeCount:q,confirmedCount:$,totalAmount:X}},[_]),O=m.useMemo(()=>{if(!n)return[];const q=new Date(n);q.setHours(0,0,0,0);const $=new Date(n);$.setHours(23,59,59,999);const X=_.filter(B=>{const te=new Date(B.startDate).getTime(),ue=new Date(B.endDate).getTime();return te<=$.getTime()&&ue>=q.getTime()});if(!u)return X;const I=u.toLowerCase();return X.filter(B=>[B.clientName,B.mediaPointName,B.mediaUnitLabel,B.campaignName,B.proposalTitle].filter(Boolean).join(" ").toLowerCase().includes(I))},[n,_,u]),Z=m.useMemo(()=>n?O.filter(q=>q.status!==ba.CANCELADA).length:0,[n,O]);return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Reservas"}),e.jsx("p",{className:"text-gray-600",children:"Visualize reservas por calendrio."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Reservas Ativas"}),e.jsx("p",{className:"text-gray-900",children:F.activeCount}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No ms selecionado"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Confirmadas no Perodo"}),e.jsx("p",{className:"text-gray-900",children:F.confirmedCount})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Dia Selecionado"}),e.jsx("p",{className:"text-gray-900",children:Z}),e.jsx("p",{className:"text-gray-500 text-sm",children:n?new Date(n).toLocaleDateString("pt-BR"):"Selecione um dia"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Valor Estimado do Ms"}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",F.totalAmount.toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Baseado no valor estimado das reservas"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[k&&e.jsx("div",{children:"Carregando reservas..."}),!k&&T&&e.jsx("div",{children:"Erro ao carregar reservas."}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:N,children:e.jsx(rd,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-gray-900",children:[x[t.getMonth()]," ",t.getFullYear()]}),e.jsx(K,{variant:"ghost",size:"sm",onClick:C,children:e.jsx(Hl,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(_t,{value:o,onValueChange:q=>c(q),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"ALL",children:"Todos os status"}),e.jsx(Oe,{value:ba.RESERVADA,children:"Em negociao"}),e.jsx(Oe,{value:ba.CONFIRMADA,children:"Confirmada"}),e.jsx(Oe,{value:ba.CANCELADA,children:"Cancelada"})]})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(q=>e.jsx("div",{className:"text-center text-gray-600 text-sm py-2",children:q},q)),Array.from({length:w}).map((q,$)=>e.jsx("div",{},`empty-${$}`)),Array.from({length:j}).map((q,$)=>{const X=$+1,I=new Date(t.getFullYear(),t.getMonth(),X),B=n&&n.getDate()===X&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear(),te=M.has(X);return e.jsxs("button",{onClick:()=>r(I),className:`aspect-square p-2 rounded-lg text-center transition-colors relative ${B?"bg-indigo-600 text-white":"hover:bg-gray-100 text-gray-900"}`,children:[X,te&&e.jsx("div",{className:`absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 rounded-full ${B?"bg-white":"bg-indigo-600"}`})]},X)})]})]})})}),e.jsx("div",{className:"space-y-4",children:e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-gray-900 mb-2",children:["Reservas do dia ",n?new Date(n).toLocaleDateString("pt-BR"):"-"]}),e.jsxs("div",{className:"relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ce,{placeholder:"Buscar ponto, cliente, proposta...",className:"pl-10",value:u,onChange:q=>h(q.target.value)})]})]}),e.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:O.length>0?O.map(q=>{const $=wN(q);return e.jsx(oz,{reservation:q,clientName:q.clientName??void 0,unitLabel:q.mediaUnitLabel??void 0,pointName:q.mediaPointName??void 0,amount:$,onClick:()=>v({...q,estimatedAmount:$})},q.id)}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:n?"Nenhuma reserva neste dia":"Selecione um dia no calendrio"})})})]})})})]}),e.jsx(dz,{open:!!f,onOpenChange:q=>!q&&v(null),reservation:f,clientName:f?.clientName??void 0,unitLabel:f?.mediaUnitLabel??void 0,pointName:f?.mediaPointName??void 0,amount:f?.estimatedAmount})]})}function _l(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function Sh(t){return{...t,dueDate:_l(t?.dueDate)??new Date,periodStart:_l(t?.periodStart)??void 0,periodEnd:_l(t?.periodEnd)??void 0,cancelledAt:_l(t?.cancelledAt),paidAt:_l(t?.paidAt),createdAt:_l(t?.createdAt)??new Date,updatedAt:_l(t?.updatedAt)??new Date}}function mz(t){const s={};return t.amountCents!==void 0&&(s.amountCents=t.amountCents),t.dueDate!==void 0&&(s.dueDate=t.dueDate),t.status!==void 0&&(s.status=t.status),t.paymentMethod!==void 0&&(s.paymentMethod=t.paymentMethod),t.gatewayInvoiceId!==void 0&&(s.gatewayInvoiceId=t.gatewayInvoiceId),t.generateNf!==void 0&&(s.generateNf=t.generateNf),s}function N_(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const N=(await Ie.get("/billing-invoices",{params:t})).data,S=(Array.isArray(N)?N:N.data).map(Sh),E=Array.isArray(N)?S.length:N.total??S.length;n(S),o(E)}catch(w){f(w)}finally{u(!1)}},x=async w=>{const N=await Ie.post("/billing-invoices",w),C=Sh(N.data);return n(S=>[...S,C]),C},g=async(w,N)=>{const C=await Ie.put(`/billing-invoices/${w}`,mz(N)),S=Sh(C.data);return n(E=>E.map(_=>_.id===w?S:_)),S},j=async w=>{const N=await Ie.patch(`/billing-invoices/${w}/mark-paid`),C=Sh(N.data);return n(S=>S.map(E=>E.id===w?C:E)),C};return m.useEffect(()=>{v()},[t.search,t.status,t.clientId,t.campaignId,t.proposalId,t.dueDateFrom,t.dueDateTo,t.orderBy,t.orderDirection]),{invoices:s,total:r,loading:c,error:h,refetch:v,createInvoice:x,updateInvoice:g,markAsPaid:j}}function hz(t){const s=t.match(/^(\d{4})-(\d{2})-(\d{2})/);if(s){const n=Number(s[1]),r=Number(s[2])-1,o=Number(s[3]);return new Date(n,r,o)}return new Date(t)}function pz(t){return typeof t=="string"?hz(t):t}function fz(t){if(!t)return"";const s=pz(t);if(isNaN(s.getTime()))return"";const n=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),o=String(s.getDate()).padStart(2,"0");return`${n}-${r}-${o}`}function w_(t){const[s,n,r]=t.split("-").map(Number);return new Date(s,n-1,r)}function xz({open:t,onOpenChange:s,invoice:n,onSave:r}){const[o,c]=m.useState({dueDate:"",amount:"",status:at.ABERTA,paymentMethod:void 0,gatewayInvoiceId:"",generateNf:!1});m.useEffect(()=>{c(n?{dueDate:fz(n.dueDate),amount:String(n.amount??(n.amountCents?n.amountCents/100:"")),status:n.status,paymentMethod:n.paymentMethod,gatewayInvoiceId:n.gatewayInvoiceId||"",generateNf:n.generateNf}:{dueDate:"",amount:"",status:at.ABERTA,paymentMethod:void 0,gatewayInvoiceId:"",generateNf:!1})},[n]);const u=()=>{if(!o.dueDate){alert("Data de vencimento  obrigatria");return}if(o.amount&&parseFloat(o.amount)<=0){alert("Valor deve ser maior que zero");return}const h={dueDate:o.dueDate?w_(o.dueDate):void 0,status:o.status,paymentMethod:o.paymentMethod,gatewayInvoiceId:o.gatewayInvoiceId||void 0,generateNf:o.generateNf};if(o.amount){const f=parseFloat(o.amount);h.amount=f,h.amountCents=Math.round(f*100)}o.status===at.PAGA&&(h.paidAt=new Date),r(h)};return n?e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{children:[e.jsx(Rs,{children:e.jsx(Os,{children:"Editar Cobrana (BillingInvoice)"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:n.client?.companyName||n.client?.contactName||"Cliente no identificado"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2 mb-1",children:"Valor"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"0,00",value:o.amount,onChange:h=>c({...o,amount:h.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Vencimento (dueDate) *"}),e.jsx(Ce,{type:"date",value:o.dueDate,onChange:h=>c({...o,dueDate:h.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Status *"}),e.jsxs(_t,{value:o.status,onValueChange:h=>c({...o,status:h}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:at.ABERTA,children:"Aberta"}),e.jsx(Oe,{value:at.PAGA,children:"Paga"}),e.jsx(Oe,{value:at.VENCIDA,children:"Vencida"}),e.jsx(Oe,{value:at.CANCELADA,children:"Cancelada"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Mtodo de Pagamento (paymentMethod) *"}),e.jsxs(_t,{value:o.paymentMethod,onValueChange:h=>c({...o,paymentMethod:h}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione um mtodo"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ws.PIX,children:"PIX"}),e.jsx(Oe,{value:ws.BOLETO,children:"Boleto"}),e.jsx(Oe,{value:ws.CARTAO,children:"Carto"}),e.jsx(Oe,{value:ws.TRANSFERENCIA,children:"Transferncia"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Gateway Invoice ID (opcional)"}),e.jsx(Ce,{placeholder:"ID do gateway de pagamento",value:o.gatewayInvoiceId,onChange:h=>c({...o,gatewayInvoiceId:h.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{checked:o.generateNf,onCheckedChange:h=>c({...o,generateNf:!!h})}),e.jsx(je,{className:"cursor-pointer",children:"Gerar NF (generateNf)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(K,{onClick:u,children:"Salvar Alteraes"})]})]})]})}):e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{children:[e.jsx(Rs,{children:e.jsx(Os,{children:"Nova Cobrana"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Vencimento (dueDate) *"}),e.jsx(Ce,{type:"date",value:o.dueDate,onChange:h=>c({...o,dueDate:h.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor (R$)"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"0,00",value:o.amount,onChange:h=>c({...o,amount:h.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Status *"}),e.jsxs(_t,{value:o.status,onValueChange:h=>c({...o,status:h}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:at.ABERTA,children:"Aberta"}),e.jsx(Oe,{value:at.PAGA,children:"Paga"}),e.jsx(Oe,{value:at.VENCIDA,children:"Vencida"}),e.jsx(Oe,{value:at.CANCELADA,children:"Cancelada"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Mtodo de Pagamento (paymentMethod)"}),e.jsxs(_t,{value:o.paymentMethod,onValueChange:h=>c({...o,paymentMethod:h}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione um mtodo"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ws.PIX,children:"PIX"}),e.jsx(Oe,{value:ws.BOLETO,children:"Boleto"}),e.jsx(Oe,{value:ws.CARTAO,children:"Carto"}),e.jsx(Oe,{value:ws.TRANSFERENCIA,children:"Transferncia"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Gateway Invoice ID (opcional)"}),e.jsx(Ce,{placeholder:"ID do gateway de pagamento",value:o.gatewayInvoiceId,onChange:h=>c({...o,gatewayInvoiceId:h.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{checked:o.generateNf,onCheckedChange:h=>c({...o,generateNf:!!h})}),e.jsx(je,{className:"cursor-pointer",children:"Gerar NF (generateNf)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(K,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(K,{onClick:u,children:"Salvar Alteraes"})]})]})]})})}function gz(){const{invoices:t,loading:s,error:n,refetch:r,updateInvoice:o,markAsPaid:c}=N_({}),[u,h]=m.useState(null),f=m.useMemo(()=>{const N=t.filter(_=>_.status===at.ABERTA||_.status===at.VENCIDA).reduce((_,k)=>_+$s(k.amount??(k.amountCents?k.amountCents/100:0),0),0),C=t.filter(_=>_.status===at.ABERTA).reduce((_,k)=>_+$s(k.amount??(k.amountCents?k.amountCents/100:0),0),0),S=t.filter(_=>_.status===at.PAGA).reduce((_,k)=>_+$s(k.amount??(k.amountCents?k.amountCents/100:0),0),0),E=t.filter(_=>_.status===at.VENCIDA).length;return{pendingAmount:N,openAmount:C,confirmedAmount:S,alertsCount:E}},[t]),v=async N=>{if(u)try{await o(u.id,N),ye.success("Cobrana atualizada com sucesso"),h(null),r()}catch{ye.error("Falha ao atualizar cobrana")}},x=N=>{switch(N){case at.PAGA:return"bg-green-100 text-green-800";case at.ABERTA:return"bg-yellow-100 text-yellow-800";case at.VENCIDA:return"bg-red-100 text-red-800";case at.CANCELADA:return"bg-gray-100 text-gray-800"}},g=N=>{switch(N){case at.PAGA:return"Paga";case at.ABERTA:return"Aberta";case at.VENCIDA:return"Vencida";case at.CANCELADA:return"Cancelada"}},j=N=>{if(!N)return"-";switch(N){case ws.PIX:return"PIX";case ws.BOLETO:return"Boleto";case ws.CARTAO:return"Carto";case ws.TRANSFERENCIA:return"Transferncia"}},w=async N=>{try{await c(N),ye.success("Cobrana marcada como paga"),r()}catch{ye.error("Falha ao marcar cobrana como paga")}};return e.jsxs("div",{className:"space-y-6",children:[s&&e.jsx("div",{children:"Carregando cobranas..."}),!s&&n&&e.jsx("div",{children:"Erro ao carregar cobranas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-50 text-yellow-600 p-2 rounded-lg",children:e.jsx(s0,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Pendentes de Cobrana"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.pendingAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-orange-50 text-orange-600 p-2 rounded-lg",children:e.jsx(vu,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cobranas em Aberto"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.openAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(Hh,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Receita Confirmada"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.confirmedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(vu,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Alertas"})]}),e.jsxs("p",{className:"text-gray-900",children:[f.alertsCount," cobranas"]})]})})]}),e.jsxs(Wi,{defaultValue:"open",className:"space-y-4",children:[e.jsxs(Gi,{children:[e.jsx(vs,{value:"open",children:"Abertas"}),e.jsx(vs,{value:"paid",children:"Pagas"}),e.jsx(vs,{value:"overdue",children:"Vencidas"}),e.jsx(vs,{value:"canceled",children:"Canceladas"})]}),e.jsx(Ms,{value:"open",children:e.jsx(Re,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta/Campanha"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"NF?"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(N=>N.status===at.ABERTA).map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:N.clientName||N.client?.companyName||N.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[N.proposalId&&e.jsxs("p",{className:"text-indigo-600",children:["Prop: ",N.proposalTitle||N.proposalId]}),N.campaignId&&e.jsxs("p",{className:"text-gray-600",children:["Camp: ",N.campaignName||N.campaignId]})]})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",$s(N.amount??(N.amountCents?N.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(N.dueDate).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j(N.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:N.generateNf?e.jsx(Ke,{className:"bg-blue-100 text-blue-800",children:"Sim"}):e.jsx(Ke,{variant:"outline",children:"No"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ke,{className:x(N.status),children:g(N.status)})}),e.jsxs("td",{className:"px-6 py-4 space-x-2",children:[e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>h(N),children:[e.jsx(Cu,{className:"w-4 h-4"}),"Editar"]}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>w(N.id),children:"Marcar como paga"})]})]},N.id))})]})})})}),e.jsx(Ms,{value:"paid",children:e.jsx(Re,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Data Pgto"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(N=>N.status===at.PAGA).map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:N.clientName||N.client?.companyName||N.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:N.proposalTitle||N.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",$s(N.amount??(N.amountCents?N.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:N.paidAt?new Date(N.paidAt).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j(N.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ke,{className:x(N.status),children:g(N.status)})})]},N.id))})]})})})}),e.jsx(Ms,{value:"overdue",children:e.jsx(Re,{children:t.filter(N=>N.status===at.VENCIDA).length===0?e.jsxs(Le,{className:"py-12 text-center",children:[e.jsx(vu,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma cobrana vencida"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(N=>N.status===at.VENCIDA).map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:N.clientName||N.client?.companyName||N.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:N.proposalTitle||N.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",$s(N.amount??(N.amountCents?N.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-red-600",children:new Date(N.dueDate).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ke,{className:x(N.status),children:g(N.status)})}),e.jsxs("td",{className:"px-6 py-4 space-x-2",children:[e.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>h(N),children:[e.jsx(Cu,{className:"w-4 h-4"}),"Editar"]}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>w(N.id),children:"Marcar como paga"})]})]},N.id))})]})})})}),e.jsx(Ms,{value:"canceled",children:e.jsx(Re,{children:t.filter(N=>N.status===at.CANCELADA).length===0?e.jsxs(Le,{className:"py-12 text-center",children:[e.jsx(Js,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma cobrana cancelada"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(N=>N.status===at.CANCELADA).map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:N.clientName||N.client?.companyName||N.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:N.proposalTitle||N.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",$s(N.amount??(N.amountCents?N.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ke,{className:x(N.status),children:g(N.status)})})]},N.id))})]})})})})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" BillingInvoice (Cobranas para Clientes)"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Cobranas criadas a partir de Propostas aprovadas. Campos: clientId, proposalId/campaignId, amount, dueDate, status, paymentMethod, generateNf. Status: ",e.jsx("strong",{children:"ABERTA"}),"  ",e.jsx("strong",{children:"PAGA"})," | ",e.jsx("strong",{children:"VENCIDA"})," | ",e.jsx("strong",{children:"CANCELADA"})]})]}),e.jsx(xz,{open:!!u,invoice:u,onOpenChange:N=>{N||h(null)},onSave:v})]})}function CN(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function dg(t){return{...t,createdAt:CN(t.createdAt)??new Date,updatedAt:CN(t.updatedAt)??new Date}}function SN(t){const s={};return t.name!==void 0&&(s.name=t.name),s}function C_(){const[t,s]=m.useState([]),[n,r]=m.useState(!0),[o,c]=m.useState(null),u=async()=>{try{r(!0),c(null);const x=await Ie.get("/transaction-categories"),g=Array.isArray(x.data)?x.data:x.data.data;s((g??[]).map(dg))}catch(x){c(x.response?.data?.message||"Erro ao carregar categorias")}finally{r(!1)}};return m.useEffect(()=>{u()},[]),{categories:t,loading:n,error:o,refetch:u,createCategory:async x=>{try{c(null);const g=await Ie.post("/transaction-categories",SN(x));return s(j=>[dg(g.data),...j]),g.data}catch(g){throw c(g.response?.data?.message||"Erro ao criar categoria"),g}},updateCategory:async(x,g)=>{try{c(null);const j=await Ie.put(`/transaction-categories/${x}`,SN(g));return s(w=>w.map(N=>N.id===x?dg(j.data):N)),j.data}catch(j){throw c(j.response?.data?.message||"Erro ao atualizar categoria"),j}},deleteCategory:async x=>{try{c(null),await Ie.delete(`/transaction-categories/${x}`),s(g=>g.filter(j=>j.id!==x))}catch(g){throw c(g.response?.data?.message||"Erro ao deletar categoria"),g}}}}function vz({open:t,onOpenChange:s,transaction:n,onSave:r}){const{categories:o,loading:c,error:u}=C_(),{mediaPoints:h}=pS({}),f=!!n,v=!!n?.isRecurringInstance,[x,g]=m.useState({flowType:Gt.RECEITA,date:new Date().toISOString().slice(0,10),isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:nn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),[j,w]=m.useState([]),N=m.useMemo(()=>new Set(j.map(T=>T.mediaPointId).filter(T=>T&&T!=="none")),[j]);m.useEffect(()=>{n?(g({flowType:n.flowType,date:new Date(n.date).toISOString().slice(0,10),isRecurring:!!n.isRecurring,recurringUntil:n.recurringUntil?String(n.recurringUntil).slice(0,10):"",dueDate:n.dueDate?String(n.dueDate).slice(0,10):"",amount:String(n.amount??""),description:n.description,partnerName:n.partnerName||"",categoryId:n.categoryId||"",tags:n.tags?.join(", ")||"",paymentType:n.paymentType||nn.A_VISTA,paymentMethod:n.paymentMethod,isPaid:n.isPaid,billingInvoiceId:n.billingInvoiceId||"",mediaPointId:n.mediaPointId||""}),n.mediaPointId?w([{key:"0",mediaPointId:n.mediaPointId,dueDate:n.dueDate?String(n.dueDate).slice(0,10):""}]):w([])):(g({flowType:Gt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:nn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),w([]))},[n]);const C=()=>{w(T=>[...T,{key:`${Date.now()}_${T.length}`,mediaPointId:"none",dueDate:""}])},S=T=>{w(M=>M.filter(F=>F.key!==T))},E=(T,M)=>{w(F=>F.map(O=>O.key!==T||M.mediaPointId&&M.mediaPointId!=="none"&&N.has(M.mediaPointId)&&M.mediaPointId!==O.mediaPointId?O:{...O,...M}))},_=()=>{if(!x.date){alert("Data  obrigatria");return}if(!x.amount||parseFloat(x.amount)<=0){alert("Valor deve ser maior que zero");return}if(!x.description.trim()){alert("Descrio  obrigatria");return}const T={date:w_(x.date),description:x.description,partnerName:x.partnerName||void 0,categoryId:x.categoryId||void 0,tags:x.tags?x.tags.split(",").map(M=>M.trim()).filter(Boolean):[],amount:parseFloat(x.amount),flowType:x.flowType,paymentType:x.paymentType,paymentMethod:x.paymentMethod,isPaid:x.isRecurring?!1:!!x.isPaid,billingInvoiceId:x.billingInvoiceId||void 0,isRecurring:x.isRecurring,recurringUntil:x.isRecurring&&x.recurringUntil?x.recurringUntil:void 0};if(v&&(delete T.date,delete T.isRecurring,delete T.recurringUntil),f)T.mediaPointId=x.mediaPointId&&x.mediaPointId!=="none"?x.mediaPointId:void 0,T.dueDate=x.dueDate?x.dueDate:void 0;else{const M=j.map(F=>({mediaPointId:F.mediaPointId,dueDate:F.dueDate})).filter(F=>F.mediaPointId&&F.mediaPointId!=="none");M.length===1?(T.mediaPointId=M[0].mediaPointId,T.dueDate=M[0].dueDate||void 0):M.length>1&&(T.mediaPoints=M.map(F=>({mediaPointId:F.mediaPointId,dueDate:F.dueDate||void 0})))}r(T),g({flowType:Gt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:nn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),w([])},k=()=>{s(!1),g({flowType:Gt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:nn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),w([])};return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-2xl !p-0 !gap-0 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 pt-6",children:e.jsxs(Rs,{children:[e.jsx(Os,{children:n?"Editar Transao":"Nova Transao (CashTransaction)"}),e.jsx(dr,{children:"Insira os detalhes da transao financeira."})]})}),e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo de Transao (flowType) *"}),e.jsxs(_t,{value:x.flowType,onValueChange:T=>g({...x,flowType:T}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:Gt.RECEITA,children:"Receita"}),e.jsx(Oe,{value:Gt.DESPESA,children:"Despesa"}),e.jsx(Oe,{value:Gt.PESSOAS,children:"Pessoas (Folha)"}),e.jsx(Oe,{value:Gt.IMPOSTO,children:"Imposto"}),e.jsx(Oe,{value:Gt.TRANSFERENCIA,children:"Transferncia"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data *"}),e.jsx(Ce,{type:"date",value:x.date,onChange:T=>g({...x,date:T.target.value}),disabled:v}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(qa,{checked:x.isRecurring,onCheckedChange:T=>{const M=!!T;g(F=>({...F,isRecurring:M,isPaid:M?!1:F.isPaid,recurringUntil:M?F.recurringUntil:""}))},disabled:v}),e.jsx(je,{className:"cursor-pointer",children:"Recorrente (mensal)"})]}),x.isRecurring&&!v&&e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsx(je,{children:"Recorrente at (opcional)"}),e.jsx(Ce,{type:"date",value:x.recurringUntil,onChange:T=>g({...x,recurringUntil:T.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se vazio, repete indefinidamente."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor (R$) *"}),e.jsx(Ce,{type:"number",step:"0.01",placeholder:"0,00",value:x.amount,onChange:T=>g({...x,amount:T.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Descrio *"}),e.jsx(Ce,{placeholder:"Ex: Pagamento de campanha",value:x.description,onChange:T=>g({...x,description:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Parceiro (partnerName)"}),e.jsx(Ce,{placeholder:"Nome do cliente ou fornecedor",value:x.partnerName,onChange:T=>g({...x,partnerName:T.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Categoria (categoryId)"}),e.jsxs(_t,{value:x.categoryId||void 0,onValueChange:T=>g({...x,categoryId:T}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[c&&e.jsx(Oe,{value:"__loading",disabled:!0,children:"Carregando categorias..."}),!c&&o.length===0&&e.jsx(Oe,{value:"__empty",disabled:!0,children:u?`Erro ao carregar: ${u}`:"Nenhuma categoria cadastrada"}),o.map(T=>e.jsx(Oe,{value:T.id,children:T.name},T.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tags (separadas por vrgula)"}),e.jsx(Ce,{placeholder:"Ex: campanha, maro, urgente",value:x.tags,onChange:T=>g({...x,tags:T.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo de Pagamento (paymentType)"}),e.jsxs(_t,{value:x.paymentType,onValueChange:T=>g({...x,paymentType:T}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:nn.A_VISTA,children:" vista"}),e.jsx(Oe,{value:nn.PARCELADO,children:"Parcelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Modo de Pagamento (paymentMethod)"}),e.jsxs(_t,{value:x.paymentMethod,onValueChange:T=>g({...x,paymentMethod:T}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ws.PIX,children:"PIX"}),e.jsx(Oe,{value:ws.BOLETO,children:"Boleto"}),e.jsx(Oe,{value:ws.CARTAO,children:"Carto"}),e.jsx(Oe,{value:ws.TRANSFERENCIA,children:"Transferncia"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{checked:x.isPaid,onCheckedChange:T=>g({...x,isPaid:!!T}),disabled:x.isRecurring||v}),e.jsx(je,{className:"cursor-pointer",children:"J foi pago (isPaid)"}),x.isRecurring&&e.jsx("span",{className:"text-xs text-gray-500",children:"(bloqueado para transaes recorrentes)"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-3",children:[e.jsx("p",{className:"text-sm text-blue-900",children:" Para despesas de pontos de mdia (energia, taxa DER, aluguel), vincule o ponto e defina o vencimento:"}),f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Ponto de Mdia (opcional)"}),e.jsxs(_t,{value:x.mediaPointId,onValueChange:T=>g({...x,mediaPointId:T}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o ponto"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"none",children:"Nenhum"}),h.map(T=>e.jsx(Oe,{value:T.id,children:T.name},T.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use para despesas como energia, taxa DER, aluguel de rea"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data de Vencimento (opcional)"}),e.jsx(Ce,{type:"date",value:x.dueDate,onChange:T=>g({...x,dueDate:T.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Data de vencimento da taxa/despesa"})]})]}),!v&&e.jsx("p",{className:"text-xs text-gray-500",children:"Para vincular mltiplos pontos, crie uma nova transao."})]}):e.jsxs("div",{className:"space-y-3",children:[j.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"Nenhum ponto de mdia vinculado."}):e.jsx("div",{className:"max-h-72 overflow-y-auto pr-2",children:e.jsx("div",{className:"space-y-3",children:j.map((T,M)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:M===0?"Ponto de Mdia (opcional)":"Ponto de Mdia"}),e.jsxs(_t,{value:T.mediaPointId,onValueChange:F=>E(T.key,{mediaPointId:F}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o ponto"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"none",children:"Nenhum"}),h.map(F=>e.jsx(Oe,{value:F.id,disabled:N.has(F.id)&&F.id!==T.mediaPointId,children:F.name},F.id))]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(je,{children:"Data de Vencimento (opcional)"}),e.jsx(Ce,{type:"date",value:T.dueDate,onChange:F=>E(T.key,{dueDate:F.target.value})})]}),e.jsx(K,{type:"button",variant:"outline",size:"icon",onClick:()=>S(T.key),title:"Remover ponto",children:e.jsx(Aa,{className:"w-4 h-4"})})]})]},T.key))})}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs(K,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:C,children:[e.jsx(Sn,{className:"w-4 h-4"}),"Adicionar ponto"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Voc pode vincular mltiplos pontos, cada um com seu vencimento."})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 px-6 pb-6 pt-4 border-t bg-background flex justify-end gap-3",children:[e.jsx(K,{variant:"outline",onClick:k,children:"Cancelar"}),e.jsx(K,{onClick:_,children:n?"Salvar Alteraes":"Salvar Transao"})]})]})})}function ug(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function _h(t){return{...t,date:ug(t?.date)??new Date,createdAt:ug(t?.createdAt)??new Date,updatedAt:ug(t?.updatedAt)??new Date}}function _N(t){const s={date:t.date,description:t.description,partnerName:t.partnerName,categoryId:t.categoryId,tags:t.tags,amount:t.amount,flowType:t.flowType,paymentType:t.paymentType,paymentMethod:t.paymentMethod,isPaid:t.isPaid,billingInvoiceId:t.billingInvoiceId,mediaPointId:t.mediaPointId,dueDate:t.dueDate,isRecurring:t.isRecurring,recurringUntil:t.recurringUntil};return t.mediaPoints&&(s.mediaPoints=t.mediaPoints),Object.keys(s).forEach(n=>{s[n]===void 0&&delete s[n]}),s}function S_(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const N=(await Ie.get("/cash-transactions",{params:t})).data,S=((Array.isArray(N)?N:N.data)??[]).map(_h);n(S),o(Array.isArray(N)?S.length:N.total??S.length)}catch(w){f(w)}finally{u(!1)}};return m.useEffect(()=>{v()},[t.search,t.flowType,t.categoryId,t.dateFrom,t.dateTo]),{transactions:s,total:r,loading:c,error:h,refetch:v,createTransaction:async w=>{const C=(await Ie.post("/cash-transactions",_N(w))).data;if(Array.isArray(C)){const E=C.map(_h);return n(_=>[...E,..._]),o(_=>_+E.length),E}const S=_h(C);return n(E=>[S,...E]),o(E=>E+1),S},updateTransaction:async(w,N)=>{const C=w.includes("__R__"),S=await Ie.put(`/cash-transactions/${w}`,_N(N)),E=_h(S.data);return C&&(E.id===w||E.isRecurringInstance)?(n(k=>k.map(T=>{if(T.id!==w)return T;const M=T.id,F=T.date;return{...T,...E,id:M,date:F,dueDate:E.dueDate??T.dueDate}})),E):(n(k=>k.map(T=>{if(!(T.seriesId&&E.seriesId&&T.seriesId===E.seriesId||T.id===w||T.id===E.id))return T;const F=T.id,O=T.date,Z=T.dueDate;return{...T,...E,id:F,date:O,dueDate:T.isRecurringInstance?Z:E.dueDate}})),E)},deleteTransaction:async w=>{await Ie.delete(`/cash-transactions/${w}`);const N=w.includes("__R__")?w.split("__R__")[0]:w;n(C=>C.filter(S=>S.id!==w&&S.id!==N)),o(C=>Math.max(0,C-1))}}}function yz(){const t=Q=>Q.toISOString().slice(0,10),s=Q=>{if(!Q)return"";const[z,se,G]=Q.split("-");return!z||!se||!G?Q:`${G}/${se}/${z}`},[n,r]=m.useState("month"),[o,c]=m.useState(()=>new Date().getMonth()),[u,h]=m.useState(()=>new Date().getFullYear()),[f,v]=m.useState(()=>{const Q=new Date;return Q.setMonth(Q.getMonth()-2),t(Q)}),[x,g]=m.useState(()=>t(new Date)),[j,w]=m.useState(!1),[N,C]=m.useState(null),{dateFrom:S,dateTo:E,periodLabel:_}=m.useMemo(()=>{if(n==="month"){const ee=new Date(u,o,1),V=new Date(u,o+1,0);return{dateFrom:t(ee),dateTo:t(V),periodLabel:null}}const Q=f||t(new Date),z=x||t(new Date),se=Q<=z?Q:z,G=Q<=z?z:Q;return{dateFrom:se,dateTo:G,periodLabel:`Perodo: ${s(se)} - ${s(G)}`}},[o,u,f,x,n]),{transactions:k,loading:T,error:M,refetch:F,createTransaction:O,updateTransaction:Z,deleteTransaction:q}=S_({dateFrom:S,dateTo:E}),{categories:$}=C_(),X=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],I=()=>{o===0?(c(11),h(u-1)):c(o-1)},B=()=>{o===11?(c(0),h(u+1)):c(o+1)},te=m.useMemo(()=>k,[k]),ue=m.useMemo(()=>{const Q=te.filter(ee=>ee.flowType===Gt.RECEITA).reduce((ee,V)=>ee+$s(V.amount,0),0),z=te.filter(ee=>ee.flowType===Gt.DESPESA||ee.flowType===Gt.PESSOAS||ee.flowType===Gt.IMPOSTO).reduce((ee,V)=>ee+$s(V.amount,0),0),se=te.filter(ee=>ee.flowType===Gt.TRANSFERENCIA).reduce((ee,V)=>ee+$s(V.amount,0),0),G=Q-z;return{receiptsTotal:Q,expensesTotal:z,transfersTotal:se,cashBalance:G}},[te]),Y=async Q=>{try{N?(await Z(N.id,Q),ye.success("Transao atualizada com sucesso"),C(null)):(await O(Q),ye.success("Transao criada com sucesso")),w(!1),F()}catch{ye.error("Falha ao salvar transao")}},ce=Q=>{switch(Q){case Gt.RECEITA:return"Receita";case Gt.DESPESA:return"Despesa";case Gt.TRANSFERENCIA:return"Transferncia";case Gt.IMPOSTO:return"Imposto";case Gt.PESSOAS:return"Pessoas"}},U=Q=>{if(!Q)return"-";switch(Q){case nn.A_VISTA:return" vista";case nn.PARCELADO:return"Parcelado"}},ne=Q=>{if(!Q)return"-";switch(Q){case ws.PIX:return"PIX";case ws.BOLETO:return"Boleto";case ws.CARTAO:return"Carto";case ws.TRANSFERENCIA:return"Transferncia"}};return e.jsxs("div",{className:"space-y-6",children:[T&&e.jsx("div",{children:"Carregando lanamentos..."}),!T&&M&&e.jsx("div",{children:"Erro ao carregar lanamentos."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{size:"sm",variant:n==="month"?"default":"outline",onClick:()=>r("month"),children:"Ms"}),e.jsx(K,{size:"sm",variant:n==="range"?"default":"outline",onClick:()=>r("range"),children:"Perodo"})]}),n==="month"?e.jsxs(e.Fragment,{children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:I,children:e.jsx(rd,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-gray-900",children:[X[o]," ",u]}),e.jsx(K,{variant:"ghost",size:"sm",onClick:B,children:e.jsx(Hl,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{type:"month",className:"w-[160px]",value:`${u}-${String(o+1).padStart(2,"0")}`,onChange:Q=>{const[z,se]=Q.target.value.split("-");if(!z||!se)return;const G=Number(z),ee=Number(se)-1;Number.isNaN(G)||Number.isNaN(ee)||(h(G),c(ee))}}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{const Q=new Date;h(Q.getFullYear()),c(Q.getMonth())},children:"Hoje"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-gray-900",children:_}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Ce,{type:"date",className:"w-[160px]",value:f,onChange:Q=>v(Q.target.value)}),e.jsx("span",{className:"text-gray-500 text-sm",children:"at"}),e.jsx(Ce,{type:"date",className:"w-[160px]",value:x,onChange:Q=>g(Q.target.value)}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{g(t(new Date))},children:"Hoje"})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:[{label:"3 meses",months:3},{label:"6 meses",months:6},{label:"1 ano",years:1},{label:"2 anos",years:2},{label:"5 anos",years:5},{label:"10 anos",years:10}].map(Q=>e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{const z=new Date,se=new Date(z);Q.months&&se.setMonth(se.getMonth()-Q.months),Q.years&&se.setFullYear(se.getFullYear()-Q.years),g(t(z)),v(t(se))},children:Q.label},Q.label))})]})]}),e.jsxs(K,{className:"gap-2",onClick:()=>{C(null),w(!0)},children:[e.jsx(Sn,{className:"w-4 h-4"}),"Nova Transao"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(r0,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Recebimentos"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",ue.receiptsTotal.toLocaleString("pt-BR")]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(Dw,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Despesas"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",ue.expensesTotal.toLocaleString("pt-BR")]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`${ue.cashBalance>=0?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"} p-2 rounded-lg`,children:e.jsx(Fu,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Saldo em Caixa"})]}),e.jsxs("p",{className:`${ue.cashBalance>=0?"text-gray-900":"text-red-600"}`,children:["R$ ",ue.cashBalance.toLocaleString("pt-BR")]})]})})]}),e.jsxs(Wi,{defaultValue:"receita",className:"space-y-4",children:[e.jsxs(Gi,{children:[e.jsx(vs,{value:"receita",children:"Receitas"}),e.jsx(vs,{value:"despesa",children:"Despesas"}),e.jsx(vs,{value:"pessoas",children:"Pessoas"}),e.jsx(vs,{value:"imposto",children:"Impostos"}),e.jsx(vs,{value:"transferencia",children:"Transferncias"})]}),[Gt.RECEITA,Gt.DESPESA,Gt.PESSOAS,Gt.IMPOSTO,Gt.TRANSFERENCIA].map(Q=>{const z=te.filter(se=>se.flowType===Q);return e.jsx(Ms,{value:Q.toLowerCase(),children:e.jsx(Re,{children:z.length===0?e.jsx(Le,{className:"py-12 text-center",children:e.jsxs("p",{className:"text-gray-500",children:["Nenhuma transao de ",ce(Q)," neste perodo"]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Parceiro"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Tags"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Modo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:z.map(se=>{const G=se.categoryId?$.find(ee=>ee.id===se.categoryId):void 0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(se.date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:se.description}),se.billingInvoiceId&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Invoice: ",se.billingInvoiceId]}),se.mediaPointId&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Ponto: ",se.mediaPointId]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:se.partnerName||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:G?.name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:se.tags.map(ee=>e.jsx(Ke,{variant:"outline",className:"text-xs",children:ee},ee))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:se.flowType===Gt.RECEITA?"text-green-600":"text-red-600",children:["R$"," ",$s(se.amount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:U(se.paymentType)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:ne(se.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ke,{className:se.isPaid?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:se.isPaid?"Pago":"Pendente"})}),e.jsxs("td",{className:"px-6 py-4 flex flex-wrap gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:async()=>{try{await Z(se.id,{isPaid:!se.isPaid}),ye.success(se.isPaid?"Transao marcada como pendente":"Transao marcada como paga"),F()}catch{ye.error("Falha ao atualizar status de pagamento")}},children:se.isPaid?"Desmarcar Pago":"Marcar Pago"}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{C(se),w(!0)},children:"Editar"}),e.jsx(K,{variant:"outline",size:"sm",onClick:async()=>{try{await q(se.id),ye.success("Transao excluda"),F()}catch{ye.error("Falha ao excluir transao")}},children:"Excluir"})]})]},se.id)})})]})})})},Q)})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" CashTransaction (Fluxo de Caixa)"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Lanamentos financeiros da empresa. Campos: date, description, partnerName, categoryId, tags, amount, flowType, paymentType, paymentMethod, isPaid, billingInvoiceId, mediaPointId. flowType: ",e.jsx("strong",{children:"RECEITA"})," | ",e.jsx("strong",{children:"DESPESA"})," | ",e.jsx("strong",{children:"TRANSFERENCIA"})," | ",e.jsx("strong",{children:"IMPOSTO"})," | ",e.jsx("strong",{children:"PESSOAS"})]})]}),e.jsx(vz,{open:j,onOpenChange:Q=>{Q||(w(!1),C(null))},transaction:N,onSave:Y})]})}function bz(t){const[s,n]=t.split("-").map(u=>parseInt(u,10)),r=new Date(s,n-1,1),o=new Date(s,n,0),c=u=>u.toISOString().slice(0,10);return{dateFrom:c(r),dateTo:c(o)}}function jz(){const t=new Date,[s,n]=m.useState(()=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`),{dateFrom:r,dateTo:o}=m.useMemo(()=>bz(s),[s]),{invoices:c,loading:u,error:h}=N_({dueDateFrom:r,dueDateTo:o}),{transactions:f,loading:v,error:x}=S_({dateFrom:r,dateTo:o}),g=m.useMemo(()=>{const E=k=>c.filter(T=>T.status===k).reduce((T,M)=>T+$s(M.amount,0),0);return{total:c.reduce((k,T)=>k+$s(T.amount,0),0),abertas:E(at.ABERTA),vencidas:E(at.VENCIDA),pagas:E(at.PAGA),canceladas:E(at.CANCELADA)}},[c]),j=m.useMemo(()=>{const E=M=>f.filter(F=>M.includes(F.flowType)).reduce((F,O)=>F+$s(O.amount,0),0),_=E([Gt.RECEITA]),k=E([Gt.DESPESA,Gt.IMPOSTO,Gt.PESSOAS]),T=E([Gt.TRANSFERENCIA]);return{receipts:_,expenses:k,transfers:T,net:_-k}},[f]),w=m.useMemo(()=>{const E=new Map;for(const _ of c){const k=_.clientName||_.client?.companyName||"Cliente no informado";E.set(k,(E.get(k)||0)+$s(_.amount,0))}return Array.from(E.entries()).sort((_,k)=>k[1]-_[1]).slice(0,5)},[c]),N=E=>E.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),C=u||v,S=h||x;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 text-lg",children:"Relatrios"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Resumo por ms (cobranas por vencimento + fluxo de caixa por data)."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ms:"}),e.jsx(Ce,{type:"month",value:s,onChange:E=>n(E.target.value),className:"w-[180px]"})]})]}),C&&e.jsx("div",{children:"Carregando relatrio..."}),!C&&S&&e.jsx("div",{className:"text-red-600",children:"Erro ao carregar relatrio."}),!C&&!S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(r0,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Receita no Caixa"})]}),e.jsx("p",{className:"text-gray-900",children:N(j.receipts)})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(Dw,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Despesas no Caixa"})]}),e.jsx("p",{className:"text-gray-900",children:N(j.expenses)})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-indigo-50 text-indigo-600 p-2 rounded-lg",children:e.jsx(Fu,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Saldo Lquido"})]}),e.jsx("p",{className:"text-gray-900",children:N(j.net)})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-50 text-yellow-600 p-2 rounded-lg",children:e.jsx(Js,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cobranas do Ms"})]}),e.jsx("p",{className:"text-gray-900",children:N(g.total)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Cobranas por Status"}),e.jsxs(Ke,{variant:"outline",children:[r,"  ",o]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Abertas"}),e.jsx("span",{className:"text-gray-900",children:N(g.abertas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vencidas"}),e.jsx("span",{className:"text-gray-900",children:N(g.vencidas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pagas"}),e.jsx("span",{className:"text-gray-900",children:N(g.pagas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Canceladas"}),e.jsx("span",{className:"text-gray-900",children:N(g.canceladas)})]})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Top Clientes (por Cobrana)"}),e.jsx(Ke,{variant:"outline",children:"Top 5"})]}),w.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nenhuma cobrana no perodo."}):e.jsx("div",{className:"space-y-2",children:w.map(([E,_])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 truncate pr-3",children:E}),e.jsx("span",{className:"text-gray-900 whitespace-nowrap",children:N(_)})]},E))})]})})]})]})]})}function Nz(){return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Financeiro"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie cobranas e fluxo de caixa"})]}),e.jsxs(Wi,{defaultValue:"charges",className:"space-y-6",children:[e.jsxs(Gi,{children:[e.jsx(vs,{value:"charges",children:"Cobranas"}),e.jsx(vs,{value:"cashflow",children:"Fluxo de Caixa"}),e.jsx(vs,{value:"reports",children:"Relatrios"})]}),e.jsx(Ms,{value:"charges",children:e.jsx(gz,{})}),e.jsx(Ms,{value:"cashflow",children:e.jsx(yz,{})}),e.jsx(Ms,{value:"reports",children:e.jsx(jz,{})})]})]})}function wz({conversations:t,selectedConversationId:s,searchQuery:n,onSearchChange:r,onSelectConversation:o}){const c=n.trim().toLowerCase(),u=t.filter(h=>c?h.clientName.toLowerCase().includes(c)||(h.proposalId||"").toLowerCase().includes(c)||(h.campaignId||"").toLowerCase().includes(c)||h.lastMessage.toLowerCase().includes(c):!0);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ce,{placeholder:"Buscar conversas...",value:n,onChange:h=>r(h.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:u.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 text-sm",children:n?"Nenhuma conversa encontrada":"Nenhuma conversa"})}):u.map(h=>e.jsxs("button",{onClick:()=>o(h),className:`w-full p-4 rounded-lg text-left transition-colors ${s===h.id?"bg-indigo-50 border border-indigo-200":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-gray-900",children:h.clientName}),h.unreadCount>0&&e.jsx(Ke,{className:"bg-indigo-600",children:h.unreadCount})]}),h.proposalId&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Proposta: ",h.proposalId]}),h.campaignId&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Campanha: ",h.campaignId]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:h.lastMessage}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.lastMessageAt.toLocaleString("pt-BR")})]},h.id))})]})}function Cz({messages:t}){const s=m.useRef(null);m.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[t]);const n=o=>{switch(o){case Io.EMAIL:return"";case Io.WHATSAPP:return"";case Io.SYSTEM:return""}},r=o=>{switch(o){case Io.EMAIL:return"Email";case Io.WHATSAPP:return"WhatsApp";case Io.SYSTEM:return"Sistema"}};return t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhuma mensagem ainda"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Envie a primeira mensagem para o cliente"})]})}):e.jsxs("div",{className:"space-y-4",children:[t.map(o=>e.jsx("div",{className:`flex ${o.direction===$i.OUT?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-4 ${o.direction===$i.OUT?"bg-indigo-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsxs("span",{className:`text-xs ${o.direction===$i.OUT?"opacity-75":"opacity-60"}`,children:[n(o.channel)," ",r(o.channel)]}),o.senderType===Vc.CLIENTE&&e.jsx(Ke,{variant:"outline",className:`text-xs ${o.direction===$i.OUT?"border-white/50 text-white":"border-gray-400 text-gray-700"}`,children:"Cliente"}),o.senderType===Vc.USER&&e.jsx(Ke,{variant:"outline",className:`text-xs ${o.direction===$i.OUT?"border-white/50 text-white":"border-gray-400 text-gray-700"}`,children:"Usurio"})]}),e.jsx("p",{className:"mb-2 whitespace-pre-wrap",children:o.contentText}),e.jsxs("div",{className:`flex items-center justify-between text-xs ${o.direction===$i.OUT?"opacity-75":"opacity-60"}`,children:[e.jsx("span",{children:o.senderName}),e.jsxs("span",{children:[new Date(o.createdAt).toLocaleDateString("pt-BR")," s"," ",new Date(o.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]})},o.id)),e.jsx("div",{ref:s})]})}function Sz({onSend:t,onAttach:s,disabled:n=!1}){const[r,o]=m.useState(""),c=m.useRef(null),u=()=>{const x=r.trim();x&&(t(x),o(""))},h=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),u())},f=()=>{c.current?.click()},v=x=>{const g=x.target.files;g&&g.length>0&&(s(g),x.target.value="")};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{ref:c,type:"file",multiple:!0,className:"hidden",onChange:v,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{placeholder:"Digite sua mensagem...",value:r,onChange:x=>o(x.target.value),onKeyDown:h,disabled:n}),e.jsx(K,{variant:"outline",size:"sm",onClick:f,disabled:n,title:"Anexar arquivo",children:e.jsx(y4,{className:"w-4 h-4"})}),e.jsxs(K,{size:"sm",className:"gap-2",onClick:u,disabled:n||!r.trim(),children:[e.jsx(Lu,{className:"w-4 h-4"}),"Enviar"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Canal: Email  WhatsApp (via integrao futura)"})]})}function AN(t){const s=t?.createdAt?new Date(t.createdAt):new Date,n=t?.updatedAt?new Date(t.updatedAt):s;return{...t,proposalId:t?.proposalId??void 0,campaignId:t?.campaignId??void 0,createdAt:s,updatedAt:n}}function PN(t,s){const n=new Map;for(const r of t)r?.id&&n.set(String(r.id),r);for(const r of s)r?.id&&n.set(String(r.id),r);return Array.from(n.values()).sort((r,o)=>{const c=new Date(r.createdAt).getTime(),u=new Date(o.createdAt).getTime();return c!==u?c-u:String(r.id).localeCompare(String(o.id))})}function _z(t={},s={}){const[n,r]=m.useState([]),[o,c]=m.useState(!1),[u,h]=m.useState(null),f=m.useRef(!1),v=m.useRef(!1),x=m.useRef([]);x.current=n;const g=s.enabled??!0,j=s.pollIntervalMs??(t.proposalId||t.campaignId?3e3:5e3),w=async C=>{try{if(f.current)return;f.current=!0,C?.silent||(c(!0),h(null));const E=(await Ie.get("/messages",{params:t})).data,_=Array.isArray(E)?E:E.data,k=(Array.isArray(_)?_:[]).map(AN);r(T=>PN(T,k)),v.current=!0}catch(S){(!C?.silent||!v.current||x.current.length===0)&&h(S)}finally{C?.silent||c(!1),f.current=!1}},N=async C=>{const S=await Ie.post("/messages",C);return r(E=>PN(E,[AN(S.data)])),S.data};return m.useEffect(()=>{w({silent:!1})},[t.proposalId,t.campaignId,t.channel]),m.useEffect(()=>{if(!g)return;const C=window.setInterval(()=>{typeof document<"u"&&document.visibilityState!=="visible"||w({silent:!0})},j);return()=>window.clearInterval(C)},[g,j,t.proposalId,t.campaignId,t.channel]),{messages:n,loading:o,error:u,refetch:w,sendMessage:N}}function Az(){const{user:t}=Vo(),{messages:s,loading:n,error:r,refetch:o,sendMessage:c}=_z({}),[u,h]=m.useState(""),[f,v]=m.useState(null),[x,g]=m.useState(null),[j,w]=m.useState(null),N=()=>{const T=new URLSearchParams(window.location.search),M=T.get("campaignId"),F=T.get("proposalId");return M?{type:"campaign",id:M}:F?{type:"proposal",id:F}:null};m.useEffect(()=>{const T=()=>g(N());return T(),window.addEventListener("app:navigation",T),window.addEventListener("popstate",T),()=>{window.removeEventListener("app:navigation",T),window.removeEventListener("popstate",T)}},[]),m.useEffect(()=>{(async()=>{if(!x){w(null);return}try{if(x.type==="proposal"){const F=(await Ie.get(`/proposals/${x.id}`)).data,O=F?.clientName||F?.client?.companyName||F?.client?.contactName||"Cliente",Z=F?.title||`Proposta ...${String(x.id).slice(-6)}`;w(`${O}  ${Z}`)}else{const F=(await Ie.get(`/campaigns/${x.id}`)).data,O=F?.clientName||F?.client?.companyName||F?.client?.contactName||"Cliente",Z=F?.name||`Campanha ...${String(x.id).slice(-6)}`;w(`${O}  ${Z}`)}}catch{w(null)}})()},[x?.type,x?.id]);const C=m.useMemo(()=>{const T=new Map,M=new Map;s.forEach(O=>{if(O.proposalId){const Z=T.get(O.proposalId)||[];T.set(O.proposalId,[...Z,O])}if(O.campaignId){const Z=M.get(O.campaignId)||[];M.set(O.campaignId,[...Z,O])}});const F=[];return T.forEach((O,Z)=>{const q=O.slice().sort((ue,Y)=>new Date(Y.createdAt).getTime()-new Date(ue.createdAt).getTime()),$=q[0],I=(new Date().getTime()-new Date($.createdAt).getTime())/(1e3*60*60),B=$.direction===$i.IN&&I<48?1:0,te=q.find(ue=>ue.senderType===Vc.CLIENTE)?.senderName||"Cliente";F.push({id:`proposal:${Z}`,type:"proposal",clientName:te,proposalId:Z,lastMessage:$.contentText,lastMessageAt:new Date($.createdAt),unreadCount:B})}),M.forEach((O,Z)=>{const q=O.slice().sort((I,B)=>new Date(B.createdAt).getTime()-new Date(I.createdAt).getTime()),$=q[0],X=q.find(I=>I.senderType===Vc.CLIENTE)?.senderName||"Cliente";F.push({id:`campaign:${Z}`,type:"campaign",clientName:X,campaignId:Z,lastMessage:$.contentText,lastMessageAt:new Date($.createdAt),unreadCount:0})}),x&&(F.some(Z=>x.type==="proposal"?Z.proposalId===x.id:Z.campaignId===x.id)||F.push({id:`${x.type}:${x.id}`,type:x.type,clientName:j||"Nova conversa",proposalId:x.type==="proposal"?x.id:void 0,campaignId:x.type==="campaign"?x.id:void 0,lastMessage:"Sem mensagens ainda",lastMessageAt:new Date,unreadCount:0})),F.sort((O,Z)=>Z.lastMessageAt.getTime()-O.lastMessageAt.getTime())},[s,x,j]);m.useEffect(()=>{if(!x)return;const T=C.find(M=>x.type==="proposal"?M.proposalId===x.id:M.campaignId===x.id);T&&v(T)},[x?.type,x?.id,C]),m.useEffect(()=>{x||!f&&C.length>0&&v(C[0])},[x,C,f]);const S=m.useMemo(()=>f?s.filter(M=>f.proposalId?M.proposalId===f.proposalId:f.campaignId?M.campaignId===f.campaignId:!1).sort((M,F)=>new Date(M.createdAt).getTime()-new Date(F.createdAt).getTime()):[],[s,f]),E=T=>{v({...T,unreadCount:0})},_=async T=>{if(!f){ye.error("Nenhuma conversa selecionada");return}try{await c({proposalId:f.proposalId,campaignId:f.campaignId,direction:$i.OUT,channel:Io.EMAIL,senderType:Vc.USER,senderName:t?.name||"Usurio",senderContact:t?.email||"",contentText:T}),ye.success("Mensagem enviada com sucesso!"),o()}catch{ye.error("Erro ao enviar mensagem")}},k=T=>{const M=T.length,F=Array.from(T).map(O=>O.name).join(", ");ye.info(`${M} arquivo(s) selecionado(s): ${F}. Upload real ser implementado na integrao com WhatsApp API / Email / Storage.`,{duration:5e3})};return e.jsxs("div",{className:"p-8 flex flex-col h-screen",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Mensagens"}),e.jsx("p",{className:"text-gray-600",children:"Central de conversas (Message) por Proposta/Campanha"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 min-h-0",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Re,{className:"h-full",children:e.jsx(Le,{className:"pt-6 h-full",children:e.jsx(wz,{conversations:C,selectedConversationId:f?.id||null,searchQuery:u,onSearchChange:T=>h(T),onSelectConversation:E})})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Re,{className:"h-full flex flex-col",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-gray-900",children:f.clientName}),f.proposalId&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Proposta: ...",f.proposalId.slice(-6)]}),f.campaignId&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Campanha: ...",f.campaignId.slice(-6)]})]}),e.jsx(Le,{className:"flex-1 overflow-y-auto p-6",children:e.jsx(Cz,{messages:S})}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx(Sz,{onSend:_,onAttach:k,disabled:n})})]}):e.jsx(Le,{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"Selecione uma conversa"})})})})]}),n&&e.jsx("div",{className:"mt-4 p-3 rounded bg-gray-50 text-gray-700",children:"Carregando mensagens..."}),!n&&r&&e.jsx("div",{className:"mt-4 p-3 rounded bg-red-50 text-red-700",children:"Erro ao carregar mensagens."}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Message (Mensagens)"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Campos: proposalId/campaignId, direction (IN/OUT), channel (EMAIL/WHATSAPP/SYSTEM), senderType (USER/CLIENTE), senderName, senderContact, contentText. Integraes futuras: WhatsApp API, chatbot, upload de anexos."})]})]})}async function Pz(){return(await Ie.get("/promotions/meta")).data}async function Ez(t){return(await Ie.get("/promotions",{params:t})).data}async function kz(t){return(await Ie.post("/promotions",t)).data}async function Tz(t,s){return(await Ie.put(`/promotions/${t}`,s)).data}async function Dz(t){return(await Ie.delete(`/promotions/${t}`)).data}function Iz(t){return t==null||!Number.isFinite(t)?"":t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Mz(t){const s=Number(t.discountValue??0);return t.discountType===ti.PERCENT?`-${s}%`:`-${Iz(s)}`}function EN(t){return new Date(`${t}T00:00:00.000Z`).toISOString()}function kN(t){return new Date(`${t}T23:59:59.999Z`).toISOString()}function TN(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const n=s.getUTCFullYear(),r=String(s.getUTCMonth()+1).padStart(2,"0"),o=String(s.getUTCDate()).padStart(2,"0");return`${n}-${r}-${o}`}function Rz(){const[t,s]=m.useState(!0),[n,r]=m.useState(null),[o,c]=m.useState([]),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState("POINT"),[j,w]=m.useState(""),[N,C]=m.useState([]),[S,E]=m.useState(ti.PERCENT),[_,k]=m.useState(""),[T,M]=m.useState(""),[F,O]=m.useState(""),[Z,q]=m.useState(!0),[$,X]=m.useState(!1),I=m.useMemo(()=>{const z=new Map;return n?.points?.forEach(se=>z.set(se.id,se)),z},[n]),B=j?I.get(j):null,te=m.useMemo(()=>{const z=new Map;for(const se of o){const G=se.mediaPoint?.name??"Sem ponto",ee=z.get(G)??[];ee.push(se),z.set(G,ee)}return Array.from(z.entries()).sort((se,G)=>se[0].localeCompare(G[0]))},[o]),ue=async()=>{s(!0);try{const[z,se]=await Promise.all([Pz(),Ez()]);r(z),c(se)}catch(z){console.error(z),ye.error(z?.response?.data?.message??z?.message??"Erro ao carregar promoes")}finally{s(!1)}};m.useEffect(()=>{ue()},[]);const Y=()=>{v(null),g("POINT"),w(""),C([]),E(ti.PERCENT),k(""),M(""),O(""),q(!0),X(!1)},ce=()=>{Y(),h(!0)},U=z=>{v(z),g(z.mediaUnitId?"UNIT":"POINT"),w(z.mediaPointId??z.mediaPoint?.id??""),C(z.mediaUnitId?[z.mediaUnitId]:[]),E(z.discountType),k(String(z.discountValue??"")),M(TN(z.startsAt)),O(TN(z.endsAt)),q(!!z.showInMediaKit),X(!!z.showInOutsideProposals),h(!0)},ne=async()=>{try{const z=Number(String(_).replace(",","."));if(!j){ye.error("Selecione um ponto");return}if(!Number.isFinite(z)||z<=0){ye.error("Informe um valor de desconto vlido");return}if(S===ti.PERCENT&&z>100){ye.error("Percentual deve ser <= 100");return}if(x==="UNIT"&&N.length===0){ye.error("Selecione ao menos 1 face");return}const se={scope:x,mediaPointId:j,mediaUnitIds:x==="UNIT"?N:void 0,discountType:S,discountValue:z,startsAt:T?EN(T):void 0,endsAt:F?kN(F):void 0,showInMediaKit:Z,showInOutsideProposals:$};if(f)await Tz(f.id,{discountType:S,discountValue:z,startsAt:T?EN(T):null,endsAt:F?kN(F):null,showInMediaKit:Z,showInOutsideProposals:$}),ye.success("Promoo atualizada");else{const G=await kz(se);ye.success(G.created.length>1?`Promoes criadas (${G.created.length})`:"Promoo criada")}h(!1),Y(),await ue()}catch(z){console.error(z),ye.error(z?.response?.data?.message??z?.message??"Erro ao salvar promoo")}},Q=async z=>{if(window.confirm("Excluir esta promoo?"))try{await Dz(z.id),ye.success("Promoo excluda"),await ue()}catch(G){console.error(G),ye.error(G?.response?.data?.message??G?.message??"Erro ao excluir promoo")}};return e.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Promoes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Crie descontos por ponto ou por face (face sobrescreve o ponto)."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{onClick:ue,variant:"outline",children:"Atualizar"}),e.jsxs(K,{onClick:ce,children:[e.jsx(Sn,{className:"w-4 h-4 mr-2"})," Nova promoo"]})]})]}),t?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."}):e.jsx("div",{className:"space-y-4",children:te.length===0?e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-sm text-gray-600",children:"Nenhuma promoo cadastrada."})}):te.map(([z,se])=>e.jsxs(Re,{className:"overflow-hidden",children:[e.jsx(ci,{className:"py-4",children:e.jsx(di,{className:"text-base",children:z})}),e.jsx(Le,{className:"pb-5",children:e.jsx("div",{className:"space-y-3",children:se.map(G=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 border rounded-lg p-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{variant:"secondary",children:G.mediaUnitId?`Face: ${G.mediaUnit?.label??G.mediaUnitId}`:"Ponto inteiro"}),e.jsx(Ke,{children:Mz(G)}),G.showInMediaKit&&e.jsx(Ke,{variant:"outline",children:"Mdia Kit"}),G.showInOutsideProposals&&e.jsx(Ke,{variant:"outline",children:"Propostas fora do MK"})]}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:G.startsAt||G.endsAt?e.jsxs(e.Fragment,{children:[G.startsAt?`De ${new Date(G.startsAt).toLocaleDateString("pt-BR")}`:"Sem incio",G.endsAt?` at ${new Date(G.endsAt).toLocaleDateString("pt-BR")}`:" (sem fim)"]}):"Sem perodo (sempre ativa)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"outline",size:"sm",onClick:()=>U(G),children:[e.jsx(gp,{className:"w-4 h-4 mr-2"})," Editar"]}),e.jsxs(K,{variant:"destructive",size:"sm",onClick:()=>Q(G),children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"})," Excluir"]})]})]},G.id))})})]},z))}),e.jsx(_s,{open:u,onOpenChange:z=>{h(z),z||Y()},children:e.jsxs(As,{className:"max-w-2xl",children:[e.jsx(Rs,{children:e.jsx(Os,{children:f?"Editar promoo":"Nova promoo"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Aplicar em"}),e.jsxs(_t,{value:x,onValueChange:z=>{g(z),C([])},disabled:!!f,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"POINT",children:"Ponto inteiro"}),e.jsx(Oe,{value:"UNIT",children:"Faces especficas"})]})]}),f&&e.jsx("p",{className:"text-xs text-gray-500",children:"(Alvo no pode ser alterado na edio)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Ponto"}),e.jsxs(_t,{value:j,onValueChange:z=>{w(z),C([])},disabled:!!f,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione um ponto"})}),e.jsx(Et,{children:(n?.points??[]).map(z=>e.jsxs(Oe,{value:z.id,children:[z.name," ",z.addressCity?` ${z.addressCity}/${z.addressState??""}`:""]},z.id))})]})]}),x==="UNIT"&&e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(je,{children:"Faces"}),e.jsx("div",{className:"border rounded-lg p-3 max-h-56 overflow-auto",children:B?.mediaUnits?.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:B.mediaUnits.map(z=>{const se=N.includes(z.id);return e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qa,{checked:se,onCheckedChange:G=>{const ee=!!G;C(V=>ee?Array.from(new Set([...V,z.id])):V.filter(re=>re!==z.id))},disabled:!!f}),e.jsx("span",{className:"truncate",children:z.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",z.unitType,")"]})]},z.id)})}):e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione um ponto para listar as faces."})}),f&&e.jsx("p",{className:"text-xs text-gray-500",children:"(Faces no podem ser alteradas na edio)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo de desconto"}),e.jsxs(_t,{value:S,onValueChange:z=>E(z),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(Oe,{value:ti.PERCENT,children:"Percentual (%)"}),e.jsx(Oe,{value:ti.FIXED,children:"Valor fixo (R$)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor"}),e.jsx(Ce,{value:_,onChange:z=>k(z.target.value),placeholder:S===ti.PERCENT?"Ex.: 10":"Ex.: 200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Incio (opcional)"}),e.jsx(Ce,{type:"date",value:T,onChange:z=>M(z.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Fim (opcional)"}),e.jsx(Ce,{type:"date",value:F,onChange:z=>O(z.target.value)})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qa,{checked:Z,onCheckedChange:z=>q(!!z)}),e.jsx("span",{children:"Aparecer como promoo no Mdia Kit"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qa,{checked:$,onCheckedChange:z=>X(!!z)}),e.jsx("span",{children:"Aparecer como promoo ao criar proposta fora do Mdia Kit"})]})]})]}),e.jsxs(B0,{children:[e.jsx(K,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(K,{onClick:ne,children:f?"Salvar":"Criar"})]})]})})]})}function Oz(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const g=(await Ie.get("/activity-logs",{params:t})).data,j=Array.isArray(g)?g:g.data,w=Array.isArray(g)?j.length:g.total??j.length;n(j),o(w)}catch(x){f(x)}finally{u(!1)}};return m.useEffect(()=>{v()},[t.resourceType,t.resourceId,t.userId,t.dateFrom,t.dateTo]),{logs:s,total:r,loading:c,error:h,refetch:v}}const __=t=>{const s=(t||"").trim();return!s||/\s/.test(s)||/[]/i.test(s)?s:s.replace(/_/g," ").toLowerCase().replace(/\b\w/g,r=>r.toUpperCase())},mg=t=>{const s=(t||"").trim(),n=s.toUpperCase(),o={CASH_TRANSACTION_CREATE:"Transao criada",CASH_TRANSACTION_UPDATE:"Transao atualizada",CASH_TRANSACTION_DELETE:"Transao excluda",BILLING_INVOICE_MARK_PAID:"Fatura marcada como paga",MEDIA_POINT_IMPORT:"Inventrio importado",MEDIA_POINT_CREATE:"Ponto de mdia criado",MEDIA_POINT_DELETE:"Ponto de mdia excludo",MEDIA_POINT_IMAGE_UPLOAD:"Imagem do ponto enviada",MEDIA_UNIT_CREATE:"Unidade criada",CLIENT_CREATE:"Cliente criado",CLIENT_DELETE:"Cliente excludo",CLIENT_DOCUMENT_UPLOAD:"Documento do cliente enviado",RESERVATION_CREATE:"Reserva criada",RESERVATION_CANCEL:"Reserva cancelada",RESERVATION_STATUS_UPDATE:"Status da reserva atualizado",CAMPAIGN_CREATE:"Campanha criada",PUBLIC_PROPOSAL_APPROVE:"Proposta aprovada (portal pblico)",PUBLIC_PROPOSAL_REJECT:"Proposta recusada (portal pblico)",PUBLIC_PROPOSAL_MESSAGE:"Mensagem recebida (portal pblico)"}[n]??__(s),c=n.startsWith("CASH_TRANSACTION")||n.startsWith("BILLING_INVOICE")||n.startsWith("FINANC")?"Financeiro":n.startsWith("MEDIA_")||n.startsWith("INVENT")||n.startsWith("MEDIA POINT")?"Inventrio":n.startsWith("CLIENT_")?"Clientes":n.startsWith("PROPOS")||n.startsWith("PUBLIC_PROPOSAL")||s.toLowerCase().includes("proposta")?"Propostas":n.startsWith("RESERVATION_")?"Reservas":n.startsWith("CAMPAIGN_")?"Campanhas":s.toLowerCase().includes("portal")?"Portal pblico":"Outros";return{label:o,group:c}},Lz=t=>({tags:"Tags",isPaid:"Pago",amount:"Valor",date:"Data",description:"Descrio",partnerName:"Parceiro",categoryId:"Categoria",paymentType:"Tipo de pagamento",paymentMethod:"Modo de pagamento",flowType:"Tipo de transao",mediaPointId:"Ponto de mdia"})[t]??__(t);function Fz(){const[t,s]=m.useState(""),[n,r]=m.useState("ALL"),[o,c]=m.useState("ALL"),{logs:u,loading:h,error:f}=Oz({}),v=m.useMemo(()=>[...u].sort((E,_)=>new Date(_.createdAt).getTime()-new Date(E.createdAt).getTime()),[u]),x=m.useMemo(()=>{const E=new Set;return u.forEach(_=>E.add(_.resourceType)),Array.from(E.values())},[u]),g=m.useMemo(()=>{const E=new Map;u.forEach(k=>{const T=mg(k.action);E.set(k.action,{value:k.action,label:T.label,group:T.group})});const _=new Intl.Collator("pt-BR",{sensitivity:"base"});return Array.from(E.values()).sort((k,T)=>{const M=_.compare(k.group,T.group);return M!==0?M:_.compare(k.label,T.label)})},[u]),j=m.useMemo(()=>{let E=[...v];if(n!=="ALL"&&(E=E.filter(_=>_.resourceType===n)),o!=="ALL"&&(E=E.filter(_=>_.action===o)),t.trim()){const _=t.toLowerCase();E=E.filter(k=>{const T=k.details?JSON.stringify(k.details).toLowerCase():"",M=mg(k.action).label.toLowerCase(),F=(k.resourceName??"").toLowerCase(),O=(k.userName??"").toLowerCase(),Z=(k.userEmail??"").toLowerCase();return k.action.toLowerCase().includes(_)||M.includes(_)||k.resourceType.toLowerCase().includes(_)||F.includes(_)||O.includes(_)||Z.includes(_)||T.includes(_)})}return E},[v,n,o,t]),w=E=>{switch(E){case ln.CLIENTE:return"bg-blue-100 text-blue-800";case ln.PROPOSTA:return"bg-purple-100 text-purple-800";case ln.CAMPANHA:return"bg-teal-100 text-teal-800";case ln.RESERVA:return"bg-cyan-100 text-cyan-800";case ln.MIDIA:return"bg-green-100 text-green-800";case ln.FINANCEIRO:return"bg-emerald-100 text-emerald-800";case ln.USUARIO:return"bg-orange-100 text-orange-800";case ln.ASSINATURA:return"bg-red-100 text-red-800";case ln.NF:return"bg-yellow-100 text-yellow-800";case ln.INTEGRACAO:return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},N=E=>{switch(E){case ln.CLIENTE:return"Cliente";case ln.PROPOSTA:return"Proposta";case ln.CAMPANHA:return"Campanha";case ln.RESERVA:return"Reserva";case ln.MIDIA:return"Mdia";case ln.FINANCEIRO:return"Financeiro";case ln.USUARIO:return"Usurio";case ln.ASSINATURA:return"Assinatura";case ln.NF:return"NF";case ln.INTEGRACAO:return"Integrao";default:return E}},C=E=>new Date(E).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),S=E=>{const _=E.details;if(!_)return null;if(typeof _=="string")return e.jsx("p",{className:"text-sm text-gray-700",children:_});const k=[];Array.isArray(_.changedFields)&&_.changedFields.length&&k.push(e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Campos alterados:"}),_.changedFields.map(M=>e.jsx(Ke,{className:"bg-gray-100 text-gray-800",children:Lz(M)},M))]},"changedFields"));const T=[{k:"message",label:"Mensagem"},{k:"filename",label:"Arquivo"},{k:"fileName",label:"Arquivo"},{k:"status",label:"Status"},{k:"count",label:"Quantidade"}];for(const M of T)_?.[M.k]!==void 0&&_?.[M.k]!==null&&!Array.isArray(_?.[M.k])&&typeof _?.[M.k]!="object"&&k.push(e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("span",{className:"font-medium",children:[M.label,":"]})," ",String(_[M.k])]},M.k));return k.length?e.jsx("div",{className:"space-y-2",children:k}):null};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Atividades"}),e.jsx("p",{className:"text-gray-600",children:"Histrico de aes realizadas no sistema"})]}),h&&e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Carregando atividades..."}),!h&&f&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:"Erro ao carregar atividades."}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Ce,{placeholder:"Buscar por nome, ao ou detalhes...",value:t,onChange:E=>s(E.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:E=>r(E),children:[e.jsxs(Pt,{className:"w-full md:w-48",children:[e.jsx(pp,{className:"h-4 w-4 mr-2"}),e.jsx(At,{placeholder:"Recurso"})]}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"ALL",children:"Todos os recursos"}),x.map(E=>e.jsx(Oe,{value:E,children:N(E)},E))]})]}),e.jsxs(_t,{value:o,onValueChange:E=>c(E),children:[e.jsxs(Pt,{className:"w-full md:w-48",children:[e.jsx(wu,{className:"h-4 w-4 mr-2"}),e.jsx(At,{placeholder:"Aes"})]}),e.jsxs(Et,{children:[e.jsx(Oe,{value:"ALL",children:"Todas as aes"}),e.jsx(vj,{}),(()=>{const E=new Map;return g.forEach(k=>{const T=E.get(k.group)??[];T.push(k),E.set(k.group,T)}),Array.from(E.entries()).flatMap(([k,T],M)=>{const F=[];return M>0&&F.push(e.jsx(vj,{},`${k}-sep`)),F.push(e.jsxs(RR,{children:[e.jsx(OR,{children:k}),T.map(O=>e.jsx(Oe,{value:O.value,children:O.label},O.value))]},k)),F})})()]})]})]})})}),e.jsx("div",{className:"space-y-4",children:j.length===0?e.jsx(Re,{children:e.jsx(Le,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma atividade encontrada com os filtros selecionados."})})}):j.map(E=>{const _=mg(E.action),k=S(E),T=(E.userName||E.userEmail||"").trim()||"Sistema";return e.jsx(Re,{className:"hover:shadow-md transition-shadow",children:e.jsx(Le,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ke,{className:w(E.resourceType),children:N(E.resourceType)}),e.jsx("div",{className:"flex flex-col",children:e.jsx("h3",{className:"text-gray-900",children:_.label})})]}),E.resourceName&&e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Referncia:"})," ",E.resourceName]}),k&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg mb-3",children:k}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Usurio: ",T]}),e.jsx("span",{children:""}),e.jsx("span",{children:C(E.createdAt)})]})]})})})},E.id)})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-1",children:" Auditoria"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Esta tela  somente leitura e mostra um histrico de aes realizadas no sistema. Use os filtros acima para encontrar rapidamente uma ao ou um recurso."})]})]})}function $z({company:t,onUpdateCompany:s,onRefreshCompany:n}){const[r,o]=m.useState(t.name),[c,u]=m.useState(t.cnpj||""),[h,f]=m.useState(t.phone||""),[v,x]=m.useState(t.email||""),[g,j]=m.useState(t.site||""),[w,N]=m.useState(t.addressZipcode||""),[C,S]=m.useState(t.addressStreet||""),[E,_]=m.useState(t.addressNumber||""),[k,T]=m.useState(t.addressDistrict||""),[M,F]=m.useState(t.addressCity||""),[O,Z]=m.useState(t.addressState||""),[q,$]=m.useState(t.addressCountry||"Brasil"),[X,I]=m.useState(t.defaultProposalNotes||""),[B,te]=m.useState(null),[ue,Y]=m.useState(null),[ce,U]=m.useState(!1),[ne,Q]=m.useState(!1),z=V=>{if(!V)return null;const re=String(V);if(/^data:/i.test(re)||/^https?:\/\//i.test(re))return re;const ae="https://api.onemediaap.com.br/api";if(!ae.startsWith("/")){const me=ae.replace(/\/?api\/?$/i,""),oe=re.startsWith("/")?re:`/${re}`;return`${me}${oe}`}return re};m.useEffect(()=>{o(t.name),u(t.cnpj||""),f(t.phone||""),x(t.email||""),j(t.site||""),N(t.addressZipcode||""),S(t.addressStreet||""),_(t.addressNumber||""),T(t.addressDistrict||""),F(t.addressCity||""),Z(t.addressState||""),$(t.addressCountry||"Brasil"),I(t.defaultProposalNotes||""),Y(z(t.logoUrl)??null)},[t.id,t.updatedAt]);const se=V=>{const re=V.target.files?.[0];if(re){if(!re.type.startsWith("image/")){ye.error("Por favor, selecione apenas arquivos de imagem.");return}const ae=5;if(re.size>ae*1024*1024){ye.error(`A imagem deve ter no mximo ${ae}MB.`);return}te(re);const me=new FileReader;me.onloadend=()=>{Y(me.result)},me.readAsDataURL(re),ye.info('Logo selecionada. Clique em "Salvar Alteraes" para enviar.')}},G=async V=>{const re=new FormData;return re.append("file",V),(await Ie.post("/company/logo",re,{headers:{"Content-Type":void 0}})).data?.logoUrl},ee=async()=>{if(!r.trim()){ye.error("Nome da empresa  obrigatrio");return}try{if(U(!0),B){Q(!0);const V=await G(B);V&&Y(z(V)),te(null),Q(!1),await n()}await s({name:r.trim(),cnpj:c.trim()||void 0,phone:h.trim()||void 0,email:v.trim()||void 0,site:g.trim()||void 0,addressZipcode:w.trim()||void 0,addressStreet:C.trim()||void 0,addressNumber:E.trim()||void 0,addressDistrict:k.trim()||void 0,addressCity:M.trim()||void 0,addressState:O.trim()||void 0,addressCountry:q.trim()||void 0,defaultProposalNotes:X.trim()||void 0}),ye.success("Dados da empresa atualizados")}catch(V){console.error(V),ye.error(V?.response?.data?.message||V?.message||"Erro ao salvar alteraes")}finally{Q(!1),U(!1)}};return e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Dados da Empresa (Company)"})}),e.jsxs(Le,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center overflow-hidden",children:ue?e.jsx("img",{src:ue,alt:"Logo",className:"w-full h-full object-cover"}):e.jsx(Wo,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",className:"hidden",onChange:se}),e.jsx(K,{variant:"outline",onClick:()=>document.getElementById("logo-upload")?.click(),disabled:ce||ne,children:"Alterar Logo (logoUrl)"}),B&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Arquivo: ",B.name]}),ne&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-2",children:[e.jsx(ra,{className:"w-4 h-4 animate-spin"}),"Enviando logo..."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyName",children:"Nome da Empresa (name) *"}),e.jsx(Ce,{id:"companyName",value:r,onChange:V=>o(V.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(Ce,{id:"cnpj",value:c,onChange:V=>u(V.target.value),placeholder:"12.345.678/0001-90"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyPhone",children:"Telefone (phone)"}),e.jsx(Ce,{id:"companyPhone",value:h,onChange:V=>f(V.target.value),placeholder:"(11) 3000-0000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyEmail",children:"Email"}),e.jsx(Ce,{id:"companyEmail",type:"email",value:v,onChange:V=>x(V.target.value),placeholder:"contato@empresa.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"site",children:"Website (site)"}),e.jsx(Ce,{id:"site",value:g,onChange:V=>j(V.target.value),placeholder:"https://www.empresa.com"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"zipcode",children:"CEP (addressZipcode)"}),e.jsx(Ce,{id:"zipcode",value:w,onChange:V=>N(V.target.value),placeholder:"01310-100"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"street",children:"Logradouro (addressStreet)"}),e.jsx(Ce,{id:"street",value:C,onChange:V=>S(V.target.value),placeholder:"Av. Paulista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"number",children:"Nmero (addressNumber)"}),e.jsx(Ce,{id:"number",value:E,onChange:V=>_(V.target.value),placeholder:"1000"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"district",children:"Bairro (addressDistrict)"}),e.jsx(Ce,{id:"district",value:k,onChange:V=>T(V.target.value),placeholder:"Bela Vista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"city",children:"Cidade (addressCity)"}),e.jsx(Ce,{id:"city",value:M,onChange:V=>F(V.target.value),placeholder:"So Paulo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"state",children:"Estado (addressState)"}),e.jsx(Ce,{id:"state",value:O,onChange:V=>Z(V.target.value),placeholder:"SP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"country",children:"Pas (addressCountry)"}),e.jsx(Ce,{id:"country",value:q,onChange:V=>$(V.target.value),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx(je,{htmlFor:"proposalNotes",children:"Observaes Padro para Propostas (defaultProposalNotes)"}),e.jsx(Wa,{id:"proposalNotes",rows:4,value:X,onChange:V=>I(V.target.value),placeholder:"Valores sujeitos a alterao sem aviso prvio. Validade da proposta: 15 dias."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Este texto ser exibido por padro em todas as novas propostas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(K,{onClick:ee,disabled:ce||ne,children:[(ce||ne)&&e.jsx(ra,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvar Alteraes"]})})]})]})}function zz({company:t,onUpdateCompany:s,onRefreshCompany:n}){const[r,o]=m.useState({type:"company"}),[c,u]=m.useState([]),[h,f]=m.useState(!1),[v,x]=m.useState(null),g=m.useMemo(()=>(c||[]).filter(C=>!C.isPrimary),[c]),j=m.useMemo(()=>r.type!=="ownerCompany"?null:g.find(C=>C.id===r.id)??null,[r,g]),w=async()=>{try{f(!0),x(null);const C=await Ie.get("/owner-companies");u(C.data??[])}catch(C){console.error(C),x(C?.response?.data?.message||C?.message||"Erro ao carregar empresas proprietrias")}finally{f(!1)}};m.useEffect(()=>{w()},[]);const N=m.useMemo(()=>r.type==="company"?"company":`owner:${r.id}`,[r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Empresa selecionada"})}),e.jsxs(Le,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto] gap-3 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Editar dados de"}),e.jsxs(_t,{value:N,onValueChange:C=>{if(C==="company"){o({type:"company"});return}if(C.startsWith("owner:")){const S=C.replace("owner:","");o({type:"ownerCompany",id:S})}},children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione uma empresa"})}),e.jsxs(Et,{children:[e.jsxs(Oe,{value:"company",children:[t.name," (Empresa principal)"]}),g.map(C=>e.jsx(Oe,{value:`owner:${C.id}`,children:C.name},C.id))]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(K,{variant:"outline",onClick:w,disabled:h,children:[h?e.jsx(ra,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Fl,{className:"w-4 h-4 mr-2"}),"Atualizar lista"]})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["As empresas proprietrias so cadastradas no mdulo ",e.jsx("b",{children:"Super Admin"}),". Aqui voc escolhe uma delas para editar."]}),v&&e.jsx("div",{className:"text-sm text-red-600",children:v})]})]}),r.type==="company"?e.jsx($z,{company:t,onUpdateCompany:s,onRefreshCompany:n}):e.jsx(Bz,{ownerCompany:j,onReload:w},r.id)]})}function Bz({ownerCompany:t,onReload:s}){const[n,r]=m.useState(t?.name??""),[o,c]=m.useState(t?.document??""),[u,h]=m.useState(t?.email??""),[f,v]=m.useState(t?.phone??""),[x,g]=m.useState(t?.site??""),[j,w]=m.useState(t?.addressZipcode??""),[N,C]=m.useState(t?.addressStreet??""),[S,E]=m.useState(t?.addressNumber??""),[_,k]=m.useState(t?.addressDistrict??""),[T,M]=m.useState(t?.addressCity??""),[F,O]=m.useState(t?.addressState??""),[Z,q]=m.useState(t?.addressCountry??"Brasil"),[$,X]=m.useState(t?.defaultProposalNotes??""),[I,B]=m.useState(null),[te,ue]=m.useState(null),[Y,ce]=m.useState(!1),[U,ne]=m.useState(!1),Q=V=>{if(!V)return null;const re=String(V);if(/^data:/i.test(re)||/^https?:\/\//i.test(re))return re;const ae="https://api.onemediaap.com.br/api";if(!ae.startsWith("/")){const me=ae.replace(/\/?api\/?$/i,""),oe=re.startsWith("/")?re:`/${re}`;return`${me}${oe}`}return re};m.useEffect(()=>{r(t?.name??""),c(t?.document??""),h(t?.email??""),v(t?.phone??""),g(t?.site??""),w(t?.addressZipcode??""),C(t?.addressStreet??""),E(t?.addressNumber??""),k(t?.addressDistrict??""),M(t?.addressCity??""),O(t?.addressState??""),q(t?.addressCountry??"Brasil"),X(t?.defaultProposalNotes??""),ue(Q(t?.logoUrl)??null)},[t?.id,t?.updatedAt]);const z=n.trim().length>=2,se=V=>{const re=V.target.files?.[0];if(!re)return;if(!re.type.startsWith("image/")){ye.error("Por favor, selecione apenas arquivos de imagem.");return}const ae=5;if(re.size>ae*1024*1024){ye.error(`A imagem deve ter no mximo ${ae}MB.`);return}B(re);const me=new FileReader;me.onloadend=()=>ue(me.result),me.readAsDataURL(re),ye.info('Logo selecionada. Clique em "Salvar Alteraes" para enviar.')},G=async V=>{if(!t)return null;const re=new FormData;return re.append("file",V),(await Ie.post(`/owner-companies/${t.id}/logo`,re,{headers:{"Content-Type":void 0}})).data?.logoUrl??null},ee=async()=>{if(t){if(!z){ye.error("Nome da empresa  obrigatrio");return}try{if(ce(!0),I){ne(!0);const V=await G(I);V&&ue(Q(V)),B(null),ne(!1),await s()}await Ie.put(`/owner-companies/${t.id}`,{name:n.trim(),document:o.trim()||void 0,email:u.trim()||void 0,phone:f.trim()||void 0,site:x.trim()||void 0,addressZipcode:j.trim()||void 0,addressStreet:N.trim()||void 0,addressNumber:S.trim()||void 0,addressDistrict:_.trim()||void 0,addressCity:T.trim()||void 0,addressState:F.trim()||void 0,addressCountry:Z.trim()||void 0,defaultProposalNotes:$.trim()||void 0}),ye.success("Empresa proprietria atualizada"),await s()}catch(V){console.error(V),ye.error(V?.response?.data?.message||V?.message||"Erro ao salvar alteraes")}finally{ne(!1),ce(!1)}}};return t?e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Dados da Empresa Proprietria"})}),e.jsxs(Le,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center overflow-hidden",children:te?e.jsx("img",{src:te,alt:"Logo",className:"w-full h-full object-cover"}):e.jsx(Wo,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:`owner-logo-upload-${t.id}`,accept:"image/*",className:"hidden",onChange:se}),e.jsx(K,{variant:"outline",onClick:()=>globalThis.document?.getElementById(`owner-logo-upload-${t.id}`)?.click(),disabled:Y||U,children:"Alterar Logo (logoUrl)"}),I&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Arquivo: ",I.name]}),U&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-2",children:[e.jsx(ra,{className:"w-4 h-4 animate-spin"}),"Enviando logo..."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome da Empresa (name) *"}),e.jsx(Ce,{value:n,onChange:V=>r(V.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Documento (document)"}),e.jsx(Ce,{value:o,onChange:V=>c(V.target.value),placeholder:"CNPJ/CPF"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Telefone (phone)"}),e.jsx(Ce,{value:f,onChange:V=>v(V.target.value),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"E-mail"}),e.jsx(Ce,{value:u,onChange:V=>h(V.target.value),placeholder:"contato@empresa.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Website (site)"}),e.jsx(Ce,{value:x,onChange:V=>g(V.target.value),placeholder:"https://empresa.com"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-4",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"CEP (addressZipcode)"}),e.jsx(Ce,{value:j,onChange:V=>w(V.target.value),placeholder:"00000-000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Logradouro (addressStreet)"}),e.jsx(Ce,{value:N,onChange:V=>C(V.target.value),placeholder:"Rua / Avenida"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nmero (addressNumber)"}),e.jsx(Ce,{value:S,onChange:V=>E(V.target.value),placeholder:"123"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Bairro (addressDistrict)"}),e.jsx(Ce,{value:_,onChange:V=>k(V.target.value),placeholder:"Centro"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Cidade (addressCity)"}),e.jsx(Ce,{value:T,onChange:V=>M(V.target.value),placeholder:"Cidade"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Estado (addressState)"}),e.jsx(Ce,{value:F,onChange:V=>O(V.target.value),placeholder:"UF"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Pas (addressCountry)"}),e.jsx(Ce,{value:Z,onChange:V=>q(V.target.value),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-4",children:"Observaes Padro para Propostas (defaultProposalNotes)"}),e.jsx(Wa,{value:$,onChange:V=>X(V.target.value),placeholder:"Texto padro para novas propostas",rows:4}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Este texto ser exibido por padro em todas as novas propostas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(K,{onClick:ee,disabled:!z||Y,children:[Y&&e.jsx(ra,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvar Alteraes"]})})]})]}):e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-gray-500",children:"Empresa proprietria no encontrada."})})}function Uz(t,s=!1){return(s?t/100:t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function DN(t){switch(t){case cr.TESTE:return"Teste";case cr.ATIVA:return"Ativa";case cr.EM_ATRASO:return"Em atraso";case cr.CANCELADA:return"Cancelada";default:return String(t)}}function Vz({company:t,subscription:s,plans:n,plansLoading:r,pointsUsed:o,onUpdateSubscription:c}){const u=m.useMemo(()=>n.find($=>$.id===s.planId)||null,[n,s.planId]),[h,f]=m.useState(s.planId),[v,x]=m.useState(s.maxOwnersPerMediaPoint||1),[g,j]=m.useState(!1),w=m.useMemo(()=>n.find($=>$.id===h)||null,[n,h]),N=w?.maxPoints??null,C=N==null?"Ilimitado":String(N),S=N==null?0:Math.min(100,Math.round(o/N*100)),E=h!==s.planId||v!==s.maxOwnersPerMediaPoint,_=N==null?!0:o<=N,k=w?.monthlyPrice??0,T=k>=1e4,M=T?$w(v):LT(v),F=k+M,O=async()=>{if(!w){alert("Selecione um plano vlido.");return}if(!_){alert(`Voc possui ${o} pontos cadastrados. Para escolher este plano (${C}), exclua pontos ou selecione um plano maior.`);return}try{j(!0),await c({planId:h,maxOwnersPerMediaPoint:v}),alert("Assinatura atualizada com sucesso.")}catch($){alert($?.response?.data?.message||"Erro ao atualizar assinatura.")}finally{j(!1)}},Z=s.status,q=Z===cr.ATIVA||Z===cr.TESTE;return e.jsx("div",{className:"space-y-6",children:e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsxs(di,{className:"flex items-center gap-2",children:[e.jsx(gk,{className:"w-5 h-5"}),"Plano e Limites"]})}),e.jsxs(Le,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:q?e.jsxs(Ke,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:[e.jsx(Ui,{className:"w-3 h-3 mr-1"}),DN(Z)]}):e.jsxs(Ke,{variant:"destructive",children:[e.jsx(vu,{className:"w-3 h-3 mr-1"}),DN(Z)]})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Plano atual"}),e.jsx("div",{className:"font-medium",children:u?.name||""})]})]}),e.jsx(Re,{className:"border-gray-200",children:e.jsxs(Le,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nw,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Uso de pontos (limite por conta)"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[o," / ",C]})]}),N!=null&&e.jsx(g_,{value:S}),e.jsxs("div",{className:"text-xs text-gray-500",children:["O limite de pontos  sempre da ",e.jsx("b",{children:"conta"}),", independentemente da quantidade de proprietrios."]})]})}),e.jsx(Re,{className:"border-gray-200",children:e.jsxs(Le,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Selecione seu plano de pontos"}),e.jsxs(_t,{value:h,onValueChange:f,children:[e.jsx(Pt,{disabled:!!r,children:e.jsx(At,{placeholder:r?"Carregando planos...":"Selecione um plano"})}),e.jsx(Et,{children:n.map($=>{const X=$.maxPoints==null?$.name:`${$.name} (${$.minPoints??0}-${$.maxPoints} pontos)`;return e.jsx(Oe,{value:$.id,children:X},$.id)})})]}),!_&&e.jsxs("div",{className:"text-xs text-red-600",children:["Este plano  menor que a quantidade de pontos j cadastrados (",o,")."]})]})}),e.jsx(Re,{className:"border-gray-200",children:e.jsxs(Le,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Assinatura multi-proprietrios (limite por ponto)"}),e.jsxs(_t,{value:String(v),onValueChange:$=>x(parseInt($,10)),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsx(Et,{children:[1,2,3,4].map($=>e.jsx(Oe,{value:String($),children:FT($)},$))})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Esse limite  aplicado em cada ponto de mdia (ex.: 2 proprietrios por ponto).",e.jsx("br",{}),"Voc pode cadastrar empresas proprietrias ilimitadas no Super Admin."]})]})}),e.jsx(Re,{className:"border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"p-4 text-sm text-amber-900",children:[e.jsx("b",{children:"Pagamento ainda no integrado."})," Este fluxo j est preparado para integrao futura: ao salvar, o backend valida downgrade (pontos e proprietrios por ponto) e persiste o plano.",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"(TODO: integrar gateway e prorrateio)"})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap pt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total mensal (estimado)"}),e.jsx("div",{className:"text-lg font-semibold",children:Uz(F,T)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Plano de pontos + assinatura multi-proprietrios."})]}),e.jsx(K,{onClick:O,disabled:!E||g||!!r,children:g?e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Atualizar assinatura"})]})]})]})})}function Hz(){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:"Perfil do usurio"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Em breve: configuraes de perfil (senha, 2FA, preferncias) sero disponibilizadas aqui."})]})}function qz(){const[t,s]=m.useState([]),[n,r]=m.useState(!1),[o,c]=m.useState(null),u=async()=>{try{r(!0),c(null);const f=(await Ie.get("/platform-plans")).data,v=Array.isArray(f)?f:f.data;s(v)}catch(h){c(h)}finally{r(!1)}};return m.useEffect(()=>{u()},[]),{plans:t,loading:n,error:o,refetch:u}}const Wz=()=>{if(typeof window>"u")return"company";const t=new URLSearchParams(window.location.search).get("tab");return t==="subscription"||t==="company"||t==="profile"?t:"company"};function Gz(){const{company:t,subscription:s,pointsUsed:n,updateCompanyData:r,updateSubscriptionData:o,refreshCompanyData:c,isLoading:u}=Ho(),{plans:h,loading:f,error:v}=qz(),[x,g]=m.useState(Wz),j=typeof window>"u"?"":window.location.search;return m.useEffect(()=>{const w=new URLSearchParams(j).get("tab");(w==="subscription"||w==="company"||w==="profile")&&g(w)},[j]),u?e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-gray-500",children:"Carregando configuraes..."})}):!t||!s?e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-gray-500",children:"No foi possvel carregar os dados da empresa."})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Configuraes"})}),e.jsx(Le,{children:e.jsxs(Wi,{value:x,onValueChange:g,children:[e.jsxs(Gi,{className:"grid w-full grid-cols-3",children:[e.jsx(vs,{value:"company",children:"Empresa"}),e.jsx(vs,{value:"subscription",children:"Assinatura"}),e.jsx(vs,{value:"profile",children:"Perfil"})]}),e.jsx(Ms,{value:"company",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsx(zz,{company:t,onUpdateCompany:r,onRefreshCompany:c})})}),e.jsxs(Ms,{value:"subscription",className:"mt-6",children:[v&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:String(v)}),e.jsx(Vz,{company:t,subscription:s,plans:h,plansLoading:f,pointsUsed:n,onUpdateSubscription:async w=>{await o(w)}})]}),e.jsx(Ms,{value:"profile",className:"mt-6",children:e.jsx(Hz,{})})]})})]})})}function Zz(){const{user:t}=Vo(),{ownerCompanies:s,loading:n,error:r,refetch:o,createOwnerCompany:c,updateOwnerCompany:u,deleteOwnerCompany:h}=kS(!0),[f,v]=m.useState(""),[x,g]=m.useState(!1),[j,w]=m.useState(null),N=!!t?.isSuperAdmin,[C,S]=m.useState("0"),[E,_]=m.useState(!1),[k,T]=m.useState(!1),M=async()=>{_(!0);try{const Z=await Ie.get("/company"),q=Number(Z?.data?.agencyMarkupPercent??0);S(String(Number.isFinite(q)?q:0))}catch{}finally{_(!1)}},F=async()=>{if(!N){ye.error("Apenas SuperAdmin pode alterar o markup.");return}const Z=Math.max(0,Math.min(500,Number(C)||0));T(!0);try{await Ie.put("/company",{agencyMarkupPercent:Z}),S(String(Z)),ye.success("Markup atualizado",{description:`Agncia +${Z}%`})}catch(q){ye.error("No foi possvel salvar",{description:q?.response?.data?.message||q?.message})}finally{T(!1)}};m.useEffect(()=>{M()},[]);const O=m.useMemo(()=>{const Z=f.trim().toLowerCase();return Z?s.filter(q=>q.name.toLowerCase().includes(Z)||(q.document??"").toLowerCase().includes(Z)||(q.email??"").toLowerCase().includes(Z)||(q.phone??"").toLowerCase().includes(Z)):s},[s,f]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Cardpio pblico  Markup Sou Agncia"})}),e.jsxs(Le,{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Configure o percentual aplicado nos preos quando o cliente abrir o cardpio com ",e.jsx("b",{children:"flow=agency"}),".",e.jsx("br",{}),e.jsx("b",{children:"0%"})," desativa o markup."]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Percentual (%)"}),e.jsx(Ce,{type:"number",min:0,max:500,step:1,value:C,disabled:!N||E||k,onChange:Z=>S(Z.target.value),className:"w-full md:w-64"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{onClick:F,disabled:!N||E||k,children:k?"Salvando...":"Salvar"}),e.jsxs(K,{variant:"outline",onClick:M,disabled:E||k,title:"Recarregar valor atual",children:[e.jsx(Fl,{className:"w-4 h-4 mr-2"}),"Recarregar"]}),!N&&e.jsx("span",{className:"text-xs text-gray-500",children:"Sem permisso"})]})]})]})]}),e.jsxs(Re,{children:[e.jsx(ci,{children:e.jsx(di,{children:"Super Admin (Interno)  Empresas Proprietrias"})}),e.jsxs(Le,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Aqui voc cadastra empresas proprietrias que podero ser vinculadas aos pontos do inventrio.",e.jsx("br",{}),e.jsx("b",{children:"No h limite"})," de empresas proprietrias na conta. O limite da assinatura multi-proprietrios  apenas a ",e.jsx("b",{children:"quantidade de proprietrios por ponto"}),"."]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Ce,{placeholder:"Buscar por nome, documento, e-mail ou telefone",value:f,onChange:Z=>v(Z.target.value),className:"max-w-md"}),e.jsxs(K,{variant:"outline",onClick:o,disabled:n,children:[e.jsx(Fl,{className:"w-4 h-4 mr-2"}),"Atualizar"]}),e.jsxs(K,{onClick:()=>{w(null),g(!0)},children:[e.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Nova empresa"]})]}),r&&e.jsx("div",{className:"text-sm text-red-600",children:String(r)}),n&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."}),!n&&O.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma empresa encontrada."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.map(Z=>e.jsx(Re,{className:Z.isPrimary?"border-blue-200 bg-blue-50/40":"",children:e.jsx(Le,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Z.name}),Z.isPrimary&&e.jsx(Ke,{variant:"secondary",children:"Empresa prpria"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-x-4 gap-y-1",children:[Z.document&&e.jsxs("span",{children:["Doc: ",Z.document]}),Z.email&&e.jsxs("span",{children:["E-mail: ",Z.email]}),Z.phone&&e.jsxs("span",{children:["Tel: ",Z.phone]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:()=>{w(Z),g(!0)},disabled:Z.isPrimary,title:Z.isPrimary?"Edite a empresa principal em Configuraes > Empresa":"Editar",children:e.jsx(gp,{className:"w-4 h-4"})}),e.jsx(K,{variant:"outline",size:"sm",onClick:async()=>{if(!Z.isPrimary&&confirm(`Excluir a empresa "${Z.name}"?`))try{await h(Z.id)}catch(q){alert(q?.response?.data?.message||"Erro ao excluir.")}},disabled:Z.isPrimary,title:Z.isPrimary?"A empresa principal no pode ser excluda":"Excluir",children:e.jsx(Aa,{className:"w-4 h-4"})})]})]})})},Z.id))})]})]}),e.jsx(Kz,{open:x,onOpenChange:Z=>g(Z),editing:j,onSubmit:async Z=>{try{j?await u(j.id,Z):await c(Z),g(!1),w(null)}catch(q){alert(q?.response?.data?.message||"Erro ao salvar.")}}})]})}function Kz({open:t,onOpenChange:s,editing:n,onSubmit:r}){const[o,c]=m.useState(n?.name??""),[u,h]=m.useState(n?.document??""),[f,v]=m.useState(n?.email??""),[x,g]=m.useState(n?.phone??"");m.useEffect(()=>{t&&(c(n?.name??""),h(n?.document??""),v(n?.email??""),g(n?.phone??""))},[t,n]);const j=o.trim().length>=2;return e.jsx(_s,{open:t,onOpenChange:s,children:e.jsxs(As,{className:"max-w-lg",children:[e.jsx(Rs,{children:e.jsx(Os,{children:n?"Editar empresa proprietria":"Nova empresa proprietria"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome *"}),e.jsx(Ce,{value:o,onChange:w=>c(w.target.value),placeholder:"Ex: Prefeitura de ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Documento"}),e.jsx(Ce,{value:u,onChange:w=>h(w.target.value),placeholder:"CNPJ/CPF"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Telefone"}),e.jsx(Ce,{value:x,onChange:w=>g(w.target.value),placeholder:"(11) 99999-9999"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"E-mail"}),e.jsx(Ce,{value:f,onChange:w=>v(w.target.value),placeholder:"contato@empresa.com"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(K,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(K,{onClick:()=>r({name:o.trim(),document:u.trim()||void 0,email:f.trim()||void 0,phone:x.trim()||void 0}),disabled:!j,children:n?"Salvar":"Criar"})]})]})]})})}class Qz extends m.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s){console.error("Error in page render:",s)}render(){return this.state.hasError?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"border border-red-200 rounded-lg bg-red-50 p-6",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Ocorreu um erro ao abrir esta pgina."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Abra o console (F12) para ver detalhes."}),e.jsx("button",{type:"button",onClick:()=>{this.setState({hasError:!1,error:void 0}),this.props.onReset?.()},className:"px-3 py-2 rounded bg-white border",children:"Tentar novamente"})]})}):this.props.children}}function IN({initialPage:t="dashboard"}){const[s,n]=m.useState(t);m.useEffect(()=>{n(t)},[t]);const[r,o]=m.useState(!1);m.useEffect(()=>{n(t)},[t]);const{user:c,logout:u,authReady:h}=Vo(),f=is(),{isBlocked:v,blockMessage:x,isTrialEndingSoon:g,daysRemainingInTrial:j,subscription:w}=Ho(),N=m.useMemo(()=>{if(v||!w||String(w.status)!=="EM_ATRASO"||!w.currentPeriodEnd)return null;const _=new Date(w.currentPeriodEnd);if(Number.isNaN(_.getTime()))return null;const k=1440*60*1e3,M=_.getTime()+3*k-Date.now();return M<=0?0:Math.ceil(M/k)},[v,w?.status,w?.currentPeriodEnd]);if(m.useEffect(()=>{h&&!c&&f("/login")},[h,c,f]),!h)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."})});if(!c)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50 p-6",children:e.jsxs("div",{className:"w-full max-w-md bg-white border border-gray-200 rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-2",children:"Sua sesso expirou."}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Voc precisa entrar novamente para continuar."}),e.jsx("button",{type:"button",onClick:()=>f("/login"),className:"w-full px-4 py-2 rounded-lg bg-[#4F46E5] text-white hover:opacity-95",children:"Ir para o login"})]})});const C=()=>{n("settings"),o(!1),f("/app/settings?tab=subscription")},S=_=>{n(_),o(!1)},E=()=>{switch(s){case"dashboard":return e.jsx(Wj,{onNavigate:S});case"inventory":return e.jsx(bF,{});case"mediamap":return e.jsx(i$,{});case"clients":return e.jsx(F$,{});case"products":return e.jsx(b8,{});case"proposals":return e.jsx(Q8,{onNavigate:S});case"campaigns":return e.jsx(rz,{});case"reservations":return e.jsx(uz,{});case"financial":return e.jsx(Nz,{});case"messages":return e.jsx(Az,{});case"mediakit":return e.jsx(iC,{});case"promotions":return e.jsx(Rz,{});case"activities":return e.jsx(Fz,{});case"settings":return e.jsx(Gz,{});case"superadmin":return e.jsx(Zz,{});default:return e.jsx(Wj,{onNavigate:S})}};return e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(Fj,{currentPage:s,onNavigate:S,isSuperAdmin:!!c?.isSuperAdmin})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>o(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 transform transition-transform duration-300 ease-in-out md:hidden ${r?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg z-10",children:e.jsx(Ca,{className:"w-6 h-6"})}),e.jsx(Fj,{currentPage:s,onNavigate:S,isSuperAdmin:!!c?.isSuperAdmin,isMobile:!0})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 md:hidden",children:[e.jsx("button",{onClick:()=>o(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(n0,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4F46E5] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]})]}),e.jsx("div",{className:"hidden md:block flex-1"}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm text-gray-900",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500 hidden md:block",children:c.email})]}),e.jsx("button",{onClick:u,className:"px-3 md:px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Sair"})]})]})}),(v||g||N!==null&&N>0)&&e.jsx("div",{className:"px-4 md:px-8 py-3 border-b "+(v?"bg-red-50 border-red-200":"bg-amber-50 border-amber-200"),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("div",{className:"text-sm",children:v?e.jsx("span",{className:"text-red-700",children:x??"Sua conta est com acesso restrito."}):N!==null&&N>0?e.jsxs("span",{className:"text-amber-800",children:["No identificamos o pagamento da renovao. Voc tem ",N," dia(s) para regularizar antes do bloqueio total."]}):e.jsxs("span",{className:"text-amber-800",children:["Seu perodo de teste termina em ",j??0," dia(s). Assine um plano para no ser bloqueado."]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:C,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(v?"bg-red-600 text-white hover:opacity-95":"bg-amber-600 text-white hover:opacity-95"),children:v?"Regularizar assinatura":"Ver planos"})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx(Qz,{onReset:()=>window.dispatchEvent(new Event("app:navigation")),children:E()})})]})]})}class Xz extends m.Component{state={hasError:!1,message:""};static getDerivedStateFromError(s){return{hasError:!0,message:s instanceof Error?s.message:"Erro inesperado"}}componentDidCatch(s){console.error("Root render crashed:",s)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-white px-6",children:e.jsxs("div",{className:"max-w-lg w-full rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Algo deu errado ao carregar o app"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Isso pode acontecer aps uma atualizao quando o navegador/CDN entrega arquivos em cache."}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 break-words",children:this.state.message}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Recarregar"}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-800 hover:bg-gray-50",onClick:()=>window.location.href="/?clearcache=1",children:"Limpar cache e abrir o site"})]})]})}):this.props.children}}function Yz(){const t=()=>window.location.pathname+window.location.search,[s,n]=m.useState(t()),r=()=>{const u=window.innerWidth||document.documentElement.clientWidth,h=navigator.userAgent||navigator.vendor;return u<=768||/Android|iPhone|iPad|iPod|Windows Phone|webOS|BlackBerry/i.test(h)};m.useEffect(()=>{const u=()=>{n(t())};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]);const o=u=>{t()!==u&&(window.history.pushState({},"",u),n(u),window.scrollTo(0,0))};m.useEffect(()=>{(t().split("?")[0].replace(/\/$/,"")||"/")==="/"&&r()&&o("/landing-mobile")},[s]);const c=()=>{const u=s.split("?")[0].replace(/\/$/,"")||"/";if(u.startsWith("/p/"))return e.jsx(jD,{});if(u==="/mk")return e.jsx(eO,{});if(u==="/menu")return e.jsx(rO,{});if(u==="/menu/uf")return e.jsx(pO,{});if(u==="/menu/cidades")return e.jsx(fO,{});if(u==="/menu/pontos")return e.jsx(xO,{});if(u==="/menu/detalhe")return e.jsx(PO,{});if(u==="/menu/faces")return e.jsx(EO,{});if(u==="/menu/carrinho")return e.jsx(kO,{});if(u==="/menu/checkout")return e.jsx(LO,{});if(u==="/menu/enviado")return e.jsx(FO,{});if(u==="/menu/acompanhar")return e.jsx(VO,{});if(u==="/menu/proposta")return e.jsx(WO,{});if(u==="/menu/dono")return e.jsx(QO,{});if(u==="/menu/dono/enviada")return e.jsx(XO,{});if(u==="/menu/dono/revisao")return e.jsx(e6,{});if(u==="/menu/dono/aprovada")return e.jsx(n6,{});if(u.startsWith("/app")){const h=u.replace("/app/","").replace("/app","");return!h||h===""?e.jsx(IN,{initialPage:"dashboard"}):e.jsx(IN,{initialPage:h})}switch(u){case"/":return e.jsx($b,{});case"/signup":case"/cadastro":return e.jsx(KT,{});case"/planos":return e.jsx(yD,{});case"/landing-mobile":return e.jsx(vD,{});case"/login":return e.jsx(JT,{});case"/forgot-password":return e.jsx(sD,{});case"/reset-password":return e.jsx(nD,{});case"/verify-email":return e.jsx(tD,{});case"/oauth-callback":return e.jsx(a6,{});case"/dashboard":return e.jsx(aD,{});case"/contato":return e.jsx(rD,{});case"/termos":return e.jsx(iD,{});case"/privacidade":return e.jsx(oD,{});default:return o("/"),e.jsx($b,{})}};return e.jsx(Xz,{children:e.jsx(oC.Provider,{value:o,children:e.jsx(AE,{children:e.jsx(EE,{children:e.jsxs(DE,{children:[c(),e.jsx(WA,{richColors:!0,position:"top-right"})]})})})})})}const hg="app_version",MN="cache_rescue_for_version";function A_(t){t.pathname==="/app"&&(t.pathname="/app/")}function Jz(t){try{const s=new URL(window.location.href);if(A_(s),s.searchParams.get("v")===t)return;s.searchParams.set("v",t),window.history.replaceState(null,"",s.toString())}catch{}}function e7(t){try{const s=new URL(window.location.href);A_(s),s.searchParams.set("v",t),window.location.replace(s.toString())}catch{window.location.reload()}}async function P_(){if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistrations();await Promise.all(t.map(s=>s.unregister()))}catch{}if("caches"in window)try{const t=await caches.keys();await Promise.all(t.map(s=>caches.delete(s)))}catch{}}async function t7(){try{const t=new URL(window.location.href);if(t.searchParams.get("clearcache")!=="1")return;t.searchParams.delete("clearcache"),window.history.replaceState({},"",t.toString()),await P_(),window.location.reload()}catch{}}async function E_(){try{const t=await fetch(`/version.json?ts=${Date.now()}`,{cache:"no-store"});if(!t.ok)return;const n=(await t.json())?.version;if(!n)return;Jz(n);const r=localStorage.getItem(hg);if(!r){localStorage.setItem(hg,n);return}r!==n&&(localStorage.getItem(MN)!==n&&(await P_(),localStorage.setItem(MN,n)),localStorage.setItem(hg,n),e7(n))}catch{}}t7();E_();document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&E_()});yA.createRoot(document.getElementById("root")).render(e.jsx(Yz,{}));
