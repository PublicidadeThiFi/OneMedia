function d_(t,s){for(var n=0;n<s.length;n++){const i=s[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(t,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function $x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jf={exports:{}},jd={},wf={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function u_(){if(Hv)return Gt;Hv=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,S={};function A($,Y,Z){this.props=$,this.context=Y,this.refs=S,this.updater=Z||N}A.prototype.isReactComponent={},A.prototype.setState=function($,Y){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Y,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function D(){}D.prototype=A.prototype;function E($,Y,Z){this.props=$,this.context=Y,this.refs=S,this.updater=Z||N}var T=E.prototype=new D;T.constructor=E,j(T,A.prototype),T.isPureReactComponent=!0;var k=Array.isArray,R=Object.prototype.hasOwnProperty,O={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function te($,Y,Z){var K,G={},xe=null,le=null;if(Y!=null)for(K in Y.ref!==void 0&&(le=Y.ref),Y.key!==void 0&&(xe=""+Y.key),Y)R.call(Y,K)&&!H.hasOwnProperty(K)&&(G[K]=Y[K]);var ue=arguments.length-2;if(ue===1)G.children=Z;else if(1<ue){for(var Fe=Array(ue),$e=0;$e<ue;$e++)Fe[$e]=arguments[$e+2];G.children=Fe}if($&&$.defaultProps)for(K in ue=$.defaultProps,ue)G[K]===void 0&&(G[K]=ue[K]);return{$$typeof:t,type:$,key:xe,ref:le,props:G,_owner:O.current}}function X($,Y){return{$$typeof:t,type:$.type,key:Y,ref:$.ref,props:$.props,_owner:$._owner}}function q($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function U($){var Y={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Z){return Y[Z]})}var M=/\/+/g;function B($,Y){return typeof $=="object"&&$!==null&&$.key!=null?U(""+$.key):Y.toString(36)}function ee($,Y,Z,K,G){var xe=typeof $;(xe==="undefined"||xe==="boolean")&&($=null);var le=!1;if($===null)le=!0;else switch(xe){case"string":case"number":le=!0;break;case"object":switch($.$$typeof){case t:case s:le=!0}}if(le)return le=$,G=G(le),$=K===""?"."+B(le,0):K,k(G)?(Z="",$!=null&&(Z=$.replace(M,"$&/")+"/"),ee(G,Y,Z,"",function($e){return $e})):G!=null&&(q(G)&&(G=X(G,Z+(!G.key||le&&le.key===G.key?"":(""+G.key).replace(M,"$&/")+"/")+$)),Y.push(G)),1;if(le=0,K=K===""?".":K+":",k($))for(var ue=0;ue<$.length;ue++){xe=$[ue];var Fe=K+B(xe,ue);le+=ee(xe,Y,Z,Fe,G)}else if(Fe=w($),typeof Fe=="function")for($=Fe.call($),ue=0;!(xe=$.next()).done;)xe=xe.value,Fe=K+B(xe,ue++),le+=ee(xe,Y,Z,Fe,G);else if(xe==="object")throw Y=String($),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return le}function me($,Y,Z){if($==null)return $;var K=[],G=0;return ee($,K,"","",function(xe){return Y.call(Z,xe,G++)}),K}function J($){if($._status===-1){var Y=$._result;Y=Y(),Y.then(function(Z){($._status===0||$._status===-1)&&($._status=1,$._result=Z)},function(Z){($._status===0||$._status===-1)&&($._status=2,$._result=Z)}),$._status===-1&&($._status=0,$._result=Y)}if($._status===1)return $._result.default;throw $._result}var fe={current:null},W={transition:null},ae={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:W,ReactCurrentOwner:O};function F(){throw Error("act(...) is not supported in production builds of React.")}return Gt.Children={map:me,forEach:function($,Y,Z){me($,function(){Y.apply(this,arguments)},Z)},count:function($){var Y=0;return me($,function(){Y++}),Y},toArray:function($){return me($,function(Y){return Y})||[]},only:function($){if(!q($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Gt.Component=A,Gt.Fragment=n,Gt.Profiler=l,Gt.PureComponent=E,Gt.StrictMode=i,Gt.Suspense=f,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Gt.act=F,Gt.cloneElement=function($,Y,Z){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var K=j({},$.props),G=$.key,xe=$.ref,le=$._owner;if(Y!=null){if(Y.ref!==void 0&&(xe=Y.ref,le=O.current),Y.key!==void 0&&(G=""+Y.key),$.type&&$.type.defaultProps)var ue=$.type.defaultProps;for(Fe in Y)R.call(Y,Fe)&&!H.hasOwnProperty(Fe)&&(K[Fe]=Y[Fe]===void 0&&ue!==void 0?ue[Fe]:Y[Fe])}var Fe=arguments.length-2;if(Fe===1)K.children=Z;else if(1<Fe){ue=Array(Fe);for(var $e=0;$e<Fe;$e++)ue[$e]=arguments[$e+2];K.children=ue}return{$$typeof:t,type:$.type,key:G,ref:xe,props:K,_owner:le}},Gt.createContext=function($){return $={$$typeof:h,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:c,_context:$},$.Consumer=$},Gt.createElement=te,Gt.createFactory=function($){var Y=te.bind(null,$);return Y.type=$,Y},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function($){return{$$typeof:m,render:$}},Gt.isValidElement=q,Gt.lazy=function($){return{$$typeof:v,_payload:{_status:-1,_result:$},_init:J}},Gt.memo=function($,Y){return{$$typeof:b,type:$,compare:Y===void 0?null:Y}},Gt.startTransition=function($){var Y=W.transition;W.transition={};try{$()}finally{W.transition=Y}},Gt.unstable_act=F,Gt.useCallback=function($,Y){return fe.current.useCallback($,Y)},Gt.useContext=function($){return fe.current.useContext($)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function($){return fe.current.useDeferredValue($)},Gt.useEffect=function($,Y){return fe.current.useEffect($,Y)},Gt.useId=function(){return fe.current.useId()},Gt.useImperativeHandle=function($,Y,Z){return fe.current.useImperativeHandle($,Y,Z)},Gt.useInsertionEffect=function($,Y){return fe.current.useInsertionEffect($,Y)},Gt.useLayoutEffect=function($,Y){return fe.current.useLayoutEffect($,Y)},Gt.useMemo=function($,Y){return fe.current.useMemo($,Y)},Gt.useReducer=function($,Y,Z){return fe.current.useReducer($,Y,Z)},Gt.useRef=function($){return fe.current.useRef($)},Gt.useState=function($){return fe.current.useState($)},Gt.useSyncExternalStore=function($,Y,Z){return fe.current.useSyncExternalStore($,Y,Z)},Gt.useTransition=function(){return fe.current.useTransition()},Gt.version="18.3.1",Gt}var Wv;function zx(){return Wv||(Wv=1,wf.exports=u_()),wf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function m_(){if(qv)return jd;qv=1;var t=zx(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(m,f,b){var v,g={},w=null,N=null;b!==void 0&&(w=""+b),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(N=f.ref);for(v in f)i.call(f,v)&&!c.hasOwnProperty(v)&&(g[v]=f[v]);if(m&&m.defaultProps)for(v in f=m.defaultProps,f)g[v]===void 0&&(g[v]=f[v]);return{$$typeof:s,type:m,key:w,ref:N,props:g,_owner:l.current}}return jd.Fragment=n,jd.jsx=h,jd.jsxs=h,jd}var Zv;function h_(){return Zv||(Zv=1,jf.exports=m_()),jf.exports}var e=h_(),xm={},Nf={exports:{}},lr={},Cf={exports:{}},_f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function p_(){return Gv||(Gv=1,(function(t){function s(W,ae){var F=W.length;W.push(ae);e:for(;0<F;){var $=F-1>>>1,Y=W[$];if(0<l(Y,ae))W[$]=ae,W[F]=Y,F=$;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ae=W[0],F=W.pop();if(F!==ae){W[0]=F;e:for(var $=0,Y=W.length,Z=Y>>>1;$<Z;){var K=2*($+1)-1,G=W[K],xe=K+1,le=W[xe];if(0>l(G,F))xe<Y&&0>l(le,G)?(W[$]=le,W[xe]=F,$=xe):(W[$]=G,W[K]=F,$=K);else if(xe<Y&&0>l(le,F))W[$]=le,W[xe]=F,$=xe;else break e}}return ae}function l(W,ae){var F=W.sortIndex-ae.sortIndex;return F!==0?F:W.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var f=[],b=[],v=1,g=null,w=3,N=!1,j=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(W){for(var ae=n(b);ae!==null;){if(ae.callback===null)i(b);else if(ae.startTime<=W)i(b),ae.sortIndex=ae.expirationTime,s(f,ae);else break;ae=n(b)}}function k(W){if(S=!1,T(W),!j)if(n(f)!==null)j=!0,J(R);else{var ae=n(b);ae!==null&&fe(k,ae.startTime-W)}}function R(W,ae){j=!1,S&&(S=!1,D(te),te=-1),N=!0;var F=w;try{for(T(ae),g=n(f);g!==null&&(!(g.expirationTime>ae)||W&&!U());){var $=g.callback;if(typeof $=="function"){g.callback=null,w=g.priorityLevel;var Y=$(g.expirationTime<=ae);ae=t.unstable_now(),typeof Y=="function"?g.callback=Y:g===n(f)&&i(f),T(ae)}else i(f);g=n(f)}if(g!==null)var Z=!0;else{var K=n(b);K!==null&&fe(k,K.startTime-ae),Z=!1}return Z}finally{g=null,w=F,N=!1}}var O=!1,H=null,te=-1,X=5,q=-1;function U(){return!(t.unstable_now()-q<X)}function M(){if(H!==null){var W=t.unstable_now();q=W;var ae=!0;try{ae=H(!0,W)}finally{ae?B():(O=!1,H=null)}}else O=!1}var B;if(typeof E=="function")B=function(){E(M)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,me=ee.port2;ee.port1.onmessage=M,B=function(){me.postMessage(null)}}else B=function(){A(M,0)};function J(W){H=W,O||(O=!0,B())}function fe(W,ae){te=A(function(){W(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){j||N||(j=!0,J(R))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(W){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var F=w;w=ae;try{return W()}finally{w=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var F=w;w=W;try{return ae()}finally{w=F}},t.unstable_scheduleCallback=function(W,ae,F){var $=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,W){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=F+Y,W={id:v++,callback:ae,priorityLevel:W,startTime:F,expirationTime:Y,sortIndex:-1},F>$?(W.sortIndex=F,s(b,W),n(f)===null&&W===n(b)&&(S?(D(te),te=-1):S=!0,fe(k,F-$))):(W.sortIndex=Y,s(f,W),j||N||(j=!0,J(R))),W},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(W){var ae=w;return function(){var F=w;w=ae;try{return W.apply(this,arguments)}finally{w=F}}}})(_f)),_f}var Kv;function f_(){return Kv||(Kv=1,Cf.exports=p_()),Cf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function x_(){if(Xv)return lr;Xv=1;var t=zx(),s=f_();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(r,o){h(r,o),h(r+"Capture",o)}function h(r,o){for(l[r]=o,r=0;r<o.length;r++)i.add(o[r])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function w(r){return f.call(g,r)?!0:f.call(v,r)?!1:b.test(r)?g[r]=!0:(v[r]=!0,!1)}function N(r,o,u,y){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,o,u,y){if(o===null||typeof o>"u"||N(r,o,u,y))return!0;if(y)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(r,o,u,y,_,P,z){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=r,this.type=o,this.sanitizeURL=P,this.removeEmptyString=z}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){A[r]=new S(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];A[o]=new S(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){A[r]=new S(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){A[r]=new S(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){A[r]=new S(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){A[r]=new S(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){A[r]=new S(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){A[r]=new S(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){A[r]=new S(r,5,!1,r.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function E(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(D,E);A[o]=new S(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(D,E);A[o]=new S(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(D,E);A[o]=new S(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){A[r]=new S(r,1,!1,r.toLowerCase(),null,!1,!1)}),A.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){A[r]=new S(r,1,!1,r.toLowerCase(),null,!0,!0)});function T(r,o,u,y){var _=A.hasOwnProperty(o)?A[o]:null;(_!==null?_.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(j(o,u,_,y)&&(u=null),y||_===null?w(o)&&(u===null?r.removeAttribute(o):r.setAttribute(o,""+u)):_.mustUseProperty?r[_.propertyName]=u===null?_.type===3?!1:"":u:(o=_.attributeName,y=_.attributeNamespace,u===null?r.removeAttribute(o):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,y?r.setAttributeNS(y,o,u):r.setAttribute(o,u))))}var k=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),U=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),W=Symbol.iterator;function ae(r){return r===null||typeof r!="object"?null:(r=W&&r[W]||r["@@iterator"],typeof r=="function"?r:null)}var F=Object.assign,$;function Y(r){if($===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||""}return`
`+$+r}var Z=!1;function K(r,o){if(!r||Z)return"";Z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_e){var y=_e}Reflect.construct(r,[],o)}else{try{o.call()}catch(_e){y=_e}r.call(o.prototype)}else{try{throw Error()}catch(_e){y=_e}r()}}catch(_e){if(_e&&y&&typeof _e.stack=="string"){for(var _=_e.stack.split(`
`),P=y.stack.split(`
`),z=_.length-1,se=P.length-1;1<=z&&0<=se&&_[z]!==P[se];)se--;for(;1<=z&&0<=se;z--,se--)if(_[z]!==P[se]){if(z!==1||se!==1)do if(z--,se--,0>se||_[z]!==P[se]){var ce=`
`+_[z].replace(" at new "," at ");return r.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",r.displayName)),ce}while(1<=z&&0<=se);break}}}finally{Z=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?Y(r):""}function G(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=K(r.type,!1),r;case 11:return r=K(r.type.render,!1),r;case 1:return r=K(r.type,!0),r;default:return""}}function xe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case H:return"Fragment";case O:return"Portal";case X:return"Profiler";case te:return"StrictMode";case B:return"Suspense";case ee:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case U:return(r.displayName||"Context")+".Consumer";case q:return(r._context.displayName||"Context")+".Provider";case M:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case me:return o=r.displayName||null,o!==null?o:xe(r.type)||"Memo";case J:o=r._payload,r=r._init;try{return xe(r(o))}catch{}}return null}function le(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(o);case 8:return o===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Fe(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $e(r){var o=Fe(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),y=""+r[o];if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,P=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return _.call(this)},set:function(z){y=""+z,P.call(this,z)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return y},setValue:function(z){y=""+z},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ze(r){r._valueTracker||(r._valueTracker=$e(r))}function Ye(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),y="";return r&&(y=Fe(r)?r.checked?"true":"false":r.value),r=y,r!==u?(o.setValue(r),!0):!1}function Xe(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Je(r,o){var u=o.checked;return F({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??r._wrapperState.initialChecked})}function ot(r,o){var u=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;u=ue(o.value!=null?o.value:u),r._wrapperState={initialChecked:y,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function jt(r,o){o=o.checked,o!=null&&T(r,"checked",o,!1)}function dt(r,o){jt(r,o);var u=ue(o.value),y=o.type;if(u!=null)y==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?Ft(r,o.type,u):o.hasOwnProperty("defaultValue")&&Ft(r,o.type,ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function Tt(r,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,u||o===r.value||(r.value=o),r.defaultValue=o}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function Ft(r,o,u){(o!=="number"||Xe(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}var Q=Array.isArray;function pe(r,o,u,y){if(r=r.options,o){o={};for(var _=0;_<u.length;_++)o["$"+u[_]]=!0;for(u=0;u<r.length;u++)_=o.hasOwnProperty("$"+r[u].value),r[u].selected!==_&&(r[u].selected=_),_&&y&&(r[u].defaultSelected=!0)}else{for(u=""+ue(u),o=null,_=0;_<r.length;_++){if(r[_].value===u){r[_].selected=!0,y&&(r[_].defaultSelected=!0);return}o!==null||r[_].disabled||(o=r[_])}o!==null&&(o.selected=!0)}}function de(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return F({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Oe(r,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(Q(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}r._wrapperState={initialValue:ue(u)}}function oe(r,o){var u=ue(o.value),y=ue(o.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),o.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),y!=null&&(r.defaultValue=""+y)}function be(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function Me(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?Me(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ut,Kt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,y,_){MSApp.execUnsafeLocalFunction(function(){return r(o,u,y,_)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(ut=ut||document.createElement("div"),ut.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ut.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function tn(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var ln={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ut=["Webkit","ms","Moz","O"];Object.keys(ln).forEach(function(r){Ut.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),ln[o]=ln[r]})});function yn(r,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ln.hasOwnProperty(r)&&ln[r]?(""+o).trim():o+"px"}function Kn(r,o){r=r.style;for(var u in o)if(o.hasOwnProperty(u)){var y=u.indexOf("--")===0,_=yn(u,o[u],y);u==="float"&&(u="cssFloat"),y?r.setProperty(u,_):r[u]=_}}var ps=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pn(r,o){if(o){if(ps[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function rn(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hn=null;function fn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Rn=null,Vn=null,Sn=null;function ts(r){if(r=li(r)){if(typeof Rn!="function")throw Error(n(280));var o=r.stateNode;o&&(o=ql(o),Rn(r.stateNode,r.type,o))}}function ft(r){Vn?Sn?Sn.push(r):Sn=[r]:Vn=r}function sn(){if(Vn){var r=Vn,o=Sn;if(Sn=Vn=null,ts(r),o)for(r=0;r<o.length;r++)ts(o[r])}}function $t(r,o){return r(o)}function An(){}var bn=!1;function xn(r,o,u){if(bn)return r(o,u);bn=!0;try{return $t(r,o,u)}finally{bn=!1,(Vn!==null||Sn!==null)&&(An(),sn())}}function Ce(r,o){var u=r.stateNode;if(u===null)return null;var y=ql(u);if(y===null)return null;u=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Qe=!1;if(m)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Qe=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Qe=!1}function ge(r,o,u,y,_,P,z,se,ce){var _e=Array.prototype.slice.call(arguments,3);try{o.apply(u,_e)}catch(Be){this.onError(Be)}}var Ee=!1,Te=null,wt=!1,Ct=null,jn={onError:function(r){Ee=!0,Te=r}};function qt(r,o,u,y,_,P,z,se,ce){Ee=!1,Te=null,ge.apply(jn,arguments)}function cn(r,o,u,y,_,P,z,se,ce){if(qt.apply(this,arguments),Ee){if(Ee){var _e=Te;Ee=!1,Te=null}else throw Error(n(198));wt||(wt=!0,Ct=_e)}}function gn(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function Xn(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function is(r){if(gn(r)!==r)throw Error(n(188))}function Ps(r){var o=r.alternate;if(!o){if(o=gn(r),o===null)throw Error(n(188));return o!==r?null:r}for(var u=r,y=o;;){var _=u.return;if(_===null)break;var P=_.alternate;if(P===null){if(y=_.return,y!==null){u=y;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===u)return is(_),r;if(P===y)return is(_),o;P=P.sibling}throw Error(n(188))}if(u.return!==y.return)u=_,y=P;else{for(var z=!1,se=_.child;se;){if(se===u){z=!0,u=_,y=P;break}if(se===y){z=!0,y=_,u=P;break}se=se.sibling}if(!z){for(se=P.child;se;){if(se===u){z=!0,u=P,y=_;break}if(se===y){z=!0,y=P,u=_;break}se=se.sibling}if(!z)throw Error(n(189))}}if(u.alternate!==y)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:o}function ko(r){return r=Ps(r),r!==null?Ii(r):null}function Ii(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=Ii(r);if(o!==null)return o;r=r.sibling}return null}var Cl=s.unstable_scheduleCallback,To=s.unstable_cancelCallback,Oc=s.unstable_shouldYield,re=s.unstable_requestPaint,Se=s.unstable_now,It=s.unstable_getCurrentPriorityLevel,dn=s.unstable_ImmediatePriority,Mt=s.unstable_UserBlockingPriority,Hn=s.unstable_NormalPriority,_t=s.unstable_LowPriority,os=s.unstable_IdlePriority,Zt=null,xt=null;function wn(r){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Zt,r,void 0,(r.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:Rr,Qt=Math.log,Rs=Math.LN2;function Rr(r){return r>>>=0,r===0?32:31-(Qt(r)/Rs|0)|0}var ea=64,Ri=4194304;function Dt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function En(r,o){var u=r.pendingLanes;if(u===0)return 0;var y=0,_=r.suspendedLanes,P=r.pingedLanes,z=u&268435455;if(z!==0){var se=z&~_;se!==0?y=Dt(se):(P&=z,P!==0&&(y=Dt(P)))}else z=u&~_,z!==0?y=Dt(z):P!==0&&(y=Dt(P));if(y===0)return 0;if(o!==0&&o!==y&&(o&_)===0&&(_=y&-y,P=o&-o,_>=P||_===16&&(P&4194240)!==0))return o;if((y&4)!==0&&(y|=u&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=y;0<o;)u=31-rt(o),_=1<<u,y|=r[u],o&=~_;return y}function Lc(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _l(r,o){for(var u=r.suspendedLanes,y=r.pingedLanes,_=r.expirationTimes,P=r.pendingLanes;0<P;){var z=31-rt(P),se=1<<z,ce=_[z];ce===-1?((se&u)===0||(se&y)!==0)&&(_[z]=Lc(se,o)):ce<=o&&(r.expiredLanes|=se),P&=~se}}function Ms(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function cu(){var r=ea;return ea<<=1,(ea&4194240)===0&&(ea=64),r}function Mi(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function yr(r,o,u){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-rt(o),r[o]=u}function Yn(r,o){var u=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<u;){var _=31-rt(u),P=1<<_;o[_]=0,y[_]=-1,r[_]=-1,u&=~P}}function ta(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var y=31-rt(u),_=1<<y;_&o|r[y]&o&&(r[y]|=o),u&=~_}}var nn=0;function Oi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Sl,Qa,Al,Pl,Do,Io=!1,Li=[],br=null,na=null,Mr=null,Ro=new Map,Nt=new Map,fs=[],Nn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(r,o){switch(r){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Ro.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(o.pointerId)}}function Ja(r,o,u,y,_,P){return r===null||r.nativeEvent!==P?(r={blockedOn:o,domEventName:u,eventSystemFlags:y,nativeEvent:P,targetContainers:[_]},o!==null&&(o=li(o),o!==null&&Qa(o)),r):(r.eventSystemFlags|=y,o=r.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),r)}function $c(r,o,u,y,_){switch(o){case"focusin":return br=Ja(br,r,o,u,y,_),!0;case"dragenter":return na=Ja(na,r,o,u,y,_),!0;case"mouseover":return Mr=Ja(Mr,r,o,u,y,_),!0;case"pointerover":var P=_.pointerId;return Ro.set(P,Ja(Ro.get(P)||null,r,o,u,y,_)),!0;case"gotpointercapture":return P=_.pointerId,Nt.set(P,Ja(Nt.get(P)||null,r,o,u,y,_)),!0}return!1}function El(r){var o=oi(r.target);if(o!==null){var u=gn(o);if(u!==null){if(o=u.tag,o===13){if(o=Xn(u),o!==null){r.blockedOn=o,Do(r.priority,function(){Al(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Or(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Dl(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(u===null){u=r.nativeEvent;var y=new u.constructor(u.type,u);hn=y,u.target.dispatchEvent(y),hn=null}else return o=li(u),o!==null&&Qa(o),r.blockedOn=u,!1;o.shift()}return!0}function kl(r,o,u){Or(r)&&u.delete(o)}function Mo(){Io=!1,br!==null&&Or(br)&&(br=null),na!==null&&Or(na)&&(na=null),Mr!==null&&Or(Mr)&&(Mr=null),Ro.forEach(kl),Nt.forEach(kl)}function Wn(r,o){r.blockedOn===o&&(r.blockedOn=null,Io||(Io=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Mo)))}function jr(r){function o(_){return Wn(_,r)}if(0<Li.length){Wn(Li[0],r);for(var u=1;u<Li.length;u++){var y=Li[u];y.blockedOn===r&&(y.blockedOn=null)}}for(br!==null&&Wn(br,r),na!==null&&Wn(na,r),Mr!==null&&Wn(Mr,r),Ro.forEach(o),Nt.forEach(o),u=0;u<fs.length;u++)y=fs[u],y.blockedOn===r&&(y.blockedOn=null);for(;0<fs.length&&(u=fs[0],u.blockedOn===null);)El(u),u.blockedOn===null&&fs.shift()}var ei=k.ReactCurrentBatchConfig,Oo=!0;function tp(r,o,u,y){var _=nn,P=ei.transition;ei.transition=null;try{nn=1,Lo(r,o,u,y)}finally{nn=_,ei.transition=P}}function du(r,o,u,y){var _=nn,P=ei.transition;ei.transition=null;try{nn=4,Lo(r,o,u,y)}finally{nn=_,ei.transition=P}}function Lo(r,o,u,y){if(Oo){var _=Dl(r,o,u,y);if(_===null)a(r,o,y,Tl,u),Fc(r,y);else if($c(_,r,o,u,y))y.stopPropagation();else if(Fc(r,y),o&4&&-1<Nn.indexOf(r)){for(;_!==null;){var P=li(_);if(P!==null&&Sl(P),P=Dl(r,o,u,y),P===null&&a(r,o,y,Tl,u),P===_)break;_=P}_!==null&&y.stopPropagation()}else a(r,o,y,null,u)}}var Tl=null;function Dl(r,o,u,y){if(Tl=null,r=fn(y),r=oi(r),r!==null)if(o=gn(r),o===null)r=null;else if(u=o.tag,u===13){if(r=Xn(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Tl=r,null}function Xt(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(It()){case dn:return 1;case Mt:return 4;case Hn:case _t:return 16;case os:return 536870912;default:return 16}default:return 16}}var Na=null,Hs=null,Ca=null;function zc(){if(Ca)return Ca;var r,o=Hs,u=o.length,y,_="value"in Na?Na.value:Na.textContent,P=_.length;for(r=0;r<u&&o[r]===_[r];r++);var z=u-r;for(y=1;y<=z&&o[u-y]===_[P-y];y++);return Ca=_.slice(r,1<y?1-y:void 0)}function Il(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Fi(){return!0}function uu(){return!1}function Os(r){function o(u,y,_,P,z){this._reactName=u,this._targetInst=_,this.type=y,this.nativeEvent=P,this.target=z,this.currentTarget=null;for(var se in r)r.hasOwnProperty(se)&&(u=r[se],this[se]=u?u(P):P[se]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Fi:uu,this.isPropagationStopped=uu,this}return F(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),o}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=Os($i),ti=F({},$i,{view:0,detail:0}),np=Os(ti),tr,Uc,zi,wr=F({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==zi&&(zi&&r.type==="mousemove"?(tr=r.screenX-zi.screenX,Uc=r.screenY-zi.screenY):Uc=tr=0,zi=r),tr)},movementY:function(r){return"movementY"in r?r.movementY:Uc}}),Vc=Os(wr),mu=F({},wr,{dataTransfer:0}),Hc=Os(mu),sp=F({},ti,{relatedTarget:0}),Rl=Os(sp),hu=F({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=Os(hu),ap=F({},$i,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wc=Os(ap),ip=F({},$i,{data:0}),qc=Os(ip),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ml={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ni={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function op(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=ni[r])?!!o[r]:!1}function si(){return op}var nr=F({},ti,{key:function(r){if(r.key){var o=pu[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Il(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ml[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(r){return r.type==="keypress"?Il(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Il(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),fu=Os(nr),xu=F({},wr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gu=Os(xu),Zc=F({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),Gc=Os(Zc),lp=F({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),cp=Os(lp),vu=F({},wr,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),dp=Os(vu),Nr=[9,13,27,32],_a=m&&"CompositionEvent"in window,Fo=null;m&&"documentMode"in document&&(Fo=document.documentMode);var sa=m&&"TextEvent"in window&&!Fo,yu=m&&(!_a||Fo&&8<Fo&&11>=Fo),ri=" ",bu=!1;function Bi(r,o){switch(r){case"keyup":return Nr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ra=!1;function up(r,o){switch(r){case"compositionend":return Kc(o);case"keypress":return o.which!==32?null:(bu=!0,ri);case"textInput":return r=o.data,r===ri&&bu?null:r;default:return null}}function Sa(r,o){if(ra)return r==="compositionend"||!_a&&Bi(r,o)?(r=zc(),Ca=Hs=Na=null,ra=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return yu&&o.locale!=="ko"?null:o.data;default:return null}}var Ol={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Ol[r.type]:o==="textarea"}function Ll(r,o,u,y){ft(y),o=x(o,"onChange"),0<o.length&&(u=new Bc("onChange","change",null,u,y),r.push({event:u,listeners:o}))}var $o=null,Ws=null;function mp(r){rd(r,0)}function aa(r){var o=ci(r);if(Ye(o))return r}function hp(r,o){if(r==="change")return o}var Lr=!1;if(m){var Ui;if(m){var Fl="oninput"in document;if(!Fl){var $l=document.createElement("div");$l.setAttribute("oninput","return;"),Fl=typeof $l.oninput=="function"}Ui=Fl}else Ui=!1;Lr=Ui&&(!document.documentMode||9<document.documentMode)}function zo(){$o&&($o.detachEvent("onpropertychange",zl),Ws=$o=null)}function zl(r){if(r.propertyName==="value"&&aa(Ws)){var o=[];Ll(o,Ws,r,fn(r)),xn(mp,o)}}function Bl(r,o,u){r==="focusin"?(zo(),$o=o,Ws=u,$o.attachEvent("onpropertychange",zl)):r==="focusout"&&zo()}function Vi(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return aa(Ws)}function Ul(r,o){if(r==="click")return aa(o)}function Xc(r,o){if(r==="input"||r==="change")return aa(o)}function wu(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Cr=typeof Object.is=="function"?Object.is:wu;function Aa(r,o){if(Cr(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),y=Object.keys(o);if(u.length!==y.length)return!1;for(y=0;y<u.length;y++){var _=u[y];if(!f.call(o,_)||!Cr(r[_],o[_]))return!1}return!0}function Nu(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Yc(r,o){var u=Nu(r);r=0;for(var y;u;){if(u.nodeType===3){if(y=r+u.textContent.length,r<=o&&y>=o)return{node:u,offset:o-r};r=y}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Nu(u)}}function Cu(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Cu(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Qc(){for(var r=window,o=Xe();o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Xe(r.document)}return o}function Jc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function Fr(r){var o=Qc(),u=r.focusedElem,y=r.selectionRange;if(o!==u&&u&&u.ownerDocument&&Cu(u.ownerDocument.documentElement,u)){if(y!==null&&Jc(u)){if(o=y.start,r=y.end,r===void 0&&(r=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(r,u.value.length);else if(r=(o=u.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var _=u.textContent.length,P=Math.min(y.start,_);y=y.end===void 0?P:Math.min(y.end,_),!r.extend&&P>y&&(_=y,y=P,P=_),_=Yc(u,P);var z=Yc(u,y);_&&z&&(r.rangeCount!==1||r.anchorNode!==_.node||r.anchorOffset!==_.offset||r.focusNode!==z.node||r.focusOffset!==z.offset)&&(o=o.createRange(),o.setStart(_.node,_.offset),r.removeAllRanges(),P>y?(r.addRange(o),r.extend(z.node,z.offset)):(o.setEnd(z.node,z.offset),r.addRange(o)))}}for(o=[],r=u;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)r=o[u],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Vl=m&&"documentMode"in document&&11>=document.documentMode,Hi=null,Wi=null,Bo=null,Hl=!1;function _u(r,o,u){var y=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hl||Hi==null||Hi!==Xe(y)||(y=Hi,"selectionStart"in y&&Jc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Bo&&Aa(Bo,y)||(Bo=y,y=x(Wi,"onSelect"),0<y.length&&(o=new Bc("onSelect","select",null,o,u),r.push({event:o,listeners:y}),o.target=Hi)))}function Pa(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var qi={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},Ea={},ed={};m&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Uo(r){if(Ea[r])return Ea[r];if(!qi[r])return r;var o=qi[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in ed)return Ea[r]=o[u];return r}var Su=Uo("animationend"),$r=Uo("animationiteration"),td=Uo("animationstart"),nd=Uo("transitionend"),Zi=new Map,Au="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(r,o){Zi.set(r,o),c(o,[r])}for(var ai=0;ai<Au.length;ai++){var Wl=Au[ai],Pu=Wl.toLowerCase(),pp=Wl[0].toUpperCase()+Wl.slice(1);_r(Pu,"on"+pp)}_r(Su,"onAnimationEnd"),_r($r,"onAnimationIteration"),_r(td,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(nd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function sd(r,o,u){var y=r.type||"unknown-event";r.currentTarget=u,cn(y,o,void 0,r),r.currentTarget=null}function rd(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var y=r[u],_=y.event;y=y.listeners;e:{var P=void 0;if(o)for(var z=y.length-1;0<=z;z--){var se=y[z],ce=se.instance,_e=se.currentTarget;if(se=se.listener,ce!==P&&_.isPropagationStopped())break e;sd(_,se,_e),P=ce}else for(z=0;z<y.length;z++){if(se=y[z],ce=se.instance,_e=se.currentTarget,se=se.listener,ce!==P&&_.isPropagationStopped())break e;sd(_,se,_e),P=ce}}}if(wt)throw r=Ct,wt=!1,Ct=null,r}function Cn(r,o){var u=o[Qi];u===void 0&&(u=o[Qi]=new Set);var y=r+"__bubble";u.has(y)||(ku(o,r,2,!1),u.add(y))}function ad(r,o,u){var y=0;o&&(y|=4),ku(u,r,y,o)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function Ki(r){if(!r[Vo]){r[Vo]=!0,i.forEach(function(u){u!=="selectionchange"&&(Eu.has(u)||ad(u,!1,r),ad(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Vo]||(o[Vo]=!0,ad("selectionchange",!1,o))}}function ku(r,o,u,y){switch(Xt(o)){case 1:var _=tp;break;case 4:_=du;break;default:_=Lo}u=_.bind(null,o,u,r),_=void 0,!Qe||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),y?_!==void 0?r.addEventListener(o,u,{capture:!0,passive:_}):r.addEventListener(o,u,!0):_!==void 0?r.addEventListener(o,u,{passive:_}):r.addEventListener(o,u,!1)}function a(r,o,u,y,_){var P=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var z=y.tag;if(z===3||z===4){var se=y.stateNode.containerInfo;if(se===_||se.nodeType===8&&se.parentNode===_)break;if(z===4)for(z=y.return;z!==null;){var ce=z.tag;if((ce===3||ce===4)&&(ce=z.stateNode.containerInfo,ce===_||ce.nodeType===8&&ce.parentNode===_))return;z=z.return}for(;se!==null;){if(z=oi(se),z===null)return;if(ce=z.tag,ce===5||ce===6){y=P=z;continue e}se=se.parentNode}}y=y.return}xn(function(){var _e=P,Be=fn(u),He=[];e:{var ze=Zi.get(r);if(ze!==void 0){var st=Bc,it=r;switch(r){case"keypress":if(Il(u)===0)break e;case"keydown":case"keyup":st=fu;break;case"focusin":it="focus",st=Rl;break;case"focusout":it="blur",st=Rl;break;case"beforeblur":case"afterblur":st=Rl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Gc;break;case Su:case $r:case td:st=rp;break;case nd:st=cp;break;case"scroll":st=np;break;case"wheel":st=dp;break;case"copy":case"cut":case"paste":st=Wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=gu}var lt=(o&4)!==0,ns=!lt&&r==="scroll",ye=lt?ze!==null?ze+"Capture":null:ze;lt=[];for(var he=_e,je;he!==null;){je=he;var We=je.stateNode;if(je.tag===5&&We!==null&&(je=We,ye!==null&&(We=Ce(he,ye),We!=null&&lt.push(d(he,We,je)))),ns)break;he=he.return}0<lt.length&&(ze=new st(ze,it,null,u,Be),He.push({event:ze,listeners:lt}))}}if((o&7)===0){e:{if(ze=r==="mouseover"||r==="pointerover",st=r==="mouseout"||r==="pointerout",ze&&u!==hn&&(it=u.relatedTarget||u.fromElement)&&(oi(it)||it[vn]))break e;if((st||ze)&&(ze=Be.window===Be?Be:(ze=Be.ownerDocument)?ze.defaultView||ze.parentWindow:window,st?(it=u.relatedTarget||u.toElement,st=_e,it=it?oi(it):null,it!==null&&(ns=gn(it),it!==ns||it.tag!==5&&it.tag!==6)&&(it=null)):(st=null,it=_e),st!==it)){if(lt=Vc,We="onMouseLeave",ye="onMouseEnter",he="mouse",(r==="pointerout"||r==="pointerover")&&(lt=gu,We="onPointerLeave",ye="onPointerEnter",he="pointer"),ns=st==null?ze:ci(st),je=it==null?ze:ci(it),ze=new lt(We,he+"leave",st,u,Be),ze.target=ns,ze.relatedTarget=je,We=null,oi(Be)===_e&&(lt=new lt(ye,he+"enter",it,u,Be),lt.target=je,lt.relatedTarget=ns,We=lt),ns=We,st&&it)t:{for(lt=st,ye=it,he=0,je=lt;je;je=C(je))he++;for(je=0,We=ye;We;We=C(We))je++;for(;0<he-je;)lt=C(lt),he--;for(;0<je-he;)ye=C(ye),je--;for(;he--;){if(lt===ye||ye!==null&&lt===ye.alternate)break t;lt=C(lt),ye=C(ye)}lt=null}else lt=null;st!==null&&I(He,ze,st,lt,!1),it!==null&&ns!==null&&I(He,ns,it,lt,!0)}}e:{if(ze=_e?ci(_e):window,st=ze.nodeName&&ze.nodeName.toLowerCase(),st==="select"||st==="input"&&ze.type==="file")var mt=hp;else if(ju(ze))if(Lr)mt=Xc;else{mt=Vi;var yt=Bl}else(st=ze.nodeName)&&st.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(mt=Ul);if(mt&&(mt=mt(r,_e))){Ll(He,mt,u,Be);break e}yt&&yt(r,ze,_e),r==="focusout"&&(yt=ze._wrapperState)&&yt.controlled&&ze.type==="number"&&Ft(ze,"number",ze.value)}switch(yt=_e?ci(_e):window,r){case"focusin":(ju(yt)||yt.contentEditable==="true")&&(Hi=yt,Wi=_e,Bo=null);break;case"focusout":Bo=Wi=Hi=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,_u(He,u,Be);break;case"selectionchange":if(Vl)break;case"keydown":case"keyup":_u(He,u,Be)}var bt;if(_a)e:{switch(r){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else ra?Bi(r,u)&&(St="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(St="onCompositionStart");St&&(yu&&u.locale!=="ko"&&(ra||St!=="onCompositionStart"?St==="onCompositionEnd"&&ra&&(bt=zc()):(Na=Be,Hs="value"in Na?Na.value:Na.textContent,ra=!0)),yt=x(_e,St),0<yt.length&&(St=new qc(St,r,null,u,Be),He.push({event:St,listeners:yt}),bt?St.data=bt:(bt=Kc(u),bt!==null&&(St.data=bt)))),(bt=sa?up(r,u):Sa(r,u))&&(_e=x(_e,"onBeforeInput"),0<_e.length&&(Be=new qc("onBeforeInput","beforeinput",null,u,Be),He.push({event:Be,listeners:_e}),Be.data=bt))}rd(He,o)})}function d(r,o,u){return{instance:r,listener:o,currentTarget:u}}function x(r,o){for(var u=o+"Capture",y=[];r!==null;){var _=r,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=Ce(r,u),P!=null&&y.unshift(d(r,P,_)),P=Ce(r,o),P!=null&&y.push(d(r,P,_))),r=r.return}return y}function C(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function I(r,o,u,y,_){for(var P=o._reactName,z=[];u!==null&&u!==y;){var se=u,ce=se.alternate,_e=se.stateNode;if(ce!==null&&ce===y)break;se.tag===5&&_e!==null&&(se=_e,_?(ce=Ce(u,P),ce!=null&&z.unshift(d(u,ce,se))):_||(ce=Ce(u,P),ce!=null&&z.push(d(u,ce,se)))),u=u.return}z.length!==0&&r.push({event:o,listeners:z})}var V=/\r\n?/g,ie=/\u0000|\uFFFD/g;function ve(r){return(typeof r=="string"?r:""+r).replace(V,`
`).replace(ie,"")}function Ne(r,o,u){if(o=ve(o),ve(r)!==o&&u)throw Error(n(425))}function Le(){}var et=null,vt=null;function Ot(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xs=typeof setTimeout=="function"?setTimeout:void 0,ls=typeof clearTimeout=="function"?clearTimeout:void 0,qs=typeof Promise=="function"?Promise:void 0,Ls=typeof queueMicrotask=="function"?queueMicrotask:typeof qs<"u"?function(r){return qs.resolve(null).then(r).catch(Xi)}:xs;function Xi(r){setTimeout(function(){throw r})}function id(r,o){var u=o,y=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(y===0){r.removeChild(_),jr(o);return}y--}else u!=="$"&&u!=="$?"&&u!=="$!"||y++;u=_}while(u);jr(o)}function ka(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function Tu(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return r;o--}else u==="/$"&&o++}r=r.previousSibling}return null}var ii=Math.random().toString(36).slice(2),zr="__reactFiber$"+ii,Yi="__reactProps$"+ii,vn="__reactContainer$"+ii,Qi="__reactEvents$"+ii,fp="__reactListeners$"+ii,xp="__reactHandles$"+ii;function oi(r){var o=r[zr];if(o)return o;for(var u=r.parentNode;u;){if(o=u[vn]||u[zr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Tu(r);r!==null;){if(u=r[zr])return u;r=Tu(r)}return o}r=u,u=r.parentNode}return null}function li(r){return r=r[zr]||r[vn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ci(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ql(r){return r[Yi]||null}var gp=[],Zl=-1;function Ji(r){return{current:r}}function Mn(r){0>Zl||(r.current=gp[Zl],gp[Zl]=null,Zl--)}function kn(r,o){Zl++,gp[Zl]=r.current,r.current=o}var eo={},Fs=Ji(eo),sr=Ji(!1),Ho=eo;function Gl(r,o){var u=r.type.contextTypes;if(!u)return eo;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in u)_[P]=o[P];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=_),_}function rr(r){return r=r.childContextTypes,r!=null}function Du(){Mn(sr),Mn(Fs)}function m0(r,o,u){if(Fs.current!==eo)throw Error(n(168));kn(Fs,o),kn(sr,u)}function h0(r,o,u){var y=r.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return u;y=y.getChildContext();for(var _ in y)if(!(_ in o))throw Error(n(108,le(r)||"Unknown",_));return F({},u,y)}function Iu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||eo,Ho=Fs.current,kn(Fs,r),kn(sr,sr.current),!0}function p0(r,o,u){var y=r.stateNode;if(!y)throw Error(n(169));u?(r=h0(r,o,Ho),y.__reactInternalMemoizedMergedChildContext=r,Mn(sr),Mn(Fs),kn(Fs,r)):Mn(sr),kn(sr,u)}var di=null,Ru=!1,vp=!1;function f0(r){di===null?di=[r]:di.push(r)}function EC(r){Ru=!0,f0(r)}function to(){if(!vp&&di!==null){vp=!0;var r=0,o=nn;try{var u=di;for(nn=1;r<u.length;r++){var y=u[r];do y=y(!0);while(y!==null)}di=null,Ru=!1}catch(_){throw di!==null&&(di=di.slice(r+1)),Cl(dn,to),_}finally{nn=o,vp=!1}}return null}var Kl=[],Xl=0,Mu=null,Ou=0,Br=[],Ur=0,Wo=null,ui=1,mi="";function qo(r,o){Kl[Xl++]=Ou,Kl[Xl++]=Mu,Mu=r,Ou=o}function x0(r,o,u){Br[Ur++]=ui,Br[Ur++]=mi,Br[Ur++]=Wo,Wo=r;var y=ui;r=mi;var _=32-rt(y)-1;y&=~(1<<_),u+=1;var P=32-rt(o)+_;if(30<P){var z=_-_%5;P=(y&(1<<z)-1).toString(32),y>>=z,_-=z,ui=1<<32-rt(o)+_|u<<_|y,mi=P+r}else ui=1<<P|u<<_|y,mi=r}function yp(r){r.return!==null&&(qo(r,1),x0(r,1,0))}function bp(r){for(;r===Mu;)Mu=Kl[--Xl],Kl[Xl]=null,Ou=Kl[--Xl],Kl[Xl]=null;for(;r===Wo;)Wo=Br[--Ur],Br[Ur]=null,mi=Br[--Ur],Br[Ur]=null,ui=Br[--Ur],Br[Ur]=null}var Sr=null,Ar=null,Ln=!1,ia=null;function g0(r,o){var u=qr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=r,o=r.deletions,o===null?(r.deletions=[u],r.flags|=16):o.push(u)}function v0(r,o){switch(r.tag){case 5:var u=r.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Sr=r,Ar=ka(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Sr=r,Ar=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Wo!==null?{id:ui,overflow:mi}:null,r.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=qr(18,null,null,0),u.stateNode=o,u.return=r,r.child=u,Sr=r,Ar=null,!0):!1;default:return!1}}function jp(r){return(r.mode&1)!==0&&(r.flags&128)===0}function wp(r){if(Ln){var o=Ar;if(o){var u=o;if(!v0(r,o)){if(jp(r))throw Error(n(418));o=ka(u.nextSibling);var y=Sr;o&&v0(r,o)?g0(y,u):(r.flags=r.flags&-4097|2,Ln=!1,Sr=r)}}else{if(jp(r))throw Error(n(418));r.flags=r.flags&-4097|2,Ln=!1,Sr=r}}}function y0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Sr=r}function Lu(r){if(r!==Sr)return!1;if(!Ln)return y0(r),Ln=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!Ot(r.type,r.memoizedProps)),o&&(o=Ar)){if(jp(r))throw b0(),Error(n(418));for(;o;)g0(r,o),o=ka(o.nextSibling)}if(y0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(o===0){Ar=ka(r.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}r=r.nextSibling}Ar=null}}else Ar=Sr?ka(r.stateNode.nextSibling):null;return!0}function b0(){for(var r=Ar;r;)r=ka(r.nextSibling)}function Yl(){Ar=Sr=null,Ln=!1}function Np(r){ia===null?ia=[r]:ia.push(r)}var kC=k.ReactCurrentBatchConfig;function od(r,o,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var y=u.stateNode}if(!y)throw Error(n(147,r));var _=y,P=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===P?o.ref:(o=function(z){var se=_.refs;z===null?delete se[P]:se[P]=z},o._stringRef=P,o)}if(typeof r!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,r))}return r}function Fu(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function j0(r){var o=r._init;return o(r._payload)}function w0(r){function o(ye,he){if(r){var je=ye.deletions;je===null?(ye.deletions=[he],ye.flags|=16):je.push(he)}}function u(ye,he){if(!r)return null;for(;he!==null;)o(ye,he),he=he.sibling;return null}function y(ye,he){for(ye=new Map;he!==null;)he.key!==null?ye.set(he.key,he):ye.set(he.index,he),he=he.sibling;return ye}function _(ye,he){return ye=co(ye,he),ye.index=0,ye.sibling=null,ye}function P(ye,he,je){return ye.index=je,r?(je=ye.alternate,je!==null?(je=je.index,je<he?(ye.flags|=2,he):je):(ye.flags|=2,he)):(ye.flags|=1048576,he)}function z(ye){return r&&ye.alternate===null&&(ye.flags|=2),ye}function se(ye,he,je,We){return he===null||he.tag!==6?(he=ff(je,ye.mode,We),he.return=ye,he):(he=_(he,je),he.return=ye,he)}function ce(ye,he,je,We){var mt=je.type;return mt===H?Be(ye,he,je.props.children,We,je.key):he!==null&&(he.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===J&&j0(mt)===he.type)?(We=_(he,je.props),We.ref=od(ye,he,je),We.return=ye,We):(We=lm(je.type,je.key,je.props,null,ye.mode,We),We.ref=od(ye,he,je),We.return=ye,We)}function _e(ye,he,je,We){return he===null||he.tag!==4||he.stateNode.containerInfo!==je.containerInfo||he.stateNode.implementation!==je.implementation?(he=xf(je,ye.mode,We),he.return=ye,he):(he=_(he,je.children||[]),he.return=ye,he)}function Be(ye,he,je,We,mt){return he===null||he.tag!==7?(he=el(je,ye.mode,We,mt),he.return=ye,he):(he=_(he,je),he.return=ye,he)}function He(ye,he,je){if(typeof he=="string"&&he!==""||typeof he=="number")return he=ff(""+he,ye.mode,je),he.return=ye,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case R:return je=lm(he.type,he.key,he.props,null,ye.mode,je),je.ref=od(ye,null,he),je.return=ye,je;case O:return he=xf(he,ye.mode,je),he.return=ye,he;case J:var We=he._init;return He(ye,We(he._payload),je)}if(Q(he)||ae(he))return he=el(he,ye.mode,je,null),he.return=ye,he;Fu(ye,he)}return null}function ze(ye,he,je,We){var mt=he!==null?he.key:null;if(typeof je=="string"&&je!==""||typeof je=="number")return mt!==null?null:se(ye,he,""+je,We);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case R:return je.key===mt?ce(ye,he,je,We):null;case O:return je.key===mt?_e(ye,he,je,We):null;case J:return mt=je._init,ze(ye,he,mt(je._payload),We)}if(Q(je)||ae(je))return mt!==null?null:Be(ye,he,je,We,null);Fu(ye,je)}return null}function st(ye,he,je,We,mt){if(typeof We=="string"&&We!==""||typeof We=="number")return ye=ye.get(je)||null,se(he,ye,""+We,mt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case R:return ye=ye.get(We.key===null?je:We.key)||null,ce(he,ye,We,mt);case O:return ye=ye.get(We.key===null?je:We.key)||null,_e(he,ye,We,mt);case J:var yt=We._init;return st(ye,he,je,yt(We._payload),mt)}if(Q(We)||ae(We))return ye=ye.get(je)||null,Be(he,ye,We,mt,null);Fu(he,We)}return null}function it(ye,he,je,We){for(var mt=null,yt=null,bt=he,St=he=0,Ns=null;bt!==null&&St<je.length;St++){bt.index>St?(Ns=bt,bt=null):Ns=bt.sibling;var un=ze(ye,bt,je[St],We);if(un===null){bt===null&&(bt=Ns);break}r&&bt&&un.alternate===null&&o(ye,bt),he=P(un,he,St),yt===null?mt=un:yt.sibling=un,yt=un,bt=Ns}if(St===je.length)return u(ye,bt),Ln&&qo(ye,St),mt;if(bt===null){for(;St<je.length;St++)bt=He(ye,je[St],We),bt!==null&&(he=P(bt,he,St),yt===null?mt=bt:yt.sibling=bt,yt=bt);return Ln&&qo(ye,St),mt}for(bt=y(ye,bt);St<je.length;St++)Ns=st(bt,ye,St,je[St],We),Ns!==null&&(r&&Ns.alternate!==null&&bt.delete(Ns.key===null?St:Ns.key),he=P(Ns,he,St),yt===null?mt=Ns:yt.sibling=Ns,yt=Ns);return r&&bt.forEach(function(uo){return o(ye,uo)}),Ln&&qo(ye,St),mt}function lt(ye,he,je,We){var mt=ae(je);if(typeof mt!="function")throw Error(n(150));if(je=mt.call(je),je==null)throw Error(n(151));for(var yt=mt=null,bt=he,St=he=0,Ns=null,un=je.next();bt!==null&&!un.done;St++,un=je.next()){bt.index>St?(Ns=bt,bt=null):Ns=bt.sibling;var uo=ze(ye,bt,un.value,We);if(uo===null){bt===null&&(bt=Ns);break}r&&bt&&uo.alternate===null&&o(ye,bt),he=P(uo,he,St),yt===null?mt=uo:yt.sibling=uo,yt=uo,bt=Ns}if(un.done)return u(ye,bt),Ln&&qo(ye,St),mt;if(bt===null){for(;!un.done;St++,un=je.next())un=He(ye,un.value,We),un!==null&&(he=P(un,he,St),yt===null?mt=un:yt.sibling=un,yt=un);return Ln&&qo(ye,St),mt}for(bt=y(ye,bt);!un.done;St++,un=je.next())un=st(bt,ye,St,un.value,We),un!==null&&(r&&un.alternate!==null&&bt.delete(un.key===null?St:un.key),he=P(un,he,St),yt===null?mt=un:yt.sibling=un,yt=un);return r&&bt.forEach(function(c_){return o(ye,c_)}),Ln&&qo(ye,St),mt}function ns(ye,he,je,We){if(typeof je=="object"&&je!==null&&je.type===H&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case R:e:{for(var mt=je.key,yt=he;yt!==null;){if(yt.key===mt){if(mt=je.type,mt===H){if(yt.tag===7){u(ye,yt.sibling),he=_(yt,je.props.children),he.return=ye,ye=he;break e}}else if(yt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===J&&j0(mt)===yt.type){u(ye,yt.sibling),he=_(yt,je.props),he.ref=od(ye,yt,je),he.return=ye,ye=he;break e}u(ye,yt);break}else o(ye,yt);yt=yt.sibling}je.type===H?(he=el(je.props.children,ye.mode,We,je.key),he.return=ye,ye=he):(We=lm(je.type,je.key,je.props,null,ye.mode,We),We.ref=od(ye,he,je),We.return=ye,ye=We)}return z(ye);case O:e:{for(yt=je.key;he!==null;){if(he.key===yt)if(he.tag===4&&he.stateNode.containerInfo===je.containerInfo&&he.stateNode.implementation===je.implementation){u(ye,he.sibling),he=_(he,je.children||[]),he.return=ye,ye=he;break e}else{u(ye,he);break}else o(ye,he);he=he.sibling}he=xf(je,ye.mode,We),he.return=ye,ye=he}return z(ye);case J:return yt=je._init,ns(ye,he,yt(je._payload),We)}if(Q(je))return it(ye,he,je,We);if(ae(je))return lt(ye,he,je,We);Fu(ye,je)}return typeof je=="string"&&je!==""||typeof je=="number"?(je=""+je,he!==null&&he.tag===6?(u(ye,he.sibling),he=_(he,je),he.return=ye,ye=he):(u(ye,he),he=ff(je,ye.mode,We),he.return=ye,ye=he),z(ye)):u(ye,he)}return ns}var Ql=w0(!0),N0=w0(!1),$u=Ji(null),zu=null,Jl=null,Cp=null;function _p(){Cp=Jl=zu=null}function Sp(r){var o=$u.current;Mn($u),r._currentValue=o}function Ap(r,o,u){for(;r!==null;){var y=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),r===u)break;r=r.return}}function ec(r,o){zu=r,Cp=Jl=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(ar=!0),r.firstContext=null)}function Vr(r){var o=r._currentValue;if(Cp!==r)if(r={context:r,memoizedValue:o,next:null},Jl===null){if(zu===null)throw Error(n(308));Jl=r,zu.dependencies={lanes:0,firstContext:r}}else Jl=Jl.next=r;return o}var Zo=null;function Pp(r){Zo===null?Zo=[r]:Zo.push(r)}function C0(r,o,u,y){var _=o.interleaved;return _===null?(u.next=u,Pp(o)):(u.next=_.next,_.next=u),o.interleaved=u,hi(r,y)}function hi(r,o){r.lanes|=o;var u=r.alternate;for(u!==null&&(u.lanes|=o),u=r,r=r.return;r!==null;)r.childLanes|=o,u=r.alternate,u!==null&&(u.childLanes|=o),u=r,r=r.return;return u.tag===3?u.stateNode:null}var no=!1;function Ep(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _0(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function pi(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function so(r,o,u){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(an&2)!==0){var _=y.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),y.pending=o,hi(r,u)}return _=y.interleaved,_===null?(o.next=o,Pp(y)):(o.next=_.next,_.next=o),y.interleaved=o,hi(r,u)}function Bu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var y=o.lanes;y&=r.pendingLanes,u|=y,o.lanes=u,ta(r,u)}}function S0(r,o){var u=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,u===y)){var _=null,P=null;if(u=u.firstBaseUpdate,u!==null){do{var z={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};P===null?_=P=z:P=P.next=z,u=u.next}while(u!==null);P===null?_=P=o:P=P.next=o}else _=P=o;u={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:y.shared,effects:y.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}function Uu(r,o,u,y){var _=r.updateQueue;no=!1;var P=_.firstBaseUpdate,z=_.lastBaseUpdate,se=_.shared.pending;if(se!==null){_.shared.pending=null;var ce=se,_e=ce.next;ce.next=null,z===null?P=_e:z.next=_e,z=ce;var Be=r.alternate;Be!==null&&(Be=Be.updateQueue,se=Be.lastBaseUpdate,se!==z&&(se===null?Be.firstBaseUpdate=_e:se.next=_e,Be.lastBaseUpdate=ce))}if(P!==null){var He=_.baseState;z=0,Be=_e=ce=null,se=P;do{var ze=se.lane,st=se.eventTime;if((y&ze)===ze){Be!==null&&(Be=Be.next={eventTime:st,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var it=r,lt=se;switch(ze=o,st=u,lt.tag){case 1:if(it=lt.payload,typeof it=="function"){He=it.call(st,He,ze);break e}He=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=lt.payload,ze=typeof it=="function"?it.call(st,He,ze):it,ze==null)break e;He=F({},He,ze);break e;case 2:no=!0}}se.callback!==null&&se.lane!==0&&(r.flags|=64,ze=_.effects,ze===null?_.effects=[se]:ze.push(se))}else st={eventTime:st,lane:ze,tag:se.tag,payload:se.payload,callback:se.callback,next:null},Be===null?(_e=Be=st,ce=He):Be=Be.next=st,z|=ze;if(se=se.next,se===null){if(se=_.shared.pending,se===null)break;ze=se,se=ze.next,ze.next=null,_.lastBaseUpdate=ze,_.shared.pending=null}}while(!0);if(Be===null&&(ce=He),_.baseState=ce,_.firstBaseUpdate=_e,_.lastBaseUpdate=Be,o=_.shared.interleaved,o!==null){_=o;do z|=_.lane,_=_.next;while(_!==o)}else P===null&&(_.shared.lanes=0);Xo|=z,r.lanes=z,r.memoizedState=He}}function A0(r,o,u){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var y=r[o],_=y.callback;if(_!==null){if(y.callback=null,y=u,typeof _!="function")throw Error(n(191,_));_.call(y)}}}var ld={},Ta=Ji(ld),cd=Ji(ld),dd=Ji(ld);function Go(r){if(r===ld)throw Error(n(174));return r}function kp(r,o){switch(kn(dd,o),kn(cd,r),kn(Ta,ld),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ge(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Ge(o,r)}Mn(Ta),kn(Ta,o)}function tc(){Mn(Ta),Mn(cd),Mn(dd)}function P0(r){Go(dd.current);var o=Go(Ta.current),u=Ge(o,r.type);o!==u&&(kn(cd,r),kn(Ta,u))}function Tp(r){cd.current===r&&(Mn(Ta),Mn(cd))}var qn=Ji(0);function Vu(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Dp=[];function Ip(){for(var r=0;r<Dp.length;r++)Dp[r]._workInProgressVersionPrimary=null;Dp.length=0}var Hu=k.ReactCurrentDispatcher,Rp=k.ReactCurrentBatchConfig,Ko=0,Zn=null,gs=null,js=null,Wu=!1,ud=!1,md=0,TC=0;function $s(){throw Error(n(321))}function Mp(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Cr(r[u],o[u]))return!1;return!0}function Op(r,o,u,y,_,P){if(Ko=P,Zn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Hu.current=r===null||r.memoizedState===null?MC:OC,r=u(y,_),ud){P=0;do{if(ud=!1,md=0,25<=P)throw Error(n(301));P+=1,js=gs=null,o.updateQueue=null,Hu.current=LC,r=u(y,_)}while(ud)}if(Hu.current=Gu,o=gs!==null&&gs.next!==null,Ko=0,js=gs=Zn=null,Wu=!1,o)throw Error(n(300));return r}function Lp(){var r=md!==0;return md=0,r}function Da(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?Zn.memoizedState=js=r:js=js.next=r,js}function Hr(){if(gs===null){var r=Zn.alternate;r=r!==null?r.memoizedState:null}else r=gs.next;var o=js===null?Zn.memoizedState:js.next;if(o!==null)js=o,gs=r;else{if(r===null)throw Error(n(310));gs=r,r={memoizedState:gs.memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},js===null?Zn.memoizedState=js=r:js=js.next=r}return js}function hd(r,o){return typeof o=="function"?o(r):o}function Fp(r){var o=Hr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var y=gs,_=y.baseQueue,P=u.pending;if(P!==null){if(_!==null){var z=_.next;_.next=P.next,P.next=z}y.baseQueue=_=P,u.pending=null}if(_!==null){P=_.next,y=y.baseState;var se=z=null,ce=null,_e=P;do{var Be=_e.lane;if((Ko&Be)===Be)ce!==null&&(ce=ce.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),y=_e.hasEagerState?_e.eagerState:r(y,_e.action);else{var He={lane:Be,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ce===null?(se=ce=He,z=y):ce=ce.next=He,Zn.lanes|=Be,Xo|=Be}_e=_e.next}while(_e!==null&&_e!==P);ce===null?z=y:ce.next=se,Cr(y,o.memoizedState)||(ar=!0),o.memoizedState=y,o.baseState=z,o.baseQueue=ce,u.lastRenderedState=y}if(r=u.interleaved,r!==null){_=r;do P=_.lane,Zn.lanes|=P,Xo|=P,_=_.next;while(_!==r)}else _===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function $p(r){var o=Hr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var y=u.dispatch,_=u.pending,P=o.memoizedState;if(_!==null){u.pending=null;var z=_=_.next;do P=r(P,z.action),z=z.next;while(z!==_);Cr(P,o.memoizedState)||(ar=!0),o.memoizedState=P,o.baseQueue===null&&(o.baseState=P),u.lastRenderedState=P}return[P,y]}function E0(){}function k0(r,o){var u=Zn,y=Hr(),_=o(),P=!Cr(y.memoizedState,_);if(P&&(y.memoizedState=_,ar=!0),y=y.queue,zp(I0.bind(null,u,y,r),[r]),y.getSnapshot!==o||P||js!==null&&js.memoizedState.tag&1){if(u.flags|=2048,pd(9,D0.bind(null,u,y,_,o),void 0,null),ws===null)throw Error(n(349));(Ko&30)!==0||T0(u,o,_)}return _}function T0(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Zn.updateQueue,o===null?(o={lastEffect:null,stores:null},Zn.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function D0(r,o,u,y){o.value=u,o.getSnapshot=y,R0(o)&&M0(r)}function I0(r,o,u){return u(function(){R0(o)&&M0(r)})}function R0(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Cr(r,u)}catch{return!0}}function M0(r){var o=hi(r,1);o!==null&&da(o,r,1,-1)}function O0(r){var o=Da();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hd,lastRenderedState:r},o.queue=r,r=r.dispatch=RC.bind(null,Zn,r),[o.memoizedState,r]}function pd(r,o,u,y){return r={tag:r,create:o,destroy:u,deps:y,next:null},o=Zn.updateQueue,o===null?(o={lastEffect:null,stores:null},Zn.updateQueue=o,o.lastEffect=r.next=r):(u=o.lastEffect,u===null?o.lastEffect=r.next=r:(y=u.next,u.next=r,r.next=y,o.lastEffect=r)),r}function L0(){return Hr().memoizedState}function qu(r,o,u,y){var _=Da();Zn.flags|=r,_.memoizedState=pd(1|o,u,void 0,y===void 0?null:y)}function Zu(r,o,u,y){var _=Hr();y=y===void 0?null:y;var P=void 0;if(gs!==null){var z=gs.memoizedState;if(P=z.destroy,y!==null&&Mp(y,z.deps)){_.memoizedState=pd(o,u,P,y);return}}Zn.flags|=r,_.memoizedState=pd(1|o,u,P,y)}function F0(r,o){return qu(8390656,8,r,o)}function zp(r,o){return Zu(2048,8,r,o)}function $0(r,o){return Zu(4,2,r,o)}function z0(r,o){return Zu(4,4,r,o)}function B0(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function U0(r,o,u){return u=u!=null?u.concat([r]):null,Zu(4,4,B0.bind(null,o,r),u)}function Bp(){}function V0(r,o){var u=Hr();o=o===void 0?null:o;var y=u.memoizedState;return y!==null&&o!==null&&Mp(o,y[1])?y[0]:(u.memoizedState=[r,o],r)}function H0(r,o){var u=Hr();o=o===void 0?null:o;var y=u.memoizedState;return y!==null&&o!==null&&Mp(o,y[1])?y[0]:(r=r(),u.memoizedState=[r,o],r)}function W0(r,o,u){return(Ko&21)===0?(r.baseState&&(r.baseState=!1,ar=!0),r.memoizedState=u):(Cr(u,o)||(u=cu(),Zn.lanes|=u,Xo|=u,r.baseState=!0),o)}function DC(r,o){var u=nn;nn=u!==0&&4>u?u:4,r(!0);var y=Rp.transition;Rp.transition={};try{r(!1),o()}finally{nn=u,Rp.transition=y}}function q0(){return Hr().memoizedState}function IC(r,o,u){var y=oo(r);if(u={lane:y,action:u,hasEagerState:!1,eagerState:null,next:null},Z0(r))G0(o,u);else if(u=C0(r,o,u,y),u!==null){var _=Gs();da(u,r,y,_),K0(u,o,y)}}function RC(r,o,u){var y=oo(r),_={lane:y,action:u,hasEagerState:!1,eagerState:null,next:null};if(Z0(r))G0(o,_);else{var P=r.alternate;if(r.lanes===0&&(P===null||P.lanes===0)&&(P=o.lastRenderedReducer,P!==null))try{var z=o.lastRenderedState,se=P(z,u);if(_.hasEagerState=!0,_.eagerState=se,Cr(se,z)){var ce=o.interleaved;ce===null?(_.next=_,Pp(o)):(_.next=ce.next,ce.next=_),o.interleaved=_;return}}catch{}finally{}u=C0(r,o,_,y),u!==null&&(_=Gs(),da(u,r,y,_),K0(u,o,y))}}function Z0(r){var o=r.alternate;return r===Zn||o!==null&&o===Zn}function G0(r,o){ud=Wu=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function K0(r,o,u){if((u&4194240)!==0){var y=o.lanes;y&=r.pendingLanes,u|=y,o.lanes=u,ta(r,u)}}var Gu={readContext:Vr,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useInsertionEffect:$s,useLayoutEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useDeferredValue:$s,useTransition:$s,useMutableSource:$s,useSyncExternalStore:$s,useId:$s,unstable_isNewReconciler:!1},MC={readContext:Vr,useCallback:function(r,o){return Da().memoizedState=[r,o===void 0?null:o],r},useContext:Vr,useEffect:F0,useImperativeHandle:function(r,o,u){return u=u!=null?u.concat([r]):null,qu(4194308,4,B0.bind(null,o,r),u)},useLayoutEffect:function(r,o){return qu(4194308,4,r,o)},useInsertionEffect:function(r,o){return qu(4,2,r,o)},useMemo:function(r,o){var u=Da();return o=o===void 0?null:o,r=r(),u.memoizedState=[r,o],r},useReducer:function(r,o,u){var y=Da();return o=u!==void 0?u(o):o,y.memoizedState=y.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},y.queue=r,r=r.dispatch=IC.bind(null,Zn,r),[y.memoizedState,r]},useRef:function(r){var o=Da();return r={current:r},o.memoizedState=r},useState:O0,useDebugValue:Bp,useDeferredValue:function(r){return Da().memoizedState=r},useTransition:function(){var r=O0(!1),o=r[0];return r=DC.bind(null,r[1]),Da().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,u){var y=Zn,_=Da();if(Ln){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),ws===null)throw Error(n(349));(Ko&30)!==0||T0(y,o,u)}_.memoizedState=u;var P={value:u,getSnapshot:o};return _.queue=P,F0(I0.bind(null,y,P,r),[r]),y.flags|=2048,pd(9,D0.bind(null,y,P,u,o),void 0,null),u},useId:function(){var r=Da(),o=ws.identifierPrefix;if(Ln){var u=mi,y=ui;u=(y&~(1<<32-rt(y)-1)).toString(32)+u,o=":"+o+"R"+u,u=md++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=TC++,o=":"+o+"r"+u.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},OC={readContext:Vr,useCallback:V0,useContext:Vr,useEffect:zp,useImperativeHandle:U0,useInsertionEffect:$0,useLayoutEffect:z0,useMemo:H0,useReducer:Fp,useRef:L0,useState:function(){return Fp(hd)},useDebugValue:Bp,useDeferredValue:function(r){var o=Hr();return W0(o,gs.memoizedState,r)},useTransition:function(){var r=Fp(hd)[0],o=Hr().memoizedState;return[r,o]},useMutableSource:E0,useSyncExternalStore:k0,useId:q0,unstable_isNewReconciler:!1},LC={readContext:Vr,useCallback:V0,useContext:Vr,useEffect:zp,useImperativeHandle:U0,useInsertionEffect:$0,useLayoutEffect:z0,useMemo:H0,useReducer:$p,useRef:L0,useState:function(){return $p(hd)},useDebugValue:Bp,useDeferredValue:function(r){var o=Hr();return gs===null?o.memoizedState=r:W0(o,gs.memoizedState,r)},useTransition:function(){var r=$p(hd)[0],o=Hr().memoizedState;return[r,o]},useMutableSource:E0,useSyncExternalStore:k0,useId:q0,unstable_isNewReconciler:!1};function oa(r,o){if(r&&r.defaultProps){o=F({},o),r=r.defaultProps;for(var u in r)o[u]===void 0&&(o[u]=r[u]);return o}return o}function Up(r,o,u,y){o=r.memoizedState,u=u(y,o),u=u==null?o:F({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Ku={isMounted:function(r){return(r=r._reactInternals)?gn(r)===r:!1},enqueueSetState:function(r,o,u){r=r._reactInternals;var y=Gs(),_=oo(r),P=pi(y,_);P.payload=o,u!=null&&(P.callback=u),o=so(r,P,_),o!==null&&(da(o,r,_,y),Bu(o,r,_))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var y=Gs(),_=oo(r),P=pi(y,_);P.tag=1,P.payload=o,u!=null&&(P.callback=u),o=so(r,P,_),o!==null&&(da(o,r,_,y),Bu(o,r,_))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Gs(),y=oo(r),_=pi(u,y);_.tag=2,o!=null&&(_.callback=o),o=so(r,_,y),o!==null&&(da(o,r,y,u),Bu(o,r,y))}};function X0(r,o,u,y,_,P,z){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,P,z):o.prototype&&o.prototype.isPureReactComponent?!Aa(u,y)||!Aa(_,P):!0}function Y0(r,o,u){var y=!1,_=eo,P=o.contextType;return typeof P=="object"&&P!==null?P=Vr(P):(_=rr(o)?Ho:Fs.current,y=o.contextTypes,P=(y=y!=null)?Gl(r,_):eo),o=new o(u,P),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ku,r.stateNode=o,o._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=_,r.__reactInternalMemoizedMaskedChildContext=P),o}function Q0(r,o,u,y){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,y),o.state!==r&&Ku.enqueueReplaceState(o,o.state,null)}function Vp(r,o,u,y){var _=r.stateNode;_.props=u,_.state=r.memoizedState,_.refs={},Ep(r);var P=o.contextType;typeof P=="object"&&P!==null?_.context=Vr(P):(P=rr(o)?Ho:Fs.current,_.context=Gl(r,P)),_.state=r.memoizedState,P=o.getDerivedStateFromProps,typeof P=="function"&&(Up(r,o,P,u),_.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(o=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),o!==_.state&&Ku.enqueueReplaceState(_,_.state,null),Uu(r,u,_,y),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308)}function nc(r,o){try{var u="",y=o;do u+=G(y),y=y.return;while(y);var _=u}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:r,source:o,stack:_,digest:null}}function Hp(r,o,u){return{value:r,source:null,stack:u??null,digest:o??null}}function Wp(r,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var FC=typeof WeakMap=="function"?WeakMap:Map;function J0(r,o,u){u=pi(-1,u),u.tag=3,u.payload={element:null};var y=o.value;return u.callback=function(){nm||(nm=!0,of=y),Wp(r,o)},u}function ev(r,o,u){u=pi(-1,u),u.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var _=o.value;u.payload=function(){return y(_)},u.callback=function(){Wp(r,o)}}var P=r.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(u.callback=function(){Wp(r,o),typeof y!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var z=o.stack;this.componentDidCatch(o.value,{componentStack:z!==null?z:""})}),u}function tv(r,o,u){var y=r.pingCache;if(y===null){y=r.pingCache=new FC;var _=new Set;y.set(o,_)}else _=y.get(o),_===void 0&&(_=new Set,y.set(o,_));_.has(u)||(_.add(u),r=QC.bind(null,r,o,u),o.then(r,r))}function nv(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function sv(r,o,u,y,_){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=pi(-1,1),o.tag=2,so(u,o,1))),u.lanes|=1),r):(r.flags|=65536,r.lanes=_,r)}var $C=k.ReactCurrentOwner,ar=!1;function Zs(r,o,u,y){o.child=r===null?N0(o,null,u,y):Ql(o,r.child,u,y)}function rv(r,o,u,y,_){u=u.render;var P=o.ref;return ec(o,_),y=Op(r,o,u,y,P,_),u=Lp(),r!==null&&!ar?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~_,fi(r,o,_)):(Ln&&u&&yp(o),o.flags|=1,Zs(r,o,y,_),o.child)}function av(r,o,u,y,_){if(r===null){var P=u.type;return typeof P=="function"&&!pf(P)&&P.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=P,iv(r,o,P,y,_)):(r=lm(u.type,null,y,o,o.mode,_),r.ref=o.ref,r.return=o,o.child=r)}if(P=r.child,(r.lanes&_)===0){var z=P.memoizedProps;if(u=u.compare,u=u!==null?u:Aa,u(z,y)&&r.ref===o.ref)return fi(r,o,_)}return o.flags|=1,r=co(P,y),r.ref=o.ref,r.return=o,o.child=r}function iv(r,o,u,y,_){if(r!==null){var P=r.memoizedProps;if(Aa(P,y)&&r.ref===o.ref)if(ar=!1,o.pendingProps=y=P,(r.lanes&_)!==0)(r.flags&131072)!==0&&(ar=!0);else return o.lanes=r.lanes,fi(r,o,_)}return qp(r,o,u,y,_)}function ov(r,o,u){var y=o.pendingProps,_=y.children,P=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(rc,Pr),Pr|=u;else{if((u&1073741824)===0)return r=P!==null?P.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,kn(rc,Pr),Pr|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:u,kn(rc,Pr),Pr|=y}else P!==null?(y=P.baseLanes|u,o.memoizedState=null):y=u,kn(rc,Pr),Pr|=y;return Zs(r,o,_,u),o.child}function lv(r,o){var u=o.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function qp(r,o,u,y,_){var P=rr(u)?Ho:Fs.current;return P=Gl(o,P),ec(o,_),u=Op(r,o,u,y,P,_),y=Lp(),r!==null&&!ar?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~_,fi(r,o,_)):(Ln&&y&&yp(o),o.flags|=1,Zs(r,o,u,_),o.child)}function cv(r,o,u,y,_){if(rr(u)){var P=!0;Iu(o)}else P=!1;if(ec(o,_),o.stateNode===null)Yu(r,o),Y0(o,u,y),Vp(o,u,y,_),y=!0;else if(r===null){var z=o.stateNode,se=o.memoizedProps;z.props=se;var ce=z.context,_e=u.contextType;typeof _e=="object"&&_e!==null?_e=Vr(_e):(_e=rr(u)?Ho:Fs.current,_e=Gl(o,_e));var Be=u.getDerivedStateFromProps,He=typeof Be=="function"||typeof z.getSnapshotBeforeUpdate=="function";He||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(se!==y||ce!==_e)&&Q0(o,z,y,_e),no=!1;var ze=o.memoizedState;z.state=ze,Uu(o,y,z,_),ce=o.memoizedState,se!==y||ze!==ce||sr.current||no?(typeof Be=="function"&&(Up(o,u,Be,y),ce=o.memoizedState),(se=no||X0(o,u,se,y,ze,ce,_e))?(He||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(o.flags|=4194308)):(typeof z.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=ce),z.props=y,z.state=ce,z.context=_e,y=se):(typeof z.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{z=o.stateNode,_0(r,o),se=o.memoizedProps,_e=o.type===o.elementType?se:oa(o.type,se),z.props=_e,He=o.pendingProps,ze=z.context,ce=u.contextType,typeof ce=="object"&&ce!==null?ce=Vr(ce):(ce=rr(u)?Ho:Fs.current,ce=Gl(o,ce));var st=u.getDerivedStateFromProps;(Be=typeof st=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(se!==He||ze!==ce)&&Q0(o,z,y,ce),no=!1,ze=o.memoizedState,z.state=ze,Uu(o,y,z,_);var it=o.memoizedState;se!==He||ze!==it||sr.current||no?(typeof st=="function"&&(Up(o,u,st,y),it=o.memoizedState),(_e=no||X0(o,u,_e,y,ze,it,ce)||!1)?(Be||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(y,it,ce),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(y,it,ce)),typeof z.componentDidUpdate=="function"&&(o.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof z.componentDidUpdate!="function"||se===r.memoizedProps&&ze===r.memoizedState||(o.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||se===r.memoizedProps&&ze===r.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=it),z.props=y,z.state=it,z.context=ce,y=_e):(typeof z.componentDidUpdate!="function"||se===r.memoizedProps&&ze===r.memoizedState||(o.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||se===r.memoizedProps&&ze===r.memoizedState||(o.flags|=1024),y=!1)}return Zp(r,o,u,y,P,_)}function Zp(r,o,u,y,_,P){lv(r,o);var z=(o.flags&128)!==0;if(!y&&!z)return _&&p0(o,u,!1),fi(r,o,P);y=o.stateNode,$C.current=o;var se=z&&typeof u.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,r!==null&&z?(o.child=Ql(o,r.child,null,P),o.child=Ql(o,null,se,P)):Zs(r,o,se,P),o.memoizedState=y.state,_&&p0(o,u,!0),o.child}function dv(r){var o=r.stateNode;o.pendingContext?m0(r,o.pendingContext,o.pendingContext!==o.context):o.context&&m0(r,o.context,!1),kp(r,o.containerInfo)}function uv(r,o,u,y,_){return Yl(),Np(_),o.flags|=256,Zs(r,o,u,y),o.child}var Gp={dehydrated:null,treeContext:null,retryLane:0};function Kp(r){return{baseLanes:r,cachePool:null,transitions:null}}function mv(r,o,u){var y=o.pendingProps,_=qn.current,P=!1,z=(o.flags&128)!==0,se;if((se=z)||(se=r!==null&&r.memoizedState===null?!1:(_&2)!==0),se?(P=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(_|=1),kn(qn,_&1),r===null)return wp(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(z=y.children,r=y.fallback,P?(y=o.mode,P=o.child,z={mode:"hidden",children:z},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=z):P=cm(z,y,0,null),r=el(r,y,u,null),P.return=o,r.return=o,P.sibling=r,o.child=P,o.child.memoizedState=Kp(u),o.memoizedState=Gp,r):Xp(o,z));if(_=r.memoizedState,_!==null&&(se=_.dehydrated,se!==null))return zC(r,o,z,y,se,_,u);if(P){P=y.fallback,z=o.mode,_=r.child,se=_.sibling;var ce={mode:"hidden",children:y.children};return(z&1)===0&&o.child!==_?(y=o.child,y.childLanes=0,y.pendingProps=ce,o.deletions=null):(y=co(_,ce),y.subtreeFlags=_.subtreeFlags&14680064),se!==null?P=co(se,P):(P=el(P,z,u,null),P.flags|=2),P.return=o,y.return=o,y.sibling=P,o.child=y,y=P,P=o.child,z=r.child.memoizedState,z=z===null?Kp(u):{baseLanes:z.baseLanes|u,cachePool:null,transitions:z.transitions},P.memoizedState=z,P.childLanes=r.childLanes&~u,o.memoizedState=Gp,y}return P=r.child,r=P.sibling,y=co(P,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=u),y.return=o,y.sibling=null,r!==null&&(u=o.deletions,u===null?(o.deletions=[r],o.flags|=16):u.push(r)),o.child=y,o.memoizedState=null,y}function Xp(r,o){return o=cm({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Xu(r,o,u,y){return y!==null&&Np(y),Ql(o,r.child,null,u),r=Xp(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function zC(r,o,u,y,_,P,z){if(u)return o.flags&256?(o.flags&=-257,y=Hp(Error(n(422))),Xu(r,o,z,y)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(P=y.fallback,_=o.mode,y=cm({mode:"visible",children:y.children},_,0,null),P=el(P,_,z,null),P.flags|=2,y.return=o,P.return=o,y.sibling=P,o.child=y,(o.mode&1)!==0&&Ql(o,r.child,null,z),o.child.memoizedState=Kp(z),o.memoizedState=Gp,P);if((o.mode&1)===0)return Xu(r,o,z,null);if(_.data==="$!"){if(y=_.nextSibling&&_.nextSibling.dataset,y)var se=y.dgst;return y=se,P=Error(n(419)),y=Hp(P,y,void 0),Xu(r,o,z,y)}if(se=(z&r.childLanes)!==0,ar||se){if(y=ws,y!==null){switch(z&-z){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(y.suspendedLanes|z))!==0?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,hi(r,_),da(y,r,_,-1))}return hf(),y=Hp(Error(n(421))),Xu(r,o,z,y)}return _.data==="$?"?(o.flags|=128,o.child=r.child,o=JC.bind(null,r),_._reactRetry=o,null):(r=P.treeContext,Ar=ka(_.nextSibling),Sr=o,Ln=!0,ia=null,r!==null&&(Br[Ur++]=ui,Br[Ur++]=mi,Br[Ur++]=Wo,ui=r.id,mi=r.overflow,Wo=o),o=Xp(o,y.children),o.flags|=4096,o)}function hv(r,o,u){r.lanes|=o;var y=r.alternate;y!==null&&(y.lanes|=o),Ap(r.return,o,u)}function Yp(r,o,u,y,_){var P=r.memoizedState;P===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:u,tailMode:_}:(P.isBackwards=o,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=u,P.tailMode=_)}function pv(r,o,u){var y=o.pendingProps,_=y.revealOrder,P=y.tail;if(Zs(r,o,y.children,u),y=qn.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hv(r,u,o);else if(r.tag===19)hv(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(kn(qn,y),(o.mode&1)===0)o.memoizedState=null;else switch(_){case"forwards":for(u=o.child,_=null;u!==null;)r=u.alternate,r!==null&&Vu(r)===null&&(_=u),u=u.sibling;u=_,u===null?(_=o.child,o.child=null):(_=u.sibling,u.sibling=null),Yp(o,!1,_,u,P);break;case"backwards":for(u=null,_=o.child,o.child=null;_!==null;){if(r=_.alternate,r!==null&&Vu(r)===null){o.child=_;break}r=_.sibling,_.sibling=u,u=_,_=r}Yp(o,!0,u,null,P);break;case"together":Yp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Yu(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function fi(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Xo|=o.lanes,(u&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,u=co(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=co(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function BC(r,o,u){switch(o.tag){case 3:dv(o),Yl();break;case 5:P0(o);break;case 1:rr(o.type)&&Iu(o);break;case 4:kp(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,_=o.memoizedProps.value;kn($u,y._currentValue),y._currentValue=_;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(kn(qn,qn.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?mv(r,o,u):(kn(qn,qn.current&1),r=fi(r,o,u),r!==null?r.sibling:null);kn(qn,qn.current&1);break;case 19:if(y=(u&o.childLanes)!==0,(r.flags&128)!==0){if(y)return pv(r,o,u);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),kn(qn,qn.current),y)break;return null;case 22:case 23:return o.lanes=0,ov(r,o,u)}return fi(r,o,u)}var fv,Qp,xv,gv;fv=function(r,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Qp=function(){},xv=function(r,o,u,y){var _=r.memoizedProps;if(_!==y){r=o.stateNode,Go(Ta.current);var P=null;switch(u){case"input":_=Je(r,_),y=Je(r,y),P=[];break;case"select":_=F({},_,{value:void 0}),y=F({},y,{value:void 0}),P=[];break;case"textarea":_=de(r,_),y=de(r,y),P=[];break;default:typeof _.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=Le)}Pn(u,y);var z;u=null;for(_e in _)if(!y.hasOwnProperty(_e)&&_.hasOwnProperty(_e)&&_[_e]!=null)if(_e==="style"){var se=_[_e];for(z in se)se.hasOwnProperty(z)&&(u||(u={}),u[z]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(l.hasOwnProperty(_e)?P||(P=[]):(P=P||[]).push(_e,null));for(_e in y){var ce=y[_e];if(se=_?.[_e],y.hasOwnProperty(_e)&&ce!==se&&(ce!=null||se!=null))if(_e==="style")if(se){for(z in se)!se.hasOwnProperty(z)||ce&&ce.hasOwnProperty(z)||(u||(u={}),u[z]="");for(z in ce)ce.hasOwnProperty(z)&&se[z]!==ce[z]&&(u||(u={}),u[z]=ce[z])}else u||(P||(P=[]),P.push(_e,u)),u=ce;else _e==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,se=se?se.__html:void 0,ce!=null&&se!==ce&&(P=P||[]).push(_e,ce)):_e==="children"?typeof ce!="string"&&typeof ce!="number"||(P=P||[]).push(_e,""+ce):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(l.hasOwnProperty(_e)?(ce!=null&&_e==="onScroll"&&Cn("scroll",r),P||se===ce||(P=[])):(P=P||[]).push(_e,ce))}u&&(P=P||[]).push("style",u);var _e=P;(o.updateQueue=_e)&&(o.flags|=4)}},gv=function(r,o,u,y){u!==y&&(o.flags|=4)};function fd(r,o){if(!Ln)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function zs(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,y=0;if(o)for(var _=r.child;_!==null;)u|=_.lanes|_.childLanes,y|=_.subtreeFlags&14680064,y|=_.flags&14680064,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)u|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=y,r.childLanes=u,o}function UC(r,o,u){var y=o.pendingProps;switch(bp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(o),null;case 1:return rr(o.type)&&Du(),zs(o),null;case 3:return y=o.stateNode,tc(),Mn(sr),Mn(Fs),Ip(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(Lu(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ia!==null&&(df(ia),ia=null))),Qp(r,o),zs(o),null;case 5:Tp(o);var _=Go(dd.current);if(u=o.type,r!==null&&o.stateNode!=null)xv(r,o,u,y,_),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(n(166));return zs(o),null}if(r=Go(Ta.current),Lu(o)){y=o.stateNode,u=o.type;var P=o.memoizedProps;switch(y[zr]=o,y[Yi]=P,r=(o.mode&1)!==0,u){case"dialog":Cn("cancel",y),Cn("close",y);break;case"iframe":case"object":case"embed":Cn("load",y);break;case"video":case"audio":for(_=0;_<Gi.length;_++)Cn(Gi[_],y);break;case"source":Cn("error",y);break;case"img":case"image":case"link":Cn("error",y),Cn("load",y);break;case"details":Cn("toggle",y);break;case"input":ot(y,P),Cn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Cn("invalid",y);break;case"textarea":Oe(y,P),Cn("invalid",y)}Pn(u,P),_=null;for(var z in P)if(P.hasOwnProperty(z)){var se=P[z];z==="children"?typeof se=="string"?y.textContent!==se&&(P.suppressHydrationWarning!==!0&&Ne(y.textContent,se,r),_=["children",se]):typeof se=="number"&&y.textContent!==""+se&&(P.suppressHydrationWarning!==!0&&Ne(y.textContent,se,r),_=["children",""+se]):l.hasOwnProperty(z)&&se!=null&&z==="onScroll"&&Cn("scroll",y)}switch(u){case"input":Ze(y),Tt(y,P,!0);break;case"textarea":Ze(y),be(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Le)}y=_,o.updateQueue=y,y!==null&&(o.flags|=4)}else{z=_.nodeType===9?_:_.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Me(u)),r==="http://www.w3.org/1999/xhtml"?u==="script"?(r=z.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=z.createElement(u,{is:y.is}):(r=z.createElement(u),u==="select"&&(z=r,y.multiple?z.multiple=!0:y.size&&(z.size=y.size))):r=z.createElementNS(r,u),r[zr]=o,r[Yi]=y,fv(r,o,!1,!1),o.stateNode=r;e:{switch(z=rn(u,y),u){case"dialog":Cn("cancel",r),Cn("close",r),_=y;break;case"iframe":case"object":case"embed":Cn("load",r),_=y;break;case"video":case"audio":for(_=0;_<Gi.length;_++)Cn(Gi[_],r);_=y;break;case"source":Cn("error",r),_=y;break;case"img":case"image":case"link":Cn("error",r),Cn("load",r),_=y;break;case"details":Cn("toggle",r),_=y;break;case"input":ot(r,y),_=Je(r,y),Cn("invalid",r);break;case"option":_=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},_=F({},y,{value:void 0}),Cn("invalid",r);break;case"textarea":Oe(r,y),_=de(r,y),Cn("invalid",r);break;default:_=y}Pn(u,_),se=_;for(P in se)if(se.hasOwnProperty(P)){var ce=se[P];P==="style"?Kn(r,ce):P==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&Kt(r,ce)):P==="children"?typeof ce=="string"?(u!=="textarea"||ce!=="")&&tn(r,ce):typeof ce=="number"&&tn(r,""+ce):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(l.hasOwnProperty(P)?ce!=null&&P==="onScroll"&&Cn("scroll",r):ce!=null&&T(r,P,ce,z))}switch(u){case"input":Ze(r),Tt(r,y,!1);break;case"textarea":Ze(r),be(r);break;case"option":y.value!=null&&r.setAttribute("value",""+ue(y.value));break;case"select":r.multiple=!!y.multiple,P=y.value,P!=null?pe(r,!!y.multiple,P,!1):y.defaultValue!=null&&pe(r,!!y.multiple,y.defaultValue,!0);break;default:typeof _.onClick=="function"&&(r.onclick=Le)}switch(u){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return zs(o),null;case 6:if(r&&o.stateNode!=null)gv(r,o,r.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(u=Go(dd.current),Go(Ta.current),Lu(o)){if(y=o.stateNode,u=o.memoizedProps,y[zr]=o,(P=y.nodeValue!==u)&&(r=Sr,r!==null))switch(r.tag){case 3:Ne(y.nodeValue,u,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ne(y.nodeValue,u,(r.mode&1)!==0)}P&&(o.flags|=4)}else y=(u.nodeType===9?u:u.ownerDocument).createTextNode(y),y[zr]=o,o.stateNode=y}return zs(o),null;case 13:if(Mn(qn),y=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ln&&Ar!==null&&(o.mode&1)!==0&&(o.flags&128)===0)b0(),Yl(),o.flags|=98560,P=!1;else if(P=Lu(o),y!==null&&y.dehydrated!==null){if(r===null){if(!P)throw Error(n(318));if(P=o.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[zr]=o}else Yl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zs(o),P=!1}else ia!==null&&(df(ia),ia=null),P=!0;if(!P)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(qn.current&1)!==0?vs===0&&(vs=3):hf())),o.updateQueue!==null&&(o.flags|=4),zs(o),null);case 4:return tc(),Qp(r,o),r===null&&Ki(o.stateNode.containerInfo),zs(o),null;case 10:return Sp(o.type._context),zs(o),null;case 17:return rr(o.type)&&Du(),zs(o),null;case 19:if(Mn(qn),P=o.memoizedState,P===null)return zs(o),null;if(y=(o.flags&128)!==0,z=P.rendering,z===null)if(y)fd(P,!1);else{if(vs!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(z=Vu(r),z!==null){for(o.flags|=128,fd(P,!1),y=z.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=u,u=o.child;u!==null;)P=u,r=y,P.flags&=14680066,z=P.alternate,z===null?(P.childLanes=0,P.lanes=r,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=z.childLanes,P.lanes=z.lanes,P.child=z.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=z.memoizedProps,P.memoizedState=z.memoizedState,P.updateQueue=z.updateQueue,P.type=z.type,r=z.dependencies,P.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return kn(qn,qn.current&1|2),o.child}r=r.sibling}P.tail!==null&&Se()>ac&&(o.flags|=128,y=!0,fd(P,!1),o.lanes=4194304)}else{if(!y)if(r=Vu(z),r!==null){if(o.flags|=128,y=!0,u=r.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),fd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!z.alternate&&!Ln)return zs(o),null}else 2*Se()-P.renderingStartTime>ac&&u!==1073741824&&(o.flags|=128,y=!0,fd(P,!1),o.lanes=4194304);P.isBackwards?(z.sibling=o.child,o.child=z):(u=P.last,u!==null?u.sibling=z:o.child=z,P.last=z)}return P.tail!==null?(o=P.tail,P.rendering=o,P.tail=o.sibling,P.renderingStartTime=Se(),o.sibling=null,u=qn.current,kn(qn,y?u&1|2:u&1),o):(zs(o),null);case 22:case 23:return mf(),y=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?(Pr&1073741824)!==0&&(zs(o),o.subtreeFlags&6&&(o.flags|=8192)):zs(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function VC(r,o){switch(bp(o),o.tag){case 1:return rr(o.type)&&Du(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return tc(),Mn(sr),Mn(Fs),Ip(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Tp(o),null;case 13:if(Mn(qn),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Yl()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Mn(qn),null;case 4:return tc(),null;case 10:return Sp(o.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var Qu=!1,Bs=!1,HC=typeof WeakSet=="function"?WeakSet:Set,at=null;function sc(r,o){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(y){Qn(r,o,y)}else u.current=null}function Jp(r,o,u){try{u()}catch(y){Qn(r,o,y)}}var vv=!1;function WC(r,o){if(et=Oo,r=Qc(),Jc(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var y=u.getSelection&&u.getSelection();if(y&&y.rangeCount!==0){u=y.anchorNode;var _=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{u.nodeType,P.nodeType}catch{u=null;break e}var z=0,se=-1,ce=-1,_e=0,Be=0,He=r,ze=null;t:for(;;){for(var st;He!==u||_!==0&&He.nodeType!==3||(se=z+_),He!==P||y!==0&&He.nodeType!==3||(ce=z+y),He.nodeType===3&&(z+=He.nodeValue.length),(st=He.firstChild)!==null;)ze=He,He=st;for(;;){if(He===r)break t;if(ze===u&&++_e===_&&(se=z),ze===P&&++Be===y&&(ce=z),(st=He.nextSibling)!==null)break;He=ze,ze=He.parentNode}He=st}u=se===-1||ce===-1?null:{start:se,end:ce}}else u=null}u=u||{start:0,end:0}}else u=null;for(vt={focusedElem:r,selectionRange:u},Oo=!1,at=o;at!==null;)if(o=at,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,at=r;else for(;at!==null;){o=at;try{var it=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var lt=it.memoizedProps,ns=it.memoizedState,ye=o.stateNode,he=ye.getSnapshotBeforeUpdate(o.elementType===o.type?lt:oa(o.type,lt),ns);ye.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var je=o.stateNode.containerInfo;je.nodeType===1?je.textContent="":je.nodeType===9&&je.documentElement&&je.removeChild(je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(We){Qn(o,o.return,We)}if(r=o.sibling,r!==null){r.return=o.return,at=r;break}at=o.return}return it=vv,vv=!1,it}function xd(r,o,u){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var _=y=y.next;do{if((_.tag&r)===r){var P=_.destroy;_.destroy=void 0,P!==void 0&&Jp(o,u,P)}_=_.next}while(_!==y)}}function Ju(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&r)===r){var y=u.create;u.destroy=y()}u=u.next}while(u!==o)}}function ef(r){var o=r.ref;if(o!==null){var u=r.stateNode;switch(r.tag){case 5:r=u;break;default:r=u}typeof o=="function"?o(r):o.current=r}}function yv(r){var o=r.alternate;o!==null&&(r.alternate=null,yv(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[zr],delete o[Yi],delete o[Qi],delete o[fp],delete o[xp])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function bv(r){return r.tag===5||r.tag===3||r.tag===4}function jv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||bv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tf(r,o,u){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(r,o):u.insertBefore(r,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(r,u)):(o=u,o.appendChild(r)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Le));else if(y!==4&&(r=r.child,r!==null))for(tf(r,o,u),r=r.sibling;r!==null;)tf(r,o,u),r=r.sibling}function nf(r,o,u){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(nf(r,o,u),r=r.sibling;r!==null;)nf(r,o,u),r=r.sibling}var Es=null,la=!1;function ro(r,o,u){for(u=u.child;u!==null;)wv(r,o,u),u=u.sibling}function wv(r,o,u){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Zt,u)}catch{}switch(u.tag){case 5:Bs||sc(u,o);case 6:var y=Es,_=la;Es=null,ro(r,o,u),Es=y,la=_,Es!==null&&(la?(r=Es,u=u.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)):Es.removeChild(u.stateNode));break;case 18:Es!==null&&(la?(r=Es,u=u.stateNode,r.nodeType===8?id(r.parentNode,u):r.nodeType===1&&id(r,u),jr(r)):id(Es,u.stateNode));break;case 4:y=Es,_=la,Es=u.stateNode.containerInfo,la=!0,ro(r,o,u),Es=y,la=_;break;case 0:case 11:case 14:case 15:if(!Bs&&(y=u.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){_=y=y.next;do{var P=_,z=P.destroy;P=P.tag,z!==void 0&&((P&2)!==0||(P&4)!==0)&&Jp(u,o,z),_=_.next}while(_!==y)}ro(r,o,u);break;case 1:if(!Bs&&(sc(u,o),y=u.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=u.memoizedProps,y.state=u.memoizedState,y.componentWillUnmount()}catch(se){Qn(u,o,se)}ro(r,o,u);break;case 21:ro(r,o,u);break;case 22:u.mode&1?(Bs=(y=Bs)||u.memoizedState!==null,ro(r,o,u),Bs=y):ro(r,o,u);break;default:ro(r,o,u)}}function Nv(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new HC),o.forEach(function(y){var _=e_.bind(null,r,y);u.has(y)||(u.add(y),y.then(_,_))})}}function ca(r,o){var u=o.deletions;if(u!==null)for(var y=0;y<u.length;y++){var _=u[y];try{var P=r,z=o,se=z;e:for(;se!==null;){switch(se.tag){case 5:Es=se.stateNode,la=!1;break e;case 3:Es=se.stateNode.containerInfo,la=!0;break e;case 4:Es=se.stateNode.containerInfo,la=!0;break e}se=se.return}if(Es===null)throw Error(n(160));wv(P,z,_),Es=null,la=!1;var ce=_.alternate;ce!==null&&(ce.return=null),_.return=null}catch(_e){Qn(_,o,_e)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Cv(o,r),o=o.sibling}function Cv(r,o){var u=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ca(o,r),Ia(r),y&4){try{xd(3,r,r.return),Ju(3,r)}catch(lt){Qn(r,r.return,lt)}try{xd(5,r,r.return)}catch(lt){Qn(r,r.return,lt)}}break;case 1:ca(o,r),Ia(r),y&512&&u!==null&&sc(u,u.return);break;case 5:if(ca(o,r),Ia(r),y&512&&u!==null&&sc(u,u.return),r.flags&32){var _=r.stateNode;try{tn(_,"")}catch(lt){Qn(r,r.return,lt)}}if(y&4&&(_=r.stateNode,_!=null)){var P=r.memoizedProps,z=u!==null?u.memoizedProps:P,se=r.type,ce=r.updateQueue;if(r.updateQueue=null,ce!==null)try{se==="input"&&P.type==="radio"&&P.name!=null&&jt(_,P),rn(se,z);var _e=rn(se,P);for(z=0;z<ce.length;z+=2){var Be=ce[z],He=ce[z+1];Be==="style"?Kn(_,He):Be==="dangerouslySetInnerHTML"?Kt(_,He):Be==="children"?tn(_,He):T(_,Be,He,_e)}switch(se){case"input":dt(_,P);break;case"textarea":oe(_,P);break;case"select":var ze=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var st=P.value;st!=null?pe(_,!!P.multiple,st,!1):ze!==!!P.multiple&&(P.defaultValue!=null?pe(_,!!P.multiple,P.defaultValue,!0):pe(_,!!P.multiple,P.multiple?[]:"",!1))}_[Yi]=P}catch(lt){Qn(r,r.return,lt)}}break;case 6:if(ca(o,r),Ia(r),y&4){if(r.stateNode===null)throw Error(n(162));_=r.stateNode,P=r.memoizedProps;try{_.nodeValue=P}catch(lt){Qn(r,r.return,lt)}}break;case 3:if(ca(o,r),Ia(r),y&4&&u!==null&&u.memoizedState.isDehydrated)try{jr(o.containerInfo)}catch(lt){Qn(r,r.return,lt)}break;case 4:ca(o,r),Ia(r);break;case 13:ca(o,r),Ia(r),_=r.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(af=Se())),y&4&&Nv(r);break;case 22:if(Be=u!==null&&u.memoizedState!==null,r.mode&1?(Bs=(_e=Bs)||Be,ca(o,r),Bs=_e):ca(o,r),Ia(r),y&8192){if(_e=r.memoizedState!==null,(r.stateNode.isHidden=_e)&&!Be&&(r.mode&1)!==0)for(at=r,Be=r.child;Be!==null;){for(He=at=Be;at!==null;){switch(ze=at,st=ze.child,ze.tag){case 0:case 11:case 14:case 15:xd(4,ze,ze.return);break;case 1:sc(ze,ze.return);var it=ze.stateNode;if(typeof it.componentWillUnmount=="function"){y=ze,u=ze.return;try{o=y,it.props=o.memoizedProps,it.state=o.memoizedState,it.componentWillUnmount()}catch(lt){Qn(y,u,lt)}}break;case 5:sc(ze,ze.return);break;case 22:if(ze.memoizedState!==null){Av(He);continue}}st!==null?(st.return=ze,at=st):Av(He)}Be=Be.sibling}e:for(Be=null,He=r;;){if(He.tag===5){if(Be===null){Be=He;try{_=He.stateNode,_e?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(se=He.stateNode,ce=He.memoizedProps.style,z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,se.style.display=yn("display",z))}catch(lt){Qn(r,r.return,lt)}}}else if(He.tag===6){if(Be===null)try{He.stateNode.nodeValue=_e?"":He.memoizedProps}catch(lt){Qn(r,r.return,lt)}}else if((He.tag!==22&&He.tag!==23||He.memoizedState===null||He===r)&&He.child!==null){He.child.return=He,He=He.child;continue}if(He===r)break e;for(;He.sibling===null;){if(He.return===null||He.return===r)break e;Be===He&&(Be=null),He=He.return}Be===He&&(Be=null),He.sibling.return=He.return,He=He.sibling}}break;case 19:ca(o,r),Ia(r),y&4&&Nv(r);break;case 21:break;default:ca(o,r),Ia(r)}}function Ia(r){var o=r.flags;if(o&2){try{e:{for(var u=r.return;u!==null;){if(bv(u)){var y=u;break e}u=u.return}throw Error(n(160))}switch(y.tag){case 5:var _=y.stateNode;y.flags&32&&(tn(_,""),y.flags&=-33);var P=jv(r);nf(r,P,_);break;case 3:case 4:var z=y.stateNode.containerInfo,se=jv(r);tf(r,se,z);break;default:throw Error(n(161))}}catch(ce){Qn(r,r.return,ce)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function qC(r,o,u){at=r,_v(r)}function _v(r,o,u){for(var y=(r.mode&1)!==0;at!==null;){var _=at,P=_.child;if(_.tag===22&&y){var z=_.memoizedState!==null||Qu;if(!z){var se=_.alternate,ce=se!==null&&se.memoizedState!==null||Bs;se=Qu;var _e=Bs;if(Qu=z,(Bs=ce)&&!_e)for(at=_;at!==null;)z=at,ce=z.child,z.tag===22&&z.memoizedState!==null?Pv(_):ce!==null?(ce.return=z,at=ce):Pv(_);for(;P!==null;)at=P,_v(P),P=P.sibling;at=_,Qu=se,Bs=_e}Sv(r)}else(_.subtreeFlags&8772)!==0&&P!==null?(P.return=_,at=P):Sv(r)}}function Sv(r){for(;at!==null;){var o=at;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Bs||Ju(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!Bs)if(u===null)y.componentDidMount();else{var _=o.elementType===o.type?u.memoizedProps:oa(o.type,u.memoizedProps);y.componentDidUpdate(_,u.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=o.updateQueue;P!==null&&A0(o,P,y);break;case 3:var z=o.updateQueue;if(z!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}A0(o,z,u)}break;case 5:var se=o.stateNode;if(u===null&&o.flags&4){u=se;var ce=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&u.focus();break;case"img":ce.src&&(u.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _e=o.alternate;if(_e!==null){var Be=_e.memoizedState;if(Be!==null){var He=Be.dehydrated;He!==null&&jr(He)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bs||o.flags&512&&ef(o)}catch(ze){Qn(o,o.return,ze)}}if(o===r){at=null;break}if(u=o.sibling,u!==null){u.return=o.return,at=u;break}at=o.return}}function Av(r){for(;at!==null;){var o=at;if(o===r){at=null;break}var u=o.sibling;if(u!==null){u.return=o.return,at=u;break}at=o.return}}function Pv(r){for(;at!==null;){var o=at;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ju(4,o)}catch(ce){Qn(o,u,ce)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var _=o.return;try{y.componentDidMount()}catch(ce){Qn(o,_,ce)}}var P=o.return;try{ef(o)}catch(ce){Qn(o,P,ce)}break;case 5:var z=o.return;try{ef(o)}catch(ce){Qn(o,z,ce)}}}catch(ce){Qn(o,o.return,ce)}if(o===r){at=null;break}var se=o.sibling;if(se!==null){se.return=o.return,at=se;break}at=o.return}}var ZC=Math.ceil,em=k.ReactCurrentDispatcher,sf=k.ReactCurrentOwner,Wr=k.ReactCurrentBatchConfig,an=0,ws=null,cs=null,ks=0,Pr=0,rc=Ji(0),vs=0,gd=null,Xo=0,tm=0,rf=0,vd=null,ir=null,af=0,ac=1/0,xi=null,nm=!1,of=null,ao=null,sm=!1,io=null,rm=0,yd=0,lf=null,am=-1,im=0;function Gs(){return(an&6)!==0?Se():am!==-1?am:am=Se()}function oo(r){return(r.mode&1)===0?1:(an&2)!==0&&ks!==0?ks&-ks:kC.transition!==null?(im===0&&(im=cu()),im):(r=nn,r!==0||(r=window.event,r=r===void 0?16:Xt(r.type)),r)}function da(r,o,u,y){if(50<yd)throw yd=0,lf=null,Error(n(185));yr(r,u,y),((an&2)===0||r!==ws)&&(r===ws&&((an&2)===0&&(tm|=u),vs===4&&lo(r,ks)),or(r,y),u===1&&an===0&&(o.mode&1)===0&&(ac=Se()+500,Ru&&to()))}function or(r,o){var u=r.callbackNode;_l(r,o);var y=En(r,r===ws?ks:0);if(y===0)u!==null&&To(u),r.callbackNode=null,r.callbackPriority=0;else if(o=y&-y,r.callbackPriority!==o){if(u!=null&&To(u),o===1)r.tag===0?EC(kv.bind(null,r)):f0(kv.bind(null,r)),Ls(function(){(an&6)===0&&to()}),u=null;else{switch(Oi(y)){case 1:u=dn;break;case 4:u=Mt;break;case 16:u=Hn;break;case 536870912:u=os;break;default:u=Hn}u=Fv(u,Ev.bind(null,r))}r.callbackPriority=o,r.callbackNode=u}}function Ev(r,o){if(am=-1,im=0,(an&6)!==0)throw Error(n(327));var u=r.callbackNode;if(ic()&&r.callbackNode!==u)return null;var y=En(r,r===ws?ks:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||o)o=om(r,y);else{o=y;var _=an;an|=2;var P=Dv();(ws!==r||ks!==o)&&(xi=null,ac=Se()+500,Qo(r,o));do try{XC();break}catch(se){Tv(r,se)}while(!0);_p(),em.current=P,an=_,cs!==null?o=0:(ws=null,ks=0,o=vs)}if(o!==0){if(o===2&&(_=Ms(r),_!==0&&(y=_,o=cf(r,_))),o===1)throw u=gd,Qo(r,0),lo(r,y),or(r,Se()),u;if(o===6)lo(r,y);else{if(_=r.current.alternate,(y&30)===0&&!GC(_)&&(o=om(r,y),o===2&&(P=Ms(r),P!==0&&(y=P,o=cf(r,P))),o===1))throw u=gd,Qo(r,0),lo(r,y),or(r,Se()),u;switch(r.finishedWork=_,r.finishedLanes=y,o){case 0:case 1:throw Error(n(345));case 2:Jo(r,ir,xi);break;case 3:if(lo(r,y),(y&130023424)===y&&(o=af+500-Se(),10<o)){if(En(r,0)!==0)break;if(_=r.suspendedLanes,(_&y)!==y){Gs(),r.pingedLanes|=r.suspendedLanes&_;break}r.timeoutHandle=xs(Jo.bind(null,r,ir,xi),o);break}Jo(r,ir,xi);break;case 4:if(lo(r,y),(y&4194240)===y)break;for(o=r.eventTimes,_=-1;0<y;){var z=31-rt(y);P=1<<z,z=o[z],z>_&&(_=z),y&=~P}if(y=_,y=Se()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*ZC(y/1960))-y,10<y){r.timeoutHandle=xs(Jo.bind(null,r,ir,xi),y);break}Jo(r,ir,xi);break;case 5:Jo(r,ir,xi);break;default:throw Error(n(329))}}}return or(r,Se()),r.callbackNode===u?Ev.bind(null,r):null}function cf(r,o){var u=vd;return r.current.memoizedState.isDehydrated&&(Qo(r,o).flags|=256),r=om(r,o),r!==2&&(o=ir,ir=u,o!==null&&df(o)),r}function df(r){ir===null?ir=r:ir.push.apply(ir,r)}function GC(r){for(var o=r;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var y=0;y<u.length;y++){var _=u[y],P=_.getSnapshot;_=_.value;try{if(!Cr(P(),_))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function lo(r,o){for(o&=~rf,o&=~tm,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var u=31-rt(o),y=1<<u;r[u]=-1,o&=~y}}function kv(r){if((an&6)!==0)throw Error(n(327));ic();var o=En(r,0);if((o&1)===0)return or(r,Se()),null;var u=om(r,o);if(r.tag!==0&&u===2){var y=Ms(r);y!==0&&(o=y,u=cf(r,y))}if(u===1)throw u=gd,Qo(r,0),lo(r,o),or(r,Se()),u;if(u===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Jo(r,ir,xi),or(r,Se()),null}function uf(r,o){var u=an;an|=1;try{return r(o)}finally{an=u,an===0&&(ac=Se()+500,Ru&&to())}}function Yo(r){io!==null&&io.tag===0&&(an&6)===0&&ic();var o=an;an|=1;var u=Wr.transition,y=nn;try{if(Wr.transition=null,nn=1,r)return r()}finally{nn=y,Wr.transition=u,an=o,(an&6)===0&&to()}}function mf(){Pr=rc.current,Mn(rc)}function Qo(r,o){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,ls(u)),cs!==null)for(u=cs.return;u!==null;){var y=u;switch(bp(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Du();break;case 3:tc(),Mn(sr),Mn(Fs),Ip();break;case 5:Tp(y);break;case 4:tc();break;case 13:Mn(qn);break;case 19:Mn(qn);break;case 10:Sp(y.type._context);break;case 22:case 23:mf()}u=u.return}if(ws=r,cs=r=co(r.current,null),ks=Pr=o,vs=0,gd=null,rf=tm=Xo=0,ir=vd=null,Zo!==null){for(o=0;o<Zo.length;o++)if(u=Zo[o],y=u.interleaved,y!==null){u.interleaved=null;var _=y.next,P=u.pending;if(P!==null){var z=P.next;P.next=_,y.next=z}u.pending=y}Zo=null}return r}function Tv(r,o){do{var u=cs;try{if(_p(),Hu.current=Gu,Wu){for(var y=Zn.memoizedState;y!==null;){var _=y.queue;_!==null&&(_.pending=null),y=y.next}Wu=!1}if(Ko=0,js=gs=Zn=null,ud=!1,md=0,sf.current=null,u===null||u.return===null){vs=1,gd=o,cs=null;break}e:{var P=r,z=u.return,se=u,ce=o;if(o=ks,se.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var _e=ce,Be=se,He=Be.tag;if((Be.mode&1)===0&&(He===0||He===11||He===15)){var ze=Be.alternate;ze?(Be.updateQueue=ze.updateQueue,Be.memoizedState=ze.memoizedState,Be.lanes=ze.lanes):(Be.updateQueue=null,Be.memoizedState=null)}var st=nv(z);if(st!==null){st.flags&=-257,sv(st,z,se,P,o),st.mode&1&&tv(P,_e,o),o=st,ce=_e;var it=o.updateQueue;if(it===null){var lt=new Set;lt.add(ce),o.updateQueue=lt}else it.add(ce);break e}else{if((o&1)===0){tv(P,_e,o),hf();break e}ce=Error(n(426))}}else if(Ln&&se.mode&1){var ns=nv(z);if(ns!==null){(ns.flags&65536)===0&&(ns.flags|=256),sv(ns,z,se,P,o),Np(nc(ce,se));break e}}P=ce=nc(ce,se),vs!==4&&(vs=2),vd===null?vd=[P]:vd.push(P),P=z;do{switch(P.tag){case 3:P.flags|=65536,o&=-o,P.lanes|=o;var ye=J0(P,ce,o);S0(P,ye);break e;case 1:se=ce;var he=P.type,je=P.stateNode;if((P.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(ao===null||!ao.has(je)))){P.flags|=65536,o&=-o,P.lanes|=o;var We=ev(P,se,o);S0(P,We);break e}}P=P.return}while(P!==null)}Rv(u)}catch(mt){o=mt,cs===u&&u!==null&&(cs=u=u.return);continue}break}while(!0)}function Dv(){var r=em.current;return em.current=Gu,r===null?Gu:r}function hf(){(vs===0||vs===3||vs===2)&&(vs=4),ws===null||(Xo&268435455)===0&&(tm&268435455)===0||lo(ws,ks)}function om(r,o){var u=an;an|=2;var y=Dv();(ws!==r||ks!==o)&&(xi=null,Qo(r,o));do try{KC();break}catch(_){Tv(r,_)}while(!0);if(_p(),an=u,em.current=y,cs!==null)throw Error(n(261));return ws=null,ks=0,vs}function KC(){for(;cs!==null;)Iv(cs)}function XC(){for(;cs!==null&&!Oc();)Iv(cs)}function Iv(r){var o=Lv(r.alternate,r,Pr);r.memoizedProps=r.pendingProps,o===null?Rv(r):cs=o,sf.current=null}function Rv(r){var o=r;do{var u=o.alternate;if(r=o.return,(o.flags&32768)===0){if(u=UC(u,o,Pr),u!==null){cs=u;return}}else{if(u=VC(u,o),u!==null){u.flags&=32767,cs=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{vs=6,cs=null;return}}if(o=o.sibling,o!==null){cs=o;return}cs=o=r}while(o!==null);vs===0&&(vs=5)}function Jo(r,o,u){var y=nn,_=Wr.transition;try{Wr.transition=null,nn=1,YC(r,o,u,y)}finally{Wr.transition=_,nn=y}return null}function YC(r,o,u,y){do ic();while(io!==null);if((an&6)!==0)throw Error(n(327));u=r.finishedWork;var _=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var P=u.lanes|u.childLanes;if(Yn(r,P),r===ws&&(cs=ws=null,ks=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||sm||(sm=!0,Fv(Hn,function(){return ic(),null})),P=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||P){P=Wr.transition,Wr.transition=null;var z=nn;nn=1;var se=an;an|=4,sf.current=null,WC(r,u),Cv(u,r),Fr(vt),Oo=!!et,vt=et=null,r.current=u,qC(u),re(),an=se,nn=z,Wr.transition=P}else r.current=u;if(sm&&(sm=!1,io=r,rm=_),P=r.pendingLanes,P===0&&(ao=null),wn(u.stateNode),or(r,Se()),o!==null)for(y=r.onRecoverableError,u=0;u<o.length;u++)_=o[u],y(_.value,{componentStack:_.stack,digest:_.digest});if(nm)throw nm=!1,r=of,of=null,r;return(rm&1)!==0&&r.tag!==0&&ic(),P=r.pendingLanes,(P&1)!==0?r===lf?yd++:(yd=0,lf=r):yd=0,to(),null}function ic(){if(io!==null){var r=Oi(rm),o=Wr.transition,u=nn;try{if(Wr.transition=null,nn=16>r?16:r,io===null)var y=!1;else{if(r=io,io=null,rm=0,(an&6)!==0)throw Error(n(331));var _=an;for(an|=4,at=r.current;at!==null;){var P=at,z=P.child;if((at.flags&16)!==0){var se=P.deletions;if(se!==null){for(var ce=0;ce<se.length;ce++){var _e=se[ce];for(at=_e;at!==null;){var Be=at;switch(Be.tag){case 0:case 11:case 15:xd(8,Be,P)}var He=Be.child;if(He!==null)He.return=Be,at=He;else for(;at!==null;){Be=at;var ze=Be.sibling,st=Be.return;if(yv(Be),Be===_e){at=null;break}if(ze!==null){ze.return=st,at=ze;break}at=st}}}var it=P.alternate;if(it!==null){var lt=it.child;if(lt!==null){it.child=null;do{var ns=lt.sibling;lt.sibling=null,lt=ns}while(lt!==null)}}at=P}}if((P.subtreeFlags&2064)!==0&&z!==null)z.return=P,at=z;else e:for(;at!==null;){if(P=at,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:xd(9,P,P.return)}var ye=P.sibling;if(ye!==null){ye.return=P.return,at=ye;break e}at=P.return}}var he=r.current;for(at=he;at!==null;){z=at;var je=z.child;if((z.subtreeFlags&2064)!==0&&je!==null)je.return=z,at=je;else e:for(z=he;at!==null;){if(se=at,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:Ju(9,se)}}catch(mt){Qn(se,se.return,mt)}if(se===z){at=null;break e}var We=se.sibling;if(We!==null){We.return=se.return,at=We;break e}at=se.return}}if(an=_,to(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Zt,r)}catch{}y=!0}return y}finally{nn=u,Wr.transition=o}}return!1}function Mv(r,o,u){o=nc(u,o),o=J0(r,o,1),r=so(r,o,1),o=Gs(),r!==null&&(yr(r,1,o),or(r,o))}function Qn(r,o,u){if(r.tag===3)Mv(r,r,u);else for(;o!==null;){if(o.tag===3){Mv(o,r,u);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ao===null||!ao.has(y))){r=nc(u,r),r=ev(o,r,1),o=so(o,r,1),r=Gs(),o!==null&&(yr(o,1,r),or(o,r));break}}o=o.return}}function QC(r,o,u){var y=r.pingCache;y!==null&&y.delete(o),o=Gs(),r.pingedLanes|=r.suspendedLanes&u,ws===r&&(ks&u)===u&&(vs===4||vs===3&&(ks&130023424)===ks&&500>Se()-af?Qo(r,0):rf|=u),or(r,o)}function Ov(r,o){o===0&&((r.mode&1)===0?o=1:(o=Ri,Ri<<=1,(Ri&130023424)===0&&(Ri=4194304)));var u=Gs();r=hi(r,o),r!==null&&(yr(r,o,u),or(r,u))}function JC(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),Ov(r,u)}function e_(r,o){var u=0;switch(r.tag){case 13:var y=r.stateNode,_=r.memoizedState;_!==null&&(u=_.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(o),Ov(r,u)}var Lv;Lv=function(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps||sr.current)ar=!0;else{if((r.lanes&u)===0&&(o.flags&128)===0)return ar=!1,BC(r,o,u);ar=(r.flags&131072)!==0}else ar=!1,Ln&&(o.flags&1048576)!==0&&x0(o,Ou,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;Yu(r,o),r=o.pendingProps;var _=Gl(o,Fs.current);ec(o,u),_=Op(null,o,y,r,_,u);var P=Lp();return o.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,rr(y)?(P=!0,Iu(o)):P=!1,o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ep(o),_.updater=Ku,o.stateNode=_,_._reactInternals=o,Vp(o,y,r,u),o=Zp(null,o,y,!0,P,u)):(o.tag=0,Ln&&P&&yp(o),Zs(null,o,_,u),o=o.child),o;case 16:y=o.elementType;e:{switch(Yu(r,o),r=o.pendingProps,_=y._init,y=_(y._payload),o.type=y,_=o.tag=n_(y),r=oa(y,r),_){case 0:o=qp(null,o,y,r,u);break e;case 1:o=cv(null,o,y,r,u);break e;case 11:o=rv(null,o,y,r,u);break e;case 14:o=av(null,o,y,oa(y.type,r),u);break e}throw Error(n(306,y,""))}return o;case 0:return y=o.type,_=o.pendingProps,_=o.elementType===y?_:oa(y,_),qp(r,o,y,_,u);case 1:return y=o.type,_=o.pendingProps,_=o.elementType===y?_:oa(y,_),cv(r,o,y,_,u);case 3:e:{if(dv(o),r===null)throw Error(n(387));y=o.pendingProps,P=o.memoizedState,_=P.element,_0(r,o),Uu(o,y,null,u);var z=o.memoizedState;if(y=z.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},o.updateQueue.baseState=P,o.memoizedState=P,o.flags&256){_=nc(Error(n(423)),o),o=uv(r,o,y,u,_);break e}else if(y!==_){_=nc(Error(n(424)),o),o=uv(r,o,y,u,_);break e}else for(Ar=ka(o.stateNode.containerInfo.firstChild),Sr=o,Ln=!0,ia=null,u=N0(o,null,y,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Yl(),y===_){o=fi(r,o,u);break e}Zs(r,o,y,u)}o=o.child}return o;case 5:return P0(o),r===null&&wp(o),y=o.type,_=o.pendingProps,P=r!==null?r.memoizedProps:null,z=_.children,Ot(y,_)?z=null:P!==null&&Ot(y,P)&&(o.flags|=32),lv(r,o),Zs(r,o,z,u),o.child;case 6:return r===null&&wp(o),null;case 13:return mv(r,o,u);case 4:return kp(o,o.stateNode.containerInfo),y=o.pendingProps,r===null?o.child=Ql(o,null,y,u):Zs(r,o,y,u),o.child;case 11:return y=o.type,_=o.pendingProps,_=o.elementType===y?_:oa(y,_),rv(r,o,y,_,u);case 7:return Zs(r,o,o.pendingProps,u),o.child;case 8:return Zs(r,o,o.pendingProps.children,u),o.child;case 12:return Zs(r,o,o.pendingProps.children,u),o.child;case 10:e:{if(y=o.type._context,_=o.pendingProps,P=o.memoizedProps,z=_.value,kn($u,y._currentValue),y._currentValue=z,P!==null)if(Cr(P.value,z)){if(P.children===_.children&&!sr.current){o=fi(r,o,u);break e}}else for(P=o.child,P!==null&&(P.return=o);P!==null;){var se=P.dependencies;if(se!==null){z=P.child;for(var ce=se.firstContext;ce!==null;){if(ce.context===y){if(P.tag===1){ce=pi(-1,u&-u),ce.tag=2;var _e=P.updateQueue;if(_e!==null){_e=_e.shared;var Be=_e.pending;Be===null?ce.next=ce:(ce.next=Be.next,Be.next=ce),_e.pending=ce}}P.lanes|=u,ce=P.alternate,ce!==null&&(ce.lanes|=u),Ap(P.return,u,o),se.lanes|=u;break}ce=ce.next}}else if(P.tag===10)z=P.type===o.type?null:P.child;else if(P.tag===18){if(z=P.return,z===null)throw Error(n(341));z.lanes|=u,se=z.alternate,se!==null&&(se.lanes|=u),Ap(z,u,o),z=P.sibling}else z=P.child;if(z!==null)z.return=P;else for(z=P;z!==null;){if(z===o){z=null;break}if(P=z.sibling,P!==null){P.return=z.return,z=P;break}z=z.return}P=z}Zs(r,o,_.children,u),o=o.child}return o;case 9:return _=o.type,y=o.pendingProps.children,ec(o,u),_=Vr(_),y=y(_),o.flags|=1,Zs(r,o,y,u),o.child;case 14:return y=o.type,_=oa(y,o.pendingProps),_=oa(y.type,_),av(r,o,y,_,u);case 15:return iv(r,o,o.type,o.pendingProps,u);case 17:return y=o.type,_=o.pendingProps,_=o.elementType===y?_:oa(y,_),Yu(r,o),o.tag=1,rr(y)?(r=!0,Iu(o)):r=!1,ec(o,u),Y0(o,y,_),Vp(o,y,_,u),Zp(null,o,y,!0,r,u);case 19:return pv(r,o,u);case 22:return ov(r,o,u)}throw Error(n(156,o.tag))};function Fv(r,o){return Cl(r,o)}function t_(r,o,u,y){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(r,o,u,y){return new t_(r,o,u,y)}function pf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function n_(r){if(typeof r=="function")return pf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===me)return 14}return 2}function co(r,o){var u=r.alternate;return u===null?(u=qr(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function lm(r,o,u,y,_,P){var z=2;if(y=r,typeof r=="function")pf(r)&&(z=1);else if(typeof r=="string")z=5;else e:switch(r){case H:return el(u.children,_,P,o);case te:z=8,_|=8;break;case X:return r=qr(12,u,o,_|2),r.elementType=X,r.lanes=P,r;case B:return r=qr(13,u,o,_),r.elementType=B,r.lanes=P,r;case ee:return r=qr(19,u,o,_),r.elementType=ee,r.lanes=P,r;case fe:return cm(u,_,P,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:z=10;break e;case U:z=9;break e;case M:z=11;break e;case me:z=14;break e;case J:z=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=qr(z,u,o,_),o.elementType=r,o.type=y,o.lanes=P,o}function el(r,o,u,y){return r=qr(7,r,y,o),r.lanes=u,r}function cm(r,o,u,y){return r=qr(22,r,y,o),r.elementType=fe,r.lanes=u,r.stateNode={isHidden:!1},r}function ff(r,o,u){return r=qr(6,r,null,o),r.lanes=u,r}function xf(r,o,u){return o=qr(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function s_(r,o,u,y,_){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=y,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function gf(r,o,u,y,_,P,z,se,ce){return r=new s_(r,o,u,se,ce),o===1?(o=1,P===!0&&(o|=8)):o=0,P=qr(3,null,null,o),r.current=P,P.stateNode=r,P.memoizedState={element:y,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ep(P),r}function r_(r,o,u){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:y==null?null:""+y,children:r,containerInfo:o,implementation:u}}function $v(r){if(!r)return eo;r=r._reactInternals;e:{if(gn(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(rr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var u=r.type;if(rr(u))return h0(r,u,o)}return o}function zv(r,o,u,y,_,P,z,se,ce){return r=gf(u,y,!0,r,_,P,z,se,ce),r.context=$v(null),u=r.current,y=Gs(),_=oo(u),P=pi(y,_),P.callback=o??null,so(u,P,_),r.current.lanes=_,yr(r,_,y),or(r,y),r}function dm(r,o,u,y){var _=o.current,P=Gs(),z=oo(_);return u=$v(u),o.context===null?o.context=u:o.pendingContext=u,o=pi(P,z),o.payload={element:r},y=y===void 0?null:y,y!==null&&(o.callback=y),r=so(_,o,z),r!==null&&(da(r,_,z,P),Bu(r,_,z)),z}function um(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Bv(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function vf(r,o){Bv(r,o),(r=r.alternate)&&Bv(r,o)}function a_(){return null}var Uv=typeof reportError=="function"?reportError:function(r){console.error(r)};function yf(r){this._internalRoot=r}mm.prototype.render=yf.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));dm(r,o,null,null)},mm.prototype.unmount=yf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Yo(function(){dm(null,r,null,null)}),o[vn]=null}};function mm(r){this._internalRoot=r}mm.prototype.unstable_scheduleHydration=function(r){if(r){var o=Pl();r={blockedOn:null,target:r,priority:o};for(var u=0;u<fs.length&&o!==0&&o<fs[u].priority;u++);fs.splice(u,0,r),u===0&&El(r)}};function bf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function hm(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Vv(){}function i_(r,o,u,y,_){if(_){if(typeof y=="function"){var P=y;y=function(){var _e=um(z);P.call(_e)}}var z=zv(o,y,r,0,null,!1,!1,"",Vv);return r._reactRootContainer=z,r[vn]=z.current,Ki(r.nodeType===8?r.parentNode:r),Yo(),z}for(;_=r.lastChild;)r.removeChild(_);if(typeof y=="function"){var se=y;y=function(){var _e=um(ce);se.call(_e)}}var ce=gf(r,0,!1,null,null,!1,!1,"",Vv);return r._reactRootContainer=ce,r[vn]=ce.current,Ki(r.nodeType===8?r.parentNode:r),Yo(function(){dm(o,ce,u,y)}),ce}function pm(r,o,u,y,_){var P=u._reactRootContainer;if(P){var z=P;if(typeof _=="function"){var se=_;_=function(){var ce=um(z);se.call(ce)}}dm(o,z,r,_)}else z=i_(u,o,r,_,y);return um(z)}Sl=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var u=Dt(o.pendingLanes);u!==0&&(ta(o,u|1),or(o,Se()),(an&6)===0&&(ac=Se()+500,to()))}break;case 13:Yo(function(){var y=hi(r,1);if(y!==null){var _=Gs();da(y,r,1,_)}}),vf(r,1)}},Qa=function(r){if(r.tag===13){var o=hi(r,134217728);if(o!==null){var u=Gs();da(o,r,134217728,u)}vf(r,134217728)}},Al=function(r){if(r.tag===13){var o=oo(r),u=hi(r,o);if(u!==null){var y=Gs();da(u,r,o,y)}vf(r,o)}},Pl=function(){return nn},Do=function(r,o){var u=nn;try{return nn=r,o()}finally{nn=u}},Rn=function(r,o,u){switch(o){case"input":if(dt(r,u),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var y=u[o];if(y!==r&&y.form===r.form){var _=ql(y);if(!_)throw Error(n(90));Ye(y),dt(y,_)}}}break;case"textarea":oe(r,u);break;case"select":o=u.value,o!=null&&pe(r,!!u.multiple,o,!1)}},$t=uf,An=Yo;var o_={usingClientEntryPoint:!1,Events:[li,ci,ql,ft,sn,uf]},bd={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l_={bundleType:bd.bundleType,version:bd.version,rendererPackageName:bd.rendererPackageName,rendererConfig:bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ko(r),r===null?null:r.stateNode},findFiberByHostInstance:bd.findFiberByHostInstance||a_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Zt=fm.inject(l_),xt=fm}catch{}}return lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_,lr.createPortal=function(r,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(o))throw Error(n(200));return r_(r,o,null,u)},lr.createRoot=function(r,o){if(!bf(r))throw Error(n(299));var u=!1,y="",_=Uv;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=gf(r,1,!1,null,null,u,!1,y,_),r[vn]=o.current,Ki(r.nodeType===8?r.parentNode:r),new yf(o)},lr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=ko(o),r=r===null?null:r.stateNode,r},lr.flushSync=function(r){return Yo(r)},lr.hydrate=function(r,o,u){if(!hm(o))throw Error(n(200));return pm(null,r,o,!0,u)},lr.hydrateRoot=function(r,o,u){if(!bf(r))throw Error(n(405));var y=u!=null&&u.hydratedSources||null,_=!1,P="",z=Uv;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(P=u.identifierPrefix),u.onRecoverableError!==void 0&&(z=u.onRecoverableError)),o=zv(o,null,r,1,u??null,_,!1,P,z),r[vn]=o.current,Ki(r),y)for(r=0;r<y.length;r++)u=y[r],_=u._getVersion,_=_(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,_]:o.mutableSourceEagerHydrationData.push(u,_);return new mm(o)},lr.render=function(r,o,u){if(!hm(o))throw Error(n(200));return pm(null,r,o,!1,u)},lr.unmountComponentAtNode=function(r){if(!hm(r))throw Error(n(40));return r._reactRootContainer?(Yo(function(){pm(null,null,r,!1,function(){r._reactRootContainer=null,r[vn]=null})}),!0):!1},lr.unstable_batchedUpdates=uf,lr.unstable_renderSubtreeIntoContainer=function(r,o,u,y){if(!hm(u))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return pm(r,o,u,!1,y)},lr.version="18.3.1-next-f1338f8080-20240426",lr}var Yv;function Qb(){if(Yv)return Nf.exports;Yv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Nf.exports=x_(),Nf.exports}var Qv;function g_(){if(Qv)return xm;Qv=1;var t=Qb();return xm.createRoot=t.createRoot,xm.hydrateRoot=t.hydrateRoot,xm}var v_=g_(),p=zx();const Re=$x(p),Bx=d_({__proto__:null,default:Re},[p]);var Kd=Qb();const Jb=$x(Kd);function y_(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const b_=t=>{switch(t){case"success":return N_;case"info":return __;case"warning":return C_;case"error":return S_;default:return null}},j_=Array(12).fill(0),w_=({visible:t,className:s})=>Re.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},j_.map((n,i)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),N_=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),C_=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),__=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),S_=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),A_=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),P_=()=>{const[t,s]=Re.useState(document.hidden);return Re.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ox=1;class E_{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:i,...l}=s,c=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:ox++,h=this.toasts.find(f=>f.id===c),m=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),h?this.toasts=this.toasts.map(f=>f.id===c?(this.publish({...f,...s,id:c,title:i}),{...f,...s,id:c,dismissible:m,title:i}):f):this.addToast({title:i,...l,dismissible:m,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const l=Promise.resolve(s instanceof Function?s():s);let c=i!==void 0,h;const m=l.then(async b=>{if(h=["resolve",b],Re.isValidElement(b))c=!1,this.create({id:i,type:"default",message:b});else if(T_(b)&&!b.ok){c=!1;const g=typeof n.error=="function"?await n.error(`HTTP error! status: ${b.status}`):n.error,w=typeof n.description=="function"?await n.description(`HTTP error! status: ${b.status}`):n.description,j=typeof g=="object"&&!Re.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:w,...j})}else if(b instanceof Error){c=!1;const g=typeof n.error=="function"?await n.error(b):n.error,w=typeof n.description=="function"?await n.description(b):n.description,j=typeof g=="object"&&!Re.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:w,...j})}else if(n.success!==void 0){c=!1;const g=typeof n.success=="function"?await n.success(b):n.success,w=typeof n.description=="function"?await n.description(b):n.description,j=typeof g=="object"&&!Re.isValidElement(g)?g:{message:g};this.create({id:i,type:"success",description:w,...j})}}).catch(async b=>{if(h=["reject",b],n.error!==void 0){c=!1;const v=typeof n.error=="function"?await n.error(b):n.error,g=typeof n.description=="function"?await n.description(b):n.description,N=typeof v=="object"&&!Re.isValidElement(v)?v:{message:v};this.create({id:i,type:"error",description:g,...N})}}).finally(()=>{c&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((b,v)=>m.then(()=>h[0]==="reject"?v(h[1]):b(h[1])).catch(v));return typeof i!="string"&&typeof i!="number"?{unwrap:f}:Object.assign(i,{unwrap:f})},this.custom=(s,n)=>{const i=n?.id||ox++;return this.create({jsx:s(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const dr=new E_,k_=(t,s)=>{const n=s?.id||ox++;return dr.addToast({title:t,...s,id:n}),n},T_=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",D_=k_,I_=()=>dr.toasts,R_=()=>dr.getActiveToasts(),Ie=Object.assign(D_,{success:dr.success,info:dr.info,warning:dr.warning,error:dr.error,custom:dr.custom,message:dr.message,promise:dr.promise,dismiss:dr.dismiss,loading:dr.loading},{getHistory:I_,getToasts:R_});y_("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function gm(t){return t.label!==void 0}const M_=3,O_="24px",L_="16px",Jv=4e3,F_=356,$_=14,z_=45,B_=200;function Ra(...t){return t.filter(Boolean).join(" ")}function U_(t){const[s,n]=t.split("-"),i=[];return s&&i.push(s),n&&i.push(n),i}const V_=t=>{var s,n,i,l,c,h,m,f,b;const{invert:v,toast:g,unstyled:w,interacting:N,setHeights:j,visibleToasts:S,heights:A,index:D,toasts:E,expanded:T,removeToast:k,defaultRichColors:R,closeButton:O,style:H,cancelButtonStyle:te,actionButtonStyle:X,className:q="",descriptionClassName:U="",duration:M,position:B,gap:ee,expandByDefault:me,classNames:J,icons:fe,closeButtonAriaLabel:W="Close toast"}=t,[ae,F]=Re.useState(null),[$,Y]=Re.useState(null),[Z,K]=Re.useState(!1),[G,xe]=Re.useState(!1),[le,ue]=Re.useState(!1),[Fe,$e]=Re.useState(!1),[Ze,Ye]=Re.useState(!1),[Xe,Je]=Re.useState(0),[ot,jt]=Re.useState(0),dt=Re.useRef(g.duration||M||Jv),Tt=Re.useRef(null),Ft=Re.useRef(null),Q=D===0,pe=D+1<=S,de=g.type,Oe=g.dismissible!==!1,oe=g.className||"",be=g.descriptionClassName||"",Me=Re.useMemo(()=>A.findIndex(ft=>ft.toastId===g.id)||0,[A,g.id]),Ge=Re.useMemo(()=>{var ft;return(ft=g.closeButton)!=null?ft:O},[g.closeButton,O]),ut=Re.useMemo(()=>g.duration||M||Jv,[g.duration,M]),Kt=Re.useRef(0),tn=Re.useRef(0),ln=Re.useRef(0),Ut=Re.useRef(null),[yn,Kn]=B.split("-"),ps=Re.useMemo(()=>A.reduce((ft,sn,$t)=>$t>=Me?ft:ft+sn.height,0),[A,Me]),Pn=P_(),rn=g.invert||v,hn=de==="loading";tn.current=Re.useMemo(()=>Me*ee+ps,[Me,ps]),Re.useEffect(()=>{dt.current=ut},[ut]),Re.useEffect(()=>{K(!0)},[]),Re.useEffect(()=>{const ft=Ft.current;if(ft){const sn=ft.getBoundingClientRect().height;return jt(sn),j($t=>[{toastId:g.id,height:sn,position:g.position},...$t]),()=>j($t=>$t.filter(An=>An.toastId!==g.id))}},[j,g.id]),Re.useLayoutEffect(()=>{if(!Z)return;const ft=Ft.current,sn=ft.style.height;ft.style.height="auto";const $t=ft.getBoundingClientRect().height;ft.style.height=sn,jt($t),j(An=>An.find(xn=>xn.toastId===g.id)?An.map(xn=>xn.toastId===g.id?{...xn,height:$t}:xn):[{toastId:g.id,height:$t,position:g.position},...An])},[Z,g.title,g.description,j,g.id,g.jsx,g.action,g.cancel]);const fn=Re.useCallback(()=>{xe(!0),Je(tn.current),j(ft=>ft.filter(sn=>sn.toastId!==g.id)),setTimeout(()=>{k(g)},B_)},[g,k,j,tn]);Re.useEffect(()=>{if(g.promise&&de==="loading"||g.duration===1/0||g.type==="loading")return;let ft;return T||N||Pn?(()=>{if(ln.current<Kt.current){const An=new Date().getTime()-Kt.current;dt.current=dt.current-An}ln.current=new Date().getTime()})():(()=>{dt.current!==1/0&&(Kt.current=new Date().getTime(),ft=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),fn()},dt.current))})(),()=>clearTimeout(ft)},[T,N,g,de,Pn,fn]),Re.useEffect(()=>{g.delete&&(fn(),g.onDismiss==null||g.onDismiss.call(g,g))},[fn,g.delete]);function Rn(){var ft;if(fe?.loading){var sn;return Re.createElement("div",{className:Ra(J?.loader,g==null||(sn=g.classNames)==null?void 0:sn.loader,"sonner-loader"),"data-visible":de==="loading"},fe.loading)}return Re.createElement(w_,{className:Ra(J?.loader,g==null||(ft=g.classNames)==null?void 0:ft.loader),visible:de==="loading"})}const Vn=g.icon||fe?.[de]||b_(de);var Sn,ts;return Re.createElement("li",{tabIndex:0,ref:Ft,className:Ra(q,oe,J?.toast,g==null||(s=g.classNames)==null?void 0:s.toast,J?.default,J?.[de],g==null||(n=g.classNames)==null?void 0:n[de]),"data-sonner-toast":"","data-rich-colors":(Sn=g.richColors)!=null?Sn:R,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":Z,"data-promise":!!g.promise,"data-swiped":Ze,"data-removed":G,"data-visible":pe,"data-y-position":yn,"data-x-position":Kn,"data-index":D,"data-front":Q,"data-swiping":le,"data-dismissible":Oe,"data-type":de,"data-invert":rn,"data-swipe-out":Fe,"data-swipe-direction":$,"data-expanded":!!(T||me&&Z),"data-testid":g.testId,style:{"--index":D,"--toasts-before":D,"--z-index":E.length-D,"--offset":`${G?Xe:tn.current}px`,"--initial-height":me?"auto":`${ot}px`,...H,...g.style},onDragEnd:()=>{ue(!1),F(null),Ut.current=null},onPointerDown:ft=>{ft.button!==2&&(hn||!Oe||(Tt.current=new Date,Je(tn.current),ft.target.setPointerCapture(ft.pointerId),ft.target.tagName!=="BUTTON"&&(ue(!0),Ut.current={x:ft.clientX,y:ft.clientY})))},onPointerUp:()=>{var ft,sn,$t;if(Fe||!Oe)return;Ut.current=null;const An=Number(((ft=Ft.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bn=Number(((sn=Ft.current)==null?void 0:sn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),xn=new Date().getTime()-(($t=Tt.current)==null?void 0:$t.getTime()),Ce=ae==="x"?An:bn,Qe=Math.abs(Ce)/xn;if(Math.abs(Ce)>=z_||Qe>.11){Je(tn.current),g.onDismiss==null||g.onDismiss.call(g,g),Y(ae==="x"?An>0?"right":"left":bn>0?"down":"up"),fn(),$e(!0);return}else{var nt,ge;(nt=Ft.current)==null||nt.style.setProperty("--swipe-amount-x","0px"),(ge=Ft.current)==null||ge.style.setProperty("--swipe-amount-y","0px")}Ye(!1),ue(!1),F(null)},onPointerMove:ft=>{var sn,$t,An;if(!Ut.current||!Oe||((sn=window.getSelection())==null?void 0:sn.toString().length)>0)return;const xn=ft.clientY-Ut.current.y,Ce=ft.clientX-Ut.current.x;var Qe;const nt=(Qe=t.swipeDirections)!=null?Qe:U_(B);!ae&&(Math.abs(Ce)>1||Math.abs(xn)>1)&&F(Math.abs(Ce)>Math.abs(xn)?"x":"y");let ge={x:0,y:0};const Ee=Te=>1/(1.5+Math.abs(Te)/20);if(ae==="y"){if(nt.includes("top")||nt.includes("bottom"))if(nt.includes("top")&&xn<0||nt.includes("bottom")&&xn>0)ge.y=xn;else{const Te=xn*Ee(xn);ge.y=Math.abs(Te)<Math.abs(xn)?Te:xn}}else if(ae==="x"&&(nt.includes("left")||nt.includes("right")))if(nt.includes("left")&&Ce<0||nt.includes("right")&&Ce>0)ge.x=Ce;else{const Te=Ce*Ee(Ce);ge.x=Math.abs(Te)<Math.abs(Ce)?Te:Ce}(Math.abs(ge.x)>0||Math.abs(ge.y)>0)&&Ye(!0),($t=Ft.current)==null||$t.style.setProperty("--swipe-amount-x",`${ge.x}px`),(An=Ft.current)==null||An.style.setProperty("--swipe-amount-y",`${ge.y}px`)}},Ge&&!g.jsx&&de!=="loading"?Re.createElement("button",{"aria-label":W,"data-disabled":hn,"data-close-button":!0,onClick:hn||!Oe?()=>{}:()=>{fn(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Ra(J?.closeButton,g==null||(i=g.classNames)==null?void 0:i.closeButton)},(ts=fe?.close)!=null?ts:A_):null,(de||g.icon||g.promise)&&g.icon!==null&&(fe?.[de]!==null||g.icon)?Re.createElement("div",{"data-icon":"",className:Ra(J?.icon,g==null||(l=g.classNames)==null?void 0:l.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Rn():null,g.type!=="loading"?Vn:null):null,Re.createElement("div",{"data-content":"",className:Ra(J?.content,g==null||(c=g.classNames)==null?void 0:c.content)},Re.createElement("div",{"data-title":"",className:Ra(J?.title,g==null||(h=g.classNames)==null?void 0:h.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?Re.createElement("div",{"data-description":"",className:Ra(U,be,J?.description,g==null||(m=g.classNames)==null?void 0:m.description)},typeof g.description=="function"?g.description():g.description):null),Re.isValidElement(g.cancel)?g.cancel:g.cancel&&gm(g.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||te,onClick:ft=>{gm(g.cancel)&&Oe&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,ft),fn())},className:Ra(J?.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,Re.isValidElement(g.action)?g.action:g.action&&gm(g.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||X,onClick:ft=>{gm(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,ft),!ft.defaultPrevented&&fn())},className:Ra(J?.actionButton,g==null||(b=g.classNames)==null?void 0:b.actionButton)},g.action.label):null)};function ey(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function H_(t,s){const n={};return[t,s].forEach((i,l)=>{const c=l===1,h=c?"--mobile-offset":"--offset",m=c?L_:O_;function f(b){["top","right","bottom","left"].forEach(v=>{n[`${h}-${v}`]=typeof b=="number"?`${b}px`:b})}typeof i=="number"||typeof i=="string"?f(i):typeof i=="object"?["top","right","bottom","left"].forEach(b=>{i[b]===void 0?n[`${h}-${b}`]=m:n[`${h}-${b}`]=typeof i[b]=="number"?`${i[b]}px`:i[b]}):f(m)}),n}const W_=Re.forwardRef(function(s,n){const{id:i,invert:l,position:c="bottom-right",hotkey:h=["altKey","KeyT"],expand:m,closeButton:f,className:b,offset:v,mobileOffset:g,theme:w="light",richColors:N,duration:j,style:S,visibleToasts:A=M_,toastOptions:D,dir:E=ey(),gap:T=$_,icons:k,containerAriaLabel:R="Notifications"}=s,[O,H]=Re.useState([]),te=Re.useMemo(()=>i?O.filter(Z=>Z.toasterId===i):O.filter(Z=>!Z.toasterId),[O,i]),X=Re.useMemo(()=>Array.from(new Set([c].concat(te.filter(Z=>Z.position).map(Z=>Z.position)))),[te,c]),[q,U]=Re.useState([]),[M,B]=Re.useState(!1),[ee,me]=Re.useState(!1),[J,fe]=Re.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=Re.useRef(null),ae=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Re.useRef(null),$=Re.useRef(!1),Y=Re.useCallback(Z=>{H(K=>{var G;return(G=K.find(xe=>xe.id===Z.id))!=null&&G.delete||dr.dismiss(Z.id),K.filter(({id:xe})=>xe!==Z.id)})},[]);return Re.useEffect(()=>dr.subscribe(Z=>{if(Z.dismiss){requestAnimationFrame(()=>{H(K=>K.map(G=>G.id===Z.id?{...G,delete:!0}:G))});return}setTimeout(()=>{Jb.flushSync(()=>{H(K=>{const G=K.findIndex(xe=>xe.id===Z.id);return G!==-1?[...K.slice(0,G),{...K[G],...Z},...K.slice(G+1)]:[Z,...K]})})})}),[O]),Re.useEffect(()=>{if(w!=="system"){fe(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;const Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:K})=>{fe(K?"dark":"light")})}catch{Z.addListener(({matches:G})=>{try{fe(G?"dark":"light")}catch(xe){console.error(xe)}})}},[w]),Re.useEffect(()=>{O.length<=1&&B(!1)},[O]),Re.useEffect(()=>{const Z=K=>{var G;if(h.every(ue=>K[ue]||K.code===ue)){var le;B(!0),(le=W.current)==null||le.focus()}K.code==="Escape"&&(document.activeElement===W.current||(G=W.current)!=null&&G.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[h]),Re.useEffect(()=>{if(W.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,$.current=!1)}},[W.current]),Re.createElement("section",{ref:n,"aria-label":`${R} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},X.map((Z,K)=>{var G;const[xe,le]=Z.split("-");return te.length?Re.createElement("ol",{key:Z,dir:E==="auto"?ey():E,tabIndex:-1,ref:W,className:b,"data-sonner-toaster":!0,"data-sonner-theme":J,"data-y-position":xe,"data-x-position":le,style:{"--front-toast-height":`${((G=q[0])==null?void 0:G.height)||0}px`,"--width":`${F_}px`,"--gap":`${T}px`,...S,...H_(v,g)},onBlur:ue=>{$.current&&!ue.currentTarget.contains(ue.relatedTarget)&&($.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||$.current||($.current=!0,F.current=ue.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{ee||B(!1)},onDragEnd:()=>B(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||me(!0)},onPointerUp:()=>me(!1)},te.filter(ue=>!ue.position&&K===0||ue.position===Z).map((ue,Fe)=>{var $e,Ze;return Re.createElement(V_,{key:ue.id,icons:k,index:Fe,toast:ue,defaultRichColors:N,duration:($e=D?.duration)!=null?$e:j,className:D?.className,descriptionClassName:D?.descriptionClassName,invert:l,visibleToasts:A,closeButton:(Ze=D?.closeButton)!=null?Ze:f,interacting:ee,position:Z,style:D?.style,unstyled:D?.unstyled,classNames:D?.classNames,cancelButtonStyle:D?.cancelButtonStyle,actionButtonStyle:D?.actionButtonStyle,closeButtonAriaLabel:D?.closeButtonAriaLabel,removeToast:Y,toasts:te.filter(Ye=>Ye.position==ue.position),heights:q.filter(Ye=>Ye.position==ue.position),setHeights:U,expandByDefault:m,gap:T,expanded:M,swipeDirections:s.swipeDirections})})):null}))});function ej(t,s){return function(){return t.apply(s,arguments)}}const{toString:q_}=Object.prototype,{getPrototypeOf:Ux}=Object,{iterator:gh,toStringTag:tj}=Symbol,vh=(t=>s=>{const n=q_.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ja=t=>(t=t.toLowerCase(),s=>vh(s)===t),yh=t=>s=>typeof s===t,{isArray:Sc}=Array,wc=yh("undefined");function Xd(t){return t!==null&&!wc(t)&&t.constructor!==null&&!wc(t.constructor)&&fr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nj=ja("ArrayBuffer");function Z_(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&nj(t.buffer),s}const G_=yh("string"),fr=yh("function"),sj=yh("number"),Yd=t=>t!==null&&typeof t=="object",K_=t=>t===!0||t===!1,Om=t=>{if(vh(t)!=="object")return!1;const s=Ux(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(tj in t)&&!(gh in t)},X_=t=>{if(!Yd(t)||Xd(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Y_=ja("Date"),Q_=ja("File"),J_=ja("Blob"),eS=ja("FileList"),tS=t=>Yd(t)&&fr(t.pipe),nS=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||fr(t.append)&&((s=vh(t))==="formdata"||s==="object"&&fr(t.toString)&&t.toString()==="[object FormData]"))},sS=ja("URLSearchParams"),[rS,aS,iS,oS]=["ReadableStream","Request","Response","Headers"].map(ja),lS=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qd(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,l;if(typeof t!="object"&&(t=[t]),Sc(t))for(i=0,l=t.length;i<l;i++)s.call(null,t[i],i,t);else{if(Xd(t))return;const c=n?Object.getOwnPropertyNames(t):Object.keys(t),h=c.length;let m;for(i=0;i<h;i++)m=c[i],s.call(null,t[m],m,t)}}function rj(t,s){if(Xd(t))return null;s=s.toLowerCase();const n=Object.keys(t);let i=n.length,l;for(;i-- >0;)if(l=n[i],s===l.toLowerCase())return l;return null}const ol=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aj=t=>!wc(t)&&t!==ol;function lx(){const{caseless:t,skipUndefined:s}=aj(this)&&this||{},n={},i=(l,c)=>{const h=t&&rj(n,c)||c;Om(n[h])&&Om(l)?n[h]=lx(n[h],l):Om(l)?n[h]=lx({},l):Sc(l)?n[h]=l.slice():(!s||!wc(l))&&(n[h]=l)};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&Qd(arguments[l],i);return n}const cS=(t,s,n,{allOwnKeys:i}={})=>(Qd(s,(l,c)=>{n&&fr(l)?t[c]=ej(l,n):t[c]=l},{allOwnKeys:i}),t),dS=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uS=(t,s,n,i)=>{t.prototype=Object.create(s.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},mS=(t,s,n,i)=>{let l,c,h;const m={};if(s=s||{},t==null)return s;do{for(l=Object.getOwnPropertyNames(t),c=l.length;c-- >0;)h=l[c],(!i||i(h,t,s))&&!m[h]&&(s[h]=t[h],m[h]=!0);t=n!==!1&&Ux(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},hS=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const i=t.indexOf(s,n);return i!==-1&&i===n},pS=t=>{if(!t)return null;if(Sc(t))return t;let s=t.length;if(!sj(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},fS=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Ux(Uint8Array)),xS=(t,s)=>{const i=(t&&t[gh]).call(t);let l;for(;(l=i.next())&&!l.done;){const c=l.value;s.call(t,c[0],c[1])}},gS=(t,s)=>{let n;const i=[];for(;(n=t.exec(s))!==null;)i.push(n);return i},vS=ja("HTMLFormElement"),yS=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,l){return i.toUpperCase()+l}),ty=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),bS=ja("RegExp"),ij=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Qd(n,(l,c)=>{let h;(h=s(l,c,t))!==!1&&(i[c]=h||l)}),Object.defineProperties(t,i)},jS=t=>{ij(t,(s,n)=>{if(fr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(fr(i)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wS=(t,s)=>{const n={},i=l=>{l.forEach(c=>{n[c]=!0})};return Sc(t)?i(t):i(String(t).split(s)),n},NS=()=>{},CS=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function _S(t){return!!(t&&fr(t.append)&&t[tj]==="FormData"&&t[gh])}const SS=t=>{const s=new Array(10),n=(i,l)=>{if(Yd(i)){if(s.indexOf(i)>=0)return;if(Xd(i))return i;if(!("toJSON"in i)){s[l]=i;const c=Sc(i)?[]:{};return Qd(i,(h,m)=>{const f=n(h,l+1);!wc(f)&&(c[m]=f)}),s[l]=void 0,c}}return i};return n(t,0)},AS=ja("AsyncFunction"),PS=t=>t&&(Yd(t)||fr(t))&&fr(t.then)&&fr(t.catch),oj=((t,s)=>t?setImmediate:s?((n,i)=>(ol.addEventListener("message",({source:l,data:c})=>{l===ol&&c===n&&i.length&&i.shift()()},!1),l=>{i.push(l),ol.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",fr(ol.postMessage)),ES=typeof queueMicrotask<"u"?queueMicrotask.bind(ol):typeof process<"u"&&process.nextTick||oj,kS=t=>t!=null&&fr(t[gh]),Ae={isArray:Sc,isArrayBuffer:nj,isBuffer:Xd,isFormData:nS,isArrayBufferView:Z_,isString:G_,isNumber:sj,isBoolean:K_,isObject:Yd,isPlainObject:Om,isEmptyObject:X_,isReadableStream:rS,isRequest:aS,isResponse:iS,isHeaders:oS,isUndefined:wc,isDate:Y_,isFile:Q_,isBlob:J_,isRegExp:bS,isFunction:fr,isStream:tS,isURLSearchParams:sS,isTypedArray:fS,isFileList:eS,forEach:Qd,merge:lx,extend:cS,trim:lS,stripBOM:dS,inherits:uS,toFlatObject:mS,kindOf:vh,kindOfTest:ja,endsWith:hS,toArray:pS,forEachEntry:xS,matchAll:gS,isHTMLForm:vS,hasOwnProperty:ty,hasOwnProp:ty,reduceDescriptors:ij,freezeMethods:jS,toObjectSet:wS,toCamelCase:yS,noop:NS,toFiniteNumber:CS,findKey:rj,global:ol,isContextDefined:aj,isSpecCompliantForm:_S,toJSONObject:SS,isAsyncFn:AS,isThenable:PS,setImmediate:oj,asap:ES,isIterable:kS};function Lt(t,s,n,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}Ae.inherits(Lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ae.toJSONObject(this.config),code:this.code,status:this.status}}});const lj=Lt.prototype,cj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cj[t]={value:t}});Object.defineProperties(Lt,cj);Object.defineProperty(lj,"isAxiosError",{value:!0});Lt.from=(t,s,n,i,l,c)=>{const h=Object.create(lj);Ae.toFlatObject(t,h,function(v){return v!==Error.prototype},b=>b!=="isAxiosError");const m=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return Lt.call(h,m,f,n,i,l),t&&h.cause==null&&Object.defineProperty(h,"cause",{value:t,configurable:!0}),h.name=t&&t.name||"Error",c&&Object.assign(h,c),h};const TS=null;function cx(t){return Ae.isPlainObject(t)||Ae.isArray(t)}function dj(t){return Ae.endsWith(t,"[]")?t.slice(0,-2):t}function ny(t,s,n){return t?t.concat(s).map(function(l,c){return l=dj(l),!n&&c?"["+l+"]":l}).join(n?".":""):s}function DS(t){return Ae.isArray(t)&&!t.some(cx)}const IS=Ae.toFlatObject(Ae,{},null,function(s){return/^is[A-Z]/.test(s)});function bh(t,s,n){if(!Ae.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=Ae.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,A){return!Ae.isUndefined(A[S])});const i=n.metaTokens,l=n.visitor||v,c=n.dots,h=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&Ae.isSpecCompliantForm(s);if(!Ae.isFunction(l))throw new TypeError("visitor must be a function");function b(j){if(j===null)return"";if(Ae.isDate(j))return j.toISOString();if(Ae.isBoolean(j))return j.toString();if(!f&&Ae.isBlob(j))throw new Lt("Blob is not supported. Use a Buffer instead.");return Ae.isArrayBuffer(j)||Ae.isTypedArray(j)?f&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function v(j,S,A){let D=j;if(j&&!A&&typeof j=="object"){if(Ae.endsWith(S,"{}"))S=i?S:S.slice(0,-2),j=JSON.stringify(j);else if(Ae.isArray(j)&&DS(j)||(Ae.isFileList(j)||Ae.endsWith(S,"[]"))&&(D=Ae.toArray(j)))return S=dj(S),D.forEach(function(T,k){!(Ae.isUndefined(T)||T===null)&&s.append(h===!0?ny([S],k,c):h===null?S:S+"[]",b(T))}),!1}return cx(j)?!0:(s.append(ny(A,S,c),b(j)),!1)}const g=[],w=Object.assign(IS,{defaultVisitor:v,convertValue:b,isVisitable:cx});function N(j,S){if(!Ae.isUndefined(j)){if(g.indexOf(j)!==-1)throw Error("Circular reference detected in "+S.join("."));g.push(j),Ae.forEach(j,function(D,E){(!(Ae.isUndefined(D)||D===null)&&l.call(s,D,Ae.isString(E)?E.trim():E,S,w))===!0&&N(D,S?S.concat(E):[E])}),g.pop()}}if(!Ae.isObject(t))throw new TypeError("data must be an object");return N(t),s}function sy(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return s[i]})}function Vx(t,s){this._pairs=[],t&&bh(t,this,s)}const uj=Vx.prototype;uj.append=function(s,n){this._pairs.push([s,n])};uj.toString=function(s){const n=s?function(i){return s.call(this,i,sy)}:sy;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function RS(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mj(t,s,n){if(!s)return t;const i=n&&n.encode||RS;Ae.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let c;if(l?c=l(s,n):c=Ae.isURLSearchParams(s)?s.toString():new Vx(s,n).toString(i),c){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class ry{constructor(){this.handlers=[]}use(s,n,i){return this.handlers.push({fulfilled:s,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Ae.forEach(this.handlers,function(i){i!==null&&s(i)})}}const hj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MS=typeof URLSearchParams<"u"?URLSearchParams:Vx,OS=typeof FormData<"u"?FormData:null,LS=typeof Blob<"u"?Blob:null,FS={isBrowser:!0,classes:{URLSearchParams:MS,FormData:OS,Blob:LS},protocols:["http","https","file","blob","url","data"]},Hx=typeof window<"u"&&typeof document<"u",dx=typeof navigator=="object"&&navigator||void 0,$S=Hx&&(!dx||["ReactNative","NativeScript","NS"].indexOf(dx.product)<0),zS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",BS=Hx&&window.location.href||"http://localhost",US=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hx,hasStandardBrowserEnv:$S,hasStandardBrowserWebWorkerEnv:zS,navigator:dx,origin:BS},Symbol.toStringTag,{value:"Module"})),Us={...US,...FS};function VS(t,s){return bh(t,new Us.classes.URLSearchParams,{visitor:function(n,i,l,c){return Us.isNode&&Ae.isBuffer(n)?(this.append(i,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function HS(t){return Ae.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function WS(t){const s={},n=Object.keys(t);let i;const l=n.length;let c;for(i=0;i<l;i++)c=n[i],s[c]=t[c];return s}function pj(t){function s(n,i,l,c){let h=n[c++];if(h==="__proto__")return!0;const m=Number.isFinite(+h),f=c>=n.length;return h=!h&&Ae.isArray(l)?l.length:h,f?(Ae.hasOwnProp(l,h)?l[h]=[l[h],i]:l[h]=i,!m):((!l[h]||!Ae.isObject(l[h]))&&(l[h]=[]),s(n,i,l[h],c)&&Ae.isArray(l[h])&&(l[h]=WS(l[h])),!m)}if(Ae.isFormData(t)&&Ae.isFunction(t.entries)){const n={};return Ae.forEachEntry(t,(i,l)=>{s(HS(i),l,n,0)}),n}return null}function qS(t,s,n){if(Ae.isString(t))try{return(s||JSON.parse)(t),Ae.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Jd={transitional:hj,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const i=n.getContentType()||"",l=i.indexOf("application/json")>-1,c=Ae.isObject(s);if(c&&Ae.isHTMLForm(s)&&(s=new FormData(s)),Ae.isFormData(s))return l?JSON.stringify(pj(s)):s;if(Ae.isArrayBuffer(s)||Ae.isBuffer(s)||Ae.isStream(s)||Ae.isFile(s)||Ae.isBlob(s)||Ae.isReadableStream(s))return s;if(Ae.isArrayBufferView(s))return s.buffer;if(Ae.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let m;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return VS(s,this.formSerializer).toString();if((m=Ae.isFileList(s))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return bh(m?{"files[]":s}:s,f&&new f,this.formSerializer)}}return c||l?(n.setContentType("application/json",!1),qS(s)):s}],transformResponse:[function(s){const n=this.transitional||Jd.transitional,i=n&&n.forcedJSONParsing,l=this.responseType==="json";if(Ae.isResponse(s)||Ae.isReadableStream(s))return s;if(s&&Ae.isString(s)&&(i&&!this.responseType||l)){const h=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(s,this.parseReviver)}catch(m){if(h)throw m.name==="SyntaxError"?Lt.from(m,Lt.ERR_BAD_RESPONSE,this,null,this.response):m}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Us.classes.FormData,Blob:Us.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ae.forEach(["delete","get","head","post","put","patch"],t=>{Jd.headers[t]={}});const ZS=Ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),GS=t=>{const s={};let n,i,l;return t&&t.split(`
`).forEach(function(h){l=h.indexOf(":"),n=h.substring(0,l).trim().toLowerCase(),i=h.substring(l+1).trim(),!(!n||s[n]&&ZS[n])&&(n==="set-cookie"?s[n]?s[n].push(i):s[n]=[i]:s[n]=s[n]?s[n]+", "+i:i)}),s},ay=Symbol("internals");function wd(t){return t&&String(t).trim().toLowerCase()}function Lm(t){return t===!1||t==null?t:Ae.isArray(t)?t.map(Lm):String(t)}function KS(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)s[i[1]]=i[2];return s}const XS=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sf(t,s,n,i,l){if(Ae.isFunction(i))return i.call(this,s,n);if(l&&(s=n),!!Ae.isString(s)){if(Ae.isString(i))return s.indexOf(i)!==-1;if(Ae.isRegExp(i))return i.test(s)}}function YS(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,i)=>n.toUpperCase()+i)}function QS(t,s){const n=Ae.toCamelCase(" "+s);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(l,c,h){return this[i].call(this,s,l,c,h)},configurable:!0})})}let xr=class{constructor(s){s&&this.set(s)}set(s,n,i){const l=this;function c(m,f,b){const v=wd(f);if(!v)throw new Error("header name must be a non-empty string");const g=Ae.findKey(l,v);(!g||l[g]===void 0||b===!0||b===void 0&&l[g]!==!1)&&(l[g||f]=Lm(m))}const h=(m,f)=>Ae.forEach(m,(b,v)=>c(b,v,f));if(Ae.isPlainObject(s)||s instanceof this.constructor)h(s,n);else if(Ae.isString(s)&&(s=s.trim())&&!XS(s))h(GS(s),n);else if(Ae.isObject(s)&&Ae.isIterable(s)){let m={},f,b;for(const v of s){if(!Ae.isArray(v))throw TypeError("Object iterator must return a key-value pair");m[b=v[0]]=(f=m[b])?Ae.isArray(f)?[...f,v[1]]:[f,v[1]]:v[1]}h(m,n)}else s!=null&&c(n,s,i);return this}get(s,n){if(s=wd(s),s){const i=Ae.findKey(this,s);if(i){const l=this[i];if(!n)return l;if(n===!0)return KS(l);if(Ae.isFunction(n))return n.call(this,l,i);if(Ae.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=wd(s),s){const i=Ae.findKey(this,s);return!!(i&&this[i]!==void 0&&(!n||Sf(this,this[i],i,n)))}return!1}delete(s,n){const i=this;let l=!1;function c(h){if(h=wd(h),h){const m=Ae.findKey(i,h);m&&(!n||Sf(i,i[m],m,n))&&(delete i[m],l=!0)}}return Ae.isArray(s)?s.forEach(c):c(s),l}clear(s){const n=Object.keys(this);let i=n.length,l=!1;for(;i--;){const c=n[i];(!s||Sf(this,this[c],c,s,!0))&&(delete this[c],l=!0)}return l}normalize(s){const n=this,i={};return Ae.forEach(this,(l,c)=>{const h=Ae.findKey(i,c);if(h){n[h]=Lm(l),delete n[c];return}const m=s?YS(c):String(c).trim();m!==c&&delete n[c],n[m]=Lm(l),i[m]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return Ae.forEach(this,(i,l)=>{i!=null&&i!==!1&&(n[l]=s&&Ae.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const i=new this(s);return n.forEach(l=>i.set(l)),i}static accessor(s){const i=(this[ay]=this[ay]={accessors:{}}).accessors,l=this.prototype;function c(h){const m=wd(h);i[m]||(QS(l,h),i[m]=!0)}return Ae.isArray(s)?s.forEach(c):c(s),this}};xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ae.reduceDescriptors(xr.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(i){this[n]=i}}});Ae.freezeMethods(xr);function Af(t,s){const n=this||Jd,i=s||n,l=xr.from(i.headers);let c=i.data;return Ae.forEach(t,function(m){c=m.call(n,c,l.normalize(),s?s.status:void 0)}),l.normalize(),c}function fj(t){return!!(t&&t.__CANCEL__)}function Ac(t,s,n){Lt.call(this,t??"canceled",Lt.ERR_CANCELED,s,n),this.name="CanceledError"}Ae.inherits(Ac,Lt,{__CANCEL__:!0});function xj(t,s,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):s(new Lt("Request failed with status code "+n.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function JS(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function eA(t,s){t=t||10;const n=new Array(t),i=new Array(t);let l=0,c=0,h;return s=s!==void 0?s:1e3,function(f){const b=Date.now(),v=i[c];h||(h=b),n[l]=f,i[l]=b;let g=c,w=0;for(;g!==l;)w+=n[g++],g=g%t;if(l=(l+1)%t,l===c&&(c=(c+1)%t),b-h<s)return;const N=v&&b-v;return N?Math.round(w*1e3/N):void 0}}function tA(t,s){let n=0,i=1e3/s,l,c;const h=(b,v=Date.now())=>{n=v,l=null,c&&(clearTimeout(c),c=null),t(...b)};return[(...b)=>{const v=Date.now(),g=v-n;g>=i?h(b,v):(l=b,c||(c=setTimeout(()=>{c=null,h(l)},i-g)))},()=>l&&h(l)]}const Ym=(t,s,n=3)=>{let i=0;const l=eA(50,250);return tA(c=>{const h=c.loaded,m=c.lengthComputable?c.total:void 0,f=h-i,b=l(f),v=h<=m;i=h;const g={loaded:h,total:m,progress:m?h/m:void 0,bytes:f,rate:b||void 0,estimated:b&&m&&v?(m-h)/b:void 0,event:c,lengthComputable:m!=null,[s?"download":"upload"]:!0};t(g)},n)},iy=(t,s)=>{const n=t!=null;return[i=>s[0]({lengthComputable:n,total:t,loaded:i}),s[1]]},oy=t=>(...s)=>Ae.asap(()=>t(...s)),nA=Us.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,Us.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(Us.origin),Us.navigator&&/(msie|trident)/i.test(Us.navigator.userAgent)):()=>!0,sA=Us.hasStandardBrowserEnv?{write(t,s,n,i,l,c,h){if(typeof document>"u")return;const m=[`${t}=${encodeURIComponent(s)}`];Ae.isNumber(n)&&m.push(`expires=${new Date(n).toUTCString()}`),Ae.isString(i)&&m.push(`path=${i}`),Ae.isString(l)&&m.push(`domain=${l}`),c===!0&&m.push("secure"),Ae.isString(h)&&m.push(`SameSite=${h}`),document.cookie=m.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function rA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function aA(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function gj(t,s,n){let i=!rA(s);return t&&(i||n==!1)?aA(t,s):s}const ly=t=>t instanceof xr?{...t}:t;function ul(t,s){s=s||{};const n={};function i(b,v,g,w){return Ae.isPlainObject(b)&&Ae.isPlainObject(v)?Ae.merge.call({caseless:w},b,v):Ae.isPlainObject(v)?Ae.merge({},v):Ae.isArray(v)?v.slice():v}function l(b,v,g,w){if(Ae.isUndefined(v)){if(!Ae.isUndefined(b))return i(void 0,b,g,w)}else return i(b,v,g,w)}function c(b,v){if(!Ae.isUndefined(v))return i(void 0,v)}function h(b,v){if(Ae.isUndefined(v)){if(!Ae.isUndefined(b))return i(void 0,b)}else return i(void 0,v)}function m(b,v,g){if(g in s)return i(b,v);if(g in t)return i(void 0,b)}const f={url:c,method:c,data:c,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:m,headers:(b,v,g)=>l(ly(b),ly(v),g,!0)};return Ae.forEach(Object.keys({...t,...s}),function(v){const g=f[v]||l,w=g(t[v],s[v],v);Ae.isUndefined(w)&&g!==m||(n[v]=w)}),n}const vj=t=>{const s=ul({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:c,headers:h,auth:m}=s;if(s.headers=h=xr.from(h),s.url=mj(gj(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),m&&h.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),Ae.isFormData(n)){if(Us.hasStandardBrowserEnv||Us.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(Ae.isFunction(n.getHeaders)){const f=n.getHeaders(),b=["content-type","content-length"];Object.entries(f).forEach(([v,g])=>{b.includes(v.toLowerCase())&&h.set(v,g)})}}if(Us.hasStandardBrowserEnv&&(i&&Ae.isFunction(i)&&(i=i(s)),i||i!==!1&&nA(s.url))){const f=l&&c&&sA.read(c);f&&h.set(l,f)}return s},iA=typeof XMLHttpRequest<"u",oA=iA&&function(t){return new Promise(function(n,i){const l=vj(t);let c=l.data;const h=xr.from(l.headers).normalize();let{responseType:m,onUploadProgress:f,onDownloadProgress:b}=l,v,g,w,N,j;function S(){N&&N(),j&&j(),l.cancelToken&&l.cancelToken.unsubscribe(v),l.signal&&l.signal.removeEventListener("abort",v)}let A=new XMLHttpRequest;A.open(l.method.toUpperCase(),l.url,!0),A.timeout=l.timeout;function D(){if(!A)return;const T=xr.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),R={data:!m||m==="text"||m==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:T,config:t,request:A};xj(function(H){n(H),S()},function(H){i(H),S()},R),A=null}"onloadend"in A?A.onloadend=D:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(D)},A.onabort=function(){A&&(i(new Lt("Request aborted",Lt.ECONNABORTED,t,A)),A=null)},A.onerror=function(k){const R=k&&k.message?k.message:"Network Error",O=new Lt(R,Lt.ERR_NETWORK,t,A);O.event=k||null,i(O),A=null},A.ontimeout=function(){let k=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const R=l.transitional||hj;l.timeoutErrorMessage&&(k=l.timeoutErrorMessage),i(new Lt(k,R.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,t,A)),A=null},c===void 0&&h.setContentType(null),"setRequestHeader"in A&&Ae.forEach(h.toJSON(),function(k,R){A.setRequestHeader(R,k)}),Ae.isUndefined(l.withCredentials)||(A.withCredentials=!!l.withCredentials),m&&m!=="json"&&(A.responseType=l.responseType),b&&([w,j]=Ym(b,!0),A.addEventListener("progress",w)),f&&A.upload&&([g,N]=Ym(f),A.upload.addEventListener("progress",g),A.upload.addEventListener("loadend",N)),(l.cancelToken||l.signal)&&(v=T=>{A&&(i(!T||T.type?new Ac(null,t,A):T),A.abort(),A=null)},l.cancelToken&&l.cancelToken.subscribe(v),l.signal&&(l.signal.aborted?v():l.signal.addEventListener("abort",v)));const E=JS(l.url);if(E&&Us.protocols.indexOf(E)===-1){i(new Lt("Unsupported protocol "+E+":",Lt.ERR_BAD_REQUEST,t));return}A.send(c||null)})},lA=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let i=new AbortController,l;const c=function(b){if(!l){l=!0,m();const v=b instanceof Error?b:this.reason;i.abort(v instanceof Lt?v:new Ac(v instanceof Error?v.message:v))}};let h=s&&setTimeout(()=>{h=null,c(new Lt(`timeout ${s} of ms exceeded`,Lt.ETIMEDOUT))},s);const m=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(b=>{b.unsubscribe?b.unsubscribe(c):b.removeEventListener("abort",c)}),t=null)};t.forEach(b=>b.addEventListener("abort",c));const{signal:f}=i;return f.unsubscribe=()=>Ae.asap(m),f}},cA=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let i=0,l;for(;i<n;)l=i+s,yield t.slice(i,l),i=l},dA=async function*(t,s){for await(const n of uA(t))yield*cA(n,s)},uA=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:i}=await s.read();if(n)break;yield i}}finally{await s.cancel()}},cy=(t,s,n,i)=>{const l=dA(t,s);let c=0,h,m=f=>{h||(h=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:b,value:v}=await l.next();if(b){m(),f.close();return}let g=v.byteLength;if(n){let w=c+=g;n(w)}f.enqueue(new Uint8Array(v))}catch(b){throw m(b),b}},cancel(f){return m(f),l.return()}},{highWaterMark:2})},dy=64*1024,{isFunction:vm}=Ae,mA=(({Request:t,Response:s})=>({Request:t,Response:s}))(Ae.global),{ReadableStream:uy,TextEncoder:my}=Ae.global,hy=(t,...s)=>{try{return!!t(...s)}catch{return!1}},hA=t=>{t=Ae.merge.call({skipUndefined:!0},mA,t);const{fetch:s,Request:n,Response:i}=t,l=s?vm(s):typeof fetch=="function",c=vm(n),h=vm(i);if(!l)return!1;const m=l&&vm(uy),f=l&&(typeof my=="function"?(j=>S=>j.encode(S))(new my):async j=>new Uint8Array(await new n(j).arrayBuffer())),b=c&&m&&hy(()=>{let j=!1;const S=new n(Us.origin,{body:new uy,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!S}),v=h&&m&&hy(()=>Ae.isReadableStream(new i("").body)),g={stream:v&&(j=>j.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!g[j]&&(g[j]=(S,A)=>{let D=S&&S[j];if(D)return D.call(S);throw new Lt(`Response type '${j}' is not supported`,Lt.ERR_NOT_SUPPORT,A)})});const w=async j=>{if(j==null)return 0;if(Ae.isBlob(j))return j.size;if(Ae.isSpecCompliantForm(j))return(await new n(Us.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(Ae.isArrayBufferView(j)||Ae.isArrayBuffer(j))return j.byteLength;if(Ae.isURLSearchParams(j)&&(j=j+""),Ae.isString(j))return(await f(j)).byteLength},N=async(j,S)=>{const A=Ae.toFiniteNumber(j.getContentLength());return A??w(S)};return async j=>{let{url:S,method:A,data:D,signal:E,cancelToken:T,timeout:k,onDownloadProgress:R,onUploadProgress:O,responseType:H,headers:te,withCredentials:X="same-origin",fetchOptions:q}=vj(j),U=s||fetch;H=H?(H+"").toLowerCase():"text";let M=lA([E,T&&T.toAbortSignal()],k),B=null;const ee=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let me;try{if(O&&b&&A!=="get"&&A!=="head"&&(me=await N(te,D))!==0){let $=new n(S,{method:"POST",body:D,duplex:"half"}),Y;if(Ae.isFormData(D)&&(Y=$.headers.get("content-type"))&&te.setContentType(Y),$.body){const[Z,K]=iy(me,Ym(oy(O)));D=cy($.body,dy,Z,K)}}Ae.isString(X)||(X=X?"include":"omit");const J=c&&"credentials"in n.prototype,fe={...q,signal:M,method:A.toUpperCase(),headers:te.normalize().toJSON(),body:D,duplex:"half",credentials:J?X:void 0};B=c&&new n(S,fe);let W=await(c?U(B,q):U(S,fe));const ae=v&&(H==="stream"||H==="response");if(v&&(R||ae&&ee)){const $={};["status","statusText","headers"].forEach(G=>{$[G]=W[G]});const Y=Ae.toFiniteNumber(W.headers.get("content-length")),[Z,K]=R&&iy(Y,Ym(oy(R),!0))||[];W=new i(cy(W.body,dy,Z,()=>{K&&K(),ee&&ee()}),$)}H=H||"text";let F=await g[Ae.findKey(g,H)||"text"](W,j);return!ae&&ee&&ee(),await new Promise(($,Y)=>{xj($,Y,{data:F,headers:xr.from(W.headers),status:W.status,statusText:W.statusText,config:j,request:B})})}catch(J){throw ee&&ee(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,j,B),{cause:J.cause||J}):Lt.from(J,J&&J.code,j,B)}}},pA=new Map,yj=t=>{let s=t&&t.env||{};const{fetch:n,Request:i,Response:l}=s,c=[i,l,n];let h=c.length,m=h,f,b,v=pA;for(;m--;)f=c[m],b=v.get(f),b===void 0&&v.set(f,b=m?new Map:hA(s)),v=b;return b};yj();const Wx={http:TS,xhr:oA,fetch:{get:yj}};Ae.forEach(Wx,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const py=t=>`- ${t}`,fA=t=>Ae.isFunction(t)||t===null||t===!1;function xA(t,s){t=Ae.isArray(t)?t:[t];const{length:n}=t;let i,l;const c={};for(let h=0;h<n;h++){i=t[h];let m;if(l=i,!fA(i)&&(l=Wx[(m=String(i)).toLowerCase()],l===void 0))throw new Lt(`Unknown adapter '${m}'`);if(l&&(Ae.isFunction(l)||(l=l.get(s))))break;c[m||"#"+h]=l}if(!l){const h=Object.entries(c).map(([f,b])=>`adapter ${f} `+(b===!1?"is not supported by the environment":"is not available in the build"));let m=n?h.length>1?`since :
`+h.map(py).join(`
`):" "+py(h[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return l}const bj={getAdapter:xA,adapters:Wx};function Pf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ac(null,t)}function fy(t){return Pf(t),t.headers=xr.from(t.headers),t.data=Af.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),bj.getAdapter(t.adapter||Jd.adapter,t)(t).then(function(i){return Pf(t),i.data=Af.call(t,t.transformResponse,i),i.headers=xr.from(i.headers),i},function(i){return fj(i)||(Pf(t),i&&i.response&&(i.response.data=Af.call(t,t.transformResponse,i.response),i.response.headers=xr.from(i.response.headers))),Promise.reject(i)})}const jj="1.13.2",jh={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{jh[t]=function(i){return typeof i===t||"a"+(s<1?"n ":" ")+t}});const xy={};jh.transitional=function(s,n,i){function l(c,h){return"[Axios v"+jj+"] Transitional option '"+c+"'"+h+(i?". "+i:"")}return(c,h,m)=>{if(s===!1)throw new Lt(l(h," has been removed"+(n?" in "+n:"")),Lt.ERR_DEPRECATED);return n&&!xy[h]&&(xy[h]=!0,console.warn(l(h," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(c,h,m):!0}};jh.spelling=function(s){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${s}`),!0)};function gA(t,s,n){if(typeof t!="object")throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let l=i.length;for(;l-- >0;){const c=i[l],h=s[c];if(h){const m=t[c],f=m===void 0||h(m,c,t);if(f!==!0)throw new Lt("option "+c+" must be "+f,Lt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Lt("Unknown option "+c,Lt.ERR_BAD_OPTION)}}const Fm={assertOptions:gA,validators:jh},Ma=Fm.validators;let cl=class{constructor(s){this.defaults=s||{},this.interceptors={request:new ry,response:new ry}}async request(s,n){try{return await this._request(s,n)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=ul(this.defaults,n);const{transitional:i,paramsSerializer:l,headers:c}=n;i!==void 0&&Fm.assertOptions(i,{silentJSONParsing:Ma.transitional(Ma.boolean),forcedJSONParsing:Ma.transitional(Ma.boolean),clarifyTimeoutError:Ma.transitional(Ma.boolean)},!1),l!=null&&(Ae.isFunction(l)?n.paramsSerializer={serialize:l}:Fm.assertOptions(l,{encode:Ma.function,serialize:Ma.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Fm.assertOptions(n,{baseUrl:Ma.spelling("baseURL"),withXsrfToken:Ma.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=c&&Ae.merge(c.common,c[n.method]);c&&Ae.forEach(["delete","get","head","post","put","patch","common"],j=>{delete c[j]}),n.headers=xr.concat(h,c);const m=[];let f=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(f=f&&S.synchronous,m.unshift(S.fulfilled,S.rejected))});const b=[];this.interceptors.response.forEach(function(S){b.push(S.fulfilled,S.rejected)});let v,g=0,w;if(!f){const j=[fy.bind(this),void 0];for(j.unshift(...m),j.push(...b),w=j.length,v=Promise.resolve(n);g<w;)v=v.then(j[g++],j[g++]);return v}w=m.length;let N=n;for(;g<w;){const j=m[g++],S=m[g++];try{N=j(N)}catch(A){S.call(this,A);break}}try{v=fy.call(this,N)}catch(j){return Promise.reject(j)}for(g=0,w=b.length;g<w;)v=v.then(b[g++],b[g++]);return v}getUri(s){s=ul(this.defaults,s);const n=gj(s.baseURL,s.url,s.allowAbsoluteUrls);return mj(n,s.params,s.paramsSerializer)}};Ae.forEach(["delete","get","head","options"],function(s){cl.prototype[s]=function(n,i){return this.request(ul(i||{},{method:s,url:n,data:(i||{}).data}))}});Ae.forEach(["post","put","patch"],function(s){function n(i){return function(c,h,m){return this.request(ul(m||{},{method:s,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:h}))}}cl.prototype[s]=n(),cl.prototype[s+"Form"]=n(!0)});let vA=class wj{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const i=this;this.promise.then(l=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](l);i._listeners=null}),this.promise.then=l=>{let c;const h=new Promise(m=>{i.subscribe(m),c=m}).then(l);return h.cancel=function(){i.unsubscribe(c)},h},s(function(c,h,m){i.reason||(i.reason=new Ac(c,h,m),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=i=>{s.abort(i)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new wj(function(l){s=l}),cancel:s}}};function yA(t){return function(n){return t.apply(null,n)}}function bA(t){return Ae.isObject(t)&&t.isAxiosError===!0}const ux={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ux).forEach(([t,s])=>{ux[s]=t});function Nj(t){const s=new cl(t),n=ej(cl.prototype.request,s);return Ae.extend(n,cl.prototype,s,{allOwnKeys:!0}),Ae.extend(n,s,null,{allOwnKeys:!0}),n.create=function(l){return Nj(ul(t,l))},n}const Gn=Nj(Jd);Gn.Axios=cl;Gn.CanceledError=Ac;Gn.CancelToken=vA;Gn.isCancel=fj;Gn.VERSION=jj;Gn.toFormData=bh;Gn.AxiosError=Lt;Gn.Cancel=Gn.CanceledError;Gn.all=function(s){return Promise.all(s)};Gn.spread=yA;Gn.isAxiosError=bA;Gn.mergeConfig=ul;Gn.AxiosHeaders=xr;Gn.formToJSON=t=>pj(Ae.isHTMLForm(t)?new FormData(t):t);Gn.getAdapter=bj.getAdapter;Gn.HttpStatusCode=ux;Gn.default=Gn;const{Axios:L9,AxiosError:F9,CanceledError:$9,isCancel:z9,CancelToken:B9,VERSION:U9,all:V9,Cancel:H9,isAxiosError:W9,spread:q9,toFormData:Z9,AxiosHeaders:G9,HttpStatusCode:K9,formToJSON:X9,getAdapter:Y9,mergeConfig:Q9}=Gn,Cj="one_media_access_state_v1";let za={isBlocked:!1};const mx=new Set;function jA(t){if(!t)return null;try{const s=JSON.parse(t);return typeof s?.isBlocked!="boolean"?null:s}catch{return null}}function wA(){if(typeof window>"u")return;const t=jA(window.localStorage.getItem(Cj));t&&(za=t)}function _j(){if(!(typeof window>"u"))try{window.localStorage.setItem(Cj,JSON.stringify(za))}catch{}}function Sj(){mx.forEach(t=>{try{t(za)}catch{}})}typeof window<"u"&&wA();function Aj(){return za}function hx(t){za={...za,...t},za.isBlocked&&!za.blockedAt&&(za.blockedAt=new Date().toISOString()),_j(),Sj()}function Ha(){za={isBlocked:!1},_j(),Sj()}function Pj(t){return mx.add(t),()=>mx.delete(t)}function Od(t){switch(t){case"TRIAL_EXPIRED":return"Seu perodo de teste acabou. Para continuar usando a plataforma, assine um plano.";case"PAST_DUE":return"No identificamos o pagamento da renovao. Para continuar usando a plataforma, regularize a assinatura.";case"CANCELED":return"Sua assinatura no est ativa. Para continuar usando a plataforma, assine um plano.";default:return"Sua conta est com acesso restrito. Para continuar, regularize sua assinatura."}}function NA(t){const s=String(t||"");return!!(/^\/auth\/(login|refresh|logout|verify-2fa)\b/i.test(s)||/^\/signup\b/i.test(s)||/^\/platform-subscription\b/i.test(s))}const CA=()=>{const t="http://174.129.69.244:3333/api";return t.startsWith("/")?t:t.replace(/\/$/,"")},qx=CA();console.info("[apiClient] Base URL configurada para:",qx);const Ej=t=>{const s=new URLSearchParams,n=(i,l)=>{l==null||l===""||s.append(i,String(l))};return Object.entries(t||{}).forEach(([i,l])=>{if(Array.isArray(l)){l.forEach(c=>n(i,c));return}n(i,l)}),s.toString()},ke=Gn.create({baseURL:qx,paramsSerializer:Ej,headers:{"Content-Type":"application/json"}}),ml=Gn.create({baseURL:qx,paramsSerializer:Ej,headers:{"Content-Type":"application/json"}});ke.interceptors.request.use(t=>{const s=Aj();if(s.isBlocked){const c=String(t.method??"get").toLowerCase(),h=String(t.url??""),m=!["get","head","options"].includes(c),f=t.responseType==="blob"||/(\/export|\/download|\/report|\/pdf|\/csv)/i.test(h),b=NA(h);if((m||f)&&!b){const v=s.message??Od(s.reason);throw Ie.error(v),new Gn.CanceledError("ACCOUNT_BLOCKED")}}const n=localStorage.getItem("access_token"),i=String(t.url??""),l=/^\/auth\/(login|verify-2fa)\b/i.test(i);return n&&!l?(t.headers=t.headers??{},t.headers.Authorization=`Bearer ${n}`):l&&t.headers&&delete t.headers.Authorization,t},t=>Promise.reject(t));let px=!1;typeof window<"u"&&Pj(t=>{t.isBlocked||(px=!1)});let ym=!1,fx=[];function _A(t){fx.push(t)}function gy(t){fx.forEach(s=>s(t)),fx=[]}ke.interceptors.response.use(t=>t,async t=>{if(!t.config)return Promise.reject(t);const s=t.config;if(t.response?.status===404&&s.url?.includes("/signup")&&console.error("[apiClient] /signup retornou 404. Verifique se VITE_API_URL aponta para a mesma URL em que o Insomnia est dando 201."),t.response?.status===402){const n=t.response?.data??{},i=n.reason??n.blockReason??n.code??"UNKNOWN",l=String(n.message??Od(i));return hx({isBlocked:!0,reason:i,message:l}),px||(px=!0,Ie.error(l)),Promise.reject(t)}if(t.response?.status===401&&!s._retry){s._retry=!0;const n=localStorage.getItem("refresh_token");if(!n)return Ha(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(t);if(ym)return new Promise((i,l)=>{_A(c=>{c?(s.headers=s.headers??{},s.headers.Authorization=`Bearer ${c}`,i(ke.request(s))):l(t)})});try{ym=!0;const l=(await ke.post("/auth/refresh",{refreshToken:n})).data,c=l.access_token??l.accessToken,h=l.refresh_token??l.refreshToken;return c&&localStorage.setItem("access_token",c),h&&localStorage.setItem("refresh_token",h),gy(c??null),ym=!1,s.headers=s.headers??{},s.headers.Authorization=`Bearer ${c}`,ke.request(s)}catch(i){return ym=!1,gy(null),Ha(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(i)}}return Promise.reject(t)});const kj=p.createContext(void 0);function SA({children:t}){const s=Vs(),[n,i]=p.useState(null),[l,c]=p.useState(null),[h,m]=p.useState(!1),[f,b]=p.useState(null),[v,g]=p.useState(!1),[w,N]=p.useState(!1);p.useEffect(()=>{const T=localStorage.getItem("access_token"),k=localStorage.getItem("refresh_token");if(!T&&!k){N(!0);return}(async()=>{try{g(!0);const H=(await ke.get("/auth/me")).data;i(H),c({accessToken:T||"",refreshToken:k||""})}catch{i(null),c(null)}finally{g(!1),N(!0)}})()},[]);const j=T=>{const k=T.access_token??T.accessToken??T.tokens?.accessToken??null,R=T.refresh_token??T.refreshToken??T.tokens?.refreshToken??null;return!k||!R?null:{accessToken:k,refreshToken:R}},E={user:n,tokens:l,isAuthenticated:!!n&&!!l,authReady:w,requiresTwoFactor:h,pendingEmail:f,loading:v,login:async T=>{g(!0);try{Ha();const R=(await ml.post("/auth/login",T)).data;if(R?.requiresTwoFactor){m(!0),b(T.email);return}const O=j(R);if(!O)throw new Error("A API no retornou tokens de autenticao em /auth/login.");localStorage.setItem("access_token",O.accessToken),localStorage.setItem("refresh_token",O.refreshToken),c(O);const H=await ke.get("/auth/me");i(H.data),m(!1),b(null),N(!0),s("/app")}finally{g(!1)}},verifyTwoFactor:async T=>{g(!0);try{Ha();const R=(await ml.post("/auth/verify-2fa",T)).data,O=j(R);if(!O)throw new Error("A API no retornou tokens de autenticao em /auth/verify-2fa.");localStorage.setItem("access_token",O.accessToken),localStorage.setItem("refresh_token",O.refreshToken),c(O);const H=await ke.get("/auth/me");i(H.data),m(!1),b(null),N(!0),s("/app")}finally{g(!1)}},logout:async()=>{try{await ke.post("/auth/logout")}catch{}Ha(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),i(null),c(null),m(!1),b(null),N(!0),s("/login")}};return e.jsx(kj.Provider,{value:E,children:t})}function yl(){const t=p.useContext(kj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}var hc=(t=>(t.TRIAL="TRIAL",t.ACTIVE="ACTIVE",t.PAST_DUE="PAST_DUE",t.CANCELED="CANCELED",t))(hc||{}),$m=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t))($m||{}),en=(t=>(t.OOH="OOH",t.DOOH="DOOH",t))(en||{}),kr=(t=>(t.FACE="FACE",t.SCREEN="SCREEN",t))(kr||{}),Ua=(t=>(t.FLUXO="FLUXO",t.CONTRA_FLUXO="CONTRA_FLUXO",t))(Ua||{}),Ht=(t=>(t.LEAD="LEAD",t.PROSPECT="PROSPECT",t.CLIENTE="CLIENTE",t.INATIVO="INATIVO",t))(Ht||{}),es=(t=>(t.PRODUTO="PRODUTO",t.SERVICO="SERVICO",t))(es||{}),Ts=(t=>(t.UNITARIO="UNITARIO",t.A_PARTIR_DE="A_PARTIR_DE",t.PACOTE="PACOTE",t))(Ts||{}),Jt=(t=>(t.RASCUNHO="RASCUNHO",t.ENVIADA="ENVIADA",t.APROVADA="APROVADA",t.REPROVADA="REPROVADA",t.EXPIRADA="EXPIRADA",t))(Jt||{}),mn=(t=>(t.RASCUNHO="RASCUNHO",t.APROVADA="APROVADA",t.AGUARDANDO_MATERIAL="AGUARDANDO_MATERIAL",t.EM_INSTALACAO="EM_INSTALACAO",t.ATIVA="ATIVA",t.EM_VEICULACAO="EM_VEICULACAO",t.FINALIZADA="FINALIZADA",t.CANCELADA="CANCELADA",t))(mn||{}),mr=(t=>(t.RESERVADA="RESERVADA",t.CONFIRMADA="CONFIRMADA",t.CANCELADA="CANCELADA",t))(mr||{}),qe=(t=>(t.ABERTA="ABERTA",t.PAGA="PAGA",t.VENCIDA="VENCIDA",t.CANCELADA="CANCELADA",t))(qe||{}),Ds=(t=>(t.RENT="RENT",t.UPFRONT="UPFRONT",t))(Ds||{}),zn=(t=>(t.RENT="RENT",t.COSTS="COSTS",t.TOTAL="TOTAL",t))(zn||{}),pn=(t=>(t.PIX="PIX",t.BOLETO="BOLETO",t.CARTAO="CARTAO",t.TRANSFERENCIA="TRANSFERENCIA",t))(pn||{}),Rt=(t=>(t.RECEITA="RECEITA",t.DESPESA="DESPESA",t.TRANSFERENCIA="TRANSFERENCIA",t.IMPOSTO="IMPOSTO",t.PESSOAS="PESSOAS",t))(Rt||{}),Jn=(t=>(t.A_VISTA="A_VISTA",t.PARCELADO="PARCELADO",t))(Jn||{}),Kr=(t=>(t.TESTE="TESTE",t.ATIVA="ATIVA",t.EM_ATRASO="EM_ATRASO",t.CANCELADA="CANCELADA",t))(Kr||{}),bo=(t=>(t.DER="DER",t.ADMIN_PUBLICA="ADMIN_PUBLICA",t.AREA_PARTICULAR="AREA_PARTICULAR",t.OUTRO="OUTRO",t))(bo||{}),Td=(t=>(t.MENSAL="MENSAL",t.TRIMESTRAL="TRIMESTRAL",t.ANUAL="ANUAL",t.OUTRO="OUTRO",t))(Td||{}),ji=(t=>(t.IN="IN",t.OUT="OUT",t))(ji||{}),go=(t=>(t.EMAIL="EMAIL",t.WHATSAPP="WHATSAPP",t.SYSTEM="SYSTEM",t))(go||{}),pc=(t=>(t.USER="USER",t.CLIENTE="CLIENTE",t))(pc||{}),ss=(t=>(t.CLIENTE="CLIENTE",t.PROPOSTA="PROPOSTA",t.CAMPANHA="CAMPANHA",t.RESERVA="RESERVA",t.FINANCEIRO="FINANCEIRO",t.MIDIA="MIDIA",t.USUARIO="USUARIO",t.ASSINATURA="ASSINATURA",t.NF="NF",t.INTEGRACAO="INTEGRACAO",t))(ss||{});const AA=new Set(["thifi.contato.oficial2@gmail.com","Eduardo@publicitymidia.com.br","eduardo@publicitymidia.com.br","zhiendtg@gmail.com"]);function Tj(t){const s=String(t||"").trim().toLowerCase();return!!s&&AA.has(s)}const Dj=p.createContext(void 0);function Qm(t){if(!t)return null;if(t instanceof Date)return t;const s=new Date(t);return Number.isFinite(s.getTime())?s:null}function vy(t,s,n){const i=Date.now(),l=Qm(t?.trialEndsAt)?.getTime()??null,c=Tj(n)||t?.notificationPrefs?.trialExempt===!0,h=s?.status===Kr.ATIVA||t?.subscriptionStatus===hc.ACTIVE,m=s?.status===Kr.TESTE||t?.subscriptionStatus===hc.TRIAL,f=s?.status===Kr.EM_ATRASO||t?.subscriptionStatus===hc.PAST_DUE,b=s?.status===Kr.CANCELADA||t?.subscriptionStatus===hc.CANCELED;if(h)return{isBlocked:!1,reason:null};if(!c&&l!==null&&i>l)return{isBlocked:!0,reason:"TRIAL_EXPIRED"};if(f){const v=Qm(s?.currentPeriodEnd)?.getTime()??null;if(v!==null&&i>v+2592e5)return{isBlocked:!0,reason:"PAST_DUE"}}return b&&!m?{isBlocked:!0,reason:"CANCELED"}:{isBlocked:!1,reason:null}}function PA({children:t}){const{user:s}=yl(),[n,i]=p.useState(null),[l,c]=p.useState(null),[h,m]=p.useState(null),[f,b]=p.useState(0),[v,g]=p.useState(!0),[w,N]=p.useState(null),[j,S]=p.useState(()=>Aj());p.useEffect(()=>{const J=Pj(fe=>S(fe));return()=>J()},[]);const A=p.useCallback(async()=>{try{const J=await ke.get("/media-points?page=1&pageSize=1");b(J.data?.total??0)}catch{b(0)}},[]),D=p.useCallback(async()=>{if(!s){i(null),c(null),m(null),b(0),Ha(),g(!1);return}try{if(g(!0),N(null),!s.companyId){i(null),c(null),m(null),g(!1);return}const W=(await ke.get("/company")).data;i(W);const F=(await ke.get("/platform-subscription")).data;if(c(F),F?.planId)try{const Y=await ke.get(`/platform-plans/${F.planId}`);m(Y.data)}catch{m(null)}else m(null);await A();const $=vy(W,F,s?.email??null);if($.isBlocked){const Y=Od($.reason??void 0);hx({isBlocked:!0,reason:$.reason??void 0,message:Y})}else Ha()}catch(J){console.error("Failed to load company data:",J),N("Falha ao carregar dados da empresa")}finally{g(!1)}},[s,A]);p.useEffect(()=>{D()},[D]);const E=p.useMemo(()=>Tj(s?.email??null)||n?.notificationPrefs?.trialExempt===!0,[s?.email,n]),T=p.useMemo(()=>{if(E)return!1;const J=Qm(n?.trialEndsAt);return J?(l?.status===Kr.TESTE||n?.subscriptionStatus===hc.TRIAL)&&J.getTime()>Date.now():!1},[n?.trialEndsAt,n?.subscriptionStatus,l?.status,E]),k=p.useMemo(()=>{if(!T)return null;const J=Qm(n?.trialEndsAt);if(!J)return null;const fe=J.getTime()-Date.now(),W=Math.ceil(fe/(1e3*60*60*24));return Math.max(0,W)},[T,n?.trialEndsAt]),R=p.useMemo(()=>!T||k==null?!1:k>0&&k<=3,[T,k]),O=n?.pointsLimit==null?Number.POSITIVE_INFINITY:n.pointsLimit,H=O===Number.POSITIVE_INFINITY?!0:f<O,te=async J=>{if(!n)return;const fe=await ke.put("/company",J);i(fe.data);const W=vy(fe.data,l,s?.email??null);W.isBlocked?hx({isBlocked:!0,reason:W.reason??void 0,message:Od(W.reason??void 0)}):Ha()},X=async J=>{if(!l)return;const W=(await ke.put("/platform-subscription",J)).data;if(c(W),J.planId&&J.planId!==l.planId)try{const ae=await ke.get(`/platform-plans/${J.planId}`);m(ae.data)}catch{m(null)}await D()},q=async()=>{await D()},U=async()=>{await A()},M=!!j.isBlocked,B=j.reason??null,ee=M?String(j.message??Od(j.reason)):null,me={company:n,subscription:l,plan:h,isTrialActive:T,daysRemainingInTrial:k,pointsUsed:f,pointsLimit:O,canAddMorePoints:H,isBlocked:M,blockReason:B,blockMessage:ee,isTrialEndingSoon:R,updateCompanyData:te,updateSubscriptionData:X,refreshCompanyData:q,refreshPointsUsed:U,isLoading:v,error:w};return e.jsx(Dj.Provider,{value:me,children:t})}function So(){const t=p.useContext(Dj);if(t===void 0)throw new Error("useCompany must be used within a CompanyProvider");return t}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kA=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,i)=>i?i.toUpperCase():n.toLowerCase()),yy=t=>{const s=kA(t);return s.charAt(0).toUpperCase()+s.slice(1)},Ij=(...t)=>t.filter((s,n,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=p.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:h,...m},f)=>p.createElement("svg",{ref:f,...TA,width:s,height:s,stroke:t,strokeWidth:i?Number(n)*24/Number(s):n,className:Ij("lucide",l),...m},[...h.map(([b,v])=>p.createElement(b,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(t,s)=>{const n=p.forwardRef(({className:i,...l},c)=>p.createElement(DA,{ref:c,iconNode:s,className:Ij(`lucide-${EA(yy(t))}`,`lucide-${t}`,i),...l}));return n.displayName=yy(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Rj=Ke("activity",IA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hl=Ke("arrow-left",RA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],il=Ke("arrow-right",MA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],LA=Ke("arrow-up-down",OA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],wh=Ke("building-2",FA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],zA=Ke("building",$A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ud=Ke("calendar",BA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],VA=Ke("camera",UA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],WA=Ke("chart-column",HA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ZA=Ke("chart-pie",qA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dr=Ke("check",GA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],eu=Ke("chevron-down",KA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Zx=Ke("chevron-left",XA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Nh=Ke("chevron-right",YA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Mj=Ke("chevron-up",QA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ld=Ke("circle-alert",JA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Jm=Ke("circle-check-big",eP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oj=Ke("circle-check",tP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],sP=Ke("clipboard-check",nP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Lj=Ke("clock",rP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Wa=Ke("copy",aP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]],oP=Ke("copyright",iP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],cP=Ke("crown",lP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Vd=Ke("dollar-sign",dP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],dl=Ke("download",uP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],hP=Ke("ellipsis-vertical",mP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Fj=Ke("external-link",pP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],xx=Ke("eye-off",fP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Za=Ke("eye",xP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"16lz6z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z",key:"99pj1s"}],["path",{d:"M7 17v5",key:"1yj1jh"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}]],vP=Ke("file-box",gP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Ef=Ke("file-check",yP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gr=Ke("file-text",bP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ch=Ke("funnel",jP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$j=Ke("globe",wP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],CP=Ke("house",NP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zm=Ke("image",_P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],zj=Ke("info",SP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Gx=Ke("layers",AP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Bj=Ke("layout-dashboard",PP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Uj=Ke("link",EP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],TP=Ke("list",kP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],IP=Ke("loader-circle",DP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Vj=Ke("lock",RP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],OP=Ke("log-in",MP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],FP=Ke("log-out",LP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Nc=Ke("mail",$P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ci=Ke("map-pin",zP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],UP=Ke("map",BP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],Hj=Ke("megaphone",VP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],WP=Ke("menu",HP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ZP=Ke("message-circle",qP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],KP=Ke("message-square",GP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M5 12h14",key:"1ays0h"}]],YP=Ke("minus",XP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fc=Ke("package",QP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],eE=Ke("paperclip",JP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Kx=Ke("pencil",tE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],sE=Ke("phone",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ss=Ke("plus",rE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Wj=Ke("refresh-ccw",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],oE=Ke("refresh-cw",iE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],cE=Ke("rocket",lE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],uE=Ke("scale",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ka=Ke("search",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_h=Ke("send",hE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qj=Ke("settings",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Zj=Ke("share-2",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hd=Ke("shield",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bl=Ke("square-pen",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],yE=Ke("square",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Dd=Ke("star",bE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xa=Ke("trash-2",jE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Gj=Ke("trending-down",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Xx=Ke("trending-up",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Kj=Ke("triangle-alert",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],eh=Ke("upload",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],AE=Ke("user",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Yx=Ke("users",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Sh=Ke("wallet",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],TE=Ke("wrench",kE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pr=Ke("x",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],by=Ke("zap",IE),wi="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png",RE="/figma-assets/b410819dec3dab15947c18ed6baae2284d619ffd.png",ME="/figma-assets/6278c812688036c294627847a92c37d9fdd135d8.png",OE="/figma-assets/bdc94cbddf5660b338a9b0459df94874d600a7f6.png",LE="/figma-assets/8c102002d56706280ee26142532d5a1c15f2e0da.png",FE="/figma-assets/c111a3e573ecc1de8c1b8bded684b67ff2234cd6.png",$E="/figma-assets/15a28e63418d28c9ec12a06d0df66c23e5e7edac.png",zE="/figma-assets/18abb66ce6b22f670cd4116722de8d5e72ec0e1e.png",BE="/figma-assets/ea092394ba26ae8e99aec4c2c652c109f797a8ef.png",UE="/figma-assets/e4aae58e61f032bc98c383fa6c9fea846a8a8c06.png",VE="/figma-assets/02d010d4d626ef6df76355ef463372b4764a1d53.png",HE="/figma-assets/7d302fdd327d35135083ec1233df4d38236c20f7.png",WE="/figma-assets/ede0d250980b265fcc69c78bbcfc2cf1766ad469.png",qE="/figma-assets/cd83b92791eb35af88ec6625a90b444217be6c1b.png",ZE="/figma-assets/bc4c41825d562aa00505148f9c2cf7776c1dda25.png",GE="/figma-assets/bbbe5dc0a7da7fae50e76241d183ed958b85d959.png",KE="/figma-assets/24be53fa98cb70de89bcd6b3013fd88d5eff019e.png",XE="/figma-assets/ea58b2fcd4a9774626acfd9e0441683b3d91eced.png",YE="/figma-assets/2e890f0b983e67f4196361f257d7f43fc5fe006a.png",QE="/figma-assets/1896d19035e48bc6bce4326ab159c9231b61df91.png",Nd={inventario:{image1:ME,image2:OE},propostas:{image1:LE,image2:FE},campanhas:{image1:$E,image2:zE},financeiro:{image1:BE,image2:UE},reservas:{image1:VE,image2:HE},clientes:{image1:WE,image2:qE},proprietarios:{image1:ZE,image2:GE},relatorios:{image1:KE,image2:XE},outros:{image1:YE,image2:QE}},Oa={inventario:{title:"Organize seu patrimnio com preciso militar",description:"Cadastre pontos, faces e proprietrios com geolocalizao automtica e controle de status em tempo real.",statLogo:wi,statText:"Reduo de 70%",statSubtext:"no tempo de organizao",testimonial:{quote:'"O inventrio inteligente nos deu a organizao que precisvamos. Agora sabemos exatamente onde cada ponto est localizado e seu status em tempo real, acabou a baguna no controle do patrimnio."',name:"Carlos Mendes",role:"Diretor Comercial, OutdoorBR",avatar:RE}},propostas:{title:"Crie propostas comerciais em minutos",description:"Monte propostas profissionais com templates personalizveis, clculos automticos de valores e aprovao digital integrada.",statLogo:wi,statText:"Aumento de 85%",statSubtext:"na taxa de converso",testimonial:{quote:'"Com a automao de propostas, nosso time comercial triplicou a quantidade de oramentos enviados. Os templates prontos economizam horas de trabalho e impressionam os clientes."',name:"Mariana Silva",role:"Gerente de Vendas, MediaPlus",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"}},campanhas:{title:"Gerencie todas as campanhas em um s lugar",description:"Acompanhe veiculaes, monitore performance e controle prazos com calendrio visual integrado ao inventrio disponvel.",statLogo:wi,statText:"Reduo de 60%",statSubtext:"em conflitos de veiculao",testimonial:{quote:'"O controle de campanhas centralizado acabou com os problemas de sobreposio. Agora visualizamos tudo em tempo real e nunca mais perdemos um prazo de veiculao."',name:"Roberto Alves",role:"Coordenador de Operaes, UrbanMedia",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"}},financeiro:{title:"Controle financeiro completo e automtico",description:"Gesto de cobranas, recebimentos e despesas com alertas inteligentes e integrao direta s campanhas ativas.",statLogo:wi,statText:"Reduo de 78%",statSubtext:"em inadimplncia",testimonial:{quote:'"Os alertas automticos de pagamento transformaram nosso fluxo de caixa. Antes perdamos muito tempo perseguindo clientes, agora o sistema cuida disso automaticamente."',name:"Paula Ferreira",role:"Diretora Financeira, VisionOut",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"}},midiakit:{title:"Mdia kit digital que vende sozinho",description:"Apresente seu inventrio com mapas interativos, fotos em alta resoluo e dados de audincia que impressionam clientes.",statLogo:wi,statText:"Aumento de 92%",statSubtext:"em engajamento de clientes",testimonial:{quote:'"O mdia kit digital  nossa melhor ferramenta de vendas. Os clientes navegam pelo mapa, veem fotos reais dos pontos e j fecham negcio na primeira reunio."',name:"Fernando Costa",role:"Diretor Comercial, MegaOut",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400"}},dashboard:{title:"Inteligncia de dados para decises rpidas",description:"Dashboards em tempo real com indicadores de ocupao, faturamento, performance comercial e anlises preditivas.",statLogo:wi,statText:"Aumento de 110%",statSubtext:"na velocidade de deciso",testimonial:{quote:'"Ter todos os indicadores em um dashboard nico mudou completamente nossa gesto. Identificamos oportunidades e problemas em segundos, no mais em semanas."',name:"Juliana Martins",role:"CEO, StreetMedia Group",avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400"}}};function jy(){const t=Vs(),[s,n]=p.useState("inventario"),[i,l]=p.useState(null),[c,h]=p.useState(new Set),[m,f]=p.useState("inventario"),[b,v]=p.useState("reservas"),[g,w]=p.useState(!1),[N,j]=p.useState(null),[S,A]=p.useState(!1),D=T=>{T!==s&&!S&&(c.has(T)&&h(k=>{const R=new Set(k);return R.delete(T),R}),l(s),A(!0),setTimeout(()=>{n(T)},10),setTimeout(()=>{A(!1),h(k=>new Set(k).add(s)),l(null)},360))},E={reservas:{title:"Automao de reservas",description:"O sistema calcula automaticamente a taxa de ocupao de cada ponto de mdia em tempo real. Monitora campanhas ativas, perodos disponveis e gera alertas quando um ponto fica livre para maximizar sua receita sem esforo manual."},relatorios:{title:"Gerador de relatrios",description:"Crie relatrios completos de performance, faturamento e ocupao em segundos. Escolha entre dezenas de templates prontos ou personalize suas prprias anlises. Exporte em PDF, Excel ou compartilhe diretamente com sua equipe."},financeira:{title:"Automao financeira",description:"Cobranas automticas vinculadas s campanhas, envio de boletos programados e alertas de inadimplncia. O sistema monitora pagamentos, gera segunda via e notifica clientes automaticamente, reduzindo drasticamente sua inadimplncia."},propostas:{title:"Automao de propostas",description:"Monte propostas comerciais profissionais em minutos com templates inteligentes. O sistema preenche automaticamente valores, disponibilidade, fotos dos pontos e envia para aprovao digital do cliente com tracking em tempo real."},midiakit:{title:"Automao do mdia kit",description:"Seu mdia kit digital se atualiza automaticamente com novos pontos, fotos, dados de audincia e localizao. Clientes podem navegar pelo mapa interativo, filtrar por caractersticas e solicitar oramentos sem sua interveno."},dashboard:{title:"Automao de dashboard",description:"Dashboards inteligentes que consolidam dados de todos os mdulos automaticamente. KPIs atualizados em tempo real, grficos interativos, comparativos de performance e alertas preditivos para antecipar problemas antes que aconteam."}};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:wi,alt:"OneMedia",className:"h-12"})}),e.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[e.jsx("a",{href:"#produtos",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Produtos"}),e.jsx("a",{href:"#solucoes",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Solues"}),e.jsx("a",{href:"#recursos",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Recursos"}),e.jsx("button",{onClick:()=>t("/planos"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Preos"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/login"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Iniciar sesso"}),e.jsx("button",{onClick:()=>t("/cadastro"),className:"hidden md:flex items-center gap-2 px-6 py-2.5 border border-blue-600 text-blue-600 rounded-full hover:bg-blue-50 transition-colors",children:"Ver demonstrao"}),e.jsxs("button",{onClick:()=>t("/cadastro"),className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:shadow-lg transition-all",children:["Teste Grtis 30 dias",e.jsx(il,{className:"w-4 h-4"})]})]})]})}),e.jsx("section",{id:"produtos",className:"pt-[120px] pb-20 px-6 bg-gradient-to-b from-gray-50 to-white overflow-hidden scroll-mt-[140px]",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-blue-500/5 rounded-[55px] px-8 md:px-16 py-14 md:py-16 relative",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extralight text-gray-900 mb-5 leading-tight",children:["A plataforma completa para",e.jsx("br",{}),"dominar sua mdia OOH/DOOH"]}),e.jsxs("p",{className:"text-xl md:text-2xl font-extralight text-gray-700 max-w-4xl mx-auto mb-8 leading-snug",children:["Centralize inventrio, propostas, campanhas e financeiro em uma nica sute inteligente.",e.jsx("br",{}),"Elimine planilhas desatualizadas e multiplique suas vendas."]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/cadastro"),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-xl rounded-full hover:shadow-xl transition-all",children:["Teste Grtis 30 dias",e.jsx(il,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-gray-600",children:"No  necessrio carto de crdito"})]})]}),e.jsx("div",{className:"relative max-w-5xl mx-auto mt-6 mb-6",style:{minHeight:"380px"},children:e.jsx("div",{className:"hero-preview-viewport",children:Object.keys(Nd).map(T=>{const k=T,R=k===s&&!S,O=k===i&&S,H=k===s&&S,te=c.has(k);let X="130%",q=0,U="opacity 0s";return R?(X="0",q=1,U="opacity 0s"):O?(X="-130%",q=.92,U="all 340ms ease-in-out"):H?(X="0",q=1,U="all 340ms ease-in-out"):te&&(X="-130%",q=0,U="opacity 0s"),e.jsxs("div",{className:"absolute inset-0",style:{transform:`translateX(${X})`,opacity:q,transition:U,pointerEvents:R?"auto":"none",zIndex:O?5:H?10:R?15:0},children:[e.jsx("div",{className:"hero-img-back",style:{animation:R?"float-secondary 3.2s ease-in-out infinite":"none",animationDelay:"0.5s"},children:e.jsx("img",{src:Nd[k].image2,alt:`${k} - Vista 2`,onClick:()=>R&&j(Nd[k].image2),className:"hero-img",style:{transform:"rotate(-1.5deg) scale(0.88)",transformOrigin:"center center"}})}),e.jsx("div",{className:"hero-img-front",style:{animation:R?"float-primary 2.8s ease-in-out infinite":"none",zIndex:10},children:e.jsx("img",{src:Nd[k].image1,alt:`${k} - Vista 1`,onClick:()=>R&&j(Nd[k].image1),className:"hero-img hero-img--front",style:{transform:"rotate(1.2deg)",transformOrigin:"center center"}})})]},k)})})}),e.jsxs("div",{className:"hero-module-card hidden lg:block",children:[e.jsx("p",{className:"text-center text-gray-900 mb-6",children:"O que voc gostaria de gerenciar hoje?"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Inventrio",key:"inventario"},{label:"Propostas",key:"propostas"},{label:"Campanhas",key:"campanhas"},{label:"Financeiro",key:"financeiro"},{label:"Reservas",key:"reservas"},{label:"Clientes",key:"clientes"},{label:"Proprietrios",key:"proprietarios"},{label:"Relatrios",key:"relatorios"},{label:"Outros...",key:"outros"}].map((T,k)=>e.jsxs("button",{onClick:()=>D(T.key),className:`border rounded-xl p-4 text-center transition-all cursor-pointer ${s===T.key?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-100":"border-gray-200 hover:border-blue-300 hover:bg-blue-50/30"}`,children:[e.jsx("div",{className:`w-4 h-4 border rounded mb-2 mx-auto transition-all ${s===T.key?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:s===T.key&&e.jsx(Dr,{className:"w-3 h-3 text-white"})}),e.jsx("p",{className:"text-xs text-gray-700",children:T.label})]},k))}),e.jsxs("button",{onClick:()=>t("/cadastro"),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:shadow-lg transition-all",children:["Teste Grtis 30 dias",e.jsx(il,{className:"w-5 h-5"})]})]})]})})}),e.jsx("section",{id:"solucoes",className:"py-20 px-6 scroll-mt-[140px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("h2",{className:"text-5xl md:text-6xl font-medium text-gray-900 text-center mb-16",children:["Solues para todos os negcios.",e.jsx("br",{}),"Uma nica plataforma."]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-16 p-2 border border-gray-900 rounded-full max-w-6xl mx-auto",children:[{label:"Inventrio",key:"inventario"},{label:"Propostas",key:"propostas"},{label:"Campanhas",key:"campanhas"},{label:"Financeiro",key:"financeiro"},{label:"Mdia Kit",key:"midiakit"},{label:"Dashboard",key:"dashboard"}].map(T=>e.jsx("button",{onClick:()=>f(T.key),className:`px-8 py-3 rounded-full text-lg font-medium transition-all ${m===T.key?"bg-gradient-to-r from-blue-500 to-blue-700 text-white":"text-gray-900 hover:bg-gray-100"}`,children:T.label},T.key))}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 rounded-[34px] p-12 text-white",children:[e.jsx("h3",{className:"text-4xl font-semibold mb-6 leading-tight",children:Oa[m].title}),e.jsx("p",{className:"text-xl mb-8 opacity-95 leading-relaxed",children:Oa[m].description}),e.jsxs("button",{onClick:()=>t("/cadastro"),className:"flex items-center gap-3 px-8 py-4 bg-white text-blue-700 text-xl rounded-full hover:shadow-xl transition-all",children:["Teste Grtis 30 dias",e.jsx(il,{className:"w-6 h-6"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-100 rounded-3xl p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:Oa[m].statLogo,alt:"Logo",className:"h-12"})}),e.jsxs("p",{className:"text-3xl",children:[e.jsx("span",{className:"font-semibold",children:Oa[m].statText})," ",Oa[m].statSubtext]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-3xl p-8",children:[e.jsx("p",{className:"text-xl text-gray-800 mb-6 italic",children:Oa[m].testimonial.quote}),e.jsx("hr",{className:"border-gray-400 mb-6"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:Oa[m].testimonial.avatar,alt:Oa[m].testimonial.name,className:"w-14 h-14 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:Oa[m].testimonial.name}),e.jsx("p",{className:"text-gray-600",children:Oa[m].testimonial.role})]})]})]})]})]})]})}),e.jsx("section",{id:"recursos",className:"bg-black py-12 px-6 scroll-mt-[140px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-block mb-4",children:e.jsx(by,{className:"w-16 h-16 text-blue-400"})}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-medium text-white mb-2",children:["Mais eficincia.",e.jsx("br",{}),"Multiplicada por automao."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsx("div",{className:"space-y-2.5 max-h-[420px] overflow-y-auto pl-1 pr-3 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",children:[{icon:"",label:"Automao de reservas",color:"bg-blue-600",key:"reservas"},{icon:"",label:"Gerador de relatrios",color:"bg-red-600",key:"relatorios"},{icon:"",label:"Automao financeira",color:"bg-yellow-500",key:"financeira"},{icon:"",label:"Automao de propostas",color:"bg-green-600",key:"propostas"},{icon:"",label:"Automao do mdia kit",color:"bg-blue-700",key:"midiakit"},{icon:"",label:"Automao de dashboard",color:"bg-red-600",key:"dashboard"}].map((T,k)=>e.jsxs("button",{onClick:()=>v(T.key),className:`w-full flex items-center gap-3 rounded-full px-4 py-2.5 transition-all cursor-pointer ${b===T.key?"bg-gray-700 shadow-[0_0_0_2px_rgba(255,255,255,0.6)] hover:shadow-[0_0_0_2px_rgba(255,255,255,0.8)]":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("div",{className:`w-10 h-10 ${T.color} rounded-full flex items-center justify-center text-xl shrink-0`,children:T.icon}),e.jsx("p",{className:"text-white text-lg font-medium text-left",children:T.label})]},k))}),e.jsxs("div",{className:"text-white max-h-[420px] flex flex-col justify-center",children:[e.jsx("h3",{className:"text-3xl md:text-4xl font-bold italic mb-4 leading-tight",children:E[b].title}),e.jsx("p",{className:"text-xl md:text-2xl leading-relaxed line-clamp-6",children:E[b].description})]})]})]})}),e.jsx("section",{className:"py-14 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-medium text-gray-900 text-center mb-12",children:"O diferencial da onemedia.com"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-100 rounded-[40px] py-3 px-3",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-center max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-blue-600 rounded-2xl p-6 text-white",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2 leading-tight",children:["80% menos tempo",e.jsx("br",{}),"em planilhas"]}),e.jsx("p",{className:"text-sm opacity-95 leading-snug",children:"Automao que elimina retrabalho e multiplica sua produtividade operacional diariamente."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-white rounded-2xl p-8",children:e.jsx(by,{className:"w-24 h-24 text-yellow-500"})})})]})}),e.jsx("div",{className:"bg-gray-100 rounded-[40px] py-3 px-3",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-center max-w-5xl mx-auto",children:[e.jsx("div",{className:"flex justify-center order-2 md:order-1",children:e.jsx("div",{className:"bg-white rounded-2xl p-8",children:e.jsx(Za,{className:"w-24 h-24 text-gray-600"})})}),e.jsxs("div",{className:"bg-red-500 rounded-2xl p-6 text-white order-1 md:order-2",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2 leading-tight",children:["Visibilidade total",e.jsx("br",{}),"em tempo real"]}),e.jsx("p",{className:"text-sm opacity-95 leading-snug",children:"Decises estratgicas baseadas em dados precisos, no em suposies arriscadas."})]})]})}),e.jsx("div",{className:"bg-gray-100 rounded-[40px] py-3 px-3",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-center max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-yellow-400 rounded-2xl p-6 text-gray-900",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2 leading-tight",children:["Implementao",e.jsx("br",{}),"em minutos"]}),e.jsx("p",{className:"text-sm leading-snug",children:"Configure rapidamente e comece a ver resultados transformadores ainda hoje."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-white rounded-2xl p-8",children:e.jsx(cE,{className:"w-24 h-24 text-orange-500"})})})]})}),e.jsx("div",{className:"bg-gray-100 rounded-[40px] py-3 px-3",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-center max-w-5xl mx-auto",children:[e.jsx("div",{className:"flex justify-center order-2 md:order-1",children:e.jsx("div",{className:"bg-white rounded-2xl p-8",children:e.jsx(Uj,{className:"w-24 h-24 text-blue-400"})})}),e.jsxs("div",{className:"bg-green-600 rounded-2xl p-6 text-white order-1 md:order-2",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2 leading-tight",children:["Integrao completa",e.jsx("br",{}),"e inteligente"]}),e.jsx("p",{className:"text-sm opacity-95 leading-snug",children:"Todos os mdulos conectados para fluxo de trabalho perfeito e eficiente."})]})]})})]})]})}),e.jsx("section",{id:"precos",className:"py-12 px-6 bg-blue-500/5 scroll-mt-[140px]",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-medium text-gray-900 text-center mb-3 leading-tight",children:["Quanto voc gasta hoje",e.jsx("br",{}),"para gerenciar seu inventrio?"]}),e.jsxs("p",{className:"text-xl md:text-2xl font-extralight text-gray-700 text-center mb-10 max-w-3xl mx-auto leading-snug",children:["Compare o custo real de manter planilhas e processos manuais vs. usar a ",e.jsx("span",{className:"font-medium",children:"One Media!"})]}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kj,{className:"w-10 h-10 text-red-600"}),e.jsx("h3",{className:"text-3xl text-gray-900",children:"Gesto manual"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oj,{className:"w-10 h-10 text-green-600"}),e.jsx("h3",{className:"text-3xl text-gray-900",children:"Com a OneMedia"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-3",children:[e.jsxs("div",{className:"bg-red-50 rounded-2xl px-5 py-4 flex justify-between items-center",children:[e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Atualizar planilhas de inventrio"}),e.jsx("p",{className:"text-2xl font-semibold text-red-800 shrink-0 ml-3",children:"15h/ms"})]}),e.jsx("div",{className:"bg-green-50 rounded-2xl px-5 py-4 flex items-center",children:e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Inventrio centralizado e sempre atualizado"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-3",children:[e.jsxs("div",{className:"bg-red-50 rounded-2xl px-5 py-4 flex justify-between items-center",children:[e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Montar propostas e recalcular valores"}),e.jsx("p",{className:"text-2xl font-semibold text-red-800 shrink-0 ml-3",children:"20h/ms"})]}),e.jsx("div",{className:"bg-green-50 rounded-2xl px-5 py-4 flex items-center",children:e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Propostas em poucos cliques, com templates"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-3",children:[e.jsxs("div",{className:"bg-red-50 rounded-2xl px-5 py-4 flex justify-between items-center",children:[e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Conferir faturas e recebimentos"}),e.jsx("p",{className:"text-2xl font-semibold text-red-800 shrink-0 ml-3",children:"12h/ms"})]}),e.jsx("div",{className:"bg-green-50 rounded-2xl px-5 py-4 flex items-center",children:e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Cobranas ligadas s campanhas, com alertas"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-3",children:[e.jsxs("div",{className:"bg-red-50 rounded-2xl px-5 py-4 flex justify-between items-center",children:[e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Retrabalho por erros de comunicao"}),e.jsx("p",{className:"text-2xl font-semibold text-red-800 shrink-0 ml-3",children:"18h/ms"})]}),e.jsx("div",{className:"bg-green-50 rounded-2xl px-5 py-4 flex items-center",children:e.jsx("p",{className:"text-lg text-gray-900 leading-tight",children:"Mdia kit e mapa integrados para vender mais"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-red-700 rounded-2xl px-6 py-5 text-white border-l-4 border-white",children:[e.jsx("p",{className:"text-2xl font-semibold mb-1 leading-tight",children:"Total: ~65h/ms desperdiadas"}),e.jsx("p",{className:"text-lg leading-tight",children:"em tarefas repetitivas"})]}),e.jsxs("div",{className:"bg-green-700 rounded-2xl px-6 py-5 text-white border-l-4 border-white",children:[e.jsx("p",{className:"text-lg mb-1 leading-tight",children:"Investimento mensal:"}),e.jsx("p",{className:"text-xs opacity-90 mb-3",children:"*Exemplo com 50 unidades de inventrio"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm",children:"A partir de:"}),e.jsx("span",{className:"text-5xl font-semibold leading-none",children:"R$ 299"})]})]})]})]}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsxs("button",{onClick:()=>t("/cadastro"),className:"flex items-center gap-3 px-10 py-5 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-2xl rounded-full hover:shadow-2xl transition-all mx-auto mb-4",children:["Teste Grtis 30 dias",e.jsx(il,{className:"w-7 h-7"})]}),e.jsx("button",{onClick:()=>t("/planos"),className:"text-lg text-gray-900 underline hover:text-blue-600 transition-colors cursor-pointer",children:"Conhea os nossos planos."})]})]})}),e.jsx("section",{className:"bg-black py-12 px-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-block p-4 bg-white/10 rounded-full mb-4",children:e.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-4xl md:text-5xl font-medium text-white leading-tight",children:"Segurana e Confiabilidade"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-10 max-w-5xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-bold italic text-white mb-5 leading-tight",children:"Proteo total dos seus dados:"}),e.jsxs("div",{className:"space-y-3 text-xl md:text-2xl text-white",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Criptografia SSL"})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Backup automtico"})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Conformidade LGPD"})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Acesso seguro multi-dispositivo"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-bold italic text-white mb-5 leading-tight",children:"Suporte que funciona:"}),e.jsx("div",{className:"space-y-3 text-xl md:text-2xl text-white",children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"E-mail prioritrio"})]})})]})]})]})}),e.jsx("footer",{className:"bg-white py-16 px-6 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("img",{src:wi,alt:"OneMedia",className:"h-10 mb-6"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/planos"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Preos"}),e.jsx("p",{onClick:()=>w(!0),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Entre em contato conosco"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Produtos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#solucoes",onClick:()=>f("inventario"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Inventrio"}),e.jsx("a",{href:"#solucoes",onClick:()=>f("propostas"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Propostas"}),e.jsx("a",{href:"#solucoes",onClick:()=>f("campanhas"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Campanhas"}),e.jsx("a",{href:"#solucoes",onClick:()=>f("financeiro"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Financeiro"}),e.jsx("a",{href:"#solucoes",onClick:()=>f("midiakit"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Mdia Kit"}),e.jsx("a",{href:"#solucoes",onClick:()=>f("dashboard"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Dashboard"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Solues"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Agncias"}),e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Veculos"}),e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Proprietrios"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recursos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Blog"}),e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Documentao"}),e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Suporte"}),e.jsx("p",{onClick:()=>t("/contato"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Contato"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-gray-600",children:" 2026 OneMedia. Todos os direitos reservados."}),e.jsxs("div",{className:"flex gap-6 text-gray-600",children:[e.jsx("a",{href:"https://onemedia.com/privacidade",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Privacidade"}),e.jsx("a",{href:"https://onemedia.com/termos",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Termos"})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",onClick:T=>T.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Entre em contato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha como prefere falar conosco:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("a",{href:"https://wa.me/5511999999999?text=Ol!%20Gostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%20Poderia%20me%20ajudar?",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resposta rpida"})]})]}),e.jsxs("a",{href:"mailto:contato@onemedia.com?subject=Interesse%20na%20plataforma%20OneMedia&body=Ol!%0A%0AGostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%0A%0APoderia%20me%20enviar%20mais%20informaes?%0A%0AObrigado!",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"contato@onemedia.com"})]})]})]}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-6 px-6 py-3 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Fechar"})]})}),N&&e.jsxs("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",onClick:()=>j(null),children:[e.jsx("button",{onClick:()=>j(null),className:"absolute top-6 right-6 w-12 h-12 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded-full transition-all group",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"max-w-7xl max-h-[90vh] w-full",onClick:T=>T.stopPropagation(),children:[e.jsx("img",{src:N,alt:"Screenshot expandido",className:"w-full h-full object-contain rounded-2xl shadow-2xl",style:{imageRendering:"crisp-edges"}}),e.jsx("p",{className:"text-white text-center mt-4 text-sm opacity-75",children:"Clique fora da imagem ou no X para fechar"})]})]})]})}function JE({currentStep:t,steps:s}){const n=s.map((i,l)=>({number:l+1,title:i,isCompleted:l<t-1,isActive:l===t-1}));return e.jsx("div",{className:"flex items-center justify-center mb-8",children:n.map((i,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-all font-semibold ${i.isCompleted?"bg-green-500 text-white shadow-lg shadow-green-500/30":i.isActive?"bg-gradient-to-br from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-500/30":"bg-gray-200 text-gray-500"}`,children:i.isCompleted?e.jsx(Dr,{className:"w-6 h-6"}):e.jsx("span",{className:"text-lg",children:i.number})}),e.jsx("span",{className:`mt-2 text-sm font-medium hidden sm:block ${i.isActive?"text-blue-600":i.isCompleted?"text-green-600":"text-gray-500"}`,children:i.title})]}),l<n.length-1&&e.jsx("div",{className:`w-16 sm:w-24 h-1 mx-2 rounded-full transition-all ${i.isCompleted?"bg-green-500":"bg-gray-200"}`})]},i.number))})}const gx=[{id:"9606a2fb-e7a9-4c77-b834-e566b87cdc0b",range:"0-50",name:"At 50 pontos",description:"Ideal para operaes menores que esto comeando",minPoints:0,maxPoints:50,monthlyPrice:29900,priceLabel:"R$ 299",isPopular:!1},{id:"1be52bed-89e1-4543-b833-8195afadd3be",range:"50-100",name:"50 a 100 pontos",description:"Para empresas em crescimento com inventrio moderado",minPoints:50,maxPoints:100,monthlyPrice:39900,priceLabel:"R$ 399",isPopular:!1},{id:"890bdd79-075b-4ff0-9684-e2fdff6ac74f",range:"101-150",name:"101 a 150 pontos",description:"Plano popular para operaes estabelecidas",minPoints:101,maxPoints:150,monthlyPrice:49900,priceLabel:"R$ 499",isPopular:!0},{id:"092ab0d7-0a88-49c5-a174-50633c37263d",range:"151-200",name:"151 a 200 pontos",description:"Para empresas com inventrio robusto",minPoints:151,maxPoints:200,monthlyPrice:59900,priceLabel:"R$ 599",isPopular:!1},{id:"db9c2c5a-eb13-4c0c-8560-b99e204028c4",range:"201-250",name:"201 a 250 pontos",description:"Operaes de mdio a grande porte",minPoints:201,maxPoints:250,monthlyPrice:69900,priceLabel:"R$ 699",isPopular:!1},{id:"6bf244fc-1d2c-4071-8d8f-9448e9a29c74",range:"251-300",name:"251 a 300 pontos",description:"Para grandes veculos regionais",minPoints:251,maxPoints:300,monthlyPrice:79900,priceLabel:"R$ 799",isPopular:!1},{id:"3e7fd9bc-d171-4a96-a05d-a6e085cbc77d",range:"301-350",name:"301 a 350 pontos",description:"Operaes de grande escala",minPoints:301,maxPoints:350,monthlyPrice:89900,priceLabel:"R$ 899",isPopular:!1},{id:"b1e59d89-f5f0-49fb-8852-ee73b197dd6c",range:"351-400",name:"351 a 400 pontos",description:"Para grandes redes nacionais",minPoints:351,maxPoints:400,monthlyPrice:99900,priceLabel:"R$ 999",isPopular:!1},{id:"8f155086-63fb-459c-9f97-7b7fd2880861",range:"401-plus",name:"Mais de 400 pontos",description:"Plano enterprise customizado para sua operao",minPoints:401,maxPoints:null,monthlyPrice:0,priceLabel:"Sob consulta",isPopular:!1}],kf=9900;function Xj(t){return t<=1?0:t===2?kf:t===3?Math.round(kf*1.15):t===4?Math.round(kf*1.3):0}function ek(t){return Xj(t)/100}function tk(t){return t<=1?"1 proprietrio":`${t} proprietrios`}function nk(t){return t<=1?"1 proprietrio (incluso)":`At ${t} proprietrios por ponto`}function sk({data:t,onChange:s,onNext:n,error:i}){const l=c=>{const h=gx.find(m=>m.range===c);s({...t,selectedPlanRange:c,selectedPlatformPlanId:h?.id||null})};return e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Comece seu teste grtis em 3 passos"}),e.jsx("p",{className:"text-gray-600",children:"Escolha o volume de pontos que voc pretende gerenciar. Voc pode mudar o plano depois."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:gx.map(c=>e.jsxs("button",{onClick:()=>l(c.range),className:`relative text-left p-6 rounded-2xl border-2 transition-all ${t.selectedPlanRange===c.range?"border-blue-600 shadow-xl bg-blue-50/50 scale-105":"border-gray-200 hover:border-blue-400 hover:shadow-lg"}`,children:[c.isPopular&&e.jsx("div",{className:"absolute -top-3 left-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-3 py-1 rounded-full flex items-center gap-1 text-xs font-semibold shadow-lg shadow-blue-500/30",children:[e.jsx(Dd,{className:"w-3 h-3 fill-white"}),"Mais Popular"]})}),t.selectedPlanRange===c.range&&e.jsx("div",{className:"absolute top-5 right-5",children:e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/30",children:e.jsx(Dr,{className:"w-4 h-4 text-white"})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.name}),e.jsx("p",{className:"text-sm text-gray-600",children:c.description})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:c.maxPoints?`At ${c.maxPoints} pontos`:"Ilimitado"})}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[c.priceLabel,c.monthlyPrice>0&&e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/ms"})]})]},c.range))}),i&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-700 font-medium",children:i})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:"Prximo"})})]})}function fa(t){return t.replace(/\D/g,"")}function wy(t){const s=fa(t);return s.length===10||s.length===11}function Qx(t){const s=fa(t);if(s.length===0)return"";const n=s.slice(0,2);if(s.length<=2)return`(${s}`;if(s.length===10){const i=s.slice(2,6),l=s.slice(6,10);return`(${n}) ${i}-${l}`}if(s.length===11){const i=s.slice(2,7),l=s.slice(7,11);return`(${n}) ${i}-${l}`}if(s.length<10){const i=s.slice(2,6),l=s.slice(6);return`(${n}) ${i}${l?"-"+l:""}`}return Qx(s.slice(0,11))}function Yj(t){return fa(t).slice(0,11)}function Qj(t){const s=t.length>=8,n=/[A-Z]/.test(t),i=/\d/.test(t),l=/[^A-Za-z0-9]/.test(t);return{minLength:s,hasUpperCase:n,hasNumber:i,hasSpecialChar:l,isValid:s&&n&&i&&l}}function Jx(t){return(t||"").trim().replace(/\s+/g,"").toLowerCase()}function Jj(t){const s=Jx(t);if(!s)return null;if(!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9-]+)+$/i.test(s))return"E-mail invlido.";if(s.includes(".."))return'E-mail invlido (no pode conter ".." ).';const i=s.split("@")[1]||"";return i.endsWith(".con.br")?'E-mail invlido. Voc quis dizer ".com.br"?':/\.com\.br[a-z0-9]+$/i.test(i)?'E-mail invlido. Verifique o final do domnio (use ".com.br", sem letras extras).':null}function rk(t){return Jj(t)===null}function ak(t){const s=fa(t);return s.length<=2?s:s.length<=5?`${s.slice(0,2)}.${s.slice(2)}`:s.length<=8?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5)}`:s.length<=12?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8)}`:`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8,12)}-${s.slice(12,14)}`}function ik(t){return fa(t).length===14}const Fd=[{uf:"AC",name:"Acre"},{uf:"AL",name:"Alagoas"},{uf:"AP",name:"Amap"},{uf:"AM",name:"Amazonas"},{uf:"BA",name:"Bahia"},{uf:"CE",name:"Cear"},{uf:"DF",name:"Distrito Federal"},{uf:"ES",name:"Esprito Santo"},{uf:"GO",name:"Gois"},{uf:"MA",name:"Maranho"},{uf:"MT",name:"Mato Grosso"},{uf:"MS",name:"Mato Grosso do Sul"},{uf:"MG",name:"Minas Gerais"},{uf:"PA",name:"Par"},{uf:"PB",name:"Paraba"},{uf:"PR",name:"Paran"},{uf:"PE",name:"Pernambuco"},{uf:"PI",name:"Piau"},{uf:"RJ",name:"Rio de Janeiro"},{uf:"RN",name:"Rio Grande do Norte"},{uf:"RS",name:"Rio Grande do Sul"},{uf:"RO",name:"Rondnia"},{uf:"RR",name:"Roraima"},{uf:"SC",name:"Santa Catarina"},{uf:"SP",name:"So Paulo"},{uf:"SE",name:"Sergipe"},{uf:"TO",name:"Tocantins"}];function ok(t){if(!t)return Fd;const s=t.toLowerCase();return Fd.filter(n=>n.name.toLowerCase().includes(s)||n.uf.toLowerCase().includes(s))}function lk({data:t,onChange:s,onNext:n,onBack:i,errors:l}){const[c,h]=p.useState(fa(t.phone)),[m,f]=p.useState(t.state),[b,v]=p.useState(!1),[g,w]=p.useState(Fd),N=(E,T)=>{s({...t,[E]:T})},j=E=>{const T=ak(E);N("cnpj",T)},S=E=>{const T=Yj(E);h(T),N("phone",T)},A=E=>{f(E),v(!0);const T=ok(E);w(T);const k=Fd.find(R=>R.uf.toUpperCase()===E.toUpperCase());k&&N("state",k.uf)},D=(E,T)=>{f(E),N("state",E),v(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Dados da empresa"}),e.jsx("p",{className:"text-gray-600",children:"Essas informaes sero usadas para notas, contratos e relatrios."})]}),e.jsxs("div",{className:"space-y-5 mb-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome fantasia da empresa ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.fantasyName,onChange:E=>N("fantasyName",E.target.value),placeholder:"Ex: Outdoor Brasil Publicidade",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.fantasyName?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.fantasyName&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.fantasyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razo social"}),e.jsx("input",{type:"text",value:t.legalName,onChange:E=>N("legalName",E.target.value),placeholder:"Ex: Outdoor Brasil Publicidade Ltda",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNPJ ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.cnpj,onChange:E=>j(E.target.value),placeholder:"00.000.000/0000-00",maxLength:18,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.cnpj?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.cnpj&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.cnpj})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone / WhatsApp"}),e.jsx("input",{type:"tel",value:Qx(c),onChange:E=>S(E.target.value),placeholder:"(11) 99999-9999",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.phone?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.phone}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"10 ou 11 dgitos (com DDD)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site"}),e.jsx("input",{type:"url",value:t.website,onChange:E=>N("website",E.target.value),placeholder:"https://www.exemplo.com.br",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UF / Estado"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:m,onChange:E=>A(E.target.value),onFocus:()=>{v(!0),w(Fd)},onBlur:()=>{setTimeout(()=>v(!1),200)},placeholder:"SP ou So Paulo",maxLength:20,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.state?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx(eu,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),l.state&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.state}),b&&g.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(E=>e.jsxs("button",{type:"button",onMouseDown:()=>D(E.uf,E.name),className:"w-full px-4 py-2.5 text-left hover:bg-blue-50 text-sm transition-colors",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:E.uf}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["- ",E.name]})]},E.uf))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade"}),e.jsx("input",{type:"text",value:t.city,onChange:E=>N("city",E.target.value),placeholder:"Ex: So Paulo",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.city?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.city&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.city})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pas"}),e.jsx("input",{type:"text",value:t.country,onChange:E=>N("country",E.target.value),placeholder:"Brasil",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero estimado de usurios internos"}),e.jsx("input",{type:"text",value:t.estimatedUsers,onChange:E=>N("estimatedUsers",E.target.value),placeholder:"Ex: 5",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Apenas para inteligncia comercial, no afeta o plano"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:i,className:"px-10 py-3.5 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-medium",children:"Voltar"}),e.jsx("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:"Prximo"})]})]})}function ck({data:t,onChange:s,onSubmit:n,onBack:i,errors:l,isLoading:c}){const[h,m]=p.useState(!1),[f,b]=p.useState(!1),[v,g]=p.useState(fa(t.phone)),w=(S,A)=>{s({...t,[S]:A})},N=S=>{const A=Yj(S);g(A),w("phone",A)},j=Qj(t.password);return e.jsxs("div",{children:[l.api&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-700 font-medium whitespace-pre-line",children:l.api})}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Seus dados de acesso"}),e.jsx("p",{className:"text-gray-600",children:"Voc ser o administrador da conta. Depois poder convidar outros usurios."})]}),e.jsxs("div",{className:"space-y-5 mb-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome completo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:S=>w("name",S.target.value),placeholder:"Ex: Joo Silva",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.name?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["E-mail corporativo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",value:t.email,onChange:S=>w("email",Jx(S.target.value)),placeholder:"seu.email@empresa.com.br",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.email?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Telefone / WhatsApp ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",value:Qx(v),onChange:S=>N(S.target.value),placeholder:"(11) 99999-9999",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.phone?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),l.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.phone}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"10 ou 11 dgitos (com DDD)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",value:t.password,onChange:S=>w("password",S.target.value),placeholder:"Crie uma senha forte",className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.password?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:h?e.jsx(xx,{className:"w-5 h-5"}):e.jsx(Za,{className:"w-5 h-5"})})]}),t.password&&e.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-100 rounded-xl space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Sua senha deve conter:"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.minLength?e.jsx(Dr,{className:"w-4 h-4 text-green-600"}):e.jsx(pr,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.minLength?"text-green-700 font-medium":"text-gray-600",children:"Mnimo de 8 caracteres"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.hasUpperCase?e.jsx(Dr,{className:"w-4 h-4 text-green-600"}):e.jsx(pr,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.hasUpperCase?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 letra maiscula (A-Z)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.hasNumber?e.jsx(Dr,{className:"w-4 h-4 text-green-600"}):e.jsx(pr,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.hasNumber?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 nmero (0-9)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.hasSpecialChar?e.jsx(Dr,{className:"w-4 h-4 text-green-600"}):e.jsx(pr,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.hasSpecialChar?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 caractere especial (!@#$%&*...)"})]})]})]}),l.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.password})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirmar senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",value:t.confirmPassword,onChange:S=>w("confirmPassword",S.target.value),placeholder:"Digite a senha novamente",className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${l.confirmPassword?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx("button",{type:"button",onClick:()=>b(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:f?e.jsx(xx,{className:"w-5 h-5"}):e.jsx(Za,{className:"w-5 h-5"})})]}),l.confirmPassword&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.confirmPassword})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.acceptedTerms,onChange:S=>w("acceptedTerms",S.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Li e aceito os"," ",e.jsx("a",{href:"/termos",target:"_blank",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Termos de Uso"})," ","e a"," ",e.jsx("a",{href:"/privacidade",target:"_blank",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Poltica de Privacidade"}),". ",e.jsx("span",{className:"text-red-600",children:"*"})]})]}),l.acceptedTerms&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.acceptedTerms})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:i,disabled:c,className:"px-10 py-3.5 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all disabled:opacity-50 font-medium",children:"Voltar"}),e.jsx("button",{onClick:n,disabled:c,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg shadow-blue-500/30 font-medium",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):"Concluir cadastro"})]})]})}function Bm(t,s="Ocorreu um erro. Tente novamente."){const n=t,i=n?.response?.status,l=n?.response?.data,c=l?.message,h=typeof c=="string"&&c.trim()?c:Array.isArray(c)?c.filter(Boolean).join(`
`):typeof n?.message=="string"&&n.message.trim()?n.message:s,m=typeof l?.code=="string"&&l.code.trim()?l.code:void 0,f=typeof l?.retryAfterSeconds=="number"?l.retryAfterSeconds:void 0;return{message:h,code:m,status:i,retryAfterSeconds:f}}function dk({companyName:t,userEmail:s}){const n=Vs(),[i,l]=p.useState(!1),[c,h]=p.useState(null),[m,f]=p.useState(0);p.useEffect(()=>{if(m<=0)return;const v=window.setInterval(()=>{f(g=>Math.max(0,g-1))},1e3);return()=>window.clearInterval(v)},[m]);const b=async()=>{if(s)try{h(null),l(!0);const v=await ml.post("/auth/resend-verification",{email:s}),g=typeof v.data?.message=="string"&&v.data.message.trim()?v.data.message:"Se a conta existir e o e-mail ainda no estiver verificado, enviamos uma nova confirmao.";h(g);const w=typeof v.data?.retryAfterSeconds=="number"?v.data.retryAfterSeconds:60;f(Math.max(1,Math.min(600,w)))}catch(v){const g=Bm(v,"No foi possvel reenviar o e-mail. Tente novamente.");h(g.message),g.retryAfterSeconds&&f(Math.max(1,Math.min(600,g.retryAfterSeconds)))}finally{l(!1)}};return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30",children:e.jsx(Jm,{className:"w-14 h-14 text-white"})})}),e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 mb-6",children:"Conta criada com sucesso!"}),e.jsxs("div",{className:"max-w-lg mx-auto space-y-4 mb-10",children:[e.jsxs("p",{className:"text-gray-600 text-lg",children:["Parabns! A conta da empresa ",e.jsx("span",{className:"font-semibold text-gray-900",children:t})," foi criada com sucesso e voc j pode comear seu teste grtis de 30 dias."]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-5",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[" Enviamos um e-mail de confirmao para ",e.jsx("span",{className:"font-semibold",children:s})," com um link para ativar sua conta."]})}),e.jsx("p",{className:"text-gray-600",children:"Para acessar a plataforma, confirme seu e-mail primeiro. Depois disso, volte aqui e faa login."}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{type:"button",onClick:b,disabled:i||m>0,className:"inline-flex items-center justify-center gap-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-xl hover:bg-blue-50 transition-all font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(_h,{className:"w-4 h-4"}),i?"Enviando...":m>0?`Reenviar em ${m}s`:"Reenviar e-mail de confirmao"]}),c?e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:c}):e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No recebeu? Verifique a caixa de spam e promoes."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>n("/login"),className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:[e.jsx(OP,{className:"w-5 h-5"}),"Ir para Login"]}),e.jsxs("button",{onClick:()=>n("/"),className:"inline-flex items-center gap-2 bg-white border-2 border-gray-300 text-gray-700 px-10 py-3.5 rounded-xl hover:bg-gray-50 transition-all font-medium",children:[e.jsx(CP,{className:"w-5 h-5"}),"Voltar para o site"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Precisa de ajuda?"," ",e.jsx("button",{onClick:()=>n("/contato"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Fale com nosso time comercial"})]})]})}const pl="/assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5-CDYQAuU1.png";function uk(){const t=Vs(),[s,n]=p.useState(1),[i,l]=p.useState(!1),[c,h]=p.useState(!1),[m,f]=p.useState({estimatedPoints:null,selectedPlanRange:null,selectedPlatformPlanId:null}),[b,v]=p.useState({fantasyName:"",legalName:"",cnpj:"",phone:"",website:"",city:"",state:"",country:"Brasil",estimatedUsers:""}),[g,w]=p.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",acceptedTerms:!1}),[N,j]=p.useState(null),[S,A]=p.useState({}),[D,E]=p.useState({});p.useEffect(()=>{const U=new URLSearchParams(window.location.search).get("planRange"),M=U?gx.find(B=>B.range===U):void 0;U&&M&&f({estimatedPoints:null,selectedPlanRange:U,selectedPlatformPlanId:M.id})},[]);const T=()=>!m.selectedPlanRange||!m.selectedPlatformPlanId?(j("Selecione um plano para continuar"),!1):(j(null),!0),k=()=>{const q={};return b.fantasyName.trim()||(q.fantasyName="Nome fantasia  obrigatrio"),b.cnpj.trim()?ik(b.cnpj)||(q.cnpj="CNPJ deve ter 14 dgitos"):q.cnpj="CNPJ  obrigatrio",b.phone&&!wy(b.phone)&&(q.phone="Telefone deve ter 10 ou 11 dgitos (com DDD)"),A(q),Object.keys(q).length===0},R=()=>{const q={};if(g.name.trim()||(q.name="Nome completo  obrigatrio"),g.email.trim()?rk(g.email)||(q.email=Jj(g.email)??"E-mail invlido"):q.email="E-mail  obrigatrio",g.phone.trim()?wy(g.phone)||(q.phone="Telefone deve ter 10 ou 11 dgitos (com DDD)"):q.phone="Telefone  obrigatrio",!g.password)q.password="Senha  obrigatria";else{const U=Qj(g.password);if(!U.isValid){const M=[];U.minLength||M.push("8 caracteres"),U.hasUpperCase||M.push("1 letra maiscula"),U.hasNumber||M.push("1 nmero"),U.hasSpecialChar||M.push("1 caractere especial"),q.password=`A senha deve conter: ${M.join(", ")}`}}return g.password!==g.confirmPassword&&(q.confirmPassword="As senhas no coincidem"),g.acceptedTerms||(q.acceptedTerms="Voc deve aceitar os termos para continuar"),E(q),Object.keys(q).length===0},O=()=>{T()&&n(2)},H=()=>{k()&&n(3)},te=async()=>{if(R()){h(!0);try{if(!m.selectedPlatformPlanId){n(1),j("Selecione um plano para continuar");return}const q=b.estimatedUsers?.trim()?Number(fa(b.estimatedUsers)):void 0,U={planId:m.selectedPlatformPlanId,companyName:b.fantasyName,cnpj:b.cnpj?fa(b.cnpj):void 0,companyPhone:b.phone?fa(b.phone):void 0,site:b.website||void 0,addressCity:b.city||void 0,addressState:b.state||void 0,addressCountry:b.country||void 0,estimatedUsers:typeof q=="number"&&!Number.isNaN(q)?q:void 0,adminName:g.name,adminEmail:Jx(g.email),adminPhone:g.phone?fa(g.phone):void 0,adminPassword:g.password,adminPasswordConfirmation:g.confirmPassword,acceptTerms:!!g.acceptedTerms};await ml.post("/signup",U),l(!0)}catch(q){const U=q?.response?.data?.message,M=Array.isArray(U)?U.join(`
`):typeof U=="string"?U:"Erro ao criar conta. Verifique os dados e tente novamente.";E({api:M})}finally{h(!1)}}},X=["Plano","Empresa","Acesso"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:pl,alt:"OneMedia",className:"h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:i?e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-8 sm:p-12",children:e.jsx(dk,{companyName:b.fantasyName,userEmail:g.email})}):e.jsxs(e.Fragment,{children:[e.jsx(JE,{currentStep:s,steps:X}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-8 sm:p-10 mt-8",children:[s===1&&e.jsx(sk,{data:m,onChange:f,onNext:O,error:N}),s===2&&e.jsx(lk,{data:b,onChange:v,onNext:H,onBack:()=>n(1),errors:S}),s===3&&e.jsx(ck,{data:g,onChange:w,onSubmit:te,onBack:()=>n(2),errors:D,isLoading:c})]})]})})]})}function mk({onSubmit:t,isLoading:s,error:n,errorAction:i}){const l=Vs(),[c,h]=p.useState(!1),[m,f]=p.useState(""),[b,v]=p.useState(""),[g,w]=p.useState(!1),[N,j]=p.useState({}),S=()=>{const E={};return m.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)||(E.email="E-mail invlido"):E.email="E-mail  obrigatrio",b||(E.password="Senha  obrigatria"),j(E),Object.keys(E).length===0},A=async E=>{E.preventDefault(),S()&&await t({email:m,password:b,rememberMe:g})},D=()=>{alert(`Funcionalidade de recuperao de senha em desenvolvimento.

Por favor, entre em contato com o suporte.`)};return e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-2",children:"Bem-vindo de volta"}),e.jsx("p",{className:"text-gray-600",children:"Entre com suas credenciais para acessar o sistema"})]}),n&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:[e.jsx("p",{className:"text-sm text-red-700",children:n}),i?e.jsx("div",{className:"mt-3",children:i}):null]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["E-mail corporativo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Nc,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:m,onChange:E=>f(E.target.value),placeholder:"seu.email@empresa.com.br",className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${N.email?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,disabled:s})]}),N.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:N.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vj,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:c?"text":"password",value:b,onChange:E=>v(E.target.value),placeholder:"",className:`w-full pl-12 pr-12 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${N.password?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,disabled:s}),e.jsx("button",{type:"button",onClick:()=>h(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",disabled:s,children:c?e.jsx(xx,{className:"w-5 h-5"}):e.jsx(Za,{className:"w-5 h-5"})})]}),N.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:N.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:E=>w(E.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600",disabled:s}),e.jsx("span",{className:"text-sm text-gray-700",children:"Lembrar de mim neste dispositivo"})]}),e.jsx("button",{type:"button",onClick:D,className:"text-sm text-blue-600 hover:text-blue-700 hover:underline font-medium",disabled:s,children:"Esqueci minha senha"})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 font-medium",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):"Entrar"}),e.jsxs("p",{className:"text-center text-sm text-gray-600 pt-2",children:["Ainda no tem conta?"," ",e.jsx("button",{type:"button",onClick:()=>l("/cadastro"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",disabled:s,children:"Comear teste grtis"})]})]})}function hk({email:t,onSubmit:s,onBack:n,isLoading:i,error:l}){const[c,h]=p.useState(["","","","","",""]),m=p.useRef([]);p.useEffect(()=>{m.current[0]?.focus()},[]);const f=(N,j)=>{if(!/^\d*$/.test(j))return;const S=[...c];S[N]=j.slice(-1),h(S),j&&N<5&&m.current[N+1]?.focus()},b=(N,j)=>{j.key==="Backspace"&&!c[N]&&N>0&&m.current[N-1]?.focus()},v=N=>{N.preventDefault();const j=N.clipboardData.getData("text").replace(/\D/g,"");if(j.length===6){const S=j.split("");h(S),m.current[5]?.focus()}},g=async N=>{N.preventDefault();const j=c.join("");j.length===6&&await s({email:t,code:j})},w=c.every(N=>N!=="");return e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[e.jsx("div",{className:"mb-4 md:mb-6 flex justify-center",children:e.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-[#4F46E5]/10 rounded-full flex items-center justify-center",children:e.jsx(Hd,{className:"w-7 h-7 md:w-8 md:h-8 text-[#4F46E5]"})})}),e.jsx("h2",{className:"text-gray-900 mb-2",children:"Confirme sua identidade"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base px-2",children:"Digite o cdigo de 6 dgitos enviado para seu mtodo de autenticao configurado"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 break-all px-2",children:t})]}),l&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:l})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-3 text-center",children:"Cdigo de verificao"}),e.jsx("div",{className:"flex gap-1.5 sm:gap-2 justify-center",onPaste:v,children:c.map((N,j)=>e.jsx("input",{ref:S=>{m.current[j]=S},type:"text",inputMode:"numeric",maxLength:1,value:N,onChange:S=>f(j,S.target.value),onKeyDown:S=>b(j,S),className:"w-10 h-12 sm:w-12 sm:h-14 text-center text-lg sm:text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4F46E5] focus:border-[#4F46E5] transition-all",disabled:i},j))}),e.jsxs("p",{className:"text-xs text-gray-500 text-center mt-3 px-2",children:[" Dica para teste: use o cdigo ",e.jsx("span",{className:"font-mono font-semibold",children:"123456"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"submit",disabled:i||!w,className:"w-full bg-[#4F46E5] text-white px-6 md:px-8 py-3 rounded-lg hover:bg-[#4338CA] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Verificando..."]}):"Confirmar cdigo"}),e.jsxs("button",{type:"button",onClick:n,disabled:i,className:"w-full px-6 md:px-8 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx(hl,{className:"w-5 h-5"}),"Voltar"]})]})]})}function pk(){const t=Vs(),{login:s,verifyTwoFactor:n,requiresTwoFactor:i,pendingEmail:l}=yl(),[c,h]=p.useState(!1),[m,f]=p.useState(null),[b,v]=p.useState(""),[g,w]=p.useState(!1),[N,j]=p.useState(!1),[S,A]=p.useState(null),[D,E]=p.useState(0);p.useEffect(()=>{Ha()},[]),p.useEffect(()=>{if(m!=="ACCOUNT_BLOCKED")return;const te="__one_media_cache_rescue_login__";sessionStorage.getItem(te)!=="1"&&(sessionStorage.setItem(te,"1"),(async()=>{try{if(Ha(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),"serviceWorker"in navigator){const X=await navigator.serviceWorker.getRegistrations();await Promise.all(X.map(q=>q.unregister()))}if("caches"in window){const X=await caches.keys();await Promise.all(X.map(q=>caches.delete(q)))}}catch{}finally{window.location.replace("/login")}})())},[m]);const T=p.useMemo(()=>b||l||"",[b,l]);p.useEffect(()=>{if(D<=0)return;const te=window.setInterval(()=>{E(X=>Math.max(0,X-1))},1e3);return()=>window.clearInterval(te)},[D]);const k=async()=>{if(T)try{A(null),j(!0);const te=await ml.post("/auth/resend-verification",{email:T}),X=typeof te.data?.message=="string"&&te.data.message.trim()?te.data.message:"Se a conta existir e o e-mail ainda no estiver verificado, enviamos uma nova confirmao.";A(X);const q=typeof te.data?.retryAfterSeconds=="number"?te.data.retryAfterSeconds:60;E(Math.max(1,Math.min(600,q)))}catch(te){const X=Bm(te,"No foi possvel reenviar o e-mail. Tente novamente.");A(X.message),X.retryAfterSeconds&&E(Math.max(1,Math.min(600,X.retryAfterSeconds)))}finally{j(!1)}},R=async te=>{try{f(null),A(null),v(te.email),w(!1),h(!0),await s(te)}catch(X){const q=Bm(X,"Erro ao fazer login");f(q.message),w(q.code==="EMAIL_NOT_VERIFIED")}finally{h(!1)}},O=async te=>{try{f(null),A(null),w(!1),h(!0),await n(te)}catch(X){const q=Bm(X,"Erro ao verificar cdigo");f(q.message),w(q.code==="EMAIL_NOT_VERIFIED")}finally{h(!1)}},H=()=>{f(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:wi,alt:"OneMedia",className:"h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-20",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-8 sm:p-10",children:i&&l?e.jsx(hk,{email:l,onSubmit:O,onBack:H,isLoading:c,error:m}):e.jsx(mk,{onSubmit:R,isLoading:c,error:m,errorAction:g&&T?e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{type:"button",onClick:k,disabled:N||D>0,className:"inline-flex w-full items-center justify-center rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-blue-700 ring-1 ring-inset ring-blue-200 hover:bg-blue-50 disabled:opacity-60 disabled:cursor-not-allowed",children:N?"Enviando...":D>0?`Reenviar em ${D}s`:"Reenviar e-mail de confirmao"}),e.jsx("p",{className:"text-xs text-red-700/80",children:"Confirme o e-mail para liberar o acesso. Verifique tambm a caixa de spam."}),S?e.jsx("p",{className:"text-xs text-gray-600",children:S}):null]}):null})}),e.jsx("div",{className:"mt-8 text-center px-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Problemas para acessar?"," ",e.jsx("button",{onClick:()=>t("/contato"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Entre em contato com o suporte"})]})})]})]})}function fk(t){const s=t?.response?.data?.message;return typeof s=="string"&&s.trim()?s:"No foi possvel confirmar seu e-mail. Tente novamente."}function xk(){const t=Vs(),s=p.useMemo(()=>new URLSearchParams(window.location.search).get("token"),[]),[n,i]=p.useState("loading"),[l,c]=p.useState("Confirmando seu e-mail...");return p.useEffect(()=>{let h=!1;return(async()=>{if(!s){i("error"),c("Token de verificao no encontrado. Verifique se voc abriu o link completo do e-mail.");return}i("loading"),c("Confirmando seu e-mail...");try{if(await ml.post("/auth/verify-email",{token:s}),h)return;i("success"),c("E-mail confirmado com sucesso! Agora voc j pode fazer login.")}catch(f){if(h)return;i("error"),c(fk(f))}})(),()=>{h=!0}},[s]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:pl,alt:"OneMedia",className:"h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-20",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-8 sm:p-10",children:e.jsxs("div",{className:"text-center",children:[n==="loading"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-blue-50 flex items-center justify-center",children:e.jsx("div",{className:"h-7 w-7 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),n==="success"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-green-50 flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n==="error"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-red-50 flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n==="loading"&&"Confirmando e-mail",n==="success"&&"Tudo certo!",n==="error"&&"No foi possvel confirmar"]}),e.jsx("p",{className:"mt-3 text-gray-600",children:l}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>t("/login"),className:"w-full sm:w-auto px-6 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors",children:"Ir para Login"}),e.jsx("button",{onClick:()=>t("/"),className:"w-full sm:w-auto px-6 py-3 rounded-xl border border-gray-200 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Voltar ao site"})]}),n==="error"&&e.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"Se o link expirou, voc pode solicitar um novo e-mail de confirmao na tela de login."})]})})})]})}function gk(){const{user:t,logout:s}=yl(),n=Vs();if(!t)return n("/login"),null;const i=[{icon:Bj,name:"Dashboard",path:"/dashboard",disabled:!1},{icon:fc,name:"Inventrio",path:"/inventario",disabled:!0},{icon:Yx,name:"Clientes",path:"/clientes",disabled:!0},{icon:gr,name:"Propostas",path:"/propostas",disabled:!0},{icon:Hj,name:"Campanhas",path:"/campanhas",disabled:!0},{icon:Ud,name:"Reservas",path:"/reservas",disabled:!0},{icon:Vd,name:"Financeiro",path:"/financeiro",disabled:!0},{icon:Nc,name:"Mensagens",path:"/mensagens",disabled:!0},{icon:vP,name:"Mdia Kit",path:"/midiakit",disabled:!0},{icon:Rj,name:"Atividades",path:"/atividades",disabled:!0},{icon:qj,name:"Configuraes",path:"/configuracoes",disabled:!0}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(FP,{className:"w-4 h-4"}),"Sair"]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-gray-900 mb-2",children:["Bem-vindo, ",t.name.split(" ")[0],"!"]}),e.jsx("p",{className:"text-gray-600",children:"Voc est autenticado no sistema OOH Manager"}),t.twoFactorEnabled&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:[e.jsx("span",{children:""}),"2FA Ativado (",t.twoFactorType,")"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(l=>e.jsx("button",{onClick:()=>!l.disabled&&n(l.path),disabled:l.disabled,className:`p-6 bg-white rounded-xl border-2 transition-all text-left ${l.disabled?"border-gray-200 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-[#4F46E5] hover:shadow-md cursor-pointer"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${l.disabled?"bg-gray-100":"bg-[#4F46E5]/10"}`,children:e.jsx(l.icon,{className:`w-6 h-6 ${l.disabled?"text-gray-400":"text-[#4F46E5]"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.disabled?"Em desenvolvimento":"Acessar mdulo"})]})]})},l.path))}),e.jsxs("div",{className:"mt-8 p-6 bg-blue-50 border border-blue-200 rounded-xl",children:[e.jsx("h3",{className:"text-blue-900 mb-2",children:" Login realizado com sucesso!"}),e.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"Esta  uma interface de demonstrao. Os mdulos do sistema esto sendo desenvolvidos e sero habilitados em breve."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-semibold mb-1",children:"Dados do usurio:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ID: ",t.id]}),e.jsxs("li",{children:[" Company ID: ",t.companyId]}),e.jsxs("li",{children:[" Status: ",t.status]}),e.jsxs("li",{children:[" Super Admin: ",t.isSuperAdmin?"Sim":"No"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-semibold mb-1",children:"Credenciais de teste:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1",children:[e.jsx("li",{children:" Com 2FA: carlos.mendes@outdoorbrasil.com.br"}),e.jsx("li",{children:" Sem 2FA: ana.silva@outdoorbrasil.com.br"}),e.jsx("li",{children:" Senha: senha123"}),e.jsx("li",{children:" Cdigo 2FA: 123456"})]})]})]})]})]})]})}function vk(){const t=Vs();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3",children:e.jsx("img",{src:pl,alt:"OneMedia",className:"h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-semibold text-gray-900 mb-5",children:"Fale com nosso time comercial"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Interessado no plano Enterprise ou tem dvidas? Entre em contato conosco."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[e.jsxs("a",{href:"mailto:contato@oohmanager.com",className:"bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-blue-600 transition-all hover:shadow-xl group",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-5 group-hover:bg-gradient-to-br group-hover:from-blue-600 group-hover:to-blue-700 transition-all shadow-lg shadow-transparent group-hover:shadow-blue-500/30",children:e.jsx(Nc,{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"E-mail"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Envie um e-mail para nossa equipe comercial"}),e.jsx("p",{className:"text-blue-600 font-medium group-hover:text-blue-700",children:"contato@oohmanager.com"})]}),e.jsxs("a",{href:"https://wa.me/5511999999999",target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-blue-600 transition-all hover:shadow-xl group",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-5 group-hover:bg-gradient-to-br group-hover:from-blue-600 group-hover:to-blue-700 transition-all shadow-lg shadow-transparent group-hover:shadow-blue-500/30",children:e.jsx(ZP,{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"WhatsApp"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Fale diretamente com nosso time"}),e.jsx("p",{className:"text-blue-600 font-medium group-hover:text-blue-700",children:"(11) 99999-9999"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>t("/"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors font-medium",children:[e.jsx(hl,{className:"w-4 h-4"}),"Voltar para o site"]})})]})]})}function yk(){const t=Vs();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:e.jsx("img",{src:pl,alt:"OneMedia",className:"h-10 transition-transform group-hover:scale-105"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#4F46E5] transition-colors px-4 py-2 rounded-lg hover:bg-gray-50",children:[e.jsx(hl,{className:"w-4 h-4"}),"Voltar ao site"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-3xl shadow-xl mb-6",children:e.jsx(Ef,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-5xl font-semibold text-gray-900 mb-4",children:"Termos de Uso"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Conhea as regras e diretrizes para o uso da plataforma OneMedia."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ef,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"1. Aceitao dos Termos"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Ao acessar e usar o OneMedia, voc concorda em cumprir e estar vinculado a estes Termos de Uso. Se voc no concordar com qualquer parte destes termos, no dever usar nossa plataforma."})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Hd,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"2. Descrio do Servio"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"O OneMedia  uma plataforma SaaS completa para gesto de mdia OOH/DOOH, incluindo mdulos de inventrio, propostas comerciais, campanhas, gesto financeira, mdia kit e muito mais. Oferecemos ferramentas especializadas para agncias, veculos e proprietrios de mdia exterior."})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-3xl p-8 shadow-xl text-white",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Lj,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"3. Perodo de Teste Gratuito"}),e.jsx("p",{className:"leading-relaxed opacity-95 mb-4",children:"Oferecemos um perodo de teste gratuito de 30 dias com acesso completo  plataforma. Durante este perodo:"}),e.jsxs("ul",{className:"space-y-2 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Acesso completo a todos os recursos"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Sem necessidade de carto de crdito"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Cancelamento a qualquer momento"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ld,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"4. Uso Aceitvel"}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Voc concorda em usar o servio apenas para fins legais e de acordo com todas as leis aplicveis.  estritamente proibido:"}),e.jsxs("ul",{className:"space-y-3 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Utilizar a plataforma para atividades ilegais ou fraudulentas"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Tentar acessar reas restritas ou dados de outros usurios"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Fazer engenharia reversa ou copiar funcionalidades da plataforma"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Sobrecarregar nossos servidores com uso abusivo"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(oP,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"5. Propriedade Intelectual"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Todo o contedo, recursos, funcionalidades e design do OneMedia so de propriedade exclusiva da empresa e protegidos por direitos autorais, marcas registradas e outras leis de propriedade intelectual. Os dados inseridos por voc permanecem de sua propriedade."})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(uE,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"6. Limitao de Responsabilidade"}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:'O OneMedia  fornecido "como est". No garantimos que o servio ser ininterrupto ou livre de erros. Em nenhuma circunstncia seremos responsveis por:'}),e.jsxs("ul",{className:"space-y-3 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Perda de dados ou lucros cessantes"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Danos indiretos ou consequenciais"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Uso indevido da plataforma por terceiros"})]})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-3xl p-8 shadow-xl text-white",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ef,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"7. Modificaes dos Termos"}),e.jsx("p",{className:"leading-relaxed opacity-95",children:"Reservamo-nos o direito de modificar estes termos a qualquer momento. Alteraes significativas sero notificadas por email ou atravs da plataforma. O uso continuado aps as modificaes constitui aceitao dos novos termos."})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ltima atualizao: ",e.jsx("span",{className:"font-medium text-gray-900",children:new Date().toLocaleDateString("pt-BR")})]})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>t("/cadastro"),className:"inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white px-8 py-4 rounded-full hover:shadow-xl hover:scale-105 transition-all text-lg font-medium",children:["Comear teste grtis",e.jsx(hl,{className:"w-5 h-5 rotate-180"})]})})]})]})}function bk(){const t=Vs();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:e.jsx("img",{src:pl,alt:"OneMedia",className:"h-10 transition-transform group-hover:scale-105"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#4F46E5] transition-colors px-4 py-2 rounded-lg hover:bg-gray-50",children:[e.jsx(hl,{className:"w-4 h-4"}),"Voltar ao site"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl shadow-xl mb-6",children:e.jsx(Hd,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-5xl font-semibold text-gray-900 mb-4",children:"Poltica de Privacidade"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Sua privacidade  fundamental para ns. Conhea como protegemos e gerenciamos seus dados."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Za,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"1. Informaes que Coletamos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Coletamos informaes que voc nos fornece diretamente, incluindo:"}),e.jsxs("ul",{className:"space-y-3 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Nome completo e informaes de contato"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Dados da empresa (CNPJ, razo social, etc.)"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Informaes de inventrio de mdia"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Dados de campanhas e propostas"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(gr,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"2. Como Usamos suas Informaes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Usamos as informaes coletadas para:"}),e.jsxs("ul",{className:"space-y-3 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Fornecer, manter e melhorar nossos servios"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Processar transaes e enviar notificaes"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Responder a comentrios e perguntas"})]}),e.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Enviar informaes tcnicas e atualizaes"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Yx,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"3. Compartilhamento de Informaes"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"No vendemos, trocamos ou transferimos suas informaes pessoais para terceiros sem seu consentimento, exceto quando necessrio para fornecer o servio ou quando exigido por lei."})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Vj,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"4. Segurana dos Dados"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Implementamos medidas de segurana apropriadas para proteger suas informaes contra acesso no autorizado, alterao, divulgao ou destruio."})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl p-8 shadow-xl text-white",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Hd,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-3",children:"5. LGPD - Lei Geral de Proteo de Dados"}),e.jsx("p",{className:"leading-relaxed opacity-95",children:"Estamos em conformidade com a LGPD (Lei 13.709/2018). Voc tem direito de acessar, corrigir, excluir ou solicitar a portabilidade de seus dados pessoais a qualquer momento."})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx(Nc,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"6. Contato"}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:"Para questes sobre privacidade ou proteo de dados, entre em contato:"}),e.jsxs("a",{href:"mailto:privacidade@onemedia.com",className:"inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-700 font-medium transition-colors",children:[e.jsx(Nc,{className:"w-4 h-4"}),"privacidade@onemedia.com"]})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ltima atualizao: ",e.jsx("span",{className:"font-medium text-gray-900",children:new Date().toLocaleDateString("pt-BR")})]})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>t("/cadastro"),className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full hover:shadow-xl hover:scale-105 transition-all text-lg font-medium",children:["Comear teste grtis",e.jsx(hl,{className:"w-5 h-5 rotate-180"})]})})]})]})}function jk(){const t=Vs(),[s,n]=p.useState(!1),i=[{name:"At 50 pontos",price:"R$ 299",period:"/ms",description:"Ideal para operaes menores que esto comeando",capacity:"At 50 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"50 a 100 pontos",price:"R$ 399",period:"/ms",description:"Para empresas em crescimento com inventrio moderado",capacity:"At 100 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"101 a 150 pontos",price:"R$ 499",period:"/ms",description:"Plano popular para operaes estabelecidas",capacity:"At 150 pontos",recommended:!0,color:"from-green-500 to-green-700"},{name:"151 a 200 pontos",price:"R$ 599",period:"/ms",description:"Para empresas com inventrio robusto",capacity:"At 200 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"201 a 250 pontos",price:"R$ 699",period:"/ms",description:"Operaes de mdio a grande porte",capacity:"At 250 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"251 a 300 pontos",price:"R$ 799",period:"/ms",description:"Para grandes veculos regionais",capacity:"At 300 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"301 a 350 pontos",price:"R$ 899",period:"/ms",description:"Operaes de grande escala",capacity:"At 350 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"351 a 400 pontos",price:"R$ 999",period:"/ms",description:"Para grandes redes nacionais",capacity:"At 400 pontos",recommended:!1,color:"from-blue-500 to-blue-700"},{name:"Mais de 400 pontos",price:"Sob consulta",period:"",description:"Plano enterprise customizado para sua operao",capacity:"Ilimitado",recommended:!1,color:"from-purple-500 to-purple-700"}];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:pl,alt:"OneMedia",className:"h-12"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors",children:[e.jsx(hl,{className:"w-5 h-5"}),"Voltar para Home"]})]})}),e.jsx("div",{className:"pt-32 pb-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl font-medium text-gray-900 mb-6",children:["Escolha o plano ideal",e.jsx("br",{}),"para o seu negcio"]}),e.jsx("p",{className:"text-2xl font-extralight text-gray-700 max-w-3xl mx-auto",children:"Todas as funcionalidades essenciais para revolucionar sua gesto de mdia OOH/DOOH"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:i.map((l,c)=>e.jsxs("div",{className:`relative rounded-3xl p-8 ${l.recommended?"bg-gradient-to-br from-blue-50 to-green-50 ring-4 ring-green-500":"bg-gray-50"}`,children:[l.recommended&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:e.jsx("span",{className:"bg-green-500 text-white px-6 py-2 rounded-full text-sm font-semibold",children:"Mais Popular"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-semibold text-gray-900 mb-2",children:l.name}),e.jsx("p",{className:"text-gray-600 mb-6",children:l.description}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-5xl font-bold text-gray-900",children:l.price}),l.period&&e.jsx("span",{className:"text-xl text-gray-600",children:l.period})]})]}),e.jsx("ul",{className:"space-y-4 mb-8",children:e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Dr,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700",children:l.capacity})]})}),e.jsxs("button",{onClick:()=>t("/cadastro"),className:`w-full flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r ${l.color} text-white rounded-full hover:shadow-xl transition-all text-lg font-semibold`,children:[l.price==="Sob consulta"?"Falar com vendas":"Comear agora",e.jsx(il,{className:"w-5 h-5"})]})]},c))}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 rounded-3xl p-12 text-center text-white",children:[e.jsx("h2",{className:"text-4xl font-semibold mb-4",children:"Experimente grtis por 30 dias"}),e.jsx("p",{className:"text-xl mb-8 opacity-95",children:"Teste todas as funcionalidades sem compromisso. No  necessrio carto de crdito."}),e.jsxs("button",{onClick:()=>t("/cadastro"),className:"flex items-center gap-3 px-12 py-5 bg-white text-blue-700 text-2xl rounded-full hover:shadow-2xl transition-all mx-auto font-semibold",children:["Comear teste grtis",e.jsx(il,{className:"w-7 h-7"})]})]}),e.jsxs("div",{className:"mt-20",children:[e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 text-center mb-12",children:"Perguntas Frequentes"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Posso mudar de plano depois?"}),e.jsx("p",{className:"text-gray-700",children:"Sim! Voc pode fazer upgrade ou downgrade do seu plano a qualquer momento, sem burocracia."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Como funciona o perodo de teste?"}),e.jsx("p",{className:"text-gray-700",children:"Voc tem acesso completo a todas as funcionalidades por 30 dias. No pedimos carto de crdito."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Qual a forma de pagamento?"}),e.jsx("p",{className:"text-gray-700",children:"Aceitamos carto de crdito, boleto bancrio e transferncia bancria para planos anuais."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Tem desconto para pagamento anual?"}),e.jsx("p",{className:"text-gray-700",children:"Sim! Oferecemos 20% de desconto para pagamentos anuais antecipados."})]})]})]})]})}),e.jsx("footer",{className:"bg-white py-16 px-6 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("img",{src:pl,alt:"OneMedia",className:"h-10 mb-6"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/planos"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Preos"}),e.jsx("p",{onClick:()=>n(!0),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Entre em contato conosco"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Produtos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Inventrio"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Propostas"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Campanhas"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Financeiro"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Mdia Kit"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Dashboard"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Solues"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Agncias"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Veculos"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Proprietrios"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recursos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Blog"}),e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Documentao"}),e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Suporte"}),e.jsx("p",{onClick:()=>t("/contato"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Contato"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-gray-600",children:" 2026 OneMedia. Todos os direitos reservados."}),e.jsxs("div",{className:"flex gap-6 text-gray-600",children:[e.jsx("button",{type:"button",onClick:()=>t("/privacidade"),className:"hover:text-blue-600 transition-colors",children:"Privacidade"}),e.jsx("button",{type:"button",onClick:()=>t("/termos"),className:"hover:text-blue-600 transition-colors",children:"Termos"})]})]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>n(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",onClick:l=>l.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Entre em contato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha como prefere falar conosco:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("a",{href:"https://wa.me/5511999999999?text=Ol!%20Gostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%20Poderia%20me%20ajudar?",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resposta rpida"})]})]}),e.jsxs("a",{href:"mailto:contato@onemedia.com?subject=Interesse%20na%20plataforma%20OneMedia&body=Ol!%0A%0AGostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%0A%0APoderia%20me%20enviar%20mais%20informaes?%0A%0AObrigado!",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"contato@onemedia.com"})]})]})]}),e.jsx("button",{onClick:()=>n(!1),className:"w-full mt-6 px-6 py-3 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Fechar"})]})})]})}function wk(){const t=import.meta?.env?.DEV===!0,s=import.meta?.env?.VITE_API_URL,n=typeof s=="string"?s.trim().replace(/\/$/,""):"";return n||(t?"http://localhost:3333/api":"/api")}function Nk(){const t=p.useMemo(()=>{const oe=window.location.pathname.split("/").filter(Boolean),be=oe.findIndex(Me=>Me==="p");return be>=0?oe[be+1]:oe[1]},[]),s=p.useMemo(()=>wk(),[]),n=p.useMemo(()=>new URLSearchParams(window.location.search).get("m"),[t]),i=p.useMemo(()=>new URLSearchParams(window.location.search).get("t"),[t]),[l,c]=p.useState(null),[h,m]=p.useState(!0),[f,b]=p.useState(null),[v,g]=p.useState(""),[w,N]=p.useState(""),[j,S]=p.useState(""),[A,D]=p.useState(!1),[E,T]=p.useState(null),[k,R]=p.useState(null),[O,H]=p.useState(null),[te,X]=p.useState(null),[q,U]=p.useState([]),[M,B]=p.useState(!1),[ee,me]=p.useState(null),[J,fe]=p.useState(""),[W,ae]=p.useState(!1),[F,$]=p.useState(null),[Y,Z]=p.useState(""),[K,G]=p.useState(""),xe=p.useRef(null),le=p.useRef([]);le.current=q;const ue=p.useRef(!1),Fe=!!i;p.useEffect(()=>{try{const oe=localStorage.getItem(`portal_name_${t}`),be=localStorage.getItem(`portal_contact_${t}`);oe&&Z(oe),be&&G(be)}catch{}},[t]),p.useEffect(()=>{(async()=>{try{if(m(!0),b(null),!t)throw new Error("Link invlido (hash ausente).");const be=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}`),Me=await be.json().catch(()=>null);if(!be.ok)throw new Error(Me?.message||"No foi possvel carregar a proposta");c(Me)}catch(be){b(be?.message||"Erro ao carregar proposta"),c(null)}finally{m(!1)}})()},[s,t]);const $e=async oe=>{try{if(!t||ue.current)return;ue.current=!0,oe?.silent||(B(!0),me(null));const be=xe.current,Me=be?be.scrollHeight-be.scrollTop-be.clientHeight<60:!0,Ge=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/messages`),ut=await Ge.json().catch(()=>[]);if(!Ge.ok)throw new Error(ut&&(ut.message||ut.error)||"Erro ao carregar mensagens");const Kt=Array.isArray(ut)?ut:[];U(Kt),requestAnimationFrame(()=>{const tn=xe.current;tn&&Me&&(tn.scrollTop=tn.scrollHeight)})}catch(be){(!oe?.silent||le.current.length===0)&&me(be?.message||"Erro ao carregar mensagens")}finally{ue.current=!1,oe?.silent||B(!1)}};p.useEffect(()=>{$e({silent:!1})},[s,t]),p.useEffect(()=>{if(!t)return;const oe=window.setInterval(()=>{typeof document<"u"&&document.visibilityState!=="visible"||$e({silent:!0})},3e3);return()=>window.clearInterval(oe)},[s,t]);const Ze=async()=>{try{if(D(!0),T(null),R(null),!i)throw new Error("Token ausente.");const oe=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,signerName:v.trim(),signerEmail:w.trim(),comment:j.trim()})}),be=await oe.json().catch(()=>null);if(!oe.ok)throw new Error(be?.message||"No foi possvel aprovar");R("Proposta aprovada com sucesso!"),c(Me=>Me&&{...Me,status:"APROVADA"})}catch(oe){T(oe?.message||"Erro ao aprovar")}finally{D(!1)}},Ye=async()=>{try{if(D(!0),T(null),R(null),!i)throw new Error("Token ausente.");const oe=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,signerName:v.trim(),signerEmail:w.trim(),comment:j.trim()})}),be=await oe.json().catch(()=>null);if(!oe.ok)throw new Error(be?.message||"No foi possvel rejeitar");R("Proposta rejeitada."),c(Me=>Me&&{...Me,status:"REPROVADA"})}catch(oe){T(oe?.message||"Erro ao rejeitar")}finally{D(!1)}},Xe=async(oe,be)=>{try{if(H(oe),X(null),!i)throw new Error("Token ausente.");const Me=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/media-decisions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,decisions:[{proposalItemId:oe,decisionStatus:be}],signerName:(Y||v).trim()||void 0,signerEmail:(K||w).trim()||void 0,comment:j.trim()||void 0})}),Ge=await Me.json().catch(()=>null);if(!Me.ok)throw new Error(Ge?.message||"No foi possvel salvar a deciso");c(Ge)}catch(Me){X(Me?.message||"Erro ao salvar deciso")}finally{H(null)}},Je=async()=>{if(!n||!t)return;const oe=(Y||v).trim(),be=(K||w).trim(),Me=J.trim();if($(null),!oe){$("Informe seu nome para enviar a mensagem.");return}if(!be){$("Informe seu e-mail (ou contato) para enviar a mensagem.");return}if(!Me){$("Escreva uma mensagem.");return}try{ae(!0);try{localStorage.setItem(`portal_name_${t}`,oe),localStorage.setItem(`portal_contact_${t}`,be)}catch{}const Ge=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,senderName:oe,senderContact:be,contentText:Me})}),ut=await Ge.json().catch(()=>null);if(!Ge.ok)throw new Error(ut?.message||"No foi possvel enviar a mensagem");fe(""),$e({silent:!0})}catch(Ge){$(Ge?.message||"Erro ao enviar mensagem")}finally{ae(!1)}};if(h)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600",children:"Carregando proposta..."})});if(f||!l)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Proposta indisponvel"}),e.jsx("p",{className:"text-gray-600 mt-2",children:f||"No foi possvel carregar a proposta."})]})});const ot=oe=>typeof oe!="number"||Number.isNaN(oe)?"":oe.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),jt=oe=>{if(!oe)return"";const be=new Date(oe);return Number.isNaN(be.getTime())?"":be.toLocaleDateString("pt-BR")},dt=oe=>{if(!oe)return"";const be=new Date(oe);return Number.isNaN(be.getTime())?"":be.toLocaleString("pt-BR")},Tt=Array.isArray(l.items)?l.items:[],Ft=Tt.filter(oe=>!!oe.mediaUnitId),Q=Tt.filter(oe=>oe.mediaUnitId?String(oe.decisionStatus||"PENDING").toUpperCase()!=="REJECTED":!0),pe=Ft.reduce((oe,be)=>{const Me=String(be.decisionStatus||"PENDING").toUpperCase();return Me==="REJECTED"?oe.rejected+=1:Me==="ACCEPTED"?oe.accepted+=1:oe.pending+=1,oe},{accepted:0,rejected:0,pending:0}),de=l.clientName||l.client?.companyName||l.client?.contactName||"Cliente",Oe=oe=>typeof oe!="number"||Number.isNaN(oe)?"":String(oe);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:l.title||"Proposta"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Para: ",de]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${l.status==="APROVADA"?"bg-green-100 text-green-800":l.status==="REPROVADA"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:l.status}),e.jsx("a",{className:"inline-flex items-center justify-center rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-900 hover:bg-gray-50",href:`${s}/public/proposals/${t}/pdf`,target:"_blank",rel:"noreferrer",children:"Baixar proposta (PDF)"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Valor total"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ot(l.totalAmount)}),typeof l.discountAmount=="number"&&l.discountAmount>0?e.jsxs("p",{className:"text-sm text-green-700",children:["Desconto: -",ot(l.discountAmount),l.discountPercent?` (${l.discountPercent}%)`:""]}):l.discountPercent?e.jsxs("p",{className:"text-sm text-green-700",children:["Desconto: -",l.discountPercent,"%"]}):null]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Validade"}),e.jsx("p",{className:"text-gray-900",children:jt(l.validUntil)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Responsvel"}),e.jsx("p",{className:"text-gray-900",children:l.responsibleUserName||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-gray-900",children:[jt(l.startDate)," ",l.endDate?` ${jt(l.endDate)}`:""]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Condies"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:l.conditionsText||""})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Observaes"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:l.notes||""})]}),Q.length>0&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Itens"}),e.jsx("div",{className:"mt-2 divide-y divide-gray-200 rounded-xl border border-gray-100",children:Q.map(oe=>{const be=oe.product?.name||oe.mediaUnit?.label||oe.description||"Item",Me=oe.description&&(oe.product?.name||oe.mediaUnit?.label)?oe.description:null;return e.jsxs("div",{className:"p-3 flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:be}),Me?e.jsx("p",{className:"text-xs text-gray-600 mt-0.5 whitespace-pre-wrap",children:Me}):null,e.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:[jt(oe.startDate)," ",oe.endDate?` ${jt(oe.endDate)}`:""]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:["x",Oe(oe.quantity??1)]}),typeof oe.totalPrice=="number"?(()=>{const Ge=typeof oe.quantity=="number"?oe.quantity:1,ut=typeof oe.unitPrice=="number"?oe.unitPrice:0,Kt=Ge*ut,tn=oe.totalPrice,ln=Math.max(0,Kt-tn),Ut=oe.discountPercent,yn=oe.discountAmount,Kn=Ut?`${Ut}%`:yn?`R$ ${ot(yn)}`:null;return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ot(tn)}),ln>0?e.jsxs("p",{className:"text-[11px] text-red-600",children:["-",ot(ln),Kn?` (${Kn})`:""]}):null]})})():null,typeof oe.unitPrice=="number"?e.jsxs("p",{className:"text-[11px] text-gray-500",children:[ot(oe.unitPrice)," / un"]}):null]})]},oe.id)})})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Converse com a equipe responsvel por esta proposta."})]}),!n&&e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Somente leitura",e.jsx("div",{children:"Pea  equipe o link com permisso de mensagens."})]})]}),e.jsx("div",{className:"mt-4",children:M?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando mensagens"}):ee?e.jsx("div",{className:"text-sm text-red-600",children:ee}):q.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma mensagem ainda."}):e.jsx("div",{ref:xe,className:"max-h-80 overflow-y-auto space-y-3 rounded-xl bg-gray-50 p-4",children:q.map(oe=>{const be=oe?.senderType==="CLIENTE"||oe?.direction==="IN";return e.jsx("div",{className:`flex ${be?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm ${be?"bg-indigo-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[e.jsx("div",{className:"text-[11px] opacity-80 mb-1",children:oe?.senderName||(be?"Cliente":"Equipe")}),e.jsx("div",{className:"whitespace-pre-wrap",children:oe.contentText}),e.jsx("div",{className:"text-[10px] opacity-70 mt-1",children:oe.createdAt?new Date(oe.createdAt).toLocaleString("pt-BR"):""})]})},oe.id)})})}),n?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu nome"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:Y,onChange:oe=>Z(oe.target.value),placeholder:"Ex.: Joo Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu e-mail (ou contato)"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:K,onChange:oe=>G(oe.target.value),placeholder:"Ex.: joao@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Mensagem"}),e.jsx("textarea",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm min-h-[96px]",value:J,onChange:oe=>fe(oe.target.value),placeholder:"Escreva sua mensagem"})]}),F&&e.jsx("div",{className:"text-sm text-red-600",children:F}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-indigo-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:Je,disabled:W,children:W?"Enviando":"Enviar mensagem"})]}):null]}),Fe&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ao"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Voc recebeu um link com permisso para ",e.jsx("span",{className:"font-medium",children:"aprovar"})," ou ",e.jsx("span",{className:"font-medium",children:"rejeitar"})," esta proposta."]}),Ft.length>0&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-gray-50 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Deciso por ponto de mdia"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Escolha ",e.jsx("span",{className:"font-medium",children:"Aceito"})," ou ",e.jsx("span",{className:"font-medium",children:"Recuso"})," para cada ponto de mdia. Produtos/Servios no entram nessa deciso."]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Aceitos:"})," ",pe.accepted," "," ",e.jsx("span",{className:"font-medium text-red-700",children:"Recusados:"})," ",pe.rejected," "," ",e.jsx("span",{className:"font-medium text-gray-700",children:"Pendentes:"})," ",pe.pending]})]}),te&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:te}),e.jsx("div",{className:"mt-3 divide-y divide-gray-200 rounded-xl border border-gray-200 bg-white",children:Ft.map(oe=>{const be=oe.mediaUnit?.label||oe.description||"Ponto de mdia",Me=String(oe.decisionStatus||"PENDING").toUpperCase(),Ge=Me==="ACCEPTED",ut=Me==="REJECTED",Kt=O===oe.id;return e.jsxs("div",{className:"p-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:be}),e.jsxs("p",{className:"text-[11px] text-gray-500 mt-0.5",children:[jt(oe.startDate)," ",oe.endDate?` ${jt(oe.endDate)}`:""]}),typeof oe.totalPrice=="number"?e.jsxs("p",{className:"text-xs text-gray-700 mt-1",children:["Total: ",ot(oe.totalPrice)]}):null]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:`hidden sm:inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${ut?"bg-red-100 text-red-800":Ge?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:ut?"RECUSADO":Ge?"ACEITO":"PENDENTE"}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border disabled:opacity-50 ${Ge?"bg-green-600 text-white border-green-600":"bg-white text-gray-900 border-gray-200 hover:bg-green-50"}`,onClick:()=>Xe(oe.id,"ACCEPTED"),disabled:Kt||A||l.status==="APROVADA"||l.status==="REPROVADA",children:Kt&&Ge?"Salvando":"Aceito"}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border disabled:opacity-50 ${ut?"bg-red-600 text-white border-red-600":"bg-white text-gray-900 border-gray-200 hover:bg-red-50"}`,onClick:()=>Xe(oe.id,"REJECTED"),disabled:Kt||A||l.status==="APROVADA"||l.status==="REPROVADA",children:Kt&&ut?"Salvando":"Recuso"})]})]},oe.id)})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu nome"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:v,onChange:oe=>g(oe.target.value),placeholder:"Ex.: Joo Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu e-mail"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:w,onChange:oe=>N(oe.target.value),placeholder:"Ex.: joao@email.com"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Comentrio (opcional)"}),e.jsx("textarea",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm min-h-[96px]",value:j,onChange:oe=>S(oe.target.value),placeholder:"Deixe um comentrio..."})]}),E&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:E}),k&&e.jsx("div",{className:"mt-3 text-sm text-green-700",children:k}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-green-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:Ze,disabled:A,children:A?"Enviando":"Aprovar"}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:Ye,disabled:A,children:A?"Enviando":"Rejeitar"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ...",l.id.slice(-6),"  Atualizado em ",dt(l.updatedAt)]})]})})}function ew(t){var s,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(n=ew(t[s]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function eg(){for(var t,s,n=0,i="",l=arguments.length;n<l;n++)(t=arguments[n])&&(s=ew(t))&&(i&&(i+=" "),i+=s);return i}const tg="-",Ck=t=>{const s=Sk(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:h=>{const m=h.split(tg);return m[0]===""&&m.length!==1&&m.shift(),tw(m,s)||_k(h)},getConflictingClassGroupIds:(h,m)=>{const f=n[h]||[];return m&&i[h]?[...f,...i[h]]:f}}},tw=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],i=s.nextPart.get(n),l=i?tw(t.slice(1),i):void 0;if(l)return l;if(s.validators.length===0)return;const c=t.join(tg);return s.validators.find(({validator:h})=>h(c))?.classGroupId},Ny=/^\[(.+)\]$/,_k=t=>{if(Ny.test(t)){const s=Ny.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},Sk=t=>{const{theme:s,prefix:n}=t,i={nextPart:new Map,validators:[]};return Pk(Object.entries(t.classGroups),n).forEach(([c,h])=>{vx(h,i,c,s)}),i},vx=(t,s,n,i)=>{t.forEach(l=>{if(typeof l=="string"){const c=l===""?s:Cy(s,l);c.classGroupId=n;return}if(typeof l=="function"){if(Ak(l)){vx(l(i),s,n,i);return}s.validators.push({validator:l,classGroupId:n});return}Object.entries(l).forEach(([c,h])=>{vx(h,Cy(s,c),n,i)})})},Cy=(t,s)=>{let n=t;return s.split(tg).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},Ak=t=>t.isThemeGetter,Pk=(t,s)=>s?t.map(([n,i])=>{const l=i.map(c=>typeof c=="string"?s+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([h,m])=>[s+h,m])):c);return[n,l]}):t,Ek=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,i=new Map;const l=(c,h)=>{n.set(c,h),s++,s>t&&(s=0,i=n,n=new Map)};return{get(c){let h=n.get(c);if(h!==void 0)return h;if((h=i.get(c))!==void 0)return l(c,h),h},set(c,h){n.has(c)?n.set(c,h):l(c,h)}}},nw="!",kk=t=>{const{separator:s,experimentalParseClassName:n}=t,i=s.length===1,l=s[0],c=s.length,h=m=>{const f=[];let b=0,v=0,g;for(let A=0;A<m.length;A++){let D=m[A];if(b===0){if(D===l&&(i||m.slice(A,A+c)===s)){f.push(m.slice(v,A)),v=A+c;continue}if(D==="/"){g=A;continue}}D==="["?b++:D==="]"&&b--}const w=f.length===0?m:m.substring(v),N=w.startsWith(nw),j=N?w.substring(1):w,S=g&&g>v?g-v:void 0;return{modifiers:f,hasImportantModifier:N,baseClassName:j,maybePostfixModifierPosition:S}};return n?m=>n({className:m,parseClassName:h}):h},Tk=t=>{if(t.length<=1)return t;const s=[];let n=[];return t.forEach(i=>{i[0]==="["?(s.push(...n.sort(),i),n=[]):n.push(i)}),s.push(...n.sort()),s},Dk=t=>({cache:Ek(t.cacheSize),parseClassName:kk(t),...Ck(t)}),Ik=/\s+/,Rk=(t,s)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:l}=s,c=[],h=t.trim().split(Ik);let m="";for(let f=h.length-1;f>=0;f-=1){const b=h[f],{modifiers:v,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:N}=n(b);let j=!!N,S=i(j?w.substring(0,N):w);if(!S){if(!j){m=b+(m.length>0?" "+m:m);continue}if(S=i(w),!S){m=b+(m.length>0?" "+m:m);continue}j=!1}const A=Tk(v).join(":"),D=g?A+nw:A,E=D+S;if(c.includes(E))continue;c.push(E);const T=l(S,j);for(let k=0;k<T.length;++k){const R=T[k];c.push(D+R)}m=b+(m.length>0?" "+m:m)}return m};function Mk(){let t=0,s,n,i="";for(;t<arguments.length;)(s=arguments[t++])&&(n=sw(s))&&(i&&(i+=" "),i+=n);return i}const sw=t=>{if(typeof t=="string")return t;let s,n="";for(let i=0;i<t.length;i++)t[i]&&(s=sw(t[i]))&&(n&&(n+=" "),n+=s);return n};function Ok(t,...s){let n,i,l,c=h;function h(f){const b=s.reduce((v,g)=>g(v),t());return n=Dk(b),i=n.cache.get,l=n.cache.set,c=m,m(f)}function m(f){const b=i(f);if(b)return b;const v=Rk(f,n);return l(f,v),v}return function(){return c(Mk.apply(null,arguments))}}const On=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},rw=/^\[(?:([a-z-]+):)?(.+)\]$/i,Lk=/^\d+\/\d+$/,Fk=new Set(["px","full","screen"]),$k=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Uk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gi=t=>xc(t)||Fk.has(t)||Lk.test(t),mo=t=>Pc(t,"length",Yk),xc=t=>!!t&&!Number.isNaN(Number(t)),Tf=t=>Pc(t,"number",xc),Cd=t=>!!t&&Number.isInteger(Number(t)),Hk=t=>t.endsWith("%")&&xc(t.slice(0,-1)),zt=t=>rw.test(t),ho=t=>$k.test(t),Wk=new Set(["length","size","percentage"]),qk=t=>Pc(t,Wk,aw),Zk=t=>Pc(t,"position",aw),Gk=new Set(["image","url"]),Kk=t=>Pc(t,Gk,Jk),Xk=t=>Pc(t,"",Qk),_d=()=>!0,Pc=(t,s,n)=>{const i=rw.exec(t);return i?i[1]?typeof s=="string"?i[1]===s:s.has(i[1]):n(i[2]):!1},Yk=t=>zk.test(t)&&!Bk.test(t),aw=()=>!1,Qk=t=>Uk.test(t),Jk=t=>Vk.test(t),eT=()=>{const t=On("colors"),s=On("spacing"),n=On("blur"),i=On("brightness"),l=On("borderColor"),c=On("borderRadius"),h=On("borderSpacing"),m=On("borderWidth"),f=On("contrast"),b=On("grayscale"),v=On("hueRotate"),g=On("invert"),w=On("gap"),N=On("gradientColorStops"),j=On("gradientColorStopPositions"),S=On("inset"),A=On("margin"),D=On("opacity"),E=On("padding"),T=On("saturate"),k=On("scale"),R=On("sepia"),O=On("skew"),H=On("space"),te=On("translate"),X=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",zt,s],M=()=>[zt,s],B=()=>["",gi,mo],ee=()=>["auto",xc,zt],me=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],ae=()=>["","0",zt],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[xc,zt];return{cacheSize:500,separator:":",theme:{colors:[_d],spacing:[gi,mo],blur:["none","",ho,zt],brightness:$(),borderColor:[t],borderRadius:["none","","full",ho,zt],borderSpacing:M(),borderWidth:B(),contrast:$(),grayscale:ae(),hueRotate:$(),invert:ae(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[Hk,mo],inset:U(),margin:U(),opacity:$(),padding:M(),saturate:$(),scale:$(),sepia:ae(),skew:$(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",zt]}],container:["container"],columns:[{columns:[ho]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...me(),zt]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Cd,zt]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",zt]}],grow:[{grow:ae()}],shrink:[{shrink:ae()}],order:[{order:["first","last","none",Cd,zt]}],"grid-cols":[{"grid-cols":[_d]}],"col-start-end":[{col:["auto",{span:["full",Cd,zt]},zt]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[_d]}],"row-start-end":[{row:["auto",{span:[Cd,zt]},zt]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",zt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",zt]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[H]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[H]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",zt,s]}],"min-w":[{"min-w":[zt,s,"min","max","fit"]}],"max-w":[{"max-w":[zt,s,"none","full","min","max","fit","prose",{screen:[ho]},ho]}],h:[{h:[zt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[zt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[zt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[zt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",ho,mo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tf]}],"font-family":[{font:[_d]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",zt]}],"line-clamp":[{"line-clamp":["none",xc,Tf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gi,zt]}],"list-image":[{"list-image":["none",zt]}],"list-style-type":[{list:["none","disc","decimal",zt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[D]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[D]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gi,mo]}],"underline-offset":[{"underline-offset":["auto",gi,zt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[D]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...me(),Zk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Kk]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[N]}],"gradient-via":[{via:[N]}],"gradient-to":[{to:[N]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[m]}],"border-w-x":[{"border-x":[m]}],"border-w-y":[{"border-y":[m]}],"border-w-s":[{"border-s":[m]}],"border-w-e":[{"border-e":[m]}],"border-w-t":[{"border-t":[m]}],"border-w-r":[{"border-r":[m]}],"border-w-b":[{"border-b":[m]}],"border-w-l":[{"border-l":[m]}],"border-opacity":[{"border-opacity":[D]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[m]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[m]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[D]}],"divide-style":[{divide:J()}],"border-color":[{border:[l]}],"border-color-x":[{"border-x":[l]}],"border-color-y":[{"border-y":[l]}],"border-color-s":[{"border-s":[l]}],"border-color-e":[{"border-e":[l]}],"border-color-t":[{"border-t":[l]}],"border-color-r":[{"border-r":[l]}],"border-color-b":[{"border-b":[l]}],"border-color-l":[{"border-l":[l]}],"divide-color":[{divide:[l]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[gi,zt]}],"outline-w":[{outline:[gi,mo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[D]}],"ring-offset-w":[{"ring-offset":[gi,mo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ho,Xk]}],"shadow-color":[{shadow:[_d]}],opacity:[{opacity:[D]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",ho,zt]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[g]}],saturate:[{saturate:[T]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[D]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",zt]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",zt]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",zt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Cd,zt]}],"translate-x":[{"translate-x":[te]}],"translate-y":[{"translate-y":[te]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",zt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gi,mo,Tf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},iw=Ok(eT);function pt(...t){return iw(eg(t))}function Ue({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:pt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function Ec({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:pt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function kc({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:pt("leading-none",t),...s})}function Ve({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:pt("px-6 [&:last-child]:pb-6",t),...s})}function _y(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Pi(...t){return s=>{let n=!1;const i=t.map(l=>{const c=_y(l,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let l=0;l<i.length;l++){const c=i[l];typeof c=="function"?c():_y(t[l],null)}}}}function Wt(...t){return p.useCallback(Pi(...t),t)}var tT=Symbol.for("react.lazy"),th=Bx[" use ".trim().toString()];function nT(t){return typeof t=="object"&&t!==null&&"then"in t}function ow(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===tT&&"_payload"in t&&nT(t._payload)}function ng(t){const s=sT(t),n=p.forwardRef((i,l)=>{let{children:c,...h}=i;ow(c)&&typeof th=="function"&&(c=th(c._payload));const m=p.Children.toArray(c),f=m.find(aT);if(f){const b=f.props.children,v=m.map(g=>g===f?p.Children.count(b)>1?p.Children.only(null):p.isValidElement(b)?b.props.children:null:g);return e.jsx(s,{...h,ref:l,children:p.isValidElement(b)?p.cloneElement(b,void 0,v):null})}return e.jsx(s,{...h,ref:l,children:c})});return n.displayName=`${t}.Slot`,n}var lw=ng("Slot");function sT(t){const s=p.forwardRef((n,i)=>{let{children:l,...c}=n;if(ow(l)&&typeof th=="function"&&(l=th(l._payload)),p.isValidElement(l)){const h=oT(l),m=iT(c,l.props);return l.type!==p.Fragment&&(m.ref=i?Pi(i,h):h),p.cloneElement(l,m)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var rT=Symbol("radix.slottable");function aT(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rT}function iT(t,s){const n={...s};for(const i in s){const l=t[i],c=s[i];/^on[A-Z]/.test(i)?l&&c?n[i]=(...m)=>{const f=c(...m);return l(...m),f}:l&&(n[i]=l):i==="style"?n[i]={...l,...c}:i==="className"&&(n[i]=[l,c].filter(Boolean).join(" "))}return{...t,...n}}function oT(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Sy=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ay=eg,sg=(t,s)=>n=>{var i;if(s?.variants==null)return Ay(t,n?.class,n?.className);const{variants:l,defaultVariants:c}=s,h=Object.keys(l).map(b=>{const v=n?.[b],g=c?.[b];if(v===null)return null;const w=Sy(v)||Sy(g);return l[b][w]}),m=n&&Object.entries(n).reduce((b,v)=>{let[g,w]=v;return w===void 0||(b[g]=w),b},{}),f=s==null||(i=s.compoundVariants)===null||i===void 0?void 0:i.reduce((b,v)=>{let{class:g,className:w,...N}=v;return Object.entries(N).every(j=>{let[S,A]=j;return Array.isArray(A)?A.includes({...c,...m}[S]):{...c,...m}[S]===A})?[...b,g,w]:b},[]);return Ay(t,h,f,n?.class,n?.className)},lT=sg("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ht({className:t,variant:s,asChild:n=!1,...i}){const l=n?lw:"span";return e.jsx(l,{"data-slot":"badge",className:pt(lT({variant:s}),t),...i})}const rg=sg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ne({className:t,variant:s,size:n,asChild:i=!1,type:l,...c}){const h=i?lw:"button";return e.jsx(h,{"data-slot":"button",className:pt(rg({variant:s,size:n,className:t})),type:i?void 0:l??"button",...c})}const Pe=p.forwardRef(({className:t,type:s,...n},i)=>e.jsx("input",{ref:i,type:s,"data-slot":"input",className:pt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n}));Pe.displayName="Input";function yx(t,[s,n]){return Math.min(n,Math.max(s,t))}function tt(t,s,{checkForDefaultPrevented:n=!0}={}){return function(l){if(t?.(l),n===!1||!l.defaultPrevented)return s?.(l)}}function cT(t,s){const n=p.createContext(s),i=c=>{const{children:h,...m}=c,f=p.useMemo(()=>m,Object.values(m));return e.jsx(n.Provider,{value:f,children:h})};i.displayName=t+"Provider";function l(c){const h=p.useContext(n);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[i,l]}function vr(t,s=[]){let n=[];function i(c,h){const m=p.createContext(h),f=n.length;n=[...n,h];const b=g=>{const{scope:w,children:N,...j}=g,S=w?.[t]?.[f]||m,A=p.useMemo(()=>j,Object.values(j));return e.jsx(S.Provider,{value:A,children:N})};b.displayName=c+"Provider";function v(g,w){const N=w?.[t]?.[f]||m,j=p.useContext(N);if(j)return j;if(h!==void 0)return h;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[b,v]}const l=()=>{const c=n.map(h=>p.createContext(h));return function(m){const f=m?.[t]||c;return p.useMemo(()=>({[`__scope${t}`]:{...m,[t]:f}}),[m,f])}};return l.scopeName=t,[i,dT(l,...s)]}function dT(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const i=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const h=i.reduce((m,{useScope:f,scopeName:b})=>{const g=f(c)[`__scope${b}`];return{...m,...g}},{});return p.useMemo(()=>({[`__scope${s.scopeName}`]:h}),[h])}};return n.scopeName=s.scopeName,n}function Py(t){const s=uT(t),n=p.forwardRef((i,l)=>{const{children:c,...h}=i,m=p.Children.toArray(c),f=m.find(hT);if(f){const b=f.props.children,v=m.map(g=>g===f?p.Children.count(b)>1?p.Children.only(null):p.isValidElement(b)?b.props.children:null:g);return e.jsx(s,{...h,ref:l,children:p.isValidElement(b)?p.cloneElement(b,void 0,v):null})}return e.jsx(s,{...h,ref:l,children:c})});return n.displayName=`${t}.Slot`,n}function uT(t){const s=p.forwardRef((n,i)=>{const{children:l,...c}=n;if(p.isValidElement(l)){const h=fT(l),m=pT(c,l.props);return l.type!==p.Fragment&&(m.ref=i?Pi(i,h):h),p.cloneElement(l,m)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var mT=Symbol("radix.slottable");function hT(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mT}function pT(t,s){const n={...s};for(const i in s){const l=t[i],c=s[i];/^on[A-Z]/.test(i)?l&&c?n[i]=(...m)=>{const f=c(...m);return l(...m),f}:l&&(n[i]=l):i==="style"?n[i]={...l,...c}:i==="className"&&(n[i]=[l,c].filter(Boolean).join(" "))}return{...t,...n}}function fT(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ag(t){const s=t+"CollectionProvider",[n,i]=vr(s),[l,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),h=S=>{const{scope:A,children:D}=S,E=Re.useRef(null),T=Re.useRef(new Map).current;return e.jsx(l,{scope:A,itemMap:T,collectionRef:E,children:D})};h.displayName=s;const m=t+"CollectionSlot",f=Py(m),b=Re.forwardRef((S,A)=>{const{scope:D,children:E}=S,T=c(m,D),k=Wt(A,T.collectionRef);return e.jsx(f,{ref:k,children:E})});b.displayName=m;const v=t+"CollectionItemSlot",g="data-radix-collection-item",w=Py(v),N=Re.forwardRef((S,A)=>{const{scope:D,children:E,...T}=S,k=Re.useRef(null),R=Wt(A,k),O=c(v,D);return Re.useEffect(()=>(O.itemMap.set(k,{ref:k,...T}),()=>void O.itemMap.delete(k))),e.jsx(w,{[g]:"",ref:R,children:E})});N.displayName=v;function j(S){const A=c(t+"CollectionConsumer",S);return Re.useCallback(()=>{const E=A.collectionRef.current;if(!E)return[];const T=Array.from(E.querySelectorAll(`[${g}]`));return Array.from(A.itemMap.values()).sort((O,H)=>T.indexOf(O.ref.current)-T.indexOf(H.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:h,Slot:b,ItemSlot:N},j,i]}var xT=p.createContext(void 0);function Tc(t){const s=p.useContext(xT);return t||s||"ltr"}function gT(t){const s=vT(t),n=p.forwardRef((i,l)=>{const{children:c,...h}=i,m=p.Children.toArray(c),f=m.find(bT);if(f){const b=f.props.children,v=m.map(g=>g===f?p.Children.count(b)>1?p.Children.only(null):p.isValidElement(b)?b.props.children:null:g);return e.jsx(s,{...h,ref:l,children:p.isValidElement(b)?p.cloneElement(b,void 0,v):null})}return e.jsx(s,{...h,ref:l,children:c})});return n.displayName=`${t}.Slot`,n}function vT(t){const s=p.forwardRef((n,i)=>{const{children:l,...c}=n;if(p.isValidElement(l)){const h=wT(l),m=jT(c,l.props);return l.type!==p.Fragment&&(m.ref=i?Pi(i,h):h),p.cloneElement(l,m)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var yT=Symbol("radix.slottable");function bT(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yT}function jT(t,s){const n={...s};for(const i in s){const l=t[i],c=s[i];/^on[A-Z]/.test(i)?l&&c?n[i]=(...m)=>{const f=c(...m);return l(...m),f}:l&&(n[i]=l):i==="style"?n[i]={...l,...c}:i==="className"&&(n[i]=[l,c].filter(Boolean).join(" "))}return{...t,...n}}function wT(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gt=NT.reduce((t,s)=>{const n=gT(`Primitive.${s}`),i=p.forwardRef((l,c)=>{const{asChild:h,...m}=l,f=h?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...m,ref:c})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{});function cw(t,s){t&&Kd.flushSync(()=>t.dispatchEvent(s))}function Is(t){const s=p.useRef(t);return p.useEffect(()=>{s.current=t}),p.useMemo(()=>(...n)=>s.current?.(...n),[])}function CT(t,s=globalThis?.document){const n=Is(t);p.useEffect(()=>{const i=l=>{l.key==="Escape"&&n(l)};return s.addEventListener("keydown",i,{capture:!0}),()=>s.removeEventListener("keydown",i,{capture:!0})},[n,s])}var _T="DismissableLayer",bx="dismissableLayer.update",ST="dismissableLayer.pointerDownOutside",AT="dismissableLayer.focusOutside",Ey,dw=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ah=p.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:h,onDismiss:m,...f}=t,b=p.useContext(dw),[v,g]=p.useState(null),w=v?.ownerDocument??globalThis?.document,[,N]=p.useState({}),j=Wt(s,H=>g(H)),S=Array.from(b.layers),[A]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),D=S.indexOf(A),E=v?S.indexOf(v):-1,T=b.layersWithOutsidePointerEventsDisabled.size>0,k=E>=D,R=kT(H=>{const te=H.target,X=[...b.branches].some(q=>q.contains(te));!k||X||(l?.(H),h?.(H),H.defaultPrevented||m?.())},w),O=TT(H=>{const te=H.target;[...b.branches].some(q=>q.contains(te))||(c?.(H),h?.(H),H.defaultPrevented||m?.())},w);return CT(H=>{E===b.layers.size-1&&(i?.(H),!H.defaultPrevented&&m&&(H.preventDefault(),m()))},w),p.useEffect(()=>{if(v)return n&&(b.layersWithOutsidePointerEventsDisabled.size===0&&(Ey=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(v)),b.layers.add(v),ky(),()=>{n&&b.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=Ey)}},[v,w,n,b]),p.useEffect(()=>()=>{v&&(b.layers.delete(v),b.layersWithOutsidePointerEventsDisabled.delete(v),ky())},[v,b]),p.useEffect(()=>{const H=()=>N({});return document.addEventListener(bx,H),()=>document.removeEventListener(bx,H)},[]),e.jsx(gt.div,{...f,ref:j,style:{pointerEvents:T?k?"auto":"none":void 0,...t.style},onFocusCapture:tt(t.onFocusCapture,O.onFocusCapture),onBlurCapture:tt(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:tt(t.onPointerDownCapture,R.onPointerDownCapture)})});Ah.displayName=_T;var PT="DismissableLayerBranch",ET=p.forwardRef((t,s)=>{const n=p.useContext(dw),i=p.useRef(null),l=Wt(s,i);return p.useEffect(()=>{const c=i.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(gt.div,{...t,ref:l})});ET.displayName=PT;function kT(t,s=globalThis?.document){const n=Is(t),i=p.useRef(!1),l=p.useRef(()=>{});return p.useEffect(()=>{const c=m=>{if(m.target&&!i.current){let f=function(){uw(ST,n,b,{discrete:!0})};const b={originalEvent:m};m.pointerType==="touch"?(s.removeEventListener("click",l.current),l.current=f,s.addEventListener("click",l.current,{once:!0})):f()}else s.removeEventListener("click",l.current);i.current=!1},h=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(h),s.removeEventListener("pointerdown",c),s.removeEventListener("click",l.current)}},[s,n]),{onPointerDownCapture:()=>i.current=!0}}function TT(t,s=globalThis?.document){const n=Is(t),i=p.useRef(!1);return p.useEffect(()=>{const l=c=>{c.target&&!i.current&&uw(AT,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",l),()=>s.removeEventListener("focusin",l)},[s,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ky(){const t=new CustomEvent(bx);document.dispatchEvent(t)}function uw(t,s,n,{discrete:i}){const l=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&l.addEventListener(t,s,{once:!0}),i?cw(l,c):l.dispatchEvent(c)}var Df=0;function ig(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Ty()),document.body.insertAdjacentElement("beforeend",t[1]??Ty()),Df++,()=>{Df===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Df--}},[])}function Ty(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var If="focusScope.autoFocusOnMount",Rf="focusScope.autoFocusOnUnmount",Dy={bubbles:!1,cancelable:!0},DT="FocusScope",Ph=p.forwardRef((t,s)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...h}=t,[m,f]=p.useState(null),b=Is(l),v=Is(c),g=p.useRef(null),w=Wt(s,S=>f(S)),N=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(i){let S=function(T){if(N.paused||!m)return;const k=T.target;m.contains(k)?g.current=k:xo(g.current,{select:!0})},A=function(T){if(N.paused||!m)return;const k=T.relatedTarget;k!==null&&(m.contains(k)||xo(g.current,{select:!0}))},D=function(T){if(document.activeElement===document.body)for(const R of T)R.removedNodes.length>0&&xo(m)};document.addEventListener("focusin",S),document.addEventListener("focusout",A);const E=new MutationObserver(D);return m&&E.observe(m,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",A),E.disconnect()}}},[i,m,N.paused]),p.useEffect(()=>{if(m){Ry.add(N);const S=document.activeElement;if(!m.contains(S)){const D=new CustomEvent(If,Dy);m.addEventListener(If,b),m.dispatchEvent(D),D.defaultPrevented||(IT(FT(mw(m)),{select:!0}),document.activeElement===S&&xo(m))}return()=>{m.removeEventListener(If,b),setTimeout(()=>{const D=new CustomEvent(Rf,Dy);m.addEventListener(Rf,v),m.dispatchEvent(D),D.defaultPrevented||xo(S??document.body,{select:!0}),m.removeEventListener(Rf,v),Ry.remove(N)},0)}}},[m,b,v,N]);const j=p.useCallback(S=>{if(!n&&!i||N.paused)return;const A=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,D=document.activeElement;if(A&&D){const E=S.currentTarget,[T,k]=RT(E);T&&k?!S.shiftKey&&D===k?(S.preventDefault(),n&&xo(T,{select:!0})):S.shiftKey&&D===T&&(S.preventDefault(),n&&xo(k,{select:!0})):D===E&&S.preventDefault()}},[n,i,N.paused]);return e.jsx(gt.div,{tabIndex:-1,...h,ref:w,onKeyDown:j})});Ph.displayName=DT;function IT(t,{select:s=!1}={}){const n=document.activeElement;for(const i of t)if(xo(i,{select:s}),document.activeElement!==n)return}function RT(t){const s=mw(t),n=Iy(s,t),i=Iy(s.reverse(),t);return[n,i]}function mw(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const l=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||l?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Iy(t,s){for(const n of t)if(!MT(n,{upTo:s}))return n}function MT(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OT(t){return t instanceof HTMLInputElement&&"select"in t}function xo(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&OT(t)&&s&&t.select()}}var Ry=LT();function LT(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=My(t,s),t.unshift(s)},remove(s){t=My(t,s),t[0]?.resume()}}}function My(t,s){const n=[...t],i=n.indexOf(s);return i!==-1&&n.splice(i,1),n}function FT(t){return t.filter(s=>s.tagName!=="A")}var As=globalThis?.document?p.useLayoutEffect:()=>{},$T=Bx[" useId ".trim().toString()]||(()=>{}),zT=0;function ga(t){const[s,n]=p.useState($T());return As(()=>{n(i=>i??String(zT++))},[t]),t||(s?`radix-${s}`:"")}const BT=["top","right","bottom","left"],No=Math.min,Er=Math.max,nh=Math.round,bm=Math.floor,qa=t=>({x:t,y:t}),UT={left:"right",right:"left",bottom:"top",top:"bottom"},VT={start:"end",end:"start"};function jx(t,s,n){return Er(t,No(s,n))}function Si(t,s){return typeof t=="function"?t(s):t}function Ai(t){return t.split("-")[0]}function Dc(t){return t.split("-")[1]}function og(t){return t==="x"?"y":"x"}function lg(t){return t==="y"?"height":"width"}const HT=new Set(["top","bottom"]);function Va(t){return HT.has(Ai(t))?"y":"x"}function cg(t){return og(Va(t))}function WT(t,s,n){n===void 0&&(n=!1);const i=Dc(t),l=cg(t),c=lg(l);let h=l==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return s.reference[c]>s.floating[c]&&(h=sh(h)),[h,sh(h)]}function qT(t){const s=sh(t);return[wx(t),s,wx(s)]}function wx(t){return t.replace(/start|end/g,s=>VT[s])}const Oy=["left","right"],Ly=["right","left"],ZT=["top","bottom"],GT=["bottom","top"];function KT(t,s,n){switch(t){case"top":case"bottom":return n?s?Ly:Oy:s?Oy:Ly;case"left":case"right":return s?ZT:GT;default:return[]}}function XT(t,s,n,i){const l=Dc(t);let c=KT(Ai(t),n==="start",i);return l&&(c=c.map(h=>h+"-"+l),s&&(c=c.concat(c.map(wx)))),c}function sh(t){return t.replace(/left|right|bottom|top/g,s=>UT[s])}function YT(t){return{top:0,right:0,bottom:0,left:0,...t}}function hw(t){return typeof t!="number"?YT(t):{top:t,right:t,bottom:t,left:t}}function rh(t){const{x:s,y:n,width:i,height:l}=t;return{width:i,height:l,top:n,left:s,right:s+i,bottom:n+l,x:s,y:n}}function Fy(t,s,n){let{reference:i,floating:l}=t;const c=Va(s),h=cg(s),m=lg(h),f=Ai(s),b=c==="y",v=i.x+i.width/2-l.width/2,g=i.y+i.height/2-l.height/2,w=i[m]/2-l[m]/2;let N;switch(f){case"top":N={x:v,y:i.y-l.height};break;case"bottom":N={x:v,y:i.y+i.height};break;case"right":N={x:i.x+i.width,y:g};break;case"left":N={x:i.x-l.width,y:g};break;default:N={x:i.x,y:i.y}}switch(Dc(s)){case"start":N[h]-=w*(n&&b?-1:1);break;case"end":N[h]+=w*(n&&b?-1:1);break}return N}const QT=async(t,s,n)=>{const{placement:i="bottom",strategy:l="absolute",middleware:c=[],platform:h}=n,m=c.filter(Boolean),f=await(h.isRTL==null?void 0:h.isRTL(s));let b=await h.getElementRects({reference:t,floating:s,strategy:l}),{x:v,y:g}=Fy(b,i,f),w=i,N={},j=0;for(let S=0;S<m.length;S++){const{name:A,fn:D}=m[S],{x:E,y:T,data:k,reset:R}=await D({x:v,y:g,initialPlacement:i,placement:w,strategy:l,middlewareData:N,rects:b,platform:h,elements:{reference:t,floating:s}});v=E??v,g=T??g,N={...N,[A]:{...N[A],...k}},R&&j<=50&&(j++,typeof R=="object"&&(R.placement&&(w=R.placement),R.rects&&(b=R.rects===!0?await h.getElementRects({reference:t,floating:s,strategy:l}):R.rects),{x:v,y:g}=Fy(b,w,f)),S=-1)}return{x:v,y:g,placement:w,strategy:l,middlewareData:N}};async function Wd(t,s){var n;s===void 0&&(s={});const{x:i,y:l,platform:c,rects:h,elements:m,strategy:f}=t,{boundary:b="clippingAncestors",rootBoundary:v="viewport",elementContext:g="floating",altBoundary:w=!1,padding:N=0}=Si(s,t),j=hw(N),A=m[w?g==="floating"?"reference":"floating":g],D=rh(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(A)))==null||n?A:A.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(m.floating)),boundary:b,rootBoundary:v,strategy:f})),E=g==="floating"?{x:i,y:l,width:h.floating.width,height:h.floating.height}:h.reference,T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m.floating)),k=await(c.isElement==null?void 0:c.isElement(T))?await(c.getScale==null?void 0:c.getScale(T))||{x:1,y:1}:{x:1,y:1},R=rh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:E,offsetParent:T,strategy:f}):E);return{top:(D.top-R.top+j.top)/k.y,bottom:(R.bottom-D.bottom+j.bottom)/k.y,left:(D.left-R.left+j.left)/k.x,right:(R.right-D.right+j.right)/k.x}}const JT=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:i,placement:l,rects:c,platform:h,elements:m,middlewareData:f}=s,{element:b,padding:v=0}=Si(t,s)||{};if(b==null)return{};const g=hw(v),w={x:n,y:i},N=cg(l),j=lg(N),S=await h.getDimensions(b),A=N==="y",D=A?"top":"left",E=A?"bottom":"right",T=A?"clientHeight":"clientWidth",k=c.reference[j]+c.reference[N]-w[N]-c.floating[j],R=w[N]-c.reference[N],O=await(h.getOffsetParent==null?void 0:h.getOffsetParent(b));let H=O?O[T]:0;(!H||!await(h.isElement==null?void 0:h.isElement(O)))&&(H=m.floating[T]||c.floating[j]);const te=k/2-R/2,X=H/2-S[j]/2-1,q=No(g[D],X),U=No(g[E],X),M=q,B=H-S[j]-U,ee=H/2-S[j]/2+te,me=jx(M,ee,B),J=!f.arrow&&Dc(l)!=null&&ee!==me&&c.reference[j]/2-(ee<M?q:U)-S[j]/2<0,fe=J?ee<M?ee-M:ee-B:0;return{[N]:w[N]+fe,data:{[N]:me,centerOffset:ee-me-fe,...J&&{alignmentOffset:fe}},reset:J}}}),eD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,i;const{placement:l,middlewareData:c,rects:h,initialPlacement:m,platform:f,elements:b}=s,{mainAxis:v=!0,crossAxis:g=!0,fallbackPlacements:w,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:S=!0,...A}=Si(t,s);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const D=Ai(l),E=Va(m),T=Ai(m)===m,k=await(f.isRTL==null?void 0:f.isRTL(b.floating)),R=w||(T||!S?[sh(m)]:qT(m)),O=j!=="none";!w&&O&&R.push(...XT(m,S,j,k));const H=[m,...R],te=await Wd(s,A),X=[];let q=((i=c.flip)==null?void 0:i.overflows)||[];if(v&&X.push(te[D]),g){const ee=WT(l,h,k);X.push(te[ee[0]],te[ee[1]])}if(q=[...q,{placement:l,overflows:X}],!X.every(ee=>ee<=0)){var U,M;const ee=(((U=c.flip)==null?void 0:U.index)||0)+1,me=H[ee];if(me&&(!(g==="alignment"?E!==Va(me):!1)||q.every(W=>Va(W.placement)===E?W.overflows[0]>0:!0)))return{data:{index:ee,overflows:q},reset:{placement:me}};let J=(M=q.filter(fe=>fe.overflows[0]<=0).sort((fe,W)=>fe.overflows[1]-W.overflows[1])[0])==null?void 0:M.placement;if(!J)switch(N){case"bestFit":{var B;const fe=(B=q.filter(W=>{if(O){const ae=Va(W.placement);return ae===E||ae==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ae=>ae>0).reduce((ae,F)=>ae+F,0)]).sort((W,ae)=>W[1]-ae[1])[0])==null?void 0:B[0];fe&&(J=fe);break}case"initialPlacement":J=m;break}if(l!==J)return{reset:{placement:J}}}return{}}}};function $y(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function zy(t){return BT.some(s=>t[s]>=0)}const tD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:i="referenceHidden",...l}=Si(t,s);switch(i){case"referenceHidden":{const c=await Wd(s,{...l,elementContext:"reference"}),h=$y(c,n.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:zy(h)}}}case"escaped":{const c=await Wd(s,{...l,altBoundary:!0}),h=$y(c,n.floating);return{data:{escapedOffsets:h,escaped:zy(h)}}}default:return{}}}}},pw=new Set(["left","top"]);async function nD(t,s){const{placement:n,platform:i,elements:l}=t,c=await(i.isRTL==null?void 0:i.isRTL(l.floating)),h=Ai(n),m=Dc(n),f=Va(n)==="y",b=pw.has(h)?-1:1,v=c&&f?-1:1,g=Si(s,t);let{mainAxis:w,crossAxis:N,alignmentAxis:j}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return m&&typeof j=="number"&&(N=m==="end"?j*-1:j),f?{x:N*v,y:w*b}:{x:w*b,y:N*v}}const sD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,i;const{x:l,y:c,placement:h,middlewareData:m}=s,f=await nD(s,t);return h===((n=m.offset)==null?void 0:n.placement)&&(i=m.arrow)!=null&&i.alignmentOffset?{}:{x:l+f.x,y:c+f.y,data:{...f,placement:h}}}}},rD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:i,placement:l}=s,{mainAxis:c=!0,crossAxis:h=!1,limiter:m={fn:A=>{let{x:D,y:E}=A;return{x:D,y:E}}},...f}=Si(t,s),b={x:n,y:i},v=await Wd(s,f),g=Va(Ai(l)),w=og(g);let N=b[w],j=b[g];if(c){const A=w==="y"?"top":"left",D=w==="y"?"bottom":"right",E=N+v[A],T=N-v[D];N=jx(E,N,T)}if(h){const A=g==="y"?"top":"left",D=g==="y"?"bottom":"right",E=j+v[A],T=j-v[D];j=jx(E,j,T)}const S=m.fn({...s,[w]:N,[g]:j});return{...S,data:{x:S.x-n,y:S.y-i,enabled:{[w]:c,[g]:h}}}}}},aD=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:i,placement:l,rects:c,middlewareData:h}=s,{offset:m=0,mainAxis:f=!0,crossAxis:b=!0}=Si(t,s),v={x:n,y:i},g=Va(l),w=og(g);let N=v[w],j=v[g];const S=Si(m,s),A=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){const T=w==="y"?"height":"width",k=c.reference[w]-c.floating[T]+A.mainAxis,R=c.reference[w]+c.reference[T]-A.mainAxis;N<k?N=k:N>R&&(N=R)}if(b){var D,E;const T=w==="y"?"width":"height",k=pw.has(Ai(l)),R=c.reference[g]-c.floating[T]+(k&&((D=h.offset)==null?void 0:D[g])||0)+(k?0:A.crossAxis),O=c.reference[g]+c.reference[T]+(k?0:((E=h.offset)==null?void 0:E[g])||0)-(k?A.crossAxis:0);j<R?j=R:j>O&&(j=O)}return{[w]:N,[g]:j}}}},iD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,i;const{placement:l,rects:c,platform:h,elements:m}=s,{apply:f=()=>{},...b}=Si(t,s),v=await Wd(s,b),g=Ai(l),w=Dc(l),N=Va(l)==="y",{width:j,height:S}=c.floating;let A,D;g==="top"||g==="bottom"?(A=g,D=w===(await(h.isRTL==null?void 0:h.isRTL(m.floating))?"start":"end")?"left":"right"):(D=g,A=w==="end"?"top":"bottom");const E=S-v.top-v.bottom,T=j-v.left-v.right,k=No(S-v[A],E),R=No(j-v[D],T),O=!s.middlewareData.shift;let H=k,te=R;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(te=T),(i=s.middlewareData.shift)!=null&&i.enabled.y&&(H=E),O&&!w){const q=Er(v.left,0),U=Er(v.right,0),M=Er(v.top,0),B=Er(v.bottom,0);N?te=j-2*(q!==0||U!==0?q+U:Er(v.left,v.right)):H=S-2*(M!==0||B!==0?M+B:Er(v.top,v.bottom))}await f({...s,availableWidth:te,availableHeight:H});const X=await h.getDimensions(m.floating);return j!==X.width||S!==X.height?{reset:{rects:!0}}:{}}}};function Eh(){return typeof window<"u"}function Ic(t){return fw(t)?(t.nodeName||"").toLowerCase():"#document"}function Ir(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Xa(t){var s;return(s=(fw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function fw(t){return Eh()?t instanceof Node||t instanceof Ir(t).Node:!1}function ya(t){return Eh()?t instanceof Element||t instanceof Ir(t).Element:!1}function Ga(t){return Eh()?t instanceof HTMLElement||t instanceof Ir(t).HTMLElement:!1}function By(t){return!Eh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ir(t).ShadowRoot}const oD=new Set(["inline","contents"]);function tu(t){const{overflow:s,overflowX:n,overflowY:i,display:l}=ba(t);return/auto|scroll|overlay|hidden|clip/.test(s+i+n)&&!oD.has(l)}const lD=new Set(["table","td","th"]);function cD(t){return lD.has(Ic(t))}const dD=[":popover-open",":modal"];function kh(t){return dD.some(s=>{try{return t.matches(s)}catch{return!1}})}const uD=["transform","translate","scale","rotate","perspective"],mD=["transform","translate","scale","rotate","perspective","filter"],hD=["paint","layout","strict","content"];function dg(t){const s=ug(),n=ya(t)?ba(t):t;return uD.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||mD.some(i=>(n.willChange||"").includes(i))||hD.some(i=>(n.contain||"").includes(i))}function pD(t){let s=Co(t);for(;Ga(s)&&!Cc(s);){if(dg(s))return s;if(kh(s))return null;s=Co(s)}return null}function ug(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fD=new Set(["html","body","#document"]);function Cc(t){return fD.has(Ic(t))}function ba(t){return Ir(t).getComputedStyle(t)}function Th(t){return ya(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Co(t){if(Ic(t)==="html")return t;const s=t.assignedSlot||t.parentNode||By(t)&&t.host||Xa(t);return By(s)?s.host:s}function xw(t){const s=Co(t);return Cc(s)?t.ownerDocument?t.ownerDocument.body:t.body:Ga(s)&&tu(s)?s:xw(s)}function qd(t,s,n){var i;s===void 0&&(s=[]),n===void 0&&(n=!0);const l=xw(t),c=l===((i=t.ownerDocument)==null?void 0:i.body),h=Ir(l);if(c){const m=Nx(h);return s.concat(h,h.visualViewport||[],tu(l)?l:[],m&&n?qd(m):[])}return s.concat(l,qd(l,[],n))}function Nx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gw(t){const s=ba(t);let n=parseFloat(s.width)||0,i=parseFloat(s.height)||0;const l=Ga(t),c=l?t.offsetWidth:n,h=l?t.offsetHeight:i,m=nh(n)!==c||nh(i)!==h;return m&&(n=c,i=h),{width:n,height:i,$:m}}function mg(t){return ya(t)?t:t.contextElement}function gc(t){const s=mg(t);if(!Ga(s))return qa(1);const n=s.getBoundingClientRect(),{width:i,height:l,$:c}=gw(s);let h=(c?nh(n.width):n.width)/i,m=(c?nh(n.height):n.height)/l;return(!h||!Number.isFinite(h))&&(h=1),(!m||!Number.isFinite(m))&&(m=1),{x:h,y:m}}const xD=qa(0);function vw(t){const s=Ir(t);return!ug()||!s.visualViewport?xD:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function gD(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Ir(t)?!1:s}function fl(t,s,n,i){s===void 0&&(s=!1),n===void 0&&(n=!1);const l=t.getBoundingClientRect(),c=mg(t);let h=qa(1);s&&(i?ya(i)&&(h=gc(i)):h=gc(t));const m=gD(c,n,i)?vw(c):qa(0);let f=(l.left+m.x)/h.x,b=(l.top+m.y)/h.y,v=l.width/h.x,g=l.height/h.y;if(c){const w=Ir(c),N=i&&ya(i)?Ir(i):i;let j=w,S=Nx(j);for(;S&&i&&N!==j;){const A=gc(S),D=S.getBoundingClientRect(),E=ba(S),T=D.left+(S.clientLeft+parseFloat(E.paddingLeft))*A.x,k=D.top+(S.clientTop+parseFloat(E.paddingTop))*A.y;f*=A.x,b*=A.y,v*=A.x,g*=A.y,f+=T,b+=k,j=Ir(S),S=Nx(j)}}return rh({width:v,height:g,x:f,y:b})}function Dh(t,s){const n=Th(t).scrollLeft;return s?s.left+n:fl(Xa(t)).left+n}function yw(t,s){const n=t.getBoundingClientRect(),i=n.left+s.scrollLeft-Dh(t,n),l=n.top+s.scrollTop;return{x:i,y:l}}function vD(t){let{elements:s,rect:n,offsetParent:i,strategy:l}=t;const c=l==="fixed",h=Xa(i),m=s?kh(s.floating):!1;if(i===h||m&&c)return n;let f={scrollLeft:0,scrollTop:0},b=qa(1);const v=qa(0),g=Ga(i);if((g||!g&&!c)&&((Ic(i)!=="body"||tu(h))&&(f=Th(i)),Ga(i))){const N=fl(i);b=gc(i),v.x=N.x+i.clientLeft,v.y=N.y+i.clientTop}const w=h&&!g&&!c?yw(h,f):qa(0);return{width:n.width*b.x,height:n.height*b.y,x:n.x*b.x-f.scrollLeft*b.x+v.x+w.x,y:n.y*b.y-f.scrollTop*b.y+v.y+w.y}}function yD(t){return Array.from(t.getClientRects())}function bD(t){const s=Xa(t),n=Th(t),i=t.ownerDocument.body,l=Er(s.scrollWidth,s.clientWidth,i.scrollWidth,i.clientWidth),c=Er(s.scrollHeight,s.clientHeight,i.scrollHeight,i.clientHeight);let h=-n.scrollLeft+Dh(t);const m=-n.scrollTop;return ba(i).direction==="rtl"&&(h+=Er(s.clientWidth,i.clientWidth)-l),{width:l,height:c,x:h,y:m}}const Uy=25;function jD(t,s){const n=Ir(t),i=Xa(t),l=n.visualViewport;let c=i.clientWidth,h=i.clientHeight,m=0,f=0;if(l){c=l.width,h=l.height;const v=ug();(!v||v&&s==="fixed")&&(m=l.offsetLeft,f=l.offsetTop)}const b=Dh(i);if(b<=0){const v=i.ownerDocument,g=v.body,w=getComputedStyle(g),N=v.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,j=Math.abs(i.clientWidth-g.clientWidth-N);j<=Uy&&(c-=j)}else b<=Uy&&(c+=b);return{width:c,height:h,x:m,y:f}}const wD=new Set(["absolute","fixed"]);function ND(t,s){const n=fl(t,!0,s==="fixed"),i=n.top+t.clientTop,l=n.left+t.clientLeft,c=Ga(t)?gc(t):qa(1),h=t.clientWidth*c.x,m=t.clientHeight*c.y,f=l*c.x,b=i*c.y;return{width:h,height:m,x:f,y:b}}function Vy(t,s,n){let i;if(s==="viewport")i=jD(t,n);else if(s==="document")i=bD(Xa(t));else if(ya(s))i=ND(s,n);else{const l=vw(t);i={x:s.x-l.x,y:s.y-l.y,width:s.width,height:s.height}}return rh(i)}function bw(t,s){const n=Co(t);return n===s||!ya(n)||Cc(n)?!1:ba(n).position==="fixed"||bw(n,s)}function CD(t,s){const n=s.get(t);if(n)return n;let i=qd(t,[],!1).filter(m=>ya(m)&&Ic(m)!=="body"),l=null;const c=ba(t).position==="fixed";let h=c?Co(t):t;for(;ya(h)&&!Cc(h);){const m=ba(h),f=dg(h);!f&&m.position==="fixed"&&(l=null),(c?!f&&!l:!f&&m.position==="static"&&!!l&&wD.has(l.position)||tu(h)&&!f&&bw(t,h))?i=i.filter(v=>v!==h):l=m,h=Co(h)}return s.set(t,i),i}function _D(t){let{element:s,boundary:n,rootBoundary:i,strategy:l}=t;const h=[...n==="clippingAncestors"?kh(s)?[]:CD(s,this._c):[].concat(n),i],m=h[0],f=h.reduce((b,v)=>{const g=Vy(s,v,l);return b.top=Er(g.top,b.top),b.right=No(g.right,b.right),b.bottom=No(g.bottom,b.bottom),b.left=Er(g.left,b.left),b},Vy(s,m,l));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function SD(t){const{width:s,height:n}=gw(t);return{width:s,height:n}}function AD(t,s,n){const i=Ga(s),l=Xa(s),c=n==="fixed",h=fl(t,!0,c,s);let m={scrollLeft:0,scrollTop:0};const f=qa(0);function b(){f.x=Dh(l)}if(i||!i&&!c)if((Ic(s)!=="body"||tu(l))&&(m=Th(s)),i){const N=fl(s,!0,c,s);f.x=N.x+s.clientLeft,f.y=N.y+s.clientTop}else l&&b();c&&!i&&l&&b();const v=l&&!i&&!c?yw(l,m):qa(0),g=h.left+m.scrollLeft-f.x-v.x,w=h.top+m.scrollTop-f.y-v.y;return{x:g,y:w,width:h.width,height:h.height}}function Mf(t){return ba(t).position==="static"}function Hy(t,s){if(!Ga(t)||ba(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return Xa(t)===n&&(n=n.ownerDocument.body),n}function jw(t,s){const n=Ir(t);if(kh(t))return n;if(!Ga(t)){let l=Co(t);for(;l&&!Cc(l);){if(ya(l)&&!Mf(l))return l;l=Co(l)}return n}let i=Hy(t,s);for(;i&&cD(i)&&Mf(i);)i=Hy(i,s);return i&&Cc(i)&&Mf(i)&&!dg(i)?n:i||pD(t)||n}const PD=async function(t){const s=this.getOffsetParent||jw,n=this.getDimensions,i=await n(t.floating);return{reference:AD(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function ED(t){return ba(t).direction==="rtl"}const kD={convertOffsetParentRelativeRectToViewportRelativeRect:vD,getDocumentElement:Xa,getClippingRect:_D,getOffsetParent:jw,getElementRects:PD,getClientRects:yD,getDimensions:SD,getScale:gc,isElement:ya,isRTL:ED};function ww(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function TD(t,s){let n=null,i;const l=Xa(t);function c(){var m;clearTimeout(i),(m=n)==null||m.disconnect(),n=null}function h(m,f){m===void 0&&(m=!1),f===void 0&&(f=1),c();const b=t.getBoundingClientRect(),{left:v,top:g,width:w,height:N}=b;if(m||s(),!w||!N)return;const j=bm(g),S=bm(l.clientWidth-(v+w)),A=bm(l.clientHeight-(g+N)),D=bm(v),T={rootMargin:-j+"px "+-S+"px "+-A+"px "+-D+"px",threshold:Er(0,No(1,f))||1};let k=!0;function R(O){const H=O[0].intersectionRatio;if(H!==f){if(!k)return h();H?h(!1,H):i=setTimeout(()=>{h(!1,1e-7)},1e3)}H===1&&!ww(b,t.getBoundingClientRect())&&h(),k=!1}try{n=new IntersectionObserver(R,{...T,root:l.ownerDocument})}catch{n=new IntersectionObserver(R,T)}n.observe(t)}return h(!0),c}function DD(t,s,n,i){i===void 0&&(i={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,b=mg(t),v=l||c?[...b?qd(b):[],...qd(s)]:[];v.forEach(D=>{l&&D.addEventListener("scroll",n,{passive:!0}),c&&D.addEventListener("resize",n)});const g=b&&m?TD(b,n):null;let w=-1,N=null;h&&(N=new ResizeObserver(D=>{let[E]=D;E&&E.target===b&&N&&(N.unobserve(s),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var T;(T=N)==null||T.observe(s)})),n()}),b&&!f&&N.observe(b),N.observe(s));let j,S=f?fl(t):null;f&&A();function A(){const D=fl(t);S&&!ww(S,D)&&n(),S=D,j=requestAnimationFrame(A)}return n(),()=>{var D;v.forEach(E=>{l&&E.removeEventListener("scroll",n),c&&E.removeEventListener("resize",n)}),g?.(),(D=N)==null||D.disconnect(),N=null,f&&cancelAnimationFrame(j)}}const ID=sD,RD=rD,MD=eD,OD=iD,LD=tD,Wy=JT,FD=aD,$D=(t,s,n)=>{const i=new Map,l={platform:kD,...n},c={...l.platform,_c:i};return QT(t,s,{...l,platform:c})};var zD=typeof document<"u",BD=function(){},Um=zD?p.useLayoutEffect:BD;function ah(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,i,l;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(i=n;i--!==0;)if(!ah(t[i],s[i]))return!1;return!0}if(l=Object.keys(t),n=l.length,n!==Object.keys(s).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(s,l[i]))return!1;for(i=n;i--!==0;){const c=l[i];if(!(c==="_owner"&&t.$$typeof)&&!ah(t[c],s[c]))return!1}return!0}return t!==t&&s!==s}function Nw(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function qy(t,s){const n=Nw(t);return Math.round(s*n)/n}function Of(t){const s=p.useRef(t);return Um(()=>{s.current=t}),s}function UD(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:i=[],platform:l,elements:{reference:c,floating:h}={},transform:m=!0,whileElementsMounted:f,open:b}=t,[v,g]=p.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[w,N]=p.useState(i);ah(w,i)||N(i);const[j,S]=p.useState(null),[A,D]=p.useState(null),E=p.useCallback(W=>{W!==O.current&&(O.current=W,S(W))},[]),T=p.useCallback(W=>{W!==H.current&&(H.current=W,D(W))},[]),k=c||j,R=h||A,O=p.useRef(null),H=p.useRef(null),te=p.useRef(v),X=f!=null,q=Of(f),U=Of(l),M=Of(b),B=p.useCallback(()=>{if(!O.current||!H.current)return;const W={placement:s,strategy:n,middleware:w};U.current&&(W.platform=U.current),$D(O.current,H.current,W).then(ae=>{const F={...ae,isPositioned:M.current!==!1};ee.current&&!ah(te.current,F)&&(te.current=F,Kd.flushSync(()=>{g(F)}))})},[w,s,n,U,M]);Um(()=>{b===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,g(W=>({...W,isPositioned:!1})))},[b]);const ee=p.useRef(!1);Um(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Um(()=>{if(k&&(O.current=k),R&&(H.current=R),k&&R){if(q.current)return q.current(k,R,B);B()}},[k,R,B,q,X]);const me=p.useMemo(()=>({reference:O,floating:H,setReference:E,setFloating:T}),[E,T]),J=p.useMemo(()=>({reference:k,floating:R}),[k,R]),fe=p.useMemo(()=>{const W={position:n,left:0,top:0};if(!J.floating)return W;const ae=qy(J.floating,v.x),F=qy(J.floating,v.y);return m?{...W,transform:"translate("+ae+"px, "+F+"px)",...Nw(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ae,top:F}},[n,m,J.floating,v.x,v.y]);return p.useMemo(()=>({...v,update:B,refs:me,elements:J,floatingStyles:fe}),[v,B,me,J,fe])}const VD=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:l}=typeof t=="function"?t(n):t;return i&&s(i)?i.current!=null?Wy({element:i.current,padding:l}).fn(n):{}:i?Wy({element:i,padding:l}).fn(n):{}}}},HD=(t,s)=>({...ID(t),options:[t,s]}),WD=(t,s)=>({...RD(t),options:[t,s]}),qD=(t,s)=>({...FD(t),options:[t,s]}),ZD=(t,s)=>({...MD(t),options:[t,s]}),GD=(t,s)=>({...OD(t),options:[t,s]}),KD=(t,s)=>({...LD(t),options:[t,s]}),XD=(t,s)=>({...VD(t),options:[t,s]});var YD="Arrow",Cw=p.forwardRef((t,s)=>{const{children:n,width:i=10,height:l=5,...c}=t;return e.jsx(gt.svg,{...c,ref:s,width:i,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Cw.displayName=YD;var QD=Cw;function hg(t){const[s,n]=p.useState(void 0);return As(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let h,m;if("borderBoxSize"in c){const f=c.borderBoxSize,b=Array.isArray(f)?f[0]:f;h=b.inlineSize,m=b.blockSize}else h=t.offsetWidth,m=t.offsetHeight;n({width:h,height:m})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),s}var pg="Popper",[_w,Ih]=vr(pg),[JD,Sw]=_w(pg),Aw=t=>{const{__scopePopper:s,children:n}=t,[i,l]=p.useState(null);return e.jsx(JD,{scope:s,anchor:i,onAnchorChange:l,children:n})};Aw.displayName=pg;var Pw="PopperAnchor",Ew=p.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:i,...l}=t,c=Sw(Pw,n),h=p.useRef(null),m=Wt(s,h),f=p.useRef(null);return p.useEffect(()=>{const b=f.current;f.current=i?.current||h.current,b!==f.current&&c.onAnchorChange(f.current)}),i?null:e.jsx(gt.div,{...l,ref:m})});Ew.displayName=Pw;var fg="PopperContent",[eI,tI]=_w(fg),kw=p.forwardRef((t,s)=>{const{__scopePopper:n,side:i="bottom",sideOffset:l=0,align:c="center",alignOffset:h=0,arrowPadding:m=0,avoidCollisions:f=!0,collisionBoundary:b=[],collisionPadding:v=0,sticky:g="partial",hideWhenDetached:w=!1,updatePositionStrategy:N="optimized",onPlaced:j,...S}=t,A=Sw(fg,n),[D,E]=p.useState(null),T=Wt(s,le=>E(le)),[k,R]=p.useState(null),O=hg(k),H=O?.width??0,te=O?.height??0,X=i+(c!=="center"?"-"+c:""),q=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},U=Array.isArray(b)?b:[b],M=U.length>0,B={padding:q,boundary:U.filter(sI),altBoundary:M},{refs:ee,floatingStyles:me,placement:J,isPositioned:fe,middlewareData:W}=UD({strategy:"fixed",placement:X,whileElementsMounted:(...le)=>DD(...le,{animationFrame:N==="always"}),elements:{reference:A.anchor},middleware:[HD({mainAxis:l+te,alignmentAxis:h}),f&&WD({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?qD():void 0,...B}),f&&ZD({...B}),GD({...B,apply:({elements:le,rects:ue,availableWidth:Fe,availableHeight:$e})=>{const{width:Ze,height:Ye}=ue.reference,Xe=le.floating.style;Xe.setProperty("--radix-popper-available-width",`${Fe}px`),Xe.setProperty("--radix-popper-available-height",`${$e}px`),Xe.setProperty("--radix-popper-anchor-width",`${Ze}px`),Xe.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),k&&XD({element:k,padding:m}),rI({arrowWidth:H,arrowHeight:te}),w&&KD({strategy:"referenceHidden",...B})]}),[ae,F]=Iw(J),$=Is(j);As(()=>{fe&&$?.()},[fe,$]);const Y=W.arrow?.x,Z=W.arrow?.y,K=W.arrow?.centerOffset!==0,[G,xe]=p.useState();return As(()=>{D&&xe(window.getComputedStyle(D).zIndex)},[D]),e.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:fe?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(eI,{scope:n,placedSide:ae,onArrowChange:R,arrowX:Y,arrowY:Z,shouldHideArrow:K,children:e.jsx(gt.div,{"data-side":ae,"data-align":F,...S,ref:T,style:{...S.style,animation:fe?void 0:"none"}})})})});kw.displayName=fg;var Tw="PopperArrow",nI={top:"bottom",right:"left",bottom:"top",left:"right"},Dw=p.forwardRef(function(s,n){const{__scopePopper:i,...l}=s,c=tI(Tw,i),h=nI[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(QD,{...l,ref:n,style:{...l.style,display:"block"}})})});Dw.displayName=Tw;function sI(t){return t!==null}var rI=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:i,middlewareData:l}=s,h=l.arrow?.centerOffset!==0,m=h?0:t.arrowWidth,f=h?0:t.arrowHeight,[b,v]=Iw(n),g={start:"0%",center:"50%",end:"100%"}[v],w=(l.arrow?.x??0)+m/2,N=(l.arrow?.y??0)+f/2;let j="",S="";return b==="bottom"?(j=h?g:`${w}px`,S=`${-f}px`):b==="top"?(j=h?g:`${w}px`,S=`${i.floating.height+f}px`):b==="right"?(j=`${-f}px`,S=h?g:`${N}px`):b==="left"&&(j=`${i.floating.width+f}px`,S=h?g:`${N}px`),{data:{x:j,y:S}}}});function Iw(t){const[s,n="center"]=t.split("-");return[s,n]}var Rw=Aw,Mw=Ew,Ow=kw,Lw=Dw,aI="Portal",Rh=p.forwardRef((t,s)=>{const{container:n,...i}=t,[l,c]=p.useState(!1);As(()=>c(!0),[]);const h=n||l&&globalThis?.document?.body;return h?Jb.createPortal(e.jsx(gt.div,{...i,ref:s}),h):null});Rh.displayName=aI;function iI(t){const s=oI(t),n=p.forwardRef((i,l)=>{const{children:c,...h}=i,m=p.Children.toArray(c),f=m.find(cI);if(f){const b=f.props.children,v=m.map(g=>g===f?p.Children.count(b)>1?p.Children.only(null):p.isValidElement(b)?b.props.children:null:g);return e.jsx(s,{...h,ref:l,children:p.isValidElement(b)?p.cloneElement(b,void 0,v):null})}return e.jsx(s,{...h,ref:l,children:c})});return n.displayName=`${t}.Slot`,n}function oI(t){const s=p.forwardRef((n,i)=>{const{children:l,...c}=n;if(p.isValidElement(l)){const h=uI(l),m=dI(c,l.props);return l.type!==p.Fragment&&(m.ref=i?Pi(i,h):h),p.cloneElement(l,m)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var lI=Symbol("radix.slottable");function cI(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lI}function dI(t,s){const n={...s};for(const i in s){const l=t[i],c=s[i];/^on[A-Z]/.test(i)?l&&c?n[i]=(...m)=>{const f=c(...m);return l(...m),f}:l&&(n[i]=l):i==="style"?n[i]={...l,...c}:i==="className"&&(n[i]=[l,c].filter(Boolean).join(" "))}return{...t,...n}}function uI(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var mI=Bx[" useInsertionEffect ".trim().toString()]||As;function Qr({prop:t,defaultProp:s,onChange:n=()=>{},caller:i}){const[l,c,h]=hI({defaultProp:s,onChange:n}),m=t!==void 0,f=m?t:l;{const v=p.useRef(t!==void 0);p.useEffect(()=>{const g=v.current;g!==m&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=m},[m,i])}const b=p.useCallback(v=>{if(m){const g=pI(v)?v(t):v;g!==t&&h.current?.(g)}else c(v)},[m,t,c,h]);return[f,b]}function hI({defaultProp:t,onChange:s}){const[n,i]=p.useState(t),l=p.useRef(n),c=p.useRef(s);return mI(()=>{c.current=s},[s]),p.useEffect(()=>{l.current!==n&&(c.current?.(n),l.current=n)},[n,l]),[n,i,c]}function pI(t){return typeof t=="function"}function xg(t){const s=p.useRef({value:t,previous:t});return p.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Fw=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),fI="VisuallyHidden",xI=p.forwardRef((t,s)=>e.jsx(gt.span,{...t,ref:s,style:{...Fw,...t.style}}));xI.displayName=fI;var gI=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},oc=new WeakMap,jm=new WeakMap,wm={},Lf=0,$w=function(t){return t&&(t.host||$w(t.parentNode))},vI=function(t,s){return s.map(function(n){if(t.contains(n))return n;var i=$w(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},yI=function(t,s,n,i){var l=vI(s,Array.isArray(t)?t:[t]);wm[n]||(wm[n]=new WeakMap);var c=wm[n],h=[],m=new Set,f=new Set(l),b=function(g){!g||m.has(g)||(m.add(g),b(g.parentNode))};l.forEach(b);var v=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(w){if(m.has(w))v(w);else try{var N=w.getAttribute(i),j=N!==null&&N!=="false",S=(oc.get(w)||0)+1,A=(c.get(w)||0)+1;oc.set(w,S),c.set(w,A),h.push(w),S===1&&j&&jm.set(w,!0),A===1&&w.setAttribute(n,"true"),j||w.setAttribute(i,"true")}catch(D){console.error("aria-hidden: cannot operate on ",w,D)}})};return v(s),m.clear(),Lf++,function(){h.forEach(function(g){var w=oc.get(g)-1,N=c.get(g)-1;oc.set(g,w),c.set(g,N),w||(jm.has(g)||g.removeAttribute(i),jm.delete(g)),N||g.removeAttribute(n)}),Lf--,Lf||(oc=new WeakMap,oc=new WeakMap,jm=new WeakMap,wm={})}},gg=function(t,s,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),l=gI(t);return l?(i.push.apply(i,Array.from(l.querySelectorAll("[aria-live], script"))),yI(i,l,n,"aria-hidden")):function(){return null}},Ba=function(){return Ba=Object.assign||function(s){for(var n,i=1,l=arguments.length;i<l;i++){n=arguments[i];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},Ba.apply(this,arguments)};function zw(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(n[i[l]]=t[i[l]]);return n}function bI(t,s,n){if(n||arguments.length===2)for(var i=0,l=s.length,c;i<l;i++)(c||!(i in s))&&(c||(c=Array.prototype.slice.call(s,0,i)),c[i]=s[i]);return t.concat(c||Array.prototype.slice.call(s))}var Vm="right-scroll-bar-position",Hm="width-before-scroll-bar",jI="with-scroll-bars-hidden",wI="--removed-body-scroll-bar-size";function Ff(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function NI(t,s){var n=p.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(i){var l=n.value;l!==i&&(n.value=i,n.callback(i,l))}}}})[0];return n.callback=s,n.facade}var CI=typeof window<"u"?p.useLayoutEffect:p.useEffect,Zy=new WeakMap;function _I(t,s){var n=NI(null,function(i){return t.forEach(function(l){return Ff(l,i)})});return CI(function(){var i=Zy.get(n);if(i){var l=new Set(i),c=new Set(t),h=n.current;l.forEach(function(m){c.has(m)||Ff(m,null)}),c.forEach(function(m){l.has(m)||Ff(m,h)})}Zy.set(n,t)},[t]),n}function SI(t){return t}function AI(t,s){s===void 0&&(s=SI);var n=[],i=!1,l={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var h=s(c,i);return n.push(h),function(){n=n.filter(function(m){return m!==h})}},assignSyncMedium:function(c){for(i=!0;n.length;){var h=n;n=[],h.forEach(c)}n={push:function(m){return c(m)},filter:function(){return n}}},assignMedium:function(c){i=!0;var h=[];if(n.length){var m=n;n=[],m.forEach(c),h=n}var f=function(){var v=h;h=[],v.forEach(c)},b=function(){return Promise.resolve().then(f)};b(),n={push:function(v){h.push(v),b()},filter:function(v){return h=h.filter(v),n}}}};return l}function PI(t){t===void 0&&(t={});var s=AI(null);return s.options=Ba({async:!0,ssr:!1},t),s}var Bw=function(t){var s=t.sideCar,n=zw(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=s.read();if(!i)throw new Error("Sidecar medium not found");return p.createElement(i,Ba({},n))};Bw.isSideCarExport=!0;function EI(t,s){return t.useMedium(s),Bw}var Uw=PI(),$f=function(){},Mh=p.forwardRef(function(t,s){var n=p.useRef(null),i=p.useState({onScrollCapture:$f,onWheelCapture:$f,onTouchMoveCapture:$f}),l=i[0],c=i[1],h=t.forwardProps,m=t.children,f=t.className,b=t.removeScrollBar,v=t.enabled,g=t.shards,w=t.sideCar,N=t.noRelative,j=t.noIsolation,S=t.inert,A=t.allowPinchZoom,D=t.as,E=D===void 0?"div":D,T=t.gapMode,k=zw(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=w,O=_I([n,s]),H=Ba(Ba({},k),l);return p.createElement(p.Fragment,null,v&&p.createElement(R,{sideCar:Uw,removeScrollBar:b,shards:g,noRelative:N,noIsolation:j,inert:S,setCallbacks:c,allowPinchZoom:!!A,lockRef:n,gapMode:T}),h?p.cloneElement(p.Children.only(m),Ba(Ba({},H),{ref:O})):p.createElement(E,Ba({},H,{className:f,ref:O}),m))});Mh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mh.classNames={fullWidth:Hm,zeroRight:Vm};var kI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function TI(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=kI();return s&&t.setAttribute("nonce",s),t}function DI(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function II(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var RI=function(){var t=0,s=null;return{add:function(n){t==0&&(s=TI())&&(DI(s,n),II(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},MI=function(){var t=RI();return function(s,n){p.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},Vw=function(){var t=MI(),s=function(n){var i=n.styles,l=n.dynamic;return t(i,l),null};return s},OI={left:0,top:0,right:0,gap:0},zf=function(t){return parseInt(t||"",10)||0},LI=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],i=s[t==="padding"?"paddingTop":"marginTop"],l=s[t==="padding"?"paddingRight":"marginRight"];return[zf(n),zf(i),zf(l)]},FI=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return OI;var s=LI(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,i-n+s[2]-s[0])}},$I=Vw(),vc="data-scroll-locked",zI=function(t,s,n,i){var l=t.left,c=t.top,h=t.right,m=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(jI,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(m,"px ").concat(i,`;
  }
  body[`).concat(vc,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(m,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(m,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vm,` {
    right: `).concat(m,"px ").concat(i,`;
  }
  
  .`).concat(Hm,` {
    margin-right: `).concat(m,"px ").concat(i,`;
  }
  
  .`).concat(Vm," .").concat(Vm,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Hm," .").concat(Hm,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(vc,`] {
    `).concat(wI,": ").concat(m,`px;
  }
`)},Gy=function(){var t=parseInt(document.body.getAttribute(vc)||"0",10);return isFinite(t)?t:0},BI=function(){p.useEffect(function(){return document.body.setAttribute(vc,(Gy()+1).toString()),function(){var t=Gy()-1;t<=0?document.body.removeAttribute(vc):document.body.setAttribute(vc,t.toString())}},[])},UI=function(t){var s=t.noRelative,n=t.noImportant,i=t.gapMode,l=i===void 0?"margin":i;BI();var c=p.useMemo(function(){return FI(l)},[l]);return p.createElement($I,{styles:zI(c,!s,l,n?"":"!important")})},Cx=!1;if(typeof window<"u")try{var Nm=Object.defineProperty({},"passive",{get:function(){return Cx=!0,!0}});window.addEventListener("test",Nm,Nm),window.removeEventListener("test",Nm,Nm)}catch{Cx=!1}var lc=Cx?{passive:!1}:!1,VI=function(t){return t.tagName==="TEXTAREA"},Hw=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!VI(t)&&n[s]==="visible")},HI=function(t){return Hw(t,"overflowY")},WI=function(t){return Hw(t,"overflowX")},Ky=function(t,s){var n=s.ownerDocument,i=s;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var l=Ww(t,i);if(l){var c=qw(t,i),h=c[1],m=c[2];if(h>m)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},qI=function(t){var s=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[s,n,i]},ZI=function(t){var s=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[s,n,i]},Ww=function(t,s){return t==="v"?HI(s):WI(s)},qw=function(t,s){return t==="v"?qI(s):ZI(s)},GI=function(t,s){return t==="h"&&s==="rtl"?-1:1},KI=function(t,s,n,i,l){var c=GI(t,window.getComputedStyle(s).direction),h=c*i,m=n.target,f=s.contains(m),b=!1,v=h>0,g=0,w=0;do{if(!m)break;var N=qw(t,m),j=N[0],S=N[1],A=N[2],D=S-A-c*j;(j||D)&&Ww(t,m)&&(g+=D,w+=j);var E=m.parentNode;m=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!f&&m!==document.body||f&&(s.contains(m)||s===m));return(v&&Math.abs(g)<1||!v&&Math.abs(w)<1)&&(b=!0),b},Cm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Xy=function(t){return[t.deltaX,t.deltaY]},Yy=function(t){return t&&"current"in t?t.current:t},XI=function(t,s){return t[0]===s[0]&&t[1]===s[1]},YI=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},QI=0,cc=[];function JI(t){var s=p.useRef([]),n=p.useRef([0,0]),i=p.useRef(),l=p.useState(QI++)[0],c=p.useState(Vw)[0],h=p.useRef(t);p.useEffect(function(){h.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(l));var S=bI([t.lockRef.current],(t.shards||[]).map(Yy),!0).filter(Boolean);return S.forEach(function(A){return A.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),S.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(l))})}}},[t.inert,t.lockRef.current,t.shards]);var m=p.useCallback(function(S,A){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!h.current.allowPinchZoom;var D=Cm(S),E=n.current,T="deltaX"in S?S.deltaX:E[0]-D[0],k="deltaY"in S?S.deltaY:E[1]-D[1],R,O=S.target,H=Math.abs(T)>Math.abs(k)?"h":"v";if("touches"in S&&H==="h"&&O.type==="range")return!1;var te=window.getSelection(),X=te&&te.anchorNode,q=X?X===O||X.contains(O):!1;if(q)return!1;var U=Ky(H,O);if(!U)return!0;if(U?R=H:(R=H==="v"?"h":"v",U=Ky(H,O)),!U)return!1;if(!i.current&&"changedTouches"in S&&(T||k)&&(i.current=R),!R)return!0;var M=i.current||R;return KI(M,A,S,M==="h"?T:k)},[]),f=p.useCallback(function(S){var A=S;if(!(!cc.length||cc[cc.length-1]!==c)){var D="deltaY"in A?Xy(A):Cm(A),E=s.current.filter(function(R){return R.name===A.type&&(R.target===A.target||A.target===R.shadowParent)&&XI(R.delta,D)})[0];if(E&&E.should){A.cancelable&&A.preventDefault();return}if(!E){var T=(h.current.shards||[]).map(Yy).filter(Boolean).filter(function(R){return R.contains(A.target)}),k=T.length>0?m(A,T[0]):!h.current.noIsolation;k&&A.cancelable&&A.preventDefault()}}},[]),b=p.useCallback(function(S,A,D,E){var T={name:S,delta:A,target:D,should:E,shadowParent:e4(D)};s.current.push(T),setTimeout(function(){s.current=s.current.filter(function(k){return k!==T})},1)},[]),v=p.useCallback(function(S){n.current=Cm(S),i.current=void 0},[]),g=p.useCallback(function(S){b(S.type,Xy(S),S.target,m(S,t.lockRef.current))},[]),w=p.useCallback(function(S){b(S.type,Cm(S),S.target,m(S,t.lockRef.current))},[]);p.useEffect(function(){return cc.push(c),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:w}),document.addEventListener("wheel",f,lc),document.addEventListener("touchmove",f,lc),document.addEventListener("touchstart",v,lc),function(){cc=cc.filter(function(S){return S!==c}),document.removeEventListener("wheel",f,lc),document.removeEventListener("touchmove",f,lc),document.removeEventListener("touchstart",v,lc)}},[]);var N=t.removeScrollBar,j=t.inert;return p.createElement(p.Fragment,null,j?p.createElement(c,{styles:YI(l)}):null,N?p.createElement(UI,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function e4(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const t4=EI(Uw,JI);var Oh=p.forwardRef(function(t,s){return p.createElement(Mh,Ba({},t,{ref:s,sideCar:t4}))});Oh.classNames=Mh.classNames;var n4=[" ","Enter","ArrowUp","ArrowDown"],s4=[" ","Enter"],xl="Select",[Lh,Fh,r4]=ag(xl),[Rc]=vr(xl,[r4,Ih]),$h=Ih(),[a4,Ao]=Rc(xl),[i4,o4]=Rc(xl),Zw=t=>{const{__scopeSelect:s,children:n,open:i,defaultOpen:l,onOpenChange:c,value:h,defaultValue:m,onValueChange:f,dir:b,name:v,autoComplete:g,disabled:w,required:N,form:j}=t,S=$h(s),[A,D]=p.useState(null),[E,T]=p.useState(null),[k,R]=p.useState(!1),O=Tc(b),[H,te]=Qr({prop:i,defaultProp:l??!1,onChange:c,caller:xl}),[X,q]=Qr({prop:h,defaultProp:m,onChange:f,caller:xl}),U=p.useRef(null),M=A?j||!!A.closest("form"):!0,[B,ee]=p.useState(new Set),me=Array.from(B).map(J=>J.props.value).join(";");return e.jsx(Rw,{...S,children:e.jsxs(a4,{required:N,scope:s,trigger:A,onTriggerChange:D,valueNode:E,onValueNodeChange:T,valueNodeHasChildren:k,onValueNodeHasChildrenChange:R,contentId:ga(),value:X,onValueChange:q,open:H,onOpenChange:te,dir:O,triggerPointerDownPosRef:U,disabled:w,children:[e.jsx(Lh.Provider,{scope:s,children:e.jsx(i4,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(J=>{ee(fe=>new Set(fe).add(J))},[]),onNativeOptionRemove:p.useCallback(J=>{ee(fe=>{const W=new Set(fe);return W.delete(J),W})},[]),children:n})}),M?e.jsxs(vN,{"aria-hidden":!0,required:N,tabIndex:-1,name:v,autoComplete:g,value:X,onChange:J=>q(J.target.value),disabled:w,form:j,children:[X===void 0?e.jsx("option",{value:""}):null,Array.from(B)]},me):null]})})};Zw.displayName=xl;var Gw="SelectTrigger",Kw=p.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:i=!1,...l}=t,c=$h(n),h=Ao(Gw,n),m=h.disabled||i,f=Wt(s,h.onTriggerChange),b=Fh(n),v=p.useRef("touch"),[g,w,N]=bN(S=>{const A=b().filter(T=>!T.disabled),D=A.find(T=>T.value===h.value),E=jN(A,S,D);E!==void 0&&h.onValueChange(E.value)}),j=S=>{m||(h.onOpenChange(!0),N()),S&&(h.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return e.jsx(Mw,{asChild:!0,...c,children:e.jsx(gt.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":yN(h.value)?"":void 0,...l,ref:f,onClick:tt(l.onClick,S=>{S.currentTarget.focus(),v.current!=="mouse"&&j(S)}),onPointerDown:tt(l.onPointerDown,S=>{v.current=S.pointerType;const A=S.target;A.hasPointerCapture(S.pointerId)&&A.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(j(S),S.preventDefault())}),onKeyDown:tt(l.onKeyDown,S=>{const A=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&w(S.key),!(A&&S.key===" ")&&n4.includes(S.key)&&(j(),S.preventDefault())})})})});Kw.displayName=Gw;var Xw="SelectValue",Yw=p.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:l,children:c,placeholder:h="",...m}=t,f=Ao(Xw,n),{onValueNodeHasChildrenChange:b}=f,v=c!==void 0,g=Wt(s,f.onValueNodeChange);return As(()=>{b(v)},[b,v]),e.jsx(gt.span,{...m,ref:g,style:{pointerEvents:"none"},children:yN(f.value)?e.jsx(e.Fragment,{children:h}):c})});Yw.displayName=Xw;var l4="SelectIcon",Qw=p.forwardRef((t,s)=>{const{__scopeSelect:n,children:i,...l}=t;return e.jsx(gt.span,{"aria-hidden":!0,...l,ref:s,children:i||""})});Qw.displayName=l4;var c4="SelectPortal",Jw=t=>e.jsx(Rh,{asChild:!0,...t});Jw.displayName=c4;var gl="SelectContent",eN=p.forwardRef((t,s)=>{const n=Ao(gl,t.__scopeSelect),[i,l]=p.useState();if(As(()=>{l(new DocumentFragment)},[]),!n.open){const c=i;return c?Kd.createPortal(e.jsx(tN,{scope:t.__scopeSelect,children:e.jsx(Lh.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(nN,{...t,ref:s})});eN.displayName=gl;var ma=10,[tN,Po]=Rc(gl),d4="SelectContentImpl",u4=iI("SelectContent.RemoveScroll"),nN=p.forwardRef((t,s)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:c,onPointerDownOutside:h,side:m,sideOffset:f,align:b,alignOffset:v,arrowPadding:g,collisionBoundary:w,collisionPadding:N,sticky:j,hideWhenDetached:S,avoidCollisions:A,...D}=t,E=Ao(gl,n),[T,k]=p.useState(null),[R,O]=p.useState(null),H=Wt(s,le=>k(le)),[te,X]=p.useState(null),[q,U]=p.useState(null),M=Fh(n),[B,ee]=p.useState(!1),me=p.useRef(!1);p.useEffect(()=>{if(T)return gg(T)},[T]),ig();const J=p.useCallback(le=>{const[ue,...Fe]=M().map(Ye=>Ye.ref.current),[$e]=Fe.slice(-1),Ze=document.activeElement;for(const Ye of le)if(Ye===Ze||(Ye?.scrollIntoView({block:"nearest"}),Ye===ue&&R&&(R.scrollTop=0),Ye===$e&&R&&(R.scrollTop=R.scrollHeight),Ye?.focus(),document.activeElement!==Ze))return},[M,R]),fe=p.useCallback(()=>J([te,T]),[J,te,T]);p.useEffect(()=>{B&&fe()},[B,fe]);const{onOpenChange:W,triggerPointerDownPosRef:ae}=E;p.useEffect(()=>{if(T){let le={x:0,y:0};const ue=$e=>{le={x:Math.abs(Math.round($e.pageX)-(ae.current?.x??0)),y:Math.abs(Math.round($e.pageY)-(ae.current?.y??0))}},Fe=$e=>{le.x<=10&&le.y<=10?$e.preventDefault():T.contains($e.target)||W(!1),document.removeEventListener("pointermove",ue),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",Fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",Fe,{capture:!0})}}},[T,W,ae]),p.useEffect(()=>{const le=()=>W(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[W]);const[F,$]=bN(le=>{const ue=M().filter(Ze=>!Ze.disabled),Fe=ue.find(Ze=>Ze.ref.current===document.activeElement),$e=jN(ue,le,Fe);$e&&setTimeout(()=>$e.ref.current.focus())}),Y=p.useCallback((le,ue,Fe)=>{const $e=!me.current&&!Fe;(E.value!==void 0&&E.value===ue||$e)&&(X(le),$e&&(me.current=!0))},[E.value]),Z=p.useCallback(()=>T?.focus(),[T]),K=p.useCallback((le,ue,Fe)=>{const $e=!me.current&&!Fe;(E.value!==void 0&&E.value===ue||$e)&&U(le)},[E.value]),G=i==="popper"?_x:sN,xe=G===_x?{side:m,sideOffset:f,align:b,alignOffset:v,arrowPadding:g,collisionBoundary:w,collisionPadding:N,sticky:j,hideWhenDetached:S,avoidCollisions:A}:{};return e.jsx(tN,{scope:n,content:T,viewport:R,onViewportChange:O,itemRefCallback:Y,selectedItem:te,onItemLeave:Z,itemTextRefCallback:K,focusSelectedItem:fe,selectedItemText:q,position:i,isPositioned:B,searchRef:F,children:e.jsx(Oh,{as:u4,allowPinchZoom:!0,children:e.jsx(Ph,{asChild:!0,trapped:E.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:tt(l,le=>{E.trigger?.focus({preventScroll:!0}),le.preventDefault()}),children:e.jsx(Ah,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:h,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:e.jsx(G,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:le=>le.preventDefault(),...D,...xe,onPlaced:()=>ee(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...D.style},onKeyDown:tt(D.onKeyDown,le=>{const ue=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!ue&&le.key.length===1&&$(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let $e=M().filter(Ze=>!Ze.disabled).map(Ze=>Ze.ref.current);if(["ArrowUp","End"].includes(le.key)&&($e=$e.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const Ze=le.target,Ye=$e.indexOf(Ze);$e=$e.slice(Ye+1)}setTimeout(()=>J($e)),le.preventDefault()}})})})})})})});nN.displayName=d4;var m4="SelectItemAlignedPosition",sN=p.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:i,...l}=t,c=Ao(gl,n),h=Po(gl,n),[m,f]=p.useState(null),[b,v]=p.useState(null),g=Wt(s,H=>v(H)),w=Fh(n),N=p.useRef(!1),j=p.useRef(!0),{viewport:S,selectedItem:A,selectedItemText:D,focusSelectedItem:E}=h,T=p.useCallback(()=>{if(c.trigger&&c.valueNode&&m&&b&&S&&A&&D){const H=c.trigger.getBoundingClientRect(),te=b.getBoundingClientRect(),X=c.valueNode.getBoundingClientRect(),q=D.getBoundingClientRect();if(c.dir!=="rtl"){const Ze=q.left-te.left,Ye=X.left-Ze,Xe=H.left-Ye,Je=H.width+Xe,ot=Math.max(Je,te.width),jt=window.innerWidth-ma,dt=yx(Ye,[ma,Math.max(ma,jt-ot)]);m.style.minWidth=Je+"px",m.style.left=dt+"px"}else{const Ze=te.right-q.right,Ye=window.innerWidth-X.right-Ze,Xe=window.innerWidth-H.right-Ye,Je=H.width+Xe,ot=Math.max(Je,te.width),jt=window.innerWidth-ma,dt=yx(Ye,[ma,Math.max(ma,jt-ot)]);m.style.minWidth=Je+"px",m.style.right=dt+"px"}const U=w(),M=window.innerHeight-ma*2,B=S.scrollHeight,ee=window.getComputedStyle(b),me=parseInt(ee.borderTopWidth,10),J=parseInt(ee.paddingTop,10),fe=parseInt(ee.borderBottomWidth,10),W=parseInt(ee.paddingBottom,10),ae=me+J+B+W+fe,F=Math.min(A.offsetHeight*5,ae),$=window.getComputedStyle(S),Y=parseInt($.paddingTop,10),Z=parseInt($.paddingBottom,10),K=H.top+H.height/2-ma,G=M-K,xe=A.offsetHeight/2,le=A.offsetTop+xe,ue=me+J+le,Fe=ae-ue;if(ue<=K){const Ze=U.length>0&&A===U[U.length-1].ref.current;m.style.bottom="0px";const Ye=b.clientHeight-S.offsetTop-S.offsetHeight,Xe=Math.max(G,xe+(Ze?Z:0)+Ye+fe),Je=ue+Xe;m.style.height=Je+"px"}else{const Ze=U.length>0&&A===U[0].ref.current;m.style.top="0px";const Xe=Math.max(K,me+S.offsetTop+(Ze?Y:0)+xe)+Fe;m.style.height=Xe+"px",S.scrollTop=ue-K+S.offsetTop}m.style.margin=`${ma}px 0`,m.style.minHeight=F+"px",m.style.maxHeight=M+"px",i?.(),requestAnimationFrame(()=>N.current=!0)}},[w,c.trigger,c.valueNode,m,b,S,A,D,c.dir,i]);As(()=>T(),[T]);const[k,R]=p.useState();As(()=>{b&&R(window.getComputedStyle(b).zIndex)},[b]);const O=p.useCallback(H=>{H&&j.current===!0&&(T(),E?.(),j.current=!1)},[T,E]);return e.jsx(p4,{scope:n,contentWrapper:m,shouldExpandOnScrollRef:N,onScrollButtonChange:O,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(gt.div,{...l,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});sN.displayName=m4;var h4="SelectPopperPosition",_x=p.forwardRef((t,s)=>{const{__scopeSelect:n,align:i="start",collisionPadding:l=ma,...c}=t,h=$h(n);return e.jsx(Ow,{...h,...c,ref:s,align:i,collisionPadding:l,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_x.displayName=h4;var[p4,vg]=Rc(gl,{}),Sx="SelectViewport",rN=p.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:i,...l}=t,c=Po(Sx,n),h=vg(Sx,n),m=Wt(s,c.onViewportChange),f=p.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Lh.Slot,{scope:n,children:e.jsx(gt.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:tt(l.onScroll,b=>{const v=b.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:w}=h;if(w?.current&&g){const N=Math.abs(f.current-v.scrollTop);if(N>0){const j=window.innerHeight-ma*2,S=parseFloat(g.style.minHeight),A=parseFloat(g.style.height),D=Math.max(S,A);if(D<j){const E=D+N,T=Math.min(j,E),k=E-T;g.style.height=T+"px",g.style.bottom==="0px"&&(v.scrollTop=k>0?k:0,g.style.justifyContent="flex-end")}}}f.current=v.scrollTop})})})]})});rN.displayName=Sx;var aN="SelectGroup",[f4,x4]=Rc(aN),iN=p.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,l=ga();return e.jsx(f4,{scope:n,id:l,children:e.jsx(gt.div,{role:"group","aria-labelledby":l,...i,ref:s})})});iN.displayName=aN;var oN="SelectLabel",lN=p.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,l=x4(oN,n);return e.jsx(gt.div,{id:l.id,...i,ref:s})});lN.displayName=oN;var ih="SelectItem",[g4,cN]=Rc(ih),dN=p.forwardRef((t,s)=>{const{__scopeSelect:n,value:i,disabled:l=!1,textValue:c,...h}=t,m=Ao(ih,n),f=Po(ih,n),b=m.value===i,[v,g]=p.useState(c??""),[w,N]=p.useState(!1),j=Wt(s,E=>f.itemRefCallback?.(E,i,l)),S=ga(),A=p.useRef("touch"),D=()=>{l||(m.onValueChange(i),m.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(g4,{scope:n,value:i,disabled:l,textId:S,isSelected:b,onItemTextChange:p.useCallback(E=>{g(T=>T||(E?.textContent??"").trim())},[]),children:e.jsx(Lh.ItemSlot,{scope:n,value:i,disabled:l,textValue:v,children:e.jsx(gt.div,{role:"option","aria-labelledby":S,"data-highlighted":w?"":void 0,"aria-selected":b&&w,"data-state":b?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...h,ref:j,onFocus:tt(h.onFocus,()=>N(!0)),onBlur:tt(h.onBlur,()=>N(!1)),onClick:tt(h.onClick,()=>{A.current!=="mouse"&&D()}),onPointerUp:tt(h.onPointerUp,()=>{A.current==="mouse"&&D()}),onPointerDown:tt(h.onPointerDown,E=>{A.current=E.pointerType}),onPointerMove:tt(h.onPointerMove,E=>{A.current=E.pointerType,l?f.onItemLeave?.():A.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:tt(h.onPointerLeave,E=>{E.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:tt(h.onKeyDown,E=>{f.searchRef?.current!==""&&E.key===" "||(s4.includes(E.key)&&D(),E.key===" "&&E.preventDefault())})})})})});dN.displayName=ih;var Id="SelectItemText",uN=p.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:l,...c}=t,h=Ao(Id,n),m=Po(Id,n),f=cN(Id,n),b=o4(Id,n),[v,g]=p.useState(null),w=Wt(s,D=>g(D),f.onItemTextChange,D=>m.itemTextRefCallback?.(D,f.value,f.disabled)),N=v?.textContent,j=p.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:N},f.value),[f.disabled,f.value,N]),{onNativeOptionAdd:S,onNativeOptionRemove:A}=b;return As(()=>(S(j),()=>A(j)),[S,A,j]),e.jsxs(e.Fragment,{children:[e.jsx(gt.span,{id:f.textId,...c,ref:w}),f.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Kd.createPortal(c.children,h.valueNode):null]})});uN.displayName=Id;var mN="SelectItemIndicator",hN=p.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return cN(mN,n).isSelected?e.jsx(gt.span,{"aria-hidden":!0,...i,ref:s}):null});hN.displayName=mN;var Ax="SelectScrollUpButton",pN=p.forwardRef((t,s)=>{const n=Po(Ax,t.__scopeSelect),i=vg(Ax,t.__scopeSelect),[l,c]=p.useState(!1),h=Wt(s,i.onScrollButtonChange);return As(()=>{if(n.viewport&&n.isPositioned){let m=function(){const b=f.scrollTop>0;c(b)};const f=n.viewport;return m(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[n.viewport,n.isPositioned]),l?e.jsx(xN,{...t,ref:h,onAutoScroll:()=>{const{viewport:m,selectedItem:f}=n;m&&f&&(m.scrollTop=m.scrollTop-f.offsetHeight)}}):null});pN.displayName=Ax;var Px="SelectScrollDownButton",fN=p.forwardRef((t,s)=>{const n=Po(Px,t.__scopeSelect),i=vg(Px,t.__scopeSelect),[l,c]=p.useState(!1),h=Wt(s,i.onScrollButtonChange);return As(()=>{if(n.viewport&&n.isPositioned){let m=function(){const b=f.scrollHeight-f.clientHeight,v=Math.ceil(f.scrollTop)<b;c(v)};const f=n.viewport;return m(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[n.viewport,n.isPositioned]),l?e.jsx(xN,{...t,ref:h,onAutoScroll:()=>{const{viewport:m,selectedItem:f}=n;m&&f&&(m.scrollTop=m.scrollTop+f.offsetHeight)}}):null});fN.displayName=Px;var xN=p.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:i,...l}=t,c=Po("SelectScrollButton",n),h=p.useRef(null),m=Fh(n),f=p.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return p.useEffect(()=>()=>f(),[f]),As(()=>{m().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[m]),e.jsx(gt.div,{"aria-hidden":!0,...l,ref:s,style:{flexShrink:0,...l.style},onPointerDown:tt(l.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(i,50))}),onPointerMove:tt(l.onPointerMove,()=>{c.onItemLeave?.(),h.current===null&&(h.current=window.setInterval(i,50))}),onPointerLeave:tt(l.onPointerLeave,()=>{f()})})}),v4="SelectSeparator",gN=p.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return e.jsx(gt.div,{"aria-hidden":!0,...i,ref:s})});gN.displayName=v4;var Ex="SelectArrow",y4=p.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,l=$h(n),c=Ao(Ex,n),h=Po(Ex,n);return c.open&&h.position==="popper"?e.jsx(Lw,{...l,...i,ref:s}):null});y4.displayName=Ex;var b4="SelectBubbleInput",vN=p.forwardRef(({__scopeSelect:t,value:s,...n},i)=>{const l=p.useRef(null),c=Wt(i,l),h=xg(s);return p.useEffect(()=>{const m=l.current;if(!m)return;const f=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(f,"value").set;if(h!==s&&v){const g=new Event("change",{bubbles:!0});v.call(m,s),m.dispatchEvent(g)}},[h,s]),e.jsx(gt.select,{...n,style:{...Fw,...n.style},ref:c,defaultValue:s})});vN.displayName=b4;function yN(t){return t===""||t===void 0}function bN(t){const s=Is(t),n=p.useRef(""),i=p.useRef(0),l=p.useCallback(h=>{const m=n.current+h;s(m),(function f(b){n.current=b,window.clearTimeout(i.current),b!==""&&(i.current=window.setTimeout(()=>f(""),1e3))})(m)},[s]),c=p.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,l,c]}function jN(t,s,n){const l=s.length>1&&Array.from(s).every(b=>b===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let h=j4(t,Math.max(c,0));l.length===1&&(h=h.filter(b=>b!==n));const f=h.find(b=>b.textValue.toLowerCase().startsWith(l.toLowerCase()));return f!==n?f:void 0}function j4(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var w4=Zw,N4=Kw,C4=Yw,_4=Qw,S4=Jw,A4=eN,P4=rN,E4=iN,k4=lN,T4=dN,D4=uN,I4=hN,R4=pN,M4=fN,O4=gN;function At({...t}){return e.jsx(w4,{"data-slot":"select",...t})}function L4({...t}){return e.jsx(E4,{"data-slot":"select-group",...t})}function Pt({...t}){return e.jsx(C4,{"data-slot":"select-value",...t})}function Et({className:t,size:s="default",children:n,...i}){return e.jsxs(N4,{"data-slot":"select-trigger","data-size":s,className:pt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,e.jsx(_4,{asChild:!0,children:e.jsx(eu,{className:"size-4 opacity-50"})})]})}function kt({className:t,children:s,position:n="popper",...i}){return e.jsx(S4,{children:e.jsxs(A4,{"data-slot":"select-content",className:pt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[e.jsx($4,{}),e.jsx(P4,{className:pt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(z4,{})]})})}function F4({className:t,...s}){return e.jsx(k4,{"data-slot":"select-label",className:pt("text-muted-foreground px-2 py-1.5 text-xs",t),...s})}function De({className:t,children:s,...n}){return e.jsxs(T4,{"data-slot":"select-item",className:pt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(I4,{children:e.jsx(Dr,{className:"size-4"})})}),e.jsx(D4,{children:s})]})}function Qy({className:t,...s}){return e.jsx(O4,{"data-slot":"select-separator",className:pt("bg-border pointer-events-none -mx-1 my-1 h-px",t),...s})}function $4({className:t,...s}){return e.jsx(R4,{"data-slot":"select-scroll-up-button",className:pt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Mj,{className:"size-4"})})}function z4({className:t,...s}){return e.jsx(M4,{"data-slot":"select-scroll-down-button",className:pt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(eu,{className:"size-4"})})}function B4(t,s){return p.useReducer((n,i)=>s[n][i]??n,t)}var Js=t=>{const{present:s,children:n}=t,i=U4(s),l=typeof n=="function"?n({present:i.isPresent}):p.Children.only(n),c=Wt(i.ref,V4(l));return typeof n=="function"||i.isPresent?p.cloneElement(l,{ref:c}):null};Js.displayName="Presence";function U4(t){const[s,n]=p.useState(),i=p.useRef(null),l=p.useRef(t),c=p.useRef("none"),h=t?"mounted":"unmounted",[m,f]=B4(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const b=_m(i.current);c.current=m==="mounted"?b:"none"},[m]),As(()=>{const b=i.current,v=l.current;if(v!==t){const w=c.current,N=_m(b);t?f("MOUNT"):N==="none"||b?.display==="none"?f("UNMOUNT"):f(v&&w!==N?"ANIMATION_OUT":"UNMOUNT"),l.current=t}},[t,f]),As(()=>{if(s){let b;const v=s.ownerDocument.defaultView??window,g=N=>{const S=_m(i.current).includes(CSS.escape(N.animationName));if(N.target===s&&S&&(f("ANIMATION_END"),!l.current)){const A=s.style.animationFillMode;s.style.animationFillMode="forwards",b=v.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=A)})}},w=N=>{N.target===s&&(c.current=_m(i.current))};return s.addEventListener("animationstart",w),s.addEventListener("animationcancel",g),s.addEventListener("animationend",g),()=>{v.clearTimeout(b),s.removeEventListener("animationstart",w),s.removeEventListener("animationcancel",g),s.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:p.useCallback(b=>{i.current=b?getComputedStyle(b):null,n(b)},[])}}function _m(t){return t?.animationName||"none"}function V4(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function H4(t){const s=W4(t),n=p.forwardRef((i,l)=>{const{children:c,...h}=i,m=p.Children.toArray(c),f=m.find(Z4);if(f){const b=f.props.children,v=m.map(g=>g===f?p.Children.count(b)>1?p.Children.only(null):p.isValidElement(b)?b.props.children:null:g);return e.jsx(s,{...h,ref:l,children:p.isValidElement(b)?p.cloneElement(b,void 0,v):null})}return e.jsx(s,{...h,ref:l,children:c})});return n.displayName=`${t}.Slot`,n}function W4(t){const s=p.forwardRef((n,i)=>{const{children:l,...c}=n;if(p.isValidElement(l)){const h=K4(l),m=G4(c,l.props);return l.type!==p.Fragment&&(m.ref=i?Pi(i,h):h),p.cloneElement(l,m)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var q4=Symbol("radix.slottable");function Z4(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===q4}function G4(t,s){const n={...s};for(const i in s){const l=t[i],c=s[i];/^on[A-Z]/.test(i)?l&&c?n[i]=(...m)=>{const f=c(...m);return l(...m),f}:l&&(n[i]=l):i==="style"?n[i]={...l,...c}:i==="className"&&(n[i]=[l,c].filter(Boolean).join(" "))}return{...t,...n}}function K4(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zh="Dialog",[wN,NN]=vr(zh),[X4,wa]=wN(zh),CN=t=>{const{__scopeDialog:s,children:n,open:i,defaultOpen:l,onOpenChange:c,modal:h=!0}=t,m=p.useRef(null),f=p.useRef(null),[b,v]=Qr({prop:i,defaultProp:l??!1,onChange:c,caller:zh});return e.jsx(X4,{scope:s,triggerRef:m,contentRef:f,contentId:ga(),titleId:ga(),descriptionId:ga(),open:b,onOpenChange:v,onOpenToggle:p.useCallback(()=>v(g=>!g),[v]),modal:h,children:n})};CN.displayName=zh;var _N="DialogTrigger",SN=p.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,l=wa(_N,n),c=Wt(s,l.triggerRef);return e.jsx(gt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":jg(l.open),...i,ref:c,onClick:tt(t.onClick,l.onOpenToggle)})});SN.displayName=_N;var yg="DialogPortal",[Y4,AN]=wN(yg,{forceMount:void 0}),PN=t=>{const{__scopeDialog:s,forceMount:n,children:i,container:l}=t,c=wa(yg,s);return e.jsx(Y4,{scope:s,forceMount:n,children:p.Children.map(i,h=>e.jsx(Js,{present:n||c.open,children:e.jsx(Rh,{asChild:!0,container:l,children:h})}))})};PN.displayName=yg;var oh="DialogOverlay",EN=p.forwardRef((t,s)=>{const n=AN(oh,t.__scopeDialog),{forceMount:i=n.forceMount,...l}=t,c=wa(oh,t.__scopeDialog);return c.modal?e.jsx(Js,{present:i||c.open,children:e.jsx(J4,{...l,ref:s})}):null});EN.displayName=oh;var Q4=H4("DialogOverlay.RemoveScroll"),J4=p.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,l=wa(oh,n);return e.jsx(Oh,{as:Q4,allowPinchZoom:!0,shards:[l.contentRef],children:e.jsx(gt.div,{"data-state":jg(l.open),...i,ref:s,style:{pointerEvents:"auto",...i.style}})})}),vl="DialogContent",kN=p.forwardRef((t,s)=>{const n=AN(vl,t.__scopeDialog),{forceMount:i=n.forceMount,...l}=t,c=wa(vl,t.__scopeDialog);return e.jsx(Js,{present:i||c.open,children:c.modal?e.jsx(eR,{...l,ref:s}):e.jsx(tR,{...l,ref:s})})});kN.displayName=vl;var eR=p.forwardRef((t,s)=>{const n=wa(vl,t.__scopeDialog),i=p.useRef(null),l=Wt(s,n.contentRef,i);return p.useEffect(()=>{const c=i.current;if(c)return gg(c)},[]),e.jsx(TN,{...t,ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tt(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:tt(t.onPointerDownOutside,c=>{const h=c.detail.originalEvent,m=h.button===0&&h.ctrlKey===!0;(h.button===2||m)&&c.preventDefault()}),onFocusOutside:tt(t.onFocusOutside,c=>c.preventDefault())})}),tR=p.forwardRef((t,s)=>{const n=wa(vl,t.__scopeDialog),i=p.useRef(!1),l=p.useRef(!1);return e.jsx(TN,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(i.current||n.triggerRef.current?.focus(),c.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(i.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const h=c.target;n.triggerRef.current?.contains(h)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),TN=p.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:c,...h}=t,m=wa(vl,n),f=p.useRef(null),b=Wt(s,f);return ig(),e.jsxs(e.Fragment,{children:[e.jsx(Ph,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:c,children:e.jsx(Ah,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":jg(m.open),...h,ref:b,onDismiss:()=>m.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(sR,{titleId:m.titleId}),e.jsx(aR,{contentRef:f,descriptionId:m.descriptionId})]})]})}),bg="DialogTitle",DN=p.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,l=wa(bg,n);return e.jsx(gt.h2,{id:l.titleId,...i,ref:s})});DN.displayName=bg;var IN="DialogDescription",RN=p.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,l=wa(IN,n);return e.jsx(gt.p,{id:l.descriptionId,...i,ref:s})});RN.displayName=IN;var MN="DialogClose",ON=p.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,l=wa(MN,n);return e.jsx(gt.button,{type:"button",...i,ref:s,onClick:tt(t.onClick,()=>l.onOpenChange(!1))})});ON.displayName=MN;function jg(t){return t?"open":"closed"}var LN="DialogTitleWarning",[nR,FN]=cT(LN,{contentName:vl,titleName:bg,docsSlug:"dialog"}),sR=({titleId:t})=>{const s=FN(LN),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},rR="DialogDescriptionWarning",aR=({contentRef:t,descriptionId:s})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${FN(rR).contentName}}.`;return p.useEffect(()=>{const l=t.current?.getAttribute("aria-describedby");s&&l&&(document.getElementById(s)||console.warn(i))},[i,t,s]),null},wg=CN,iR=SN,Ng=PN,nu=EN,Cg=kN,_g=DN,Sg=RN,Bh=ON;function Dn({...t}){return e.jsx(wg,{"data-slot":"dialog",...t})}function oR({...t}){return e.jsx(Ng,{"data-slot":"dialog-portal",...t})}const $N=p.forwardRef(({className:t,...s},n)=>e.jsx(nu,{ref:n,"data-slot":"dialog-overlay",className:pt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));$N.displayName=nu.displayName;function In({className:t,children:s,...n}){return e.jsxs(oR,{"data-slot":"dialog-portal",children:[e.jsx($N,{}),e.jsxs(Cg,{"data-slot":"dialog-content",className:pt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(Bh,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(pr,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Bn({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:pt("flex flex-col gap-2 text-center sm:text-left",t),...s})}function zN({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:pt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Un({className:t,...s}){return e.jsx(_g,{"data-slot":"dialog-title",className:pt("text-lg leading-none font-semibold",t),...s})}function _i({className:t,...s}){return e.jsx(Sg,{"data-slot":"dialog-description",className:pt("text-muted-foreground text-sm",t),...s})}const lR="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Jy(t){const[s,n]=p.useState(!1),i=()=>{n(!0)},{src:l,alt:c,style:h,className:m,...f}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${m??""}`,style:h,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:lR,alt:"Error loading image",...f,"data-original-url":l})})}):e.jsx("img",{src:l,alt:c,className:m,style:h,...f,onError:i})}function BN({mode:t="internal",token:s}){const[n,i]=p.useState(""),[l,c]=p.useState("all"),[h,m]=p.useState("all"),[f,b]=p.useState("all"),[v,g]=p.useState(!1),[w,N]=p.useState(""),[j,S]=p.useState(null),[A,D]=p.useState(!1),[E,T]=p.useState(null),k=p.useMemo(()=>j?.points??[],[j?.points]),R=j?.company??null,O=async()=>{try{if(D(!0),T(null),t==="public"){const $=(s||"").trim();if(!$){T("Link invlido: token ausente."),S(null);return}const Y=await ml.get("/public/media-kit",{params:{token:$}});S(Y.data);return}const F=await ke.get("/media-kit");S(F.data)}catch(F){const $=F?.response?.status===401?"Voc no tem permisso para acessar este Mdia Kit.":"No foi possvel carregar o Mdia Kit.";T($),S(null)}finally{D(!1)}};p.useEffect(()=>{O()},[t,s]);const H=p.useMemo(()=>{const F=new Set(k.map($=>$.addressCity).filter(Boolean));return Array.from(F).sort()},[k]),te=p.useMemo(()=>{let F=[...k];if(l!=="all"&&(F=F.filter($=>$.type===l)),h!=="all"&&(F=F.filter($=>$.addressCity===h)),f!=="all"&&(F=F.filter($=>{const Y=$.availability??"Disponvel";return f==="Disponvel"?Y==="Disponvel"||Y==="Parcial":Y===f})),n.trim()){const $=n.toLowerCase();F=F.filter(Y=>Y.name.toLowerCase().includes($)||Y.addressCity?.toLowerCase().includes($)||Y.addressStreet?.toLowerCase().includes($)||Y.addressDistrict?.toLowerCase().includes($))}return F},[k,l,h,f,n]),X=p.useMemo(()=>{if(j?.stats)return j.stats;const F=k.length,$=k.reduce((K,G)=>K+(G.unitsCount??0),0),Y=k.reduce((K,G)=>K+(G.dailyImpressions||0),0);return{pointsCount:F,totalUnits:$,totalImpressions:Y,totalImpressionsFormatted:(K=>K>=1e6?`${(K/1e6).toFixed(1)}M+`:K>=1e3?`${Math.floor(K/1e3)}k+`:K.toString())(Y)}},[j?.stats,k]),q=F=>{if(F.latitude&&F.longitude){const $=`https://www.google.com/maps?q=${F.latitude},${F.longitude}`;window.open($,"_blank")}else Ie.info("Coordenadas GPS no cadastradas para este ponto de mdia.")},U=F=>{try{const $=document.createElement("textarea");$.value=F,$.style.position="fixed",$.style.left="-999999px",$.style.top="-999999px",document.body.appendChild($),$.focus(),$.select();const Y=document.execCommand("copy");return document.body.removeChild($),Y}catch{return!1}},M=async()=>{if(w)return w;try{const F=await ke.get("/media-kit/share-link"),$=`${window.location.origin}/mk?token=${encodeURIComponent(F.data.token)}`;return N($),$}catch{return Ie.error("No foi possvel gerar o link pblico do Mdia Kit."),""}},B=async()=>{g(!0),await M()},ee=async()=>{const F=await M();F&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(F).then(()=>{Ie.success("Link do Mdia Kit copiado para a rea de transferncia!"),g(!1)}).catch(()=>{U(F)?(Ie.success("Link do Mdia Kit copiado para a rea de transferncia!"),g(!1)):Ie.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")}):U(F)?(Ie.success("Link do Mdia Kit copiado para a rea de transferncia!"),g(!1)):Ie.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)"))},me=R?.name||"Mdia Kit",J=R?.addressCity||R?.addressState?`${R?.addressCity??""}${R?.addressState?`, ${R.addressState}`:""}`:"",fe=R?.phone||"(11) 3000-0000",W=R?.email||"contato@oohmanager.com",ae=R?.site||"";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-white",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-lg flex items-center justify-center overflow-hidden",children:R?.logoUrl?e.jsx(Jy,{src:R.logoUrl,alt:R.name,className:"w-full h-full object-cover"}):e.jsx(zA,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900",children:me}),e.jsx("p",{className:"text-gray-600",children:J})]})]}),t==="internal"&&e.jsxs(ne,{className:"gap-2",onClick:B,children:[e.jsx(Zj,{className:"w-4 h-4"}),"Compartilhar"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-12",children:A?e.jsx(Ue,{className:"mb-12",children:e.jsx(Ve,{className:"pt-12 pb-12 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Carregando Mdia Kit"})})}):E?e.jsx(Ue,{className:"mb-12",children:e.jsxs(Ve,{className:"pt-12 pb-12 text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:E}),e.jsx(ne,{variant:"outline",onClick:O,children:"Tentar novamente"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-gray-900 mb-6",children:"Nossos Nmeros"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-1",children:X.pointsCount}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Pontos de Mdia"})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-1",children:X.totalUnits}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Faces/Telas"})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-1",children:X.totalImpressionsFormatted}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Impactos/Dia"})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-1",children:"Desde 2015"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"No Mercado"})]})})]})]}),e.jsx(Ue,{className:"mb-8",children:e.jsx(Ve,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{placeholder:"Buscar por nome, cidade ou endereo...",className:"pl-10",value:n,onChange:F=>i(F.target.value)})]}),e.jsxs(At,{value:l,onValueChange:F=>c(F),children:[e.jsx(Et,{className:"w-full lg:w-40",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos os tipos"}),e.jsx(De,{value:en.OOH,children:"OOH"}),e.jsx(De,{value:en.DOOH,children:"DOOH"})]})]}),e.jsxs(At,{value:h,onValueChange:F=>m(F),children:[e.jsx(Et,{className:"w-full lg:w-40",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todas as cidades"}),H.map(F=>e.jsx(De,{value:F,children:F},F))]})]}),e.jsxs(At,{value:f,onValueChange:F=>b(F),children:[e.jsx(Et,{className:"w-full lg:w-40",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos"}),e.jsx(De,{value:"Disponvel",children:"Disponvel"}),e.jsx(De,{value:"Parcial",children:"Parcial"}),e.jsx(De,{value:"Ocupado",children:"Ocupado"})]})]})]})})}),te.length===0?e.jsx(Ue,{className:"mb-12",children:e.jsx(Ve,{className:"pt-12 pb-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum ponto de mdia encontrado com os filtros selecionados."})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:te.map(F=>{const $=F.unitsCount??F.units?.length??0,Y=F.occupiedUnitsCount??0,Z=F.availableUnitsCount??Math.max($-Y,0),K=F.availability??(Z>0?"Disponvel":"Ocupado"),G=$>0?Y/$:0;return e.jsxs(Ue,{className:"overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[e.jsx(Jy,{src:F.mainImageUrl||"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800",alt:F.name,className:"w-full h-full object-cover"}),e.jsx(ht,{className:`absolute top-3 right-3 ${K==="Disponvel"?"bg-green-500":K==="Parcial"?"bg-amber-500":"bg-orange-500"}`,children:K==="Parcial"&&$>0?`Parcial (${Y}/${$})`:K}),e.jsx(ht,{className:"absolute top-3 left-3 bg-indigo-500",children:F.type})]}),e.jsxs(Ve,{className:"pt-4",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:F.name}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ci,{className:"w-4 h-4"}),e.jsxs("span",{children:[F.addressCity,", ",F.addressState]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Faces/Telas"}),e.jsx("span",{className:"text-gray-900",children:$})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Disponveis"}),e.jsx("span",{className:"text-gray-900",children:Z})]}),$>0&&e.jsxs("div",{className:"pt-2",children:[e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-500",style:{width:Math.min(G*100,100).toFixed(0)+"%"}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[Y," ocupadas"]}),e.jsxs("span",{children:[Z," livres"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impacto/Dia"}),e.jsx("span",{className:"text-gray-900",children:F.dailyImpressions?`${Math.floor(F.dailyImpressions/1e3)}k`:""})]}),F.environment&&e.jsx(ht,{variant:"outline",className:"text-xs",children:F.environment})]}),e.jsx("div",{className:"border-t border-gray-100 pt-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1",children:"Semanal"}),e.jsx("p",{className:"text-gray-900 text-sm",children:F.basePriceWeek!=null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(F.basePriceWeek):""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1",children:"Mensal"}),e.jsx("p",{className:"text-gray-900 text-sm",children:F.basePriceMonth!=null?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(F.basePriceMonth):""})]})]})}),e.jsxs(ne,{variant:"outline",className:"w-full gap-2",onClick:()=>q(F),children:[e.jsx(Za,{className:"w-4 h-4"}),"Ver no Mapa"]})]})]},F.id)})}),e.jsx(Ue,{className:"bg-indigo-600 text-white",children:e.jsx(Ve,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:"text-white mb-4",children:"Entre em Contato"}),e.jsx("p",{className:"text-indigo-100 mb-6",children:"Interessado em algum ponto de mdia? Fale conosco!"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-indigo-100",children:""}),e.jsx("span",{children:fe})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-indigo-100",children:""}),e.jsx("span",{children:W})]}),ae&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-indigo-100",children:""}),e.jsx("span",{children:ae})]})]})]})})})]})}),t==="internal"&&e.jsx(Dn,{open:v,onOpenChange:g,children:e.jsxs(In,{children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:"Compartilhar Mdia Kit"}),e.jsx(_i,{children:"Compartilhe o link pblico do Mdia Kit com seus clientes."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{readOnly:!0,value:w||"Gerando link...",className:"flex-1"}),e.jsxs(ne,{onClick:ee,className:"gap-2",disabled:!w,children:[e.jsx(Wa,{className:"w-4 h-4"}),"Copiar"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Este link permite que qualquer pessoa visualize seu portflio de pontos de mdia."})]})]})})]})}function cR(){const t=new URLSearchParams(window.location.search),s=t.get("token")||t.get("t")||void 0;return e.jsx(BN,{mode:"public",token:s||void 0})}const dR=[{id:"dashboard",label:"Dashboard",icon:Bj},{id:"inventory",label:"Inventrio",icon:Ci},{id:"mediamap",label:"Mdia Map",icon:UP},{id:"clients",label:"Clientes",icon:Yx},{id:"products",label:"Produtos/Servios",icon:fc},{id:"proposals",label:"Propostas",icon:gr},{id:"campaigns",label:"Campanhas",icon:Hj},{id:"reservations",label:"Reservas",icon:Ud},{id:"financial",label:"Financeiro",icon:Sh},{id:"messages",label:"Mensagens",icon:KP},{id:"mediakit",label:"Mdia Kit",icon:$j},{id:"activities",label:"Atividades",icon:Rj},{id:"settings",label:"Configuraes",icon:qj}];function eb({currentPage:t,onNavigate:s,isSuperAdmin:n,isMobile:i=!1}){const{company:l,subscription:c,pointsLimit:h,daysRemainingInTrial:m}=So();return e.jsxs("div",{className:"w-64 md:w-64 bg-white border-r border-gray-200 flex flex-col h-full overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h1",{className:"text-indigo-600",children:"OneMedia"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gesto de Mdia Exterior"})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[dR.map(f=>{const b=f.icon,v=t===f.id;return e.jsxs("button",{onClick:()=>s(f.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${v?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(b,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:f.label})]},f.id)}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-t border-gray-200"}),e.jsxs("button",{onClick:()=>s("superadmin"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${t==="superadmin"?"bg-red-50 text-red-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Hd,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Super Admin"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-indigo-900 text-sm",children:"Plano Atual"}),e.jsxs("p",{className:"text-indigo-600 mt-1",children:["At ",h," pontos"]}),m!==null&&e.jsxs("p",{className:"text-gray-600 text-xs mt-2",children:[m," dias de teste restantes"]}),c&&e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:nk(c.maxOwnersPerMediaPoint)})]})})]})}function tb(t){if(!t)return"Erro inesperado";if(typeof t=="string")return t;if(t instanceof Error)return t.message||"Erro inesperado";const s=t;if(typeof s?.message=="string"&&s.message.trim())return s.message.trim();try{return JSON.stringify(t)}catch{return"Erro inesperado"}}function Ks(t){const{enabled:s,mode:n,deps:i,fetcher:l,computeMock:c,mockDelayMs:h=220,fallbackToMock:m=!0}=t,[f,b]=p.useState(0),[v,g]=p.useState({status:s?"loading":"idle",data:void 0,errorMessage:void 0,source:n==="backend"?"backend":"mock"}),w=p.useMemo(()=>n==="backend"?"backend":"mock",[n]);return p.useEffect(()=>{if(!s){g({status:"idle",data:void 0,errorMessage:void 0,source:w});return}g(A=>({...A,status:"loading",errorMessage:void 0,source:w}));const N=new AbortController;let j;return(async()=>{try{if(n==="backend"){if(!l)throw new Error("Fetcher no configurado para modo backend");const D=await l(N.signal);if(N.signal.aborted)return;g({status:"ready",data:D,errorMessage:void 0,source:"backend"});return}if(await new Promise(D=>{j=window.setTimeout(()=>D(),h)}),N.signal.aborted)return;const A=c();if(N.signal.aborted)return;g({status:"ready",data:A,errorMessage:void 0,source:"mock"})}catch(A){if(N.signal.aborted)return;if(n==="backend"&&m)try{const E=c();g({status:"ready",data:E,errorMessage:void 0,source:"mock-fallback"});return}catch(E){const T=tb(E);g({status:"error",data:void 0,errorMessage:T,source:"backend"});return}const D=tb(A);g({status:"error",data:void 0,errorMessage:D,source:w})}})(),()=>{N.abort(),j&&window.clearTimeout(j)}},[s,n,f,w,...i]),{...v,refetch:()=>b(N=>N+1)}}const uR=import.meta?.env?.VITE_API_BASE_URL??"";function mR(t,s){const n=(t||"").replace(/\/$/,""),i=(s||"").startsWith("/")?s:`/${s}`;return`${n}${i}`}async function hR(t){try{return await t.text()}catch{return""}}function pR(t,s){let n=`Erro HTTP ${t}`,i;const l=(s||"").trim();if(l)try{const c=JSON.parse(l);i=c,typeof c?.message=="string"&&c.message.trim()?n=c.message.trim():typeof c?.error=="string"&&c.error.trim()&&(n=c.error.trim())}catch{n=l.length>200?`${l.slice(0,200)}...`:l}return{status:t,message:n,details:i}}async function Xs(t,s,n){const i=mR(uR,t)+(s?`?${s}`:""),l=await fetch(i,{method:"GET",credentials:"include",headers:{Accept:"application/json",...n?.headers||{}},signal:n?.signal});if(!l.ok){const c=await hR(l);throw pR(l.status,c)}if(l.status!==204)return await l.json()}const Bf=import.meta?.env?.VITE_DASHBOARD_DATA_MODE==="backend"?"backend":"mock",Wm=20,Bt={overview:"/api/dashboard/overview",funnel:"/api/dashboard/funnel",alerts:"/api/dashboard/alerts",drilldown:"/api/dashboard/drilldown",commercialSummary:"/api/dashboard/commercial/summary",stalledProposals:"/api/dashboard/proposals/stalled",sellerRanking:"/api/dashboard/commercial/sellers/ranking",revenueTimeseries:"/api/dashboard/revenue/timeseries",cashflowTimeseries:"/api/dashboard/cashflow/timeseries",topClients:"/api/dashboard/top/clients",receivablesAgingSummary:"/api/dashboard/receivables/aging/summary",oohOpsSummary:"/api/dashboard/ooh/ops/summary",doohProofOfPlaySummary:"/api/dashboard/dooh/proof-of-play/summary",inventoryMap:"/api/dashboard/inventory/map",inventoryRanking:"/api/dashboard/inventory/ranking"};function Yt(t){return((t??0)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function bs(t){let s=2166136261;for(let n=0;n<t.length;n++)s^=t.charCodeAt(n),s=Math.imul(s,16777619);return Math.abs(s)}function bi(t,s,n){return Math.max(s,Math.min(n,t))}function Uf(t,s=10){const n=[];let i=t%40+20;for(let l=0;l<s;l++){const c=(t+l*97)%11-5;i=bi(i+c,5,95),n.push(i)}return n}function Gr(t){return(t||"").trim().toLowerCase()}function Fa(t,s){const n=Gr(t),i=Gr(s);return i?n.includes(i):!0}function fR(t){const s=new Set,n=[];for(const i of t)s.has(i.id)||(s.add(i.id),n.push(i));return n}function ys(t,s){return s==="id"?t.id:s==="title"?t.title:s==="subtitle"?t.subtitle:s==="status"?t.status:s==="amountCents"?t.amountCents:t.fields?t.fields[s]:void 0}function ms(t,s){if(t==null)return"";if(s==="currency")return Yt(Number(t)||0);if(s==="percent")return`${Math.round(Number(t)||0)}%`;if(s==="datetime"){const n=Date.parse(String(t));return Number.isFinite(n)?new Date(n).toLocaleString("pt-BR"):String(t)}if(s==="date"){const n=Date.parse(String(t));return Number.isFinite(n)?new Date(n).toLocaleDateString("pt-BR"):String(t)}return String(t)}function La(t){try{return new Date(t).toLocaleDateString("pt-BR")}catch{return t}}function nb(t){const s=t.map(c=>(c?.valueCents??0)/100),n=Math.max(...s,1),i=Math.min(...s,0),l=Math.max(1,n-i);return s.map(c=>{const h=(c-i)/l*90+5;return Math.round(bi(h,5,95))})}function xR(t){const s=[],n=[];return t.query&&(s.push(`busca "${t.query}"`),n.push("Limpe o campo de busca.")),t.city&&(s.push(`cidade/regio "${t.city}"`),n.push("Remova o filtro de cidade/regio.")),t.mediaType&&t.mediaType!=="ALL"&&(s.push(`tipo ${t.mediaType}`),n.push("Tente alternar para OOH + DOOH.")),s.length?{hint:`Com os filtros atuais (${s.join(", ")}), no encontramos resultados.`,suggestions:n}:{hint:void 0,suggestions:void 0}}function gR(t,s){const n=(s||"").trim(),i=xR(t),l=[];return n&&l.push(n.replace(/\.*$/,"")),i.hint&&l.push(i.hint),i.suggestions&&i.suggestions.length&&l.push(`Sugestes: ${i.suggestions.join(" ")}`),l.filter(Boolean).join(" ")}function va(t){const s=String(t??"");return/([\n\r";,])/.test(s)?`"${s.replace(/"/g,'""')}"`:s}function Uh(t,s,n="text/plain;charset=utf-8"){const i=new Blob([s],{type:n}),l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=t,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(l)}function tl(t,s,n){const i=(n||[{id:"id",label:"id",get:f=>f.id},{id:"title",label:"item",get:f=>f.title},{id:"subtitle",label:"cidade",get:f=>f.subtitle},{id:"status",label:"status",get:f=>f.status},{id:"amountCents",label:"valor",get:f=>f.amountCents}]).filter(f=>f.csv!==!1),c=[i.map(f=>f.label).map(va).join(";")];for(const f of s){const b=i.map(v=>{const g=v.get(f);return v.id==="amountCents"?ms(g,"currency"):v.id.toLowerCase().includes("percent")?ms(g,"percent"):v.id==="lastSeen"?ms(g,"datetime"):v.id==="dueDate"?ms(g,"date"):ms(g)});c.push(b.map(va).join(";"))}const m=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"drilldown"}.csv`;Uh(m,c.join(`
`),"text/csv;charset=utf-8"),Ie.success("CSV exportado",{description:m})}function vR(t,s,n){const l=[["bucket","amount","total"].join(";")];for(const m of s)l.push([va(m.label),va(Yt(m.amountCents)),va(typeof n=="number"?Yt(n):"")].join(";"));const h=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"dashboard"}_aging.csv`;Uh(h,l.join(`
`),"text/csv;charset=utf-8"),Ie.success("CSV exportado (mock)",{description:h})}function sb(t,s){const i=[["date","value"].join(";")];for(const h of s)i.push([va(h.date),va(Yt(h.valueCents))].join(";"));const c=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"dashboard"}.csv`;Uh(c,i.join(`
`),"text/csv;charset=utf-8"),Ie.success("CSV exportado",{description:c})}function Sm(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function yR(){return Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(s=>{if(s.tagName.toLowerCase()==="style")return`<style>${s.textContent||""}</style>`;const i=s.href;return i?`<link rel="stylesheet" href="${i}">`:""}).join(`
`)}function bR(){return`
    @page { size: A4; margin: 12mm; }
    html, body { background: white !important; }
    [data-no-print], .no-print, .backend-hint { display: none !important; }
    .print-avoid-break { break-inside: avoid; page-break-inside: avoid; }
    .print-header { display:flex; justify-content:space-between; align-items:flex-start; gap:16px; }
    .print-title { font-size: 16px; font-weight: 700; margin: 0; }
    .print-subtitle { font-size: 12px; color: #6b7280; margin: 4px 0 0 0; }
    .print-meta { margin-top: 10px; display:flex; flex-wrap:wrap; gap:8px; }
    .print-pill { font-size: 11px; color:#374151; background:#f3f4f6; padding:6px 10px; border-radius: 9999px; }
    .print-pill span { color:#6b7280; }
    .print-separator { height: 1px; background:#e5e7eb; margin: 12px 0; }
  `}function jR(t,s){const n=window.open("","_blank","noopener,noreferrer");return n?(n.document.open(),n.document.write(t),n.document.close(),n.document.title=s,n):(Ie.error("No foi possvel abrir a janela de impresso. Verifique o bloqueador de pop-ups."),null)}function wR({title:t,subtitle:s,meta:n,contentHtml:i}){const l=yR(),c=bR(),h=(n||[]).filter(b=>b.value).map(b=>`<div class="print-pill"><span>${Sm(b.label)}:</span> ${Sm(b.value)}</div>`).join(""),m=`
    <!doctype html>
    <html>
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        ${l}
        <style>${c}</style>
      </head>
      <body>
        <div>
          <div class="print-header">
            <div>
              <h1 class="print-title">${Sm(t)}</h1>
              ${s?`<p class="print-subtitle">${Sm(s)}</p>`:""}
            </div>
          </div>
          ${h?`<div class="print-meta">${h}</div>`:""}
          <div class="print-separator"></div>
          ${i}
        </div>
        <script>
          window.addEventListener('load', () => {
            setTimeout(() => window.print(), 50);
          });
        <\/script>
      </body>
    </html>
  `;jR(m,t)&&Ie.success("Abrindo impresso (PDF)...")}function rb({element:t,title:s,subtitle:n,meta:i}){const l=`<div>${t.outerHTML}</div>`;wR({title:s,subtitle:n,meta:i,contentHtml:l})}function Vf(t){const s={id:"amountCents",label:"Valor",align:"right",sortable:!0,sortKey:"amountCents",get:i=>i.amountCents,render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"currency")})},n={defaultSort:{by:"amountCents",dir:"desc"},columns:[{id:"id",label:"ID",sortable:!0,sortKey:"id",get:i=>i.id},{id:"title",label:"Item",sortable:!0,sortKey:"title",get:i=>i.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:i=>i.subtitle},{id:"status",label:"Status",sortable:!0,sortKey:"status",get:i=>i.status},s]};if(!t)return n;switch(t){case"topClients":return{defaultSort:{by:"amountCents",dir:"desc"},rowAction:{label:"Abrir Comercial",page:"proposals"},columns:[{id:"title",label:"Cliente",sortable:!0,sortKey:"title",get:i=>i.title},{id:"campaignsCount",label:"Campanhas",align:"right",sortable:!0,sortKey:"campaignsCount",get:i=>ys(i,"campaignsCount"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i)})},s]};case"inventoryRanking":return{defaultSort:{by:"occupancyPercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ponto",sortable:!0,sortKey:"title",get:i=>i.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:i=>i.subtitle},{id:"occupancyPercent",label:"Ocupao",align:"right",sortable:!0,sortKey:"occupancyPercent",get:i=>ys(i,"occupancyPercent"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"percent")})},{id:"activeCampaigns",label:"Campanhas",align:"right",sortable:!0,sortKey:"activeCampaigns",get:i=>ys(i,"activeCampaigns"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i)})},{id:"revenueCents",label:"Receita",align:"right",sortable:!0,sortKey:"revenueCents",get:i=>ys(i,"revenueCents")??i.amountCents,render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"currency")})}]};case"inventoryPin":return{defaultSort:{by:"endsAt",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ativo",sortable:!0,sortKey:"title",get:i=>i.title},{id:"subtitle",label:"Campanha",sortable:!0,sortKey:"subtitle",get:i=>i.subtitle},{id:"region",label:"Regio",sortable:!0,sortKey:"region",get:i=>ys(i,"region")},{id:"line",label:"Linha",sortable:!0,sortKey:"line",get:i=>ys(i,"line")},{id:"startsAt",label:"Incio",sortable:!0,sortKey:"startsAt",get:i=>ys(i,"startsAt"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"date")})},{id:"endsAt",label:"Fim",sortable:!0,sortKey:"endsAt",get:i=>ys(i,"endsAt"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"date")})},{id:"status",label:"Status",sortable:!0,sortKey:"status",get:i=>i.status},s]};case"inventoryRegionLine":return{defaultSort:{by:"occupancyPercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ponto",sortable:!0,sortKey:"title",get:i=>i.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:i=>i.subtitle},{id:"region",label:"Regio",sortable:!0,sortKey:"region",get:i=>ys(i,"region")},{id:"line",label:"Linha",sortable:!0,sortKey:"line",get:i=>ys(i,"line")},{id:"occupancyPercent",label:"Ocupao",align:"right",sortable:!0,sortKey:"occupancyPercent",get:i=>ys(i,"occupancyPercent"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"percent")})},{id:"activeCampaigns",label:"Campanhas",align:"right",sortable:!0,sortKey:"activeCampaigns",get:i=>ys(i,"activeCampaigns"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i)})},{id:"revenueCents",label:"Receita",align:"right",sortable:!0,sortKey:"revenueCents",get:i=>ys(i,"revenueCents")??i.amountCents,render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"currency")})}]};case"receivablesOverdue":return{defaultSort:{by:"dueDate",dir:"asc"},rowAction:{label:"Abrir Financeiro",page:"financial"},columns:[{id:"title",label:"Fatura",sortable:!0,sortKey:"title",get:i=>i.title},{id:"subtitle",label:"Cliente",sortable:!0,sortKey:"subtitle",get:i=>i.subtitle},{id:"dueDate",label:"Vencimento",sortable:!0,sortKey:"dueDate",get:i=>ys(i,"dueDate"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"date")})},s]};case"proofOfPlay":return{defaultSort:{by:"uptimePercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Tela",sortable:!0,sortKey:"title",get:i=>i.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:i=>i.subtitle},{id:"uptimePercent",label:"Uptime",align:"right",sortable:!0,sortKey:"uptimePercent",get:i=>ys(i,"uptimePercent"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"percent")})},{id:"plays",label:"Plays",align:"right",sortable:!0,sortKey:"plays",get:i=>ys(i,"plays"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i)})},{id:"lastSeen",label:"ltima",sortable:!0,sortKey:"lastSeen",get:i=>ys(i,"lastSeen"),render:i=>e.jsx("span",{className:"tabular-nums",children:ms(i,"datetime")})}]};case"aging":return{defaultSort:{by:"amountCents",dir:"desc"},rowAction:{label:"Abrir Financeiro",page:"financial"},columns:[{id:"title",label:"Faixa",sortable:!0,sortKey:"title",get:i=>i.title},s]};default:return n}}const _s={fetchOverviewKpis:(t,s)=>{const n=bs(`${t}:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=120+n%90,l=18+n%22,c=28+n%42,h=6+n%12,m=(25e5+n%8e6)*1,f=14+n%30,b=Math.floor(m/Math.max(1,h)),v=18e5+n%7e6,g=6e5+n%35e5,w=8e4+n%9e5,N=46+n%42;return{inventoryTotalPoints:i,proposalsTotal:l,approvalRatePercent:c,campaignsActiveCount:h,campaignsActiveAmountCents:m,clientsActiveCount:f,averageTicketCents:b,revenueRecognizedCents:v,revenueToInvoiceCents:g,receivablesOverdueCents:w,occupancyPercent:N,trends:{revenue:{deltaPercent:n%19-7,points:Uf(n+11)},occupancy:{deltaPercent:n%13-4,points:Uf(n+29)},proposals:{deltaPercent:n%21-8,points:Uf(n+53)}}}},fetchCommercialFunnel:(t,s)=>{const n=bs(`${t}:funnel:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=[{key:"lead",label:"Leads",count:22+n%20,amountCents:0},{key:"prospect",label:"Prospects",count:14+n%16,amountCents:0},{key:"sent",label:"Propostas Enviadas",count:9+n%10,amountCents:9e5+n%22e5},{key:"approved",label:"Aprovadas",count:4+n%6,amountCents:7e5+n%18e5},{key:"active",label:"Em Veiculao",count:3+n%5,amountCents:65e4+n%15e5}],l=Array.from({length:6}).map((m,f)=>{const b=`PROP-${n%9e3+1e3+f}`;return{id:b,title:`Proposta ${b}`,client:["Alpha","Beta","Gamma","Delta","Epsilon","Zeta"][f%6],daysWithoutUpdate:6+(n+f*17)%23,amountCents:12e4+(n+f*777)%9e5}}),c=Gr(s.query),h=c?l.filter(m=>Fa(`${m.id} ${m.title} ${m.client}`,c)):l;return{stages:i,averageDaysToClose:9+n%17,stalledProposals:h}},fetchCommercialSummary:(t,s)=>{const n=bs(`${t}:commercialSummary:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=_s.fetchCommercialFunnel(t,s),l=18+n%28,c=25+n%55,h=i.averageDaysToClose,m=i.stages.reduce((b,v)=>b+(v.amountCents||0),0),f=i.stalledProposals.length;return{proposalsTotal:l,approvalRatePercent:c,averageDaysToClose:h,activePipelineAmountCents:m,stalledProposalsCount:f}},fetchStalledProposals:(t,s)=>({rows:_s.fetchCommercialFunnel(t,s).stalledProposals}),fetchSellerRanking:(t,s)=>{const n=bs(`${t}:sellerRanking:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=s.city?.trim()||void 0,l=["Ana","Bruno","Carla","Diego","Eduarda","Felipe","Giovana","Henrique"],c=Array.from({length:8}).map((f,b)=>{const v=`USR-${n%7e3+2e3+b}`,g=1+(n+b*11)%12,w=1+(n+b*19)%16,N=38e4+(n+b*997)%42e5,j=22e4+(n+b*733)%36e5;return{id:v,name:l[b%l.length],city:i||["Braslia","Goinia","So Paulo","Recife","Curitiba"][b%5],dealsWon:g,dealsInPipeline:w,amountWonCents:N,amountPipelineCents:j}}),h=Gr(s.query),m=h?c.filter(f=>Fa(`${f.id} ${f.name} ${f.city||""}`,h)):c;return m.sort((f,b)=>(b.amountWonCents??0)-(f.amountWonCents??0)),{rows:m}},fetchAlerts:(t,s)=>{const n=bs(`${t}:alerts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=h=>h[n%h.length],l=[{id:`AL-${n%1e3}`,severity:"HIGH",title:"Faturas vencendo em 7 dias",description:`Voc tem ${3+n%8} cobranas perto do vencimento.`,ctaLabel:"Ver financeiro",ctaPage:"financial"},{id:`AL-${(n+1)%1e3}`,severity:"MEDIUM",title:"Campanhas aguardando material",description:`Existem ${2+n%4} campanhas paradas aguardando envio de material.`,ctaLabel:"Ver campanhas",ctaPage:"campaigns"},{id:`AL-${(n+2)%1e3}`,severity:i(["LOW","MEDIUM"]),title:"Ocupao abaixo do esperado em uma regio",description:"Identificamos pontos com baixa ocupao no perodo selecionado.",ctaLabel:"Ver inventrio",ctaPage:"inventory"}],c=Gr(s.query);return c?l.filter(h=>Fa(`${h.title} ${h.description}`,c)):l},fetchDrilldown:(t,s,n,i)=>{const l=i?.params?Object.entries(i.params).sort(([T],[k])=>T.localeCompare(k)).map(([T,k])=>`${T}=${k}`).join("&"):"",c=bs(`${t}:drill:${s}:${n.datePreset}:${n.query}:${n.city}:${n.mediaType}:${l}`),h=55+c%25,m=Gr(n.query),f=Array.from({length:h}).map((T,k)=>{const R=["Braslia","Goinia","So Paulo","Recife","Curitiba"][k%5],O={id:`${s}-${c%9e3+1e3+k}`,title:`${s.toUpperCase()}  Item ${c%90+k+1}`,subtitle:R,amountCents:8e4+(c+k*1234)%14e5,status:["ATIVA","AGUARDANDO","VENCIDA","APROVADA"][k%4],fields:{}};if(s==="topClients"&&(O.title=`Cliente ${c%70+k+1}`,O.status=void 0,O.fields={campaignsCount:1+(c+k)%8,averageTicketCents:Math.floor((O.amountCents||0)/Math.max(1,1+(c+k)%8))}),s==="inventoryRanking"||s==="occupancy"){const H=bi(35+(c+k*7)%60,0,100);O.title=`Ponto ${String.fromCharCode(65+k%26)}-${c%90+k+1}`,O.status=void 0,O.fields={occupancyPercent:H,activeCampaigns:(c+k)%6,revenueCents:O.amountCents}}if(s==="inventoryPin"){const H=i?.params?.pinId||"PIN",te=new Date;te.setDate(te.getDate()-(k%20+1));const X=new Date(te);X.setDate(X.getDate()+(k%40+7)),O.title=`Ativo ${c%120+k+1}`,O.subtitle=`Campanha ${c%60+k%20+1}  ${H}`,O.status=["ATIVA","PAUSADA","AGENDADA"][k%3],O.fields={region:i?.params?.region,line:i?.params?.line,startsAt:te.toISOString(),endsAt:X.toISOString()}}if(s==="inventoryRegionLine"){const H=bi(35+(c+k*7)%60,0,100);O.title=`Ponto ${String.fromCharCode(65+k%26)}-${c%90+k+1}`,O.status=void 0,O.subtitle=i?.params?.region||O.subtitle,O.fields={region:i?.params?.region,line:i?.params?.line,occupancyPercent:H,activeCampaigns:(c+k)%6,revenueCents:O.amountCents}}if(s==="oohOps"){const H=new Date;H.setDate(H.getDate()+(k%12-3)),O.title=`Pendncia OOH ${c%40+k+1}`,O.status=["OK","PENDING","LATE"][k%3],O.amountCents=void 0,O.fields={dueDate:H.toISOString()}}if(s==="proofOfPlay"){const H=new Date;H.setMinutes(H.getMinutes()-(k%180+5)),O.title=`Tela ${c%300+k+1}`,O.status=void 0,O.amountCents=void 0,O.fields={uptimePercent:bi(72+(c+k*9)%28,0,100),plays:1e3+(c+k*17)%9e3,lastSeen:H.toISOString()}}if(s==="aging"){const H=["0-7","8-15","16-30","31-60","61+"],te=H[k%H.length];O.id=`aging-${te}-${k}`,O.title=te,O.subtitle=void 0,O.status=void 0,O.amountCents=2e4+(c+k*999)%28e5,O.fields={}}return O}),b=m?f.filter(T=>Fa(`${T.id} ${T.title} ${T.subtitle||""} ${T.status||""}`,m)):f,v=i?.sortBy,g=i?.sortDir||"desc",w=v?[...b].sort((T,k)=>{const R=ys(T,v),O=ys(k,v),H=typeof R=="number"?R:Number.NaN,te=typeof O=="number"?O:Number.NaN;let X=0;if(Number.isFinite(H)&&Number.isFinite(te))X=H-te;else{const q=R==null?"":String(R),U=O==null?"":String(O),M=Date.parse(q),B=Date.parse(U);Number.isFinite(M)&&Number.isFinite(B)?X=M-B:X=q.localeCompare(U,"pt-BR")}return g==="asc"?X:-X}):b,N=Math.max(1,Math.min(i?.limit??Wm,100));let j=0;if(i?.cursor){const T=Number.parseInt(String(i.cursor),10);j=Number.isFinite(T)&&T>0?T:0}const S=w.slice(j,j+N),A=j+N,D=A<w.length,E=D?String(A):void 0;return{rows:S,paging:{hasMore:D,nextCursor:E}}},fetchRevenueTimeseries:(t,s)=>{const n=bs(`${t}:revts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=new Date,l=s.datePreset==="7d"?7:s.datePreset==="30d"?14:18;return{points:Array.from({length:l}).map((h,m)=>{const f=new Date(i);f.setDate(f.getDate()-(l-1-m));const b=35e4+n%9e5,v=(n+m*131)%17-8,g=b+v*42e3+m%3*15e3;return{date:f.toISOString(),valueCents:g}})}},fetchCashflowTimeseries:(t,s)=>{const n=bs(`${t}:cashts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=new Date,l=s.datePreset==="7d"?7:s.datePreset==="30d"?14:18;return{points:Array.from({length:l}).map((h,m)=>{const f=new Date(i);f.setDate(f.getDate()-(l-1-m));const b=18e4+n%65e4,v=(n+m*97)%21-10,g=b+v*38e3+(m%4-1)*12e3;return{date:f.toISOString(),valueCents:g}})}},fetchInventoryMap:(t,s)=>{const n=bs(`${t}:invmap:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=s.city?.trim()||void 0,l=Array.from({length:18}).map((m,f)=>{const b=`MP-${n%9e3+1e3+f}`,v=bi(35+(n+f*13)%60,0,100);return{id:b,label:`Ponto ${String.fromCharCode(65+f%26)}-${n%90+f+1}`,city:i||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],occupancyPercent:v,region:["Centro","Norte","Sul","Leste","Oeste"][f%5],line:["Linha A","Linha B","Linha C"][f%3],lat:-15.7+(n+f*3)%100/1e3,lng:-47.9+(n+f*7)%100/1e3}}),c=Gr(s.query);return{pins:c?l.filter(m=>Fa(`${m.id} ${m.label} ${m.city||""}`,c)):l}},fetchInventoryRanking:(t,s)=>{const n=bs(`${t}:invrank:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=s.city?.trim()||void 0,l=Array.from({length:12}).map((m,f)=>{const b=`UNIT-${n%8e3+2e3+f}`,v=bi(40+(n+f*17)%55,0,100),g=14e4+(n+f*999)%12e5,w=1+(n+f*29)%6;return{id:b,label:["Painel","Empena","Relgio","Totem","Outdoor"][f%5]+` ${String.fromCharCode(65+f%26)}`,city:i||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],occupancyPercent:v,activeCampaigns:w,revenueCents:g}}),c=Gr(s.query),h=c?l.filter(m=>Fa(`${m.id} ${m.label} ${m.city||""}`,c)):l;return h.sort((m,f)=>(f.occupancyPercent??0)-(m.occupancyPercent??0)),{rows:h}},fetchTopClients:(t,s)=>{const n=bs(`${t}:topclients:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=s.city?.trim()||void 0,l=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Omega","Sigma","Kappa","Lambda"],c=Array.from({length:10}).map((f,b)=>{const v=`CL-${n%6e3+3e3+b}`,g=35e4+(n+b*997)%38e5,w=1+(n+b*37)%6,N=Math.floor(g/Math.max(1,w));return{id:v,name:l[b%l.length]+(b<5?"":` ${String.fromCharCode(65+b%26)}`),city:i||["Braslia","Goinia","So Paulo","Recife","Curitiba"][b%5],amountCents:g,campaignsCount:w,averageTicketCents:N}}),h=Gr(s.query),m=h?c.filter(f=>Fa(`${f.id} ${f.name} ${f.city||""}`,h)):c;return m.sort((f,b)=>(b.amountCents??0)-(f.amountCents??0)),{rows:m}},fetchReceivablesAgingSummary:(t,s)=>{const n=bs(`${t}:aging:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=9e5+n%55e5,l=[.22,.18,.27,.33],h=["0-7 dias","8-15 dias","16-30 dias","31+ dias"].map((m,f)=>{const b=(n+f*31)%11-5,v=bi(l[f]+b*.005,.08,.6),g=Math.round(i*v);return{label:m,amountCents:g}});return{totalCents:i,buckets:h}},fetchOohOpsSummary:(t,s)=>{const n=bs(`${t}:oohops:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=s.city?.trim()||void 0,l=["OK","PENDING","LATE"],c=["Aguardando material","Agendar instalao","Revisar arte","Pendncia de foto","Recolher prova","Confirmar local"],h=Array.from({length:10}).map((v,g)=>{const w=`OPS-${n%7e3+1e3+g}`,N=new Date;N.setDate(N.getDate()+(n+g*7)%12-4);const j=l[(n+g*13)%l.length];return{id:w,title:c[g%c.length],status:j,city:i||["Braslia","Goinia","So Paulo","Recife","Curitiba"][g%5],dueDate:N.toISOString()}}),m=Gr(s.query),f=m?h.filter(v=>Fa(`${v.id} ${v.title} ${v.city||""} ${v.status}`,m)):h,b=v=>v==="LATE"?2:v==="PENDING"?1:0;return f.sort((v,g)=>b(g.status)-b(v.status)),{items:f}},fetchDoohProofOfPlaySummary:(t,s)=>{const n=bs(`${t}:pop:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),i=s.city?.trim()||void 0,l=Array.from({length:10}).map((m,f)=>{const b=`SCR-${n%9e3+1e3+f}`,v=bi(88+(n+f*9)%15,0,100),g=1200+(n+f*77)%6200,w=new Date;return w.setMinutes(w.getMinutes()-(n+f*23)%600),{id:b,screen:`Tela ${String.fromCharCode(65+f%26)}-${n%90+f+1}`,city:i||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],uptimePercent:v,plays:g,lastSeen:w.toISOString()}}),c=Gr(s.query),h=c?l.filter(m=>Fa(`${m.id} ${m.screen} ${m.city||""}`,c)):l;return h.sort((m,f)=>(f.uptimePercent??0)-(m.uptimePercent??0)),{rows:h}},getPublicMapUrl:t=>{const s=bs(t);return`https://onemedia.app/public/map/${t}?t=${s%1e5}`}};function NR(t){const s=new Date,n=new Date(s);return t==="7d"?n.setDate(n.getDate()-7):t==="30d"?n.setDate(n.getDate()-30):t==="90d"?n.setDate(n.getDate()-90):t==="ytd"&&(n.setMonth(0,1),n.setHours(0,0,0,0)),{dateFrom:n.toISOString(),dateTo:s.toISOString()}}function UN(t){const{dateFrom:s,dateTo:n}=NR(t.datePreset);return{dateFrom:s,dateTo:n,q:t.query?.trim()?t.query.trim():void 0,city:t.city?.trim()?t.city.trim():void 0,mediaType:t.mediaType==="ALL"?void 0:t.mediaType}}function qm(t,s){const n=new URLSearchParams,i={dateFrom:t.dateFrom,dateTo:t.dateTo,q:t.q,city:t.city,mediaType:t.mediaType,...s||{}};for(const[l,c]of Object.entries(i)){if(c==null)continue;const h=String(c).trim();h&&n.set(l,h)}return n.toString()}function Ag(t){return typeof t=="string"?t:""}function Zm(t){return Array.isArray(t)?t.map(Ag).filter(Boolean):typeof t=="string"?[t]:[]}function Hf(t,s){const n=t.map(i=>i.toLowerCase());return s.some(i=>n.includes(i.toLowerCase()))}function CR(t){const s=Ag(t?.role||t?.type||t?.profile),n=Zm(t?.roles),i=Zm(t?.permissions||t?.perms),l=Zm(t?.scopes),c=[s,...n,...i,...l].filter(Boolean);return{role:s,roles:n,perms:i,scopes:l,all:c}}function _R(t){const s=Zm(t?.modules||t?.features||t?.enabledModules),n=Ag(t?.plan||t?.tier),i=[...s,n].filter(Boolean);return{modules:s,plan:n,all:i}}function SR(t,s){const n=CR(t),i=_R(s),l=["finance","financial","billing","invoices","payments","contas","faturamento","financeiro","DASHBOARD_FINANCE","dashboard:finance","finance:read","billing:read"],c=Hf(n.all,l)||Hf(i.all,l),h=["readonly","read_only","DASHBOARD_VIEWS_READONLY","dashboard:views:readonly"],m=!Hf(n.all,h);return{allowedTabs:["executivo","comercial","operacoes",...c?["financeiro"]:[],"inventario"],canViewFinance:c,canManageSavedViews:m}}function VN(t,s){return`oneMedia.dashboard.savedViews.v1:${t}:${s}`}function AR(){const t=typeof crypto<"u"?crypto:void 0;return t&&typeof t.randomUUID=="function"?t.randomUUID():`view_${Date.now()}_${Math.random().toString(16).slice(2)}`}function Wf(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function PR(t){if(!Wf(t))return null;const s=typeof t.id=="string"?t.id:void 0,n=typeof t.name=="string"?t.name:void 0,i=typeof t.tab=="string"?t.tab:void 0,l=Wf(t.filters)?t.filters:void 0,c=Wf(t.layout)?t.layout:{version:1},h=typeof t.createdAt=="string"?t.createdAt:new Date().toISOString(),m=typeof t.updatedAt=="string"?t.updatedAt:h;return!s||!n||!i||!l?null:{id:s,name:n,tab:i,filters:l,layout:c,createdAt:h,updatedAt:m}}function Pg(t,s){if(typeof window>"u")return[];try{const n=window.localStorage.getItem(VN(t,s));if(!n)return[];const i=JSON.parse(n);if(!Array.isArray(i))return[];const l=i.map(PR).filter(c=>c!==null);return l.sort((c,h)=>c.updatedAt<h.updatedAt?1:-1),l}catch{return[]}}function HN(t,s,n){if(!(typeof window>"u"))try{window.localStorage.setItem(VN(t,s),JSON.stringify(n))}catch{}}function ER(t,s,n){const i=Pg(t,s),l=i.findIndex(h=>h.id===n.id),c=[...i];return l>=0?c[l]=n:c.unshift(n),c.sort((h,m)=>h.updatedAt<m.updatedAt?1:-1),HN(t,s,c),c}function kR(t,s,n){const l=Pg(t,s).filter(c=>c.id!==n);return HN(t,s,l),l}const TR=50,vo=new Map;function DR(t,s){for(vo.has(t)&&vo.delete(t),vo.set(t,s);vo.size>TR;){const n=vo.keys().next().value;if(!n)break;vo.delete(n)}}function cr(t,s){const[n,i]=p.useState(()=>vo.get(t)?.value);return p.useEffect(()=>{const l=vo.get(t);i(l?.value)},[t]),p.useEffect(()=>{if(s?.status!=="ready"||s.data===void 0||s.data===null)return;const l={value:s.data,ts:Date.now()};DR(t,l),i(s.data)},[t,s?.status,s?.data]),s?.data??n}function IR(){try{const s=new URL(window.location.href).searchParams.get("dashboardMetrics");return s==="1"||s==="true"?!0:window.localStorage.getItem("dashboard.metrics")==="1"}catch{return!1}}function Ys(t,s,n){const i=p.useMemo(()=>typeof window<"u"?IR():!1,[]),l=p.useRef(null),c=p.useRef(""),h=`${n.companyId||""}|${n.tab||""}|${n.backendQs||""}`;p.useEffect(()=>{if(i){if(s.status==="loading"){l.current=performance.now();return}if((s.status==="ready"||s.status==="error")&&l.current!=null){const m=Math.max(0,Math.round(performance.now()-l.current)),f=`${t}|${h}|${s.status}|${s.source||""}|${m}`;if(f===c.current){l.current=null;return}c.current=f;const b={widgetKey:t,status:s.status,ms:m,source:s.source,companyId:n.companyId,tab:n.tab,backendQs:n.backendQs,error:s.status==="error"?s.errorMessage||"unknown":void 0};m>=1500?console.warn("[dashboard][widget]",b):console.info("[dashboard][widget]",b),l.current=null}}},[i,t,h,s.status,s.source,s.errorMessage,n.companyId,n.tab,n.backendQs])}let ab=!1;function RR(){try{const s=new URL(window.location.href).searchParams.get("dashboardQa");return s==="1"||s==="true"?!0:window.localStorage.getItem("dashboard.qa")==="1"}catch{return!1}}function nl(t,s){if(!t)throw new Error(s)}function MR(){if(!ab&&!(typeof window>"u")&&RR()){ab=!0;try{nl(va("abc")==="abc","escapeCsvValue basic"),nl(va("a;b").includes('"'),"escapeCsvValue delimiter"),nl(va(`a
 b`).includes('"'),"escapeCsvValue newline");const t=UN({datePreset:"30d",query:"  hello  ",city:"  ",mediaType:"ALL"});nl(t.q==="hello","buildDashboardBackendQuery trims query"),nl(t.city===void 0,"buildDashboardBackendQuery omits empty city");const s=qm(t);nl(s.includes("q=hello"),"toQueryString includes trimmed q"),nl(!s.includes("city="),"toQueryString omits empty city"),console.info("[dashboard][qa] ok")}catch(t){console.error("[dashboard][qa] failed",t)}}}class OR extends p.Component{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(s){try{this.props.onError?.(s)}catch{}}render(){return this.state.hasError?this.props.fallback:this.props.children}}const LR="oneMedia.dashboard.rollout.config.v1",FR="oneMedia.dashboard.rollout.force.v1",Eg=()=>typeof window<"u"?window:null;function yc(t){return(t||"").trim()}function WN(t){const s=Eg();if(!s)return null;try{const n=s.localStorage.getItem(t);return n?JSON.parse(n):null}catch{return null}}function $R(t,s){const n=Eg();if(n)try{n.localStorage.setItem(t,JSON.stringify(s))}catch{}}function Sd(t){try{return import.meta?.env?.[t]||void 0}catch{return}}function Am(t){return t?t.split(",").map(s=>s.trim()).filter(Boolean):[]}function zR(){const t=Eg();return t?new URLSearchParams(t.location.search):new URLSearchParams}function qN(t,s){return`${FR}:${yc(t)||"na"}:${yc(s)||"na"}`}function ib(t){const s=t.ttlMs??864e5,n=Date.now()+s,i={variant:t.variant,until:n,reason:t.reason};$R(qN(t.companyId,t.userId),i)}function BR(){const t=WN(LR)||{},s=Sd("VITE_DASHBOARD_ROLLOUT_DEFAULT"),n=Am(Sd("VITE_DASHBOARD_ROLLOUT_ENABLED_COMPANIES")),i=Am(Sd("VITE_DASHBOARD_ROLLOUT_ENABLED_USERS")),l=Am(Sd("VITE_DASHBOARD_ROLLOUT_DISABLED_COMPANIES")),c=Am(Sd("VITE_DASHBOARD_ROLLOUT_DISABLED_USERS"));return{defaultVariant:t.defaultVariant||(s==="compact"?"compact":s==="v2"?"v2":void 0),enabledCompanies:Pm([...t.enabledCompanies||[],...n]),enabledUsers:Pm([...t.enabledUsers||[],...i]),disabledCompanies:Pm([...t.disabledCompanies||[],...l]),disabledUsers:Pm([...t.disabledUsers||[],...c])}}function Pm(t){const s=new Set;return t.forEach(n=>{const i=yc(n);i&&s.add(i)}),Array.from(s)}function UR(t){const s=(t||"").trim().toLowerCase();return s?s==="v2"||s==="new"?"v2":s==="compact"||s==="safe"||s==="v1"||s==="off"?"compact":null:null}function VR(t){const s=(t||"").trim().toLowerCase();if(s){if(s==="backend")return"backend";if(s==="mock")return"mock"}}function HR(t){const s=yc(t.companyId),n=yc(t.userId)||yc(t.userEmail),i=!!t.canOverride,l=zR(),c=l.get("dashboard"),h=l.get("dashboardData"),m=UR(c),f=VR(h);if(m)return{variant:m,reason:`Override por URL (?dashboard=${c})`,source:"query",dataModeOverride:f,canOverride:i,debug:{queryDashboard:c||void 0,queryDataMode:h||void 0}};const b=WN(qN(s,n));if(b&&typeof b.until=="number"&&b.until>Date.now())return{variant:b.variant,reason:b.reason||"Override forado (rollback/mitigao)",source:"forced",dataModeOverride:f,canOverride:i,debug:{forcedUntil:b.until,forcedVariant:b.variant,queryDataMode:h||void 0}};const v=BR(),g=new Set(v.disabledCompanies||[]),w=new Set(v.disabledUsers||[]),N=new Set(v.enabledCompanies||[]),j=new Set(v.enabledUsers||[]);if(s&&g.has(s))return{variant:"compact",reason:"Bloqueado por empresa (denylist)",source:"config",dataModeOverride:f,canOverride:i,debug:{queryDataMode:h||void 0}};if(n&&w.has(n))return{variant:"compact",reason:"Bloqueado por usurio (denylist)",source:"config",dataModeOverride:f,canOverride:i,debug:{queryDataMode:h||void 0}};if(s&&N.has(s))return{variant:"v2",reason:"Habilitado por empresa (allowlist)",source:"config",dataModeOverride:f,canOverride:i,debug:{queryDataMode:h||void 0}};if(n&&j.has(n))return{variant:"v2",reason:"Habilitado por usurio (allowlist)",source:"config",dataModeOverride:f,canOverride:i,debug:{queryDataMode:h||void 0}};const S=v.defaultVariant||"v2";return{variant:S,reason:S==="v2"?"Padro (v2)":"Padro (compact)",source:v.defaultVariant?"env":"default",dataModeOverride:f,canOverride:i,debug:{queryDataMode:h||void 0}}}const ZN=[{id:"overview-kpis",title:"KPIs principais (Executivo)",description:"Comparar os KPIs do topo com a fonte oficial (relatorios/queries do backend).",route:Bt.overview,fields:["inventoryTotalPoints","proposalsTotal","approvalRatePercent","campaignsActiveCount","revenueTotal","revenueMtd","revenueYtd","receivablesOpen"],tolerance:0},{id:"commercial-funnel",title:"Funil Comercial",description:"Conferir volumes por etapa e totals.",route:Bt.funnel,fields:["stages[].count","stages[].value","totalCount","totalValue"],tolerance:0},{id:"inventory-map",title:"Inventario / Mapa (pins)",description:"Conferir contagem de pontos, ocupacao e coordenadas (lat/lng).",route:Bt.inventoryMap,fields:["pins[].id","pins[].lat","pins[].lng","pins[].occupancy","pins[].region","pins[].line"]},{id:"inventory-ranking",title:"Inventario / Ranking",description:"Conferir top pontos por performance.",route:Bt.inventoryRanking,fields:["rows[].id","rows[].name","rows[].occupancy","rows[].impressions"]},{id:"finance-aging",title:"Financeiro / Aging",description:"Conferir buckets (faixas) e totals.",route:Bt.receivablesAgingSummary,fields:["buckets[].label","buckets[].amount","totalOpen"]},{id:"ops-proof-of-play",title:"Operacoes / Proof of Play",description:"Conferir eventos POP no periodo do filtro.",route:Bt.doohProofOfPlaySummary,fields:["rows[].mediaId","rows[].plays","rows[].lastPlayedAt"]}],WR="oneMedia.dashboard.parity.marks.v1";function kg(t,s){const n=(t||"na").trim(),i=(s||"na").trim();return`${WR}:${n}:${i}`}function qR(t,s){if(typeof window>"u")return{};try{const n=window.localStorage.getItem(kg(t,s));if(!n)return{};const i=JSON.parse(n);return i&&typeof i=="object"?i:{}}catch{return{}}}function ZR(t,s,n){if(!(typeof window>"u"))try{window.localStorage.setItem(kg(t,s),JSON.stringify(n))}catch{}}function GR(t,s,n,i){const l={...n,[i]:!n[i]};return ZR(t,s,l),l}function KR(t,s){if(!(typeof window>"u"))try{window.localStorage.removeItem(kg(t,s))}catch{}}function XR(){return ZN.map(t=>`- [ ] ${t.title}  (${t.route})
  Campos: ${t.fields.join(", ")}`).join(`
`)}function Ni({className:t=""}){return e.jsx("div",{className:`animate-pulse rounded bg-gray-100 ${t}`})}function GN({title:t,description:s}){return e.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t}),s?e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-sm",children:s}):null]})}function KN({title:t,description:s}){return e.jsxs("div",{className:"py-8",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t}),s?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s}):null]})}function kx({points:t}){if(!t||t.length===0)return null;const s=80,n=24,i=t.map((h,m)=>m/Math.max(1,t.length-1)*s),l=t.map(h=>n-h/100*n),c=t.map((h,m)=>`${m===0?"M":"L"} ${i[m].toFixed(2)} ${l[m].toFixed(2)}`).join(" ");return e.jsx("svg",{width:s,height:n,viewBox:`0 0 ${s} ${n}`,children:e.jsx("path",{d:c,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400"})})}function YR({value:t}){const s=t>0?"+":"",n=t>0?"text-green-600":t<0?"text-red-600":"text-gray-500";return e.jsxs("span",{className:`text-xs ${n}`,children:[s,t,"%"]})}function Ad({active:t,icon:s,label:n,onClick:i}){return e.jsxs("button",{type:"button",onClick:i,className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors border ${t?"bg-white text-gray-900 border-gray-200 shadow-sm":"bg-transparent text-gray-600 border-transparent hover:bg-white/60"}`,children:[s,n]})}function vi({label:t,value:s}){return e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 text-xs whitespace-nowrap",children:[e.jsxs("span",{className:"text-gray-500",children:[t,":"]})," ",s]})}function QR({severity:t}){const s=t==="HIGH"?"bg-red-500":t==="MEDIUM"?"bg-yellow-500":"bg-green-500";return e.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${s}`})}function Zr({id:t,title:s,subtitle:n,actions:i,loading:l,error:c,empty:h,emptyTitle:m,emptyDescription:f,children:b}){return e.jsx("div",{id:t,className:"print-avoid-break",children:e.jsxs(Ue,{children:[e.jsx(Ec,{children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(kc,{children:s}),n?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n}):null]}),i?e.jsx("div",{className:"flex items-center gap-2","data-no-print":!0,children:i}):null]})}),e.jsx(Ve,{children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ni,{className:"h-5 w-1/2"}),e.jsx(Ni,{className:"h-5 w-2/3"}),e.jsx(Ni,{className:"h-32 w-full"})]}):c?e.jsx(KN,{title:c.title,description:c.description}):h?e.jsx(GN,{title:m||"Sem dados",description:f}):b})]})})}function ds({label:t,value:s,helper:n,delta:i,spark:l,onClick:c,loading:h}){return e.jsx(Ue,{className:c?"cursor-pointer hover:shadow-sm":"",onClick:c,children:e.jsxs(Ve,{className:"pt-5",children:[e.jsx("p",{className:"text-xs text-gray-500",children:t}),h?e.jsxs("div",{className:"mt-2",children:[e.jsx(Ni,{className:"h-7 w-2/3"}),e.jsx(Ni,{className:"h-4 w-1/2 mt-2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-900 mt-1",children:s||""}),n?e.jsx("p",{className:`text-xs text-gray-500 mt-2 ${n.includes("BACKEND:")?"backend-hint":""}`.trim(),children:n}):null,typeof i=="number"&&l?e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(YR,{value:i}),e.jsx(kx,{points:l})]}):null]})]})})}function Em(t,s,n){return Math.max(s,Math.min(n,t))}function ob(t){return t>=75?"bg-red-500 border-red-600":t>=45?"bg-yellow-400 border-yellow-500":"bg-green-500 border-green-600"}function JR(t){return t>=75?{label:"Alta",className:"text-red-700 bg-red-50 border-red-200"}:t>=45?{label:"Media",className:"text-yellow-800 bg-yellow-50 border-yellow-200"}:{label:"Baixa",className:"text-green-700 bg-green-50 border-green-200"}}function eM(){const t=p.useRef(null),[s,n]=p.useState({width:0,height:0});return p.useEffect(()=>{const i=t.current;if(!i)return;const l=new ResizeObserver(c=>{const h=c[0];if(!h)return;const m=h.contentRect;n({width:Math.round(m.width),height:Math.round(m.height)})});return l.observe(i),()=>l.disconnect()},[]),{ref:t,...s}}function XN(t){return t.map((i,l)=>{const c=typeof i.lat=="number"?i.lat:-15.78+(l%9-4)*.01,h=typeof i.lng=="number"?i.lng:-47.9+(l%11-5)*.01,m=String(i.region||i.city||"Regiao").trim()||"Regiao",f=String(i.line||`Linha ${String.fromCharCode(65+l%3)}`).trim()||"Linha";return{...i,lat:c,lng:h,regionSafe:m,lineSafe:f}})}function tM(t,s,n){const i=XN(t),l=i.map(S=>S.lat),c=i.map(S=>S.lng),h=Math.min(...l),m=Math.max(...l),f=Math.min(...c),b=Math.max(...c),v=24,g=Math.max(1,s-v*2),w=Math.max(1,n-v*2),N=Math.max(1e-9,m-h),j=Math.max(1e-9,b-f);return i.map(S=>{const A=(S.lng-f)/j,D=(S.lat-h)/N,E=v+A*g,T=v+(1-D)*w;return{...S,x:E,y:T,regionSafe:S.regionSafe,lineSafe:S.lineSafe}})}function nM(t,s){const i=34/Math.max(.6,s),l=new Set,c=[];for(let h=0;h<t.length;h++){const m=t[h];if(l.has(m.id))continue;const f=[m];l.add(m.id);for(let w=h+1;w<t.length;w++){const N=t[w];if(l.has(N.id))continue;const j=N.x-m.x,S=N.y-m.y;Math.sqrt(j*j+S*S)<=i&&(f.push(N),l.add(N.id))}if(f.length===1){c.push({id:`pin:${m.id}`,x:m.x,y:m.y,count:1,occupancyAvg:m.occupancyPercent,pins:[m]});continue}const b=Math.round(f.reduce((w,N)=>w+N.x,0)/f.length),v=Math.round(f.reduce((w,N)=>w+N.y,0)/f.length),g=f.reduce((w,N)=>w+(N.occupancyPercent||0),0)/f.length;c.push({id:`cluster:${f[0].id}:${f.length}`,x:b,y:v,count:f.length,occupancyAvg:g,pins:f})}return c}function sM(t){return t>=75?"bg-red-100 border-red-200":t>=45?"bg-yellow-100 border-yellow-200":"bg-green-100 border-green-200"}function rM(t){const s=p.useMemo(()=>XN(t.pins),[t.pins]),n=p.useMemo(()=>{const c=new Set;for(const h of s)c.add(h.regionSafe);return Array.from(c).slice(0,6)},[s]),i=p.useMemo(()=>{const c=new Set;for(const h of s)c.add(h.lineSafe);return Array.from(c).slice(0,5)},[s]),l=p.useMemo(()=>{const c=new Map;for(const h of s){const m=`${h.regionSafe}::${h.lineSafe}`,f=c.get(m)||{sum:0,count:0};c.set(m,{sum:f.sum+(h.occupancyPercent||0),count:f.count+1})}return c},[s]);return n.length===0||i.length===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gx,{className:"w-4 h-4 text-gray-700"}),e.jsx("p",{className:"text-sm text-gray-900",children:"Ocupacao por regiao e linha"}),e.jsx("p",{className:"text-xs text-gray-500",children:"(clique para abrir lista)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left font-medium text-gray-700 px-2 py-2 border-b border-gray-200",children:"Regiao"}),i.map(c=>e.jsx("th",{className:"text-left font-medium text-gray-700 px-2 py-2 border-b border-gray-200",children:c},c))]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 border-b border-gray-100 text-gray-900 whitespace-nowrap",children:c}),i.map(h=>{const m=`${c}::${h}`,f=l.get(m),b=f&&f.count?f.sum/f.count:0,v=f?.count||0;return e.jsx("td",{className:"px-2 py-2 border-b border-gray-100",children:e.jsx("button",{type:"button",className:`w-full border rounded-md px-2 py-1 text-left ${sM(b)}`,onClick:()=>t.onSelect?.(c,h),disabled:v===0,title:v===0?"Sem pontos":"Abrir drilldown",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"tabular-nums text-gray-900",children:[Math.round(b),"%"]}),e.jsx("span",{className:"text-gray-600",children:v})]})})},m)})]},c))})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-green-200 border border-green-300"}),"baixa"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-yellow-200 border border-yellow-300"}),"media"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-red-200 border border-red-300"}),"alta"]})]})]})}function aM(t){const s=t.height??320,{ref:n,width:i}=eM(),l=p.useMemo(()=>tM(t.pins,Math.max(1,i),s),[t.pins,i,s]),[c,h]=p.useState(1),[m,f]=p.useState({x:0,y:0}),[b,v]=p.useState(!1),g=p.useRef(null),[w,N]=p.useState(!0),[j,S]=p.useState(!0),[A,D]=p.useState(null),E=p.useMemo(()=>w?c>=2.2?l.map(M=>({id:`pin:${M.id}`,x:M.x,y:M.y,count:1,occupancyAvg:M.occupancyPercent,pins:[M]})):nM(l,c):l.map(M=>({id:`pin:${M.id}`,x:M.x,y:M.y,count:1,occupancyAvg:M.occupancyPercent,pins:[M]})),[l,c,w]),T=p.useCallback(M=>{if(M.preventDefault(),!i)return;const ee=M.deltaY>0?.92:1.08,me=Em(c*ee,.8,6);if(me==c)return;const J=M.currentTarget.getBoundingClientRect(),fe=M.clientX-J.left,W=M.clientY-J.top,ae=fe-(fe-m.x)*(me/c),F=W-(W-m.y)*(me/c);h(me),f({x:ae,y:F})},[c,m.x,m.y,i]),k=p.useCallback(M=>{M.currentTarget.setPointerCapture(M.pointerId),v(!0),g.current={x:M.clientX,y:M.clientY,panX:m.x,panY:m.y}},[m.x,m.y]),R=p.useCallback(M=>{if(!b||!g.current)return;const B=M.clientX-g.current.x,ee=M.clientY-g.current.y;f({x:g.current.panX+B,y:g.current.panY+ee})},[b]),O=p.useCallback(()=>{v(!1),g.current=null},[]),H=p.useCallback(()=>{h(1),f({x:0,y:0})},[]),te=p.useCallback((M,B,ee)=>{const me=n.current;if(!me){h(ee);return}const J=me.getBoundingClientRect(),fe=J.width/2,W=J.height/2;h(ee),f({x:fe-M*ee,y:W-B*ee})},[n]),X=p.useCallback(()=>h(M=>Em(M*1.25,.8,6)),[]),q=p.useCallback(()=>h(M=>Em(M*.8,.8,6)),[]),U=p.useMemo(()=>[{label:"0-44% (baixa)",dot:"bg-green-500 border-green-600"},{label:"45-74% (media)",dot:"bg-yellow-400 border-yellow-500"},{label:"75-100% (alta)",dot:"bg-red-500 border-red-600"}],[]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:H,title:"Reset view",children:e.jsx(Wj,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:q,title:"Zoom out",children:e.jsx(YP,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:X,title:"Zoom in",children:e.jsx(Ss,{className:"w-4 h-4"})}),e.jsxs(ne,{variant:"outline",className:"h-9",onClick:()=>N(M=>!M),title:"Clusters",children:[e.jsx(Gx,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2 text-sm",children:w?"Cluster":"Pins"})]}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>S(M=>!M),title:"Heatmap",children:e.jsx("span",{className:"text-sm",children:j?"Heat ON":"Heat OFF"})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"tabular-nums",children:["Zoom ",c.toFixed(2),"x"]}),e.jsx("span",{children:""}),e.jsxs("span",{className:"tabular-nums",children:[t.pins.length," pins"]})]})]}),e.jsxs("div",{ref:n,className:"relative w-full rounded-lg border border-gray-200 overflow-hidden select-none",style:{height:s},onWheel:T,onPointerDown:k,onPointerMove:R,onPointerUp:O,onPointerCancel:O,children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0"}}),e.jsx("div",{className:"absolute inset-0",style:{transform:`translate(${m.x}px, ${m.y}px) scale(${c})`,transformOrigin:"0 0"},children:e.jsxs("div",{className:"relative",style:{width:Math.max(1,i),height:s},children:[j&&l.map(M=>e.jsx("div",{className:"absolute rounded-full blur-2xl opacity-40",style:{left:M.x-28,top:M.y-28,width:56,height:56},children:e.jsx("div",{className:`w-full h-full rounded-full ${ob(M.occupancyPercent).split(" ")[0]} opacity-30`})},`heat:${M.id}`)),E.map(M=>{const B=M.count>1,ee=B?30:16,me=M.x-ee/2,J=M.y-ee/2,fe=ob(M.occupancyAvg),W=!B&&M.pins[0]&&M.pins[0].id===t.selectedPinId;return e.jsx("button",{type:"button",className:`absolute rounded-full border ${fe} flex items-center justify-center text-white shadow-sm ${W?"ring-2 ring-gray-900 ring-offset-2":""}`,style:{left:me,top:J,width:ee,height:ee},onClick:ae=>{if(ae.stopPropagation(),B){te(M.x,M.y,Em(c*1.7,.8,6));return}const F=M.pins[0];F&&t.onPinClick?.(F)},onMouseEnter:ae=>{const F=M.pins[0];if(!F)return;const $=ae.currentTarget.getBoundingClientRect();D({x:$.left+$.width/2,y:$.top,title:B?`${M.count} pins`:F.label,subtitle:B?"Cluster":F.city||F.region,occ:Math.round(M.occupancyAvg)})},onMouseLeave:()=>D(null),title:B?`${M.count} pontos`:M.pins[0]?.label,children:B?e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:M.count}):null},M.id)})]})}),e.jsx("div",{className:"absolute left-3 bottom-3 bg-white/90 backdrop-blur rounded-md border border-gray-200 px-2 py-2 space-y-1",children:U.map(M=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-sm border ${M.dot}`}),e.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:M.label})]},M.label))})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.pins.slice(0,8).map(M=>{const B=JR(M.occupancyPercent);return e.jsxs("button",{type:"button",className:`text-xs px-2 py-1 rounded-md border ${B.className} hover:opacity-90`,onClick:()=>t.onPinClick?.(M),children:[M.label," ",e.jsxs("span",{className:"tabular-nums",children:[Math.round(M.occupancyPercent),"%"]})]},M.id)})}),A?e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:A.x,top:A.y,transform:"translate(-50%, -8px)"},children:e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white shadow-lg px-3 py-2",children:[e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:A.title}),A.subtitle?e.jsx("p",{className:"text-xs text-gray-500",children:A.subtitle}):null,e.jsxs("p",{className:"text-xs text-gray-700",children:["Ocupacao: ",e.jsxs("span",{className:"tabular-nums",children:[A.occ,"%"]})]})]})}):null]})}function lb({onNavigate:t}){const{user:s}=yl(),{company:n}=So(),[i,l]=p.useState("executivo"),c={datePreset:"30d",query:"",city:"",mediaType:"ALL"},[h,m]=p.useState(c),[f,b]=p.useState(c),[v,g]=p.useState(!1);p.useEffect(()=>{if(!(h.query!==f.query||h.city!==f.city)){g(!1);return}g(!0);const Se=window.setTimeout(()=>{b(It=>({...It,query:h.query,city:h.city})),g(!1)},350);return()=>window.clearTimeout(Se)},[h.query,h.city,f.query,f.city]);const w=p.useMemo(()=>SR(s,n),[s,n]),N=p.useMemo(()=>HR({companyId:n?.id,userId:s?.id,userEmail:s?.email,canOverride:w.canManageSavedViews}),[n?.id,s?.id,s?.email,w.canManageSavedViews]),[j,S]=p.useState(()=>{const re=N.dataModeOverride??Bf;return N.variant==="compact"?"mock":re});p.useEffect(()=>{const re=N.dataModeOverride??Bf;S(N.variant==="compact"?"mock":re)},[N.dataModeOverride,N.variant]),p.useEffect(()=>{if(j==="backend")try{sessionStorage.getItem("oneMedia.dashboard.dataMode.session")==="mock"&&S("mock")}catch{}},[j]);const A=re=>{N.canOverride&&(ib({companyId:n?.id,userId:s?.id||s?.email,variant:re,ttlMs:1440*60*1e3,reason:"Override manual (Etapa 16)"}),window.location.reload())},[D,E]=p.useState(!1),[T,k]=p.useState({});p.useEffect(()=>{k(qR(n?.id,s?.id||s?.email))},[n?.id,s?.id,s?.email]);const R=p.useMemo(()=>String(n?.id??""),[n]),O=p.useMemo(()=>{const re=s;return String(re?.id??re?.uid??re?.userId??re?.email??"")},[s]),[H,te]=p.useState([]),[X,q]=p.useState(""),[U,M]=p.useState(!1),[B,ee]=p.useState("create"),[me,J]=p.useState(""),fe=p.useMemo(()=>(w.allowedTabs||[]).join("|"),[w.allowedTabs]),[W,ae]=p.useState(!1),[F,$]=p.useState(!1),Y=p.useMemo(()=>UN(f),[f]),Z=p.useMemo(()=>qm(Y),[Y]),[K,G]=p.useState({open:!1,key:void 0,title:"",rows:[],hint:void 0,status:"idle",errorMessage:void 0,sortBy:void 0,sortDir:void 0,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""}),xe=Ks({enabled:!!n,mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchOverviewKpis(n.id,f),fetcher:re=>Xs(Bt.overview,Z,{signal:re})}),le=Ks({enabled:!!n,mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchCommercialFunnel(n.id,f),fetcher:re=>Xs(Bt.funnel,Z,{signal:re})}),ue=Ks({enabled:!!n&&i==="comercial",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchCommercialSummary(n.id,f),fetcher:re=>Xs(Bt.commercialSummary,Z,{signal:re})}),Fe=Ks({enabled:!!n&&i==="comercial",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchStalledProposals(n.id,f),fetcher:re=>Xs(Bt.stalledProposals,Z,{signal:re})}),$e=Ks({enabled:!!n&&i==="comercial",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchSellerRanking(n.id,f),fetcher:re=>Xs(Bt.sellerRanking,Z,{signal:re})}),Ze=Ks({enabled:!!n,mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchAlerts(n.id,f),fetcher:re=>Xs(Bt.alerts,Z,{signal:re})}),Ye=p.useMemo(()=>K.key?qm(Y,{cursor:K.cursor,limit:String(Wm),sortBy:K.sortBy,sortDir:K.sortDir,...K.params||{}}):Z,[Y,Z,K.key,K.cursor,K.sortBy,K.sortDir,K.params]),Xe=Ks({enabled:!!n&&K.open&&!!K.key,mode:j,deps:[n?.id,K.key,Ye],computeMock:()=>_s.fetchDrilldown(n.id,K.key,f,{cursor:K.cursor,limit:Wm,sortBy:K.sortBy,sortDir:K.sortDir,params:K.params}),fetcher:re=>Xs(`${Bt.drilldown}/${K.key}`,Ye,{signal:re})});p.useEffect(()=>{K.open&&G(re=>({...re,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:re.key?"loading":re.status,errorMessage:void 0}))},[Z]),p.useEffect(()=>{if(!(!K.open||!K.key)){if(Xe.status==="loading"){G(re=>({...re,status:"loading",errorMessage:void 0}));return}if(Xe.status==="error"){G(re=>({...re,status:"error",errorMessage:Xe.errorMessage||"Erro inesperado ao carregar detalhes"}));return}if(Xe.status==="ready"){const re=Xe.data,Se=re?.paging||{},It=Se.nextCursor??Se.cursor,dn=!!(Se.hasMore&&It),Mt=re?.rows||[];G(Hn=>{const os=!!(Hn.cursor&&Hn.rows.length>0)?fR([...Hn.rows||[],...Mt]):Mt;return{...Hn,rows:os,status:"ready",errorMessage:void 0,hasMore:dn,nextCursor:It}})}}},[K.open,K.key,Xe.status,Xe.data,Xe.errorMessage]);const Je=Ks({enabled:!!n&&i==="executivo",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchRevenueTimeseries(n.id,f),fetcher:re=>Xs(Bt.revenueTimeseries,Z,{signal:re})}),ot=Ks({enabled:!!n&&i==="financeiro",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchCashflowTimeseries(n.id,f),fetcher:re=>Xs(Bt.cashflowTimeseries,Z,{signal:re})}),jt=Ks({enabled:!!n&&i==="inventario",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchInventoryMap(n.id,f),fetcher:re=>Xs(Bt.inventoryMap,Z,{signal:re})}),dt=Ks({enabled:!!n&&i==="inventario",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchInventoryRanking(n.id,f),fetcher:re=>Xs(Bt.inventoryRanking,Z,{signal:re})}),Tt=Ks({enabled:!!n&&i==="executivo",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchTopClients(n.id,f),fetcher:re=>Xs(Bt.topClients,Z,{signal:re})}),Ft=Ks({enabled:!!n&&i==="financeiro",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchReceivablesAgingSummary(n.id,f),fetcher:re=>Xs(Bt.receivablesAgingSummary,Z,{signal:re})}),Q=Ks({enabled:!!n&&i==="operacoes",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchOohOpsSummary(n.id,f),fetcher:re=>Xs(Bt.oohOpsSummary,Z,{signal:re})}),pe=Ks({enabled:!!n&&i==="operacoes",mode:j,deps:[n?.id,Z],computeMock:()=>_s.fetchDoohProofOfPlaySummary(n.id,f),fetcher:re=>Xs(Bt.doohProofOfPlaySummary,Z,{signal:re})}),de=cr(`overview:${n?.id||""}:${Z}`,xe),Oe=cr(`funnel:${n?.id||""}:${Z}`,le),oe=cr(`commercialSummary:${n?.id||""}:${Z}`,ue),be=cr(`alerts:${n?.id||""}:${Z}`,Ze),Me=be||[],Ge=cr(`revenueTs:${n?.id||""}:${Z}`,Je),ut=cr(`cashflowTs:${n?.id||""}:${Z}`,ot),Kt=cr(`inventoryMap:${n?.id||""}:${Z}`,jt),tn=cr(`inventoryRanking:${n?.id||""}:${Z}`,dt),ln=cr(`topClients:${n?.id||""}:${Z}`,Tt),Ut=cr(`aging:${n?.id||""}:${Z}`,Ft),yn=cr(`oohOps:${n?.id||""}:${Z}`,Q),Kn=cr(`pop:${n?.id||""}:${Z}`,pe),ps=cr(`stalledProposals:${n?.id||""}:${Z}`,Fe),Pn=cr(`sellerRanking:${n?.id||""}:${Z}`,$e),rn=Ge?.points||[],hn=ut?.points||[],fn=Kt?.pins||[],Rn=tn?.rows||[],Vn=ln?.rows||[],Sn=yn?.items||[],ts=Kn?.rows||[],ft=ps?.rows||[],sn=Pn?.rows||[],$t=p.useMemo(()=>({companyId:n?.id?String(n.id):void 0,tab:i,backendQs:Z}),[n?.id,i,Z]);Ys("overview",xe,$t),Ys("alerts",Ze,$t),Ys("funnel",le,$t),Ys("commercialSummary",ue,$t),Ys("stalledProposals",Fe,$t),Ys("sellerRanking",$e,$t),Ys("revenueTs",Je,$t),Ys("cashflowTs",ot,$t),Ys("topClients",Tt,$t),Ys("aging",Ft,$t),Ys("oohOps",Q,$t),Ys("pop",pe,$t),Ys("inventoryMap",jt,$t),Ys("inventoryRanking",dt,$t),Ys("drilldown",Xe,$t),p.useEffect(()=>{MR()},[]),p.useEffect(()=>{N.variant==="compact"&&i!=="executivo"&&l("executivo")},[N.variant,i]),p.useEffect(()=>{if(!(j!=="backend"||![xe,Ze].some(Se=>{const It=String(Se?.source||"");return Se.status==="error"||It.includes("fallback")}))){S("mock");try{sessionStorage.setItem("oneMedia.dashboard.dataMode.session","mock")}catch{}Ie.error("Dashboard: fallback para mock",{description:"O backend falhou para alguns widgets. Mantendo a UI estvel enquanto investigamos."})}},[j,xe.status,Ze.status,xe.source,Ze.source]);const An=p.useMemo(()=>n?_s.getPublicMapUrl(n.id):"",[n]);p.useEffect(()=>{G(()=>({open:!1,key:void 0,title:"",rows:[],hint:void 0,status:"idle",errorMessage:void 0,sortBy:void 0,sortDir:void 0,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""}))},[i]),p.useEffect(()=>{w.allowedTabs.includes(i)||l(w.allowedTabs[0]||"executivo")},[fe,i]),p.useEffect(()=>{w.canManageSavedViews&&(!R||!O||te(Pg(R,O)))},[R,O,w.canManageSavedViews]),p.useEffect(()=>{X&&(H.some(re=>re.id===X)||q(""))},[X,H]);const bn=re=>gR(f,re);if(!n||!s)return e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dashboard..."})]})})});const xn=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(An),$(!0),Ie.success("Link do mapa copiado para a rea de transferncia!"),setTimeout(()=>$(!1),2e3);else{const re=document.createElement("textarea");re.value=An,re.style.position="fixed",re.style.left="-999999px",re.style.top="-999999px",document.body.appendChild(re),re.focus(),re.select();try{document.execCommand("copy")?($(!0),Ie.success("Link do mapa copiado para a rea de transferncia!"),setTimeout(()=>$(!1),2e3)):Ie.error("No foi possvel copiar. Por favor, copie manualmente.")}catch{Ie.error("No foi possvel copiar. Por favor, copie manualmente.")}document.body.removeChild(re)}}catch{Ie.error("No foi possvel copiar. Por favor, copie manualmente.")}},Ce=async()=>{try{const re=XR();if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(re),Ie.success("Checklist de paridade copiado!");return}const Se=document.createElement("textarea");Se.value=re,Se.style.position="fixed",Se.style.left="-999999px",Se.style.top="-999999px",document.body.appendChild(Se),Se.focus(),Se.select();const It=document.execCommand("copy");document.body.removeChild(Se),It?Ie.success("Checklist de paridade copiado!"):Ie.error("No foi possvel copiar.")}catch{Ie.error("No foi possvel copiar.")}},Qe=(re,Se,It,dn)=>{const Mt={};if(dn)for(const[wn,rt]of Object.entries(dn))typeof rt=="string"&&rt.length>0&&(Mt[wn]=rt);const Hn=Vf(Se),_t=Hn.defaultSort?.by,os=Hn.defaultSort?.dir,Zt=qm(Y,{limit:String(Wm),sortBy:_t,sortDir:os,...Mt}),xt=`BACKEND: GET ${Bt.drilldown}/${Se}?${Zt}`;G({open:!0,key:Se,params:Object.keys(Mt).length?Mt:void 0,title:re,rows:[],hint:It?`${It}  ${xt}`:xt,status:"loading",errorMessage:void 0,sortBy:_t,sortDir:os,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""})},nt=re=>{const Se=String(n?.name??n?.title??n?.label??n.id),It=`${La(Y.dateFrom)} - ${La(Y.dateTo)}`,dn=[{label:"Empresa",value:Se},{label:"Aba",value:Ct(i)},{label:"Perodo",value:It},{label:"Tipo",value:String(h.mediaType)}];return h.query&&dn.push({label:"Busca",value:String(h.query)}),h.city&&dn.push({label:"Cidade",value:String(h.city)}),[...re||[],...dn]},ge=re=>{const Se=document.getElementById("dashboard-export-root");if(!Se){Ie.error("No foi possvel exportar PDF: rea do dashboard no encontrada");return}const It=new Date().toISOString().slice(0,7),dn=re==="monthly"?`Snapshot mensal  ${Ct(i)}`:`Dashboard  ${Ct(i)}`,Mt=String(n?.name??n?.title??n?.label??n.id),Hn=nt(re==="monthly"?[{label:"Snapshot",value:It}]:void 0);rb({element:Se,title:dn,subtitle:Mt,meta:Hn})},Ee=(re,Se)=>{const It=document.getElementById(re);if(!It){Ie.error("No foi possvel exportar o widget: elemento no encontrado");return}const dn=`${String(n?.name??n?.title??n.id)}  ${Ct(i)}`;rb({element:It,title:Se,subtitle:dn,meta:nt()})},Te=()=>{const Se=new Date().toISOString().slice(0,10).replace(/-/g,""),dn=`dashboard_${Ct(i).toLowerCase().replace(/[^a-z0-9]+/gi,"_")}_${Se}.csv`,Mt=[],Hn=String(n?.name??n?.title??n?.label??n.id);Mt.push(["Empresa",Hn]),Mt.push(["Aba",Ct(i)]),Mt.push(["Perodo",`${La(Y.dateFrom)} - ${La(Y.dateTo)}`]),Mt.push(["Tipo",String(h.mediaType)]),h.city&&Mt.push(["Cidade",String(h.city)]),h.query&&Mt.push(["Busca",String(h.query)]);const _t=(Zt,xt)=>Mt.push([Zt,xt==null?"":String(xt)]);if(i==="executivo"){de&&(_t("Receita reconhecida",Yt(de.revenueRecognizedCents)),_t("A faturar",Yt(de.revenueToInvoiceCents)),_t("Ocupao",`${de.occupancyPercent}%`),_t("Inadimplncia",Yt(de.receivablesOverdueCents)),_t("Campanhas ativas",de.campaignsActiveCount),_t("Clientes ativos",de.clientsActiveCount),_t("Ticket mdio",Yt(de.averageTicketCents)));const Zt=Me.filter(rt=>rt.severity==="HIGH").length,xt=Me.filter(rt=>rt.severity==="MEDIUM").length,wn=Me.filter(rt=>rt.severity==="LOW").length;_t("Alertas HIGH",Zt),_t("Alertas MEDIUM",xt),_t("Alertas LOW",wn),Vn.slice(0,8).forEach((rt,Qt)=>{_t(`Top cliente ${Qt+1}`,`${rt.name}  ${Yt(rt.amountCents)} (${rt.campaignsCount} camp.)`)})}else if(i==="comercial")oe&&(_t("Propostas (total)",oe.proposalsTotal),_t("Taxa de aprovao",`${oe.approvalRatePercent}%`),_t("Ciclo mdio (dias)",oe.averageDaysToClose),_t("Pipeline ativo",Yt(oe.activePipelineAmountCents)),_t("Propostas paradas",oe.stalledProposalsCount)),Oe?.stages?.forEach(Zt=>{_t(`Funil  ${Zt.label} (qtde)`,Zt.count),_t(`Funil  ${Zt.label} (valor)`,Yt(Zt.amountCents))}),ft.slice(0,8).forEach((Zt,xt)=>{_t(`Parada ${xt+1}`,`${Zt.title}  ${Zt.client}  ${Zt.daysWithoutUpdate}d  ${Yt(Zt.amountCents)}`)}),sn.slice(0,8).forEach((Zt,xt)=>{_t(`Vendedor ${xt+1}`,`${Zt.name}  ganhos: ${Zt.dealsWon} (${Yt(Zt.amountWonCents)})  pipeline: ${Zt.dealsInPipeline}`)});else if(i==="operacoes"){const Zt=Sn.filter(Rs=>Rs.status==="OK").length,xt=Sn.filter(Rs=>Rs.status==="PENDING").length,wn=Sn.filter(Rs=>Rs.status==="LATE").length;_t("OOH  itens OK",Zt),_t("OOH  pendncias",xt),_t("OOH  atrasos",wn);const rt=ts.length?Math.round(ts.reduce((Rs,Rr)=>Rs+Rr.uptimePercent,0)/ts.length):0,Qt=ts.reduce((Rs,Rr)=>Rs+Rr.plays,0);_t("DOOH  telas",ts.length),_t("DOOH  uptime mdio",`${rt}%`),_t("DOOH  plays",Qt)}else if(i==="financeiro")hn.length&&_t("Fluxo caixa (ltimo)",Yt(hn[hn.length-1].valueCents)),Ut&&(_t("Recebveis (total)",Yt(Ut.totalCents)),Ut.buckets.slice(0,12).forEach(Zt=>{_t(`Aging  ${Zt.label}`,Yt(Zt.amountCents))}));else if(i==="inventario"){_t("Pins (mapa)",fn.length);const Zt=fn.length?Math.round(fn.reduce((xt,wn)=>xt+(wn.occupancyPercent||0),0)/fn.length):0;_t("Ocupao mdia (mapa)",`${Zt}%`),Rn.slice(0,10).forEach((xt,wn)=>{_t(`Ranking ${wn+1}`,`${xt.label}${xt.city?` (${xt.city})`:""}  occ: ${xt.occupancyPercent}%  camp: ${xt.activeCampaigns}  ${Yt(xt.revenueCents)}`)})}const os=["key;value",...Mt.map(([Zt,xt])=>[Zt,xt].map(va).join(";"))];Uh(dn,os.join(`
`),"text/csv;charset=utf-8"),Ie.success("CSV exportado",{description:dn})},wt=()=>{m(c),b(c),Ie.success("Filtros limpos")},Ct=re=>re==="executivo"?"Executivo":re==="comercial"?"Comercial":re==="operacoes"?"Operaes":re==="financeiro"?"Financeiro":re==="inventario"?"Inventrio":re,jn=re=>{const Se=w.allowedTabs.includes(re.tab)?re.tab:w.allowedTabs[0]||"executivo";Se!=re.tab?Ie.message("Viso aplicada com ajustes",{description:`A aba "${Ct(re.tab)}" no est liberada para seu perfil. Abrimos "${Ct(Se)}".`}):Ie.success(`Viso aplicada: ${re.name}`),l(Se),m(re.filters),b(re.filters)},qt=re=>{if(q(re),!re)return;const Se=H.find(It=>It.id===re);Se&&jn(Se)},cn=re=>{if(w.canManageSavedViews){if(ee(re),re==="update"&&X){const Se=H.find(It=>It.id===X);J(Se?.name||"")}else J(`Minha viso - ${Ct(i)}`);M(!0)}},gn=()=>{if(!w.canManageSavedViews)return;if(!R||!O){Ie.error("No foi possvel salvar a viso: faltam dados de usurio/empresa");return}const re=(me||"").trim();if(!re){Ie.error("Informe um nome para a viso");return}const Se=new Date().toISOString(),It={version:1},dn=B==="update"?H.find(os=>os.id===X):void 0,Mt=dn?.id||AR(),Hn={id:Mt,name:re,tab:i,filters:h,layout:It,createdAt:dn?.createdAt||Se,updatedAt:Se},_t=ER(R,O,Hn);te(_t),q(Mt),M(!1),Ie.success(B==="update"?"Viso atualizada":"Viso salva",{description:"MVP (localStorage). BACKEND: futuramente /dashboard/views (por usurio/empresa)."})},Xn=()=>{if(!w.canManageSavedViews||!R||!O||!X)return;const re=H.find(dn=>dn.id===X);if(!window.confirm(`Excluir a viso "${re?.name||"Sem nome"}"?`))return;const It=kR(R,O,X);te(It),q(""),Ie.success("Viso excluda")},is=(re,Se)=>Se.status==="error"?{title:re,description:Se.errorMessage||"Tente novamente."}:null,Ps=xe.status!=="ready",ko=le.status!=="ready",Ii=ue.status!=="ready",Cl=()=>{try{ib({companyId:n?.id,userId:s?.id||s?.email,variant:"compact",ttlMs:3600*1e3,reason:"Rollback automtico: erro de runtime"})}catch{}},To=N.variant==="compact"||N.source!=="default"||j!==Bf,Oc=e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs(Ue,{children:[e.jsx(Ec,{children:e.jsx(kc,{children:"Dashboard em modo seguro"})}),e.jsxs(Ve,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ocorreu um erro ao renderizar o dashboard. Para evitar impacto em produo, mantivemos a tela em modo compacto (menor risco)."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ne,{className:"h-9",onClick:()=>window.location.reload(),children:"Recarregar"}),N.canOverride?e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>A("v2"),children:"Tentar v2"}):null]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Rollout: ",e.jsx("span",{className:"font-medium",children:N.variant})," (",N.source,")  dados:"," ",e.jsx("span",{className:"font-medium",children:j})]})]})]})});return e.jsx(OR,{fallback:Oc,onError:Cl,children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Viso geral  filtros globais  drill-down por widget (mock)"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(ne,{className:"h-9 flex items-center gap-2",onClick:()=>t("proposals"),children:[e.jsx(Ss,{className:"w-4 h-4"}),"Nova Proposta"]}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>t("inventory"),children:[e.jsx(Ss,{className:"w-4 h-4"}),"Nova Mdia"]}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>t("mediakit"),children:[e.jsx($j,{className:"w-4 h-4"}),"Mdia Kit"]}),N.canOverride?e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>E(!0),children:[e.jsx(sP,{className:"w-4 h-4"}),"Paridade"]}):null,N.variant!=="compact"?e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ae(!0),children:[e.jsx(Zj,{className:"w-4 h-4"}),"Compartilhar Mapa"]}):null]})]}),To?e.jsx(Ue,{children:e.jsx(Ve,{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Rollout:"})," ",N.variant," (",N.source,")  ",N.reason,e.jsx("span",{className:"mx-2",children:""}),e.jsx("span",{className:"font-medium",children:"Dados:"})," ",j]}),N.canOverride?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-8 text-xs",onClick:()=>A("v2"),children:"Forar v2"}),e.jsx(ne,{variant:"outline",className:"h-8 text-xs",onClick:()=>A("compact"),children:"Rollback"})]}):null]})})}):null,e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(Ch,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"Filtros globais"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Todos os widgets reagem a estes filtros"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.canManageSavedViews?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"h-9 rounded-md border border-gray-200 bg-white px-3 text-sm min-w-[180px]",value:X,onChange:re=>qt(re.target.value),children:[e.jsx("option",{value:"",children:"Vises salvas"}),H.map(re=>e.jsx("option",{value:re.id,children:re.name},re.id))]}),X?e.jsx(ne,{variant:"ghost",className:"h-9 px-2",onClick:()=>q(""),title:"Desselecionar",children:e.jsx(pr,{className:"w-4 h-4"})}):null]}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>cn("create"),children:[e.jsx(Ss,{className:"w-4 h-4"}),"Salvar viso"]}),X?e.jsxs(e.Fragment,{children:[e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>cn("update"),children:[e.jsx(Dr,{className:"w-4 h-4"}),"Atualizar"]}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:Xn,children:[e.jsx(pr,{className:"w-4 h-4"}),"Excluir"]})]}):null]}):null,e.jsx(ne,{variant:"outline",className:"h-9",onClick:wt,children:"Limpar"}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:Te,children:[e.jsx(dl,{className:"w-4 h-4"}),"Exportar CSV"]}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ge("view"),children:[e.jsx(dl,{className:"w-4 h-4"}),"Exportar PDF"]}),e.jsxs(ne,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ge("monthly"),children:[e.jsx(dl,{className:"w-4 h-4"}),"Snapshot mensal"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Perodo"}),e.jsxs("select",{className:"w-full h-9 rounded-md border border-gray-200 bg-white px-3 text-sm",value:h.datePreset,onChange:re=>{const Se=re.target.value;m(It=>({...It,datePreset:Se})),b(It=>({...It,datePreset:Se}))},children:[e.jsx("option",{value:"7d",children:"ltimos 7 dias"}),e.jsx("option",{value:"30d",children:"ltimos 30 dias"}),e.jsx("option",{value:"90d",children:"ltimos 90 dias"}),e.jsx("option",{value:"ytd",children:"Ano (YTD)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Buscar"}),e.jsx(Pe,{value:h.query,onChange:re=>m(Se=>({...Se,query:re.target.value})),placeholder:"cliente, campanha, proposta...",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Cidade/Regio"}),e.jsx(Pe,{value:h.city,onChange:re=>m(Se=>({...Se,city:re.target.value})),placeholder:"ex: Braslia",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full h-9 rounded-md border border-gray-200 bg-white px-3 text-sm",value:h.mediaType,onChange:re=>{const Se=re.target.value;m(It=>({...It,mediaType:Se})),b(It=>({...It,mediaType:Se}))},children:[e.jsx("option",{value:"ALL",children:"OOH + DOOH"}),e.jsx("option",{value:"OOH",children:"OOH"}),e.jsx("option",{value:"DOOH",children:"DOOH"})]})]})]}),v?e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Aplicando filtros"}):null,e.jsxs("div",{className:"mt-4 flex items-center gap-2 flex-wrap",children:[e.jsx(vi,{label:"Perodo",value:h.datePreset.toUpperCase()}),h.query?e.jsx(vi,{label:"Busca",value:h.query}):null,h.city?e.jsx(vi,{label:"Cidade",value:h.city}):null,e.jsx(vi,{label:"Tipo",value:h.mediaType})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.allowedTabs.includes("executivo")?e.jsx(Ad,{active:i==="executivo",icon:e.jsx(Xx,{className:"w-4 h-4"}),label:"Executivo",onClick:()=>l("executivo")}):null,N.variant!=="compact"&&w.allowedTabs.includes("comercial")?e.jsx(Ad,{active:i==="comercial",icon:e.jsx(WA,{className:"w-4 h-4"}),label:"Comercial",onClick:()=>l("comercial")}):null,N.variant!=="compact"&&w.allowedTabs.includes("operacoes")?e.jsx(Ad,{active:i==="operacoes",icon:e.jsx(ZA,{className:"w-4 h-4"}),label:"Operaes",onClick:()=>l("operacoes")}):null,N.variant!=="compact"&&w.allowedTabs.includes("financeiro")?e.jsx(Ad,{active:i==="financeiro",icon:e.jsx(Sh,{className:"w-4 h-4"}),label:"Financeiro",onClick:()=>l("financeiro")}):null,N.variant!=="compact"&&w.allowedTabs.includes("inventario")?e.jsx(Ad,{active:i==="inventario",icon:e.jsx(wh,{className:"w-4 h-4"}),label:"Inventrio",onClick:()=>l("inventario")}):null]})]}),i==="executivo"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ds,{label:"Receita reconhecida",value:de?Yt(de.revenueRecognizedCents):void 0,delta:de?.trends.revenue.deltaPercent,spark:de?.trends.revenue.points,loading:Ps,onClick:()=>Qe("Receita reconhecida","revenueRecognized","BACKEND: /dashboard/revenue/recognized")}),e.jsx(ds,{label:"A faturar",value:de?Yt(de.revenueToInvoiceCents):void 0,helper:"Forecast simplificado (mock)",loading:Ps,onClick:()=>Qe("A faturar","revenueToInvoice","BACKEND: /dashboard/revenue/to-invoice")}),e.jsx(ds,{label:"Ocupao",value:de?`${de.occupancyPercent}%`:void 0,delta:de?.trends.occupancy.deltaPercent,spark:de?.trends.occupancy.points,loading:Ps,onClick:()=>Qe("Ocupao","occupancy","BACKEND: /dashboard/occupancy")}),e.jsx(ds,{label:"Inadimplncia",value:de?Yt(de.receivablesOverdueCents):void 0,helper:"Aging (mock)",loading:Ps,onClick:()=>Qe("Inadimplncia","receivablesOverdue","BACKEND: /dashboard/receivables/aging")})]}),e.jsx(Zr,{id:"dash-widget-alerts",title:"Ateno hoje",subtitle:"Alertas inteligentes (mock)  filtrados pela busca",loading:Ze.status==="loading"&&!be,error:is("Falha ao carregar alertas",Ze),empty:Me.length===0&&Ze.status==="ready",emptyTitle:"Sem alertas",emptyDescription:bn("Nada para destacar com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ze.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-alerts","Ateno hoje"),children:"Exportar PDF"})]}),children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:Me.map(re=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(QR,{severity:re.severity}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:re.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:re.description})]}),e.jsx(Kj,{className:"w-4 h-4 text-gray-400"})]}),re.ctaLabel&&re.ctaPage?e.jsx(ne,{variant:"outline",className:"w-full mt-3 h-9",onClick:()=>t(re.ctaPage),children:re.ctaLabel}):null]},re.id))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Zr,{id:"dash-widget-revenue-trend",title:"Tendncia de Receita",subtitle:`Srie (${Je.source})`,loading:Je.status==="loading"&&!Ge,error:is("Falha ao carregar srie",Je),empty:rn.length===0&&Je.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("No h pontos para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Je.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>sb("tendencia_receita",rn),children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-revenue-trend","Tendncia de Receita"),children:"Exportar PDF"})]}),children:rn.length>0?e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:Yt(rn[rn.length-1].valueCents)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ltimo ponto: ",La(rn[rn.length-1].date)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.revenueTimeseries,"?",Z]})]}),e.jsx(kx,{points:nb(rn)})]}):e.jsx("div",{className:"h-40 border border-dashed border-gray-200 rounded-lg flex items-center justify-center text-sm text-gray-500",children:"Srie sem dados"})}),e.jsx(Zr,{id:"dash-widget-top-clients",title:"Top Clientes",subtitle:`Ranking (${Tt.source})`,loading:Tt.status==="loading"&&!ln,error:is("Falha ao carregar ranking",Tt),empty:Vn.length===0&&Tt.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("Nenhum cliente encontrado com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Tt.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{const re=Vn.map(Se=>({id:Se.id,title:Se.name,subtitle:`${Se.city||""}  Campanhas: ${Se.campaignsCount}`.trim(),status:"",amountCents:Se.amountCents}));tl("top_clientes",re)},children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-top-clients","Top Clientes"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Top Clientes","topClients",`BACKEND: ${Bt.topClients}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Vn.slice(0,5).map((re,Se)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[Se+1,". ",re.name]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[re.city?`${re.city}  `:"","Campanhas: ",re.campaignsCount,typeof re.averageTicketCents=="number"?`  Ticket: ${Yt(re.averageTicketCents)}`:""]})]}),e.jsx("span",{className:"text-sm text-gray-700",children:Yt(re.amountCents)})]},re.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.topClients,"?",Z]})]})})]})]}):null,i==="comercial"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ds,{label:"Propostas (perodo)",value:oe?String(oe.proposalsTotal):void 0,delta:de?.trends.proposals.deltaPercent,spark:de?.trends.proposals.points,loading:Ii,onClick:()=>Qe("Propostas","proposalsTotal","BACKEND: /dashboard/proposals")}),e.jsx(ds,{label:"Taxa de aprovao",value:oe?`${oe.approvalRatePercent}%`:void 0,helper:`BACKEND: ${Bt.commercialSummary}?${Z}`,loading:Ii}),e.jsx(ds,{label:"Ciclo mdio",value:oe?`${oe.averageDaysToClose} dias`:Oe?`${Oe.averageDaysToClose} dias`:void 0,helper:`BACKEND: ${Bt.commercialSummary}?${Z}`,loading:Ii&&ko}),e.jsx(ds,{label:"Campanhas ativas",value:de?String(de.campaignsActiveCount):void 0,helper:de?`Total: ${Yt(de.campaignsActiveAmountCents)}`:"",loading:Ps,onClick:()=>Qe("Campanhas ativas","campaignsActive","BACKEND: /dashboard/campaigns/active")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Zr,{id:"dash-widget-funnel",title:"Funil comercial",subtitle:`Pipeline por etapa (${le.source})`,loading:ko,error:is("Falha ao carregar funil",le),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>le.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{if(!Oe)return;const re=Oe.stages.map(Se=>({id:Se.key,title:Se.label,subtitle:`Qtd: ${Se.count}`,status:"",amountCents:Se.amountCents}));tl("funil_comercial",re)},children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-funnel","Funil comercial"),children:"Exportar PDF"})]}),children:Oe?e.jsxs("div",{className:"space-y-4",children:[Oe.stages.map(re=>{const Se=Math.max(...Oe.stages.map(dn=>dn.count),1),It=Math.round(re.count/Se*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:re.label}),e.jsx("p",{className:"text-sm text-gray-900",children:re.count})]}),e.jsx("div",{className:"w-full h-2 rounded bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-gray-300",style:{width:`${It}%`}})}),re.amountCents>0?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Yt(re.amountCents)}):null]},re.key)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-4 backend-hint",children:["BACKEND: ",Bt.funnel,"?",Z]})]}):null}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Zr,{id:"dash-widget-stalled-proposals",title:"Propostas paradas",subtitle:`Aes rpidas (${Fe.source})`,loading:Fe.status==="loading"&&!ps,error:is("Falha ao carregar lista",Fe),empty:ft.length===0&&Fe.status==="ready",emptyTitle:"Nada aqui",emptyDescription:bn("Nenhuma proposta parou com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Fe.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{const re=ft.map(Se=>({id:Se.id,title:Se.title,subtitle:`${Se.client}  ${Se.daysWithoutUpdate} dias sem atualizao`,status:"",amountCents:Se.amountCents}));tl("propostas_paradas",re)},children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-stalled-proposals","Propostas paradas"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Propostas paradas","stalledProposals",`BACKEND: ${Bt.stalledProposals}?${Z}`),children:"Ver todas"})]}),children:e.jsxs("div",{className:"space-y-3",children:[ft.slice(0,5).map(re=>e.jsx("button",{type:"button",className:"w-full text-left border border-gray-200 rounded-lg p-3 hover:bg-gray-50",onClick:()=>t("proposals"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:re.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[re.client,"  ",re.daysWithoutUpdate," dias sem atualizao"]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:Yt(re.amountCents)})]})},re.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.stalledProposals,"?",Z]})]})}),e.jsx(Zr,{id:"dash-widget-seller-ranking",title:"Ranking de vendedores",subtitle:`Performance (${$e.source})`,loading:$e.status==="loading"&&!Pn,error:is("Falha ao carregar ranking",$e),empty:sn.length===0&&$e.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("Nenhum vendedor encontrado com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>$e.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{const re=sn.map(Se=>({id:Se.id,title:Se.name,subtitle:`${Se.city||""}  Ganhas: ${Se.dealsWon}  Pipeline: ${Se.dealsInPipeline}`.trim(),status:"",amountCents:Se.amountWonCents}));tl("ranking_vendedores",re)},children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-seller-ranking","Ranking de vendedores"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Ranking de vendedores","sellerRanking",`BACKEND: ${Bt.sellerRanking}?${Z}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[sn.slice(0,6).map((re,Se)=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[Se+1,". ",re.name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[re.city?`${re.city}  `:"","Ganhas: ",re.dealsWon,"  Pipeline: ",re.dealsInPipeline]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-700",children:Yt(re.amountWonCents)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Pipeline: ",Yt(re.amountPipelineCents)]})]})]},re.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.sellerRanking,"?",Z]})]})})]})]})]}):null,i==="operacoes"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ds,{label:"Aguardando material",value:String(2+bs(n.id)%7),helper:"SLA (mock)",onClick:()=>Qe("Aguardando material","awaitingMaterial","BACKEND: /dashboard/campaigns/awaiting-material")}),e.jsx(ds,{label:"Em instalao",value:String(1+bs(n.id+"inst")%5),helper:"BACKEND: /dashboard/ops/installation"}),e.jsx(ds,{label:"DOOH Uptime",value:`${92+bs(n.id+"upt")%7}%`,helper:"BACKEND: /dashboard/dooh/uptime"}),e.jsx(ds,{label:"Falhas / Offline",value:String(bs(n.id+"off")%9),helper:"BACKEND: /dashboard/dooh/offline"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Zr,{id:"dash-widget-ooh-ops",title:"Status operacional (OOH)",subtitle:`Checklist / SLA / pendncias (${Q.source})`,loading:Q.status==="loading"&&!yn,error:is("Falha ao carregar status operacional",Q),empty:Sn.length===0&&Q.status==="ready",emptyTitle:"Sem pendncias",emptyDescription:bn("Nada em aberto com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Q.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{const re=Sn.map(Se=>({id:Se.id,title:Se.title,subtitle:`${Se.city||""}${Se.dueDate?`  At: ${La(Se.dueDate)}`:""}`.trim(),status:Se.status}));tl("ooh_status_operacional",re)},children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-ooh-ops","Status operacional (OOH)"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Status operacional (OOH)","oohOps",`BACKEND: ${Bt.oohOpsSummary}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Sn.slice(0,6).map(re=>{const Se=re.status==="OK"?"bg-green-100 text-green-700":re.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-700";return e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:re.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[re.city?`${re.city}  `:"",re.dueDate?`At: ${La(re.dueDate)}`:""]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${Se}`,children:re.status})]},re.id)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.oohOpsSummary,"?",Z]})]})}),e.jsx(Zr,{id:"dash-widget-pop",title:"Proof-of-play (DOOH)",subtitle:`Relatrio POP (${pe.source})`,loading:pe.status==="loading"&&!Kn,error:is("Falha ao carregar POP",pe),empty:ts.length===0&&pe.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("Nenhum registro POP com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>pe.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{const re=ts.map(Se=>({id:Se.id,title:Se.screen,subtitle:`${Se.city||""}${Se.lastSeen?`  ${La(Se.lastSeen)}`:""}`.trim(),status:`${Se.uptimePercent}%`}));tl("proof_of_play",re)},children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-pop","Proof-of-play (DOOH)"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Proof-of-play (DOOH)","proofOfPlay",`BACKEND: ${Bt.doohProofOfPlaySummary}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[ts.slice(0,6).map(re=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:re.screen}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[re.city?`${re.city}  `:"","Plays: ",re.plays,"  ltimo: ",re.lastSeen?La(re.lastSeen):""]})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:[re.uptimePercent,"%"]})]},re.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.doohProofOfPlaySummary,"?",Z]})]})})]})]}):null,i==="financeiro"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ds,{label:"Contas a receber",value:de?Yt(de.revenueToInvoiceCents+9e5):void 0,helper:"Forecast (mock)",loading:Ps,onClick:()=>Qe("Contas a receber","receivablesOpen","BACKEND: /dashboard/receivables/open")}),e.jsx(ds,{label:"A vencer (7 dias)",value:de?Yt(de.revenueToInvoiceCents*.35):void 0,helper:"BACKEND: /dashboard/receivables/due-7d",loading:Ps}),e.jsx(ds,{label:"Vencidas",value:de?Yt(de.receivablesOverdueCents):void 0,helper:"Aging (mock)",loading:Ps,onClick:()=>Qe("Vencidas","receivablesOverdue","BACKEND: /dashboard/receivables/overdue")}),e.jsx(ds,{label:"Recebido no ms",value:de?Yt(de.revenueRecognizedCents*.42):void 0,helper:"BACKEND: /dashboard/cashflow/received-this-month",loading:Ps})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Zr,{id:"dash-widget-cashflow",title:"Fluxo de caixa",subtitle:`Srie (${ot.source})`,loading:ot.status==="loading"&&!ut,error:is("Falha ao carregar srie",ot),empty:hn.length===0&&ot.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("No h pontos para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>ot.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>sb("fluxo_caixa",hn),children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-cashflow","Fluxo de caixa"),children:"Exportar PDF"})]}),children:hn.length>0?e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:Yt(hn[hn.length-1].valueCents)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ltimo ponto: ",La(hn[hn.length-1].date)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.cashflowTimeseries,"?",Z]})]}),e.jsx(kx,{points:nb(hn)})]}):e.jsx("div",{className:"h-40 border border-dashed border-gray-200 rounded-lg flex items-center justify-center text-sm text-gray-500",children:"Srie sem dados"})}),e.jsx(Zr,{id:"dash-widget-aging",title:"Aging",subtitle:`Distribuio por faixa (${Ft.source})`,loading:Ft.status==="loading"&&!Ut,error:is("Falha ao carregar aging",Ft),empty:(Ut?.buckets?.length||0)===0&&Ft.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("No h faixas de aging para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ft.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>vR("aging",Ut?.buckets||[],Ut?.totalCents),children:"Exportar CSV"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-aging","Aging"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Aging","aging",`BACKEND: ${Bt.receivablesAgingSummary}`),children:"Ver lista"})]}),children:e.jsxs("div",{className:"space-y-3",children:[(Ut?.buckets||[]).map(re=>{const Se=Math.max(...(Ut?.buckets||[]).map(dn=>dn.amountCents),1),It=Math.round(re.amountCents/Se*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:re.label}),e.jsx("p",{className:"text-sm text-gray-900",children:Yt(re.amountCents)})]}),e.jsx("div",{className:"w-full h-2 rounded bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-gray-300",style:{width:`${It}%`}})})]},re.label)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.receivablesAgingSummary,"?",Z]})]})})]})]}):null,i==="inventario"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ds,{label:"Inventrio total",value:de?String(de.inventoryTotalPoints):void 0,helper:"BACKEND: /dashboard/inventory/summary",loading:Ps,onClick:()=>t("inventory")}),e.jsx(ds,{label:"Disponveis",value:de?String(Math.round(de.inventoryTotalPoints*(1-de.occupancyPercent/100))):void 0,helper:de?`Ocupao: ${de.occupancyPercent}%`:"",loading:Ps}),e.jsx(ds,{label:"Clientes ativos",value:de?String(de.clientsActiveCount):void 0,helper:de?`Ticket mdio: ${Yt(de.averageTicketCents)}`:"",loading:Ps}),e.jsx(ds,{label:"Campanhas ativas",value:de?String(de.campaignsActiveCount):void 0,helper:de?`Total: ${Yt(de.campaignsActiveAmountCents)}`:"",loading:Ps})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Zr,{id:"dash-widget-inventory-map",title:"Mapa e ocupao",subtitle:`Pins (${jt.source})`,loading:jt.status==="loading"&&!Kt,error:is("Falha ao carregar mapa",jt),empty:fn.length===0&&jt.status==="ready",emptyTitle:"Sem pontos",emptyDescription:bn("Nenhum ponto encontrado para os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>jt.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>ae(!0),children:"Compartilhar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-inventory-map","Mapa e ocupao"),children:"Exportar PDF"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-xs backend-hint",children:["BACKEND: ",Bt.inventoryMap,"?",Z]}),e.jsx(aM,{pins:fn,height:320,onPinClick:re=>Qe(`Ponto  ${re.label}`,"inventoryPin","BACKEND: /dashboard/inventory/pin",{pinId:re.id,region:re.region||re.city||void 0,line:re.line||void 0})}),e.jsx(rM,{pins:fn,onSelect:(re,Se)=>Qe(`Ocupao  ${re} / ${Se}`,"inventoryRegionLine","BACKEND: /dashboard/inventory/map/heat",{region:re,line:Se})})]})}),e.jsx(Zr,{id:"dash-widget-inventory-ranking",title:"Ranking de pontos",subtitle:`Top 5 (${dt.source})`,loading:dt.status==="loading"&&!tn,error:is("Falha ao carregar ranking",dt),empty:Rn.length===0&&dt.status==="ready",emptyTitle:"Sem dados",emptyDescription:bn("Nenhum ponto ranqueado para os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>dt.refetch(),children:"Recarregar"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Ee("dash-widget-inventory-ranking","Ranking de pontos"),children:"Exportar PDF"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>Qe("Ranking de pontos","inventoryRanking","BACKEND: /dashboard/inventory/ranking"),children:"Ver lista"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Rn.slice(0,5).map((re,Se)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[Se+1,". ",re.label]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[re.city||"","  ",re.activeCampaigns," campanhas  ",Yt(re.revenueCents)]})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:[Math.round(re.occupancyPercent),"%"]})]},re.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Bt.inventoryRanking,"?",Z]})]})})]})]}):null,K.open?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>G(re=>({...re,open:!1}))}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-[520px] bg-white shadow-xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:K.title}),K.hint?e.jsx("p",{className:"text-xs text-gray-500 mt-1 backend-hint",children:K.hint}):null]}),e.jsx("button",{type:"button",className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>G(re=>({...re,open:!1})),children:e.jsx(pr,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Pe,{value:K.search,onChange:re=>G(Se=>({...Se,search:re.target.value})),placeholder:"Filtrar itens...",className:"h-9"}),e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{G(re=>({...re,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:"loading",errorMessage:void 0})),Xe.refetch()},disabled:!K.key||K.status==="loading",children:"Recarregar"})]}),(()=>{const re=Gr(K.search),Se=re?K.rows.filter(Mt=>Fa(`${Mt.id} ${Mt.title} ${Mt.subtitle||""} ${Mt.status||""}`,re)):K.rows,It=K.status==="loading"&&K.rows.length===0,dn=K.status==="loading"&&K.rows.length>0;return e.jsx(e.Fragment,{children:It?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ni,{className:"h-5 w-2/3"}),e.jsx(Ni,{className:"h-5 w-1/2"}),e.jsx(Ni,{className:"h-24 w-full"}),e.jsx(Ni,{className:"h-24 w-full"})]}):K.status==="error"?e.jsx(KN,{title:"Falha ao carregar detalhes",description:K.errorMessage}):Se.length===0?e.jsx(GN,{title:"Sem itens",description:"Nada encontrado para este recorte (ou filtro local)."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[Se.length," de ",K.rows.length," itens carregados",K.hasMore?"  mais disponvel":""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Fonte: ",Xe.source]})]}),(()=>{const Mt=Vf(K.key),Hn=Mt.columns,_t=K.sortBy,os=K.sortDir,Zt=xt=>{if(!xt.sortable)return;const wn=xt.sortKey||xt.id,rt=_t===wn&&os==="asc"?"desc":"asc";G(Qt=>({...Qt,sortBy:wn,sortDir:rt,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:"loading",errorMessage:void 0}))};return e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[Hn.map(xt=>{const wn=(_t||"")===(xt.sortKey||xt.id),rt=xt.sortable?wn?os==="asc"?e.jsx(Mj,{className:"w-4 h-4"}):e.jsx(eu,{className:"w-4 h-4"}):e.jsx(LA,{className:"w-4 h-4 opacity-60"}):null,Qt=e.jsxs("span",{className:"inline-flex items-center gap-1",children:[xt.label,rt]});return e.jsx("th",{className:["px-3 py-2 text-xs font-medium text-gray-600 whitespace-nowrap",xt.align==="right"?"text-right":"text-left"].join(" "),children:xt.sortable?e.jsx("button",{type:"button",className:"hover:text-gray-900",onClick:()=>Zt(xt),children:Qt}):Qt},xt.id)}),Mt.rowAction?e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-600 text-right whitespace-nowrap",children:"Aes"}):null]})}),e.jsx("tbody",{children:Se.map(xt=>e.jsxs("tr",{className:"border-t border-gray-200",children:[Hn.map(wn=>{const rt=wn.get(xt),Qt=wn.render?wn.render(rt,xt):e.jsx("span",{children:ms(rt)});return e.jsx("td",{className:["px-3 py-2 text-sm text-gray-800 whitespace-nowrap",wn.align==="right"?"text-right":"text-left"].join(" "),children:Qt},wn.id)}),Mt.rowAction?e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx(ne,{variant:"outline",className:"h-8",onClick:()=>t(Mt.rowAction.page),children:Mt.rowAction.label})}):null]},xt.id))})]})})})(),K.hasMore&&K.nextCursor?e.jsx(ne,{variant:"outline",className:"w-full h-9",onClick:()=>G(Mt=>({...Mt,cursor:Mt.nextCursor,status:"loading",errorMessage:void 0})),disabled:K.status==="loading",children:dn?"Carregando...":"Carregar mais"}):null,e.jsx(ne,{variant:"outline",className:"w-full h-9",onClick:()=>{const Mt=Vf(K.key);tl(K.title,Se,Mt.columns)},disabled:Se.length===0||K.status==="loading",children:"Exportar CSV (mock)"})]})})})()]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Este drawer  mock. Na integrao, ele abrir listas reais filtradas (com paginao/ordenao)."})})]})]}):null,e.jsx(Dn,{open:U,onOpenChange:M,children:e.jsxs(In,{className:"sm:max-w-md",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:B==="update"?"Atualizar viso":"Salvar viso"}),e.jsx(_i,{children:"Salva a aba atual, filtros globais e um layout (MVP) como um preset. No MVP fica no localStorage; depois ser persistido no backend."})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Nome da viso"}),e.jsx(Pe,{value:me,onChange:re=>J(re.target.value),className:"h-9"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(vi,{label:"Aba",value:Ct(i)}),e.jsx(vi,{label:"Perodo",value:h.datePreset.toUpperCase()}),h.city?e.jsx(vi,{label:"Cidade",value:h.city}):null,h.query?e.jsx(vi,{label:"Busca",value:h.query}):null,e.jsx(vi,{label:"Tipo",value:h.mediaType})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>M(!1),children:"Cancelar"}),e.jsx(ne,{className:"h-9",onClick:gn,children:B==="update"?"Atualizar":"Salvar"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"MVP: localStorage. BACKEND SWAP POINT: GET/POST/DELETE /dashboard/views (por usurio/empresa)."})]})]})}),e.jsx(Dn,{open:D,onOpenChange:E,children:e.jsxs(In,{className:"max-w-2xl",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:"Checklist de paridade com o backend"}),e.jsx(_i,{children:"Use esta lista para validar se os nmeros do Dashboard batem com o backend antes do rollout completo."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Dica: execute por empresa e compare os KPIs com relatrios/queries oficiais. Marque os itens conforme aprovar."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",className:"h-8 text-xs",onClick:Ce,children:"Copiar checklist"}),e.jsx(ne,{variant:"outline",className:"h-8 text-xs",onClick:()=>{KR(R,O),k({}),Ie.success("Checklist resetado")},children:"Reset"})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-md divide-y",children:ZN.map(re=>e.jsxs("div",{className:"p-3 flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",className:"mt-1",checked:!!T[re.id],onChange:()=>k(Se=>GR(R,O,Se,re.id))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:re.title}),e.jsx("p",{className:"text-xs text-gray-500",children:re.description}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Rota: ",e.jsx("span",{className:"font-medium",children:re.route}),"  Campos: ",re.fields.join(", ")]})]})]},re.id))})]})]})}),e.jsx(Dn,{open:W,onOpenChange:ae,children:e.jsxs(In,{className:"sm:max-w-md",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:"Compartilhar mapa de pontos"}),e.jsx(_i,{children:"Compartilhe o link pblico do mapa de pontos de mdia da sua empresa. Qualquer pessoa com o link poder visualizar os pontos disponveis."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"grid flex-1 gap-2",children:e.jsx(Pe,{id:"map-url",value:An,readOnly:!0,className:"h-9"})}),e.jsx(ne,{type:"button",size:"sm",className:"px-3",onClick:xn,children:F?e.jsxs(e.Fragment,{children:[e.jsx(Dr,{className:"h-4 w-4 mr-1"}),"Copiado"]}):e.jsxs(e.Fragment,{children:[e.jsx(Wa,{className:"h-4 w-4 mr-1"}),"Copiar link"]})})]})]})})]})})}var iM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oM=iM.reduce((t,s)=>{const n=ng(`Primitive.${s}`),i=p.forwardRef((l,c)=>{const{asChild:h,...m}=l,f=h?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...m,ref:c})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{}),lM="Label",YN=p.forwardRef((t,s)=>e.jsx(oM.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));YN.displayName=lM;var cM=YN;function we({className:t,...s}){return e.jsx(cM,{"data-slot":"label",className:pt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}var qf="rovingFocusGroup.onEntryFocus",dM={bubbles:!1,cancelable:!0},su="RovingFocusGroup",[Tx,QN,uM]=ag(su),[mM,Mc]=vr(su,[uM]),[hM,pM]=mM(su),JN=p.forwardRef((t,s)=>e.jsx(Tx.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Tx.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(fM,{...t,ref:s})})}));JN.displayName=su;var fM=p.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:l=!1,dir:c,currentTabStopId:h,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:f,onEntryFocus:b,preventScrollOnEntryFocus:v=!1,...g}=t,w=p.useRef(null),N=Wt(s,w),j=Tc(c),[S,A]=Qr({prop:h,defaultProp:m??null,onChange:f,caller:su}),[D,E]=p.useState(!1),T=Is(b),k=QN(n),R=p.useRef(!1),[O,H]=p.useState(0);return p.useEffect(()=>{const te=w.current;if(te)return te.addEventListener(qf,T),()=>te.removeEventListener(qf,T)},[T]),e.jsx(hM,{scope:n,orientation:i,dir:j,loop:l,currentTabStopId:S,onItemFocus:p.useCallback(te=>A(te),[A]),onItemShiftTab:p.useCallback(()=>E(!0),[]),onFocusableItemAdd:p.useCallback(()=>H(te=>te+1),[]),onFocusableItemRemove:p.useCallback(()=>H(te=>te-1),[]),children:e.jsx(gt.div,{tabIndex:D||O===0?-1:0,"data-orientation":i,...g,ref:N,style:{outline:"none",...t.style},onMouseDown:tt(t.onMouseDown,()=>{R.current=!0}),onFocus:tt(t.onFocus,te=>{const X=!R.current;if(te.target===te.currentTarget&&X&&!D){const q=new CustomEvent(qf,dM);if(te.currentTarget.dispatchEvent(q),!q.defaultPrevented){const U=k().filter(J=>J.focusable),M=U.find(J=>J.active),B=U.find(J=>J.id===S),me=[M,B,...U].filter(Boolean).map(J=>J.ref.current);n1(me,v)}}R.current=!1}),onBlur:tt(t.onBlur,()=>E(!1))})})}),e1="RovingFocusGroupItem",t1=p.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:l=!1,tabStopId:c,children:h,...m}=t,f=ga(),b=c||f,v=pM(e1,n),g=v.currentTabStopId===b,w=QN(n),{onFocusableItemAdd:N,onFocusableItemRemove:j,currentTabStopId:S}=v;return p.useEffect(()=>{if(i)return N(),()=>j()},[i,N,j]),e.jsx(Tx.ItemSlot,{scope:n,id:b,focusable:i,active:l,children:e.jsx(gt.span,{tabIndex:g?0:-1,"data-orientation":v.orientation,...m,ref:s,onMouseDown:tt(t.onMouseDown,A=>{i?v.onItemFocus(b):A.preventDefault()}),onFocus:tt(t.onFocus,()=>v.onItemFocus(b)),onKeyDown:tt(t.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){v.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const D=vM(A,v.orientation,v.dir);if(D!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let T=w().filter(k=>k.focusable).map(k=>k.ref.current);if(D==="last")T.reverse();else if(D==="prev"||D==="next"){D==="prev"&&T.reverse();const k=T.indexOf(A.currentTarget);T=v.loop?yM(T,k+1):T.slice(k+1)}setTimeout(()=>n1(T))}}),children:typeof h=="function"?h({isCurrentTabStop:g,hasTabStop:S!=null}):h})})});t1.displayName=e1;var xM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gM(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function vM(t,s,n){const i=gM(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return xM[i]}function n1(t,s=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:s}),document.activeElement!==n))return}function yM(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var Tg=JN,Dg=t1;function bM(t){const s=jM(t),n=p.forwardRef((i,l)=>{const{children:c,...h}=i,m=p.Children.toArray(c),f=m.find(NM);if(f){const b=f.props.children,v=m.map(g=>g===f?p.Children.count(b)>1?p.Children.only(null):p.isValidElement(b)?b.props.children:null:g);return e.jsx(s,{...h,ref:l,children:p.isValidElement(b)?p.cloneElement(b,void 0,v):null})}return e.jsx(s,{...h,ref:l,children:c})});return n.displayName=`${t}.Slot`,n}function jM(t){const s=p.forwardRef((n,i)=>{const{children:l,...c}=n;if(p.isValidElement(l)){const h=_M(l),m=CM(c,l.props);return l.type!==p.Fragment&&(m.ref=i?Pi(i,h):h),p.cloneElement(l,m)}return p.Children.count(l)>1?p.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var wM=Symbol("radix.slottable");function NM(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wM}function CM(t,s){const n={...s};for(const i in s){const l=t[i],c=s[i];/^on[A-Z]/.test(i)?l&&c?n[i]=(...m)=>{const f=c(...m);return l(...m),f}:l&&(n[i]=l):i==="style"?n[i]={...l,...c}:i==="className"&&(n[i]=[l,c].filter(Boolean).join(" "))}return{...t,...n}}function _M(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Dx=["Enter"," "],SM=["ArrowDown","PageUp","Home"],s1=["ArrowUp","PageDown","End"],AM=[...SM,...s1],PM={ltr:[...Dx,"ArrowRight"],rtl:[...Dx,"ArrowLeft"]},EM={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ru="Menu",[Zd,kM,TM]=ag(ru),[jl,r1]=vr(ru,[TM,Ih,Mc]),Vh=Ih(),a1=Mc(),[DM,wl]=jl(ru),[IM,au]=jl(ru),i1=t=>{const{__scopeMenu:s,open:n=!1,children:i,dir:l,onOpenChange:c,modal:h=!0}=t,m=Vh(s),[f,b]=p.useState(null),v=p.useRef(!1),g=Is(c),w=Tc(l);return p.useEffect(()=>{const N=()=>{v.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>v.current=!1;return document.addEventListener("keydown",N,{capture:!0}),()=>{document.removeEventListener("keydown",N,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),e.jsx(Rw,{...m,children:e.jsx(DM,{scope:s,open:n,onOpenChange:g,content:f,onContentChange:b,children:e.jsx(IM,{scope:s,onClose:p.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:v,dir:w,modal:h,children:i})})})};i1.displayName=ru;var RM="MenuAnchor",Ig=p.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t,l=Vh(n);return e.jsx(Mw,{...l,...i,ref:s})});Ig.displayName=RM;var Rg="MenuPortal",[MM,o1]=jl(Rg,{forceMount:void 0}),l1=t=>{const{__scopeMenu:s,forceMount:n,children:i,container:l}=t,c=wl(Rg,s);return e.jsx(MM,{scope:s,forceMount:n,children:e.jsx(Js,{present:n||c.open,children:e.jsx(Rh,{asChild:!0,container:l,children:i})})})};l1.displayName=Rg;var Xr="MenuContent",[OM,Mg]=jl(Xr),c1=p.forwardRef((t,s)=>{const n=o1(Xr,t.__scopeMenu),{forceMount:i=n.forceMount,...l}=t,c=wl(Xr,t.__scopeMenu),h=au(Xr,t.__scopeMenu);return e.jsx(Zd.Provider,{scope:t.__scopeMenu,children:e.jsx(Js,{present:i||c.open,children:e.jsx(Zd.Slot,{scope:t.__scopeMenu,children:h.modal?e.jsx(LM,{...l,ref:s}):e.jsx(FM,{...l,ref:s})})})})}),LM=p.forwardRef((t,s)=>{const n=wl(Xr,t.__scopeMenu),i=p.useRef(null),l=Wt(s,i);return p.useEffect(()=>{const c=i.current;if(c)return gg(c)},[]),e.jsx(Og,{...t,ref:l,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:tt(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),FM=p.forwardRef((t,s)=>{const n=wl(Xr,t.__scopeMenu);return e.jsx(Og,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$M=bM("MenuContent.ScrollLock"),Og=p.forwardRef((t,s)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:h,disableOutsidePointerEvents:m,onEntryFocus:f,onEscapeKeyDown:b,onPointerDownOutside:v,onFocusOutside:g,onInteractOutside:w,onDismiss:N,disableOutsideScroll:j,...S}=t,A=wl(Xr,n),D=au(Xr,n),E=Vh(n),T=a1(n),k=kM(n),[R,O]=p.useState(null),H=p.useRef(null),te=Wt(s,H,A.onContentChange),X=p.useRef(0),q=p.useRef(""),U=p.useRef(0),M=p.useRef(null),B=p.useRef("right"),ee=p.useRef(0),me=j?Oh:p.Fragment,J=j?{as:$M,allowPinchZoom:!0}:void 0,fe=ae=>{const F=q.current+ae,$=k().filter(le=>!le.disabled),Y=document.activeElement,Z=$.find(le=>le.ref.current===Y)?.textValue,K=$.map(le=>le.textValue),G=YM(K,F,Z),xe=$.find(le=>le.textValue===G)?.ref.current;(function le(ue){q.current=ue,window.clearTimeout(X.current),ue!==""&&(X.current=window.setTimeout(()=>le(""),1e3))})(F),xe&&setTimeout(()=>xe.focus())};p.useEffect(()=>()=>window.clearTimeout(X.current),[]),ig();const W=p.useCallback(ae=>B.current===M.current?.side&&JM(ae,M.current?.area),[]);return e.jsx(OM,{scope:n,searchRef:q,onItemEnter:p.useCallback(ae=>{W(ae)&&ae.preventDefault()},[W]),onItemLeave:p.useCallback(ae=>{W(ae)||(H.current?.focus(),O(null))},[W]),onTriggerLeave:p.useCallback(ae=>{W(ae)&&ae.preventDefault()},[W]),pointerGraceTimerRef:U,onPointerGraceIntentChange:p.useCallback(ae=>{M.current=ae},[]),children:e.jsx(me,{...J,children:e.jsx(Ph,{asChild:!0,trapped:l,onMountAutoFocus:tt(c,ae=>{ae.preventDefault(),H.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:h,children:e.jsx(Ah,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:b,onPointerDownOutside:v,onFocusOutside:g,onInteractOutside:w,onDismiss:N,children:e.jsx(Tg,{asChild:!0,...T,dir:D.dir,orientation:"vertical",loop:i,currentTabStopId:R,onCurrentTabStopIdChange:O,onEntryFocus:tt(f,ae=>{D.isUsingKeyboardRef.current||ae.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ow,{role:"menu","aria-orientation":"vertical","data-state":_1(A.open),"data-radix-menu-content":"",dir:D.dir,...E,...S,ref:te,style:{outline:"none",...S.style},onKeyDown:tt(S.onKeyDown,ae=>{const $=ae.target.closest("[data-radix-menu-content]")===ae.currentTarget,Y=ae.ctrlKey||ae.altKey||ae.metaKey,Z=ae.key.length===1;$&&(ae.key==="Tab"&&ae.preventDefault(),!Y&&Z&&fe(ae.key));const K=H.current;if(ae.target!==K||!AM.includes(ae.key))return;ae.preventDefault();const xe=k().filter(le=>!le.disabled).map(le=>le.ref.current);s1.includes(ae.key)&&xe.reverse(),KM(xe)}),onBlur:tt(t.onBlur,ae=>{ae.currentTarget.contains(ae.target)||(window.clearTimeout(X.current),q.current="")}),onPointerMove:tt(t.onPointerMove,Gd(ae=>{const F=ae.target,$=ee.current!==ae.clientX;if(ae.currentTarget.contains(F)&&$){const Y=ae.clientX>ee.current?"right":"left";B.current=Y,ee.current=ae.clientX}}))})})})})})})});c1.displayName=Xr;var zM="MenuGroup",Lg=p.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t;return e.jsx(gt.div,{role:"group",...i,ref:s})});Lg.displayName=zM;var BM="MenuLabel",d1=p.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t;return e.jsx(gt.div,{...i,ref:s})});d1.displayName=BM;var lh="MenuItem",cb="menu.itemSelect",Hh=p.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:i,...l}=t,c=p.useRef(null),h=au(lh,t.__scopeMenu),m=Mg(lh,t.__scopeMenu),f=Wt(s,c),b=p.useRef(!1),v=()=>{const g=c.current;if(!n&&g){const w=new CustomEvent(cb,{bubbles:!0,cancelable:!0});g.addEventListener(cb,N=>i?.(N),{once:!0}),cw(g,w),w.defaultPrevented?b.current=!1:h.onClose()}};return e.jsx(u1,{...l,ref:f,disabled:n,onClick:tt(t.onClick,v),onPointerDown:g=>{t.onPointerDown?.(g),b.current=!0},onPointerUp:tt(t.onPointerUp,g=>{b.current||g.currentTarget?.click()}),onKeyDown:tt(t.onKeyDown,g=>{const w=m.searchRef.current!=="";n||w&&g.key===" "||Dx.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Hh.displayName=lh;var u1=p.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:i=!1,textValue:l,...c}=t,h=Mg(lh,n),m=a1(n),f=p.useRef(null),b=Wt(s,f),[v,g]=p.useState(!1),[w,N]=p.useState("");return p.useEffect(()=>{const j=f.current;j&&N((j.textContent??"").trim())},[c.children]),e.jsx(Zd.ItemSlot,{scope:n,disabled:i,textValue:l??w,children:e.jsx(Dg,{asChild:!0,...m,focusable:!i,children:e.jsx(gt.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...c,ref:b,onPointerMove:tt(t.onPointerMove,Gd(j=>{i?h.onItemLeave(j):(h.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:tt(t.onPointerLeave,Gd(j=>h.onItemLeave(j))),onFocus:tt(t.onFocus,()=>g(!0)),onBlur:tt(t.onBlur,()=>g(!1))})})})}),UM="MenuCheckboxItem",m1=p.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:i,...l}=t;return e.jsx(g1,{scope:t.__scopeMenu,checked:n,children:e.jsx(Hh,{role:"menuitemcheckbox","aria-checked":ch(n)?"mixed":n,...l,ref:s,"data-state":$g(n),onSelect:tt(l.onSelect,()=>i?.(ch(n)?!0:!n),{checkForDefaultPrevented:!1})})})});m1.displayName=UM;var h1="MenuRadioGroup",[VM,HM]=jl(h1,{value:void 0,onValueChange:()=>{}}),p1=p.forwardRef((t,s)=>{const{value:n,onValueChange:i,...l}=t,c=Is(i);return e.jsx(VM,{scope:t.__scopeMenu,value:n,onValueChange:c,children:e.jsx(Lg,{...l,ref:s})})});p1.displayName=h1;var f1="MenuRadioItem",x1=p.forwardRef((t,s)=>{const{value:n,...i}=t,l=HM(f1,t.__scopeMenu),c=n===l.value;return e.jsx(g1,{scope:t.__scopeMenu,checked:c,children:e.jsx(Hh,{role:"menuitemradio","aria-checked":c,...i,ref:s,"data-state":$g(c),onSelect:tt(i.onSelect,()=>l.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});x1.displayName=f1;var Fg="MenuItemIndicator",[g1,WM]=jl(Fg,{checked:!1}),v1=p.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:i,...l}=t,c=WM(Fg,n);return e.jsx(Js,{present:i||ch(c.checked)||c.checked===!0,children:e.jsx(gt.span,{...l,ref:s,"data-state":$g(c.checked)})})});v1.displayName=Fg;var qM="MenuSeparator",y1=p.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t;return e.jsx(gt.div,{role:"separator","aria-orientation":"horizontal",...i,ref:s})});y1.displayName=qM;var ZM="MenuArrow",b1=p.forwardRef((t,s)=>{const{__scopeMenu:n,...i}=t,l=Vh(n);return e.jsx(Lw,{...l,...i,ref:s})});b1.displayName=ZM;var GM="MenuSub",[J9,j1]=jl(GM),Rd="MenuSubTrigger",w1=p.forwardRef((t,s)=>{const n=wl(Rd,t.__scopeMenu),i=au(Rd,t.__scopeMenu),l=j1(Rd,t.__scopeMenu),c=Mg(Rd,t.__scopeMenu),h=p.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:f}=c,b={__scopeMenu:t.__scopeMenu},v=p.useCallback(()=>{h.current&&window.clearTimeout(h.current),h.current=null},[]);return p.useEffect(()=>v,[v]),p.useEffect(()=>{const g=m.current;return()=>{window.clearTimeout(g),f(null)}},[m,f]),e.jsx(Ig,{asChild:!0,...b,children:e.jsx(u1,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":l.contentId,"data-state":_1(n.open),...t,ref:Pi(s,l.onTriggerChange),onClick:g=>{t.onClick?.(g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:tt(t.onPointerMove,Gd(g=>{c.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!n.open&&!h.current&&(c.onPointerGraceIntentChange(null),h.current=window.setTimeout(()=>{n.onOpenChange(!0),v()},100))})),onPointerLeave:tt(t.onPointerLeave,Gd(g=>{v();const w=n.content?.getBoundingClientRect();if(w){const N=n.content?.dataset.side,j=N==="right",S=j?-5:5,A=w[j?"left":"right"],D=w[j?"right":"left"];c.onPointerGraceIntentChange({area:[{x:g.clientX+S,y:g.clientY},{x:A,y:w.top},{x:D,y:w.top},{x:D,y:w.bottom},{x:A,y:w.bottom}],side:N}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(g),g.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:tt(t.onKeyDown,g=>{const w=c.searchRef.current!=="";t.disabled||w&&g.key===" "||PM[i.dir].includes(g.key)&&(n.onOpenChange(!0),n.content?.focus(),g.preventDefault())})})})});w1.displayName=Rd;var N1="MenuSubContent",C1=p.forwardRef((t,s)=>{const n=o1(Xr,t.__scopeMenu),{forceMount:i=n.forceMount,...l}=t,c=wl(Xr,t.__scopeMenu),h=au(Xr,t.__scopeMenu),m=j1(N1,t.__scopeMenu),f=p.useRef(null),b=Wt(s,f);return e.jsx(Zd.Provider,{scope:t.__scopeMenu,children:e.jsx(Js,{present:i||c.open,children:e.jsx(Zd.Slot,{scope:t.__scopeMenu,children:e.jsx(Og,{id:m.contentId,"aria-labelledby":m.triggerId,...l,ref:b,align:"start",side:h.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{h.isUsingKeyboardRef.current&&f.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:tt(t.onFocusOutside,v=>{v.target!==m.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:tt(t.onEscapeKeyDown,v=>{h.onClose(),v.preventDefault()}),onKeyDown:tt(t.onKeyDown,v=>{const g=v.currentTarget.contains(v.target),w=EM[h.dir].includes(v.key);g&&w&&(c.onOpenChange(!1),m.trigger?.focus(),v.preventDefault())})})})})})});C1.displayName=N1;function _1(t){return t?"open":"closed"}function ch(t){return t==="indeterminate"}function $g(t){return ch(t)?"indeterminate":t?"checked":"unchecked"}function KM(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function XM(t,s){return t.map((n,i)=>t[(s+i)%t.length])}function YM(t,s,n){const l=s.length>1&&Array.from(s).every(b=>b===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let h=XM(t,Math.max(c,0));l.length===1&&(h=h.filter(b=>b!==n));const f=h.find(b=>b.toLowerCase().startsWith(l.toLowerCase()));return f!==n?f:void 0}function QM(t,s){const{x:n,y:i}=t;let l=!1;for(let c=0,h=s.length-1;c<s.length;h=c++){const m=s[c],f=s[h],b=m.x,v=m.y,g=f.x,w=f.y;v>i!=w>i&&n<(g-b)*(i-v)/(w-v)+b&&(l=!l)}return l}function JM(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return QM(n,s)}function Gd(t){return s=>s.pointerType==="mouse"?t(s):void 0}var e5=i1,t5=Ig,n5=l1,s5=c1,r5=Lg,a5=d1,i5=Hh,o5=m1,l5=p1,c5=x1,d5=v1,u5=y1,m5=b1,h5=w1,p5=C1,Wh="DropdownMenu",[f5]=vr(Wh,[r1]),er=r1(),[x5,S1]=f5(Wh),A1=t=>{const{__scopeDropdownMenu:s,children:n,dir:i,open:l,defaultOpen:c,onOpenChange:h,modal:m=!0}=t,f=er(s),b=p.useRef(null),[v,g]=Qr({prop:l,defaultProp:c??!1,onChange:h,caller:Wh});return e.jsx(x5,{scope:s,triggerId:ga(),triggerRef:b,contentId:ga(),open:v,onOpenChange:g,onOpenToggle:p.useCallback(()=>g(w=>!w),[g]),modal:m,children:e.jsx(e5,{...f,open:v,onOpenChange:g,dir:i,modal:m,children:n})})};A1.displayName=Wh;var P1="DropdownMenuTrigger",E1=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...l}=t,c=S1(P1,n),h=er(n);return e.jsx(t5,{asChild:!0,...h,children:e.jsx(gt.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...l,ref:Pi(s,c.triggerRef),onPointerDown:tt(t.onPointerDown,m=>{!i&&m.button===0&&m.ctrlKey===!1&&(c.onOpenToggle(),c.open||m.preventDefault())}),onKeyDown:tt(t.onKeyDown,m=>{i||(["Enter"," "].includes(m.key)&&c.onOpenToggle(),m.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});E1.displayName=P1;var g5="DropdownMenuPortal",k1=t=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return e.jsx(n5,{...i,...n})};k1.displayName=g5;var T1="DropdownMenuContent",D1=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=S1(T1,n),c=er(n),h=p.useRef(!1);return e.jsx(s5,{id:l.contentId,"aria-labelledby":l.triggerId,...c,...i,ref:s,onCloseAutoFocus:tt(t.onCloseAutoFocus,m=>{h.current||l.triggerRef.current?.focus(),h.current=!1,m.preventDefault()}),onInteractOutside:tt(t.onInteractOutside,m=>{const f=m.detail.originalEvent,b=f.button===0&&f.ctrlKey===!0,v=f.button===2||b;(!l.modal||v)&&(h.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});D1.displayName=T1;var v5="DropdownMenuGroup",y5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(r5,{...l,...i,ref:s})});y5.displayName=v5;var b5="DropdownMenuLabel",j5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(a5,{...l,...i,ref:s})});j5.displayName=b5;var w5="DropdownMenuItem",I1=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(i5,{...l,...i,ref:s})});I1.displayName=w5;var N5="DropdownMenuCheckboxItem",C5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(o5,{...l,...i,ref:s})});C5.displayName=N5;var _5="DropdownMenuRadioGroup",S5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(l5,{...l,...i,ref:s})});S5.displayName=_5;var A5="DropdownMenuRadioItem",P5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(c5,{...l,...i,ref:s})});P5.displayName=A5;var E5="DropdownMenuItemIndicator",k5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(d5,{...l,...i,ref:s})});k5.displayName=E5;var T5="DropdownMenuSeparator",D5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(u5,{...l,...i,ref:s})});D5.displayName=T5;var I5="DropdownMenuArrow",R5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(m5,{...l,...i,ref:s})});R5.displayName=I5;var M5="DropdownMenuSubTrigger",O5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(h5,{...l,...i,ref:s})});O5.displayName=M5;var L5="DropdownMenuSubContent",F5=p.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...i}=t,l=er(n);return e.jsx(p5,{...l,...i,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F5.displayName=L5;var $5=A1,z5=E1,B5=k1,U5=D1,V5=I1;function H5({...t}){return e.jsx($5,{"data-slot":"dropdown-menu",...t})}function W5({...t}){return e.jsx(z5,{"data-slot":"dropdown-menu-trigger",...t})}function q5({className:t,sideOffset:s=4,...n}){return e.jsx(B5,{children:e.jsx(U5,{"data-slot":"dropdown-menu-content",sideOffset:s,className:pt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function dc({className:t,inset:s,variant:n="default",...i}){return e.jsx(V5,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:pt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i})}var qh="Switch",[Z5]=vr(qh),[G5,K5]=Z5(qh),R1=p.forwardRef((t,s)=>{const{__scopeSwitch:n,name:i,checked:l,defaultChecked:c,required:h,disabled:m,value:f="on",onCheckedChange:b,form:v,...g}=t,[w,N]=p.useState(null),j=Wt(s,T=>N(T)),S=p.useRef(!1),A=w?v||!!w.closest("form"):!0,[D,E]=Qr({prop:l,defaultProp:c??!1,onChange:b,caller:qh});return e.jsxs(G5,{scope:n,checked:D,disabled:m,children:[e.jsx(gt.button,{type:"button",role:"switch","aria-checked":D,"aria-required":h,"data-state":F1(D),"data-disabled":m?"":void 0,disabled:m,value:f,...g,ref:j,onClick:tt(t.onClick,T=>{E(k=>!k),A&&(S.current=T.isPropagationStopped(),S.current||T.stopPropagation())})}),A&&e.jsx(L1,{control:w,bubbles:!S.current,name:i,value:f,checked:D,required:h,disabled:m,form:v,style:{transform:"translateX(-100%)"}})]})});R1.displayName=qh;var M1="SwitchThumb",O1=p.forwardRef((t,s)=>{const{__scopeSwitch:n,...i}=t,l=K5(M1,n);return e.jsx(gt.span,{"data-state":F1(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:s})});O1.displayName=M1;var X5="SwitchBubbleInput",L1=p.forwardRef(({__scopeSwitch:t,control:s,checked:n,bubbles:i=!0,...l},c)=>{const h=p.useRef(null),m=Wt(h,c),f=xg(n),b=hg(s);return p.useEffect(()=>{const v=h.current;if(!v)return;const g=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(g,"checked").set;if(f!==n&&N){const j=new Event("click",{bubbles:i});N.call(v,n),v.dispatchEvent(j)}},[f,n,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...l,tabIndex:-1,ref:m,style:{...l.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});L1.displayName=X5;function F1(t){return t?"checked":"unchecked"}var Y5=R1,Q5=O1;function J5({className:t,...s}){return e.jsx(Y5,{"data-slot":"switch",className:pt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Q5,{"data-slot":"switch-thumb",className:pt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function $1(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(!1),[m,f]=p.useState(null),b=async()=>{try{h(!0),f(null);const S=(await ke.get("/media-points",{params:t})).data,A=Array.isArray(S)?S:S.data,D=Array.isArray(S)?A.length:S.total??A.length;n(A),l(D)}catch(j){f(j)}finally{h(!1)}},v=async j=>{const S=await ke.post("/media-points",j);return n(A=>[...A,S.data]),S.data},g=async(j,S)=>{const A=await ke.put(`/media-points/${j}`,S);return n(D=>D.map(E=>E.id===j?A.data:E)),A.data},w=async j=>{await ke.delete(`/media-points/${j}`),n(S=>S.filter(A=>A.id!==j))},N=async(j,S)=>{const A=new FormData;A.append("file",S);const D=await ke.post(`/media-points/${j}/image`,A,{headers:{"Content-Type":"multipart/form-data"}});return n(E=>E.map(T=>T.id===j?{...T,mainImageUrl:D.data.mainImageUrl}:T)),D.data};return p.useEffect(()=>{b()},[t.search,t.type,t.city,t.state,t.showInMediaKit,t.page,t.pageSize]),{mediaPoints:s,total:i,loading:c,error:m,refetch:b,createMediaPoint:v,updateMediaPoint:g,deleteMediaPoint:w,uploadMediaPointImage:N}}function eO(){const[t,s]=p.useState([]),[n,i]=p.useState([]),[l,c]=p.useState(!1),[h,m]=p.useState(null),f=async()=>{try{c(!0),m(null);const b=await ke.get("/media-points/meta");s(Array.isArray(b.data?.cities)?b.data.cities:[]),i(Array.isArray(b.data?.states)?b.data.states:[])}catch(b){m(b),s([]),i([])}finally{c(!1)}};return p.useEffect(()=>{f()},[]),{cities:t,states:n,loading:l,error:h,refetch:f}}const Ei=p.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{ref:n,"data-slot":"textarea",className:pt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s}));Ei.displayName="Textarea";var Zh="Tabs",[tO]=vr(Zh,[Mc]),z1=Mc(),[nO,zg]=tO(Zh),B1=p.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,onValueChange:l,defaultValue:c,orientation:h="horizontal",dir:m,activationMode:f="automatic",...b}=t,v=Tc(m),[g,w]=Qr({prop:i,onChange:l,defaultProp:c??"",caller:Zh});return e.jsx(nO,{scope:n,baseId:ga(),value:g,onValueChange:w,orientation:h,dir:v,activationMode:f,children:e.jsx(gt.div,{dir:v,"data-orientation":h,...b,ref:s})})});B1.displayName=Zh;var U1="TabsList",V1=p.forwardRef((t,s)=>{const{__scopeTabs:n,loop:i=!0,...l}=t,c=zg(U1,n),h=z1(n);return e.jsx(Tg,{asChild:!0,...h,orientation:c.orientation,dir:c.dir,loop:i,children:e.jsx(gt.div,{role:"tablist","aria-orientation":c.orientation,...l,ref:s})})});V1.displayName=U1;var H1="TabsTrigger",W1=p.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,disabled:l=!1,...c}=t,h=zg(H1,n),m=z1(n),f=G1(h.baseId,i),b=K1(h.baseId,i),v=i===h.value;return e.jsx(Dg,{asChild:!0,...m,focusable:!l,active:v,children:e.jsx(gt.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":b,"data-state":v?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:f,...c,ref:s,onMouseDown:tt(t.onMouseDown,g=>{!l&&g.button===0&&g.ctrlKey===!1?h.onValueChange(i):g.preventDefault()}),onKeyDown:tt(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&h.onValueChange(i)}),onFocus:tt(t.onFocus,()=>{const g=h.activationMode!=="manual";!v&&!l&&g&&h.onValueChange(i)})})})});W1.displayName=H1;var q1="TabsContent",Z1=p.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,forceMount:l,children:c,...h}=t,m=zg(q1,n),f=G1(m.baseId,i),b=K1(m.baseId,i),v=i===m.value,g=p.useRef(v);return p.useEffect(()=>{const w=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(w)},[]),e.jsx(Js,{present:l||v,children:({present:w})=>e.jsx(gt.div,{"data-state":v?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":f,hidden:!w,id:b,tabIndex:0,...h,ref:s,style:{...t.style,animationDuration:g.current?"0s":void 0},children:w&&c})})});Z1.displayName=q1;function G1(t,s){return`${t}-trigger-${s}`}function K1(t,s){return`${t}-content-${s}`}var sO=B1,rO=V1,aO=W1,iO=Z1;function ki({className:t,...s}){return e.jsx(sO,{"data-slot":"tabs",className:pt("flex flex-col gap-2",t),...s})}function Ti({className:t,...s}){return e.jsx(rO,{"data-slot":"tabs-list",className:pt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function on({className:t,...s}){return e.jsx(aO,{"data-slot":"tabs-trigger",className:pt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function _n({className:t,...s}){return e.jsx(iO,{"data-slot":"tabs-content",className:pt("flex-1 outline-none",t),...s})}var Gh="Collapsible",[oO]=vr(Gh),[lO,Bg]=oO(Gh),X1=p.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:i,defaultOpen:l,disabled:c,onOpenChange:h,...m}=t,[f,b]=Qr({prop:i,defaultProp:l??!1,onChange:h,caller:Gh});return e.jsx(lO,{scope:n,disabled:c,contentId:ga(),open:f,onOpenToggle:p.useCallback(()=>b(v=>!v),[b]),children:e.jsx(gt.div,{"data-state":Vg(f),"data-disabled":c?"":void 0,...m,ref:s})})});X1.displayName=Gh;var Y1="CollapsibleTrigger",Q1=p.forwardRef((t,s)=>{const{__scopeCollapsible:n,...i}=t,l=Bg(Y1,n);return e.jsx(gt.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":Vg(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...i,ref:s,onClick:tt(t.onClick,l.onOpenToggle)})});Q1.displayName=Y1;var Ug="CollapsibleContent",J1=p.forwardRef((t,s)=>{const{forceMount:n,...i}=t,l=Bg(Ug,t.__scopeCollapsible);return e.jsx(Js,{present:n||l.open,children:({present:c})=>e.jsx(cO,{...i,ref:s,present:c})})});J1.displayName=Ug;var cO=p.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:i,children:l,...c}=t,h=Bg(Ug,n),[m,f]=p.useState(i),b=p.useRef(null),v=Wt(s,b),g=p.useRef(0),w=g.current,N=p.useRef(0),j=N.current,S=h.open||m,A=p.useRef(S),D=p.useRef(void 0);return p.useEffect(()=>{const E=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(E)},[]),As(()=>{const E=b.current;if(E){D.current=D.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const T=E.getBoundingClientRect();g.current=T.height,N.current=T.width,A.current||(E.style.transitionDuration=D.current.transitionDuration,E.style.animationName=D.current.animationName),f(i)}},[h.open,i]),e.jsx(gt.div,{"data-state":Vg(h.open),"data-disabled":h.disabled?"":void 0,id:h.contentId,hidden:!S,...c,ref:v,style:{"--radix-collapsible-content-height":w?`${w}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...t.style},children:S&&l})});function Vg(t){return t?"open":"closed"}var dO=X1;function uO({...t}){return e.jsx(dO,{"data-slot":"collapsible",...t})}function mO({...t}){return e.jsx(Q1,{"data-slot":"collapsible-trigger",...t})}function hO({...t}){return e.jsx(J1,{"data-slot":"collapsible-content",...t})}en.OOH,en.DOOH,en.OOH;kr.FACE,Ua.FLUXO,kr.FACE,Ua.CONTRA_FLUXO,kr.SCREEN,kr.SCREEN,kr.FACE,Ua.FLUXO;bo.AREA_PARTICULAR,bo.AREA_PARTICULAR,bo.DER;const pO=["OUTDOOR","FRONT_LIGHT","TOTEM","EMPENA","PAINEL_RODOVIARIO"],fO=["PAINEL_LED","TELA_DIGITAL","PAINEL_ELETRONICO"],xO=["Shopping Center","Rodovia","Avenida Principal","Terminal de nibus","Centro Comercial","Bairro Residencial","Aeroporto","Estao de Metr"],e2=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],gO=["A","B","C","D","E"];$m.ACTIVE,$m.ACTIVE,$m.ACTIVE;Ht.CLIENTE,Ht.PROSPECT,Ht.LEAD,Ht.CLIENTE,Ht.LEAD,Ht.INATIVO;Jt.APROVADA,Jt.ENVIADA,Jt.ENVIADA,Jt.APROVADA,Jt.APROVADA;es.PRODUTO,Ts.UNITARIO,es.SERVICO,Ts.A_PARTIR_DE,es.SERVICO,Ts.PACOTE,es.SERVICO,Ts.UNITARIO,es.PRODUTO,Ts.UNITARIO,es.SERVICO,Ts.A_PARTIR_DE,es.PRODUTO,Ts.UNITARIO,es.SERVICO,Ts.PACOTE;mn.ATIVA,mn.EM_INSTALACAO,mn.ATIVA,mn.ATIVA,mn.APROVADA,mn.AGUARDANDO_MATERIAL;qe.PAGA,pn.PIX,qe.PAGA,pn.BOLETO,qe.PAGA,pn.TRANSFERENCIA,qe.ABERTA,qe.ABERTA,qe.ABERTA,qe.ENVIADA,pn.BOLETO,qe.ENVIADA,pn.PIX,qe.VENCIDA,pn.BOLETO;Rt.ENTRADA,Jn.PIX,Rt.ENTRADA,Jn.BOLETO,Rt.ENTRADA,Jn.PIX,Rt.ENTRADA,Jn.BOLETO,Rt.ENTRADA,Jn.BOLETO,Rt.ENTRADA,Jn.PIX,Rt.ENTRADA,Jn.PIX,Rt.ENTRADA,Jn.BOLETO,Rt.ENTRADA,Jn.PIX,Rt.ENTRADA,Jn.BOLETO,Rt.ENTRADA,Jn.BOLETO,Rt.ENTRADA,Jn.PIX;function vO({open:t,onOpenChange:s,mediaPoint:n,onSave:i}){const l=U=>{if(!U)return U??null;if(U.startsWith("/uploads/"))return U;const M=U.indexOf("/uploads/");return M>=0?U.slice(M):U},[c,h]=p.useState(n?.type||en.OOH),[m,f]=p.useState({type:en.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),[b,v]=p.useState({}),[g,w]=p.useState(null),[N,j]=p.useState(!1),[S,A]=p.useState(null),[D,E]=p.useState(null);p.useEffect(()=>{w(null),n?(f(n),h(n.type),A(null),E(l(n.mainImageUrl)||null)):(f({type:en.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),h(en.OOH),A(null),E(null))},[n,t]);const T=U=>{h(U),f(M=>({...M,type:U,subcategory:void 0}))},k=U=>{const M=U.target.files?.[0]??null;if(A(M),M){const B=URL.createObjectURL(M);E(B)}};p.useEffect(()=>()=>{D&&D.startsWith("blob:")&&URL.revokeObjectURL(D)},[D]);const R=(U,M)=>{f(B=>({...B,[U]:M})),b[U]&&v(B=>({...B,[U]:""}))},O=U=>{const M=m.socialClasses||[],B=M.includes(U)?M.filter(ee=>ee!==U):[...M,U];R("socialClasses",B)},H=()=>{const U={};return m.name?.trim()||(U.name="Nome do ponto  obrigatrio"),m.addressCity?.trim()||(U.addressCity="Cidade  obrigatria"),m.addressState?.trim()||(U.addressState="Estado  obrigatrio"),(m.latitude===void 0||m.latitude===null)&&(U.latitude="Latitude  obrigatria"),(m.longitude===void 0||m.longitude===null)&&(U.longitude="Longitude  obrigatria"),v(U),Object.keys(U).length===0},te=async()=>{if(!H())return;j(!0),w(null);const{id:U,companyId:M,createdAt:B,updatedAt:ee,units:me,owners:J,...fe}=m||{};delete fe.basePriceDay;try{await i({...fe,type:c},S),s(!1)}catch(W){const ae=W?.message||"No foi possvel salvar o ponto de mdia.";w(ae)}finally{j(!1)}},X=()=>{f({type:en.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),v({}),w(null),s(!1)},q=c===en.OOH?pO:fO;return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:n?"Editar Ponto de Mdia":"Cadastrar Novo Ponto de Mdia (MediaPoint)"}),e.jsx(_i,{children:n?"Atualize os detalhes do ponto de mdia.":"Preencha os campos para cadastrar um novo ponto de mdia."})]}),e.jsxs(ki,{value:c,onValueChange:U=>T(U),children:[e.jsxs(Ti,{className:"grid w-full grid-cols-2",children:[e.jsx(on,{value:en.OOH,children:"OOH"}),e.jsx(on,{value:en.DOOH,children:"DOOH"})]}),e.jsxs(_n,{value:c,className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Informaes Bsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Nome do Ponto *"}),e.jsx(Pe,{placeholder:"Ex: Outdoor Av. Paulista 1000",value:m.name||"",onChange:U=>R("name",U.target.value),className:b.name?"border-red-500":""}),b.name&&e.jsx("p",{className:"text-xs text-red-600",children:b.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Subcategoria"}),e.jsxs(At,{value:m.subcategory||"",onValueChange:U=>R("subcategory",U),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione a subcategoria"})}),e.jsx(kt,{children:q.map(U=>e.jsx(De,{value:U,children:U},U))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Imagem principal"}),e.jsx(Pe,{type:"file",accept:"image/*",onChange:k}),D&&e.jsx("div",{className:"mt-2 w-full max-w-sm h-40 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:D,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Selecione uma imagem (PNG/JPG). O upload ser feito ao salvar."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Descrio"}),e.jsx(Ei,{placeholder:"Descreva o ponto de mdia...",value:m.description||"",onChange:U=>R("description",U.target.value),rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Localizao"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"CEP"}),e.jsx(Pe,{placeholder:"00000-000",value:m.addressZipcode||"",onChange:U=>R("addressZipcode",U.target.value)})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{children:"Rua/Avenida"}),e.jsx(Pe,{placeholder:"Ex: Avenida Paulista",value:m.addressStreet||"",onChange:U=>R("addressStreet",U.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Nmero"}),e.jsx(Pe,{placeholder:"1000",value:m.addressNumber||"",onChange:U=>R("addressNumber",U.target.value)})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{children:"Bairro"}),e.jsx(Pe,{placeholder:"Ex: Bela Vista",value:m.addressDistrict||"",onChange:U=>R("addressDistrict",U.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Cidade *"}),e.jsx(Pe,{placeholder:"So Paulo",value:m.addressCity||"",onChange:U=>R("addressCity",U.target.value),className:b.addressCity?"border-red-500":""}),b.addressCity&&e.jsx("p",{className:"text-xs text-red-600",children:b.addressCity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Estado *"}),e.jsxs(At,{value:m.addressState||"",onValueChange:U=>R("addressState",U),children:[e.jsx(Et,{className:b.addressState?"border-red-500":"",children:e.jsx(Pt,{placeholder:"UF"})}),e.jsx(kt,{children:e2.map(U=>e.jsx(De,{value:U,children:U},U))})]}),b.addressState&&e.jsx("p",{className:"text-xs text-red-600",children:b.addressState})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Pas"}),e.jsx(Pe,{value:m.addressCountry||"Brasil",onChange:U=>R("addressCountry",U.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Latitude *"}),e.jsx(Pe,{type:"number",step:"0.000001",placeholder:"-23.561414",value:m.latitude||"",onChange:U=>R("latitude",parseFloat(U.target.value)),className:b.latitude?"border-red-500":""}),b.latitude&&e.jsx("p",{className:"text-xs text-red-600",children:b.latitude})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Longitude *"}),e.jsx(Pe,{type:"number",step:"0.000001",placeholder:"-46.655881",value:m.longitude||"",onChange:U=>R("longitude",parseFloat(U.target.value)),className:b.longitude?"border-red-500":""}),b.longitude&&e.jsx("p",{className:"text-xs text-red-600",children:b.longitude})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Dados Comerciais e Audincia"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Impactos Dirios"}),e.jsx(Pe,{type:"number",placeholder:"85000",value:m.dailyImpressions||"",onChange:U=>R("dailyImpressions",parseInt(U.target.value)||null)}),!m.dailyImpressions&&e.jsx("p",{className:"text-xs text-amber-600",children:" Recomendado preencher"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{children:"Ambiente"}),e.jsxs(At,{value:m.environment||"",onValueChange:U=>R("environment",U),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione o ambiente"})}),e.jsx(kt,{children:xO.map(U=>e.jsx(De,{value:U,children:U},U))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Classes Sociais Atendidas (socialClasses)"}),e.jsx("div",{className:"flex gap-2",children:gO.map(U=>e.jsxs(ht,{variant:m.socialClasses?.includes(U)?"default":"outline",className:"cursor-pointer",onClick:()=>O(U),children:[U,m.socialClasses?.includes(U)&&e.jsx(pr,{className:"w-3 h-3 ml-1"})]},U))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Preo Mensal (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"8500.00",value:m.basePriceMonth||"",onChange:U=>R("basePriceMonth",parseFloat(U.target.value)||null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Preo Quinzenal (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"2500.00",value:m.basePriceWeek||"",onChange:U=>R("basePriceWeek",parseFloat(U.target.value)||null)})]})]})]}),c===en.OOH&&e.jsx(uO,{defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(mO,{asChild:!0,children:e.jsxs(ne,{variant:"outline",className:"w-full justify-between bg-orange-50/50 hover:bg-orange-100/50 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fc,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-900",children:"Custos de Produo OOH"})]}),e.jsx(eu,{className:"w-4 h-4"})]})}),e.jsx(hO,{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-orange-50/30 rounded-lg border border-orange-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure os custos padro de produo para este ponto OOH. Estes valores sero usados como referncia para oramentos e clculos de custo."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Lona (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:m.productionCosts?.lona||"",onChange:U=>R("productionCosts",{...m.productionCosts,lona:parseFloat(U.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material de impresso (lona/tecido)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Adesivo (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:m.productionCosts?.adesivo||"",onChange:U=>R("productionCosts",{...m.productionCosts,adesivo:parseFloat(U.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material adesivo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Vinil (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:m.productionCosts?.vinil||"",onChange:U=>R("productionCosts",{...m.productionCosts,vinil:parseFloat(U.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material vinlico (opcional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Montagem/Instalao (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:m.productionCosts?.montagem||"",onChange:U=>R("productionCosts",{...m.productionCosts,montagem:parseFloat(U.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Mo de obra para instalao"})]})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Visibilidade"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showInMediaKit",checked:m.showInMediaKit||!1,onChange:U=>R("showInMediaKit",U.target.checked),className:"rounded"}),e.jsx(we,{htmlFor:"showInMediaKit",className:"cursor-pointer",children:"Exibir este ponto no Mdia Kit pblico (showInMediaKit)"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Prximo passo"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Aps criar o ponto, voc poder adicionar ",e.jsx("strong",{children:"unidades (MediaUnit)"}),' - faces para OOH ou telas para DOOH - com preos e caractersticas especficas atravs da opo "Gerenciar unidades" no menu do ponto.']})]})]})]}),g&&e.jsx("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:g}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:X,children:"Cancelar"}),e.jsx(ne,{onClick:te,disabled:N,children:N?"Salvando...":n?"Salvar Alteraes":"Salvar Ponto"})]})]})})}function t2(t=!0){const[s,n]=p.useState([]),[i,l]=p.useState(!1),[c,h]=p.useState(null),m=p.useCallback(async()=>{try{l(!0),h(null);const g=await ke.get("/owner-companies");n(g.data??[])}catch(g){console.error(g),h(g?.response?.data?.message||g?.message||"Erro ao carregar empresas proprietrias")}finally{l(!1)}},[]);p.useEffect(()=>{t&&m()},[t,m]);const f=p.useCallback(async g=>{const w=await ke.post("/owner-companies",{name:g.name,document:g.document??void 0,email:g.email??void 0,phone:g.phone??void 0});return await m(),w.data},[m]),b=p.useCallback(async(g,w)=>{const N=await ke.put(`/owner-companies/${g}`,{name:w.name??void 0,document:w.document??void 0,email:w.email??void 0,phone:w.phone??void 0});return await m(),N.data},[m]),v=p.useCallback(async g=>{await ke.delete(`/owner-companies/${g}`),await m()},[m]);return{ownerCompanies:s,loading:i,error:c,refetch:m,createOwnerCompany:f,updateOwnerCompany:b,deleteOwnerCompany:v}}function yO({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:i}){const{subscription:l}=So(),c=l?.maxOwnersPerMediaPoint??1,{ownerCompanies:h,loading:m,error:f,refetch:b}=t2(t),[v,g]=p.useState([]),[w,N]=p.useState(!1),[j,S]=p.useState(!1),[A,D]=p.useState(null),E=v.length<c,T=async()=>{try{N(!0);const R=await ke.get(`/media-points/${n}/owners`);g(R.data||[])}catch(R){console.error(R),g([])}finally{N(!1)}};p.useEffect(()=>{t?(T(),b()):(g([]),S(!1),D(null))},[t,n]);const k=async R=>{if(confirm(`Remover proprietrio "${R.ownerCompany?.name??R.ownerName}" deste ponto?`))try{await ke.delete(`/media-point-owners/${R.id}`),g(O=>O.filter(H=>H.id!==R.id))}catch(O){console.error(O),alert(O?.response?.data?.message||"Erro ao remover proprietrio.")}};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bn,{children:[e.jsxs(Un,{children:["Proprietrios / Empresas vinculadas  ",i]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Limite atual: ",e.jsx("b",{children:c})," proprietrio(s) por ponto (assinatura multi-proprietrios)."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[v.length," de ",c," proprietrio(s) utilizado(s)"]}),e.jsxs(ne,{onClick:()=>{E&&(S(!0),D(null))},disabled:!E,children:[e.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Adicionar Proprietrio"]})]}),!E&&e.jsx(Ue,{className:"border-amber-200 bg-amber-50",children:e.jsxs(Ve,{className:"p-4 text-sm text-amber-900",children:["Voc atingiu o limite de proprietrios por ponto (",c,"). Para adicionar mais, aumente a assinatura multi-proprietrios em Configuraes."]})}),f&&e.jsx(Ue,{className:"border-red-200 bg-red-50",children:e.jsx(Ve,{className:"p-4 text-sm text-red-900",children:String(f)})}),w&&e.jsx(Ue,{children:e.jsx(Ve,{className:"p-6 text-center text-sm text-gray-500",children:"Carregando proprietrios..."})}),!w&&v.length===0&&e.jsx(Ue,{children:e.jsx(Ve,{className:"p-6 text-center text-sm text-gray-500",children:"Nenhum proprietrio vinculado a este ponto."})}),e.jsx("div",{className:"space-y-3",children:v.map(R=>{const O=R.ownerCompany?.name??R.ownerName,H=!!R.ownerCompany?.isPrimary;return e.jsx(Ue,{children:e.jsxs(Ve,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:O}),H&&e.jsx(ht,{variant:"secondary",children:"Empresa prpria"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-x-4 gap-y-1",children:[R.ownerDocument&&e.jsxs("span",{children:["Doc: ",R.ownerDocument]}),R.ownerPhone&&e.jsxs("span",{children:["Tel: ",R.ownerPhone]}),R.regime&&e.jsxs("span",{children:["Regime: ",R.regime]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{D(R),S(!1)},children:e.jsx(Kx,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>k(R),children:e.jsx(xa,{className:"w-4 h-4"})})]})]}),(R.derMonthlyFee||R.rentValue||R.fixedExpenseDueDay)&&e.jsx("div",{className:"mt-3 text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[R.derMonthlyFee!=null&&e.jsxs("span",{children:["DER: R$ ",Number(R.derMonthlyFee).toFixed(2)]}),R.rentValue!=null&&e.jsxs("span",{children:["Aluguel: R$ ",Number(R.rentValue).toFixed(2)]}),R.fixedExpenseDueDay!=null&&e.jsxs("span",{children:["Venc.: dia ",R.fixedExpenseDueDay]})]})}),R.notes&&e.jsx("div",{className:"mt-3 text-sm text-gray-600 whitespace-pre-wrap",children:R.notes})]})},R.id)})}),(j||A)&&e.jsx(bO,{owner:A,ownerCompanies:h,ownerCompaniesLoading:m,onSave:async R=>{try{const O={};if(R.ownerCompanyId&&(O.ownerCompanyId=R.ownerCompanyId),!R.ownerCompanyId&&R.ownerName?.trim()&&(O.ownerName=R.ownerName.trim()),R.ownerDocument?.trim()&&(O.ownerDocument=R.ownerDocument.trim()),R.ownerPhone?.trim()&&(O.ownerPhone=R.ownerPhone.trim()),R.regime&&(O.regime=R.regime),R.derMonthlyFee!==void 0&&(O.derMonthlyFee=R.derMonthlyFee),R.rentValue!==void 0&&(O.rentValue=R.rentValue),R.fixedExpenseDueDay!==void 0&&(O.fixedExpenseDueDay=R.fixedExpenseDueDay),R.rentPeriodicity&&(O.rentPeriodicity=R.rentPeriodicity),R.notes?.trim()&&(O.notes=R.notes.trim()),A){const H=await ke.put(`/media-point-owners/${A.id}`,O);g(te=>te.map(X=>X.id===A.id?H.data:X)),D(null)}else{const H=await ke.post(`/media-points/${n}/owners`,O);g(te=>[...te,H.data]),S(!1)}}catch(O){console.error(O),alert(O?.response?.data?.message||"Erro ao salvar proprietrio.")}},onCancel:()=>{S(!1),D(null)}})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(ne,{onClick:()=>s(!1),children:"Fechar"})})]})})}function bO({owner:t,ownerCompanies:s,ownerCompaniesLoading:n,onSave:i,onCancel:l}){const[c,h]=p.useState(()=>t?{ownerCompanyId:t.ownerCompanyId??void 0,ownerName:t.ownerName,ownerDocument:t.ownerDocument,ownerPhone:t.ownerPhone??void 0,regime:t.regime,derMonthlyFee:t.derMonthlyFee??void 0,rentValue:t.rentValue??void 0,fixedExpenseDueDay:t.fixedExpenseDueDay??void 0,rentPeriodicity:t.rentPeriodicity??void 0,notes:t.notes??void 0}:{ownerCompanyId:void 0,ownerName:""}),m=(v,g)=>{h(w=>({...w,[v]:g}))},f=!c.ownerCompanyId,b=!!(c.ownerCompanyId||c.ownerName?.trim());return e.jsx(Ue,{className:"border-2 border-green-100 bg-green-50/30",children:e.jsxs(Ve,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-start gap-2 mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900",children:t?"Editar Proprietrio":"Novo Proprietrio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione a empresa proprietria (cadastrada no SuperAdmin) e preencha os dados de despesas fixas do ponto."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Empresa proprietria *"}),e.jsxs(At,{value:c.ownerCompanyId||"",onValueChange:v=>m("ownerCompanyId",v||void 0),disabled:n,children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:n?"Carregando...":"Selecione"})}),e.jsx(kt,{children:s.map(v=>e.jsxs(De,{value:v.id,children:[v.name,v.isPrimary?" (empresa prpria)":""]},v.id))})]}),s.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Nenhuma empresa proprietria encontrada."})]}),f&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Nome do Proprietrio (fallback) *"}),e.jsx(Pe,{placeholder:"Ex: DER SP / Prefeitura / Joo Silva",value:c.ownerName||"",onChange:v=>m("ownerName",v.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use apenas se no conseguir carregar/selecionar as empresas do SuperAdmin."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Regime"}),e.jsxs(At,{value:c.regime||"",onValueChange:v=>m("regime",v),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione o regime"})}),e.jsxs(kt,{children:[e.jsx(De,{value:bo.AREA_PARTICULAR,children:"rea Particular"}),e.jsx(De,{value:bo.ADMIN_PUBLICA,children:"Administrao Pblica"}),e.jsx(De,{value:bo.DER,children:"DER"}),e.jsx(De,{value:bo.OUTRO,children:"Outro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Telefone"}),e.jsx(Pe,{placeholder:"(11) 99999-9999",value:c.ownerPhone||"",onChange:v=>m("ownerPhone",v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Taxa DER mensal (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"300.00",value:c.derMonthlyFee??"",onChange:v=>m("derMonthlyFee",v.target.value?parseFloat(v.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Valor do aluguel (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"1000.00",value:c.rentValue??"",onChange:v=>m("rentValue",v.target.value?parseFloat(v.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Dia vencimento"}),e.jsx(Pe,{type:"number",placeholder:"10",value:c.fixedExpenseDueDay??"",onChange:v=>m("fixedExpenseDueDay",v.target.value?parseInt(v.target.value):void 0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Periodicidade do aluguel"}),e.jsxs(At,{value:c.rentPeriodicity||"",onValueChange:v=>m("rentPeriodicity",v),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[e.jsx(De,{value:Td.MENSAL,children:"Mensal"}),e.jsx(De,{value:Td.TRIMESTRAL,children:"Trimestral"}),e.jsx(De,{value:Td.ANUAL,children:"Anual"}),e.jsx(De,{value:Td.OUTRO,children:"Outro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Observaes"}),e.jsx(Ei,{placeholder:"Ex: Contrato vence em..., reajuste anual..., etc.",value:c.notes||"",onChange:v=>m("notes",v.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:l,children:"Cancelar"}),e.jsx(ne,{onClick:()=>i(c),disabled:!b,children:t?"Salvar Alteraes":"Adicionar Proprietrio"})]})]})})}function jO({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:i}){const[l,c]=p.useState([]),[h,m]=p.useState(!1),[f,b]=p.useState(!1),[v,g]=p.useState(null),w=async()=>{if(n)try{b(!0),g(null);const N=await ke.get(`/media-points/${n}/contracts`);c(N.data??[])}catch(N){console.error(N),g(N?.response?.data?.message||N?.message||"Erro ao carregar contratos")}finally{b(!1)}};return p.useEffect(()=>{t?w():(m(!1),g(null))},[t,n]),e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bn,{children:[e.jsxs(Un,{children:["Contratos do Ponto - ",i]}),e.jsx("p",{className:"text-gray-600",children:"Upload e gerenciamento dos contratos deste ponto."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:f?e.jsx(Ue,{children:e.jsx(Ve,{className:"py-8 text-center text-gray-600",children:"Carregando..."})}):v?e.jsx(Ue,{children:e.jsxs(Ve,{className:"py-6 text-center",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"Erro ao carregar contratos"}),e.jsx("p",{className:"text-sm text-gray-600",children:v}),e.jsx("div",{className:"mt-4",children:e.jsx(ne,{variant:"outline",onClick:w,children:"Tentar novamente"})})]})}):l.length===0?e.jsx(Ue,{children:e.jsxs(Ve,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum contrato cadastrado"}),e.jsxs(ne,{onClick:()=>m(!0),children:[e.jsx(eh,{className:"w-4 h-4 mr-2"}),"Upload Contrato"]})]})}):e.jsxs(e.Fragment,{children:[l.map(N=>e.jsx(Ue,{children:e.jsx(Ve,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(gr,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900",children:N.fileName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",N.id]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[N.signedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Assinado em: "}),e.jsx("span",{className:"text-gray-900",children:new Date(N.signedAt).toLocaleDateString("pt-BR")})]}),N.expiresAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Vence em: "}),e.jsx("span",{className:"text-gray-900",children:new Date(N.expiresAt).toLocaleDateString("pt-BR")})]})]}),N.url&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 break-all",children:["URL: ",N.url]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{try{const j=await ke.get(`/media-point-contracts/${N.id}/download`,{responseType:"blob"}),S=window.URL.createObjectURL(j.data),A=document.createElement("a");A.href=S,A.download=N.fileName||"contrato",document.body.appendChild(A),A.click(),A.remove(),window.URL.revokeObjectURL(S)}catch(j){console.error(j),alert("Erro ao obter link de download.")}},title:"Download",children:e.jsx(dl,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Excluir este contrato?"))try{await ke.delete(`/media-point-contracts/${N.id}`),c(S=>S.filter(A=>A.id!==N.id))}catch(S){console.error(S),alert("Erro ao excluir contrato.")}},title:"Excluir",children:e.jsx(xa,{className:"w-4 h-4"})})]})]})})},N.id)),e.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>m(!0),children:[e.jsx(eh,{className:"w-4 h-4 mr-2"}),"Upload Contrato"]})]})}),h&&e.jsx(wO,{onSave:async({file:N,signedAt:j,expiresAt:S})=>{try{const A=new FormData;A.append("file",N),j&&A.append("signedAt",j),S&&A.append("expiresAt",S);const D=await ke.post(`/media-points/${n}/contracts`,A,{headers:{"Content-Type":"multipart/form-data"}});c(E=>[...E,D.data]),m(!1)}catch(A){console.error(A),alert("Erro ao enviar contrato.")}},onCancel:()=>m(!1)})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(ne,{onClick:()=>s(!1),children:"Fechar"})})]})})}function wO({onSave:t,onCancel:s}){const[n,i]=p.useState(null),[l,c]=p.useState(""),[h,m]=p.useState("");return e.jsx(Ue,{className:"border-2 border-red-100 bg-red-50/30",children:e.jsxs(Ve,{className:"pt-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2",children:"Upload de Contrato"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Arquivo PDF *"}),e.jsx(Pe,{type:"file",accept:"application/pdf",onChange:f=>i(f.target.files?.[0]??null)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Somente PDF."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Data de assinatura"}),e.jsx(Pe,{type:"date",value:l,onChange:f=>c(f.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Data de vencimento"}),e.jsx(Pe,{type:"date",value:h,onChange:f=>m(f.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:s,children:"Cancelar"}),e.jsx(ne,{onClick:()=>{if(!n){alert("Selecione um arquivo PDF.");return}t({file:n,signedAt:l||void 0,expiresAt:h||void 0})},children:"Enviar"})]})]})})}function NO({mediaPointId:t}){const[s,n]=p.useState([]),[i,l]=p.useState(!1),[c,h]=p.useState(null),m=async()=>{if(t)try{l(!0),h(null);const N=(await ke.get(`/media-points/${t}/units`)).data,j=Array.isArray(N)?N:N.data;n(j)}catch(w){h(w)}finally{l(!1)}},f=async w=>{if(!t)throw new Error("mediaPointId  obrigatrio");const N=await ke.post(`/media-points/${t}/units`,w);return n(j=>[...j,N.data]),N.data},b=async(w,N)=>{const j=await ke.put(`/media-units/${w}`,N);return n(S=>S.map(A=>A.id===w?j.data:A)),j.data},v=async w=>{await ke.delete(`/media-units/${w}`),n(N=>N.filter(j=>j.id!==w))},g=async(w,N)=>{const j=new FormData;j.append("file",N);const S=await ke.post(`/media-units/${w}/image`,j,{headers:{"Content-Type":"multipart/form-data"}});return n(A=>A.map(D=>D.id===w?{...D,imageUrl:S.data.imageUrl}:D)),S.data};return p.useEffect(()=>{m()},[t]),{units:s,loading:i,error:c,refetch:m,createUnit:f,updateUnit:b,deleteUnit:v,uploadUnitImage:g}}function CO(t){const s={};for(const[n,i]of Object.entries(t))i!=null&&(typeof i=="string"&&i.trim()===""||(s[n]=i));return s}function _O({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:i,mediaPointType:l}){const{units:c,loading:h,error:m,createUnit:f,updateUnit:b,deleteUnit:v,uploadUnitImage:g}=NO({mediaPointId:t?n:null}),[w,N]=p.useState(!1),[j,S]=p.useState(null);p.useEffect(()=>{t||(N(!1),S(null))},[t]);const A=k=>k?k===Ua.FLUXO?"Fluxo":"Contra-Fluxo":"-",D=k=>k?k===Ua.FLUXO?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",E=l===en.OOH?kr.FACE:kr.SCREEN,T=l===en.OOH?"Face":"Tela";return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bn,{children:[e.jsxs(Un,{children:[T,"s do Ponto - ",i]}),e.jsx("p",{className:"text-gray-600",children:l===en.OOH?"Gerencie as faces (unidades de veiculao) deste ponto OOH":"Gerencie as telas (unidades digitais) deste ponto DOOH"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:h?e.jsx(Ue,{children:e.jsx(Ve,{className:"py-8 text-center text-gray-600",children:"Carregando..."})}):m?e.jsx(Ue,{children:e.jsxs(Ve,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-3",children:"Erro ao carregar unidades."}),e.jsx("p",{className:"text-sm text-gray-600",children:String(m.message||m)})]})}):c.length===0?e.jsx(Ue,{children:e.jsxs(Ve,{className:"py-8 text-center",children:[e.jsxs("p",{className:"text-gray-500 mb-4",children:["Nenhuma ",T.toLowerCase()," cadastrada"]}),e.jsxs(ne,{onClick:()=>N(!0),children:[e.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Adicionar ",T]})]})}):e.jsxs(e.Fragment,{children:[c.map(k=>e.jsx(Ue,{children:e.jsx(Ve,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-gray-900",children:k.label}),k.orientation&&e.jsx(ht,{className:D(k.orientation),children:A(k.orientation)}),e.jsx(ht,{variant:k.isActive?"default":"secondary",children:k.isActive?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[l===en.OOH&&e.jsx(e.Fragment,{children:(k.widthM||k.heightM)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Dimenses: "}),e.jsxs("span",{className:"text-gray-900",children:[k.widthM||"-","m x ",k.heightM||"-","m"]})]})}),l===en.DOOH&&e.jsxs(e.Fragment,{children:[k.insertionsPerDay!==void 0&&k.insertionsPerDay!==null&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Inseres/dia: "}),e.jsx("span",{className:"text-gray-900",children:k.insertionsPerDay})]}),k.resolutionWidthPx&&k.resolutionHeightPx&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Resoluo: "}),e.jsxs("span",{className:"text-gray-900",children:[k.resolutionWidthPx,"x",k.resolutionHeightPx,"px"]})]})]}),(k.priceMonth||k.priceWeek)&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Preos: "}),e.jsxs("span",{className:"text-gray-900",children:[k.priceMonth?`R$ ${k.priceMonth}/ms`:"",k.priceWeek?`  R$ ${k.priceWeek}/quinz`:""]})]})]}),k.imageUrl&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(zm,{className:"w-4 h-4"}),e.jsx("span",{children:"Imagem disponvel"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>S(k),title:"Editar",children:e.jsx(bl,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Excluir esta unidade?"))try{await v(k.id)}catch(O){console.error(O),alert("Erro ao excluir unidade.")}},title:"Excluir",children:e.jsx(xa,{className:"w-4 h-4"})})]})]})})},k.id)),e.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>N(!0),children:[e.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Adicionar ",T]})]})}),(w||j)&&e.jsx(SO,{unit:j,mediaPointType:l,onSave:async(k,R)=>{try{const O=CO(k);if(j)await b(j.id,O),R&&await g(j.id,R),S(null);else{const H=await f({...O,unitType:E,label:(O.label??"").toString()});R&&await g(H.id,R),N(!1)}}catch(O){console.error(O),alert("Erro ao salvar unidade.")}},onCancel:()=>{N(!1),S(null)}})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(ne,{onClick:()=>s(!1),children:"Fechar"})})]})})}function SO({unit:t,mediaPointType:s,onSave:n,onCancel:i}){const[l,c]=p.useState(t?{label:t.label,orientation:t.orientation,widthM:t.widthM,heightM:t.heightM,insertionsPerDay:t.insertionsPerDay,resolutionWidthPx:t.resolutionWidthPx,resolutionHeightPx:t.resolutionHeightPx,priceMonth:t.priceMonth,priceWeek:t.priceWeek}:{label:""}),[h,m]=p.useState(null),[f,b]=p.useState(t?.imageUrl??null);p.useEffect(()=>{t?(c({label:t.label,orientation:t.orientation,widthM:t.widthM,heightM:t.heightM,insertionsPerDay:t.insertionsPerDay,resolutionWidthPx:t.resolutionWidthPx,resolutionHeightPx:t.resolutionHeightPx,priceMonth:t.priceMonth,priceWeek:t.priceWeek}),m(null),b(t.imageUrl??null)):(c({label:""}),m(null),b(null))},[t]);const v=(w,N)=>{c(j=>({...j,[w]:N}))},g=w=>{const N=w.target.files?.[0]??null;if(m(N),N){const j=URL.createObjectURL(N);b(j)}};return p.useEffect(()=>()=>{f&&f.startsWith("blob:")&&URL.revokeObjectURL(f)},[]),e.jsx(Ue,{className:"border-2 border-indigo-200",children:e.jsxs(Ve,{className:"pt-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t?"Editar Unidade":"Nova Unidade"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Nome/Label *"}),e.jsx(Pe,{placeholder:s===en.OOH?"Ex: Face 1 - Principal":"Ex: Tela 1 - Entrada",value:l.label||"",onChange:w=>v("label",w.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(we,{children:["Imagem da ",s===en.OOH?"Face":"Tela"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Pe,{type:"file",accept:"image/jpeg,image/png,image/gif",onChange:g,className:"flex-1"}),f&&e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG ou GIF (mx. 4MB)."})]}),s===en.OOH&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Largura (m)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"3.00",value:l.widthM??"",onChange:w=>v("widthM",w.target.value?parseFloat(w.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Altura (m)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"9.00",value:l.heightM??"",onChange:w=>v("heightM",w.target.value?parseFloat(w.target.value):null)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Orientao"}),e.jsxs(At,{value:l.orientation||"",onValueChange:w=>v("orientation",w||null),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione a orientao"})}),e.jsxs(kt,{children:[e.jsx(De,{value:Ua.FLUXO,children:"Fluxo"}),e.jsx(De,{value:Ua.CONTRA_FLUXO,children:"Contra-Fluxo"})]})]})]})]}),s===en.DOOH&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Inseres por Dia"}),e.jsx(Pe,{type:"number",placeholder:"150",value:l.insertionsPerDay??"",onChange:w=>v("insertionsPerDay",w.target.value?parseInt(w.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Orientao"}),e.jsxs(At,{value:l.orientation||"",onValueChange:w=>v("orientation",w||null),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione a orientao"})}),e.jsxs(kt,{children:[e.jsx(De,{value:Ua.FLUXO,children:"Fluxo"}),e.jsx(De,{value:Ua.CONTRA_FLUXO,children:"Contra-Fluxo"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Resoluo Largura (px)"}),e.jsx(Pe,{type:"number",placeholder:"1920",value:l.resolutionWidthPx??"",onChange:w=>v("resolutionWidthPx",w.target.value?parseInt(w.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Resoluo Altura (px)"}),e.jsx(Pe,{type:"number",placeholder:"1080",value:l.resolutionHeightPx??"",onChange:w=>v("resolutionHeightPx",w.target.value?parseInt(w.target.value):null)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Preos (opcional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{className:"text-sm",children:"Preo/Ms (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"5000.00",value:l.priceMonth??"",onChange:w=>v("priceMonth",w.target.value?parseFloat(w.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{className:"text-sm",children:"Preo/Quinzenal (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"1500.00",value:l.priceWeek??"",onChange:w=>v("priceWeek",w.target.value?parseFloat(w.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:i,children:"Cancelar"}),e.jsx(ne,{onClick:()=>n(l,h),disabled:!l.label?.trim(),children:t?"Salvar Alteraes":"Adicionar"})]})]})})}function AO({className:t,...s}){return e.jsx("div",{"data-slot":"skeleton",className:pt("bg-accent animate-pulse rounded-md",t),...s})}function PO({src:t,alt:s,fallbackSrc:n,loading:i,fetchPriority:l}){const[c,h]=p.useState(!1),[m,f]=p.useState(!1);p.useEffect(()=>{h(!1),f(!1)},[t]);const b=m?n:t;return e.jsxs("div",{className:"relative w-full h-full",children:[!c&&e.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-none overflow-hidden pointer-events-none",children:[e.jsx(AO,{className:"absolute inset-0 w-full h-full rounded-none"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-0 motion-reduce:animate-none",style:{background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.55) 50%, rgba(255,255,255,0) 100%)",width:"60%",height:"100%",transform:"translateX(-120%)",animation:"ooh_sweep 1.1s ease-in-out infinite"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-7 w-7 rounded-full border-2 border-black/20 border-t-black/60 animate-spin motion-reduce:animate-none"})}),e.jsx("style",{children:"@keyframes ooh_sweep{0%{transform:translateX(-120%)}100%{transform:translateX(220%)}}"})]}),e.jsx("img",{src:b,alt:s,draggable:!1,loading:i,fetchPriority:l,decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,onLoad:()=>h(!0),onError:()=>{if(!m){f(!0),h(!1);return}h(!0)}})]})}function EO({point:t,normalizeUploadsUrl:s,fallbackSrc:n}){const i=p.useMemo(()=>{const v=[],g=s(t.mainImageUrl)||n;v.push({src:g,label:"Imagem do ponto",alt:t.name});const w=Array.isArray(t.units)?t.units:[];for(const N of w){if(!N?.imageUrl)continue;const j=s(N.imageUrl);if(!j)continue;const S=N.unitType===kr.SCREEN?"tela":"face",A=N.label?.trim();v.push({src:j,label:A?`Imagem da ${S}: ${A}`:`Imagem da ${S}`,alt:A?`${t.name} - ${A}`:`${t.name} - ${S}`})}return v},[t.mainImageUrl,t.name,t.units,s,n]),[l,c]=p.useState(0),h=p.useRef(null);p.useEffect(()=>{l>=i.length&&c(0)},[i.length]);const m=i.length>1,f=()=>c(v=>(v-1+i.length)%i.length),b=()=>c(v=>(v+1)%i.length);return e.jsxs("div",{className:"w-full h-full relative",onTouchStart:v=>{h.current=v.touches?.[0]?.clientX??null},onTouchEnd:v=>{const g=h.current;if(h.current=null,!m||g===null)return;const w=v.changedTouches?.[0]?.clientX;if(w===void 0)return;const N=g-w;Math.abs(N)<50||(N>0?b():f())},children:[e.jsx("div",{className:"w-full h-full overflow-hidden",children:e.jsx("div",{className:"h-full flex transition-transform duration-300 ease-out",style:{transform:`translate3d(-${l*100}%, 0, 0)`},children:i.map((v,g)=>e.jsx("div",{className:"w-full h-full",style:{flex:"0 0 100%",width:"100%"},children:e.jsx(PO,{src:v.src,alt:v.alt,fallbackSrc:n,loading:"lazy",fetchPriority:"auto"})},`${v.src}-${g}`))})}),e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-10 pointer-events-none",children:(()=>{const v=i[l]?.label??"",g=v.length>70?9:v.length>50?10:11;return e.jsx("div",{className:"inline-flex items-center justify-center border border-white/10 shadow-sm px-3 py-1.5 rounded-md min-w-[140px] max-w-[calc(100%-180px)] whitespace-normal break-words hyphens-auto text-center leading-tight",style:{fontSize:`${g}px`,backgroundColor:"#000",color:"#fff"},title:v,children:v})})()}),m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button","aria-label":"Imagem anterior",className:"absolute left-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-full bg-black/40 hover:bg-black/60 text-white flex items-center justify-center",onClick:v=>{v.stopPropagation(),f()},children:e.jsx(Zx,{className:"w-4 h-4"})}),e.jsx("button",{type:"button","aria-label":"Prxima imagem",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-full bg-black/40 hover:bg-black/60 text-white flex items-center justify-center",onClick:v=>{v.stopPropagation(),b()},children:e.jsx(Nh,{className:"w-4 h-4"})})]}),m&&e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-1.5",children:i.map((v,g)=>e.jsx("button",{type:"button","aria-label":`Ir para imagem ${g+1}`,className:`h-1.5 w-1.5 rounded-full transition-all ${g===l?"bg-white":"bg-white/50 hover:bg-white/80"}`,onClick:w=>{w.stopPropagation(),c(g)}},`dot-${g}`))})]})}function kO(){const{refreshPointsUsed:t}=So(),s=G=>{if(!G)return G??"";if(G.startsWith("uploads/"))return`/${G}`;if(G.startsWith("/uploads/"))return G;const xe=G.indexOf("/uploads/");return xe>=0?G.slice(xe):G},[n,i]=p.useState(""),[l,c]=p.useState("all"),[h,m]=p.useState("all"),[f,b]=p.useState(1),v=40;p.useEffect(()=>{b(1)},[n,l,h]);const{mediaPoints:g,total:w,loading:N,error:j,refetch:S,uploadMediaPointImage:A}=$1({search:n||void 0,type:l==="all"?void 0:l,city:h==="all"?void 0:h,page:f,pageSize:v}),D=p.useMemo(()=>Math.max(1,Math.ceil((w||0)/v)),[w,v]);p.useEffect(()=>{f>D&&b(D)},[f,D]);const[E,T]=p.useState(!1),[k,R]=p.useState(null),[O,H]=p.useState({open:!1,point:null}),[te,X]=p.useState({open:!1,point:null}),[q,U]=p.useState({open:!1,point:null}),[M,B]=p.useState(!1),{cities:ee}=eO(),me=ee,J=p.useMemo(()=>g.reduce((G,xe)=>G+(xe.units?xe.units.length:0),0),[g]),fe=g,W=async(G,xe)=>{try{const{id:le,companyId:ue,createdAt:Fe,updatedAt:$e,units:Ze,owners:Ye,...Xe}=G||{};let Je;if(k?.id?(Je=(await ke.put(`/media-points/${k.id}`,Xe)).data,Ie.success("Ponto de mdia atualizado!")):(Je=(await ke.post("/media-points",Xe)).data,Ie.success("Ponto de mdia criado!")),xe&&Je?.id)try{await A(Je.id,xe),Ie.success("Imagem do ponto enviada!")}catch(ot){const jt=ot?.response?.data?.message||"Erro ao enviar imagem do ponto";Ie.error(jt)}return T(!1),R(null),S(),await t(),Je}catch(le){const ue=le?.response?.data?.message,Fe=Array.isArray(ue)?ue.join(", "):ue||"Erro ao salvar ponto de mdia";throw Ie.error(Fe),new Error(Fe)}},ae=G=>{R(G),T(!0)};p.useEffect(()=>{const G=new URLSearchParams(window.location.search),xe=G.get("pointId");if(!xe)return;(async()=>{try{const Fe=await ke.get(`/media-points/${xe}`);ae(Fe.data)}catch{Ie.error("No foi possvel abrir este ponto no inventrio.")}})(),G.delete("pointId");const le=G.toString(),ue=`${window.location.pathname}${le?`?${le}`:""}`;window.history.replaceState({},"",ue)},[]);const F=async G=>{const xe={...G};delete xe.id,xe.name=`${G.name} (cpia)`;try{const le=await ke.post("/media-points",xe);return Ie.success("Ponto duplicado!"),S(),await t(),le.data}catch(le){const ue=le?.response?.data?.message||"Erro ao duplicar ponto";Ie.error(ue)}},$=async(G,xe)=>{try{await ke.put(`/media-points/${G}`,{showInMediaKit:xe}),S()}catch(le){const ue=le?.response?.data?.message||"Erro ao atualizar mdia kit";Ie.error(ue)}},Y=async G=>{if(confirm("Deseja realmente excluir este ponto de mdia?"))try{await ke.delete(`/media-points/${G}`),Ie.success("Ponto de mdia excludo!"),S(),await t()}catch(xe){const le=xe?.response?.data?.message||"Erro ao excluir ponto de mdia";Ie.error(le)}},Z=()=>{const G=[["ID","Nome","Tipo","Subcategoria","Cidade","Estado","Impactos/Dia","Preo Mensal","Mdia Kit"].join(","),...g.map(ue=>[ue.id,ue.name,ue.type,ue.subcategory||"",ue.addressCity||"",ue.addressState||"",ue.dailyImpressions||0,ue.basePriceMonth||0,ue.showInMediaKit?"Sim":"No"].join(","))].join(`
`),xe=new Blob([G],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a");le.href=URL.createObjectURL(xe),le.download=`inventario_${new Date().toISOString().split("T")[0]}.csv`,le.click()},K=G=>{const xe=G.units||[],le=xe.filter(ue=>ue.isActive);return{total:xe.length,active:le.length}};return e.jsxs("div",{className:"p-8",children:[N&&e.jsx("div",{children:"Carregando inventrio..."}),!N&&j&&e.jsx("div",{children:"Erro ao carregar inventrio."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventrio"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie pontos de mdia (MediaPoint) e unidades (MediaUnit)"})]}),e.jsxs(ne,{className:"gap-2",onClick:()=>{R(null),T(!0)},children:[e.jsx(Ss,{className:"w-4 h-4"}),"Novo Ponto"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total de Pontos"}),e.jsx("p",{className:"text-gray-900",children:w})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(en.OOH),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pontos OOH"}),e.jsx("p",{className:"text-gray-900",children:g.filter(G=>G.type===en.OOH).length})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(en.DOOH),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pontos DOOH"}),e.jsx("p",{className:"text-gray-900",children:g.filter(G=>G.type===en.DOOH).length})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Unidades (Faces/Telas)"}),e.jsx("p",{className:"text-gray-900",children:J})]})})]}),e.jsx(Ue,{className:"mb-6",children:e.jsx(Ve,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{placeholder:"Buscar por nome, cidade, bairro ou subcategoria...",value:n,onChange:G=>i(G.target.value),className:"pl-10"})]}),e.jsxs(At,{value:l,onValueChange:G=>c(G),children:[e.jsx(Et,{className:"w-full lg:w-40",children:e.jsx(Pt,{placeholder:"Tipo"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos os tipos"}),e.jsx(De,{value:en.OOH,children:"OOH"}),e.jsx(De,{value:en.DOOH,children:"DOOH"})]})]}),me.length>0&&e.jsxs(At,{value:h,onValueChange:G=>m(G),children:[e.jsx(Et,{className:"w-full lg:w-48",children:e.jsx(Pt,{placeholder:"Cidade"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todas as cidades"}),me.map(G=>e.jsx(De,{value:G,children:G},G))]})]}),e.jsxs(ne,{variant:"outline",className:"gap-2",onClick:()=>B(!0),children:[e.jsx(eh,{className:"w-4 h-4"}),"Importar"]}),e.jsxs(ne,{variant:"outline",className:"gap-2",onClick:Z,children:[e.jsx(dl,{className:"w-4 h-4"}),"Exportar"]})]})})}),n||l!=="all"||h!=="all"?e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[w," ",w===1?"ponto encontrado":"pontos encontrados"]})}):null,e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:fe.map(G=>{const xe=K(G),le=G.type===en.OOH?"Faces":"Telas";return e.jsxs(Ue,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative overflow-hidden rounded-t-xl",children:[e.jsx(EO,{point:G,normalizeUploadsUrl:s,fallbackSrc:"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800"}),e.jsx(ht,{className:"absolute top-3 left-3 bg-indigo-500",children:G.type}),G.subcategory&&e.jsx(ht,{variant:"outline",className:"absolute top-3 right-3 bg-white",children:G.subcategory})]}),e.jsxs(Ve,{className:"pt-4",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:G.name}),e.jsxs("div",{className:"space-y-2 mb-4",children:[G.addressCity&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ci,{className:"w-4 h-4"}),e.jsxs("span",{children:[G.addressDistrict&&`${G.addressDistrict}, `,G.addressCity,G.addressState&&` - ${G.addressState}`]})]}),G.units&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:le}),e.jsxs("span",{className:"text-gray-900",children:[xe.active," / ",xe.total," ativas"]})]}),G.dailyImpressions&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impactos/dia"}),e.jsxs("span",{className:"text-gray-900",children:[(G.dailyImpressions/1e3).toFixed(0),"k"]})]}),G.basePriceMonth&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Preo base"}),e.jsxs("span",{className:"text-gray-900",children:["R$ ",G.basePriceMonth.toLocaleString("pt-BR")]})]}),G.environment&&e.jsx(ht,{variant:"outline",className:"text-xs",children:G.environment})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J5,{checked:G.showInMediaKit,onCheckedChange:ue=>$(G.id,ue)}),e.jsx("span",{className:"text-sm text-gray-600",children:"Mdia Kit"})]}),e.jsxs(H5,{children:[e.jsx(W5,{asChild:!0,children:e.jsx("button",{className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground h-8 w-8",onClick:ue=>ue.stopPropagation(),children:e.jsx(hP,{className:"w-4 h-4"})})}),e.jsxs(q5,{align:"end",children:[e.jsxs(dc,{onClick:()=>ae(G),children:[e.jsx(bl,{className:"w-4 h-4 mr-2"}),"Editar ponto"]}),e.jsxs(dc,{onClick:()=>U({open:!0,point:G}),children:[e.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Gerenciar unidades (",le.toLowerCase(),")"]}),e.jsxs(dc,{onClick:()=>H({open:!0,point:G}),children:[e.jsx(wh,{className:"w-4 h-4 mr-2"}),"Proprietrios / Empresas vinculadas"]}),e.jsxs(dc,{onClick:()=>X({open:!0,point:G}),children:[e.jsx(gr,{className:"w-4 h-4 mr-2"}),"Contratos do ponto"]}),e.jsxs(dc,{onClick:()=>F(G),children:[e.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Duplicar ponto"]}),e.jsxs(dc,{onClick:()=>Y(G.id),children:[e.jsx(pr,{className:"w-4 h-4 mr-2"}),"Excluir ponto"]})]})]})]})]})]},G.id)})}),D>1&&fe.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Pgina ",f," de ",D,"  Mostrando ",fe.length," de ",w]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(ne,{variant:"outline",size:"sm",disabled:f<=1,onClick:()=>b(G=>Math.max(1,G-1)),children:"Anterior"}),(()=>{const G=[];if(D<=7)for(let xe=1;xe<=D;xe++)G.push(xe);else{G.push(1),f>3&&G.push("...");const xe=Math.max(2,f-1),le=Math.min(D-1,f+1);for(let ue=xe;ue<=le;ue++)G.push(ue);f<D-2&&G.push("..."),G.push(D)}return G.map((xe,le)=>{if(xe==="...")return e.jsx("span",{className:"px-2 text-gray-500",children:""},`ellipsis-${le}`);const ue=xe;return e.jsx(ne,{variant:ue===f?"default":"outline",size:"sm",onClick:()=>b(ue),children:ue},ue)})})(),e.jsx(ne,{variant:"outline",size:"sm",disabled:f>=D,onClick:()=>b(G=>Math.min(D,G+1)),children:"Prxima"})]})]}),fe.length===0&&e.jsx(Ue,{children:e.jsxs(Ve,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum ponto encontrado com os filtros selecionados"}),e.jsx(ne,{variant:"outline",onClick:()=>{i(""),c("all"),m("all")},children:"Limpar Filtros"})]})}),e.jsx(vO,{open:E,onOpenChange:G=>{T(G),G||R(null)},mediaPoint:k,onSave:W}),O.point&&e.jsx(yO,{open:O.open,onOpenChange:G=>H({open:G,point:G?O.point:null}),mediaPointId:O.point.id,mediaPointName:O.point.name}),te.point&&e.jsx(jO,{open:te.open,onOpenChange:G=>X({open:G,point:G?te.point:null}),mediaPointId:te.point.id,mediaPointName:te.point.name}),q.point&&e.jsx(_O,{open:q.open,onOpenChange:G=>U({open:G,point:G?q.point:null}),mediaPointId:q.point.id,mediaPointName:q.point.name,mediaPointType:q.point.type}),e.jsx(TO,{open:M,onOpenChange:B,onImported:async()=>{b(1),S(),await t()}})]})}function TO({open:t,onOpenChange:s,onImported:n}){const[i,l]=p.useState(null),[c,h]=p.useState(en.OOH),[m,f]=p.useState("xlsx"),[b,v]=p.useState(!1),[g,w]=p.useState([]),N=()=>{l(null),w([]),v(!1),h(en.OOH),f("xlsx")};p.useEffect(()=>{t||N()},[t]);const j=async(T,k)=>{try{v(!0);const R=await ke.get("/media-points/import-template",{params:{type:T,format:k},responseType:"blob"}),O=window.URL.createObjectURL(R.data),H=document.createElement("a");H.href=O,H.download=`template_inventario_${String(T).toLowerCase()}.${k}`,document.body.appendChild(H),H.click(),H.remove(),window.URL.revokeObjectURL(O),Ie.success("Modelo baixado!")}catch(R){const O=R?.response?.data?.message||R?.message||"Erro ao baixar modelo";Ie.error(O)}finally{v(!1)}},S=async()=>{if(!i){Ie.error("Selecione um arquivo .xlsx ou .csv");return}const T=i.name.toLowerCase(),k=T.endsWith(".csv"),R=T.endsWith(".xlsx");if(!k&&!R){Ie.error("Formato invlido. Envie um arquivo .xlsx ou .csv");return}const O=10*1024*1024;if(i.size>O){Ie.error("Arquivo muito grande (mx. 10MB).");return}v(!0),w([]);try{const H=new FormData;H.append("file",i);const te=await ke.post("/media-points/import",H,{params:{defaultType:c},headers:{"Content-Type":"multipart/form-data"}});Ie.success(`Importao concluda! ${te.data?.created??0} ponto(s) criado(s).`),await n?.(),s(!1)}catch(H){const te=H?.response?.data,X=te?.message||H?.message||"Erro ao importar. Verifique o arquivo e tente novamente.",q=Array.isArray(te?.errors)?te.errors.map(U=>String(U)):[];w(q),Ie.error(typeof X=="string"?X:"Erro ao importar")}finally{v(!1)}},A=["name","addressCity","addressState","latitude","longitude"],D=["addressStreet","addressNumber","addressDistrict","addressZipcode","addressCountry","subcategory","description","dailyImpressions","environment","socialClasses","showInMediaKit","basePriceMonth","basePriceWeek (Preo Quinzenal)"],E=["productionCosts_lona","productionCosts_adesivo","productionCosts_vinil","productionCosts_montagem"];return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{children:[e.jsx(Bn,{children:e.jsx(Un,{children:"Importar Inventrio"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Importao em Lote"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Importe mltiplos pontos de mdia via Excel (.xlsx) ou CSV (.csv). Imagens no fazem parte do template (devem ser enviadas manualmente no sistema)."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Tipo do Template"}),e.jsxs(At,{value:c,onValueChange:T=>h(T),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[e.jsx(De,{value:en.OOH,children:"OOH"}),e.jsx(De,{value:en.DOOH,children:"DOOH"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Formato"}),e.jsxs(At,{value:m,onValueChange:T=>f(T),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"xlsx",children:"Excel (.xlsx)"}),e.jsx(De,{value:"csv",children:"CSV (.csv)"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Baixar Modelo"}),e.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>j(c,m),disabled:b,children:[e.jsx(dl,{className:"w-4 h-4 mr-2"}),"Baixar Modelo ",c," (",m.toUpperCase(),")"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Selecione o arquivo"}),e.jsx(Pe,{type:"file",accept:".xlsx,.csv",onChange:T=>l(T.target.files?.[0]||null),disabled:b}),i&&e.jsxs("p",{className:"text-sm text-green-600",children:[" ",i.name]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded text-xs text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas obrigatrias (OOH e DOOH):"})}),e.jsx("p",{className:"font-mono break-words",children:A.join(", ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas opcionais (OOH e DOOH):"})}),e.jsx("p",{className:"font-mono break-words",children:D.join(", ")})]}),c===en.OOH&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas opcionais adicionais (somente OOH):"})}),e.jsx("p",{className:"font-mono break-words",children:E.join(", ")})]})]}),g.length>0&&e.jsxs("div",{className:"p-3 bg-red-50 rounded text-xs text-red-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Erros encontrados:"}),e.jsx("ul",{className:"list-disc ml-5 space-y-1 max-h-40 overflow-auto",children:g.slice(0,50).map((T,k)=>e.jsx("li",{children:T},k))}),g.length>50&&e.jsx("p",{className:"mt-2 text-red-600",children:"Mostrando os primeiros 50 erros."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:()=>s(!1),disabled:b,children:"Cancelar"}),e.jsx(ne,{onClick:S,disabled:!i||b,children:"Importar Pontos"})]})]})]})})}function DO(t,s){const n=p.useRef(s);p.useEffect(function(){s!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),s!=null&&t.attributionControl.addAttribution(s)),n.current=s},[t,s])}const IO=1;function RO(t){return Object.freeze({__version:IO,map:t})}function Kh(t,s){return Object.freeze({...t,...s})}const n2=p.createContext(null),s2=n2.Provider;function Hg(){const t=p.useContext(n2);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function r2(t){function s(n,i){const{instance:l,context:c}=t(n).current;return p.useImperativeHandle(i,()=>l),n.children==null?null:Re.createElement(s2,{value:c},n.children)}return p.forwardRef(s)}function MO(t){function s(n,i){const{instance:l}=t(n).current;return p.useImperativeHandle(i,()=>l),null}return p.forwardRef(s)}function a2(t,s){const n=p.useRef();p.useEffect(function(){return s!=null&&t.instance.on(s),n.current=s,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,s])}function Wg(t,s){const n=t.pane??s.pane;return n?{...t,pane:n}:t}var Md={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var OO=Md.exports,db;function LO(){return db||(db=1,(function(t,s){(function(n,i){i(s)})(OO,(function(n){var i="1.9.4";function l(a){var d,x,C,I;for(x=1,C=arguments.length;x<C;x++){I=arguments[x];for(d in I)a[d]=I[d]}return a}var c=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function h(a,d){var x=Array.prototype.slice;if(a.bind)return a.bind.apply(a,x.call(arguments,1));var C=x.call(arguments,2);return function(){return a.apply(d,C.length?C.concat(x.call(arguments)):arguments)}}var m=0;function f(a){return"_leaflet_id"in a||(a._leaflet_id=++m),a._leaflet_id}function b(a,d,x){var C,I,V,ie;return ie=function(){C=!1,I&&(V.apply(x,I),I=!1)},V=function(){C?I=arguments:(a.apply(x,arguments),setTimeout(ie,d),C=!0)},V}function v(a,d,x){var C=d[1],I=d[0],V=C-I;return a===C&&x?a:((a-I)%V+V)%V+I}function g(){return!1}function w(a,d){if(d===!1)return a;var x=Math.pow(10,d===void 0?6:d);return Math.round(a*x)/x}function N(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function j(a){return N(a).split(/\s+/)}function S(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?c(a.options):{});for(var x in d)a.options[x]=d[x];return a.options}function A(a,d,x){var C=[];for(var I in a)C.push(encodeURIComponent(x?I.toUpperCase():I)+"="+encodeURIComponent(a[I]));return(!d||d.indexOf("?")===-1?"?":"&")+C.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function E(a,d){return a.replace(D,function(x,C){var I=d[C];if(I===void 0)throw new Error("No value provided for variable "+x);return typeof I=="function"&&(I=I(d)),I})}var T=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function k(a,d){for(var x=0;x<a.length;x++)if(a[x]===d)return x;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var H=0;function te(a){var d=+new Date,x=Math.max(0,16-(d-H));return H=d+x,window.setTimeout(a,x)}var X=window.requestAnimationFrame||O("RequestAnimationFrame")||te,q=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function U(a,d,x){if(x&&X===te)a.call(d);else return X.call(window,h(a,d))}function M(a){a&&q.call(window,a)}var B={__proto__:null,extend:l,create:c,bind:h,get lastId(){return m},stamp:f,throttle:b,wrapNum:v,falseFn:g,formatNum:w,trim:N,splitWords:j,setOptions:S,getParamString:A,template:E,isArray:T,indexOf:k,emptyImageUrl:R,requestFn:X,cancelFn:q,requestAnimFrame:U,cancelAnimFrame:M};function ee(){}ee.extend=function(a){var d=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=d.__super__=this.prototype,C=c(x);C.constructor=d,d.prototype=C;for(var I in this)Object.prototype.hasOwnProperty.call(this,I)&&I!=="prototype"&&I!=="__super__"&&(d[I]=this[I]);return a.statics&&l(d,a.statics),a.includes&&(me(a.includes),l.apply(null,[C].concat(a.includes))),l(C,a),delete C.statics,delete C.includes,C.options&&(C.options=x.options?c(x.options):{},l(C.options,a.options)),C._initHooks=[],C.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,ie=C._initHooks.length;V<ie;V++)C._initHooks[V].call(this)}},d},ee.include=function(a){var d=this.prototype.options;return l(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},ee.mergeOptions=function(a){return l(this.prototype.options,a),this},ee.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),x=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function me(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=T(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(a,d,x){if(typeof a=="object")for(var C in a)this._on(C,a[C],d);else{a=j(a);for(var I=0,V=a.length;I<V;I++)this._on(a[I],d,x)}return this},off:function(a,d,x){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var C in a)this._off(C,a[C],d);else{a=j(a);for(var I=arguments.length===1,V=0,ie=a.length;V<ie;V++)I?this._off(a[V]):this._off(a[V],d,x)}return this},_on:function(a,d,x,C){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,x)===!1){x===this&&(x=void 0);var I={fn:d,ctx:x};C&&(I.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(I)}},_off:function(a,d,x){var C,I,V;if(this._events&&(C=this._events[a],!!C)){if(arguments.length===1){if(this._firingCount)for(I=0,V=C.length;I<V;I++)C[I].fn=g;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var ie=this._listens(a,d,x);if(ie!==!1){var ve=C[ie];this._firingCount&&(ve.fn=g,this._events[a]=C=C.slice()),C.splice(ie,1)}}},fire:function(a,d,x){if(!this.listens(a,x))return this;var C=l({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var I=this._events[a];if(I){this._firingCount=this._firingCount+1||1;for(var V=0,ie=I.length;V<ie;V++){var ve=I[V],Ne=ve.fn;ve.once&&this.off(a,Ne,ve.ctx),Ne.call(ve.ctx||this,C)}this._firingCount--}}return x&&this._propagateEvent(C),this},listens:function(a,d,x,C){typeof a!="string"&&console.warn('"string" type argument expected');var I=d;typeof d!="function"&&(C=!!d,I=void 0,x=void 0);var V=this._events&&this._events[a];if(V&&V.length&&this._listens(a,I,x)!==!1)return!0;if(C){for(var ie in this._eventParents)if(this._eventParents[ie].listens(a,d,x,C))return!0}return!1},_listens:function(a,d,x){if(!this._events)return!1;var C=this._events[a]||[];if(!d)return!!C.length;x===this&&(x=void 0);for(var I=0,V=C.length;I<V;I++)if(C[I].fn===d&&C[I].ctx===x)return I;return!1},once:function(a,d,x){if(typeof a=="object")for(var C in a)this._on(C,a[C],d,!0);else{a=j(a);for(var I=0,V=a.length;I<V;I++)this._on(a[I],d,x,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,l({layer:a.target,propagatedFrom:a.target},a),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var fe=ee.extend(J);function W(a,d,x){this.x=x?Math.round(a):a,this.y=x?Math.round(d):d}var ae=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(a){return this.clone()._add(F(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(F(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new W(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new W(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(a){a=F(a);var d=a.x-this.x,x=a.y-this.y;return Math.sqrt(d*d+x*x)},equals:function(a){return a=F(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=F(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function F(a,d,x){return a instanceof W?a:T(a)?new W(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new W(a.x,a.y):new W(a,d,x)}function $(a,d){if(a)for(var x=d?[a,d]:a,C=0,I=x.length;C<I;C++)this.extend(x[C])}$.prototype={extend:function(a){var d,x;if(!a)return this;if(a instanceof W||typeof a[0]=="number"||"x"in a)d=x=F(a);else if(a=Y(a),d=a.min,x=a.max,!d||!x)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=x.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(a){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,x;return typeof a[0]=="number"||a instanceof W?a=F(a):a=Y(a),a instanceof $?(d=a.min,x=a.max):d=x=a,d.x>=this.min.x&&x.x<=this.max.x&&d.y>=this.min.y&&x.y<=this.max.y},intersects:function(a){a=Y(a);var d=this.min,x=this.max,C=a.min,I=a.max,V=I.x>=d.x&&C.x<=x.x,ie=I.y>=d.y&&C.y<=x.y;return V&&ie},overlaps:function(a){a=Y(a);var d=this.min,x=this.max,C=a.min,I=a.max,V=I.x>d.x&&C.x<x.x,ie=I.y>d.y&&C.y<x.y;return V&&ie},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,x=this.max,C=Math.abs(d.x-x.x)*a,I=Math.abs(d.y-x.y)*a;return Y(F(d.x-C,d.y-I),F(x.x+C,x.y+I))},equals:function(a){return a?(a=Y(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Y(a,d){return!a||a instanceof $?a:new $(a,d)}function Z(a,d){if(a)for(var x=d?[a,d]:a,C=0,I=x.length;C<I;C++)this.extend(x[C])}Z.prototype={extend:function(a){var d=this._southWest,x=this._northEast,C,I;if(a instanceof G)C=a,I=a;else if(a instanceof Z){if(C=a._southWest,I=a._northEast,!C||!I)return this}else return a?this.extend(xe(a)||K(a)):this;return!d&&!x?(this._southWest=new G(C.lat,C.lng),this._northEast=new G(I.lat,I.lng)):(d.lat=Math.min(C.lat,d.lat),d.lng=Math.min(C.lng,d.lng),x.lat=Math.max(I.lat,x.lat),x.lng=Math.max(I.lng,x.lng)),this},pad:function(a){var d=this._southWest,x=this._northEast,C=Math.abs(d.lat-x.lat)*a,I=Math.abs(d.lng-x.lng)*a;return new Z(new G(d.lat-C,d.lng-I),new G(x.lat+C,x.lng+I))},getCenter:function(){return new G((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new G(this.getNorth(),this.getWest())},getSouthEast:function(){return new G(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof G||"lat"in a?a=xe(a):a=K(a);var d=this._southWest,x=this._northEast,C,I;return a instanceof Z?(C=a.getSouthWest(),I=a.getNorthEast()):C=I=a,C.lat>=d.lat&&I.lat<=x.lat&&C.lng>=d.lng&&I.lng<=x.lng},intersects:function(a){a=K(a);var d=this._southWest,x=this._northEast,C=a.getSouthWest(),I=a.getNorthEast(),V=I.lat>=d.lat&&C.lat<=x.lat,ie=I.lng>=d.lng&&C.lng<=x.lng;return V&&ie},overlaps:function(a){a=K(a);var d=this._southWest,x=this._northEast,C=a.getSouthWest(),I=a.getNorthEast(),V=I.lat>d.lat&&C.lat<x.lat,ie=I.lng>d.lng&&C.lng<x.lng;return V&&ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=K(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function K(a,d){return a instanceof Z?a:new Z(a,d)}function G(a,d,x){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,x!==void 0&&(this.alt=+x)}G.prototype={equals:function(a,d){if(!a)return!1;a=xe(a);var x=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return x<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return ue.distance(this,xe(a))},wrap:function(){return ue.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,x=d/Math.cos(Math.PI/180*this.lat);return K([this.lat-d,this.lng-x],[this.lat+d,this.lng+x])},clone:function(){return new G(this.lat,this.lng,this.alt)}};function xe(a,d,x){return a instanceof G?a:T(a)&&typeof a[0]!="object"?a.length===3?new G(a[0],a[1],a[2]):a.length===2?new G(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new G(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new G(a,d,x)}var le={latLngToPoint:function(a,d){var x=this.projection.project(a),C=this.scale(d);return this.transformation._transform(x,C)},pointToLatLng:function(a,d){var x=this.scale(d),C=this.transformation.untransform(a,x);return this.projection.unproject(C)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,x=this.scale(a),C=this.transformation.transform(d.min,x),I=this.transformation.transform(d.max,x);return new $(C,I)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?v(a.lng,this.wrapLng,!0):a.lng,x=this.wrapLat?v(a.lat,this.wrapLat,!0):a.lat,C=a.alt;return new G(x,d,C)},wrapLatLngBounds:function(a){var d=a.getCenter(),x=this.wrapLatLng(d),C=d.lat-x.lat,I=d.lng-x.lng;if(C===0&&I===0)return a;var V=a.getSouthWest(),ie=a.getNorthEast(),ve=new G(V.lat-C,V.lng-I),Ne=new G(ie.lat-C,ie.lng-I);return new Z(ve,Ne)}},ue=l({},le,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var x=Math.PI/180,C=a.lat*x,I=d.lat*x,V=Math.sin((d.lat-a.lat)*x/2),ie=Math.sin((d.lng-a.lng)*x/2),ve=V*V+Math.cos(C)*Math.cos(I)*ie*ie,Ne=2*Math.atan2(Math.sqrt(ve),Math.sqrt(1-ve));return this.R*Ne}}),Fe=6378137,$e={R:Fe,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,x=this.MAX_LATITUDE,C=Math.max(Math.min(x,a.lat),-x),I=Math.sin(C*d);return new W(this.R*a.lng*d,this.R*Math.log((1+I)/(1-I))/2)},unproject:function(a){var d=180/Math.PI;return new G((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=Fe*Math.PI;return new $([-a,-a],[a,a])})()};function Ze(a,d,x,C){if(T(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=x,this._d=C}Ze.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new W((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function Ye(a,d,x,C){return new Ze(a,d,x,C)}var Xe=l({},ue,{code:"EPSG:3857",projection:$e,transformation:(function(){var a=.5/(Math.PI*$e.R);return Ye(a,.5,-a,.5)})()}),Je=l({},Xe,{code:"EPSG:900913"});function ot(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function jt(a,d){var x="",C,I,V,ie,ve,Ne;for(C=0,V=a.length;C<V;C++){for(ve=a[C],I=0,ie=ve.length;I<ie;I++)Ne=ve[I],x+=(I?"L":"M")+Ne.x+" "+Ne.y;x+=d?Te.svg?"z":"x":""}return x||"M0 0"}var dt=document.documentElement.style,Tt="ActiveXObject"in window,Ft=Tt&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),pe=Ee("webkit"),de=Ee("android"),Oe=Ee("android 2")||Ee("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),be=de&&Ee("Google")&&oe<537&&!("AudioNode"in window),Me=!!window.opera,Ge=!Q&&Ee("chrome"),ut=Ee("gecko")&&!pe&&!Me&&!Tt,Kt=!Ge&&Ee("safari"),tn=Ee("phantom"),ln="OTransition"in dt,Ut=navigator.platform.indexOf("Win")===0,yn=Tt&&"transition"in dt,Kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,ps="MozPerspective"in dt,Pn=!window.L_DISABLE_3D&&(yn||Kn||ps)&&!ln&&!tn,rn=typeof orientation<"u"||Ee("mobile"),hn=rn&&pe,fn=rn&&Kn,Rn=!window.PointerEvent&&window.MSPointerEvent,Vn=!!(window.PointerEvent||Rn),Sn="ontouchstart"in window||!!window.TouchEvent,ts=!window.L_NO_TOUCH&&(Sn||Vn),ft=rn&&Me,sn=rn&&ut,$t=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,An=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",g,d),window.removeEventListener("testPassiveEventSupport",g,d)}catch{}return a})(),bn=(function(){return!!document.createElement("canvas").getContext})(),xn=!!(document.createElementNS&&ot("svg").createSVGRect),Ce=!!xn&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Qe=!xn&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),nt=navigator.platform.indexOf("Mac")===0,ge=navigator.platform.indexOf("Linux")===0;function Ee(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Te={ie:Tt,ielt9:Ft,edge:Q,webkit:pe,android:de,android23:Oe,androidStock:be,opera:Me,chrome:Ge,gecko:ut,safari:Kt,phantom:tn,opera12:ln,win:Ut,ie3d:yn,webkit3d:Kn,gecko3d:ps,any3d:Pn,mobile:rn,mobileWebkit:hn,mobileWebkit3d:fn,msPointer:Rn,pointer:Vn,touch:ts,touchNative:Sn,mobileOpera:ft,mobileGecko:sn,retina:$t,passiveEvents:An,canvas:bn,svg:xn,vml:Qe,inlineSvg:Ce,mac:nt,linux:ge},wt=Te.msPointer?"MSPointerDown":"pointerdown",Ct=Te.msPointer?"MSPointerMove":"pointermove",jn=Te.msPointer?"MSPointerUp":"pointerup",qt=Te.msPointer?"MSPointerCancel":"pointercancel",cn={touchstart:wt,touchmove:Ct,touchend:jn,touchcancel:qt},gn={touchstart:Se,touchmove:re,touchend:re,touchcancel:re},Xn={},is=!1;function Ps(a,d,x){return d==="touchstart"&&Oc(),gn[d]?(x=gn[d].bind(this,x),a.addEventListener(cn[d],x,!1),x):(console.warn("wrong event specified:",d),g)}function ko(a,d,x){if(!cn[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(cn[d],x,!1)}function Ii(a){Xn[a.pointerId]=a}function Cl(a){Xn[a.pointerId]&&(Xn[a.pointerId]=a)}function To(a){delete Xn[a.pointerId]}function Oc(){is||(document.addEventListener(wt,Ii,!0),document.addEventListener(Ct,Cl,!0),document.addEventListener(jn,To,!0),document.addEventListener(qt,To,!0),is=!0)}function re(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var x in Xn)d.touches.push(Xn[x]);d.changedTouches=[d],a(d)}}function Se(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Wn(d),re(a,d)}function It(a){var d={},x,C;for(C in a)x=a[C],d[C]=x&&x.bind?x.bind(a):x;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var dn=200;function Mt(a,d){a.addEventListener("dblclick",d);var x=0,C;function I(V){if(V.detail!==1){C=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var ie=ei(V);if(!(ie.some(function(Ne){return Ne instanceof HTMLLabelElement&&Ne.attributes.for})&&!ie.some(function(Ne){return Ne instanceof HTMLInputElement||Ne instanceof HTMLSelectElement}))){var ve=Date.now();ve-x<=dn?(C++,C===2&&d(It(V))):C=1,x=ve}}}return a.addEventListener("click",I),{dblclick:d,simDblclick:I}}function Hn(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var _t=Mi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),os=Mi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Zt=os==="webkitTransition"||os==="OTransition"?os+"End":"transitionend";function xt(a){return typeof a=="string"?document.getElementById(a):a}function wn(a,d){var x=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!x||x==="auto")&&document.defaultView){var C=document.defaultView.getComputedStyle(a,null);x=C?C[d]:null}return x==="auto"?null:x}function rt(a,d,x){var C=document.createElement(a);return C.className=d||"",x&&x.appendChild(C),C}function Qt(a){var d=a.parentNode;d&&d.removeChild(a)}function Rs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Rr(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function ea(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Ri(a,d){if(a.classList!==void 0)return a.classList.contains(d);var x=_l(a);return x.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(x)}function Dt(a,d){if(a.classList!==void 0)for(var x=j(d),C=0,I=x.length;C<I;C++)a.classList.add(x[C]);else if(!Ri(a,d)){var V=_l(a);Lc(a,(V?V+" ":"")+d)}}function En(a,d){a.classList!==void 0?a.classList.remove(d):Lc(a,N((" "+_l(a)+" ").replace(" "+d+" "," ")))}function Lc(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function _l(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Ms(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&cu(a,d)}function cu(a,d){var x=!1,C="DXImageTransform.Microsoft.Alpha";try{x=a.filters.item(C)}catch{if(d===1)return}d=Math.round(d*100),x?(x.Enabled=d!==100,x.Opacity=d):a.style.filter+=" progid:"+C+"(opacity="+d+")"}function Mi(a){for(var d=document.documentElement.style,x=0;x<a.length;x++)if(a[x]in d)return a[x];return!1}function yr(a,d,x){var C=d||new W(0,0);a.style[_t]=(Te.ie3d?"translate("+C.x+"px,"+C.y+"px)":"translate3d("+C.x+"px,"+C.y+"px,0)")+(x?" scale("+x+")":"")}function Yn(a,d){a._leaflet_pos=d,Te.any3d?yr(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function ta(a){return a._leaflet_pos||new W(0,0)}var nn,Oi,Sl;if("onselectstart"in document)nn=function(){Nt(window,"selectstart",Wn)},Oi=function(){Nn(window,"selectstart",Wn)};else{var Qa=Mi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);nn=function(){if(Qa){var a=document.documentElement.style;Sl=a[Qa],a[Qa]="none"}},Oi=function(){Qa&&(document.documentElement.style[Qa]=Sl,Sl=void 0)}}function Al(){Nt(window,"dragstart",Wn)}function Pl(){Nn(window,"dragstart",Wn)}var Do,Io;function Li(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(br(),Do=a,Io=a.style.outlineStyle,a.style.outlineStyle="none",Nt(window,"keydown",br))}function br(){Do&&(Do.style.outlineStyle=Io,Do=void 0,Io=void 0,Nn(window,"keydown",br))}function na(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Mr(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var Ro={__proto__:null,TRANSFORM:_t,TRANSITION:os,TRANSITION_END:Zt,get:xt,getStyle:wn,create:rt,remove:Qt,empty:Rs,toFront:Rr,toBack:ea,hasClass:Ri,addClass:Dt,removeClass:En,setClass:Lc,getClass:_l,setOpacity:Ms,testProp:Mi,setTransform:yr,setPosition:Yn,getPosition:ta,get disableTextSelection(){return nn},get enableTextSelection(){return Oi},disableImageDrag:Al,enableImageDrag:Pl,preventOutline:Li,restoreOutline:br,getSizedParentNode:na,getScale:Mr};function Nt(a,d,x,C){if(d&&typeof d=="object")for(var I in d)$c(a,I,d[I],x);else{d=j(d);for(var V=0,ie=d.length;V<ie;V++)$c(a,d[V],x,C)}return this}var fs="_leaflet_events";function Nn(a,d,x,C){if(arguments.length===1)Fc(a),delete a[fs];else if(d&&typeof d=="object")for(var I in d)El(a,I,d[I],x);else if(d=j(d),arguments.length===2)Fc(a,function(ve){return k(d,ve)!==-1});else for(var V=0,ie=d.length;V<ie;V++)El(a,d[V],x,C);return this}function Fc(a,d){for(var x in a[fs]){var C=x.split(/\d/)[0];(!d||d(C))&&El(a,C,null,null,x)}}var Ja={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $c(a,d,x,C){var I=d+f(x)+(C?"_"+f(C):"");if(a[fs]&&a[fs][I])return this;var V=function(ve){return x.call(C||a,ve||window.event)},ie=V;!Te.touchNative&&Te.pointer&&d.indexOf("touch")===0?V=Ps(a,d,V):Te.touch&&d==="dblclick"?V=Mt(a,V):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Ja[d]||d,V,Te.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(V=function(ve){ve=ve||window.event,Lo(a,ve)&&ie(ve)},a.addEventListener(Ja[d],V,!1)):a.addEventListener(d,ie,!1):a.attachEvent("on"+d,V),a[fs]=a[fs]||{},a[fs][I]=V}function El(a,d,x,C,I){I=I||d+f(x)+(C?"_"+f(C):"");var V=a[fs]&&a[fs][I];if(!V)return this;!Te.touchNative&&Te.pointer&&d.indexOf("touch")===0?ko(a,d,V):Te.touch&&d==="dblclick"?Hn(a,V):"removeEventListener"in a?a.removeEventListener(Ja[d]||d,V,!1):a.detachEvent("on"+d,V),a[fs][I]=null}function Or(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function kl(a){return $c(a,"wheel",Or),this}function Mo(a){return Nt(a,"mousedown touchstart dblclick contextmenu",Or),a._leaflet_disable_click=!0,this}function Wn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function jr(a){return Wn(a),Or(a),this}function ei(a){if(a.composedPath)return a.composedPath();for(var d=[],x=a.target;x;)d.push(x),x=x.parentNode;return d}function Oo(a,d){if(!d)return new W(a.clientX,a.clientY);var x=Mr(d),C=x.boundingClientRect;return new W((a.clientX-C.left)/x.x-d.clientLeft,(a.clientY-C.top)/x.y-d.clientTop)}var tp=Te.linux&&Te.chrome?window.devicePixelRatio:Te.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function du(a){return Te.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/tp:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Lo(a,d){var x=d.relatedTarget;if(!x)return!0;try{for(;x&&x!==a;)x=x.parentNode}catch{return!1}return x!==a}var Tl={__proto__:null,on:Nt,off:Nn,stopPropagation:Or,disableScrollPropagation:kl,disableClickPropagation:Mo,preventDefault:Wn,stop:jr,getPropagationPath:ei,getMousePosition:Oo,getWheelDelta:du,isExternalTarget:Lo,addListener:Nt,removeListener:Nn},Dl=fe.extend({run:function(a,d,x,C){this.stop(),this._el=a,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(C||.5,.2),this._startPos=ta(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,x=this._duration*1e3;d<x?this._runFrame(this._easeOut(d/x),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var x=this._startPos.add(this._offset.multiplyBy(a));d&&x._round(),Yn(this._el,x),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Xt=fe.extend({options:{crs:Xe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=S(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(xe(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=os&&Te.any3d&&!Te.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,Zt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,x){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(xe(a),d,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=l({animate:x.animate},x.zoom),x.pan=l({animate:x.animate,duration:x.duration},x.pan));var C=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,x.zoom):this._tryAnimatedPan(a,x.pan);if(C)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,x.pan&&x.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,x){var C=this.getZoomScale(d),I=this.getSize().divideBy(2),V=a instanceof W?a:this.latLngToContainerPoint(a),ie=V.subtract(I).multiplyBy(1-1/C),ve=this.containerPointToLatLng(I.add(ie));return this.setView(ve,d,{zoom:x})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():K(a);var x=F(d.paddingTopLeft||d.padding||[0,0]),C=F(d.paddingBottomRight||d.padding||[0,0]),I=this.getBoundsZoom(a,!1,x.add(C));if(I=typeof d.maxZoom=="number"?Math.min(d.maxZoom,I):I,I===1/0)return{center:a.getCenter(),zoom:I};var V=C.subtract(x).divideBy(2),ie=this.project(a.getSouthWest(),I),ve=this.project(a.getNorthEast(),I),Ne=this.unproject(ie.add(ve).divideBy(2).add(V),I);return{center:Ne,zoom:I}},fitBounds:function(a,d){if(a=K(a),!a.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(a,d);return this.setView(x.center,x.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=F(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Dt(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,x,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,x){if(x=x||{},x.animate===!1||!Te.any3d)return this.setView(a,d,x);this._stop();var C=this.project(this.getCenter()),I=this.project(a),V=this.getSize(),ie=this._zoom;a=xe(a),d=d===void 0?ie:d;var ve=Math.max(V.x,V.y),Ne=ve*this.getZoomScale(ie,d),Le=I.distanceTo(C)||1,et=1.42,vt=et*et;function Ot(vn){var Qi=vn?-1:1,fp=vn?Ne:ve,xp=Ne*Ne-ve*ve+Qi*vt*vt*Le*Le,oi=2*fp*vt*Le,li=xp/oi,ci=Math.sqrt(li*li+1)-li,ql=ci<1e-9?-18:Math.log(ci);return ql}function xs(vn){return(Math.exp(vn)-Math.exp(-vn))/2}function ls(vn){return(Math.exp(vn)+Math.exp(-vn))/2}function qs(vn){return xs(vn)/ls(vn)}var Ls=Ot(0);function Xi(vn){return ve*(ls(Ls)/ls(Ls+et*vn))}function id(vn){return ve*(ls(Ls)*qs(Ls+et*vn)-xs(Ls))/vt}function ka(vn){return 1-Math.pow(1-vn,1.5)}var Tu=Date.now(),ii=(Ot(1)-Ls)/et,zr=x.duration?1e3*x.duration:1e3*ii*.8;function Yi(){var vn=(Date.now()-Tu)/zr,Qi=ka(vn)*ii;vn<=1?(this._flyToFrame=U(Yi,this),this._move(this.unproject(C.add(I.subtract(C).multiplyBy(id(Qi)/Le)),ie),this.getScaleZoom(ve/Xi(Qi),ie),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),Yi.call(this),this},flyToBounds:function(a,d){var x=this._getBoundsCenterZoom(a,d);return this.flyTo(x.center,x.zoom,d)},setMaxBounds:function(a){return a=K(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var x=this.getCenter(),C=this._limitCenter(x,this._zoom,K(a));return x.equals(C)||this.panTo(C,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var x=F(d.paddingTopLeft||d.padding||[0,0]),C=F(d.paddingBottomRight||d.padding||[0,0]),I=this.project(this.getCenter()),V=this.project(a),ie=this.getPixelBounds(),ve=Y([ie.min.add(x),ie.max.subtract(C)]),Ne=ve.getSize();if(!ve.contains(V)){this._enforcingBounds=!0;var Le=V.subtract(ve.getCenter()),et=ve.extend(V).getSize().subtract(Ne);I.x+=Le.x<0?-et.x:et.x,I.y+=Le.y<0?-et.y:et.y,this.panTo(this.unproject(I),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=l({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),C=d.divideBy(2).round(),I=x.divideBy(2).round(),V=C.subtract(I);return!V.x&&!V.y?this:(a.animate&&a.pan?this.panBy(V):(a.pan&&this._rawPanBy(V),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=l({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=h(this._handleGeolocationResponse,this),x=h(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,x,a):navigator.geolocation.getCurrentPosition(d,x,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,x=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,x=a.coords.longitude,C=new G(d,x),I=C.toBounds(a.coords.accuracy*2),V=this._locateOptions;if(V.setView){var ie=this.getBoundsZoom(I);this.setView(C,V.maxZoom?Math.min(ie,V.maxZoom):ie)}var ve={latlng:C,bounds:I,timestamp:a.timestamp};for(var Ne in a.coords)typeof a.coords[Ne]=="number"&&(ve[Ne]=a.coords[Ne]);this.fire("locationfound",ve)}},addHandler:function(a,d){if(!d)return this;var x=this[a]=new d(this);return this._handlers.push(x),this.options[a]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Qt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var x="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),C=rt("div",x,d||this._mapPane);return a&&(this._panes[a]=C),C},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),x=this.unproject(a.getTopRight());return new Z(d,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,x){a=K(a),x=F(x||[0,0]);var C=this.getZoom()||0,I=this.getMinZoom(),V=this.getMaxZoom(),ie=a.getNorthWest(),ve=a.getSouthEast(),Ne=this.getSize().subtract(x),Le=Y(this.project(ve,C),this.project(ie,C)).getSize(),et=Te.any3d?this.options.zoomSnap:1,vt=Ne.x/Le.x,Ot=Ne.y/Le.y,xs=d?Math.max(vt,Ot):Math.min(vt,Ot);return C=this.getScaleZoom(xs,C),et&&(C=Math.round(C/(et/100))*(et/100),C=d?Math.ceil(C/et)*et:Math.floor(C/et)*et),Math.max(I,Math.min(V,C))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var x=this._getTopLeftPoint(a,d);return new $(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var x=this.options.crs;return d=d===void 0?this._zoom:d,x.scale(a)/x.scale(d)},getScaleZoom:function(a,d){var x=this.options.crs;d=d===void 0?this._zoom:d;var C=x.zoom(a*x.scale(d));return isNaN(C)?1/0:C},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(xe(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(F(a),d)},layerPointToLatLng:function(a){var d=F(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(xe(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(xe(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(K(a))},distance:function(a,d){return this.options.crs.distance(xe(a),xe(d))},containerPointToLayerPoint:function(a){return F(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return F(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(F(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(a)))},mouseEventToContainerPoint:function(a){return Oo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=xt(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nt(d,"scroll",this._onScroll,this),this._containerId=f(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Te.any3d,Dt(a,"leaflet-container"+(Te.touch?" leaflet-touch":"")+(Te.retina?" leaflet-retina":"")+(Te.ielt9?" leaflet-oldie":"")+(Te.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=wn(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yn(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Dt(a.markerPane,"leaflet-zoom-hide"),Dt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,x){Yn(this._mapPane,new W(0,0));var C=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var I=this._zoom!==d;this._moveStart(I,x)._move(a,d)._moveEnd(I),this.fire("viewreset"),C&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,x,C){d===void 0&&(d=this._zoom);var I=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),C?x&&x.pinch&&this.fire("zoom",x):((I||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Yn(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[f(this._container)]=this;var d=a?Nn:Nt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Te.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var x=[],C,I=d==="mouseout"||d==="mouseover",V=a.target||a.srcElement,ie=!1;V;){if(C=this._targets[f(V)],C&&(d==="click"||d==="preclick")&&this._draggableMoved(C)){ie=!0;break}if(C&&C.listens(d,!0)&&(I&&!Lo(V,a)||(x.push(C),I))||V===this._container)break;V=V.parentNode}return!x.length&&!ie&&!I&&this.listens(d,!0)&&(x=[this]),x},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var x=a.type;x==="mousedown"&&Li(d),this._fireDOMEvent(a,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,x){if(a.type==="click"){var C=l({},a);C.type="preclick",this._fireDOMEvent(C,C.type,x)}var I=this._findEventTargets(a,d);if(x){for(var V=[],ie=0;ie<x.length;ie++)x[ie].listens(d,!0)&&V.push(x[ie]);I=V.concat(I)}if(I.length){d==="contextmenu"&&Wn(a);var ve=I[0],Ne={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Le=ve.getLatLng&&(!ve._radius||ve._radius<=10);Ne.containerPoint=Le?this.latLngToContainerPoint(ve.getLatLng()):this.mouseEventToContainerPoint(a),Ne.layerPoint=this.containerPointToLayerPoint(Ne.containerPoint),Ne.latlng=Le?ve.getLatLng():this.layerPointToLatLng(Ne.layerPoint)}for(ie=0;ie<I.length;ie++)if(I[ie].fire(d,Ne,!0),Ne.originalEvent._stopped||I[ie].options.bubblingMouseEvents===!1&&k(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return ta(this._mapPane)||new W(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var x=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var x=this.getSize()._divideBy(2);return this.project(a,d)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,x){var C=this._getNewPixelOrigin(x,d);return this.project(a,d)._subtract(C)},_latLngBoundsToNewLayerBounds:function(a,d,x){var C=this._getNewPixelOrigin(x,d);return Y([this.project(a.getSouthWest(),d)._subtract(C),this.project(a.getNorthWest(),d)._subtract(C),this.project(a.getSouthEast(),d)._subtract(C),this.project(a.getNorthEast(),d)._subtract(C)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,x){if(!x)return a;var C=this.project(a,d),I=this.getSize().divideBy(2),V=new $(C.subtract(I),C.add(I)),ie=this._getBoundsOffset(V,x,d);return Math.abs(ie.x)<=1&&Math.abs(ie.y)<=1?a:this.unproject(C.add(ie),d)},_limitOffset:function(a,d){if(!d)return a;var x=this.getPixelBounds(),C=new $(x.min.add(a),x.max.add(a));return a.add(this._getBoundsOffset(C,d))},_getBoundsOffset:function(a,d,x){var C=Y(this.project(d.getNorthEast(),x),this.project(d.getSouthWest(),x)),I=C.min.subtract(a.min),V=C.max.subtract(a.max),ie=this._rebound(I.x,-V.x),ve=this._rebound(I.y,-V.y);return new W(ie,ve)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),x=this.getMaxZoom(),C=Te.any3d?this.options.zoomSnap:1;return C&&(a=Math.round(a/C)*C),Math.max(d,Math.min(x,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){En(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var x=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,d),!0)},_createAnimProxy:function(){var a=this._proxy=rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var x=_t,C=this._proxy.style[x];yr(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),C===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();yr(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var C=this.getZoomScale(d),I=this._getCenterOffset(a)._divideBy(1-1/C);return x.animate!==!0&&!this.getSize().contains(I)?!1:(U(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,x,C){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,Dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:C}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&En(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Na(a,d){return new Xt(a,d)}var Hs=ee.extend({options:{position:"topright"},initialize:function(a){S(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),x=this.getPosition(),C=a._controlCorners[x];return Dt(d,"leaflet-control"),x.indexOf("bottom")!==-1?C.insertBefore(d,C.firstChild):C.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Ca=function(a){return new Hs(a)};Xt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",x=this._controlContainer=rt("div",d+"control-container",this._container);function C(I,V){var ie=d+I+" "+d+V;a[I+V]=rt("div",ie,x)}C("top","left"),C("top","right"),C("bottom","left"),C("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Qt(this._controlCorners[a]);Qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zc=Hs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,x,C){return x<C?-1:C<x?1:0}},initialize:function(a,d,x){S(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var C in a)this._addLayer(a[C],C);for(C in d)this._addLayer(d[C],C,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Hs.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(f(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):En(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return En(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=rt("div",a),x=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Mo(d),kl(d);var C=this._section=rt("section",a+"-list");x&&(this._map.on("click",this.collapse,this),Nt(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var I=this._layersLink=rt("a",a+"-toggle",d);I.href="#",I.title="Layers",I.setAttribute("role","button"),Nt(I,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){Wn(V),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=rt("div",a+"-base",C),this._separator=rt("div",a+"-separator",C),this._overlaysList=rt("div",a+"-overlays",C),d.appendChild(C)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&f(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,x){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:x}),this.options.sortLayers&&this._layers.sort(h(function(C,I){return this.options.sortFunction(C.layer,I.layer,C.name,I.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rs(this._baseLayersList),Rs(this._overlaysList),this._layerControlInputs=[];var a,d,x,C,I=0;for(x=0;x<this._layers.length;x++)C=this._layers[x],this._addItem(C),d=d||C.overlay,a=a||!C.overlay,I+=C.overlay?0:1;return this.options.hideSingleBase&&(a=a&&I>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(f(a.target)),x=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;x&&this._map.fire(x,d)},_createRadioElement:function(a,d){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",C=document.createElement("div");return C.innerHTML=x,C.firstChild},_addItem:function(a){var d=document.createElement("label"),x=this._map.hasLayer(a.layer),C;a.overlay?(C=document.createElement("input"),C.type="checkbox",C.className="leaflet-control-layers-selector",C.defaultChecked=x):C=this._createRadioElement("leaflet-base-layers_"+f(this),x),this._layerControlInputs.push(C),C.layerId=f(a.layer),Nt(C,"click",this._onInputClick,this);var I=document.createElement("span");I.innerHTML=" "+a.name;var V=document.createElement("span");d.appendChild(V),V.appendChild(C),V.appendChild(I);var ie=a.overlay?this._overlaysList:this._baseLayersList;return ie.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,x,C=[],I=[];this._handlingClick=!0;for(var V=a.length-1;V>=0;V--)d=a[V],x=this._getLayer(d.layerId).layer,d.checked?C.push(x):d.checked||I.push(x);for(V=0;V<I.length;V++)this._map.hasLayer(I[V])&&this._map.removeLayer(I[V]);for(V=0;V<C.length;V++)this._map.hasLayer(C[V])||this._map.addLayer(C[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,x,C=this._map.getZoom(),I=a.length-1;I>=0;I--)d=a[I],x=this._getLayer(d.layerId).layer,d.disabled=x.options.minZoom!==void 0&&C<x.options.minZoom||x.options.maxZoom!==void 0&&C>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Nt(a,"click",Wn),this.expand();var d=this;setTimeout(function(){Nn(a,"click",Wn),d._preventClick=!1})}}),Il=function(a,d,x){return new zc(a,d,x)},Fi=Hs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",x=rt("div",d+" leaflet-bar"),C=this.options;return this._zoomInButton=this._createButton(C.zoomInText,C.zoomInTitle,d+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(C.zoomOutText,C.zoomOutTitle,d+"-out",x,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,x,C,I){var V=rt("a",x,C);return V.innerHTML=a,V.href="#",V.title=d,V.setAttribute("role","button"),V.setAttribute("aria-label",d),Mo(V),Nt(V,"click",jr),Nt(V,"click",I,this),Nt(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";En(this._zoomInButton,d),En(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Dt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Dt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xt.mergeOptions({zoomControl:!0}),Xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fi,this.addControl(this.zoomControl))});var uu=function(a){return new Fi(a)},Os=Hs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",x=rt("div",d),C=this.options;return this._addScales(C,d+"-line",x),a.on(C.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),x},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,x){a.metric&&(this._mScale=rt("div",d,x)),a.imperial&&(this._iScale=rt("div",d,x))},_update:function(){var a=this._map,d=a.getSize().y/2,x=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(x)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),x=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,x,d/a)},_updateImperial:function(a){var d=a*3.2808399,x,C,I;d>5280?(x=d/5280,C=this._getRoundNum(x),this._updateScale(this._iScale,C+" mi",C/x)):(I=this._getRoundNum(d),this._updateScale(this._iScale,I+" ft",I/d))},_updateScale:function(a,d,x){a.style.width=Math.round(this.options.maxWidth*x)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),x=a/d;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,d*x}}),$i=function(a){return new Os(a)},Bc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ti=Hs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Te.inlineSvg?Bc+" ":"")+"Leaflet</a>"},initialize:function(a){S(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=rt("div","leaflet-control-attribution"),Mo(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var x=[];this.options.prefix&&x.push(this.options.prefix),a.length&&x.push(a.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});Xt.mergeOptions({attributionControl:!0}),Xt.addInitHook(function(){this.options.attributionControl&&new ti().addTo(this)});var np=function(a){return new ti(a)};Hs.Layers=zc,Hs.Zoom=Fi,Hs.Scale=Os,Hs.Attribution=ti,Ca.layers=Il,Ca.zoom=uu,Ca.scale=$i,Ca.attribution=np;var tr=ee.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tr.addTo=function(a,d){return a.addHandler(d,this),this};var Uc={Events:J},zi=Te.touch?"touchstart mousedown":"mousedown",wr=fe.extend({options:{clickTolerance:3},initialize:function(a,d,x,C){S(this,C),this._element=a,this._dragStartTarget=d||a,this._preventOutline=x},enable:function(){this._enabled||(Nt(this._dragStartTarget,zi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wr._dragging===this&&this.finishDrag(!0),Nn(this._dragStartTarget,zi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Ri(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){wr._dragging===this&&this.finishDrag();return}if(!(wr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(wr._dragging=this,this._preventOutline&&Li(this._element),Al(),nn(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,x=na(this._element);this._startPoint=new W(d.clientX,d.clientY),this._startPos=ta(this._element),this._parentScale=Mr(x);var C=a.type==="mousedown";Nt(document,C?"mousemove":"touchmove",this._onMove,this),Nt(document,C?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,x=new W(d.clientX,d.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,Wn(a),this._moved||(this.fire("dragstart"),this._moved=!0,Dt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Yn(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){En(document.body,"leaflet-dragging"),this._lastTarget&&(En(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Nn(document,"mousemove touchmove",this._onMove,this),Nn(document,"mouseup touchend touchcancel",this._onUp,this),Pl(),Oi();var d=this._moved&&this._moving;this._moving=!1,wr._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Vc(a,d,x){var C,I=[1,4,2,8],V,ie,ve,Ne,Le,et,vt,Ot;for(V=0,et=a.length;V<et;V++)a[V]._code=ni(a[V],d);for(ve=0;ve<4;ve++){for(vt=I[ve],C=[],V=0,et=a.length,ie=et-1;V<et;ie=V++)Ne=a[V],Le=a[ie],Ne._code&vt?Le._code&vt||(Ot=Ml(Le,Ne,vt,d,x),Ot._code=ni(Ot,d),C.push(Ot)):(Le._code&vt&&(Ot=Ml(Le,Ne,vt,d,x),Ot._code=ni(Ot,d),C.push(Ot)),C.push(Ne));a=C}return a}function mu(a,d){var x,C,I,V,ie,ve,Ne,Le,et;if(!a||a.length===0)throw new Error("latlngs not passed");nr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var vt=xe([0,0]),Ot=K(a),xs=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());xs<1700&&(vt=Hc(a));var ls=a.length,qs=[];for(x=0;x<ls;x++){var Ls=xe(a[x]);qs.push(d.project(xe([Ls.lat-vt.lat,Ls.lng-vt.lng])))}for(ve=Ne=Le=0,x=0,C=ls-1;x<ls;C=x++)I=qs[x],V=qs[C],ie=I.y*V.x-V.y*I.x,Ne+=(I.x+V.x)*ie,Le+=(I.y+V.y)*ie,ve+=ie*3;ve===0?et=qs[0]:et=[Ne/ve,Le/ve];var Xi=d.unproject(F(et));return xe([Xi.lat+vt.lat,Xi.lng+vt.lng])}function Hc(a){for(var d=0,x=0,C=0,I=0;I<a.length;I++){var V=xe(a[I]);d+=V.lat,x+=V.lng,C++}return xe([d/C,x/C])}var sp={__proto__:null,clipPolygon:Vc,polygonCenter:mu,centroid:Hc};function Rl(a,d){if(!d||!a.length)return a.slice();var x=d*d;return a=ip(a,x),a=ap(a,x),a}function hu(a,d,x){return Math.sqrt(si(a,d,x,!0))}function rp(a,d,x){return si(a,d,x)}function ap(a,d){var x=a.length,C=typeof Uint8Array<"u"?Uint8Array:Array,I=new C(x);I[0]=I[x-1]=1,Wc(a,I,d,0,x-1);var V,ie=[];for(V=0;V<x;V++)I[V]&&ie.push(a[V]);return ie}function Wc(a,d,x,C,I){var V=0,ie,ve,Ne;for(ve=C+1;ve<=I-1;ve++)Ne=si(a[ve],a[C],a[I],!0),Ne>V&&(ie=ve,V=Ne);V>x&&(d[ie]=1,Wc(a,d,x,C,ie),Wc(a,d,x,ie,I))}function ip(a,d){for(var x=[a[0]],C=1,I=0,V=a.length;C<V;C++)op(a[C],a[I])>d&&(x.push(a[C]),I=C);return I<V-1&&x.push(a[V-1]),x}var qc;function pu(a,d,x,C,I){var V=C?qc:ni(a,x),ie=ni(d,x),ve,Ne,Le;for(qc=ie;;){if(!(V|ie))return[a,d];if(V&ie)return!1;ve=V||ie,Ne=Ml(a,d,ve,x,I),Le=ni(Ne,x),ve===V?(a=Ne,V=Le):(d=Ne,ie=Le)}}function Ml(a,d,x,C,I){var V=d.x-a.x,ie=d.y-a.y,ve=C.min,Ne=C.max,Le,et;return x&8?(Le=a.x+V*(Ne.y-a.y)/ie,et=Ne.y):x&4?(Le=a.x+V*(ve.y-a.y)/ie,et=ve.y):x&2?(Le=Ne.x,et=a.y+ie*(Ne.x-a.x)/V):x&1&&(Le=ve.x,et=a.y+ie*(ve.x-a.x)/V),new W(Le,et,I)}function ni(a,d){var x=0;return a.x<d.min.x?x|=1:a.x>d.max.x&&(x|=2),a.y<d.min.y?x|=4:a.y>d.max.y&&(x|=8),x}function op(a,d){var x=d.x-a.x,C=d.y-a.y;return x*x+C*C}function si(a,d,x,C){var I=d.x,V=d.y,ie=x.x-I,ve=x.y-V,Ne=ie*ie+ve*ve,Le;return Ne>0&&(Le=((a.x-I)*ie+(a.y-V)*ve)/Ne,Le>1?(I=x.x,V=x.y):Le>0&&(I+=ie*Le,V+=ve*Le)),ie=a.x-I,ve=a.y-V,C?ie*ie+ve*ve:new W(I,V)}function nr(a){return!T(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function fu(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nr(a)}function xu(a,d){var x,C,I,V,ie,ve,Ne,Le;if(!a||a.length===0)throw new Error("latlngs not passed");nr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var et=xe([0,0]),vt=K(a),Ot=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Ot<1700&&(et=Hc(a));var xs=a.length,ls=[];for(x=0;x<xs;x++){var qs=xe(a[x]);ls.push(d.project(xe([qs.lat-et.lat,qs.lng-et.lng])))}for(x=0,C=0;x<xs-1;x++)C+=ls[x].distanceTo(ls[x+1])/2;if(C===0)Le=ls[0];else for(x=0,V=0;x<xs-1;x++)if(ie=ls[x],ve=ls[x+1],I=ie.distanceTo(ve),V+=I,V>C){Ne=(V-C)/I,Le=[ve.x-Ne*(ve.x-ie.x),ve.y-Ne*(ve.y-ie.y)];break}var Ls=d.unproject(F(Le));return xe([Ls.lat+et.lat,Ls.lng+et.lng])}var gu={__proto__:null,simplify:Rl,pointToSegmentDistance:hu,closestPointOnSegment:rp,clipSegment:pu,_getEdgeIntersection:Ml,_getBitCode:ni,_sqClosestPointOnSegment:si,isFlat:nr,_flat:fu,polylineCenter:xu},Zc={project:function(a){return new W(a.lng,a.lat)},unproject:function(a){return new G(a.y,a.x)},bounds:new $([-180,-90],[180,90])},Gc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,x=this.R,C=a.lat*d,I=this.R_MINOR/x,V=Math.sqrt(1-I*I),ie=V*Math.sin(C),ve=Math.tan(Math.PI/4-C/2)/Math.pow((1-ie)/(1+ie),V/2);return C=-x*Math.log(Math.max(ve,1e-10)),new W(a.lng*d*x,C)},unproject:function(a){for(var d=180/Math.PI,x=this.R,C=this.R_MINOR/x,I=Math.sqrt(1-C*C),V=Math.exp(-a.y/x),ie=Math.PI/2-2*Math.atan(V),ve=0,Ne=.1,Le;ve<15&&Math.abs(Ne)>1e-7;ve++)Le=I*Math.sin(ie),Le=Math.pow((1-Le)/(1+Le),I/2),Ne=Math.PI/2-2*Math.atan(V*Le)-ie,ie+=Ne;return new G(ie*d,a.x*d/x)}},lp={__proto__:null,LonLat:Zc,Mercator:Gc,SphericalMercator:$e},cp=l({},ue,{code:"EPSG:3395",projection:Gc,transformation:(function(){var a=.5/(Math.PI*Gc.R);return Ye(a,.5,-a,.5)})()}),vu=l({},ue,{code:"EPSG:4326",projection:Zc,transformation:Ye(1/180,1,-1/180,.5)}),dp=l({},le,{projection:Zc,transformation:Ye(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var x=d.lng-a.lng,C=d.lat-a.lat;return Math.sqrt(x*x+C*C)},infinite:!0});le.Earth=ue,le.EPSG3395=cp,le.EPSG3857=Xe,le.EPSG900913=Je,le.EPSG4326=vu,le.Simple=dp;var Nr=fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var x=this.getEvents();d.on(x,this),this.once("remove",function(){d.off(x,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});Xt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=f(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=f(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return f(a)in this._layers},eachLayer:function(a,d){for(var x in this._layers)a.call(d,this._layers[x]);return this},_addLayers:function(a){a=a?T(a)?a:[a]:[];for(var d=0,x=a.length;d<x;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[f(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=f(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,x=this._getZoomSpan();for(var C in this._zoomBoundLayers){var I=this._zoomBoundLayers[C].options;a=I.minZoom===void 0?a:Math.min(a,I.minZoom),d=I.maxZoom===void 0?d:Math.max(d,I.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _a=Nr.extend({initialize:function(a,d){S(this,d),this._layers={};var x,C;if(a)for(x=0,C=a.length;x<C;x++)this.addLayer(a[x])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),x,C;for(x in this._layers)C=this._layers[x],C[a]&&C[a].apply(C,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var x in this._layers)a.call(d,this._layers[x]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f(a)}}),Fo=function(a,d){return new _a(a,d)},sa=_a.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),_a.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),_a.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Z;for(var d in this._layers){var x=this._layers[d];a.extend(x.getBounds?x.getBounds():x.getLatLng())}return a}}),yu=function(a,d){return new sa(a,d)},ri=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){S(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var x=this._getIconUrl(a);if(!x){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var C=this._createImg(x,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(C,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),C},_setIconStyles:function(a,d){var x=this.options,C=x[d+"Size"];typeof C=="number"&&(C=[C,C]);var I=F(C),V=F(d==="shadow"&&x.shadowAnchor||x.iconAnchor||I&&I.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(x.className||""),V&&(a.style.marginLeft=-V.x+"px",a.style.marginTop=-V.y+"px"),I&&(a.style.width=I.x+"px",a.style.height=I.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Te.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bu(a){return new ri(a)}var Bi=ri.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Bi.imagePath!="string"&&(Bi.imagePath=this._detectIconPath()),(this.options.imagePath||Bi.imagePath)+ri.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(x,C,I){var V=C.exec(x);return V&&V[I]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=rt("div","leaflet-default-icon-path",document.body),d=wn(a,"background-image")||wn(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),Kc=tr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new wr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Dt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&En(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,x=d._map,C=this._marker.options.autoPanSpeed,I=this._marker.options.autoPanPadding,V=ta(d._icon),ie=x.getPixelBounds(),ve=x.getPixelOrigin(),Ne=Y(ie.min._subtract(ve).add(I),ie.max._subtract(ve).subtract(I));if(!Ne.contains(V)){var Le=F((Math.max(Ne.max.x,V.x)-Ne.max.x)/(ie.max.x-Ne.max.x)-(Math.min(Ne.min.x,V.x)-Ne.min.x)/(ie.min.x-Ne.min.x),(Math.max(Ne.max.y,V.y)-Ne.max.y)/(ie.max.y-Ne.max.y)-(Math.min(Ne.min.y,V.y)-Ne.min.y)/(ie.min.y-Ne.min.y)).multiplyBy(C);x.panBy(Le,{animate:!1}),this._draggable._newPos._add(Le),this._draggable._startPos._add(Le),Yn(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=U(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,x=d._shadow,C=ta(d._icon),I=d._map.layerPointToLatLng(C);x&&Yn(x,C),d._latlng=I,a.latlng=I,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),ra=Nr.extend({options:{icon:new Bi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){S(this,d),this._latlng=xe(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=xe(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=a.icon.createIcon(this._icon),C=!1;x!==this._icon&&(this._icon&&this._removeIcon(),C=!0,a.title&&(x.title=a.title),x.tagName==="IMG"&&(x.alt=a.alt||"")),Dt(x,d),a.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(x,"focus",this._panOnFocus,this);var I=a.icon.createShadow(this._shadow),V=!1;I!==this._shadow&&(this._removeShadow(),V=!0),I&&(Dt(I,d),I.alt=""),this._shadow=I,a.opacity<1&&this._updateOpacity(),C&&this.getPane().appendChild(this._icon),this._initInteraction(),I&&V&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nn(this._icon,"focus",this._panOnFocus,this),Qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Yn(this._icon,a),this._shadow&&Yn(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Kc)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Kc(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Ms(this._icon,a),this._shadow&&Ms(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,x=d.iconSize?F(d.iconSize):F(0,0),C=d.iconAnchor?F(d.iconAnchor):F(0,0);a.panInside(this._latlng,{paddingTopLeft:C,paddingBottomRight:x.subtract(C)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function up(a,d){return new ra(a,d)}var Sa=Nr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return S(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ol=Sa.extend({options:{fill:!0,radius:10},initialize:function(a,d){S(this,d),this._latlng=xe(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=xe(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Sa.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,x=this._clickTolerance(),C=[a+x,d+x];this._pxBounds=new $(this._point.subtract(C),this._point.add(C))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ju(a,d){return new Ol(a,d)}var Ll=Ol.extend({initialize:function(a,d,x){if(typeof d=="number"&&(d=l({},x,{radius:d})),S(this,d),this._latlng=xe(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Z(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Sa.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,x=this._map,C=x.options.crs;if(C.distance===ue.distance){var I=Math.PI/180,V=this._mRadius/ue.R/I,ie=x.project([d+V,a]),ve=x.project([d-V,a]),Ne=ie.add(ve).divideBy(2),Le=x.unproject(Ne).lat,et=Math.acos((Math.cos(V*I)-Math.sin(d*I)*Math.sin(Le*I))/(Math.cos(d*I)*Math.cos(Le*I)))/I;(isNaN(et)||et===0)&&(et=V/Math.cos(Math.PI/180*d)),this._point=Ne.subtract(x.getPixelOrigin()),this._radius=isNaN(et)?0:Ne.x-x.project([Le,a-et]).x,this._radiusY=Ne.y-ie.y}else{var vt=C.unproject(C.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(vt).x}this._updateBounds()}});function $o(a,d,x){return new Ll(a,d,x)}var Ws=Sa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){S(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,x=null,C=si,I,V,ie=0,ve=this._parts.length;ie<ve;ie++)for(var Ne=this._parts[ie],Le=1,et=Ne.length;Le<et;Le++){I=Ne[Le-1],V=Ne[Le];var vt=C(a,I,V,!0);vt<d&&(d=vt,x=C(a,I,V))}return x&&(x.distance=Math.sqrt(d)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=xe(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Z,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return nr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],x=nr(a),C=0,I=a.length;C<I;C++)x?(d[C]=xe(a[C]),this._bounds.extend(d[C])):d[C]=this._convertLatLngs(a[C]);return d},_project:function(){var a=new $;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new W(a,a);this._rawPxBounds&&(this._pxBounds=new $([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,x){var C=a[0]instanceof G,I=a.length,V,ie;if(C){for(ie=[],V=0;V<I;V++)ie[V]=this._map.latLngToLayerPoint(a[V]),x.extend(ie[V]);d.push(ie)}else for(V=0;V<I;V++)this._projectLatlngs(a[V],d,x)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,x,C,I,V,ie,ve,Ne;for(x=0,I=0,V=this._rings.length;x<V;x++)for(Ne=this._rings[x],C=0,ie=Ne.length;C<ie-1;C++)ve=pu(Ne[C],Ne[C+1],a,C,!0),ve&&(d[I]=d[I]||[],d[I].push(ve[0]),(ve[1]!==Ne[C+1]||C===ie-2)&&(d[I].push(ve[1]),I++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,x=0,C=a.length;x<C;x++)a[x]=Rl(a[x],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var x,C,I,V,ie,ve,Ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(x=0,V=this._parts.length;x<V;x++)for(ve=this._parts[x],C=0,ie=ve.length,I=ie-1;C<ie;I=C++)if(!(!d&&C===0)&&hu(a,ve[I],ve[C])<=Ne)return!0;return!1}});function mp(a,d){return new Ws(a,d)}Ws._flat=fu;var aa=Ws.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Ws.prototype._convertLatLngs.call(this,a),x=d.length;return x>=2&&d[0]instanceof G&&d[0].equals(d[x-1])&&d.pop(),d},_setLatLngs:function(a){Ws.prototype._setLatLngs.call(this,a),nr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return nr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,x=new W(d,d);if(a=new $(a.min.subtract(x),a.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var C=0,I=this._rings.length,V;C<I;C++)V=Vc(this._rings[C],a,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,x,C,I,V,ie,ve,Ne,Le;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(V=0,Ne=this._parts.length;V<Ne;V++)for(x=this._parts[V],ie=0,Le=x.length,ve=Le-1;ie<Le;ve=ie++)C=x[ie],I=x[ve],C.y>a.y!=I.y>a.y&&a.x<(I.x-C.x)*(a.y-C.y)/(I.y-C.y)+C.x&&(d=!d);return d||Ws.prototype._containsPoint.call(this,a,!0)}});function hp(a,d){return new aa(a,d)}var Lr=sa.extend({initialize:function(a,d){S(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=T(a)?a:a.features,x,C,I;if(d){for(x=0,C=d.length;x<C;x++)I=d[x],(I.geometries||I.geometry||I.features||I.coordinates)&&this.addData(I);return this}var V=this.options;if(V.filter&&!V.filter(a))return this;var ie=Ui(a,V);return ie?(ie.feature=Ul(a),ie.defaultOptions=ie.options,this.resetStyle(ie),V.onEachFeature&&V.onEachFeature(a,ie),this.addLayer(ie)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=l({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function Ui(a,d){var x=a.type==="Feature"?a.geometry:a,C=x?x.coordinates:null,I=[],V=d&&d.pointToLayer,ie=d&&d.coordsToLatLng||$l,ve,Ne,Le,et;if(!C&&!x)return null;switch(x.type){case"Point":return ve=ie(C),Fl(V,a,ve,d);case"MultiPoint":for(Le=0,et=C.length;Le<et;Le++)ve=ie(C[Le]),I.push(Fl(V,a,ve,d));return new sa(I);case"LineString":case"MultiLineString":return Ne=zo(C,x.type==="LineString"?0:1,ie),new Ws(Ne,d);case"Polygon":case"MultiPolygon":return Ne=zo(C,x.type==="Polygon"?1:2,ie),new aa(Ne,d);case"GeometryCollection":for(Le=0,et=x.geometries.length;Le<et;Le++){var vt=Ui({geometry:x.geometries[Le],type:"Feature",properties:a.properties},d);vt&&I.push(vt)}return new sa(I);case"FeatureCollection":for(Le=0,et=x.features.length;Le<et;Le++){var Ot=Ui(x.features[Le],d);Ot&&I.push(Ot)}return new sa(I);default:throw new Error("Invalid GeoJSON object.")}}function Fl(a,d,x,C){return a?a(d,x):new ra(x,C&&C.markersInheritOptions&&C)}function $l(a){return new G(a[1],a[0],a[2])}function zo(a,d,x){for(var C=[],I=0,V=a.length,ie;I<V;I++)ie=d?zo(a[I],d-1,x):(x||$l)(a[I]),C.push(ie);return C}function zl(a,d){return a=xe(a),a.alt!==void 0?[w(a.lng,d),w(a.lat,d),w(a.alt,d)]:[w(a.lng,d),w(a.lat,d)]}function Bl(a,d,x,C){for(var I=[],V=0,ie=a.length;V<ie;V++)I.push(d?Bl(a[V],nr(a[V])?0:d-1,x,C):zl(a[V],C));return!d&&x&&I.length>0&&I.push(I[0].slice()),I}function Vi(a,d){return a.feature?l({},a.feature,{geometry:d}):Ul(d)}function Ul(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Xc={toGeoJSON:function(a){return Vi(this,{type:"Point",coordinates:zl(this.getLatLng(),a)})}};ra.include(Xc),Ll.include(Xc),Ol.include(Xc),Ws.include({toGeoJSON:function(a){var d=!nr(this._latlngs),x=Bl(this._latlngs,d?1:0,!1,a);return Vi(this,{type:(d?"Multi":"")+"LineString",coordinates:x})}}),aa.include({toGeoJSON:function(a){var d=!nr(this._latlngs),x=d&&!nr(this._latlngs[0]),C=Bl(this._latlngs,x?2:d?1:0,!0,a);return d||(C=[C]),Vi(this,{type:(x?"Multi":"")+"Polygon",coordinates:C})}}),_a.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(x){d.push(x.toGeoJSON(a).geometry.coordinates)}),Vi(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var x=d==="GeometryCollection",C=[];return this.eachLayer(function(I){if(I.toGeoJSON){var V=I.toGeoJSON(a);if(x)C.push(V.geometry);else{var ie=Ul(V);ie.type==="FeatureCollection"?C.push.apply(C,ie.features):C.push(ie)}}}),x?Vi(this,{geometries:C,type:"GeometryCollection"}):{type:"FeatureCollection",features:C}}});function wu(a,d){return new Lr(a,d)}var Cr=wu,Aa=Nr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,x){this._url=a,this._bounds=K(d),S(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Rr(this._image),this},bringToBack:function(){return this._map&&ea(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=K(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:rt("img");if(Dt(d,"leaflet-image-layer"),this._zoomAnimated&&Dt(d,"leaflet-zoom-animated"),this.options.className&&Dt(d,this.options.className),d.onselectstart=g,d.onmousemove=g,d.onload=h(this.fire,this,"load"),d.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;yr(this._image,x,d)},_reset:function(){var a=this._image,d=new $(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=d.getSize();Yn(a,d.min),a.style.width=x.x+"px",a.style.height=x.y+"px"},_updateOpacity:function(){Ms(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Nu=function(a,d,x){return new Aa(a,d,x)},Yc=Aa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:rt("video");if(Dt(d,"leaflet-image-layer"),this._zoomAnimated&&Dt(d,"leaflet-zoom-animated"),this.options.className&&Dt(d,this.options.className),d.onselectstart=g,d.onmousemove=g,d.onloadeddata=h(this.fire,this,"load"),a){for(var x=d.getElementsByTagName("source"),C=[],I=0;I<x.length;I++)C.push(x[I].src);this._url=x.length>0?C:[d.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var ie=rt("source");ie.src=this._url[V],d.appendChild(ie)}}});function Cu(a,d,x){return new Yc(a,d,x)}var Qc=Aa.extend({_initImage:function(){var a=this._image=this._url;Dt(a,"leaflet-image-layer"),this._zoomAnimated&&Dt(a,"leaflet-zoom-animated"),this.options.className&&Dt(a,this.options.className),a.onselectstart=g,a.onmousemove=g}});function Jc(a,d,x){return new Qc(a,d,x)}var Fr=Nr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof G||T(a))?(this._latlng=xe(a),S(this,d)):(S(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Ms(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Ms(this._container,1),this.bringToFront(),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Ms(this._container,0),this._removeTimeout=setTimeout(h(Qt,void 0,this._container),200)):Qt(this._container),this.options.interactive&&(En(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=xe(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rr(this._container),this},bringToBack:function(){return this._map&&ea(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof sa){d=null;var x=this._source._layers;for(var C in x)if(x[C]._map){d=x[C];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=F(this.options.offset),x=this._getAnchor();this._zoomAnimated?Yn(this._container,a.add(x)):d=d.add(a).add(x);var C=this._containerBottom=-d.y,I=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=C+"px",this._container.style.left=I+"px"}},_getAnchor:function(){return[0,0]}});Xt.include({_initOverlay:function(a,d,x,C){var I=d;return I instanceof a||(I=new a(C).setContent(d)),x&&I.setLatLng(x),I}}),Nr.include({_initOverlay:function(a,d,x,C){var I=x;return I instanceof a?(S(I,C),I._source=this):(I=d&&!C?d:new a(C,this),I.setContent(x)),I}});var Vl=Fr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Fr.prototype.openOn.call(this,a)},onAdd:function(a){Fr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Sa||this._source.on("preclick",Or))},onRemove:function(a){Fr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Sa||this._source.off("preclick",Or))},getEvents:function(){var a=Fr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=rt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=rt("div",a+"-content-wrapper",d);if(this._contentNode=rt("div",a+"-content",x),Mo(d),kl(this._contentNode),Nt(d,"contextmenu",Or),this._tipContainer=rt("div",a+"-tip-container",d),this._tip=rt("div",a+"-tip",this._tipContainer),this.options.closeButton){var C=this._closeButton=rt("a",a+"-close-button",d);C.setAttribute("role","button"),C.setAttribute("aria-label","Close popup"),C.href="#close",C.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(C,"click",function(I){Wn(I),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var x=a.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),d.width=x+1+"px",d.whiteSpace="",d.height="";var C=a.offsetHeight,I=this.options.maxHeight,V="leaflet-popup-scrolled";I&&C>I?(d.height=I+"px",Dt(a,V)):En(a,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),x=this._getAnchor();Yn(this._container,d.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(wn(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+d,C=this._containerWidth,I=new W(this._containerLeft,-x-this._containerBottom);I._add(ta(this._container));var V=a.layerPointToContainerPoint(I),ie=F(this.options.autoPanPadding),ve=F(this.options.autoPanPaddingTopLeft||ie),Ne=F(this.options.autoPanPaddingBottomRight||ie),Le=a.getSize(),et=0,vt=0;V.x+C+Ne.x>Le.x&&(et=V.x+C-Le.x+Ne.x),V.x-et-ve.x<0&&(et=V.x-ve.x),V.y+x+Ne.y>Le.y&&(vt=V.y+x-Le.y+Ne.y),V.y-vt-ve.y<0&&(vt=V.y-ve.y),(et||vt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([et,vt]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hi=function(a,d){return new Vl(a,d)};Xt.mergeOptions({closePopupOnClick:!0}),Xt.include({openPopup:function(a,d,x){return this._initOverlay(Vl,a,d,x).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Nr.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Vl,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof sa||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){jr(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Sa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Wi=Fr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Fr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Fr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Fr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=rt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,x,C=this._map,I=this._container,V=C.latLngToContainerPoint(C.getCenter()),ie=C.layerPointToContainerPoint(a),ve=this.options.direction,Ne=I.offsetWidth,Le=I.offsetHeight,et=F(this.options.offset),vt=this._getAnchor();ve==="top"?(d=Ne/2,x=Le):ve==="bottom"?(d=Ne/2,x=0):ve==="center"?(d=Ne/2,x=Le/2):ve==="right"?(d=0,x=Le/2):ve==="left"?(d=Ne,x=Le/2):ie.x<V.x?(ve="right",d=0,x=Le/2):(ve="left",d=Ne+(et.x+vt.x)*2,x=Le/2),a=a.subtract(F(d,x,!0)).add(et).add(vt),En(I,"leaflet-tooltip-right"),En(I,"leaflet-tooltip-left"),En(I,"leaflet-tooltip-top"),En(I,"leaflet-tooltip-bottom"),Dt(I,"leaflet-tooltip-"+ve),Yn(I,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Ms(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Bo=function(a,d){return new Wi(a,d)};Xt.include({openTooltip:function(a,d,x){return this._initOverlay(Wi,a,d,x).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Nr.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wi,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[d](x),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof sa||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(Nt(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Nt(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,x,C;this._tooltip.options.sticky&&a.originalEvent&&(x=this._map.mouseEventToContainerPoint(a.originalEvent),C=this._map.containerPointToLayerPoint(x),d=this._map.layerPointToLatLng(C)),this._tooltip.setLatLng(d)}});var Hl=ri.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),x=this.options;if(x.html instanceof Element?(Rs(d),d.appendChild(x.html)):d.innerHTML=x.html!==!1?x.html:"",x.bgPos){var C=F(x.bgPos);d.style.backgroundPosition=-C.x+"px "+-C.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function _u(a){return new Hl(a)}ri.Default=Bi;var Pa=Nr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Te.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){S(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Qt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ea(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof W?a:new W(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,x=-a(-1/0,1/0),C=0,I=d.length,V;C<I;C++)V=d[C].style.zIndex,d[C]!==this._container&&V&&(x=a(x,+V));isFinite(x)&&(this.options.zIndex=x+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Te.ielt9){Ms(this._container,this.options.opacity);var a=+new Date,d=!1,x=!1;for(var C in this._tiles){var I=this._tiles[C];if(!(!I.current||!I.loaded)){var V=Math.min(1,(a-I.loaded)/200);Ms(I.el,V),V<1?d=!0:(I.active?x=!0:this._onOpaqueTile(I),I.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),d&&(M(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===a?(this._levels[x].el.style.zIndex=d-Math.abs(a-x),this._onUpdateLevel(x)):(Qt(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var C=this._levels[a],I=this._map;return C||(C=this._levels[a]={},C.el=rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),C.el.style.zIndex=d,C.origin=I.project(I.unproject(I.getPixelOrigin()),a).round(),C.zoom=a,this._setZoomTransform(C,I.getCenter(),I.getZoom()),g(C.el.offsetWidth),this._onCreateLevel(C)),this._level=C,C}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var a,d,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var C=d.coords;this._retainParent(C.x,C.y,C.z,C.z-5)||this._retainChildren(C.x,C.y,C.z,C.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Qt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,x,C){var I=Math.floor(a/2),V=Math.floor(d/2),ie=x-1,ve=new W(+I,+V);ve.z=+ie;var Ne=this._tileCoordsToKey(ve),Le=this._tiles[Ne];return Le&&Le.active?(Le.retain=!0,!0):(Le&&Le.loaded&&(Le.retain=!0),ie>C?this._retainParent(I,V,ie,C):!1)},_retainChildren:function(a,d,x,C){for(var I=2*a;I<2*a+2;I++)for(var V=2*d;V<2*d+2;V++){var ie=new W(I,V);ie.z=x+1;var ve=this._tileCoordsToKey(ie),Ne=this._tiles[ve];if(Ne&&Ne.active){Ne.retain=!0;continue}else Ne&&Ne.loaded&&(Ne.retain=!0);x+1<C&&this._retainChildren(I,V,x+1,C)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,x,C){var I=Math.round(d);this.options.maxZoom!==void 0&&I>this.options.maxZoom||this.options.minZoom!==void 0&&I<this.options.minZoom?I=void 0:I=this._clampZoom(I);var V=this.options.updateWhenZooming&&I!==this._tileZoom;(!C||V)&&(this._tileZoom=I,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),I!==void 0&&this._update(a),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var x in this._levels)this._setZoomTransform(this._levels[x],a,d)},_setZoomTransform:function(a,d,x){var C=this._map.getZoomScale(x,a.zoom),I=a.origin.multiplyBy(C).subtract(this._map._getNewPixelOrigin(d,x)).round();Te.any3d?yr(a.el,I,C):Yn(a.el,I)},_resetGrid:function(){var a=this._map,d=a.options.crs,x=this._tileSize=this.getTileSize(),C=this._tileZoom,I=this._map.getPixelWorldBounds(this._tileZoom);I&&(this._globalTileRange=this._pxBoundsToTileRange(I)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],C).x/x.x),Math.ceil(a.project([0,d.wrapLng[1]],C).x/x.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],C).y/x.x),Math.ceil(a.project([d.wrapLat[1],0],C).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,x=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),C=d.getZoomScale(x,this._tileZoom),I=d.project(a,this._tileZoom).floor(),V=d.getSize().divideBy(C*2);return new $(I.subtract(V),I.add(V))},_update:function(a){var d=this._map;if(d){var x=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var C=this._getTiledPixelBounds(a),I=this._pxBoundsToTileRange(C),V=I.getCenter(),ie=[],ve=this.options.keepBuffer,Ne=new $(I.getBottomLeft().subtract([ve,-ve]),I.getTopRight().add([ve,-ve]));if(!(isFinite(I.min.x)&&isFinite(I.min.y)&&isFinite(I.max.x)&&isFinite(I.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Le in this._tiles){var et=this._tiles[Le].coords;(et.z!==this._tileZoom||!Ne.contains(new W(et.x,et.y)))&&(this._tiles[Le].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(a,x);return}for(var vt=I.min.y;vt<=I.max.y;vt++)for(var Ot=I.min.x;Ot<=I.max.x;Ot++){var xs=new W(Ot,vt);if(xs.z=this._tileZoom,!!this._isValidTile(xs)){var ls=this._tiles[this._tileCoordsToKey(xs)];ls?ls.current=!0:ie.push(xs)}}if(ie.sort(function(Ls,Xi){return Ls.distanceTo(V)-Xi.distanceTo(V)}),ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var qs=document.createDocumentFragment();for(Ot=0;Ot<ie.length;Ot++)this._addTile(ie[Ot],qs);this._level.el.appendChild(qs)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var x=this._globalTileRange;if(!d.wrapLng&&(a.x<x.min.x||a.x>x.max.x)||!d.wrapLat&&(a.y<x.min.y||a.y>x.max.y))return!1}if(!this.options.bounds)return!0;var C=this._tileCoordsToBounds(a);return K(this.options.bounds).overlaps(C)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,x=this.getTileSize(),C=a.scaleBy(x),I=C.add(x),V=d.unproject(C,a.z),ie=d.unproject(I,a.z);return[V,ie]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),x=new Z(d[0],d[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),x=new W(+d[0],+d[1]);return x.z=+d[2],x},_removeTile:function(a){var d=this._tiles[a];d&&(Qt(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Dt(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=g,a.onmousemove=g,Te.ielt9&&this.options.opacity<1&&Ms(a,this.options.opacity)},_addTile:function(a,d){var x=this._getTilePos(a),C=this._tileCoordsToKey(a),I=this.createTile(this._wrapCoords(a),h(this._tileReady,this,a));this._initTile(I),this.createTile.length<2&&U(h(this._tileReady,this,a,null,I)),Yn(I,x),this._tiles[C]={el:I,coords:a,current:!0},d.appendChild(I),this.fire("tileloadstart",{tile:I,coords:a})},_tileReady:function(a,d,x){d&&this.fire("tileerror",{error:d,tile:x,coords:a});var C=this._tileCoordsToKey(a);x=this._tiles[C],x&&(x.loaded=+new Date,this._map._fadeAnimated?(Ms(x.el,0),M(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),d||(Dt(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Te.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new W(this._wrapX?v(a.x,this._wrapX):a.x,this._wrapY?v(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new $(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function qi(a){return new Pa(a)}var Ea=Pa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=S(this,d),d.detectRetina&&Te.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var x=document.createElement("img");return Nt(x,"load",h(this._tileOnLoad,this,d,x)),Nt(x,"error",h(this._tileOnError,this,d,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(a),x},getTileUrl:function(a){var d={r:Te.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=x),d["-y"]=x}return E(this._url,l(d,this.options))},_tileOnLoad:function(a,d){Te.ielt9?setTimeout(h(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,x){var C=this.options.errorTileUrl;C&&d.getAttribute("src")!==C&&(d.src=C),a(x,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,x=this.options.zoomReverse,C=this.options.zoomOffset;return x&&(a=d-a),a+C},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=g,d.onerror=g,!d.complete)){d.src=R;var x=this._tiles[a].coords;Qt(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:x})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",R),Pa.prototype._removeTile.call(this,a)},_tileReady:function(a,d,x){if(!(!this._map||x&&x.getAttribute("src")===R))return Pa.prototype._tileReady.call(this,a,d,x)}});function ed(a,d){return new Ea(a,d)}var Uo=Ea.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var x=l({},this.defaultWmsParams);for(var C in d)C in this.options||(x[C]=d[C]);d=S(this,d);var I=d.detectRetina&&Te.retina?2:1,V=this.getTileSize();x.width=V.x*I,x.height=V.y*I,this.wmsParams=x},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,Ea.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),x=this._crs,C=Y(x.project(d[0]),x.project(d[1])),I=C.min,V=C.max,ie=(this._wmsVersion>=1.3&&this._crs===vu?[I.y,I.x,V.y,V.x]:[I.x,I.y,V.x,V.y]).join(","),ve=Ea.prototype.getTileUrl.call(this,a);return ve+A(this.wmsParams,ve,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ie},setParams:function(a,d){return l(this.wmsParams,a),d||this.redraw(),this}});function Su(a,d){return new Uo(a,d)}Ea.WMS=Uo,ed.wms=Su;var $r=Nr.extend({options:{padding:.1},initialize:function(a){S(this,a),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var x=this._map.getZoomScale(d,this._zoom),C=this._map.getSize().multiplyBy(.5+this.options.padding),I=this._map.project(this._center,d),V=C.multiplyBy(-x).add(I).subtract(this._map._getNewPixelOrigin(a,d));Te.any3d?yr(this._container,V,x):Yn(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),x=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new $(x,x.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),td=$r.extend({options:{tolerance:0},getEvents:function(){var a=$r.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$r.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Nt(a,"mousemove",this._onMouseMove,this),Nt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Qt(this._container),Nn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$r.prototype._update.call(this);var a=this._bounds,d=this._container,x=a.getSize(),C=Te.retina?2:1;Yn(d,a.min),d.width=C*x.x,d.height=C*x.y,d.style.width=x.x+"px",d.style.height=x.y+"px",Te.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){$r.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,x=d.next,C=d.prev;x?x.prev=C:this._drawLast=C,C?C.next=x:this._drawFirst=x,delete a._order,delete this._layers[f(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),x=[],C,I;for(I=0;I<d.length;I++){if(C=Number(d[I]),isNaN(C))return;x.push(C)}a.options._dashArray=x}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var x=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var C=this._drawFirst;C;C=C.next)a=C.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var x,C,I,V,ie=a._parts,ve=ie.length,Ne=this._ctx;if(ve){for(Ne.beginPath(),x=0;x<ve;x++){for(C=0,I=ie[x].length;C<I;C++)V=ie[x][C],Ne[C?"lineTo":"moveTo"](V.x,V.y);d&&Ne.closePath()}this._fillStroke(Ne,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,x=this._ctx,C=Math.max(Math.round(a._radius),1),I=(Math.max(Math.round(a._radiusY),1)||C)/C;I!==1&&(x.save(),x.scale(1,I)),x.beginPath(),x.arc(d.x,d.y/I,C,0,Math.PI*2,!1),I!==1&&x.restore(),this._fillStroke(x,a)}},_fillStroke:function(a,d){var x=d.options;x.fill&&(a.globalAlpha=x.fillOpacity,a.fillStyle=x.fillColor||x.color,a.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=x.opacity,a.lineWidth=x.weight,a.strokeStyle=x.color,a.lineCap=x.lineCap,a.lineJoin=x.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),x,C,I=this._drawFirst;I;I=I.next)x=I.layer,x.options.interactive&&x._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(x))&&(C=x);this._fireEvent(C?[C]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(En(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var x,C,I=this._drawFirst;I;I=I.next)x=I.layer,x.options.interactive&&x._containsPoint(d)&&(C=x);C!==this._hoveredLayer&&(this._handleMouseOut(a),C&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([C],a,"mouseover"),this._hoveredLayer=C)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,x){this._map._fireDOMEvent(d,x||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var x=d.next,C=d.prev;if(x)x.prev=C;else return;C?C.next=x:x&&(this._drawFirst=x),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var x=d.next,C=d.prev;if(C)C.next=x;else return;x?x.prev=C:C&&(this._drawLast=C),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function nd(a){return Te.canvas?new td(a):null}var Zi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Au={_initContainer:function(){this._container=rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($r.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=Zi("shape");Dt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=Zi("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;Qt(d),a.removeInteractiveTarget(d),delete this._layers[f(a)]},_updateStyle:function(a){var d=a._stroke,x=a._fill,C=a.options,I=a._container;I.stroked=!!C.stroke,I.filled=!!C.fill,C.stroke?(d||(d=a._stroke=Zi("stroke")),I.appendChild(d),d.weight=C.weight+"px",d.color=C.color,d.opacity=C.opacity,C.dashArray?d.dashStyle=T(C.dashArray)?C.dashArray.join(" "):C.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=C.lineCap.replace("butt","flat"),d.joinstyle=C.lineJoin):d&&(I.removeChild(d),a._stroke=null),C.fill?(x||(x=a._fill=Zi("fill")),I.appendChild(x),x.color=C.fillColor||C.color,x.opacity=C.fillOpacity):x&&(I.removeChild(x),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),x=Math.round(a._radius),C=Math.round(a._radiusY||x);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+x+","+C+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){Rr(a._container)},_bringToBack:function(a){ea(a._container)}},_r=Te.vml?Zi:ot,ai=$r.extend({_initContainer:function(){this._container=_r("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_r("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qt(this._container),Nn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$r.prototype._update.call(this);var a=this._bounds,d=a.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,x.setAttribute("width",d.x),x.setAttribute("height",d.y)),Yn(x,a.min),x.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=_r("path");a.options.className&&Dt(d,a.options.className),a.options.interactive&&Dt(d,"leaflet-interactive"),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Qt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,x=a.options;d&&(x.stroke?(d.setAttribute("stroke",x.color),d.setAttribute("stroke-opacity",x.opacity),d.setAttribute("stroke-width",x.weight),d.setAttribute("stroke-linecap",x.lineCap),d.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?d.setAttribute("stroke-dasharray",x.dashArray):d.removeAttribute("stroke-dasharray"),x.dashOffset?d.setAttribute("stroke-dashoffset",x.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),x.fill?(d.setAttribute("fill",x.fillColor||x.color),d.setAttribute("fill-opacity",x.fillOpacity),d.setAttribute("fill-rule",x.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,jt(a._parts,d))},_updateCircle:function(a){var d=a._point,x=Math.max(Math.round(a._radius),1),C=Math.max(Math.round(a._radiusY),1)||x,I="a"+x+","+C+" 0 1,0 ",V=a._empty()?"M0 0":"M"+(d.x-x)+","+d.y+I+x*2+",0 "+I+-x*2+",0 ";this._setPath(a,V)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){Rr(a._path)},_bringToBack:function(a){ea(a._path)}});Te.vml&&ai.include(Au);function Wl(a){return Te.svg||Te.vml?new ai(a):null}Xt.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&nd(a)||Wl(a)}});var Pu=aa.extend({initialize:function(a,d){aa.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=K(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function pp(a,d){return new Pu(a,d)}ai.create=_r,ai.pointsToPath=jt,Lr.geometryToLayer=Ui,Lr.coordsToLatLng=$l,Lr.coordsToLatLngs=zo,Lr.latLngToCoords=zl,Lr.latLngsToCoords=Bl,Lr.getFeature=Vi,Lr.asFeature=Ul,Xt.mergeOptions({boxZoom:!0});var Gi=tr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Nn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),nn(),Al(),this._startPoint=this._map.mouseEventToContainerPoint(a),Nt(document,{contextmenu:jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=rt("div","leaflet-zoom-box",this._container),Dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new $(this._point,this._startPoint),x=d.getSize();Yn(this._box,d.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(Qt(this._box),En(this._container,"leaflet-crosshair")),Oi(),Pl(),Nn(document,{contextmenu:jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var d=new Z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xt.addInitHook("addHandler","boxZoom",Gi),Xt.mergeOptions({doubleClickZoom:!0});var Eu=tr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,x=d.getZoom(),C=d.options.zoomDelta,I=a.originalEvent.shiftKey?x-C:x+C;d.options.doubleClickZoom==="center"?d.setZoom(I):d.setZoomAround(a.containerPoint,I)}});Xt.addInitHook("addHandler","doubleClickZoom",Eu),Xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sd=tr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new wr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){En(this._map._container,"leaflet-grab"),En(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=K(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),x=this._initialWorldOffset,C=this._draggable._newPos.x,I=(C-d+x)%a+d-x,V=(C+d+x)%a-d-x,ie=Math.abs(I+x)<Math.abs(V+x)?I:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ie},_onDragEnd:function(a){var d=this._map,x=d.options,C=!x.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),C)d.fire("moveend");else{this._prunePositions(+new Date);var I=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,ie=x.easeLinearity,ve=I.multiplyBy(ie/V),Ne=ve.distanceTo([0,0]),Le=Math.min(x.inertiaMaxSpeed,Ne),et=ve.multiplyBy(Le/Ne),vt=Le/(x.inertiaDeceleration*ie),Ot=et.multiplyBy(-vt/2).round();!Ot.x&&!Ot.y?d.fire("moveend"):(Ot=d._limitOffset(Ot,d.options.maxBounds),U(function(){d.panBy(Ot,{duration:vt,easeLinearity:ie,noMoveStart:!0,animate:!0})}))}}});Xt.addInitHook("addHandler","dragging",sd),Xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var rd=tr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Nt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Nn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,x=a.scrollTop||d.scrollTop,C=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(C,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},x=this.keyCodes,C,I;for(C=0,I=x.left.length;C<I;C++)d[x.left[C]]=[-1*a,0];for(C=0,I=x.right.length;C<I;C++)d[x.right[C]]=[a,0];for(C=0,I=x.down.length;C<I;C++)d[x.down[C]]=[0,a];for(C=0,I=x.up.length;C<I;C++)d[x.up[C]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},x=this.keyCodes,C,I;for(C=0,I=x.zoomIn.length;C<I;C++)d[x.zoomIn[C]]=a;for(C=0,I=x.zoomOut.length;C<I;C++)d[x.zoomOut[C]]=-a},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Nn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,x=this._map,C;if(d in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(C=this._panKeys[d],a.shiftKey&&(C=F(C).multiplyBy(3)),x.options.maxBounds&&(C=x._limitOffset(F(C),x.options.maxBounds)),x.options.worldCopyJump){var I=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(C)));x.panTo(I)}else x.panBy(C)}else if(d in this._zoomKeys)x.setZoom(x.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;jr(a)}}});Xt.addInitHook("addHandler","keyboard",rd),Xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Cn=tr.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Nn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=du(a),x=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var C=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),C),jr(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),x=this._map.options.zoomSnap||0;a._stop();var C=this._delta/(this._map.options.wheelPxPerZoomLevel*4),I=4*Math.log(2/(1+Math.exp(-Math.abs(C))))/Math.LN2,V=x?Math.ceil(I/x)*x:I,ie=a._limitZoom(d+(this._delta>0?V:-V))-d;this._delta=0,this._startTime=null,ie&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+ie):a.setZoomAround(this._lastMousePos,d+ie))}});Xt.addInitHook("addHandler","scrollWheelZoom",Cn);var ad=600;Xt.mergeOptions({tapHold:Te.touchNative&&Te.safari&&Te.mobile,tapTolerance:15});var Vo=tr.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Nn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new W(d.clientX,d.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",Wn),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),ad),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Nn(document,"touchend",Wn),Nn(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Nn(document,"touchend touchcancel contextmenu",this._cancel,this),Nn(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new W(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var x=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});x._simulated=!0,d.target.dispatchEvent(x)}});Xt.addInitHook("addHandler","tapHold",Vo),Xt.mergeOptions({touchZoom:Te.touch,bounceAtZoomLimits:!0});var Ki=tr.extend({addHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){En(this._map._container,"leaflet-touch-zoom"),Nn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var x=d.mouseEventToContainerPoint(a.touches[0]),C=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(x.add(C)._divideBy(2))),this._startDist=x.distanceTo(C),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),Wn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,x=d.mouseEventToContainerPoint(a.touches[0]),C=d.mouseEventToContainerPoint(a.touches[1]),I=x.distanceTo(C)/this._startDist;if(this._zoom=d.getScaleZoom(I,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&I<1||this._zoom>d.getMaxZoom()&&I>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,I===1)return}else{var V=x._add(C)._divideBy(2)._subtract(this._centerPoint);if(I===1&&V.x===0&&V.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var ie=h(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(ie,this,!0),Wn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Nn(document,"touchmove",this._onTouchMove,this),Nn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xt.addInitHook("addHandler","touchZoom",Ki),Xt.BoxZoom=Gi,Xt.DoubleClickZoom=Eu,Xt.Drag=sd,Xt.Keyboard=rd,Xt.ScrollWheelZoom=Cn,Xt.TapHold=Vo,Xt.TouchZoom=Ki,n.Bounds=$,n.Browser=Te,n.CRS=le,n.Canvas=td,n.Circle=Ll,n.CircleMarker=Ol,n.Class=ee,n.Control=Hs,n.DivIcon=Hl,n.DivOverlay=Fr,n.DomEvent=Tl,n.DomUtil=Ro,n.Draggable=wr,n.Evented=fe,n.FeatureGroup=sa,n.GeoJSON=Lr,n.GridLayer=Pa,n.Handler=tr,n.Icon=ri,n.ImageOverlay=Aa,n.LatLng=G,n.LatLngBounds=Z,n.Layer=Nr,n.LayerGroup=_a,n.LineUtil=gu,n.Map=Xt,n.Marker=ra,n.Mixin=Uc,n.Path=Sa,n.Point=W,n.PolyUtil=sp,n.Polygon=aa,n.Polyline=Ws,n.Popup=Vl,n.PosAnimation=Dl,n.Projection=lp,n.Rectangle=Pu,n.Renderer=$r,n.SVG=ai,n.SVGOverlay=Qc,n.TileLayer=Ea,n.Tooltip=Wi,n.Transformation=Ze,n.Util=B,n.VideoOverlay=Yc,n.bind=h,n.bounds=Y,n.canvas=nd,n.circle=$o,n.circleMarker=ju,n.control=Ca,n.divIcon=_u,n.extend=l,n.featureGroup=yu,n.geoJSON=wu,n.geoJson=Cr,n.gridLayer=qi,n.icon=bu,n.imageOverlay=Nu,n.latLng=xe,n.latLngBounds=K,n.layerGroup=Fo,n.map=Na,n.marker=up,n.point=F,n.polygon=hp,n.polyline=mp,n.popup=Hi,n.rectangle=pp,n.setOptions=S,n.stamp=f,n.svg=Wl,n.svgOverlay=Jc,n.tileLayer=ed,n.tooltip=Bo,n.transformation=Ye,n.version=i,n.videoOverlay=Cu;var ku=window.L;n.noConflict=function(){return window.L=ku,this},window.L=n}))})(Md,Md.exports)),Md.exports}var Nl=LO();const qg=$x(Nl);function iu(t,s,n){return Object.freeze({instance:t,context:s,container:n})}function Zg(t,s){return s==null?function(i,l){const c=p.useRef();return c.current||(c.current=t(i,l)),c}:function(i,l){const c=p.useRef();c.current||(c.current=t(i,l));const h=p.useRef(i),{instance:m}=c.current;return p.useEffect(function(){h.current!==i&&(s(m,i,h.current),h.current=i)},[m,i,l]),c}}function i2(t,s){p.useEffect(function(){return(s.layerContainer??s.map).addLayer(t.instance),function(){s.layerContainer?.removeLayer(t.instance),s.map.removeLayer(t.instance)}},[s,t])}function o2(t){return function(n){const i=Hg(),l=t(Wg(n,i),i);return DO(i.map,n.attribution),a2(l.current,n.eventHandlers),i2(l.current,i),l}}function FO(t,s){const n=p.useRef();p.useEffect(function(){if(s.pathOptions!==n.current){const l=s.pathOptions??{};t.instance.setStyle(l),n.current=l}},[t,s])}function $O(t){return function(n){const i=Hg(),l=t(Wg(n,i),i);return a2(l.current,n.eventHandlers),i2(l.current,i),FO(l.current,n),l}}function zO(t,s){const n=Zg(t,s),i=o2(n);return r2(i)}function Gg(t,s){const n=Zg(t,s),i=$O(n);return r2(i)}function BO(t,s){const n=Zg(t,s),i=o2(n);return MO(i)}function UO(t,s,n){const{opacity:i,zIndex:l}=s;i!=null&&i!==n.opacity&&t.setOpacity(i),l!=null&&l!==n.zIndex&&t.setZIndex(l)}function VO(){return Hg().map}function l2(t){const s=VO();return p.useEffect(function(){return s.on(t),function(){s.off(t)}},[s,t]),s}function Ix(){return Ix=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ix.apply(this,arguments)}function HO({bounds:t,boundsOptions:s,center:n,children:i,className:l,id:c,placeholder:h,style:m,whenReady:f,zoom:b,...v},g){const[w]=p.useState({className:l,id:c,style:m}),[N,j]=p.useState(null);p.useImperativeHandle(g,()=>N?.map??null,[N]);const S=p.useCallback(D=>{if(D!==null&&N===null){const E=new Nl.Map(D,v);n!=null&&b!=null?E.setView(n,b):t!=null&&E.fitBounds(t,s),f!=null&&E.whenReady(f),j(RO(E))}},[]);p.useEffect(()=>()=>{N?.map.remove()},[N]);const A=N?Re.createElement(s2,{value:N},i):h??null;return Re.createElement("div",Ix({},w,{ref:S}),A)}const WO=p.forwardRef(HO),ub=zO(function({position:s,...n},i){const l=new Nl.Marker(s,n);return iu(l,Kh(i,{overlayContainer:l}))},function(s,n,i){n.position!==i.position&&s.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&s.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&s.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&s.setOpacity(n.opacity),s.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?s.dragging.enable():s.dragging.disable())}),mb=Gg(function({positions:s,...n},i){const l=new Nl.Polygon(s,n);return iu(l,Kh(i,{overlayContainer:l}))},function(s,n,i){n.positions!==i.positions&&s.setLatLngs(n.positions)}),qO=Gg(function({positions:s,...n},i){const l=new Nl.Polyline(s,n);return iu(l,Kh(i,{overlayContainer:l}))},function(s,n,i){n.positions!==i.positions&&s.setLatLngs(n.positions)}),ZO=Gg(function({bounds:s,...n},i){const l=new Nl.Rectangle(s,n);return iu(l,Kh(i,{overlayContainer:l}))},function(s,n,i){n.bounds!==i.bounds&&s.setBounds(n.bounds)}),GO=BO(function({url:s,...n},i){const l=new Nl.TileLayer(s,Wg(n,i));return iu(l,i)},function(s,n,i){UO(s,n,i);const{url:l}=n;l!=null&&l!==i.url&&s.setUrl(l)});function Rx(t,s,n,i,l,c){if(l-i<=n)return;const h=i+l>>1;c2(t,s,h,i,l,c%2),Rx(t,s,n,i,h-1,c+1),Rx(t,s,n,h+1,l,c+1)}function c2(t,s,n,i,l,c){for(;l>i;){if(l-i>600){const b=l-i+1,v=n-i+1,g=Math.log(b),w=.5*Math.exp(2*g/3),N=.5*Math.sqrt(g*w*(b-w)/b)*(v-b/2<0?-1:1),j=Math.max(i,Math.floor(n-v*w/b+N)),S=Math.min(l,Math.floor(n+(b-v)*w/b+N));c2(t,s,n,j,S,c)}const h=s[2*n+c];let m=i,f=l;for(Pd(t,s,i,n),s[2*l+c]>h&&Pd(t,s,i,l);m<f;){for(Pd(t,s,m,f),m++,f--;s[2*m+c]<h;)m++;for(;s[2*f+c]>h;)f--}s[2*i+c]===h?Pd(t,s,i,f):(f++,Pd(t,s,f,l)),f<=n&&(i=f+1),n<=f&&(l=f-1)}}function Pd(t,s,n,i){Zf(t,n,i),Zf(s,2*n,2*i),Zf(s,2*n+1,2*i+1)}function Zf(t,s,n){const i=t[s];t[s]=t[n],t[n]=i}function KO(t,s,n,i,l,c,h){const m=[0,t.length-1,0],f=[];let b,v;for(;m.length;){const g=m.pop(),w=m.pop(),N=m.pop();if(w-N<=h){for(let A=N;A<=w;A++)b=s[2*A],v=s[2*A+1],b>=n&&b<=l&&v>=i&&v<=c&&f.push(t[A]);continue}const j=Math.floor((N+w)/2);b=s[2*j],v=s[2*j+1],b>=n&&b<=l&&v>=i&&v<=c&&f.push(t[j]);const S=(g+1)%2;(g===0?n<=b:i<=v)&&(m.push(N),m.push(j-1),m.push(S)),(g===0?l>=b:c>=v)&&(m.push(j+1),m.push(w),m.push(S))}return f}function XO(t,s,n,i,l,c){const h=[0,t.length-1,0],m=[],f=l*l;for(;h.length;){const b=h.pop(),v=h.pop(),g=h.pop();if(v-g<=c){for(let A=g;A<=v;A++)hb(s[2*A],s[2*A+1],n,i)<=f&&m.push(t[A]);continue}const w=Math.floor((g+v)/2),N=s[2*w],j=s[2*w+1];hb(N,j,n,i)<=f&&m.push(t[w]);const S=(b+1)%2;(b===0?n-l<=N:i-l<=j)&&(h.push(g),h.push(w-1),h.push(S)),(b===0?n+l>=N:i+l>=j)&&(h.push(w+1),h.push(v),h.push(S))}return m}function hb(t,s,n,i){const l=t-n,c=s-i;return l*l+c*c}const YO=t=>t[0],QO=t=>t[1];class pb{constructor(s,n=YO,i=QO,l=64,c=Float64Array){this.nodeSize=l,this.points=s;const h=s.length<65536?Uint16Array:Uint32Array,m=this.ids=new h(s.length),f=this.coords=new c(s.length*2);for(let b=0;b<s.length;b++)m[b]=b,f[2*b]=n(s[b]),f[2*b+1]=i(s[b]);Rx(m,f,l,0,m.length-1,0)}range(s,n,i,l){return KO(this.ids,this.coords,s,n,i,l,this.nodeSize)}within(s,n,i){return XO(this.ids,this.coords,s,n,i,this.nodeSize)}}const JO={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},dh=Math.fround||(t=>(s=>(t[0]=+s,t[0])))(new Float32Array(1));class eL{constructor(s){this.options=$d(Object.create(JO),s),this.trees=new Array(this.options.maxZoom+1)}load(s){const{log:n,minZoom:i,maxZoom:l,nodeSize:c}=this.options;n&&console.time("total time");const h=`prepare ${s.length} points`;n&&console.time(h),this.points=s;let m=[];for(let f=0;f<s.length;f++)s[f].geometry&&m.push(nL(s[f],f));this.trees[l+1]=new pb(m,xb,gb,c,Float32Array),n&&console.timeEnd(h);for(let f=l;f>=i;f--){const b=+Date.now();m=this._cluster(m,f),this.trees[f]=new pb(m,xb,gb,c,Float32Array),n&&console.log("z%d: %d clusters in %dms",f,m.length,+Date.now()-b)}return n&&console.timeEnd("total time"),this}getClusters(s,n){let i=((s[0]+180)%360+360)%360-180;const l=Math.max(-90,Math.min(90,s[1]));let c=s[2]===180?180:((s[2]+180)%360+360)%360-180;const h=Math.max(-90,Math.min(90,s[3]));if(s[2]-s[0]>=360)i=-180,c=180;else if(i>c){const v=this.getClusters([i,l,180,h],n),g=this.getClusters([-180,l,c,h],n);return v.concat(g)}const m=this.trees[this._limitZoom(n)],f=m.range(Gm(i),Km(h),Gm(c),Km(l)),b=[];for(const v of f){const g=m.points[v];b.push(g.numPoints?fb(g):this.points[g.index])}return b}getChildren(s){const n=this._getOriginId(s),i=this._getOriginZoom(s),l="No cluster with the specified id.",c=this.trees[i];if(!c)throw new Error(l);const h=c.points[n];if(!h)throw new Error(l);const m=this.options.radius/(this.options.extent*Math.pow(2,i-1)),f=c.within(h.x,h.y,m),b=[];for(const v of f){const g=c.points[v];g.parentId===s&&b.push(g.numPoints?fb(g):this.points[g.index])}if(b.length===0)throw new Error(l);return b}getLeaves(s,n,i){n=n||10,i=i||0;const l=[];return this._appendLeaves(l,s,n,i,0),l}getTile(s,n,i){const l=this.trees[this._limitZoom(s)],c=Math.pow(2,s),{extent:h,radius:m}=this.options,f=m/h,b=(i-f)/c,v=(i+1+f)/c,g={features:[]};return this._addTileFeatures(l.range((n-f)/c,b,(n+1+f)/c,v),l.points,n,i,c,g),n===0&&this._addTileFeatures(l.range(1-f/c,b,1,v),l.points,c,i,c,g),n===c-1&&this._addTileFeatures(l.range(0,b,f/c,v),l.points,-1,i,c,g),g.features.length?g:null}getClusterExpansionZoom(s){let n=this._getOriginZoom(s)-1;for(;n<=this.options.maxZoom;){const i=this.getChildren(s);if(n++,i.length!==1)break;s=i[0].properties.cluster_id}return n}_appendLeaves(s,n,i,l,c){const h=this.getChildren(n);for(const m of h){const f=m.properties;if(f&&f.cluster?c+f.point_count<=l?c+=f.point_count:c=this._appendLeaves(s,f.cluster_id,i,l,c):c<l?c++:s.push(m),s.length===i)break}return c}_addTileFeatures(s,n,i,l,c,h){for(const m of s){const f=n[m],b=f.numPoints;let v,g,w;if(b)v=d2(f),g=f.x,w=f.y;else{const S=this.points[f.index];v=S.properties,g=Gm(S.geometry.coordinates[0]),w=Km(S.geometry.coordinates[1])}const N={type:1,geometry:[[Math.round(this.options.extent*(g*c-i)),Math.round(this.options.extent*(w*c-l))]],tags:v};let j;b?j=f.id:this.options.generateId?j=f.index:this.points[f.index].id&&(j=this.points[f.index].id),j!==void 0&&(N.id=j),h.features.push(N)}}_limitZoom(s){return Math.max(this.options.minZoom,Math.min(Math.floor(+s),this.options.maxZoom+1))}_cluster(s,n){const i=[],{radius:l,extent:c,reduce:h,minPoints:m}=this.options,f=l/(c*Math.pow(2,n));for(let b=0;b<s.length;b++){const v=s[b];if(v.zoom<=n)continue;v.zoom=n;const g=this.trees[n+1],w=g.within(v.x,v.y,f),N=v.numPoints||1;let j=N;for(const S of w){const A=g.points[S];A.zoom>n&&(j+=A.numPoints||1)}if(j>N&&j>=m){let S=v.x*N,A=v.y*N,D=h&&N>1?this._map(v,!0):null;const E=(b<<5)+(n+1)+this.points.length;for(const T of w){const k=g.points[T];if(k.zoom<=n)continue;k.zoom=n;const R=k.numPoints||1;S+=k.x*R,A+=k.y*R,k.parentId=E,h&&(D||(D=this._map(v,!0)),h(D,this._map(k)))}v.parentId=E,i.push(tL(S/j,A/j,E,j,D))}else if(i.push(v),j>1)for(const S of w){const A=g.points[S];A.zoom<=n||(A.zoom=n,i.push(A))}}return i}_getOriginId(s){return s-this.points.length>>5}_getOriginZoom(s){return(s-this.points.length)%32}_map(s,n){if(s.numPoints)return n?$d({},s.properties):s.properties;const i=this.points[s.index].properties,l=this.options.map(i);return n&&l===i?$d({},l):l}}function tL(t,s,n,i,l){return{x:dh(t),y:dh(s),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:l}}function nL(t,s){const[n,i]=t.geometry.coordinates;return{x:dh(Gm(n)),y:dh(Km(i)),zoom:1/0,index:s,parentId:-1}}function fb(t){return{type:"Feature",id:t.id,properties:d2(t),geometry:{type:"Point",coordinates:[sL(t.x),rL(t.y)]}}}function d2(t){const s=t.numPoints,n=s>=1e4?`${Math.round(s/1e3)}k`:s>=1e3?`${Math.round(s/100)/10}k`:s;return $d($d({},t.properties),{cluster:!0,cluster_id:t.id,point_count:s,point_count_abbreviated:n})}function Gm(t){return t/360+.5}function Km(t){const s=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+s)/(1-s))/Math.PI;return n<0?0:n>1?1:n}function sL(t){return(t-.5)*360}function rL(t){const s=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(s))/Math.PI-90}function $d(t,s){for(const n in s)t[n]=s[n];return t}function xb(t){return t.x}function gb(t){return t.y}function Kg({...t}){return e.jsx(wg,{"data-slot":"sheet",...t})}function aL({...t}){return e.jsx(Ng,{"data-slot":"sheet-portal",...t})}const u2=p.forwardRef(({className:t,...s},n)=>e.jsx(nu,{ref:n,"data-slot":"sheet-overlay",className:pt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));u2.displayName=nu.displayName;function Xg({className:t,children:s,side:n="right",hideOverlay:i=!1,overlayClassName:l,...c}){return e.jsxs(aL,{children:[i?null:e.jsx(u2,{className:l}),e.jsxs(Cg,{"data-slot":"sheet-content",className:pt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...c,children:[s,e.jsxs(Bh,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(pr,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Yg({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:pt("flex flex-col gap-1.5 p-4",t),...s})}function iL({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-footer",className:pt("mt-auto flex flex-col gap-2 p-4",t),...s})}function Qg({className:t,...s}){return e.jsx(_g,{"data-slot":"sheet-title",className:pt("text-foreground font-semibold",t),...s})}function m2({className:t,...s}){return e.jsx(Sg,{"data-slot":"sheet-description",className:pt("text-muted-foreground text-sm",t),...s})}function oL(t,s){return p.useReducer((n,i)=>s[n][i]??n,t)}var Jg="ScrollArea",[h2]=vr(Jg),[lL,Jr]=h2(Jg),p2=p.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:i="hover",dir:l,scrollHideDelay:c=600,...h}=t,[m,f]=p.useState(null),[b,v]=p.useState(null),[g,w]=p.useState(null),[N,j]=p.useState(null),[S,A]=p.useState(null),[D,E]=p.useState(0),[T,k]=p.useState(0),[R,O]=p.useState(!1),[H,te]=p.useState(!1),X=Wt(s,U=>f(U)),q=Tc(l);return e.jsx(lL,{scope:n,type:i,dir:q,scrollHideDelay:c,scrollArea:m,viewport:b,onViewportChange:v,content:g,onContentChange:w,scrollbarX:N,onScrollbarXChange:j,scrollbarXEnabled:R,onScrollbarXEnabledChange:O,scrollbarY:S,onScrollbarYChange:A,scrollbarYEnabled:H,onScrollbarYEnabledChange:te,onCornerWidthChange:E,onCornerHeightChange:k,children:e.jsx(gt.div,{dir:q,...h,ref:X,style:{position:"relative","--radix-scroll-area-corner-width":D+"px","--radix-scroll-area-corner-height":T+"px",...t.style}})})});p2.displayName=Jg;var f2="ScrollAreaViewport",x2=p.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:i,nonce:l,...c}=t,h=Jr(f2,n),m=p.useRef(null),f=Wt(s,m,h.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(gt.div,{"data-radix-scroll-area-viewport":"",...c,ref:f,style:{overflowX:h.scrollbarXEnabled?"scroll":"hidden",overflowY:h.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:h.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});x2.displayName=f2;var Ya="ScrollAreaScrollbar",g2=p.forwardRef((t,s)=>{const{forceMount:n,...i}=t,l=Jr(Ya,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:h}=l,m=t.orientation==="horizontal";return p.useEffect(()=>(m?c(!0):h(!0),()=>{m?c(!1):h(!1)}),[m,c,h]),l.type==="hover"?e.jsx(cL,{...i,ref:s,forceMount:n}):l.type==="scroll"?e.jsx(dL,{...i,ref:s,forceMount:n}):l.type==="auto"?e.jsx(v2,{...i,ref:s,forceMount:n}):l.type==="always"?e.jsx(e0,{...i,ref:s}):null});g2.displayName=Ya;var cL=p.forwardRef((t,s)=>{const{forceMount:n,...i}=t,l=Jr(Ya,t.__scopeScrollArea),[c,h]=p.useState(!1);return p.useEffect(()=>{const m=l.scrollArea;let f=0;if(m){const b=()=>{window.clearTimeout(f),h(!0)},v=()=>{f=window.setTimeout(()=>h(!1),l.scrollHideDelay)};return m.addEventListener("pointerenter",b),m.addEventListener("pointerleave",v),()=>{window.clearTimeout(f),m.removeEventListener("pointerenter",b),m.removeEventListener("pointerleave",v)}}},[l.scrollArea,l.scrollHideDelay]),e.jsx(Js,{present:n||c,children:e.jsx(v2,{"data-state":c?"visible":"hidden",...i,ref:s})})}),dL=p.forwardRef((t,s)=>{const{forceMount:n,...i}=t,l=Jr(Ya,t.__scopeScrollArea),c=t.orientation==="horizontal",h=Yh(()=>f("SCROLL_END"),100),[m,f]=oL("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(m==="idle"){const b=window.setTimeout(()=>f("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(b)}},[m,l.scrollHideDelay,f]),p.useEffect(()=>{const b=l.viewport,v=c?"scrollLeft":"scrollTop";if(b){let g=b[v];const w=()=>{const N=b[v];g!==N&&(f("SCROLL"),h()),g=N};return b.addEventListener("scroll",w),()=>b.removeEventListener("scroll",w)}},[l.viewport,c,f,h]),e.jsx(Js,{present:n||m!=="hidden",children:e.jsx(e0,{"data-state":m==="hidden"?"hidden":"visible",...i,ref:s,onPointerEnter:tt(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:tt(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),v2=p.forwardRef((t,s)=>{const n=Jr(Ya,t.__scopeScrollArea),{forceMount:i,...l}=t,[c,h]=p.useState(!1),m=t.orientation==="horizontal",f=Yh(()=>{if(n.viewport){const b=n.viewport.offsetWidth<n.viewport.scrollWidth,v=n.viewport.offsetHeight<n.viewport.scrollHeight;h(m?b:v)}},10);return _c(n.viewport,f),_c(n.content,f),e.jsx(Js,{present:i||c,children:e.jsx(e0,{"data-state":c?"visible":"hidden",...l,ref:s})})}),e0=p.forwardRef((t,s)=>{const{orientation:n="vertical",...i}=t,l=Jr(Ya,t.__scopeScrollArea),c=p.useRef(null),h=p.useRef(0),[m,f]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),b=N2(m.viewport,m.content),v={...i,sizes:m,onSizesChange:f,hasThumb:b>0&&b<1,onThumbChange:w=>c.current=w,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:w=>h.current=w};function g(w,N){return xL(w,h.current,m,N)}return n==="horizontal"?e.jsx(uL,{...v,ref:s,onThumbPositionChange:()=>{if(l.viewport&&c.current){const w=l.viewport.scrollLeft,N=vb(w,m,l.dir);c.current.style.transform=`translate3d(${N}px, 0, 0)`}},onWheelScroll:w=>{l.viewport&&(l.viewport.scrollLeft=w)},onDragScroll:w=>{l.viewport&&(l.viewport.scrollLeft=g(w,l.dir))}}):n==="vertical"?e.jsx(mL,{...v,ref:s,onThumbPositionChange:()=>{if(l.viewport&&c.current){const w=l.viewport.scrollTop,N=vb(w,m);c.current.style.transform=`translate3d(0, ${N}px, 0)`}},onWheelScroll:w=>{l.viewport&&(l.viewport.scrollTop=w)},onDragScroll:w=>{l.viewport&&(l.viewport.scrollTop=g(w))}}):null}),uL=p.forwardRef((t,s)=>{const{sizes:n,onSizesChange:i,...l}=t,c=Jr(Ya,t.__scopeScrollArea),[h,m]=p.useState(),f=p.useRef(null),b=Wt(s,f,c.onScrollbarXChange);return p.useEffect(()=>{f.current&&m(getComputedStyle(f.current))},[f]),e.jsx(b2,{"data-orientation":"horizontal",...l,ref:b,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xh(n)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.x),onDragScroll:v=>t.onDragScroll(v.x),onWheelScroll:(v,g)=>{if(c.viewport){const w=c.viewport.scrollLeft+v.deltaX;t.onWheelScroll(w),_2(w,g)&&v.preventDefault()}},onResize:()=>{f.current&&c.viewport&&h&&i({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:mh(h.paddingLeft),paddingEnd:mh(h.paddingRight)}})}})}),mL=p.forwardRef((t,s)=>{const{sizes:n,onSizesChange:i,...l}=t,c=Jr(Ya,t.__scopeScrollArea),[h,m]=p.useState(),f=p.useRef(null),b=Wt(s,f,c.onScrollbarYChange);return p.useEffect(()=>{f.current&&m(getComputedStyle(f.current))},[f]),e.jsx(b2,{"data-orientation":"vertical",...l,ref:b,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xh(n)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.y),onDragScroll:v=>t.onDragScroll(v.y),onWheelScroll:(v,g)=>{if(c.viewport){const w=c.viewport.scrollTop+v.deltaY;t.onWheelScroll(w),_2(w,g)&&v.preventDefault()}},onResize:()=>{f.current&&c.viewport&&h&&i({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:mh(h.paddingTop),paddingEnd:mh(h.paddingBottom)}})}})}),[hL,y2]=h2(Ya),b2=p.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:i,hasThumb:l,onThumbChange:c,onThumbPointerUp:h,onThumbPointerDown:m,onThumbPositionChange:f,onDragScroll:b,onWheelScroll:v,onResize:g,...w}=t,N=Jr(Ya,n),[j,S]=p.useState(null),A=Wt(s,X=>S(X)),D=p.useRef(null),E=p.useRef(""),T=N.viewport,k=i.content-i.viewport,R=Is(v),O=Is(f),H=Yh(g,10);function te(X){if(D.current){const q=X.clientX-D.current.left,U=X.clientY-D.current.top;b({x:q,y:U})}}return p.useEffect(()=>{const X=q=>{const U=q.target;j?.contains(U)&&R(q,k)};return document.addEventListener("wheel",X,{passive:!1}),()=>document.removeEventListener("wheel",X,{passive:!1})},[T,j,k,R]),p.useEffect(O,[i,O]),_c(j,H),_c(N.content,H),e.jsx(hL,{scope:n,scrollbar:j,hasThumb:l,onThumbChange:Is(c),onThumbPointerUp:Is(h),onThumbPositionChange:O,onThumbPointerDown:Is(m),children:e.jsx(gt.div,{...w,ref:A,style:{position:"absolute",...w.style},onPointerDown:tt(t.onPointerDown,X=>{X.button===0&&(X.target.setPointerCapture(X.pointerId),D.current=j.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",N.viewport&&(N.viewport.style.scrollBehavior="auto"),te(X))}),onPointerMove:tt(t.onPointerMove,te),onPointerUp:tt(t.onPointerUp,X=>{const q=X.target;q.hasPointerCapture(X.pointerId)&&q.releasePointerCapture(X.pointerId),document.body.style.webkitUserSelect=E.current,N.viewport&&(N.viewport.style.scrollBehavior=""),D.current=null})})})}),uh="ScrollAreaThumb",j2=p.forwardRef((t,s)=>{const{forceMount:n,...i}=t,l=y2(uh,t.__scopeScrollArea);return e.jsx(Js,{present:n||l.hasThumb,children:e.jsx(pL,{ref:s,...i})})}),pL=p.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:i,...l}=t,c=Jr(uh,n),h=y2(uh,n),{onThumbPositionChange:m}=h,f=Wt(s,g=>h.onThumbChange(g)),b=p.useRef(void 0),v=Yh(()=>{b.current&&(b.current(),b.current=void 0)},100);return p.useEffect(()=>{const g=c.viewport;if(g){const w=()=>{if(v(),!b.current){const N=gL(g,m);b.current=N,m()}};return m(),g.addEventListener("scroll",w),()=>g.removeEventListener("scroll",w)}},[c.viewport,v,m]),e.jsx(gt.div,{"data-state":h.hasThumb?"visible":"hidden",...l,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:tt(t.onPointerDownCapture,g=>{const N=g.target.getBoundingClientRect(),j=g.clientX-N.left,S=g.clientY-N.top;h.onThumbPointerDown({x:j,y:S})}),onPointerUp:tt(t.onPointerUp,h.onThumbPointerUp)})});j2.displayName=uh;var t0="ScrollAreaCorner",w2=p.forwardRef((t,s)=>{const n=Jr(t0,t.__scopeScrollArea),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?e.jsx(fL,{...t,ref:s}):null});w2.displayName=t0;var fL=p.forwardRef((t,s)=>{const{__scopeScrollArea:n,...i}=t,l=Jr(t0,n),[c,h]=p.useState(0),[m,f]=p.useState(0),b=!!(c&&m);return _c(l.scrollbarX,()=>{const v=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(v),f(v)}),_c(l.scrollbarY,()=>{const v=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(v),h(v)}),b?e.jsx(gt.div,{...i,ref:s,style:{width:c,height:m,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function mh(t){return t?parseInt(t,10):0}function N2(t,s){const n=t/s;return isNaN(n)?0:n}function Xh(t){const s=N2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-n)*s;return Math.max(i,18)}function xL(t,s,n,i="ltr"){const l=Xh(n),c=l/2,h=s||c,m=l-h,f=n.scrollbar.paddingStart+h,b=n.scrollbar.size-n.scrollbar.paddingEnd-m,v=n.content-n.viewport,g=i==="ltr"?[0,v]:[v*-1,0];return C2([f,b],g)(t)}function vb(t,s,n="ltr"){const i=Xh(s),l=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,c=s.scrollbar.size-l,h=s.content-s.viewport,m=c-i,f=n==="ltr"?[0,h]:[h*-1,0],b=yx(t,f);return C2([0,h],[0,m])(b)}function C2(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const i=(s[1]-s[0])/(t[1]-t[0]);return s[0]+i*(n-t[0])}}function _2(t,s){return t>0&&t<s}var gL=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},i=0;return(function l(){const c={left:t.scrollLeft,top:t.scrollTop},h=n.left!==c.left,m=n.top!==c.top;(h||m)&&s(),n=c,i=window.requestAnimationFrame(l)})(),()=>window.cancelAnimationFrame(i)};function Yh(t,s){const n=Is(t),i=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(i.current),[]),p.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(n,s)},[n,s])}function _c(t,s){const n=Is(s);As(()=>{let i=0;if(t){const l=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return l.observe(t),()=>{window.cancelAnimationFrame(i),l.unobserve(t)}}},[t,n])}var vL=p2,yL=x2,bL=w2;function bc({className:t,children:s,...n}){return e.jsxs(vL,{"data-slot":"scroll-area",className:pt("relative overflow-hidden",t),...n,children:[e.jsx(yL,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(jL,{}),e.jsx(bL,{})]})}function jL({className:t,orientation:s="vertical",...n}){return e.jsx(g2,{"data-slot":"scroll-area-scrollbar",orientation:s,className:pt("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(j2,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var S2="Toggle",A2=p.forwardRef((t,s)=>{const{pressed:n,defaultPressed:i,onPressedChange:l,...c}=t,[h,m]=Qr({prop:n,onChange:l,defaultProp:i??!1,caller:S2});return e.jsx(gt.button,{type:"button","aria-pressed":h,"data-state":h?"on":"off","data-disabled":t.disabled?"":void 0,...c,ref:s,onClick:tt(t.onClick,()=>{t.disabled||m(!h)})})});A2.displayName=S2;var Eo="ToggleGroup",[P2]=vr(Eo,[Mc]),E2=Mc(),n0=Re.forwardRef((t,s)=>{const{type:n,...i}=t;if(n==="single"){const l=i;return e.jsx(wL,{...l,ref:s})}if(n==="multiple"){const l=i;return e.jsx(NL,{...l,ref:s})}throw new Error(`Missing prop \`type\` expected on \`${Eo}\``)});n0.displayName=Eo;var[k2,T2]=P2(Eo),wL=Re.forwardRef((t,s)=>{const{value:n,defaultValue:i,onValueChange:l=()=>{},...c}=t,[h,m]=Qr({prop:n,defaultProp:i??"",onChange:l,caller:Eo});return e.jsx(k2,{scope:t.__scopeToggleGroup,type:"single",value:Re.useMemo(()=>h?[h]:[],[h]),onItemActivate:m,onItemDeactivate:Re.useCallback(()=>m(""),[m]),children:e.jsx(D2,{...c,ref:s})})}),NL=Re.forwardRef((t,s)=>{const{value:n,defaultValue:i,onValueChange:l=()=>{},...c}=t,[h,m]=Qr({prop:n,defaultProp:i??[],onChange:l,caller:Eo}),f=Re.useCallback(v=>m((g=[])=>[...g,v]),[m]),b=Re.useCallback(v=>m((g=[])=>g.filter(w=>w!==v)),[m]);return e.jsx(k2,{scope:t.__scopeToggleGroup,type:"multiple",value:h,onItemActivate:f,onItemDeactivate:b,children:e.jsx(D2,{...c,ref:s})})});n0.displayName=Eo;var[CL,_L]=P2(Eo),D2=Re.forwardRef((t,s)=>{const{__scopeToggleGroup:n,disabled:i=!1,rovingFocus:l=!0,orientation:c,dir:h,loop:m=!0,...f}=t,b=E2(n),v=Tc(h),g={role:"group",dir:v,...f};return e.jsx(CL,{scope:n,rovingFocus:l,disabled:i,children:l?e.jsx(Tg,{asChild:!0,...b,orientation:c,dir:v,loop:m,children:e.jsx(gt.div,{...g,ref:s})}):e.jsx(gt.div,{...g,ref:s})})}),hh="ToggleGroupItem",I2=Re.forwardRef((t,s)=>{const n=T2(hh,t.__scopeToggleGroup),i=_L(hh,t.__scopeToggleGroup),l=E2(t.__scopeToggleGroup),c=n.value.includes(t.value),h=i.disabled||t.disabled,m={...t,pressed:c,disabled:h},f=Re.useRef(null);return i.rovingFocus?e.jsx(Dg,{asChild:!0,...l,focusable:!h,active:c,ref:f,children:e.jsx(yb,{...m,ref:s})}):e.jsx(yb,{...m,ref:s})});I2.displayName=hh;var yb=Re.forwardRef((t,s)=>{const{__scopeToggleGroup:n,value:i,...l}=t,c=T2(hh,n),h={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},m=c.type==="single"?h:void 0;return e.jsx(A2,{...m,...l,ref:s,onPressedChange:f=>{f?c.onItemActivate(i):c.onItemDeactivate(i)}})}),SL=n0,AL=I2;const PL=sg("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),R2=p.createContext({size:"default",variant:"default"});function EL({className:t,variant:s,size:n,children:i,...l}){return e.jsx(SL,{"data-slot":"toggle-group","data-variant":s,"data-size":n,className:pt("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",t),...l,children:e.jsx(R2.Provider,{value:{variant:s,size:n},children:i})})}function km({className:t,children:s,variant:n,size:i,...l}){const c=p.useContext(R2);return e.jsx(AL,{"data-slot":"toggle-group-item","data-variant":c.variant||n,"data-size":c.size||i,className:pt(PL({variant:c.variant||n,size:c.size||i}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...l,children:s})}const Xm=new Map,Gf=new Map,bb=2e4,Mx=new Map,Kf=new Map,kL=3e4;function Yr(t){const s=String(t??"").trim();return s.length?s:void 0}function M2(t){if(!t)return;const n=(Array.isArray(t)?t:[t]).filter(Boolean);if(n.length)return[...n].sort()}function Qh(t){if(!(!t||!t.length))return[...t].sort()}function TL(t){const s=M2(t.availability)?.join(",")??"",n=Qh(t.layers)?.join(",")??"";return[t.bbox??"",String(t.zoom??""),t.at??"",t.type??"",Yr(t.city)??"",Yr(t.state)??"",Yr(t.district)??"",typeof t.showInMediaKit=="boolean"?String(t.showInMediaKit):"",s,n].join("|")}async function DL(t,s){return t.bbox?(await ke.get("/media-points/map",{params:{bbox:t.bbox,zoom:t.zoom,at:t.at,type:t.type,city:Yr(t.city),state:Yr(t.state),district:Yr(t.district),showInMediaKit:t.showInMediaKit,availability:M2(t.availability),layers:Qh(t.layers)?.join(",")??void 0},signal:s})).data??[]:[]}function IL(){Xm.clear(),Mx.clear()}function RL(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(!1),[c,h]=p.useState(null),m=p.useRef(null),f=p.useMemo(()=>TL(t),[t.bbox,t.zoom,t.at,t.type,t.city,t.state,t.district,t.showInMediaKit,t.availability,(t.layers??[]).join("|")]),b=async(v=!1)=>{try{if(!t.bbox)return m.current?.abort(),n([]),l(!1),h(null),[];const g=Date.now(),w=Xm.get(f);if(!v&&w&&g-w.ts<bb)return n(w.data),l(!1),h(null),w.data;const N=Gf.get(f);if(N){l(!0);const D=await N;return n(D),l(!1),h(null),D}m.current?.abort();const j=new AbortController;m.current=j,l(!0),h(null);const S=DL(t,j.signal).then(D=>(Xm.set(f,{ts:Date.now(),data:D}),D)).finally(()=>{Gf.delete(f)});Gf.set(f,S);const A=await S;return n(A),A}catch(g){const w=String(g?.message??"");return w.includes("canceled")||w.includes("abort")?s:(h(g),[])}finally{l(!1)}};return p.useEffect(()=>{let v=!0;const g=Xm.get(f);g&&Date.now()-g.ts<bb&&(n(g.data),h(null),l(!1));const w=window.setTimeout(()=>{v&&b(!1)},250);return()=>{v=!1,window.clearTimeout(w),m.current?.abort()}},[f]),{points:s,loading:i,error:c,refetch:(v=!0)=>b(v)}}async function ML(t,s){return(await ke.get(`/media-points/${t}/details`,{params:{at:s}})).data}function OL(t){const s=String(t.q||"").trim().toLowerCase(),n=Qh(t.layers)?.join(",")??"";return[s,String(t.limit??""),t.type??"",Yr(t.city)??"",Yr(t.state)??"",Yr(t.district)??"",typeof t.showInMediaKit=="boolean"?String(t.showInMediaKit):"",t.bbox??"",n].join("|")}async function LL(t,s){const n=String(t.q||"").trim();if(n.length<2)return[];const i=OL(t),l=Date.now(),c=Mx.get(i);if(c&&l-c.ts<kL)return c.data;const h=Kf.get(i);if(h)return h;const m=Promise.resolve(ke.get("/media-points/suggestions",{params:{q:n,limit:t.limit,type:t.type,city:Yr(t.city),state:Yr(t.state),district:Yr(t.district),showInMediaKit:t.showInMediaKit,bbox:t.bbox,layers:Qh(t.layers)?.join(",")??void 0},signal:s})).then(f=>{const b=f.data??[];return Mx.set(i,{ts:Date.now(),data:b}),b}).finally(()=>{Kf.delete(i)});return Kf.set(i,m),m}async function FL(t,s){return s?(await ke.put(`/media-points/${t}/favorite`)).data:(await ke.delete(`/media-points/${t}/favorite`)).data}const $L="ONE_MEDIA_MEDIAMAP_PRESELECT_POINT_IDS";function zL(t,s){let n=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const c=s[i].lng,h=s[i].lat,m=s[l].lng,f=s[l].lat;h>t.lat!=f>t.lat&&t.lng<(m-c)*(t.lat-h)/(f-h+0)+c&&(n=!n)}return n}function BL(t,s){const n=Math.min(t.lat,s.lat),i=Math.max(t.lat,s.lat),l=Math.min(t.lng,s.lng),c=Math.max(t.lng,s.lng);return[{lat:n,lng:l},{lat:n,lng:c},{lat:i,lng:c},{lat:i,lng:l}]}function jb(t){return qg.latLngBounds(t.map(s=>[s.lat,s.lng]))}function Tm(t){return Number(t.toFixed(6))}function UL(t){const s=t.getBounds(),n=Tm(s.getWest()),i=Tm(s.getSouth()),l=Tm(s.getEast()),c=Tm(s.getNorth()),h=[n,i,l,c],m=`${n},${i},${l},${c}`,f=t.getZoom();return{bboxStr:m,bboxArr:h,zoom:f}}function VL(t){const s=t<10?34:t<100?38:44;return qg.divIcon({html:`
      <div style="
        width:${s}px;
        height:${s}px;
        border-radius:${s}px;
        background:rgba(79,70,229,0.92);
        color:white;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:12px;
        font-weight:600;
        border:2px solid rgba(255,255,255,0.9);
        box-shadow:0 6px 18px rgba(0,0,0,0.18);
      ">
        ${t}
      </div>
    `,className:"one-media-cluster-icon",iconSize:[s,s],iconAnchor:[s/2,s/2]})}function HL(t){return t.facesOccupiedCount>0&&t.facesOccupiedCount===t.facesTotal?"rgba(239,68,68,0.95)":t.facesOccupiedCount>0?"rgba(245,158,11,0.95)":t.facesNegotiationCount>0?"rgba(168,85,247,0.95)":"rgba(34,197,94,0.95)"}function WL(t){const s=HL(t),n=t.isFavorite?'<div style="position:absolute; top:-6px; right:-6px; width:18px; height:18px; border-radius:18px; background:rgba(17,24,39,0.9); border:2px solid rgba(255,255,255,0.9); display:flex; align-items:center; justify-content:center; font-size:11px;"></div>':"";return qg.divIcon({html:`
      <div style="position:relative;">
        <div style="
          width:22px;
          height:22px;
          border-radius:22px;
          background:${s};
          border:2px solid rgba(255,255,255,0.95);
          box-shadow:0 6px 18px rgba(0,0,0,0.18);
        "></div>
        ${n}
      </div>
    `,className:"one-media-point-icon",iconSize:[22,22],iconAnchor:[11,11]})}function Xf(t){return t.facesTotal>0&&t.facesOccupiedCount===t.facesTotal?"Totalmente ocupada":t.facesOccupiedCount>0?"Parcialmente ocupada":t.facesNegotiationCount>0?"Em negociao":"Livre"}async function wb(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const s=document.createElement("textarea");return s.value=t,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch{return!1}}}function qL({mapRef:t,onViewportChange:s}){const n=l2({moveend(){s(n)},zoomend(){s(n)}});return p.useEffect(()=>{t.current=n;const i=window.setTimeout(()=>{try{n.invalidateSize()}catch{}},0);return s(n),()=>window.clearTimeout(i)},[]),null}function ZL({drawMode:t,rectStart:s,onAddVertex:n,onRectStart:i,onRectEnd:l,onCompleteRectangle:c}){const h=l2({click(m){if(t==="polygon"&&n({lat:m.latlng.lat,lng:m.latlng.lng}),t==="rectangle"){const f={lat:m.latlng.lat,lng:m.latlng.lng};if(!s){i(f),l(f);return}c(s,f)}},mousemove(m){t==="rectangle"&&s&&l({lat:m.latlng.lat,lng:m.latlng.lng})}});return p.useEffect(()=>(t!=="none"?h.doubleClickZoom.disable():h.doubleClickZoom.enable(),()=>{h.doubleClickZoom.enable()}),[h,t]),null}function GL(){const t=Vs(),s=p.useRef(null),n=p.useRef(null),i=p.useRef(null),[l,c]=p.useState(void 0),[h,m]=p.useState(null),[f,b]=p.useState(12),[v,g]=p.useState(!1),[w,N]=p.useState("ALL"),[j,S]=p.useState(""),[A,D]=p.useState(""),[E,T]=p.useState(""),[k,R]=p.useState(""),[O,H]=p.useState(!1),[te,X]=p.useState([]),[q,U]=p.useState("none"),[M,B]=p.useState([]),[ee,me]=p.useState(null),[J,fe]=p.useState(null),[W,ae]=p.useState(null),[F,$]=p.useState([]),[Y,Z]=p.useState(""),[K,G]=p.useState([]),[xe,le]=p.useState(!1),[ue,Fe]=p.useState(!1),[$e,Ze]=p.useState(null),[Ye,Xe]=p.useState(!1),[Je,ot]=p.useState("details"),[jt,dt]=p.useState(null),[Tt,Ft]=p.useState([]),[Q,pe]=p.useState(null),[de,Oe]=p.useState(!1),[oe,be]=p.useState(null),Me=te.length?te:void 0,{points:Ge,loading:ut,error:Kt,refetch:tn}=RL({bbox:l,zoom:f,type:w==="ALL"?void 0:w,city:A,state:E,district:k,showInMediaKit:O?!0:void 0,availability:j||void 0,layers:Me}),ln=W?F:Ge,Ut=p.useMemo(()=>ln.filter(Ce=>Number.isFinite(Ce.latitude)&&Number.isFinite(Ce.longitude)).map(Ce=>({type:"Feature",properties:{cluster:!1,pointId:Ce.id,...Ce},geometry:{type:"Point",coordinates:[Ce.longitude,Ce.latitude]}})),[ln]),yn=p.useMemo(()=>{const Ce=new eL({radius:60,maxZoom:20});return Ce.load(Ut),Ce},[Ut]),Kn=p.useMemo(()=>h?yn.getClusters(h,Math.round(f)):[],[yn,h,f]);p.useEffect(()=>{if(!W||W.length<3){$([]);return}const Ce=W,Qe=(Ge??[]).filter(nt=>!Number.isFinite(nt.latitude)||!Number.isFinite(nt.longitude)?!1:zL({lat:nt.latitude,lng:nt.longitude},Ce));$(Qe)},[W,Ge]),p.useEffect(()=>{const Ce=Qe=>{if(!xe)return;const nt=n.current;nt&&Qe.target&&!nt.contains(Qe.target)&&le(!1)};return document.addEventListener("mousedown",Ce),()=>document.removeEventListener("mousedown",Ce)},[xe]),p.useEffect(()=>{const Ce=String(Y||"").trim();if(Ze(null),Ce.length<2){i.current?.abort(),Fe(!1),G([]);return}const Qe=window.setTimeout(async()=>{try{i.current?.abort();const nt=new AbortController;i.current=nt,Fe(!0);const ge=await LL({q:Ce,limit:10,bbox:l,type:w==="ALL"?void 0:w,city:A,state:E,district:k,showInMediaKit:O?!0:void 0,layers:Me},nt.signal);G(ge||[]),le(!0)}catch(nt){const ge=String(nt?.message??"");if(ge.includes("canceled")||ge.includes("abort"))return;Ze("Erro ao buscar sugestes")}finally{Fe(!1)}},250);return()=>window.clearTimeout(Qe)},[Y,l,w,A,E,k,O,Me]);const ps=Ce=>{const{bboxStr:Qe,bboxArr:nt,zoom:ge}=UL(Ce);c(Qe),m(nt),b(ge),g(!0)},Pn=Ce=>{U(Ce),B([]),me(null),fe(null),ae(null),$([]),Ie.message(Ce==="polygon"?"Modo desenho: polgono":"Modo desenho: retngulo")},rn=()=>{U("none"),B([]),me(null),fe(null)},hn=()=>{rn(),ae(null),$([])},fn=()=>{if(M.length<3){Ie.error("Adicione pelo menos 3 pontos para formar um polgono");return}const Ce=[...M];ae(Ce),U("none"),B([]);const Qe=jb(Ce).pad(.05);s.current?.fitBounds(Qe,{animate:!0}),ot("selected"),Xe(!0)},Rn=(Ce,Qe)=>{const nt=BL(Ce,Qe);ae(nt),U("none"),me(null),fe(null);const ge=jb(nt).pad(.05);s.current?.fitBounds(ge,{animate:!0}),ot("selected"),Xe(!0)},Vn=()=>{const Ce=(F??[]).map(Qe=>Qe.id).filter(Boolean);if(!Ce.length){Ie.error("Nenhum ponto selecionado");return}try{sessionStorage.setItem($L,JSON.stringify(Ce))}catch{}t("/app/proposals?new=1"),Xe(!1)};p.useEffect(()=>{if(q==="none")return;const Ce=Qe=>{Qe.key==="Escape"&&rn()};return window.addEventListener("keydown",Ce),()=>window.removeEventListener("keydown",Ce)},[q]);const Sn=async(Ce,Qe)=>{dt(Ce),ot("details"),Xe(!0),pe(null),be(null),Oe(!0);try{const nt=await ML(Ce);if(pe(nt),Qe?.center!==!1&&nt?.point?.latitude&&nt?.point?.longitude){const ge=Number(nt.point.latitude),Ee=Number(nt.point.longitude);Number.isFinite(ge)&&Number.isFinite(Ee)&&s.current?.setView([ge,Ee],Math.max(16,s.current?.getZoom?.()??16),{animate:!0})}}catch{be("Erro ao carregar detalhes do ponto")}finally{Oe(!1)}},ts=(Ce,Qe)=>{if(!h)return;const ge=yn.getLeaves(Ce,Qe).map(Ee=>Ee?.properties).filter(Boolean);Ft(ge),ot("cluster"),Xe(!0)},ft=Ce=>{Z(Ce.name),le(!1),s.current&&s.current.setView([Ce.latitude,Ce.longitude],Math.max(16,s.current.getZoom()||16),{animate:!0}),Sn(Ce.id,{center:!1})},sn=async()=>{if(!Q?.point?.id)return;const Ce=Q.point.id,Qe=!Q.point.isFavorite;pe(nt=>nt&&{...nt,point:{...nt.point,isFavorite:Qe}});try{await FL(Ce,Qe),IL(),tn(!0),Ie.success(Qe?"Adicionado aos favoritos":"Removido dos favoritos")}catch{pe(nt=>nt&&{...nt,point:{...nt.point,isFavorite:!Qe}}),Ie.error("No foi possvel atualizar favorito")}},$t=async()=>{if(!Q?.point?.id)return;const Ce=`${window.location.origin}/app/mediamap?pointId=${Q.point.id}`,Qe=await wb(Ce);Ie[Qe?"success":"error"](Qe?"Link copiado!":"No foi possvel copiar o link")},An=async()=>{if(!Q?.point)return;const Ce=Q.point.latitude,Qe=Q.point.longitude,nt=await wb(`${Ce},${Qe}`);Ie[nt?"success":"error"](nt?"Coordenadas copiadas!":"No foi possvel copiar")},bn=()=>{Q?.point?.id&&(t(`/app/inventory?pointId=${Q.point.id}`),Xe(!1))},xn=()=>{Q?.point?.id&&(t(`/app/proposals?new=1&mediaPointId=${Q.point.id}`),Xe(!1))};return p.useEffect(()=>{const Ce=new URLSearchParams(window.location.search),Qe=Ce.get("pointId");if(!Qe||!v||!s.current)return;Sn(Qe,{center:!0}),Ce.delete("pointId");const nt=Ce.toString(),ge=`${window.location.pathname}${nt?`?${nt}`:""}`;window.history.replaceState({},"",ge)},[v]),e.jsxs("div",{className:"relative h-full w-full",style:{minHeight:"calc(100vh - 64px)",isolation:"isolate"},children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 flex flex-col gap-3",style:{zIndex:30,maxWidth:720,pointerEvents:"auto"},children:e.jsxs("div",{className:"bg-white border rounded-xl shadow-sm p-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",ref:n,children:[e.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2",children:[e.jsx(Ka,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:Y,onChange:Ce=>Z(Ce.target.value),onFocus:()=>le(!0),placeholder:"Buscar ponto, endereo, cidade...",className:"flex-1 outline-none text-sm"}),Y?e.jsx("button",{type:"button",onClick:()=>{Z(""),G([]),le(!1)},className:"p-1 rounded hover:bg-gray-100","aria-label":"Limpar",children:e.jsx(pr,{className:"w-4 h-4 text-gray-600"})}):null]}),xe&&(ue||K.length>0||$e)&&e.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-auto",style:{maxHeight:280},children:[ue?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Buscando..."}):null,$e?e.jsx("div",{className:"px-3 py-2 text-sm text-red-600",children:$e}):null,!ue&&!$e&&K.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Nenhum resultado"}):null,K.map(Ce=>e.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-start gap-2",onClick:()=>ft(Ce),children:[e.jsx(Ci,{className:"w-4 h-4 text-indigo-600 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ce.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:[Ce.addressDistrict,Ce.addressCity,Ce.addressState].filter(Boolean).join("  ")})]}),Ce.isFavorite?e.jsx(Dd,{className:"w-4 h-4 text-amber-500 ml-auto mt-0.5"}):null]},Ce.id))]})})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(ne,{type:"button",variant:te.length===0?"default":"outline",size:"sm",className:pt("h-8",te.length===0?"mm-indigo":""),onClick:()=>X([]),children:"Todos"}),e.jsxs(EL,{type:"multiple",value:te,onValueChange:Ce=>X(Ce??[]),variant:"outline",size:"sm",className:"h-8",children:[e.jsx(km,{value:"mine","aria-label":"Meus",children:"Meus"}),e.jsx(km,{value:"favorites","aria-label":"Favoritos",children:"Favoritos"}),e.jsx(km,{value:"campaign","aria-label":"Em campanha",children:"Em campanha"}),e.jsx(km,{value:"proposal","aria-label":"Em proposta",children:"Em proposta"})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ne,{type:"button",variant:q==="polygon"?"default":"outline",size:"sm",className:pt("h-8",q==="polygon"?"mm-indigo":""),onClick:()=>Pn("polygon"),children:[e.jsx(Kx,{className:"w-4 h-4 mr-2"})," Polgono"]}),e.jsxs(ne,{type:"button",variant:q==="rectangle"?"default":"outline",size:"sm",className:pt("h-8",q==="rectangle"?"mm-indigo":""),onClick:()=>Pn("rectangle"),children:[e.jsx(yE,{className:"w-4 h-4 mr-2"})," Retngulo"]}),q==="polygon"?e.jsxs(ne,{type:"button",size:"sm",className:"h-8 gap-2 mm-indigo",disabled:M.length<3,onClick:fn,children:[e.jsx(Dr,{className:"w-4 h-4"})," Concluir"]}):null,q!=="none"?e.jsxs(ne,{type:"button",variant:"ghost",size:"sm",className:"h-8",onClick:rn,children:[e.jsx(pr,{className:"w-4 h-4 mr-2"})," Cancelar"]}):W?e.jsxs(ne,{type:"button",variant:"ghost",size:"sm",className:"h-8",onClick:hn,children:[e.jsx(xa,{className:"w-4 h-4 mr-2"})," Limpar seleo"]}):null,W?e.jsxs(ht,{className:"bg-indigo-100 text-indigo-800 border border-indigo-200",children:[F.length," selecionado(s)"]}):null,q!=="none"?e.jsx("span",{className:"text-xs text-gray-600",children:q==="polygon"?"Clique no mapa para adicionar pontos. Conclua para finalizar.":ee?"Clique novamente para finalizar o retngulo.":"Clique para marcar o 1 canto do retngulo."}):null]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm",value:w,onChange:Ce=>N(Ce.target.value||"ALL"),children:[e.jsx("option",{value:"ALL",children:"Tipo: todos"}),e.jsx("option",{value:"OOH",children:"OOH"}),e.jsx("option",{value:"DOOH",children:"DOOH"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm",value:j,onChange:Ce=>S(Ce.target.value||""),children:[e.jsx("option",{value:"",children:"Disponibilidade: todas"}),e.jsx("option",{value:"LIVRE",children:"Somente livres"}),e.jsx("option",{value:"OCUPADA",children:"Somente ocupadas"}),e.jsx("option",{value:"EM_NEGOCIACAO",children:"Somente em negociao"})]}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm",value:A,onChange:Ce=>D(Ce.target.value),placeholder:"Cidade"}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm",value:E,onChange:Ce=>T(Ce.target.value),placeholder:"UF"}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm sm:col-span-2",value:k,onChange:Ce=>R(Ce.target.value),placeholder:"Bairro"}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 sm:col-span-2",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:Ce=>H(Ce.target.checked)}),"Somente no Mdia Kit"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx(ht,{className:"bg-green-100 text-green-700 border border-green-200",children:"Livre"}),e.jsx(ht,{className:"bg-amber-100 text-amber-700 border border-amber-200",children:"Misto"}),e.jsx(ht,{className:"bg-red-100 text-red-700 border border-red-200",children:"Ocupado"}),e.jsx(ht,{className:"bg-purple-100 text-purple-700 border border-purple-200",children:"Negociao"})]})]})}),e.jsxs(WO,{center:[-23.55052,-46.633308],zoom:12,className:"h-full w-full",style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(GO,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(qL,{mapRef:s,onViewportChange:ps}),e.jsx(ZL,{drawMode:q,rectStart:ee,onAddVertex:Ce=>B(Qe=>[...Qe,Ce]),onRectStart:me,onRectEnd:fe,onCompleteRectangle:Rn}),W&&W.length>=3?e.jsx(mb,{positions:W.map(Ce=>[Ce.lat,Ce.lng]),pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.12}}):null,q==="polygon"&&M.length?e.jsxs(e.Fragment,{children:[e.jsx(qO,{positions:M.map(Ce=>[Ce.lat,Ce.lng]),pathOptions:{color:"#4F46E5",weight:2,dashArray:"4 6"}}),M.length>=3?e.jsx(mb,{positions:M.map(Ce=>[Ce.lat,Ce.lng]),pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.08,dashArray:"4 6"}}):null]}):null,q==="rectangle"&&ee&&J?e.jsx(ZO,{bounds:[[Math.min(ee.lat,J.lat),Math.min(ee.lng,J.lng)],[Math.max(ee.lat,J.lat),Math.max(ee.lng,J.lng)]],pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.08,dashArray:"4 6"}}):null,Kn.map(Ce=>{const[Qe,nt]=Ce.geometry.coordinates;if(Ce.properties.cluster){const Te=Ce.properties.point_count,wt=Ce.id;return e.jsx(ub,{position:[nt,Qe],icon:VL(Te),eventHandlers:{click:()=>{ts(wt,Te);const Ct=Math.min(yn.getClusterExpansionZoom(wt),20);s.current?.setView([nt,Qe],Ct,{animate:!0})}}},`cluster-${wt}`)}const Ee=Ce.properties;return e.jsx(ub,{position:[Ee.latitude,Ee.longitude],icon:WL(Ee),eventHandlers:{click:()=>void Sn(Ee.id,{center:!1})}},`p-${Ee.id}`)})]}),ut?e.jsx("div",{className:"absolute bottom-4 left-4 bg-white border rounded-lg shadow px-3 py-2 text-sm text-gray-700",children:"Carregando pontos..."}):null,!ut&&Kt?e.jsx("div",{className:"absolute bottom-4 left-4 bg-white border border-red-200 rounded-lg shadow px-3 py-2 text-sm text-red-700",children:"Erro ao carregar pontos."}):null,W?e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-white border rounded-xl shadow-sm p-3",style:{zIndex:30,maxWidth:520,pointerEvents:"auto"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("span",{className:"font-medium",children:F.length})," ponto(s) selecionado(s) na rea"]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:ml-auto",children:[e.jsxs(ne,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:()=>{ot("selected"),Xe(!0)},children:[e.jsx(TP,{className:"w-4 h-4"})," Ver lista"]}),e.jsxs(ne,{type:"button",size:"sm",className:"gap-2 mm-indigo",disabled:F.length===0,onClick:Vn,children:[e.jsx(Ss,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(ne,{type:"button",size:"sm",variant:"ghost",onClick:hn,children:[e.jsx(xa,{className:"w-4 h-4 mr-2"})," Limpar"]})]})]})}):null,e.jsx(Kg,{open:Ye,onOpenChange:Xe,modal:!1,children:e.jsxs(Xg,{hideOverlay:!0,side:"right",className:"",style:{width:460,maxWidth:"92vw"},children:[e.jsxs(Yg,{children:[e.jsx(Qg,{children:Je==="details"?"Detalhes do ponto":Je==="cluster"?"Pontos do cluster":"Selecionados"}),e.jsx(m2,{children:Je==="details"?"Disponibilidade por face e aes rpidas.":Je==="cluster"?`${Tt.length} ponto(s) neste agrupamento.`:`${F.length} ponto(s) selecionado(s) na rea.`})]}),e.jsx("div",{className:"mt-4",children:Je==="cluster"?e.jsx(bc,{className:"pr-3",style:{height:"calc(100vh - 160px)"},children:e.jsx("div",{className:"space-y-2",children:Tt.map(Ce=>e.jsx("button",{type:"button",className:pt("w-full text-left border rounded-lg p-3 hover:bg-gray-50",jt===Ce.id&&"border-indigo-300"),onClick:()=>void Sn(Ce.id),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ce.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[Ce.addressDistrict,Ce.addressCity,Ce.addressState].filter(Boolean).join("  ")}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[Xf(Ce),"  ",Ce.facesFreeCount,"/",Ce.facesTotal," livres"]})]}),Ce.isFavorite?e.jsx(Dd,{className:"w-4 h-4 text-amber-500 mt-0.5"}):null]})},Ce.id))})}):Je==="selected"?e.jsxs(bc,{className:"pr-3",style:{height:"calc(100vh - 200px)"},children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(ne,{type:"button",size:"sm",className:"gap-2 mm-indigo",disabled:F.length===0,onClick:Vn,children:[e.jsx(Ss,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(ne,{type:"button",size:"sm",variant:"outline",onClick:hn,className:"gap-2",children:[e.jsx(xa,{className:"w-4 h-4"})," Limpar seleo"]})]}),e.jsxs("div",{className:"space-y-2",children:[F.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhum ponto dentro da rea desenhada."}):null,F.map(Ce=>e.jsx("button",{type:"button",className:pt("w-full text-left border rounded-lg p-3 hover:bg-gray-50"),onClick:()=>void Sn(Ce.id),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ce.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[Ce.addressDistrict,Ce.addressCity,Ce.addressState].filter(Boolean).join("  ")}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[Xf(Ce),"  ",Ce.facesFreeCount,"/",Ce.facesTotal," livres"]})]}),Ce.isFavorite?e.jsx(Dd,{className:"w-4 h-4 text-amber-500 mt-0.5"}):null]})},Ce.id))]})]}):e.jsxs(e.Fragment,{children:[de?e.jsx("div",{className:"text-sm text-gray-600",children:"Carregando detalhes..."}):null,oe?e.jsx("div",{className:"text-sm text-red-700",children:oe}):null,!de&&!oe&&Q?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-gray-900 font-medium truncate",children:Q.point.name}),Q.point.isFavorite?e.jsx(ht,{className:"bg-amber-100 text-amber-800 border border-amber-200",children:"Favorito"}):null,Q.point.isMine?e.jsx(ht,{className:"bg-indigo-100 text-indigo-800 border border-indigo-200",children:"Meu"}):null,Q.point.isInCampaign?e.jsx(ht,{className:"bg-red-100 text-red-800 border border-red-200",children:"Em campanha"}):null,Q.point.isInProposal?e.jsx(ht,{className:"bg-purple-100 text-purple-800 border border-purple-200",children:"Em proposta"}):null]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:[Q.point.addressStreet,Q.point.addressNumber,Q.point.addressDistrict,Q.point.addressCity,Q.point.addressState].filter(Boolean).join(", ")}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[Xf(Q),"  ",Q.facesFreeCount,"/",Q.facesTotal," livres  ",Q.facesNegotiationCount," em negociao  ",Q.facesOccupiedCount," ocupadas"]})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs(ne,{type:"button",size:"sm",className:"gap-2 mm-indigo",onClick:xn,children:[e.jsx(Ss,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(ne,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:bn,children:[e.jsx(Fj,{className:"w-4 h-4"})," Abrir no inventrio"]}),e.jsxs(ne,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:sn,children:[e.jsx(Dd,{className:"w-4 h-4"})," ",Q.point.isFavorite?"Desfavoritar":"Favoritar"]}),e.jsxs(ne,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:$t,children:[e.jsx(Wa,{className:"w-4 h-4"})," Copiar link"]}),e.jsxs(ne,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:An,children:[e.jsx(Wa,{className:"w-4 h-4"})," Copiar coords"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium mb-2",children:"Faces"}),e.jsx(bc,{className:"pr-3",style:{height:"calc(100vh - 420px)"},children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Q.faces.map(Ce=>{const Qe=Ce.status,nt=Qe==="LIVRE"?"border-green-200 bg-green-50 text-green-700":Qe==="OCUPADA"?"border-red-200 bg-red-50 text-red-700":"border-purple-200 bg-purple-50 text-purple-700";return e.jsxs("div",{className:pt("border rounded-lg p-2 text-xs",nt),children:[e.jsx("div",{className:"font-medium text-gray-900",children:Ce.label}),e.jsx("div",{className:"mt-1",children:Qe==="LIVRE"?"Livre":Qe==="OCUPADA"?"Ocupada":"Em negociao"})]},Ce.id)})})})]})]}):null]})})]})})]})}function KL(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(!1),[m,f]=p.useState(null),b=async()=>{try{h(!0),f(null);const N={search:t.search,status:t.status,ownerUserId:t.ownerUserId,page:t.page,pageSize:t.pageSize,orderBy:t.sortBy,sortOrder:t.sortOrder};N.orderBy==="contactName"&&(N.orderBy="name");const S=(await ke.get("/clients",{params:N})).data,A=Array.isArray(S)?S:S.data,D=Array.isArray(S)?A.length:S.total??A.length;n(A),l(D)}catch(N){f(N)}finally{h(!1)}},v=async N=>{const j=await ke.post("/clients",N);return n(S=>[...S,j.data]),j.data},g=async(N,j)=>{const S=await ke.put(`/clients/${N}`,j);return n(A=>A.map(D=>D.id===N?S.data:D)),S.data},w=async N=>{await ke.delete(`/clients/${N}`),n(j=>j.filter(S=>S.id!==N))};return p.useEffect(()=>{b()},[t.search,t.status,t.ownerUserId,t.page,t.pageSize,t.sortBy,t.sortOrder]),{clients:s,total:i,loading:c,error:m,refetch:b,createClient:v,updateClient:g,deleteClient:w}}var ou=t=>t.type==="checkbox",ll=t=>t instanceof Date,ur=t=>t==null;const O2=t=>typeof t=="object";var hs=t=>!ur(t)&&!Array.isArray(t)&&O2(t)&&!ll(t),XL=t=>hs(t)&&t.target?ou(t.target)?t.target.checked:t.target.value:t,YL=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,QL=(t,s)=>t.has(YL(s)),JL=t=>{const s=t.constructor&&t.constructor.prototype;return hs(s)&&s.hasOwnProperty("isPrototypeOf")},s0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Cs(t){let s;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(s0&&(t instanceof Blob||i))&&(n||hs(t)))if(s=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!JL(t))s=t;else for(const l in t)t.hasOwnProperty(l)&&(s[l]=Cs(t[l]));else return t;return s}var Jh=t=>/^\w*$/.test(t),rs=t=>t===void 0,r0=t=>Array.isArray(t)?t.filter(Boolean):[],a0=t=>r0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ct=(t,s,n)=>{if(!s||!hs(t))return n;const i=(Jh(s)?[s]:a0(s)).reduce((l,c)=>ur(l)?l:l[c],t);return rs(i)||i===t?rs(t[s])?n:t[s]:i},$a=t=>typeof t=="boolean",$n=(t,s,n)=>{let i=-1;const l=Jh(s)?[s]:a0(s),c=l.length,h=c-1;for(;++i<c;){const m=l[i];let f=n;if(i!==h){const b=t[m];f=hs(b)||Array.isArray(b)?b:isNaN(+l[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;t[m]=f,t=t[m]}};const Nb={BLUR:"blur",FOCUS_OUT:"focusout"},ha={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},yi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},e3=Re.createContext(null);e3.displayName="HookFormContext";var t3=(t,s,n,i=!0)=>{const l={defaultValues:s._defaultValues};for(const c in t)Object.defineProperty(l,c,{get:()=>{const h=c;return s._proxyFormState[h]!==ha.all&&(s._proxyFormState[h]=!i||ha.all),t[h]}});return l};const n3=typeof window<"u"?Re.useLayoutEffect:Re.useEffect;var Tr=t=>typeof t=="string",s3=(t,s,n,i,l)=>Tr(t)?(i&&s.watch.add(t),ct(n,t,l)):Array.isArray(t)?t.map(c=>(i&&s.watch.add(c),ct(n,c))):(i&&(s.watchAll=!0),n),Ox=t=>ur(t)||!O2(t);function yo(t,s,n=new WeakSet){if(Ox(t)||Ox(s))return Object.is(t,s);if(ll(t)&&ll(s))return t.getTime()===s.getTime();const i=Object.keys(t),l=Object.keys(s);if(i.length!==l.length)return!1;if(n.has(t)||n.has(s))return!0;n.add(t),n.add(s);for(const c of i){const h=t[c];if(!l.includes(c))return!1;if(c!=="ref"){const m=s[c];if(ll(h)&&ll(m)||hs(h)&&hs(m)||Array.isArray(h)&&Array.isArray(m)?!yo(h,m,n):!Object.is(h,m))return!1}}return!0}var r3=(t,s,n,i,l)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:l||!0}}:{},zd=t=>Array.isArray(t)?t:[t],Cb=()=>{let t=[];return{get observers(){return t},next:l=>{for(const c of t)c.next&&c.next(l)},subscribe:l=>(t.push(l),{unsubscribe:()=>{t=t.filter(c=>c!==l)}}),unsubscribe:()=>{t=[]}}};function L2(t,s){const n={};for(const i in t)if(t.hasOwnProperty(i)){const l=t[i],c=s[i];if(l&&hs(l)&&c){const h=L2(l,c);hs(h)&&(n[i]=h)}else t[i]&&(n[i]=c)}return n}var Qs=t=>hs(t)&&!Object.keys(t).length,i0=t=>t.type==="file",pa=t=>typeof t=="function",ph=t=>{if(!s0)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},F2=t=>t.type==="select-multiple",o0=t=>t.type==="radio",a3=t=>o0(t)||ou(t),Yf=t=>ph(t)&&t.isConnected;function i3(t,s){const n=s.slice(0,-1).length;let i=0;for(;i<n;)t=rs(t)?i++:t[s[i++]];return t}function o3(t){for(const s in t)if(t.hasOwnProperty(s)&&!rs(t[s]))return!1;return!0}function us(t,s){const n=Array.isArray(s)?s:Jh(s)?[s]:a0(s),i=n.length===1?t:i3(t,n),l=n.length-1,c=n[l];return i&&delete i[c],l!==0&&(hs(i)&&Qs(i)||Array.isArray(i)&&o3(i))&&us(t,n.slice(0,-1)),t}var l3=t=>{for(const s in t)if(pa(t[s]))return!0;return!1};function $2(t){return Array.isArray(t)||hs(t)&&!l3(t)}function Lx(t,s={}){for(const n in t){const i=t[n];$2(i)?(s[n]=Array.isArray(i)?[]:{},Lx(i,s[n])):rs(i)||(s[n]=!0)}return s}function mc(t,s,n){n||(n=Lx(s));for(const i in t){const l=t[i];if($2(l))rs(s)||Ox(n[i])?n[i]=Lx(l,Array.isArray(l)?[]:{}):mc(l,ur(s)?{}:s[i],n[i]);else{const c=s[i];n[i]=!yo(l,c)}}return n}const _b={value:!1,isValid:!1},Sb={value:!0,isValid:!0};var z2=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!rs(t[0].attributes.value)?rs(t[0].value)||t[0].value===""?Sb:{value:t[0].value,isValid:!0}:Sb:_b}return _b},B2=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:i})=>rs(t)?t:s?t===""?NaN:t&&+t:n&&Tr(t)?new Date(t):i?i(t):t;const Ab={isValid:!1,value:null};var U2=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,Ab):Ab;function Pb(t){const s=t.ref;return i0(s)?s.files:o0(s)?U2(t.refs).value:F2(s)?[...s.selectedOptions].map(({value:n})=>n):ou(s)?z2(t.refs).value:B2(rs(s.value)?t.ref.value:s.value,t)}var c3=(t,s,n,i)=>{const l={};for(const c of t){const h=ct(s,c);h&&$n(l,c,h._f)}return{criteriaMode:n,names:[...t],fields:l,shouldUseNativeValidation:i}},fh=t=>t instanceof RegExp,Ed=t=>rs(t)?t:fh(t)?t.source:hs(t)?fh(t.value)?t.value.source:t.value:t,Eb=t=>({isOnSubmit:!t||t===ha.onSubmit,isOnBlur:t===ha.onBlur,isOnChange:t===ha.onChange,isOnAll:t===ha.all,isOnTouch:t===ha.onTouched});const kb="AsyncFunction";var d3=t=>!!t&&!!t.validate&&!!(pa(t.validate)&&t.validate.constructor.name===kb||hs(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===kb)),u3=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Tb=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const Bd=(t,s,n,i)=>{for(const l of n||Object.keys(t)){const c=ct(t,l);if(c){const{_f:h,...m}=c;if(h){if(h.refs&&h.refs[0]&&s(h.refs[0],l)&&!i)return!0;if(h.ref&&s(h.ref,h.name)&&!i)return!0;if(Bd(m,s))break}else if(hs(m)&&Bd(m,s))break}}};function Db(t,s,n){const i=ct(t,n);if(i||Jh(n))return{error:i,name:n};const l=n.split(".");for(;l.length;){const c=l.join("."),h=ct(s,c),m=ct(t,c);if(h&&!Array.isArray(h)&&n!==c)return{name:n};if(m&&m.type)return{name:c,error:m};if(m&&m.root&&m.root.type)return{name:`${c}.root`,error:m.root};l.pop()}return{name:n}}var m3=(t,s,n,i)=>{n(t);const{name:l,...c}=t;return Qs(c)||Object.keys(c).length>=Object.keys(s).length||Object.keys(c).find(h=>s[h]===(!i||ha.all))},h3=(t,s,n)=>!t||!s||t===s||zd(t).some(i=>i&&(n?i===s:i.startsWith(s)||s.startsWith(i))),p3=(t,s,n,i,l)=>l.isOnAll?!1:!n&&l.isOnTouch?!(s||t):(n?i.isOnBlur:l.isOnBlur)?!t:(n?i.isOnChange:l.isOnChange)?t:!0,f3=(t,s)=>!r0(ct(t,s)).length&&us(t,s),x3=(t,s,n)=>{const i=zd(ct(t,n));return $n(i,"root",s[n]),$n(t,n,i),t};function Ib(t,s,n="validate"){if(Tr(t)||Array.isArray(t)&&t.every(Tr)||$a(t)&&!t)return{type:n,message:Tr(t)?t:"",ref:s}}var uc=t=>hs(t)&&!fh(t)?t:{value:t,message:""},Rb=async(t,s,n,i,l,c)=>{const{ref:h,refs:m,required:f,maxLength:b,minLength:v,min:g,max:w,pattern:N,validate:j,name:S,valueAsNumber:A,mount:D}=t._f,E=ct(n,S);if(!D||s.has(S))return{};const T=m?m[0]:h,k=M=>{l&&T.reportValidity&&(T.setCustomValidity($a(M)?"":M||""),T.reportValidity())},R={},O=o0(h),H=ou(h),te=O||H,X=(A||i0(h))&&rs(h.value)&&rs(E)||ph(h)&&h.value===""||E===""||Array.isArray(E)&&!E.length,q=r3.bind(null,S,i,R),U=(M,B,ee,me=yi.maxLength,J=yi.minLength)=>{const fe=M?B:ee;R[S]={type:M?me:J,message:fe,ref:h,...q(M?me:J,fe)}};if(c?!Array.isArray(E)||!E.length:f&&(!te&&(X||ur(E))||$a(E)&&!E||H&&!z2(m).isValid||O&&!U2(m).isValid)){const{value:M,message:B}=Tr(f)?{value:!!f,message:f}:uc(f);if(M&&(R[S]={type:yi.required,message:B,ref:T,...q(yi.required,B)},!i))return k(B),R}if(!X&&(!ur(g)||!ur(w))){let M,B;const ee=uc(w),me=uc(g);if(!ur(E)&&!isNaN(E)){const J=h.valueAsNumber||E&&+E;ur(ee.value)||(M=J>ee.value),ur(me.value)||(B=J<me.value)}else{const J=h.valueAsDate||new Date(E),fe=F=>new Date(new Date().toDateString()+" "+F),W=h.type=="time",ae=h.type=="week";Tr(ee.value)&&E&&(M=W?fe(E)>fe(ee.value):ae?E>ee.value:J>new Date(ee.value)),Tr(me.value)&&E&&(B=W?fe(E)<fe(me.value):ae?E<me.value:J<new Date(me.value))}if((M||B)&&(U(!!M,ee.message,me.message,yi.max,yi.min),!i))return k(R[S].message),R}if((b||v)&&!X&&(Tr(E)||c&&Array.isArray(E))){const M=uc(b),B=uc(v),ee=!ur(M.value)&&E.length>+M.value,me=!ur(B.value)&&E.length<+B.value;if((ee||me)&&(U(ee,M.message,B.message),!i))return k(R[S].message),R}if(N&&!X&&Tr(E)){const{value:M,message:B}=uc(N);if(fh(M)&&!E.match(M)&&(R[S]={type:yi.pattern,message:B,ref:h,...q(yi.pattern,B)},!i))return k(B),R}if(j){if(pa(j)){const M=await j(E,n),B=Ib(M,T);if(B&&(R[S]={...B,...q(yi.validate,B.message)},!i))return k(B.message),R}else if(hs(j)){let M={};for(const B in j){if(!Qs(M)&&!i)break;const ee=Ib(await j[B](E,n),T,B);ee&&(M={...ee,...q(B,ee.message)},k(ee.message),i&&(R[S]=M))}if(!Qs(M)&&(R[S]={ref:T,...M},!i))return R}}return k(!0),R};const g3={mode:ha.onSubmit,reValidateMode:ha.onChange,shouldFocusError:!0};function v3(t={}){let s={...g3,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:pa(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},l=hs(s.defaultValues)||hs(s.values)?Cs(s.defaultValues||s.values)||{}:{},c=s.shouldUnregister?{}:Cs(l),h={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,b=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...v};const w={array:Cb(),state:Cb()},N=s.criteriaMode===ha.all,j=Q=>pe=>{clearTimeout(b),b=setTimeout(Q,pe)},S=async Q=>{if(!s.disabled&&(v.isValid||g.isValid||Q)){const pe=s.resolver?Qs((await H()).errors):await X(i,!0);pe!==n.isValid&&w.state.next({isValid:pe})}},A=(Q,pe)=>{!s.disabled&&(v.isValidating||v.validatingFields||g.isValidating||g.validatingFields)&&((Q||Array.from(m.mount)).forEach(de=>{de&&(pe?$n(n.validatingFields,de,pe):us(n.validatingFields,de))}),w.state.next({validatingFields:n.validatingFields,isValidating:!Qs(n.validatingFields)}))},D=(Q,pe=[],de,Oe,oe=!0,be=!0)=>{if(Oe&&de&&!s.disabled){if(h.action=!0,be&&Array.isArray(ct(i,Q))){const Me=de(ct(i,Q),Oe.argA,Oe.argB);oe&&$n(i,Q,Me)}if(be&&Array.isArray(ct(n.errors,Q))){const Me=de(ct(n.errors,Q),Oe.argA,Oe.argB);oe&&$n(n.errors,Q,Me),f3(n.errors,Q)}if((v.touchedFields||g.touchedFields)&&be&&Array.isArray(ct(n.touchedFields,Q))){const Me=de(ct(n.touchedFields,Q),Oe.argA,Oe.argB);oe&&$n(n.touchedFields,Q,Me)}(v.dirtyFields||g.dirtyFields)&&(n.dirtyFields=mc(l,c)),w.state.next({name:Q,isDirty:U(Q,pe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else $n(c,Q,pe)},E=(Q,pe)=>{$n(n.errors,Q,pe),w.state.next({errors:n.errors})},T=Q=>{n.errors=Q,w.state.next({errors:n.errors,isValid:!1})},k=(Q,pe,de,Oe)=>{const oe=ct(i,Q);if(oe){const be=ct(c,Q,rs(de)?ct(l,Q):de);rs(be)||Oe&&Oe.defaultChecked||pe?$n(c,Q,pe?be:Pb(oe._f)):ee(Q,be),h.mount&&!h.action&&S()}},R=(Q,pe,de,Oe,oe)=>{let be=!1,Me=!1;const Ge={name:Q};if(!s.disabled){if(!de||Oe){(v.isDirty||g.isDirty)&&(Me=n.isDirty,n.isDirty=Ge.isDirty=U(),be=Me!==Ge.isDirty);const ut=yo(ct(l,Q),pe);Me=!!ct(n.dirtyFields,Q),ut?us(n.dirtyFields,Q):$n(n.dirtyFields,Q,!0),Ge.dirtyFields=n.dirtyFields,be=be||(v.dirtyFields||g.dirtyFields)&&Me!==!ut}if(de){const ut=ct(n.touchedFields,Q);ut||($n(n.touchedFields,Q,de),Ge.touchedFields=n.touchedFields,be=be||(v.touchedFields||g.touchedFields)&&ut!==de)}be&&oe&&w.state.next(Ge)}return be?Ge:{}},O=(Q,pe,de,Oe)=>{const oe=ct(n.errors,Q),be=(v.isValid||g.isValid)&&$a(pe)&&n.isValid!==pe;if(s.delayError&&de?(f=j(()=>E(Q,de)),f(s.delayError)):(clearTimeout(b),f=null,de?$n(n.errors,Q,de):us(n.errors,Q)),(de?!yo(oe,de):oe)||!Qs(Oe)||be){const Me={...Oe,...be&&$a(pe)?{isValid:pe}:{},errors:n.errors,name:Q};n={...n,...Me},w.state.next(Me)}},H=async Q=>{A(Q,!0);const pe=await s.resolver(c,s.context,c3(Q||m.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return A(Q),pe},te=async Q=>{const{errors:pe}=await H(Q);if(Q)for(const de of Q){const Oe=ct(pe,de);Oe?$n(n.errors,de,Oe):us(n.errors,de)}else n.errors=pe;return pe},X=async(Q,pe,de={valid:!0})=>{for(const Oe in Q){const oe=Q[Oe];if(oe){const{_f:be,...Me}=oe;if(be){const Ge=m.array.has(be.name),ut=oe._f&&d3(oe._f);ut&&v.validatingFields&&A([be.name],!0);const Kt=await Rb(oe,m.disabled,c,N,s.shouldUseNativeValidation&&!pe,Ge);if(ut&&v.validatingFields&&A([be.name]),Kt[be.name]&&(de.valid=!1,pe))break;!pe&&(ct(Kt,be.name)?Ge?x3(n.errors,Kt,be.name):$n(n.errors,be.name,Kt[be.name]):us(n.errors,be.name))}!Qs(Me)&&await X(Me,pe,de)}}return de.valid},q=()=>{for(const Q of m.unMount){const pe=ct(i,Q);pe&&(pe._f.refs?pe._f.refs.every(de=>!Yf(de)):!Yf(pe._f.ref))&&le(Q)}m.unMount=new Set},U=(Q,pe)=>!s.disabled&&(Q&&pe&&$n(c,Q,pe),!yo(F(),l)),M=(Q,pe,de)=>s3(Q,m,{...h.mount?c:rs(pe)?l:Tr(Q)?{[Q]:pe}:pe},de,pe),B=Q=>r0(ct(h.mount?c:l,Q,s.shouldUnregister?ct(l,Q,[]):[])),ee=(Q,pe,de={})=>{const Oe=ct(i,Q);let oe=pe;if(Oe){const be=Oe._f;be&&(!be.disabled&&$n(c,Q,B2(pe,be)),oe=ph(be.ref)&&ur(pe)?"":pe,F2(be.ref)?[...be.ref.options].forEach(Me=>Me.selected=oe.includes(Me.value)):be.refs?ou(be.ref)?be.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(oe)?Me.checked=!!oe.find(Ge=>Ge===Me.value):Me.checked=oe===Me.value||!!oe)}):be.refs.forEach(Me=>Me.checked=Me.value===oe):i0(be.ref)?be.ref.value="":(be.ref.value=oe,be.ref.type||w.state.next({name:Q,values:Cs(c)})))}(de.shouldDirty||de.shouldTouch)&&R(Q,oe,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&ae(Q)},me=(Q,pe,de)=>{for(const Oe in pe){if(!pe.hasOwnProperty(Oe))return;const oe=pe[Oe],be=Q+"."+Oe,Me=ct(i,be);(m.array.has(Q)||hs(oe)||Me&&!Me._f)&&!ll(oe)?me(be,oe,de):ee(be,oe,de)}},J=(Q,pe,de={})=>{const Oe=ct(i,Q),oe=m.array.has(Q),be=Cs(pe);$n(c,Q,be),oe?(w.array.next({name:Q,values:Cs(c)}),(v.isDirty||v.dirtyFields||g.isDirty||g.dirtyFields)&&de.shouldDirty&&w.state.next({name:Q,dirtyFields:mc(l,c),isDirty:U(Q,be)})):Oe&&!Oe._f&&!ur(be)?me(Q,be,de):ee(Q,be,de),Tb(Q,m)&&w.state.next({...n,name:Q}),w.state.next({name:h.mount?Q:void 0,values:Cs(c)})},fe=async Q=>{h.mount=!0;const pe=Q.target;let de=pe.name,Oe=!0;const oe=ct(i,de),be=ut=>{Oe=Number.isNaN(ut)||ll(ut)&&isNaN(ut.getTime())||yo(ut,ct(c,de,ut))},Me=Eb(s.mode),Ge=Eb(s.reValidateMode);if(oe){let ut,Kt;const tn=pe.type?Pb(oe._f):XL(Q),ln=Q.type===Nb.BLUR||Q.type===Nb.FOCUS_OUT,Ut=!u3(oe._f)&&!s.resolver&&!ct(n.errors,de)&&!oe._f.deps||p3(ln,ct(n.touchedFields,de),n.isSubmitted,Ge,Me),yn=Tb(de,m,ln);$n(c,de,tn),ln?(!pe||!pe.readOnly)&&(oe._f.onBlur&&oe._f.onBlur(Q),f&&f(0)):oe._f.onChange&&oe._f.onChange(Q);const Kn=R(de,tn,ln),ps=!Qs(Kn)||yn;if(!ln&&w.state.next({name:de,type:Q.type,values:Cs(c)}),Ut)return(v.isValid||g.isValid)&&(s.mode==="onBlur"?ln&&S():ln||S()),ps&&w.state.next({name:de,...yn?{}:Kn});if(!ln&&yn&&w.state.next({...n}),s.resolver){const{errors:Pn}=await H([de]);if(be(tn),Oe){const rn=Db(n.errors,i,de),hn=Db(Pn,i,rn.name||de);ut=hn.error,de=hn.name,Kt=Qs(Pn)}}else A([de],!0),ut=(await Rb(oe,m.disabled,c,N,s.shouldUseNativeValidation))[de],A([de]),be(tn),Oe&&(ut?Kt=!1:(v.isValid||g.isValid)&&(Kt=await X(i,!0)));Oe&&(oe._f.deps&&(!Array.isArray(oe._f.deps)||oe._f.deps.length>0)&&ae(oe._f.deps),O(de,Kt,ut,Kn))}},W=(Q,pe)=>{if(ct(n.errors,pe)&&Q.focus)return Q.focus(),1},ae=async(Q,pe={})=>{let de,Oe;const oe=zd(Q);if(s.resolver){const be=await te(rs(Q)?Q:oe);de=Qs(be),Oe=Q?!oe.some(Me=>ct(be,Me)):de}else Q?(Oe=(await Promise.all(oe.map(async be=>{const Me=ct(i,be);return await X(Me&&Me._f?{[be]:Me}:Me)}))).every(Boolean),!(!Oe&&!n.isValid)&&S()):Oe=de=await X(i);return w.state.next({...!Tr(Q)||(v.isValid||g.isValid)&&de!==n.isValid?{}:{name:Q},...s.resolver||!Q?{isValid:de}:{},errors:n.errors}),pe.shouldFocus&&!Oe&&Bd(i,W,Q?oe:m.mount),Oe},F=(Q,pe)=>{let de={...h.mount?c:l};return pe&&(de=L2(pe.dirtyFields?n.dirtyFields:n.touchedFields,de)),rs(Q)?de:Tr(Q)?ct(de,Q):Q.map(Oe=>ct(de,Oe))},$=(Q,pe)=>({invalid:!!ct((pe||n).errors,Q),isDirty:!!ct((pe||n).dirtyFields,Q),error:ct((pe||n).errors,Q),isValidating:!!ct(n.validatingFields,Q),isTouched:!!ct((pe||n).touchedFields,Q)}),Y=Q=>{Q&&zd(Q).forEach(pe=>us(n.errors,pe)),w.state.next({errors:Q?n.errors:{}})},Z=(Q,pe,de)=>{const Oe=(ct(i,Q,{_f:{}})._f||{}).ref,oe=ct(n.errors,Q)||{},{ref:be,message:Me,type:Ge,...ut}=oe;$n(n.errors,Q,{...ut,...pe,ref:Oe}),w.state.next({name:Q,errors:n.errors,isValid:!1}),de&&de.shouldFocus&&Oe&&Oe.focus&&Oe.focus()},K=(Q,pe)=>pa(Q)?w.state.subscribe({next:de=>"values"in de&&Q(M(void 0,pe),de)}):M(Q,pe,!0),G=Q=>w.state.subscribe({next:pe=>{h3(Q.name,pe.name,Q.exact)&&m3(pe,Q.formState||v,dt,Q.reRenderRoot)&&Q.callback({values:{...c},...n,...pe,defaultValues:l})}}).unsubscribe,xe=Q=>(h.mount=!0,g={...g,...Q.formState},G({...Q,formState:g})),le=(Q,pe={})=>{for(const de of Q?zd(Q):m.mount)m.mount.delete(de),m.array.delete(de),pe.keepValue||(us(i,de),us(c,de)),!pe.keepError&&us(n.errors,de),!pe.keepDirty&&us(n.dirtyFields,de),!pe.keepTouched&&us(n.touchedFields,de),!pe.keepIsValidating&&us(n.validatingFields,de),!s.shouldUnregister&&!pe.keepDefaultValue&&us(l,de);w.state.next({values:Cs(c)}),w.state.next({...n,...pe.keepDirty?{isDirty:U()}:{}}),!pe.keepIsValid&&S()},ue=({disabled:Q,name:pe})=>{($a(Q)&&h.mount||Q||m.disabled.has(pe))&&(Q?m.disabled.add(pe):m.disabled.delete(pe))},Fe=(Q,pe={})=>{let de=ct(i,Q);const Oe=$a(pe.disabled)||$a(s.disabled);return $n(i,Q,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:Q}},name:Q,mount:!0,...pe}}),m.mount.add(Q),de?ue({disabled:$a(pe.disabled)?pe.disabled:s.disabled,name:Q}):k(Q,!0,pe.value),{...Oe?{disabled:pe.disabled||s.disabled}:{},...s.progressive?{required:!!pe.required,min:Ed(pe.min),max:Ed(pe.max),minLength:Ed(pe.minLength),maxLength:Ed(pe.maxLength),pattern:Ed(pe.pattern)}:{},name:Q,onChange:fe,onBlur:fe,ref:oe=>{if(oe){Fe(Q,pe),de=ct(i,Q);const be=rs(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,Me=a3(be),Ge=de._f.refs||[];if(Me?Ge.find(ut=>ut===be):be===de._f.ref)return;$n(i,Q,{_f:{...de._f,...Me?{refs:[...Ge.filter(Yf),be,...Array.isArray(ct(l,Q))?[{}]:[]],ref:{type:be.type,name:Q}}:{ref:be}}}),k(Q,!1,void 0,be)}else de=ct(i,Q,{}),de._f&&(de._f.mount=!1),(s.shouldUnregister||pe.shouldUnregister)&&!(QL(m.array,Q)&&h.action)&&m.unMount.add(Q)}}},$e=()=>s.shouldFocusError&&Bd(i,W,m.mount),Ze=Q=>{$a(Q)&&(w.state.next({disabled:Q}),Bd(i,(pe,de)=>{const Oe=ct(i,de);Oe&&(pe.disabled=Oe._f.disabled||Q,Array.isArray(Oe._f.refs)&&Oe._f.refs.forEach(oe=>{oe.disabled=Oe._f.disabled||Q}))},0,!1))},Ye=(Q,pe)=>async de=>{let Oe;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let oe=Cs(c);if(w.state.next({isSubmitting:!0}),s.resolver){const{errors:be,values:Me}=await H();n.errors=be,oe=Cs(Me)}else await X(i);if(m.disabled.size)for(const be of m.disabled)us(oe,be);if(us(n.errors,"root"),Qs(n.errors)){w.state.next({errors:{}});try{await Q(oe,de)}catch(be){Oe=be}}else pe&&await pe({...n.errors},de),$e(),setTimeout($e);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qs(n.errors)&&!Oe,submitCount:n.submitCount+1,errors:n.errors}),Oe)throw Oe},Xe=(Q,pe={})=>{ct(i,Q)&&(rs(pe.defaultValue)?J(Q,Cs(ct(l,Q))):(J(Q,pe.defaultValue),$n(l,Q,Cs(pe.defaultValue))),pe.keepTouched||us(n.touchedFields,Q),pe.keepDirty||(us(n.dirtyFields,Q),n.isDirty=pe.defaultValue?U(Q,Cs(ct(l,Q))):U()),pe.keepError||(us(n.errors,Q),v.isValid&&S()),w.state.next({...n}))},Je=(Q,pe={})=>{const de=Q?Cs(Q):l,Oe=Cs(de),oe=Qs(Q),be=oe?l:Oe;if(pe.keepDefaultValues||(l=de),!pe.keepValues){if(pe.keepDirtyValues){const Me=new Set([...m.mount,...Object.keys(mc(l,c))]);for(const Ge of Array.from(Me))ct(n.dirtyFields,Ge)?$n(be,Ge,ct(c,Ge)):J(Ge,ct(be,Ge))}else{if(s0&&rs(Q))for(const Me of m.mount){const Ge=ct(i,Me);if(Ge&&Ge._f){const ut=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(ph(ut)){const Kt=ut.closest("form");if(Kt){Kt.reset();break}}}}if(pe.keepFieldsRef)for(const Me of m.mount)J(Me,ct(be,Me));else i={}}c=s.shouldUnregister?pe.keepDefaultValues?Cs(l):{}:Cs(be),w.array.next({values:{...be}}),w.state.next({values:{...be}})}m={mount:pe.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!v.isValid||!!pe.keepIsValid||!!pe.keepDirtyValues||!s.shouldUnregister&&!Qs(be),h.watch=!!s.shouldUnregister,h.action=!1,pe.keepErrors||(n.errors={}),w.state.next({submitCount:pe.keepSubmitCount?n.submitCount:0,isDirty:oe?!1:pe.keepDirty?n.isDirty:!!(pe.keepDefaultValues&&!yo(Q,l)),isSubmitted:pe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:oe?{}:pe.keepDirtyValues?pe.keepDefaultValues&&c?mc(l,c):n.dirtyFields:pe.keepDefaultValues&&Q?mc(l,Q):pe.keepDirty?n.dirtyFields:{},touchedFields:pe.keepTouched?n.touchedFields:{},errors:pe.keepErrors?n.errors:{},isSubmitSuccessful:pe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},ot=(Q,pe)=>Je(pa(Q)?Q(c):Q,pe),jt=(Q,pe={})=>{const de=ct(i,Q),Oe=de&&de._f;if(Oe){const oe=Oe.refs?Oe.refs[0]:Oe.ref;oe.focus&&(oe.focus(),pe.shouldSelect&&pa(oe.select)&&oe.select())}},dt=Q=>{n={...n,...Q}},Ft={control:{register:Fe,unregister:le,getFieldState:$,handleSubmit:Ye,setError:Z,_subscribe:G,_runSchema:H,_focusError:$e,_getWatch:M,_getDirty:U,_setValid:S,_setFieldArray:D,_setDisabledField:ue,_setErrors:T,_getFieldArray:B,_reset:Je,_resetDefaultValues:()=>pa(s.defaultValues)&&s.defaultValues().then(Q=>{ot(Q,s.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:Ze,_subjects:w,_proxyFormState:v,get _fields(){return i},get _formValues(){return c},get _state(){return h},set _state(Q){h=Q},get _defaultValues(){return l},get _names(){return m},set _names(Q){m=Q},get _formState(){return n},get _options(){return s},set _options(Q){s={...s,...Q}}},subscribe:xe,trigger:ae,register:Fe,handleSubmit:Ye,watch:K,setValue:J,getValues:F,reset:ot,resetField:Xe,clearErrors:Y,unregister:le,setError:Z,setFocus:jt,getFieldState:$};return{...Ft,formControl:Ft}}function y3(t={}){const s=Re.useRef(void 0),n=Re.useRef(void 0),[i,l]=Re.useState({isDirty:!1,isValidating:!1,isLoading:pa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:pa(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:i},t.defaultValues&&!pa(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:h,...m}=v3(t);s.current={...m,formState:i}}const c=s.current.control;return c._options=t,n3(()=>{const h=c._subscribe({formState:c._proxyFormState,callback:()=>l({...c._formState}),reRenderRoot:!0});return l(m=>({...m,isReady:!0})),c._formState.isReady=!0,h},[c]),Re.useEffect(()=>c._disableForm(t.disabled),[c,t.disabled]),Re.useEffect(()=>{t.mode&&(c._options.mode=t.mode),t.reValidateMode&&(c._options.reValidateMode=t.reValidateMode)},[c,t.mode,t.reValidateMode]),Re.useEffect(()=>{t.errors&&(c._setErrors(t.errors),c._focusError())},[c,t.errors]),Re.useEffect(()=>{t.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,t.shouldUnregister]),Re.useEffect(()=>{if(c._proxyFormState.isDirty){const h=c._getDirty();h!==i.isDirty&&c._subjects.state.next({isDirty:h})}},[c,i.isDirty]),Re.useEffect(()=>{var h;t.values&&!yo(t.values,n.current)?(c._reset(t.values,{keepFieldsRef:!0,...c._options.resetOptions}),!((h=c._options.resetOptions)===null||h===void 0)&&h.keepIsValid||c._setValid(),n.current=t.values,l(m=>({...m}))):c._resetDefaultValues()},[c,t.values]),Re.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),s.current.formState=t3(i,c),s.current}let jo=null,al=null;function Mb(){return jo?Promise.resolve(jo):al||(al=ke.get("/clients/owners").then(t=>(jo=t.data??[],jo)).then(t=>(al=null,t),t=>{throw al=null,t}),al)}function lu(){const[t,s]=p.useState(jo??[]),[n,i]=p.useState(!jo),[l,c]=p.useState(null),h=async()=>{try{i(!0),c(null),jo=null,al=null;const f=await Mb();return s(f),f}catch(f){return c(f),[]}finally{i(!1)}};p.useEffect(()=>{let f=!1;return(async()=>{try{i(!jo),c(null);const b=await Mb();f||s(b)}catch(b){f||c(b)}finally{f||i(!1)}})(),()=>{f=!0}},[]);const m=p.useMemo(()=>{const f=new Map;for(const b of t)f.set(b.id,b);return f},[t]);return{owners:t,ownersById:m,loading:n,error:l,refetch:h}}function b3({open:t,onOpenChange:s,client:n,onSave:i}){const{owners:l,loading:c}=lu(),h=p.useMemo(()=>({status:Ht.LEAD,contactName:"",email:"",phone:"",role:"",companyName:"",cnpj:"",origin:"",ownerUserId:void 0,addressZipcode:"",addressStreet:"",addressNumber:"",addressDistrict:"",addressCity:"",addressState:"",addressCountry:"Brasil",notes:""}),[]),m=y3({defaultValues:n||h});p.useEffect(()=>{n?m.reset(n):m.reset(h)},[n,m,h]);const f=(w,N)=>{m.setValue(w,N,{shouldDirty:!0})},b=w=>{if(w==null)return;if(typeof w!="string")return String(w);const N=w.trim();return N.length?N:void 0},v=w=>{const N=b(w.contactName??w.name);if(!N)throw new Error("Informe o Nome do Contato.");const j={contactName:N,name:N,status:w.status??Ht.LEAD,email:b(w.email),phone:b(w.phone),role:b(w.role),companyName:b(w.companyName),cnpj:b(w.cnpj),origin:b(w.origin),notes:b(w.notes),addressZipcode:b(w.addressZipcode),addressStreet:b(w.addressStreet),addressNumber:b(w.addressNumber),addressDistrict:b(w.addressDistrict),addressCity:b(w.addressCity),addressState:b(w.addressState),addressCountry:b(w.addressCountry)??"Brasil",ownerUserId:b(w.ownerUserId)};return Object.keys(j).forEach(S=>j[S]===void 0&&delete j[S]),j},g=async w=>{try{const N=v(w);let j;n?.id?(j=(await ke.put(`/clients/${n.id}`,N)).data,Ie.success("Cliente atualizado!")):(j=(await ke.post("/clients",N)).data,Ie.success("Cliente criado!")),i(j),s(!1)}catch(N){const j=N?.response?.data?.message,S=Array.isArray(j)?j.join(", "):j||N?.message||"Erro ao salvar cliente";Ie.error(S),console.error("Erro ao salvar cliente:",N?.response?.data||N)}};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:n?"Editar Cliente":"Novo Cliente"}),e.jsx(_i,{children:n?"Atualize as informaes do cliente":"Adicione um novo cliente"})]}),e.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Informaes de Contato"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"contactName",children:"Nome do Contato *"}),e.jsx(Pe,{id:"contactName",...m.register("contactName",{required:!0}),placeholder:"Joo Silva",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"email",children:"Email"}),e.jsx(Pe,{id:"email",type:"email",...m.register("email"),placeholder:"joao@empresa.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"phone",children:"Telefone"}),e.jsx(Pe,{id:"phone",...m.register("phone"),placeholder:"(11) 98765-4321"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"role",children:"Cargo"}),e.jsx(Pe,{id:"role",...m.register("role"),placeholder:"Gerente de Marketing"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Informaes da Empresa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"companyName",children:"Nome da Empresa"}),e.jsx(Pe,{id:"companyName",...m.register("companyName"),placeholder:"Empresa Ltda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(Pe,{id:"cnpj",...m.register("cnpj"),placeholder:"00.000.000/0000-00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Status e Gesto"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"status",children:"Status *"}),e.jsxs(At,{value:m.watch("status")||Ht.LEAD,onValueChange:w=>f("status",w),children:[e.jsx(Et,{id:"status",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:Ht.LEAD,children:"Lead"}),e.jsx(De,{value:Ht.PROSPECT,children:"Prospect"}),e.jsx(De,{value:Ht.CLIENTE,children:"Cliente"}),e.jsx(De,{value:Ht.INATIVO,children:"Inativo"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"origin",children:"Origem"}),e.jsx(Pe,{id:"origin",...m.register("origin"),placeholder:"Indicao, Website..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"ownerUserId",children:"Responsvel Interno"}),e.jsxs(At,{value:m.watch("ownerUserId")||"none",onValueChange:w=>f("ownerUserId",w==="none"?void 0:w),children:[e.jsx(Et,{id:"ownerUserId",children:e.jsx(Pt,{placeholder:c?"Carregando...":"Selecione um responsvel"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"none",children:"Nenhum"}),l.map(w=>e.jsx(De,{value:w.id,children:w.name},w.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"addressZipcode",children:"CEP"}),e.jsx(Pe,{id:"addressZipcode",...m.register("addressZipcode"),placeholder:"01310-100"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{htmlFor:"addressStreet",children:"Rua"}),e.jsx(Pe,{id:"addressStreet",...m.register("addressStreet"),placeholder:"Av. Paulista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"addressNumber",children:"Nmero"}),e.jsx(Pe,{id:"addressNumber",...m.register("addressNumber"),placeholder:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"addressDistrict",children:"Bairro"}),e.jsx(Pe,{id:"addressDistrict",...m.register("addressDistrict"),placeholder:"Bela Vista"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"addressCity",children:"Cidade"}),e.jsx(Pe,{id:"addressCity",...m.register("addressCity"),placeholder:"So Paulo"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"addressState",children:"Estado"}),e.jsxs(At,{value:m.watch("addressState")||"",onValueChange:w=>f("addressState",w),children:[e.jsx(Et,{id:"addressState",children:e.jsx(Pt,{placeholder:"UF"})}),e.jsx(kt,{children:e2.map(w=>e.jsx(De,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{htmlFor:"addressCountry",children:"Pas"}),e.jsx(Pe,{id:"addressCountry",...m.register("addressCountry"),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"notes",children:"Observaes Internas"}),e.jsx(Ei,{id:"notes",...m.register("notes"),placeholder:"Anotaes internas...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(ne,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:m.formState.isSubmitting,children:"Cancelar"}),e.jsx(ne,{type:"submit",disabled:m.formState.isSubmitting,children:m.formState.isSubmitting?"Salvando...":n?"Atualizar Cliente":"Salvar Cliente"})]})]})]})})}function po(t){return{...t,totalAmount:typeof t.totalAmount=="string"?Number(t.totalAmount):t.totalAmount,discountAmount:typeof t.discountAmount=="string"?Number(t.discountAmount):t.discountAmount,discountPercent:typeof t.discountPercent=="string"?Number(t.discountPercent):t.discountPercent,startDate:t.startDate?new Date(t.startDate):void 0,endDate:t.endDate?new Date(t.endDate):void 0,validUntil:t.validUntil?new Date(t.validUntil):void 0,approvedAt:t.approvedAt?new Date(t.approvedAt):void 0,rejectedAt:t.rejectedAt?new Date(t.rejectedAt):void 0,createdAt:t.createdAt?new Date(t.createdAt):void 0,updatedAt:t.updatedAt?new Date(t.updatedAt):void 0,conditionsText:typeof t.conditionsText=="string"?t.conditionsText.replace(/\\n/g,`
`):t.conditionsText,items:Array.isArray(t.items)?t.items.map(s=>({...s,discountApplyTo:s.discountApplyTo??zn.TOTAL,unitPrice:typeof s.unitPrice=="string"?Number(s.unitPrice):s.unitPrice,totalPrice:typeof s.totalPrice=="string"?Number(s.totalPrice):s.totalPrice,discountAmount:typeof s.discountAmount=="string"?Number(s.discountAmount):s.discountAmount,discountPercent:typeof s.discountPercent=="string"?Number(s.discountPercent):s.discountPercent,startDate:s.startDate?new Date(s.startDate):void 0,endDate:s.endDate?new Date(s.endDate):void 0,createdAt:s.createdAt?new Date(s.createdAt):void 0,updatedAt:s.updatedAt?new Date(s.updatedAt):void 0})):t.items}}function V2(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(t.page??1),[m,f]=p.useState(t.pageSize??40),[b,v]=p.useState(1),[g,w]=p.useState(null),[N,j]=p.useState(!1),[S,A]=p.useState(null),D=p.useRef(null),E=p.useMemo(()=>{const U={...t};return U.status==="all"&&delete U.status,Array.isArray(U.status)&&U.status.length===0&&delete U.status,typeof U.search=="string"&&!U.search.trim()&&delete U.search,U},[t]),T=async()=>{try{j(!0),A(null);const M=(await ke.get("/proposals",{params:E})).data,B=Array.isArray(M)?M:M.data,ee=Array.isArray(M)?B.length:M.total??B.length;if(n(B.map(po)),l(ee),Array.isArray(M))h(t.page??1),f(t.pageSize??B.length),v(1),w(null);else{const me=M.pageSize??t.pageSize??40,J=M.totalPages??Math.max(1,Math.ceil(ee/me));h(M.page??t.page??1),f(me),v(J),w(M.stats??null)}}catch(U){A(U)}finally{j(!1)}};p.useEffect(()=>{D.current=()=>{T()}},[E.search,E.status,E.clientId,E.responsibleUserId,E.createdFrom,E.createdTo,E.orderBy,E.sortOrder,E.page,E.pageSize]),p.useEffect(()=>{let U=0;const M=()=>{if(typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible")return;const B=Date.now();B-U<800||(U=B,D.current?.())};return window.addEventListener("focus",M),document.addEventListener("visibilitychange",M),()=>{window.removeEventListener("focus",M),document.removeEventListener("visibilitychange",M)}},[]),p.useEffect(()=>{const U=window.setInterval(()=>{typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible"||D.current?.()},15e3);return()=>window.clearInterval(U)},[]);const k=async U=>{const M=await ke.get(`/proposals/${U}`);return po(M.data)},R=async U=>{try{const M=await ke.post("/proposals",U);if(!M.data||typeof M.data!="object")throw new Error("Resposta invlida do servidor (Proxy Error)");const B=po(M.data);return n(ee=>[B,...ee]),B}catch(M){throw console.error("Erro ao criar proposta:",M),M}},O=async(U,M)=>{try{const B=await ke.put(`/proposals/${U}`,M);if(!B.data||typeof B.data!="object")throw new Error("Resposta invlida do servidor");const ee=po(B.data);return n(me=>me.map(J=>J.id===U?ee:J)),ee}catch(B){throw console.error("Erro ao atualizar proposta:",B),B}},H=async(U,M)=>{const B=await ke.patch(`/proposals/${U}/status`,{status:M}),ee=po(B.data);return n(me=>me.map(J=>J.id===U?ee:J)),ee},te=async U=>{const M=await ke.post(`/proposals/${U}/duplicate`);return n(B=>[po(M.data),...B]),po(M.data)},X=async U=>{const M=await ke.post(`/proposals/${U}/approve`),B=po(M.data);return n(ee=>ee.map(me=>me.id===U?B:me)),B},q=async U=>(await ke.get(`/proposals/${U}/pdf`)).data;return p.useEffect(()=>{T()},[E.search,E.status,E.clientId,E.responsibleUserId,E.createdFrom,E.createdTo,E.orderBy,E.sortOrder,E.page,E.pageSize]),{proposals:s,total:i,page:c,pageSize:m,totalPages:b,stats:g??void 0,loading:N,error:S,refetch:T,getProposalById:k,createProposal:R,updateProposal:O,updateProposalStatus:H,duplicateProposal:te,approveProposal:X,getProposalPdf:q}}function l0({status:t}){const s=i=>{switch(i){case Jt.APROVADA:return"bg-green-100 text-green-800";case Jt.ENVIADA:return"bg-blue-100 text-blue-800";case Jt.RASCUNHO:return"bg-gray-100 text-gray-800";case Jt.REPROVADA:return"bg-red-100 text-red-800";case Jt.EXPIRADA:return"bg-orange-100 text-orange-800"}},n=i=>{switch(i){case Jt.APROVADA:return"Aprovada";case Jt.ENVIADA:return"Enviada";case Jt.RASCUNHO:return"Rascunho";case Jt.REPROVADA:return"Reprovada";case Jt.EXPIRADA:return"Expirada"}};return e.jsx(ht,{className:s(t),children:n(t)})}function j3({clientId:t,onDocumentAdded:s}){const[n,i]=p.useState([]),[l,c]=p.useState(!1),[h,m]=p.useState(!1),[f,b]=p.useState({documentType:"",file:null}),{ownersById:v}=lu(),g=p.useMemo(()=>T=>T?v.get(T)?.name||T:"",[v]),w=async()=>{try{c(!0);const T=await ke.get(`/clients/${t}/documents`);i(T.data??[])}catch{Ie.error("Erro ao carregar documentos do cliente"),i([])}finally{c(!1)}};p.useEffect(()=>{w()},[t]);const N=T=>{b(k=>({...k,file:T}))},j=async()=>{try{if(!f.file){Ie.error("Selecione um arquivo para upload");return}const T=new FormData;T.append("file",f.file),T.append("documentType",(f.documentType||"OUTRO").toString());const R=(await ke.post(`/clients/${t}/documents`,T,{headers:{"Content-Type":"multipart/form-data"}})).data;Ie.success("Documento enviado!"),m(!1),b({documentType:"",file:null}),R?(i(O=>[R,...O]),s?.(R)):await w()}catch(T){const k=T?.response?.data?.message||"Erro ao enviar documento";Ie.error(k)}},S=(T,k)=>{const R=window.URL.createObjectURL(T),O=document.createElement("a");O.href=R,O.download=k||"documento",document.body.appendChild(O),O.click(),O.remove(),window.URL.revokeObjectURL(R)},A=async T=>{try{const k=await ke.get(`/clients/${t}/documents/${T.id}/download`,{responseType:"blob"});S(k.data,T.fileName)}catch{Ie.error("Erro ao baixar documento")}},D=async T=>{try{const k=await ke.get(`/clients/${t}/documents/${T.id}/download`,{responseType:"blob"}),R=window.URL.createObjectURL(k.data);window.open(R,"_blank","noopener,noreferrer"),setTimeout(()=>window.URL.revokeObjectURL(R),6e4)}catch{Ie.error("Erro ao visualizar documento")}},E=T=>{const k=new Date(T);return isNaN(k.getTime())?"":k.toLocaleDateString("pt-BR")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:"Documentos"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Gerencie contratos, propostas e outros documentos"})]}),e.jsxs(ne,{onClick:()=>m(!0),children:[e.jsx(eh,{className:"w-4 h-4 mr-2"}),"Upload Documento"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"text-gray-900",children:"Documentos Anexados"})}),l?e.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Carregando documentos..."}):n.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(gr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhum documento anexado"}),e.jsx("p",{className:"text-sm mt-1",children:"Faa upload de documentos relacionados a este cliente"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Arquivo"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Upload por"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(T=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:T.fileName})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:T.documentType}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:g(T.uploadedByUserId)}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:E(T.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>D(T),title:"Visualizar",children:e.jsx(Za,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>A(T),title:"Baixar",children:e.jsx(dl,{className:"w-4 h-4"})})]})})]},T.id))})]})})]}),e.jsx(Dn,{open:h,onOpenChange:m,children:e.jsxs(In,{className:"sm:max-w-md",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:"Upload de Documento"}),e.jsx(_i,{children:"Adicione um documento relacionado a este cliente"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"documentType",children:"Tipo de Documento"}),e.jsx(Pe,{id:"documentType",value:f.documentType,onChange:T=>b(k=>({...k,documentType:T.target.value})),placeholder:"Ex: Contrato, Proposta, CNPJ, etc"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"file",children:"Arquivo"}),e.jsx(Pe,{id:"file",type:"file",onChange:T=>N(T.target.files?.[0]||null),accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Formatos aceitos: PDF, DOC, DOCX, XLS, XLSX, PNG, JPG"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(ne,{variant:"outline",onClick:()=>m(!1),children:"Cancelar"}),e.jsx(ne,{onClick:j,children:"Enviar"})]})]})]})})]})}function w3(t){return t.client?e.jsx(N3,{...t,client:t.client}):null}function N3({open:t,onOpenChange:s,client:n,activeTab:i="resumo",onActiveTabChange:l}){const{ownersById:c}=lu(),h=n.ownerUserId?c.get(n.ownerUserId):null,{proposals:m,loading:f,error:b,refetch:v}=V2({clientId:n.id,pageSize:50}),g=A=>{switch(A){case Ht.CLIENTE:return"bg-green-100 text-green-800";case Ht.PROSPECT:return"bg-blue-100 text-blue-800";case Ht.LEAD:return"bg-yellow-100 text-yellow-800";case Ht.INATIVO:return"bg-gray-100 text-gray-800"}},w=A=>{switch(A){case Ht.CLIENTE:return"Cliente";case Ht.PROSPECT:return"Prospect";case Ht.LEAD:return"Lead";case Ht.INATIVO:return"Inativo"}},N=A=>{if(!A)return"-";const D=typeof A=="string"?new Date(A):A;return Number.isNaN(D.getTime())?"-":D.toLocaleDateString("pt-BR")},j=A=>{const D=typeof A=="number"?A:Number(A);return Number.isNaN(D)?"-":D.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},S=m.filter(A=>A.status===Jt.APROVADA).length;return e.jsx(Kg,{open:t,onOpenChange:s,children:e.jsxs(Xg,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsx(Yg,{children:e.jsx(Qg,{children:"Detalhes do Cliente"})}),e.jsxs(ki,{value:i,onValueChange:A=>l?.(A),className:"mt-6",children:[e.jsxs(Ti,{className:"grid w-full grid-cols-4",children:[e.jsx(on,{value:"resumo",children:"Resumo"}),e.jsx(on,{value:"documentos",children:"Documentos"}),e.jsx(on,{value:"propostas",children:"Propostas"}),e.jsx(on,{value:"atividades",children:"Atividades"})]}),e.jsxs(_n,{value:"resumo",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-2xl",children:n.contactName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-1",children:n.contactName}),n.role&&e.jsx("p",{className:"text-gray-600 text-sm",children:n.role}),n.companyName&&e.jsx("p",{className:"text-gray-900 text-sm mt-1",children:n.companyName})]})]}),e.jsx(ht,{className:g(n.status),children:w(n.status)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Informaes de Contato"}),n.email&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Nc,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:n.email})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(sE,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:n.phone})]}),n.cnpj&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(wh,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["CNPJ: ",n.cnpj]})]})]}),(n.addressStreet||n.addressCity||n.addressState)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Endereo"}),e.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[e.jsx(Ci,{className:"w-4 h-4 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[n.addressStreet&&n.addressNumber&&e.jsxs("div",{children:[n.addressStreet,", ",n.addressNumber]}),n.addressDistrict&&e.jsx("div",{children:n.addressDistrict}),n.addressCity&&n.addressState&&e.jsxs("div",{children:[n.addressCity," - ",n.addressState]}),n.addressZipcode&&e.jsxs("div",{children:["CEP: ",n.addressZipcode]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Gesto e Origem"}),h&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(AE,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Responsvel: "}),e.jsx("span",{children:h.name})]})]}),n.origin&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(gr,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Origem: "}),e.jsx("span",{children:n.origin})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Ud,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Cliente desde: "}),e.jsx("span",{children:N(n.createdAt)})]})]})]}),n.notes&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Observaes Internas"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:n.notes})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-indigo-600 text-sm mb-1",children:"Propostas"}),e.jsx("p",{className:"text-gray-900",children:f?"...":m.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Propostas Aprovadas"}),e.jsx("p",{className:"text-gray-900",children:f?"...":S})]})]})]}),e.jsx(_n,{value:"documentos",className:"mt-6",children:e.jsx(j3,{clientId:n.id})}),e.jsx(_n,{value:"propostas",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Propostas do Cliente"}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>v(),disabled:f,children:"Recarregar"})]}),b&&e.jsx("div",{className:"border border-red-200 bg-red-50 text-red-700 rounded-lg p-4 text-sm",children:"Erro ao carregar propostas."}),f?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Carregando propostas..."})}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(gr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhuma proposta cadastrada"})]}):e.jsx("div",{className:"space-y-3",children:m.map(A=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:A.title||`Proposta ${A.id.slice(0,6)}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Criada em ",N(A.createdAt)]})]}),e.jsx(l0,{status:A.status})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",j(A.totalAmount)]})]},A.id))})]})}),e.jsx(_n,{value:"atividades",className:"mt-6",children:e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ud,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"mb-2",children:"Atividades e Histrico"}),e.jsx("p",{className:"text-sm",children:"TODO: Implementar integrao com ActivityLog"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Logs de aes realizadas neste cliente (edies, propostas criadas, etc.)"})]})})]})]})})}function C3({clients:t,onViewDetails:s,onEditClient:n,onViewClientDocuments:i,onDeleteClient:l,page:c,pageSize:h,total:m,onPageChange:f}){const{ownersById:b}=lu(),v=N=>{switch(N){case Ht.CLIENTE:return"bg-green-100 text-green-800";case Ht.PROSPECT:return"bg-blue-100 text-blue-800";case Ht.LEAD:return"bg-yellow-100 text-yellow-800";case Ht.INATIVO:return"bg-gray-100 text-gray-800"}},g=N=>{switch(N){case Ht.CLIENTE:return"Cliente";case Ht.PROSPECT:return"Prospect";case Ht.LEAD:return"Lead";case Ht.INATIVO:return"Inativo"}},w=m&&h?Math.max(1,Math.ceil(m/h)):1;return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Email/Telefone"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Responsvel"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Origem"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Propostas"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(N=>{const j=N.ownerUserId?b.get(N.ownerUserId):null,S=N.proposalsCount??0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center",children:N.contactName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900",children:N.contactName}),N.role&&e.jsx("p",{className:"text-gray-500 text-xs",children:N.role})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[N.companyName&&e.jsx("p",{className:"text-gray-900",children:N.companyName}),N.cnpj&&e.jsx("p",{className:"text-gray-500 text-xs",children:N.cnpj}),!N.companyName&&!N.cnpj&&e.jsx("span",{className:"text-gray-400",children:""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[N.email&&e.jsx("div",{className:"text-gray-900",children:N.email}),N.phone&&e.jsx("div",{className:"text-gray-500",children:N.phone}),!N.email&&!N.phone&&e.jsx("span",{className:"text-gray-400",children:""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(ht,{className:v(N.status),children:g(N.status)})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j?.name||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:N.origin||""}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:S}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>s(N),title:"Ver detalhes",children:e.jsx(Za,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>n(N),title:"Editar cliente",children:e.jsx(bl,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(N),title:"Ver documentos",children:e.jsx(gr,{className:"w-4 h-4"})}),l&&e.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>l(N.id),title:"Excluir cliente",children:e.jsx(xa,{className:"w-4 h-4"})})]})})]},N.id)})})]}),t.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"Nenhum cliente encontrado"})}),m!==void 0&&c!==void 0&&h!==void 0&&f&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 text-sm text-gray-600 border-t border-gray-200",children:[e.jsxs("span",{children:["Pgina ",c," de ",w]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{variant:"outline",size:"sm",disabled:c<=1,onClick:()=>f(c-1),children:"Anterior"}),e.jsx(ne,{variant:"outline",size:"sm",disabled:c>=w,onClick:()=>f(c+1),children:"Prxima"})]})]})]})}function _3({searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:i,ownerFilter:l,onOwnerChange:c}){const{owners:h}=lu();return e.jsx(Ue,{children:e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Pe,{value:t,onChange:m=>s(m.target.value),placeholder:"Buscar clientes...",className:"pl-10"})]}),e.jsxs(At,{value:n,onValueChange:i,children:[e.jsx(Et,{className:"w-full lg:w-48",children:e.jsx(Pt,{placeholder:"Status"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos os status"}),e.jsx(De,{value:Ht.LEAD,children:"Lead"}),e.jsx(De,{value:Ht.PROSPECT,children:"Prospect"}),e.jsx(De,{value:Ht.CLIENTE,children:"Cliente"}),e.jsx(De,{value:Ht.INATIVO,children:"Inativo"})]})]}),e.jsxs(At,{value:l,onValueChange:c,children:[e.jsx(Et,{className:"w-full lg:w-48",children:e.jsx(Pt,{placeholder:"Responsvel"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos os responsveis"}),h.map(m=>e.jsx(De,{value:m.id,children:m.name},m.id))]})]})]})})})}function S3(){const[t,s]=p.useState(""),[n,i]=p.useState("all"),[l,c]=p.useState("all"),[h,m]=p.useState(1),f=40;p.useEffect(()=>{m(1)},[t,n,l]);const{clients:b,total:v,loading:g,error:w,refetch:N}=KL({search:t||void 0,status:n==="all"?void 0:n,ownerUserId:l==="all"?void 0:l,page:h,pageSize:f}),[j,S]=p.useState(!1),[A,D]=p.useState(null),[E,T]=p.useState(null),[k,R]=p.useState("resumo"),O={total:v||b.length,ativos:b.filter(B=>B.status===Ht.CLIENTE).length,prospects:b.filter(B=>B.status===Ht.PROSPECT).length,leads:b.filter(B=>B.status===Ht.LEAD).length},H=()=>{N(),S(!1),D(null)},te=async B=>{if(confirm("Deseja realmente excluir este cliente?"))try{await ke.delete(`/clients/${B}`),Ie.success("Cliente excludo!"),N()}catch{Ie.error("Erro ao excluir cliente")}},X=()=>{D(null),S(!0)},q=B=>{D(B),S(!0)},U=B=>{T(B),R("resumo")},M=B=>{T(B),R("documentos")};return e.jsxs("div",{className:"p-8",children:[g&&e.jsx("div",{children:"Carregando clientes..."}),!g&&w&&e.jsx("div",{children:"Erro ao carregar clientes."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Clientes"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie clientes e anunciantes (Client)"})]}),e.jsxs(ne,{className:"gap-2",onClick:X,children:[e.jsx(Ss,{className:"w-4 h-4"}),"Novo Cliente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total de Clientes"}),e.jsx("p",{className:"text-gray-900",children:O.total})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i(Ht.CLIENTE),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Clientes Ativos"}),e.jsx("p",{className:"text-gray-900",children:O.ativos})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i(Ht.PROSPECT),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Prospects"}),e.jsx("p",{className:"text-gray-900",children:O.prospects})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i(Ht.LEAD),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Leads"}),e.jsx("p",{className:"text-gray-900",children:O.leads})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx(_3,{searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:i,ownerFilter:l,onOwnerChange:c})}),(t||n!=="all"||l!=="all")&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[b.length," ",b.length===1?"cliente encontrado":"clientes encontrados"]})}),e.jsx(Ue,{children:e.jsx(C3,{clients:b,onViewDetails:U,onEditClient:q,onViewClientDocuments:M,onDeleteClient:te,page:h,pageSize:f,total:v,onPageChange:m})}),e.jsx(b3,{open:j,onOpenChange:B=>{S(B),B||D(null)},client:A,onSave:H}),e.jsx(w3,{open:!!E,onOpenChange:B=>{B||T(null)},client:E,activeTab:k,onActiveTabChange:R})]})}var A3=Symbol("radix.slottable");function P3(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=A3,s}var H2="AlertDialog",[E3]=vr(H2,[NN]),Di=NN(),W2=t=>{const{__scopeAlertDialog:s,...n}=t,i=Di(s);return e.jsx(wg,{...i,...n,modal:!0})};W2.displayName=H2;var k3="AlertDialogTrigger",T3=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...i}=t,l=Di(n);return e.jsx(iR,{...l,...i,ref:s})});T3.displayName=k3;var D3="AlertDialogPortal",q2=t=>{const{__scopeAlertDialog:s,...n}=t,i=Di(s);return e.jsx(Ng,{...i,...n})};q2.displayName=D3;var I3="AlertDialogOverlay",Z2=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...i}=t,l=Di(n);return e.jsx(nu,{...l,...i,ref:s})});Z2.displayName=I3;var jc="AlertDialogContent",[R3,M3]=E3(jc),O3=P3("AlertDialogContent"),G2=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:i,...l}=t,c=Di(n),h=p.useRef(null),m=Wt(s,h),f=p.useRef(null);return e.jsx(nR,{contentName:jc,titleName:K2,docsSlug:"alert-dialog",children:e.jsx(R3,{scope:n,cancelRef:f,children:e.jsxs(Cg,{role:"alertdialog",...c,...l,ref:m,onOpenAutoFocus:tt(l.onOpenAutoFocus,b=>{b.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:b=>b.preventDefault(),onInteractOutside:b=>b.preventDefault(),children:[e.jsx(O3,{children:i}),e.jsx(F3,{contentRef:h})]})})})});G2.displayName=jc;var K2="AlertDialogTitle",X2=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...i}=t,l=Di(n);return e.jsx(_g,{...l,...i,ref:s})});X2.displayName=K2;var Y2="AlertDialogDescription",Q2=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...i}=t,l=Di(n);return e.jsx(Sg,{...l,...i,ref:s})});Q2.displayName=Y2;var L3="AlertDialogAction",J2=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...i}=t,l=Di(n);return e.jsx(Bh,{...l,...i,ref:s})});J2.displayName=L3;var eC="AlertDialogCancel",tC=p.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...i}=t,{cancelRef:l}=M3(eC,n),c=Di(n),h=Wt(s,l);return e.jsx(Bh,{...c,...i,ref:h})});tC.displayName=eC;var F3=({contentRef:t})=>{const s=`\`${jc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${jc}\` by passing a \`${Y2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${jc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},$3=W2,z3=q2,B3=Z2,U3=G2,V3=J2,H3=tC,W3=X2,q3=Q2;function Z3({...t}){return e.jsx($3,{"data-slot":"alert-dialog",...t})}function G3({...t}){return e.jsx(z3,{"data-slot":"alert-dialog-portal",...t})}function K3({className:t,...s}){return e.jsx(B3,{"data-slot":"alert-dialog-overlay",className:pt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function X3({className:t,...s}){return e.jsxs(G3,{children:[e.jsx(K3,{}),e.jsx(U3,{"data-slot":"alert-dialog-content",className:pt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function Y3({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:pt("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Q3({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:pt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function J3({className:t,...s}){return e.jsx(W3,{"data-slot":"alert-dialog-title",className:pt("text-lg font-semibold",t),...s})}function e6({className:t,...s}){return e.jsx(q3,{"data-slot":"alert-dialog-description",className:pt("text-muted-foreground text-sm",t),...s})}function t6({className:t,...s}){return e.jsx(V3,{className:pt(rg(),t),...s})}function n6({className:t,...s}){return e.jsx(H3,{className:pt(rg({variant:"outline"}),t),...s})}const Fx="app:data-changed";function Qf(t,s){if(typeof window>"u")return;const n={topic:t,payload:s,ts:Date.now()};window.dispatchEvent(new CustomEvent(Fx,{detail:n}))}function s6(t,s){if(typeof window>"u")return()=>{};const n=i=>{const l=i;l?.detail&&l.detail.topic===t&&s(l.detail)};return window.addEventListener(Fx,n),()=>window.removeEventListener(Fx,n)}const r6={};function Jf(t){return{...t,basePrice:typeof t?.basePrice=="string"?parseFloat(t.basePrice):typeof t?.basePrice=="number"?t.basePrice:0}}function Ob(t){return{total:t.length,produtos:t.filter(s=>s.type===es.PRODUTO).length,servicos:t.filter(s=>s.type===es.SERVICO).length,adicionais:t.filter(s=>s.isAdditional).length}}function nC(t=r6){const[s,n]=p.useState([]),[i,l]=p.useState(!1),[c,h]=p.useState(null),[m,f]=p.useState(0),[b,v]=p.useState(1),[g,w]=p.useState(40),[N,j]=p.useState(1),[S,A]=p.useState({total:0,produtos:0,servicos:0,adicionais:0}),D=p.useMemo(()=>{const O={...t};return O.page==null&&(O.page=1),O.pageSize==null&&(O.pageSize=40),O.type==="adicional"&&(O.isAdditional=!0,delete O.type),O.type&&!Object.values(es).includes(O.type)&&delete O.type,typeof O.search=="string"&&O.search.trim()===""&&delete O.search,typeof O.category=="string"&&O.category.trim()===""&&delete O.category,O},[t]),E=p.useCallback(async()=>{try{l(!0),h(null);const H=(await ke.get("/products",{params:D})).data,te=Array.isArray(H)?H:H?.data??H?.items??[],X=Array.isArray(te)?te.map(Jf):[];n(X);const q=Array.isArray(H)?X.length:typeof H?.total=="number"?H.total:X.length,U=Array.isArray(H)?D.page:H?.page??D.page,M=Array.isArray(H)?D.pageSize:H?.pageSize??D.pageSize,B=Array.isArray(H)?Math.max(1,Math.ceil(q/M)):H?.totalPages??Math.max(1,Math.ceil(q/M));f(q),v(U),w(M),j(B);const ee=Array.isArray(H)?Ob(X):H?.stats;A(ee?{total:typeof ee.total=="number"?ee.total:q,produtos:typeof ee.produtos=="number"?ee.produtos:0,servicos:typeof ee.servicos=="number"?ee.servicos:0,adicionais:typeof ee.adicionais=="number"?ee.adicionais:0}:Ob(X))}catch(O){h(O),n([]),f(0),j(1),A({total:0,produtos:0,servicos:0,adicionais:0})}finally{l(!1)}},[D]),T=p.useCallback(async O=>{const H=await ke.post("/products",O),te=Jf(H.data);return Qf("products"),await E(),te},[E]),k=p.useCallback(async(O,H)=>{const te=await ke.put(`/products/${O}`,H),X=Jf(te.data);return Qf("products"),await E(),X},[E]),R=p.useCallback(async O=>{await ke.delete(`/products/${O}`),Qf("products"),await E()},[E]);return p.useEffect(()=>{E()},[E]),p.useEffect(()=>s6("products",()=>{E()}),[E]),{products:s,loading:i,error:c,refetch:E,createProduct:T,updateProduct:k,deleteProduct:R,total:m,page:b,pageSize:g,totalPages:N,stats:S}}function a6({searchQuery:t,onSearchChange:s,typeFilter:n,onTypeChange:i}){return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{placeholder:"Buscar por nome, descrio ou categoria...",value:t,onChange:l=>s(l.target.value),className:"pl-10"})]}),e.jsxs(At,{value:n,onValueChange:i,children:[e.jsx(Et,{className:"w-full lg:w-48",children:e.jsx(Pt,{placeholder:"Tipo"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos os tipos"}),e.jsx(De,{value:es.PRODUTO,children:"Produtos"}),e.jsx(De,{value:es.SERVICO,children:"Servios"}),e.jsx(De,{value:"adicional",children:"Adicionais"})]})]})]})}function i6({products:t,onEditProduct:s,onDeleteProduct:n}){const i=c=>c===es.PRODUTO?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",l=c=>{switch(c){case Ts.UNITARIO:return"Unitrio";case Ts.A_PARTIR_DE:return"A partir de";case Ts.PACOTE:return"Pacote"}};return t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum produto/servio encontrado"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>e.jsx(Ue,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(ht,{className:i(c.type),children:c.type===es.PRODUTO?"Produto":"Servio"}),c.isAdditional&&e.jsx(ht,{variant:"outline",className:"text-xs",children:"Adicional"})]}),e.jsx("h3",{className:"text-gray-900 mb-1",children:c.name}),c.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:c.description}),c.category&&e.jsx("p",{className:"text-gray-500 text-xs mb-3",children:c.category})]})}),e.jsx("div",{className:"border-t border-gray-100 pt-4 mb-4",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-gray-900",children:["R$ ",Number(c.basePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",l(c.priceType),")"]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ne,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(c),children:[e.jsx(bl,{className:"w-4 h-4 mr-2"}),"Editar"]}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>n(c),"aria-label":"Excluir produto",children:e.jsx(xa,{className:"w-4 h-4"})})]})]})},c.id))})}var ep="Checkbox",[o6]=vr(ep),[l6,c0]=o6(ep);function c6(t){const{__scopeCheckbox:s,checked:n,children:i,defaultChecked:l,disabled:c,form:h,name:m,onCheckedChange:f,required:b,value:v="on",internal_do_not_use_render:g}=t,[w,N]=Qr({prop:n,defaultProp:l??!1,onChange:f,caller:ep}),[j,S]=p.useState(null),[A,D]=p.useState(null),E=p.useRef(!1),T=j?!!h||!!j.closest("form"):!0,k={checked:w,disabled:c,setChecked:N,control:j,setControl:S,name:m,form:h,value:v,hasConsumerStoppedPropagationRef:E,required:b,defaultChecked:wo(l)?!1:l,isFormControl:T,bubbleInput:A,setBubbleInput:D};return e.jsx(l6,{scope:s,...k,children:d6(g)?g(k):i})}var sC="CheckboxTrigger",rC=p.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...i},l)=>{const{control:c,value:h,disabled:m,checked:f,required:b,setControl:v,setChecked:g,hasConsumerStoppedPropagationRef:w,isFormControl:N,bubbleInput:j}=c0(sC,t),S=Wt(l,v),A=p.useRef(f);return p.useEffect(()=>{const D=c?.form;if(D){const E=()=>g(A.current);return D.addEventListener("reset",E),()=>D.removeEventListener("reset",E)}},[c,g]),e.jsx(gt.button,{type:"button",role:"checkbox","aria-checked":wo(f)?"mixed":f,"aria-required":b,"data-state":dC(f),"data-disabled":m?"":void 0,disabled:m,value:h,...i,ref:S,onKeyDown:tt(s,D=>{D.key==="Enter"&&D.preventDefault()}),onClick:tt(n,D=>{g(E=>wo(E)?!0:!E),j&&N&&(w.current=D.isPropagationStopped(),w.current||D.stopPropagation())})})});rC.displayName=sC;var aC=p.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:i,checked:l,defaultChecked:c,required:h,disabled:m,value:f,onCheckedChange:b,form:v,...g}=t;return e.jsx(c6,{__scopeCheckbox:n,checked:l,defaultChecked:c,disabled:m,required:h,onCheckedChange:b,name:i,form:v,value:f,internal_do_not_use_render:({isFormControl:w})=>e.jsxs(e.Fragment,{children:[e.jsx(rC,{...g,ref:s,__scopeCheckbox:n}),w&&e.jsx(cC,{__scopeCheckbox:n})]})})});aC.displayName=ep;var iC="CheckboxIndicator",oC=p.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:i,...l}=t,c=c0(iC,n);return e.jsx(Js,{present:i||wo(c.checked)||c.checked===!0,children:e.jsx(gt.span,{"data-state":dC(c.checked),"data-disabled":c.disabled?"":void 0,...l,ref:s,style:{pointerEvents:"none",...t.style}})})});oC.displayName=iC;var lC="CheckboxBubbleInput",cC=p.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:i,hasConsumerStoppedPropagationRef:l,checked:c,defaultChecked:h,required:m,disabled:f,name:b,value:v,form:g,bubbleInput:w,setBubbleInput:N}=c0(lC,t),j=Wt(n,N),S=xg(c),A=hg(i);p.useEffect(()=>{const E=w;if(!E)return;const T=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(T,"checked").set,O=!l.current;if(S!==c&&R){const H=new Event("click",{bubbles:O});E.indeterminate=wo(c),R.call(E,wo(c)?!1:c),E.dispatchEvent(H)}},[w,S,c,l]);const D=p.useRef(wo(c)?!1:c);return e.jsx(gt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??D.current,required:m,disabled:f,name:b,value:v,form:g,...s,tabIndex:-1,ref:j,style:{...s.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});cC.displayName=lC;function d6(t){return typeof t=="function"}function wo(t){return t==="indeterminate"}function dC(t){return wo(t)?"indeterminate":t?"checked":"unchecked"}function _o({className:t,...s}){return e.jsx(aC,{"data-slot":"checkbox",className:pt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(oC,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Dr,{className:"size-3.5"})})})}function u6({open:t,onOpenChange:s,product:n,onSave:i}){const[l,c]=p.useState({name:"",description:"",category:"",type:es.PRODUTO,priceType:Ts.UNITARIO,basePrice:"",isAdditional:!1}),[h,m]=p.useState({});p.useEffect(()=>{c(n?{name:n.name,description:n.description||"",category:n.category||"",type:n.type,priceType:n.priceType,basePrice:n.basePrice.toString(),isAdditional:n.isAdditional}:{name:"",description:"",category:"",type:es.PRODUTO,priceType:Ts.UNITARIO,basePrice:"",isAdditional:!1}),m({})},[n,t]);const f=()=>{const g={};return l.name.trim()||(g.name="Nome  obrigatrio"),(!l.basePrice||parseFloat(l.basePrice)<=0)&&(g.basePrice="Preo deve ser maior que zero"),m(g),Object.keys(g).length===0},b=g=>{if(g.preventDefault(),!f())return;const w={name:l.name.trim(),description:l.description.trim()||void 0,category:l.category.trim()||void 0,type:l.type,priceType:l.priceType,basePrice:parseFloat(l.basePrice),isAdditional:l.isAdditional};n&&(w.id=n.id,w.updatedAt=new Date),i(w)},v=()=>{s(!1),m({})};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Bn,{children:e.jsx(Un,{children:n?"Editar Produto/Servio":"Cadastrar Produto/Servio"})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(we,{htmlFor:"type",children:["Tipo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:l.type,onValueChange:g=>c({...l,type:g}),children:[e.jsx(Et,{id:"type",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:es.PRODUTO,children:"Produto"}),e.jsx(De,{value:es.SERVICO,children:"Servio"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(we,{htmlFor:"name",children:["Nome ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Pe,{id:"name",placeholder:"Ex: Impresso de Lona",value:l.name,onChange:g=>c({...l,name:g.target.value})}),h.name&&e.jsx("p",{className:"text-red-500 text-sm",children:h.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"category",children:"Categoria"}),e.jsx(Pe,{id:"category",placeholder:"Ex: Material",value:l.category,onChange:g=>c({...l,category:g.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"description",children:"Descrio"}),e.jsx(Ei,{id:"description",placeholder:"Descreva o produto ou servio...",rows:3,value:l.description,onChange:g=>c({...l,description:g.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(we,{htmlFor:"priceType",children:["Tipo de Preo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:l.priceType,onValueChange:g=>c({...l,priceType:g}),children:[e.jsx(Et,{id:"priceType",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:Ts.UNITARIO,children:"Unitrio"}),e.jsx(De,{value:Ts.A_PARTIR_DE,children:"A partir de"}),e.jsx(De,{value:Ts.PACOTE,children:"Pacote"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(we,{htmlFor:"basePrice",children:["Preo Base (R$) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Pe,{id:"basePrice",type:"number",step:"0.01",min:"0",placeholder:"0,00",value:l.basePrice,onChange:g=>c({...l,basePrice:g.target.value})}),h.basePrice&&e.jsx("p",{className:"text-red-500 text-sm",children:h.basePrice})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{id:"isAdditional",checked:l.isAdditional,onCheckedChange:g=>c({...l,isAdditional:g===!0})}),e.jsx(we,{htmlFor:"isAdditional",className:"cursor-pointer",children:"Este  um item adicional (pode ser includo em propostas)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(ne,{type:"button",variant:"outline",onClick:v,children:"Cancelar"}),e.jsx(ne,{type:"submit",children:n?"Atualizar":"Salvar"})]})]})]})})}const ex=40;function m6(){const[t,s]=p.useState(""),[n,i]=p.useState("all"),[l,c]=p.useState(1),h=p.useMemo(()=>({search:t,type:n!=="all"?n:void 0,page:l,pageSize:ex}),[t,n,l]),{products:m,loading:f,error:b,createProduct:v,updateProduct:g,deleteProduct:w,total:N,totalPages:j,stats:S}=nC(h),[A,D]=p.useState(!1),[E,T]=p.useState(null),[k,R]=p.useState(null);p.useEffect(()=>{c(1)},[t,n]),p.useEffect(()=>{l>j&&c(j)},[l,j]);const O=N===0?0:(l-1)*ex+1,H=N===0?0:Math.min(l*ex,N),te=async B=>{try{E?.id?(await g(E.id,B),Ie.success("Produto atualizado com sucesso!")):(await v(B),Ie.success("Produto cadastrado com sucesso!")),D(!1),T(null)}catch{Ie.error("Erro ao salvar produto")}},X=()=>{T(null),D(!0)},q=B=>{T(B),D(!0)},U=B=>{R(B)},M=async()=>{if(k)try{await w(k.id),Ie.success("Produto excludo com sucesso!")}catch{Ie.error("Erro ao excluir produto")}finally{R(null)}};return e.jsxs("div",{className:"p-8",children:[f&&e.jsx("div",{children:"Carregando produtos..."}),!f&&b&&e.jsx("div",{children:"Erro ao carregar produtos."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Produtos e Servios"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie produtos e servios adicionais (Product)"})]}),e.jsxs(ne,{className:"gap-2",onClick:X,children:[e.jsx(Ss,{className:"w-4 h-4"}),"Novo Produto/Servio"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i("all"),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total"}),e.jsx("p",{className:"text-gray-900",children:S.total})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i(es.PRODUTO),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Produtos"}),e.jsx("p",{className:"text-gray-900",children:S.produtos})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i(es.SERVICO),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Servios"}),e.jsx("p",{className:"text-gray-900",children:S.servicos})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>i("adicional"),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Adicionais"}),e.jsx("p",{className:"text-gray-900",children:S.adicionais})]})})]}),e.jsx(Ue,{className:"mb-6",children:e.jsx(Ve,{className:"pt-6",children:e.jsx(a6,{searchQuery:t,onSearchChange:s,typeFilter:n,onTypeChange:B=>i(B)})})}),(t||n!=="all")&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[N," ",N===1?"produto/servio encontrado":"produtos/servios encontrados"]})}),e.jsx(i6,{products:m,onEditProduct:q,onDeleteProduct:U}),j>1&&e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3 mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",O,"-",H," de ",N,"  Pgina ",l," de ",j]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{variant:"outline",onClick:()=>c(B=>Math.max(1,B-1)),disabled:l<=1,children:"Anterior"}),e.jsx(ne,{variant:"outline",onClick:()=>c(B=>Math.min(j,B+1)),disabled:l>=j,children:"Prxima"})]})]}),e.jsx(u6,{open:A,onOpenChange:B=>{D(B),B||T(null)},product:E,onSave:te}),e.jsx(Z3,{open:!!k,onOpenChange:B=>{B||R(null)},children:e.jsxs(X3,{children:[e.jsxs(Y3,{children:[e.jsx(J3,{children:"Confirmar excluso"}),e.jsxs(e6,{children:["Tem certeza que deseja excluir o produto/servio ",e.jsx("strong",{children:k?.name}),"? Esta ao no pode ser desfeita."]})]}),e.jsxs(Q3,{children:[e.jsx(n6,{onClick:()=>R(null),children:"Cancelar"}),e.jsx(t6,{onClick:M,children:"Excluir"})]})]})})]})}const h6=[{value:Jt.RASCUNHO,label:"Rascunho"},{value:Jt.ENVIADA,label:"Enviada"},{value:Jt.APROVADA,label:"Aprovada"},{value:Jt.REPROVADA,label:"Reprovada"},{value:Jt.EXPIRADA,label:"Expirada"}];function p6({open:t,onOpenChange:s,filters:n,onApplyFilters:i}){const[l,c]=p.useState(n),[h,m]=p.useState([]),[f,b]=p.useState(!1);p.useEffect(()=>{c(n)},[n]),p.useEffect(()=>{t&&(async()=>{try{b(!0);const A=(await ke.get("/proposals/responsibles")).data,D=Array.isArray(A)?A:Array.isArray(A?.data)?A.data:[];m(D)}catch{m([])}finally{b(!1)}})()},[t]);const v=p.useMemo(()=>h.map(j=>({id:j.id,label:j.name||j.email||j.id})),[h]),g=j=>{c(S=>({...S,proposalStatuses:S.proposalStatuses.includes(j)?S.proposalStatuses.filter(A=>A!==j):[...S.proposalStatuses,j]}))},w=()=>{const j={proposalStatuses:[],campaignStatus:void 0,billingStatus:void 0,responsibleUserId:void 0,createdFrom:void 0,createdTo:void 0};c(j),i(j),s(!1)},N=()=>{i(l),s(!1)};return e.jsx(Kg,{open:t,onOpenChange:s,children:e.jsxs(Xg,{className:"w-[420px] sm:w-[540px] sm:max-w-[540px] p-0 gap-0",children:[e.jsxs(Yg,{className:"border-b px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ch,{className:"w-5 h-5 text-gray-600"}),e.jsx(Qg,{className:"text-base",children:"Filtros Avanados"})]}),e.jsx(m2,{children:"Refine a lista de propostas."})]}),e.jsxs("div",{className:"flex-1 overflow-auto px-6 py-5 space-y-7",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Status da Proposta"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:h6.map(j=>e.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-3 py-2",children:[e.jsx(_o,{id:`status-${j.value}`,checked:l.proposalStatuses.includes(j.value),onCheckedChange:()=>g(j.value)}),e.jsx(we,{htmlFor:`status-${j.value}`,className:"text-sm",children:j.label})]},j.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Responsvel"}),e.jsxs(At,{value:l.responsibleUserId||"all",onValueChange:j=>c(S=>({...S,responsibleUserId:j==="all"?void 0:j})),disabled:f,children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:f?"Carregando...":"Selecione o responsvel"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos"}),!f&&v.length===0?e.jsx(De,{value:"__none",disabled:!0,children:"Nenhum responsvel encontrado"}):null,v.map(j=>e.jsx(De,{value:j.id,children:j.label},j.id))]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Perodo de Criao"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(we,{htmlFor:"createdFrom",className:"text-sm text-gray-600",children:"De"}),e.jsx(Pe,{id:"createdFrom",type:"date",value:l.createdFrom||"",onChange:j=>c(S=>({...S,createdFrom:j.target.value||void 0}))})]}),e.jsxs("div",{children:[e.jsx(we,{htmlFor:"createdTo",className:"text-sm text-gray-600",children:"At"}),e.jsx(Pe,{id:"createdTo",type:"date",value:l.createdTo||"",onChange:j=>c(S=>({...S,createdTo:j.target.value||void 0}))})]})]})]})]}),e.jsxs(iL,{className:"border-t bg-background px-6 py-4 flex-row gap-3",children:[e.jsx(ne,{variant:"outline",onClick:w,className:"flex-1",children:"Limpar"}),e.jsx(ne,{onClick:N,className:"flex-1",children:"Aplicar Filtros"})]})]})})}function Fn(t,s=0){if(t==null)return s;if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=Number(t.replace(",","."));return Number.isFinite(n)?n:s}return s}function Dm(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const[n,i,l]=s.toISOString().split("T")[0].split("-");return`${l}/${i}/${n}`}function f6(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return s.toLocaleString("pt-BR")}catch{return""}}async function x6(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const s=document.createElement("textarea");return s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch{return!1}}}function g6({open:t,onOpenChange:s,proposal:n,onNavigate:i}){const l=n??{};p.useEffect(()=>{console.debug("ProposalDetailsDrawer mounted/render, proposal=",n,"open=",t)},[n?.id,t]);const[c,h]=p.useState(null),[m,f]=p.useState(null),[b,v]=p.useState(null),[g,w]=p.useState(!1),[N,j]=p.useState(!1),[S,A]=p.useState(!1),[D,E]=p.useState(null),[T,k]=p.useState(null),[R,O]=p.useState(null);p.useEffect(()=>{!n||!t||(O(null),k(null),E(null),h(l.publicHash??l.public_hash??null))},[n?.id,t]);const H=p.useMemo(()=>l.clientName||n?.client?.companyName||n?.client?.contactName||n?.client?.companyName||n?.client?.contactName||"-",[n,l.clientName]),te=p.useMemo(()=>{const Z=n?.client?.companyName??n?.client?.companyName,K=n?.client?.contactName??n?.client?.contactName;return Z&&K?K:null},[n]),X=p.useMemo(()=>l.responsibleUserName||n?.responsibleUser?.name||n?.responsibleUser?.name||"-",[n,l.responsibleUserName]),q=p.useMemo(()=>{if(!n)return[];const Z=l.items??l.proposalItems??[];return Array.isArray(Z)?Z:[]},[n]),U=p.useMemo(()=>n?.conditionsText?String(n.conditionsText).replace(/\\n/g,`
`):"",[n?.conditionsText]),M=p.useMemo(()=>Fn(l.totalAmount,0),[n]),B=Z=>Fn(Z,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),ee=typeof window<"u"?window.location.origin:"",me=p.useMemo(()=>c&&ee?`${ee}/p/${c}`:null,[c,ee]),J=p.useMemo(()=>!c||!m||!ee?null:`${ee}/p/${c}?m=${encodeURIComponent(m)}`,[c,m,ee]),fe=p.useMemo(()=>!c||!b||!ee?null:`${ee}/p/${c}?t=${encodeURIComponent(b)}`,[c,b,ee]),W=Z=>{if(!Z)return null;const K=String(Z),G=K.match(/filename\*=(?:UTF-8''|)([^;\n]+)/i);if(G?.[1]){const le=G[1].trim().replace(/^"|"$/g,"");try{return decodeURIComponent(le)}catch{return le}}const xe=K.match(/filename=([^;\n]+)/i);return xe?.[1]?xe[1].trim().replace(/^"|"$/g,""):null},ae=async()=>{if(n)try{A(!0),E(null);const Z=c||n.publicHash||n.public_hash||null,K=Z?`/public/proposals/${Z}/pdf`:`/proposals/${n.id}/pdf/file`,G=await ke.get(K,{responseType:"blob"}),xe=G.headers?.["content-disposition"]||G.headers?.["Content-Disposition"],le=W(xe)||`proposta-${n.id}.pdf`,ue=new Blob([G.data],{type:"application/pdf"}),Fe=window.URL.createObjectURL(ue),$e=document.createElement("a");$e.href=Fe,$e.download=le,$e.rel="noreferrer",document.body.appendChild($e),$e.click(),$e.remove(),window.URL.revokeObjectURL(Fe)}catch(Z){E(Z?.response?.data?.message||Z?.message||"No foi possvel baixar o PDF da proposta")}finally{A(!1)}},F=async(Z,K)=>{if(!Z)return;const G=await x6(Z);O(null),k(G?K:"Copie manualmente (no foi possvel copiar automaticamente).")},$=async()=>{if(n){k(null),O(null);try{w(!0);const Z=await ke.get(`/proposals/${n.id}/public-message-token`),K=Z.data?.token,G=Z.data?.publicHash;G&&h(G),K&&f(K);const xe=G??c;if(!xe||!K)throw new Error("No foi possvel gerar o link de mensagens.");if(!ee)throw new Error("No foi possvel determinar a URL do site.");await F(`${ee}/p/${xe}?m=${encodeURIComponent(K)}`,"Link de mensagens copiado.")}catch(Z){O(Z?.response?.data?.message||Z?.message||"Erro ao gerar link de mensagens")}finally{w(!1)}}},Y=async()=>{if(n){k(null),O(null);try{j(!0);const Z=await ke.get(`/proposals/${n.id}/public-action-token`),K=Z.data?.token,G=Z.data?.publicHash;G&&h(G),K&&v(K);const xe=G??c;if(!xe||!K)throw new Error("No foi possvel gerar o link de deciso.");if(!ee)throw new Error("No foi possvel determinar a URL do site.");await F(`${ee}/p/${xe}?t=${encodeURIComponent(K)}`,"Link de deciso copiado.")}catch(Z){O(Z?.response?.data?.message||Z?.message||"Erro ao gerar link de deciso")}finally{j(!1)}}};return t?e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsx(In,{className:"p-0 !w-[96vw] !max-w-[1400px] sm:!max-w-[1400px] h-[90vh] overflow-hidden",children:n?e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("h2",{className:"text-gray-900 truncate",children:n.title||"Proposta"}),e.jsx(l0,{status:l.status})]})}),e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Total"}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",B(M)]}),Fn(l.discountPercent,0)>0&&e.jsxs("p",{className:"text-green-600 text-sm",children:["Desconto: -",Fn(l.discountPercent,0),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:H}),te&&e.jsx("p",{className:"text-sm text-gray-600",children:te})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Responsvel"}),e.jsx("p",{className:"text-gray-900",children:X})]}),l.startDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Data de incio"}),e.jsx("p",{className:"text-gray-900",children:Dm(l.startDate)})]}),typeof n.assemblyMaxDays=="number"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Perodo mximo de montagem"}),e.jsxs("p",{className:"text-gray-900",children:[n.assemblyMaxDays," dias"]})]}),n.validUntil&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Validade"}),e.jsx("p",{className:"text-gray-900",children:Dm(n.validUntil)})]})]}),U&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Condies / Observaes"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:U})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-900 mb-4",children:["Itens da Proposta (",q.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[q.map((Z,K)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("p",{className:"text-gray-900 flex-1",children:Z.description||"Item"}),(()=>{const G=Math.max(1,Fn(Z.quantity,1)),xe=Fn(Z.discountPercent,0),le=Fn(Z.discountAmount,0),ue=Z.discountApplyTo??"TOTAL",Fe=ue==="RENT"?"no aluguel":ue==="COSTS"?"nos custos":"no total",$e=Fn(Z.unitPrice,0);let Ze=G*$e,Ye=0,Xe=0;const Je=Fn(Z.totalPrice??Z.total??Ze,0);if(Z.mediaUnitId){const dt=Fn(Z.occupationDays,0),Tt=Math.floor(dt/30),Ft=Math.round(dt%30/15),Q=Fn(Z.priceMonthSnapshot,0),pe=Fn(Z.priceBiweeklySnapshot,0),de=Fn(Z.productionCostSnapshot,0),Oe=Fn(Z.installationCostSnapshot,0),oe=!!Z.clientProvidesBanner,be=Tt*Q+Ft*pe,Me=Oe+(oe?0:de);Ye=be*G,Xe=Me*G,Ze=Ye+Xe}const ot=Math.max(0,Ze-Je),jt=xe>0?`${xe}%`:le>0?`R$ ${B(le)}`:null;return e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-gray-900 whitespace-nowrap",children:["R$ ",B(Je)]}),ot>0&&Ze>0?e.jsxs("div",{className:"mt-0.5 space-y-0.5",children:[e.jsxs("p",{className:"text-[11px] text-gray-500 whitespace-nowrap",children:["Orig: R$ ",B(Ze)]}),e.jsxs("p",{className:"text-[11px] text-red-600 whitespace-nowrap",children:["Desc",jt?` (${jt} ${Fe})`:` (${Fe})`,": - R$ ",B(ot)]})]}):null]})})()]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-sm",children:[Z.mediaUnitId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Tempo de ocupao"}),e.jsx("p",{className:"text-gray-700",children:Z.occupationDays?`${Z.occupationDays} dias`:""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Cliente fornece lona"}),e.jsx("p",{className:"text-gray-700",children:Z.clientProvidesBanner?"Sim":"No"})]})]}):Z.startDate&&Z.endDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-gray-700",children:[Dm(Z.startDate)," - ",Dm(Z.endDate)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Quantidade"}),e.jsx("p",{className:"text-gray-700",children:Z.quantity??1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Preo Unitrio"}),e.jsxs("p",{className:"text-gray-700",children:["R$ ",B(Z.unitPrice)]})]})]}),Z.mediaUnitId?(()=>{const G=Math.max(1,Fn(Z.quantity,1)),xe=Fn(Z.occupationDays,0),le=Math.floor(xe/30),ue=Math.round(xe%30/15),Fe=Fn(Z.priceMonthSnapshot,0),$e=Fn(Z.priceBiweeklySnapshot,0),Ze=Fn(Z.productionCostSnapshot,0),Ye=Fn(Z.installationCostSnapshot,0),Xe=!!Z.clientProvidesBanner,Je=(le*Fe+ue*$e)*G,ot=(Ye+(Xe?0:Ze))*G,jt=Fn(Z.discountPercent,0),dt=Fn(Z.discountAmount,0),Tt=Z.discountApplyTo??"TOTAL",Ft=oe=>{let be=oe;return jt>0&&(be=be*(1-jt/100)),dt>0&&(be=be-dt),Number.isFinite(be)||(be=0),Math.max(0,be)};let Q=Z.rentTotalSnapshot!=null?Fn(Z.rentTotalSnapshot,0):null,pe=Z.upfrontTotalSnapshot!=null?Fn(Z.upfrontTotalSnapshot,0):null;if(Q==null||pe==null)if(Tt==="TOTAL"){const oe=Je+ot,be=Ft(oe),Me=oe>0?be/oe:0;Q=Je*Me,pe=ot*Me}else Tt==="RENT"?(Q=Ft(Je),pe=ot):Tt==="COSTS"&&(pe=Ft(ot),Q=Je);const de=Math.abs(Je-(Q??0))>.009,Oe=Math.abs(ot-(pe??0))>.009;return Je<=0&&ot<=0?null:e.jsx("div",{className:"mt-3 rounded-md bg-gray-50 p-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Aluguel"}),e.jsxs("p",{className:"text-gray-700 whitespace-nowrap",children:["R$ ",B(Je),de?`  R$ ${B(Q)}`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Custos (produo/instalao)"}),e.jsxs("p",{className:"text-gray-700 whitespace-nowrap",children:["R$ ",B(ot),Oe?`  R$ ${B(pe)}`:""]})]})]})})})():null]},Z.id??`${Z.description??"item"}-${K}`)),!q.length&&e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum item adicionado."})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h3",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Uj,{className:"w-4 h-4"})," Links pblicos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Visualizao"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:me||""}),e.jsx(ne,{size:"icon",variant:"outline",disabled:!me,onClick:()=>F(me,"Link de visualizao copiado."),children:e.jsx(Wa,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Mensagens (portal do cliente)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:J||""}),e.jsx(ne,{size:"icon",variant:"outline",disabled:!J,onClick:()=>F(J,"Link de mensagens copiado."),children:e.jsx(Wa,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(ne,{variant:"outline",onClick:$,disabled:g,className:"w-full sm:w-auto",children:g?"Gerando":"Gerar link de mensagens"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Deciso (aprovar/recusar)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:fe||""}),e.jsx(ne,{size:"icon",variant:"outline",disabled:!fe,onClick:()=>F(fe,"Link de deciso copiado."),children:e.jsx(Wa,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(ne,{variant:"outline",onClick:Y,disabled:N,className:"w-full sm:w-auto",children:N?"Gerando":"Gerar link de deciso"})})]}),R&&e.jsx("p",{className:"text-sm text-red-600",children:R}),T&&e.jsx("p",{className:"text-sm text-green-700",children:T}),e.jsx("div",{className:"pt-2",children:e.jsx(ne,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>{s(!1),i?.("messages");const Z=new URL(window.location.href);Z.searchParams.set("proposalId",n.id),Z.searchParams.delete("campaignId");const K=`${Z.pathname}?${Z.searchParams.toString()}`;try{window.history.pushState({},"",K),window.dispatchEvent(new Event("app:navigation"))}catch{}},children:"Ir para Mensagens"})})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Proposta (PDF)"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsx(ne,{variant:"outline",className:"w-full sm:w-auto",disabled:S,onClick:ae,children:S?"Baixando":"Baixar proposta (PDF)"})}),D&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:D})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Criado em ",f6(l.createdAt)]})})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"Sem detalhes disponveis."})})})}):null}function v6({searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:i,onOpenAdvancedFilters:l}){return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{placeholder:"Buscar por ttulo ou cliente...",value:t,onChange:c=>s(c.target.value),className:"pl-10"})]}),e.jsxs(At,{value:n,onValueChange:i,children:[e.jsx(Et,{className:"w-full lg:w-48",children:e.jsx(Pt,{placeholder:"Status"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos os status"}),e.jsx(De,{value:Jt.RASCUNHO,children:"Rascunho"}),e.jsx(De,{value:Jt.ENVIADA,children:"Enviada"}),e.jsx(De,{value:Jt.APROVADA,children:"Aprovada"}),e.jsx(De,{value:Jt.REPROVADA,children:"Reprovada"}),e.jsx(De,{value:Jt.EXPIRADA,children:"Expirada"})]})]}),e.jsxs(ne,{type:"button",variant:"outline",className:"gap-2",onClick:l,children:[e.jsx(Ch,{className:"w-4 h-4"}),"Mais Filtros"]})]})}function y6({value:t,onChange:s}){const[n,i]=p.useState([]),[l,c]=p.useState(!1);p.useEffect(()=>{let f=!1;return(async()=>{try{c(!0);const v=40;let g=1;const w=[];for(let N=0;N<50;N++){const S=(await ke.get("/clients",{params:{page:g,pageSize:v,orderBy:"name",sortOrder:"asc"}})).data,A=Array.isArray(S)?S:S?.data??[];if(w.push(...A),Array.isArray(S))break;const D=S?.totalPages;if(typeof D=="number"&&g>=D||!A.length||A.length<v)break;g+=1}f||i(w)}catch{f||i([])}finally{f||c(!1)}})(),()=>{f=!0}},[]);const h=p.useMemo(()=>(n||[]).map(f=>({id:f.id,label:`${f.contactName||"Sem nome"}${f.companyName?`  ${f.companyName}`:""}`})),[n]),m=f=>{const b=f.target.value;s&&b&&s(b)};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{"data-testid":"client-select",className:"flex h-9 w-full rounded-md border border-input bg-input-background px-3 py-1 text-sm shadow-sm transition-colors outline-none appearance-none cursor-pointer pr-10 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",value:t||"",onChange:m,style:{WebkitAppearance:"none",MozAppearance:"none"},disabled:l,children:[e.jsx("option",{value:"",children:l?"Carregando clientes...":"Selecione o cliente"}),h.map(f=>e.jsx("option",{value:f.id,children:f.label},f.id))]}),e.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-muted-foreground text-xs",children:""})]})}function b6({formData:t,onChange:s,onValidChange:n,onClose:i,onNavigate:l}){const{user:c}=yl();p.useEffect(()=>{c&&!t.responsibleUserId&&s({responsibleUserId:c.id})},[c,t.responsibleUserId,s]),p.useEffect(()=>{const b=!!t.clientId&&!!t.responsibleUserId;n(b)},[t.clientId,t.responsibleUserId,n]);const h=b=>{s({clientId:b})},m=()=>{i&&i(),l&&l("clients")},f=b=>new Date(`${b}T00:00:00`);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"clientId",className:"required",children:"Cliente *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(y6,{value:t.clientId,onChange:h})}),e.jsx(ne,{type:"button",variant:"outline",size:"icon",onClick:m,title:"Ir para mdulo de Clientes",children:e.jsx(Ss,{className:"w-4 h-4"})})]}),!t.clientId&&e.jsx("p",{className:"text-sm text-red-600",children:"Selecione um cliente para continuar"}),e.jsx("p",{className:"text-sm text-gray-500",children:" Precisa cadastrar um cliente novo? Clique no boto + para abrir o mdulo de Clientes."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"title",children:"Ttulo da Proposta"}),e.jsx(Pe,{id:"title",placeholder:"Ex: Campanha OOH Av. Paulista  Q2 2025",value:t.title||"",onChange:b=>s({title:b.target.value})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. D um nome descritivo para identificar facilmente esta proposta."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"campaignStartDate",children:"Data de Incio"}),e.jsx(Pe,{id:"campaignStartDate",type:"date",value:t.campaignStartDate?t.campaignStartDate.toISOString().split("T")[0]:"",onChange:b=>s({campaignStartDate:b.target.value?f(b.target.value):void 0})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. Serve como referncia/padro; a durao real ser definida por item no prximo passo."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"validUntil",children:"Validade da Proposta"}),e.jsx(Pe,{id:"validUntil",type:"date",value:t.validUntil?t.validUntil.toISOString().split("T")[0]:"",onChange:b=>s({validUntil:b.target.value?f(b.target.value):void 0})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data at a qual esta proposta  vlida (padro: 7 dias)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"conditionsText",children:"Condies Comerciais"}),e.jsx(Ei,{id:"conditionsText",rows:4,placeholder:"Descreva as condies de pagamento, prazos, garantias, etc.",value:t.conditionsText||"",onChange:b=>s({conditionsText:b.target.value})})]})]})}function j6({open:t,onOpenChange:s,onAddItem:n,initialMediaPointId:i,allowedMediaPointIds:l,referenceStartDate:c}){const{company:h}=So(),m=p.useMemo(()=>(l??[]).join("|"),[l]),f=p.useMemo(()=>new Set((l??[]).filter(Boolean)),[m]),[b,v]=p.useState(""),[g,w]=p.useState("all"),[N,j]=p.useState([]),[S,A]=p.useState([]),[D,E]=p.useState(!1),[T,k]=p.useState(null),[R,O]=p.useState(null),[H,te]=p.useState(null),X=p.useRef(!1),[q,U]=p.useState([]),[M,B]=p.useState(!1),[ee,me]=p.useState(null),[J,fe]=p.useState(""),[W,ae]=p.useState(""),[F,$]=p.useState(1),[Y,Z]=p.useState(0),[K,G]=p.useState(0),[xe,le]=p.useState(0),[ue,Fe]=p.useState(zn.TOTAL),$e=360,[Ze,Ye]=p.useState("30"),[Xe,Je]=p.useState(30),[ot,jt]=p.useState(!1),[dt,Tt]=p.useState({}),[Ft,Q]=p.useState(null),pe=ge=>{const Ee=new Date(ge);return Ee.setHours(0,0,0,0),Ee},de=(ge,Ee)=>{const Te=new Date(ge);return Te.setDate(Te.getDate()+Math.max(0,Math.floor(Ee))),Te},Oe=p.useMemo(()=>{const ge=pe(c??new Date),Ee=de(ge,Xe);return{start:ge,end:Ee}},[c,Xe]),oe=ge=>{const Ee=Math.max(0,Math.floor(ge)),Te=Math.floor(Ee/30),Ct=Ee%30===15?1:0;return{months:Te,biweeks:Ct}},be=ge=>{const Ee=Number(ge);return Number.isFinite(Ee)?Ee:0},Me=p.useMemo(()=>{const ge=new Map;for(const Ee of N)ge.set(Ee.id,Ee);return ge},[N]),Ge=p.useMemo(()=>{const ge=H?Me.get(H.mediaPointId):void 0,Ee=be(H?.priceMonth??ge?.basePriceMonth??0),Te=be(H?.priceWeek??ge?.basePriceWeek??0),wt=be(H?.productionCosts?.lona??0),Ct=be(H?.productionCosts?.montagem??0),{months:jn,biweeks:qt}=oe(Xe),cn=jn*Ee+qt*Te,gn=Ct+(ot?0:wt),Xn=cn+gn;return{priceMonth:Ee,priceBiweekly:Te,months:jn,biweeks:qt,rentPerUnit:cn,prod:wt,inst:Ct,upfrontPerUnit:gn,perUnitTotal:Xn}},[H,Xe,ot]),ut=p.useMemo(()=>{const ge=Math.max(1,Number(F)||1),Ee=ge*Ge.rentPerUnit,Te=ge*Ge.upfrontPerUnit,wt=Ee+Te,Ct=be(K),jn=be(xe),qt=ue===zn.RENT?Ee:ue===zn.COSTS?Te:wt,cn=Ct>0?qt*Ct/100:jn>0?Math.min(jn,qt):0,gn=Math.max(0,wt-cn),Xn=Math.max(0,cn);return{qty:ge,rentTotal:Ee,upfrontTotal:Te,baseTotal:wt,discountBase:qt,discountValue:cn,totalPrice:gn,computedDiscountValue:Xn}},[F,Ge.rentPerUnit,Ge.upfrontPerUnit,K,xe,ue]),{baseTotal:Kt,totalPrice:tn,computedDiscountValue:ln}=ut;p.useEffect(()=>{if(!H){Z(0);return}Z(Ge.perUnitTotal)},[H,Ge.perUnitTotal]);const Ut=ge=>ge.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),yn=ge=>[ge.addressStreet,ge.addressNumber,ge.addressDistrict,ge.addressCity,ge.addressState].filter(Boolean).join(", "),Kn=ge=>{if(ge.widthM&&ge.heightM){const Ee=Number(ge.widthM),Te=Number(ge.heightM);return`${Ee}m x ${Te}m`}if(ge.resolutionWidthPx&&ge.resolutionHeightPx)return`${ge.resolutionWidthPx}x${ge.resolutionHeightPx}px`},ps=ge=>{const Ee=new Date(ge).toISOString().slice(0,10),[Te,wt,Ct]=Ee.split("-");return`${Ct}/${wt}/${Te}`};p.useEffect(()=>{const ge=async()=>{try{E(!0),k(null),O(null),te(null),U([]),me(null),fe("");const Ee=[];let Te=1;const wt=50;for(;;){const cn=(await ke.get("/media-points",{params:{page:Te,pageSize:wt}})).data,gn=Array.isArray(cn)?cn:cn?.data??[],Xn=Array.isArray(cn)?void 0:cn?.total;if(Ee.push(...gn),Array.isArray(cn)||!gn.length||typeof Xn=="number"&&Ee.length>=Xn)break;Te+=1}const Ct=f.size?Ee.filter(qt=>f.has(qt.id)):Ee;j(Ct);const jn=Ct.flatMap(qt=>(Array.isArray(qt?.units)?qt.units:Array.isArray(qt?.mediaUnits)?qt.mediaUnits:[]).map(gn=>({...gn,pointId:qt.id,pointName:qt.name,pointType:qt.type,pointAddress:yn(qt),dimensions:Kn(gn),mediaPointId:qt.id,productionCosts:qt.productionCosts??null})));A(jn)}catch{k("Erro ao carregar mdias do inventrio."),j([]),A([])}finally{E(!1)}};t?(X.current=!1,O(null),te(null),Tt({}),Q(null),fe(""),ae(""),$(1),G(0),le(0),Ye("30"),Je(30),jt(!1),ge()):X.current=!1},[t,m]);const Pn=p.useMemo(()=>{const ge=new Map;for(const Ee of S){const Te=Ee.mediaPointId;if(!Te)continue;const wt=ge.get(Te)??[];wt.push(Ee),ge.set(Te,wt)}return ge},[S]),rn=p.useMemo(()=>{let ge=N;g!=="all"&&(ge=ge.filter(Te=>Te.type===g));const Ee=b.trim().toLowerCase();return Ee&&(ge=ge.filter(Te=>{const wt=String(Te.name??"").toLowerCase(),Ct=yn(Te).toLowerCase(),qt=(Pn.get(Te.id)??[]).some(cn=>String(cn.label??"").toLowerCase().includes(Ee));return wt.includes(Ee)||Ct.includes(Ee)||qt})),ge},[N,g,b,Pn]),hn=p.useMemo(()=>rn.reduce((ge,Ee)=>ge+(Pn.get(Ee.id)?.length??0),0),[rn,Pn]),fn=p.useMemo(()=>R?N.find(ge=>ge.id===R)??null:null,[N,R]),Rn=p.useMemo(()=>R?Pn.get(R)??[]:[],[Pn,R]);p.useEffect(()=>{if(!t)return;if(!R){Tt({}),Q(null);return}const ge=Rn;if(!ge.length){Tt({}),Q(null);return}let Ee=!1;const Te=Oe.start.toISOString(),wt=Oe.end.toISOString();return Tt(Ct=>{const jn={...Ct};for(const qt of ge)jn[qt.id]="checking";return jn}),Q(null),(async()=>{const Ct=await Promise.allSettled(ge.map(cn=>ke.get("/reservations/availability",{params:{mediaUnitId:cn.id,startDate:Te,endDate:wt}})));if(Ee)return;const jn={};let qt=!1;Ct.forEach((cn,gn)=>{const Xn=ge[gn]?.id;if(Xn)if(cn.status==="fulfilled"){const is=!!cn.value?.data?.available;jn[Xn]=is?"available":"occupied"}else jn[Xn]="unknown",qt=!0}),Tt(jn),qt&&Q("No foi possvel verificar a disponibilidade de uma ou mais faces.")})().catch(()=>{if(Ee)return;const Ct={};for(const jn of ge)Ct[jn.id]="unknown";Tt(Ct),Q("No foi possvel verificar a disponibilidade das faces.")}),()=>{Ee=!0}},[t,R,Rn,Oe.start,Oe.end]),p.useEffect(()=>{if(!t||!R||!Rn.length||!Object.keys(dt).length)return;const ge=()=>{const Te=Rn.find(wt=>dt[wt.id]==="available");Te?Vn(Te):te(null)};if(!H){ge();return}const Ee=dt[H.id];(Ee==="occupied"||Ee==="unknown")&&ge()},[t,R,Rn,dt,H]);const Vn=ge=>{te(ge),ae(`${ge.pointName||"Ponto"} - ${ge.label}`),G(0),le(0),$(1),Ye("30"),Je(30),jt(!1)},Sn=async ge=>{try{B(!0),me(null),U([]),fe("");const Ee=await ke.get(`/media-points/${ge}/owners`),Te=Array.isArray(Ee.data)?Ee.data:Ee.data?.data??[],wt=Array.isArray(Te)?Te:[];U(wt);const Ct=wt.find(jn=>jn?.ownerCompany?.isPrimary);Ct?fe(Ct.id):wt.length===1&&fe(wt[0].id)}catch{me("Erro ao carregar empresas vinculadas ao ponto."),U([]),fe("")}finally{B(!1)}},ts=ge=>{O(ge.id),Sn(ge.id);const Ee=Pn.get(ge.id)??[];if(Ee.length>0){Vn(Ee[0]);return}te(null),ae(`${ge.name||"Ponto"}`),Z(0),G(0),le(0),$(1),Ye("30"),Je(30),jt(!1)};p.useEffect(()=>{if(!t||!N.length||X.current)return;let ge=i;if(ge&&f.size&&!f.has(ge)&&(ge=void 0),!ge&&(l??[]).length&&(ge=(l??[])[0]),!ge||(X.current=!0,R===ge))return;const Ee=N.find(Te=>Te.id===ge);Ee&&ts(Ee)},[t,i,m,N.length,R]);const ft=()=>{if(!H)return;const ge=Xe,Ee=F*Ge.rentPerUnit,Te=F*Ge.upfrontPerUnit,wt={id:`item${Date.now()}${Math.random()}`,companyId:h?.id||H.companyId||"",proposalId:"",mediaUnitId:H.id,productId:void 0,mediaPointOwnerId:H.id&&J||null,description:W,occupationDays:ge,clientProvidesBanner:ot,priceMonthSnapshot:Ge.priceMonth,priceBiweeklySnapshot:Ge.priceBiweekly,productionCostSnapshot:Ge.prod,installationCostSnapshot:Ge.inst,rentTotalSnapshot:Ee,upfrontTotalSnapshot:Te,quantity:F,unitPrice:Y,discountPercent:K>0?K:void 0,discountAmount:xe>0?xe:void 0,discountApplyTo:ue,totalPrice:tn,createdAt:new Date,updatedAt:new Date};n(wt),sn()},sn=()=>{v(""),w("all"),O(null),te(null),Tt({}),Q(null),U([]),me(null),fe(""),ae(""),$(1),Z(0),G(0),le(0),Ye("30"),Je(30),jt(!1),s(!1)},$t=q.length>0,An=Xe>=15&&Xe%15===0&&Xe<=$e,bn=H?dt[H.id]:void 0,xn=bn==="available",Ce=!!H&&!!W&&F>0&&Y>=0&&An&&xn&&$t&&!!J&&!M&&!ee,Qe=ue===zn.RENT?"o aluguel":ue===zn.COSTS?"os custos (produo/instalao)":"o total do item",nt=p.useMemo(()=>{const ge=new Set(N.map(Ee=>Ee.type));return Array.from(ge)},[N]);return e.jsx(Dn,{open:t,onOpenChange:ge=>{if(!ge)return sn();s(!0)},children:e.jsxs(In,{style:{width:"96vw",maxWidth:"min(1400px, 96vw)",height:"90vh",maxHeight:"90vh"},className:"flex flex-col p-0 gap-0 overflow-hidden",children:[e.jsx(Bn,{className:"px-6 py-4 border-b",children:e.jsx(Un,{children:"Selecionar Mdia do Inventrio"})}),D&&e.jsx("div",{className:"p-6 text-gray-600",children:"Carregando mdias..."}),!D&&T&&e.jsx("div",{className:"p-6 text-red-600",children:T}),!D&&!T&&e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-1/2 md:h-full h-[40%] md:border-r border-b md:border-b-0 border-gray-200 overflow-y-auto p-4 md:p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Pe,{placeholder:"Buscar mdia, ponto ou endereo...",value:b,onChange:ge=>v(ge.target.value),className:"pl-10"})]}),e.jsxs(At,{value:g,onValueChange:w,children:[e.jsx(Et,{className:"w-40",children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:"all",children:"Todos"}),nt.map(ge=>e.jsx(De,{value:ge,children:ge},ge))]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[rn.length," ",rn.length===1?"ponto":"pontos","  ",hn," ",hn===1?"mdia":"mdias"," disponvel(is)"]})]}),e.jsxs("div",{className:"space-y-3",children:[rn.map(ge=>{const Ee=Pn.get(ge.id)??[],Te=Number(ge?.basePriceMonth??0),wt=Ee.reduce((qt,cn)=>{const gn=Number(cn.priceMonth??0);return!Number.isFinite(gn)||gn<=0?qt:qt===null||gn<qt?gn:qt},null),Ct=wt!==null?wt:Number.isFinite(Te)&&Te>0?Te:null,jn=Ee.length===1?Ee[0].dimensions:void 0;return e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${R===ge.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>ts(ge),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:ge.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[ge.type,Ee.length?`  ${Ee.length} ${Ee.length===1?"unidade":"unidades"}`:"  sem unidades"]}),yn(ge)&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-2",children:[e.jsx(Ci,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:yn(ge)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-indigo-600 font-medium",children:Ct!==null?Ut(Ct)+(Ee.length?"/ms":""):"--"}),jn&&e.jsx("span",{className:"text-gray-500",children:jn})]})]}),e.jsx(Nh,{className:"w-4 h-4 text-gray-400"})]})},ge.id)}),rn.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum ponto encontrado"})})]})]}),e.jsx("div",{className:"md:w-1/2 md:h-full h-[60%] flex-1 overflow-hidden p-4 md:p-6",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:fn?Rn.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"Detalhes da Mdia"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:fn.name}),e.jsx("p",{className:"text-gray-600 mb-2",children:fn.type}),yn(fn)&&e.jsx("p",{className:"text-sm text-gray-500",children:yn(fn)})]})]}),Rn.length>1&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Unidade"}),e.jsxs(At,{value:H?.id??"",onValueChange:ge=>{const Ee=Rn.find(Te=>Te.id===ge);Ee&&Vn(Ee)},children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione uma unidade"})}),e.jsx(kt,{children:Rn.map(ge=>{const Ee=dt[ge.id],Te=Ee!=="available",wt=Ee==="occupied"?" (Ocupado)":Ee==="unknown"?" (Indisponvel)":Ee==="checking"?" (Verificando...)":"";return e.jsxs(De,{value:ge.id,disabled:Te,children:[ge.label,wt]},ge.id)})})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Perodo considerado: ",ps(Oe.start),"  ",ps(Oe.end)]}),!c&&e.jsxs("div",{className:"mt-1 text-xs text-amber-700",children:["Defina a ",e.jsx("b",{children:"Data de Incio"})," no passo 1 para checar com preciso."]}),Ft&&e.jsx("div",{className:"mt-1 text-xs text-red-600",children:Ft})]}),H&&e.jsxs("div",{className:"text-xs",children:[Rn.length<=1&&e.jsxs("div",{className:"text-gray-500",children:["Perodo considerado: ",ps(Oe.start),"  ",ps(Oe.end)]}),bn==="checking"&&e.jsx("div",{className:"text-gray-500 mt-1",children:"Verificando ocupao..."}),bn==="occupied"&&e.jsx("div",{className:"text-red-600 mt-1",children:"Esta face est ocupada no perodo selecionado."}),bn==="unknown"&&e.jsx("div",{className:"text-red-600 mt-1",children:"No foi possvel verificar a ocupao desta face."})]}),H&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Empresa vinculada *"}),M&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando empresas..."}),!M&&ee&&e.jsx("div",{className:"text-sm text-red-600",children:ee}),!M&&!ee&&(q.length?e.jsxs(At,{value:J,onValueChange:fe,children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:q.length>1?"Selecione a empresa":"Empresa"})}),e.jsx(kt,{children:q.map(ge=>{const Ee=(ge.ownerCompany?.name||ge.ownerName||"Empresa").trim(),Te=(ge.ownerCompany?.document||ge.ownerDocument||"").trim(),wt=Te?`${Ee}  ${Te}`:Ee;return e.jsx(De,{value:ge.id,children:wt},ge.id)})})]}):e.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:"Este ponto no possui empresa vinculada. Vincule uma empresa ao ponto no Inventrio para poder adicion-lo  proposta."})),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A empresa selecionada ser usada como referncia do item (e no PDF na prxima etapa)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Descrio *"}),e.jsx(Pe,{value:W,onChange:ge=>ae(ge.target.value),placeholder:"Descrio do item"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Tempo de ocupao *"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ne,{type:"button",size:"sm",variant:Ze==="15"?"default":"outline",onClick:()=>{Ye("15"),Je(15)},children:"15 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:Ze==="30"?"default":"outline",onClick:()=>{Ye("30"),Je(30)},children:"30 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:Ze==="custom"?"default":"outline",onClick:()=>{Ye("custom"),Je(ge=>ge>=15?ge:15)},children:"Personalizado"})]}),e.jsxs("div",{className:"mt-2",children:[Ze==="custom"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ne,{type:"button",size:"sm",variant:"outline",onClick:()=>Je(ge=>Math.min($e,Math.max(0,ge)+15)),children:"+15 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:"outline",onClick:()=>Je(ge=>Math.min($e,Math.max(0,ge)+30)),children:"+30 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:"ghost",onClick:()=>Je(0),children:"Limpar"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Total: ",e.jsx("b",{children:Xe})," dias"]})]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",Xe," dias"]}),!An&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Selecione um tempo vlido (mltiplo de 15, mximo ",$e," dias)."]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_o,{id:"clientProvidesBanner",checked:ot,onCheckedChange:ge=>jt(ge===!0)}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientProvidesBanner",className:"text-sm text-gray-700",children:"Cliente ir fornecer a lona"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se marcado, no contabiliza custo de produo (somente instalao/montagem)."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo mensal"}),e.jsx(Pe,{value:Ut(Ge.priceMonth),readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo quinzenal"}),e.jsx(Pe,{value:Ut(Ge.priceBiweekly),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Aluguel por unidade"}),e.jsx("span",{className:"text-gray-900",children:Ut(Ge.rentPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Custos (produo/instalao)"}),e.jsx("span",{className:"text-gray-900",children:Ut(Ge.upfrontPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total por unidade"}),e.jsx("span",{className:"text-gray-900",children:Ut(Ge.perUnitTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Quantidade *"}),e.jsx(Pe,{type:"number",min:"1",value:F,onChange:ge=>$(Math.max(1,parseInt(ge.target.value)||1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo por unidade (calculado)"}),e.jsx(Pe,{value:Ut(Y),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Aplicar desconto em"}),e.jsxs(At,{value:ue,onValueChange:ge=>Fe(ge),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[e.jsx(De,{value:zn.TOTAL,children:"Total (aluguel + custos)"}),e.jsx(De,{value:zn.RENT,children:"Aluguel"}),e.jsx(De,{value:zn.COSTS,children:"Custos (produo/instalao)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define sobre qual parte do item o desconto ser aplicado."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Desconto em %"}),e.jsx(Pe,{type:"number",min:"0",step:"0.01",value:K||0,onChange:ge=>{const Ee=Math.max(0,parseFloat(ge.target.value)||0);G(Ee),Ee>0&&le(0)},disabled:!!xe})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Desconto em R$"}),e.jsx(Pe,{type:"number",min:"0",step:"0.01",value:xe||0,onChange:ge=>{const Ee=Math.max(0,parseFloat(ge.target.value)||0);le(Ee),Ee>0&&G(0)},disabled:!!K})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" Preencha apenas um campo. O desconto ser aplicado sobre ",Qe,"."]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:Ut(tn)})]}),e.jsxs("p",{className:"text-sm text-indigo-700 mt-1",children:[F," x ",Ut(Y)]}),ln>0&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:Ut(Kt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",K>0?` (${K}%)`:""," (",Qe,"):"]}),e.jsxs("span",{children:["-",Ut(ln)]})]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ci,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Este ponto ainda no possui unidades/mdias cadastradas."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cadastre unidades no mdulo de Inventrio."})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ci,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Selecione um ponto para adicionar  proposta"})]})})}),e.jsxs("div",{className:"pt-4 mt-4 border-t flex flex-col sm:flex-row gap-3",children:[e.jsx(ne,{variant:"outline",className:"flex-1",onClick:sn,children:"Cancelar"}),e.jsx(ne,{className:"flex-1",onClick:ft,disabled:!Ce,children:"Adicionar Item"})]})]})})]})]})})}function w6({open:t,onOpenChange:s,defaultPeriod:n,onAddItem:i}){const{company:l}=So(),c=p.useMemo(()=>({page:1,pageSize:500}),[]),{products:h,loading:m,error:f,refetch:b}=nC(c),v=K=>new Date(`${K}T00:00:00`),[g,w]=p.useState(""),[N,j]=p.useState(""),[S,A]=p.useState(1),[D,E]=p.useState(0),[T,k]=p.useState(0),[R,O]=p.useState(0),[H,te]=p.useState(n.startDate),[X,q]=p.useState(n.endDate);p.useEffect(()=>{t&&(te(n.startDate),q(n.endDate),b())},[t,n.startDate,n.endDate,b]);const U=p.useMemo(()=>h.find(K=>K.id===g),[h,g]),M=K=>{w(K);const G=h.find(xe=>xe.id===K);G&&(j(G.name),E(Number(G.basePrice)||0),k(0),O(0))},B=S*D;let ee=B;const me=Number.isFinite(T)?T:0,J=Number.isFinite(R)?R:0;me>0&&(ee=ee*(1-me/100)),J>0&&(ee=ee-J),ee=Math.max(0,ee);const fe=Math.max(0,B-ee),W=K=>{const G=Math.max(0,parseFloat(K)||0);k(G),G>0&&O(0)},ae=K=>{const G=Math.max(0,parseFloat(K)||0);O(G),G>0&&k(0)},F=()=>{if(!g)return;const K={id:`item${Date.now()}${Math.random()}`,companyId:l?.id||U?.companyId||"",proposalId:"",mediaUnitId:void 0,productId:g,description:N,startDate:H,endDate:X,quantity:S,unitPrice:D,discountPercent:me>0?me:void 0,discountAmount:J>0?J:void 0,totalPrice:ee,createdAt:new Date,updatedAt:new Date};i(K),$()},$=()=>{w(""),j(""),A(1),E(0),k(0),O(0),te(n.startDate),q(n.endDate),s(!1)},Y=!!g&&!!N&&S>0&&D>=0,Z=K=>(Number.isFinite(K)?K:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return e.jsx(Dn,{open:t,onOpenChange:K=>{if(!K)return $();s(!0)},children:e.jsxs(In,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Bn,{children:e.jsx(Un,{children:"Adicionar Produto/Servio"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"product",children:"Produto/Servio *"}),e.jsxs(At,{value:g,onValueChange:M,disabled:m,children:[e.jsx(Et,{id:"product",children:e.jsx(Pt,{placeholder:m?"Carregando...":f?"Erro ao carregar produtos":"Selecione um produto ou servio"})}),e.jsx(kt,{children:h.map(K=>e.jsxs(De,{value:K.id,children:[K.name," - ",Z(K.basePrice||0),K.category?` (${K.category})`:""]},K.id))})]}),U&&e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," ",U.type]}),U.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Descrio:"})," ",U.description]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"description",children:"Descrio para a Proposta *"}),e.jsx(Ei,{id:"description",rows:3,placeholder:"Descreva como este item aparecer na proposta",value:N,onChange:K=>j(K.target.value)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Voc pode personalizar a descrio que aparecer na proposta."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"startDate",children:"Data de Incio"}),e.jsx(Pe,{id:"startDate",type:"date",value:H?H.toISOString().split("T")[0]:"",onChange:K=>te(K.target.value?v(K.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"endDate",children:"Data de Trmino"}),e.jsx(Pe,{id:"endDate",type:"date",value:X?X.toISOString().split("T")[0]:"",onChange:K=>q(K.target.value?v(K.target.value):void 0)})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. Use se o produto/servio tiver perodo especfico."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"quantity",children:"Quantidade *"}),e.jsx(Pe,{id:"quantity",type:"number",min:"1",value:S,onChange:K=>A(Math.max(1,parseInt(K.target.value)||1))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"unitPrice",children:"Preo Unitrio (R$) *"}),e.jsx(Pe,{id:"unitPrice",type:"number",min:"0",step:"0.01",value:D,onChange:K=>E(Math.max(0,parseFloat(K.target.value)||0))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Desconto do Item (opcional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"discountPercent",className:"text-sm text-gray-600",children:"Desconto em %"}),e.jsx(Pe,{id:"discountPercent",type:"number",min:"0",step:"0.01",value:T||0,onChange:K=>W(K.target.value),disabled:!!R})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"discountAmount",className:"text-sm text-gray-600",children:"Desconto em R$"}),e.jsx(Pe,{id:"discountAmount",type:"number",min:"0",step:"0.01",value:R||0,onChange:K=>ae(K.target.value),disabled:!!T})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:" Preencha apenas um campo. O desconto  aplicado sobre o total deste item."})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:Z(ee)})]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[S," x ",Z(D),fe>0?`  Desc: -${Z(fe)}`:""]}),fe>0&&e.jsxs("div",{className:"text-xs text-indigo-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:Z(B)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",me>0?` (${me}%)`:"",J>0?` (${Z(J)})`:"",":"]}),e.jsxs("span",{children:["-",Z(fe)]})]})]})]})]}),e.jsxs(zN,{children:[e.jsx(ne,{variant:"outline",onClick:$,children:"Cancelar"}),e.jsx(ne,{onClick:F,disabled:!Y,children:"Adicionar Item"})]})]})})}const kd=360;function ua(t){return(Number.isFinite(t)?t:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Lb(t){return new Date(`${t}T00:00:00`)}function N6({open:t,onOpenChange:s,item:n,onSave:i}){const l=!!n?.mediaUnitId,[c,h]=p.useState(""),[m,f]=p.useState(1),[b,v]=p.useState(0),[g,w]=p.useState(0),[N,j]=p.useState(0),[S,A]=p.useState(zn.TOTAL),[D,E]=p.useState(void 0),[T,k]=p.useState(void 0),[R,O]=p.useState("30"),[H,te]=p.useState(30),[X,q]=p.useState(!1);p.useEffect(()=>{if(!(!t||!n))if(h(n.description||""),f(Number(n.quantity)||1),w(Number(n.discountPercent)||0),j(Number(n.discountAmount)||0),A(n.discountApplyTo??zn.TOTAL),n.mediaUnitId){const le=Number(n.occupationDays)||30;te(le),O(le===15?"15":le===30?"30":"custom"),q(!!n.clientProvidesBanner),E(void 0),k(void 0)}else E(n.startDate?new Date(n.startDate):void 0),k(n.endDate?new Date(n.endDate):void 0),q(!1),O("30"),te(30),v(Number(n.unitPrice)||0)},[t,n]);const U=p.useMemo(()=>{if(!n||!n.mediaUnitId)return{priceMonth:0,priceBiweekly:0,rentPerUnit:0,upfrontPerUnit:0,perUnitTotal:b};const le=Number.isFinite(H)?H:0,ue=Math.min(Math.max(0,le),kd),Fe=ue>=15&&ue%15==0,$e=Number(n.priceMonthSnapshot)||0,Ze=Number(n.priceBiweeklySnapshot)||0,Ye=Math.floor(ue/30),Xe=Math.floor(ue%30/15),Je=Ye*$e+Xe*Ze,ot=Number(n.installationCostSnapshot)||0,jt=X?0:Number(n.productionCostSnapshot)||0,dt=ot+jt,Tt=Fe?Je+dt:0;return{priceMonth:$e,priceBiweekly:Ze,rentPerUnit:Je,upfrontPerUnit:dt,perUnitTotal:Tt}},[n,H,X,b]);p.useEffect(()=>{t&&n?.mediaUnitId&&v(U.perUnitTotal)},[t,n?.mediaUnitId,U.perUnitTotal]);const M=Math.max(1,Number(m)||1),B=Number.isFinite(g)?g:0,ee=Number.isFinite(N)?N:0,me=l?M*U.rentPerUnit:0,J=l?M*U.upfrontPerUnit:0,fe=l?me+J:M*b,W=l?S:zn.TOTAL,ae=W===zn.RENT?me:W===zn.COSTS?J:fe,F=B>0?ae*B/100:ee>0?Math.min(ee,ae):0,$=Math.max(0,fe-F),Y=Math.max(0,F),Z=W===zn.RENT?"o aluguel":W===zn.COSTS?"os custos (produo/instalao)":"o total do item",K=!l||H>=15&&H<=kd&&H%15===0,G=()=>{if(!n)return;const le={...n,description:c,quantity:m,unitPrice:b,discountPercent:B>0?B:void 0,discountAmount:ee>0?ee:void 0,discountApplyTo:l?S:zn.TOTAL,totalPrice:$,updatedAt:new Date};n.mediaUnitId?(le.occupationDays=H,le.clientProvidesBanner=X,le.startDate=void 0,le.endDate=void 0):(le.startDate=D,le.endDate=T),i(le),s(!1)},xe=()=>{s(!1)};return n?e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-xl",children:[e.jsx(Bn,{children:e.jsx(Un,{children:"Editar Item"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(we,{children:"Descrio"}),e.jsx(Ei,{value:c,onChange:le=>h(le.target.value)})]}),l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Tempo de ocupao"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ne,{type:"button",size:"sm",variant:R==="15"?"default":"outline",onClick:()=>{O("15"),te(15)},children:"15 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:R==="30"?"default":"outline",onClick:()=>{O("30"),te(30)},children:"30 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:R==="custom"?"default":"outline",onClick:()=>{O("custom"),te(le=>le>=15?le:15)},children:"Personalizado"})]}),R==="custom"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ne,{type:"button",size:"sm",variant:"outline",onClick:()=>te(le=>Math.min(kd,Math.max(0,le)+15)),children:"+15 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:"outline",onClick:()=>te(le=>Math.min(kd,Math.max(0,le)+30)),children:"+30 dias"}),e.jsx(ne,{type:"button",size:"sm",variant:"ghost",onClick:()=>te(0),children:"Limpar"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Total: ",e.jsx("b",{children:H})," dias"]})]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",H," dias"]}),!K&&e.jsxs("p",{className:"text-xs text-red-600",children:["Selecione um tempo vlido (mltiplo de 15, mximo ",kd," dias)."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_o,{id:"clientProvidesBanner",checked:X,onCheckedChange:le=>q(le===!0)}),e.jsxs("div",{children:[e.jsx(we,{htmlFor:"clientProvidesBanner",children:"Cliente ir fornecer a lona"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se marcado, no contabiliza custo de produo (somente instalao/montagem)."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(we,{children:"Preo mensal"}),e.jsx(Pe,{value:ua(U.priceMonth),readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(we,{children:"Preo quinzenal"}),e.jsx(Pe,{value:ua(U.priceBiweekly),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Aluguel por unidade"}),e.jsx("span",{className:"text-gray-900",children:ua(U.rentPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Custos (produo/instalao)"}),e.jsx("span",{className:"text-gray-900",children:ua(U.upfrontPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total por unidade"}),e.jsx("span",{className:"text-gray-900",children:ua(U.perUnitTotal)})]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(we,{children:"Data de incio"}),e.jsx(Pe,{type:"date",value:D?D.toISOString().split("T")[0]:"",onChange:le=>E(le.target.value?Lb(le.target.value):void 0)})]}),e.jsxs("div",{children:[e.jsx(we,{children:"Data de fim"}),e.jsx(Pe,{type:"date",value:T?T.toISOString().split("T")[0]:"",onChange:le=>k(le.target.value?Lb(le.target.value):void 0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(we,{children:"Quantidade"}),e.jsx(Pe,{type:"number",min:1,value:m,onChange:le=>f(Math.max(1,parseInt(le.target.value)||1))})]}),e.jsxs("div",{children:[e.jsx(we,{children:"Preo Unitrio"}),e.jsx(Pe,{type:l?"text":"number",min:0,step:"0.01",value:l?ua(b):b,onChange:le=>{l||v(Math.max(0,parseFloat(le.target.value)||0))},readOnly:l,disabled:l})]})]}),l&&e.jsxs("div",{children:[e.jsx(we,{children:"Aplicar desconto em"}),e.jsxs(At,{value:S,onValueChange:le=>A(le),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[e.jsx(De,{value:zn.TOTAL,children:"Total (aluguel + custos)"}),e.jsx(De,{value:zn.RENT,children:"Aluguel"}),e.jsx(De,{value:zn.COSTS,children:"Custos (produo/instalao)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define sobre qual parte do item o desconto ser aplicado."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(we,{children:"Desconto em %"}),e.jsx(Pe,{type:"number",min:0,step:"0.01",value:g||0,onChange:le=>{const ue=Math.max(0,parseFloat(le.target.value)||0);w(ue),ue>0&&j(0)},disabled:!!N})]}),e.jsxs("div",{children:[e.jsx(we,{children:"Desconto em R$"}),e.jsx(Pe,{type:"number",min:0,step:"0.01",value:N||0,onChange:le=>{const ue=Math.max(0,parseFloat(le.target.value)||0);j(ue),ue>0&&w(0)},disabled:!!g})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" Preencha apenas um campo. O desconto ser aplicado sobre ",Z,"."]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:ua($)})]}),e.jsxs("p",{className:"text-sm text-indigo-700 mt-1",children:[m," x ",ua(b)]}),Y>0&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:ua(fe)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",g>0?` (${g}%)`:""," (",Z,"):"]}),e.jsxs("span",{children:["-",ua(Y)]})]})]})]})]}),e.jsxs(zN,{children:[e.jsx(ne,{variant:"outline",onClick:xe,children:"Cancelar"}),e.jsx(ne,{onClick:G,disabled:l&&!K,children:"Salvar"})]})]})}):null}function C6({formData:t,onItemsChange:s,onMetaChange:n,initialMediaPointId:i,initialMediaPointIds:l}){const[c,h]=p.useState(!1),[m,f]=p.useState(!1),[b,v]=p.useState(!1),[g,w]=p.useState(null),[N,j]=p.useState(null),S=i??l?.[0]??null,A=M=>{s([...t.items,M]),h(!1)};p.useEffect(()=>{if((i??l?.[0]??null)&&!m){if((t.items??[]).length>0){f(!0);return}f(!0),h(!0)}},[i,l]);const D=M=>{s([...t.items,M]),v(!1)},E=M=>{w(t.items[M]),j(M)},T=M=>{if(N!==null){const B=[...t.items];B[N]=M,s(B),w(null),j(null)}},k=M=>{const B=t.items.filter((ee,me)=>me!==M);s(B)},R=M=>{const B=Number.isFinite(M.quantity)?M.quantity:1,ee=Number.isFinite(M.unitPrice)?M.unitPrice:0,me=B*ee,J=Number.isFinite(M.totalPrice)?M.totalPrice:me,fe=Math.max(0,me-J),W=M.discountPercent??0,ae=M.discountAmount??0,F=M.discountApplyTo??zn.TOTAL,$=M.mediaUnitId?F===zn.RENT?"no aluguel":F===zn.COSTS?"nos custos":"no total":null,Y=W>0?`${W}%`:ae>0?`R$ ${ae}`:null,Z=Y?$?`${Y} ${$}`:Y:null;return{baseTotal:me,finalTotal:J,discountValue:fe,label:Z,discountPercent:W,discountAmount:ae,applyTo:F,applyToLabel:$}},O=M=>M.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),H=M=>{if(!M)return"-";const B=new Date(M);if(Number.isNaN(B.getTime()))return"-";const[ee,me,J]=B.toISOString().split("T")[0].split("-");return`${J}/${me}/${ee}`},te=M=>{const B=Number(M??0);return!Number.isFinite(B)||B<=0?"":`${B} dias`},X=M=>{const B=parseFloat(M)||0;n({discountPercent:B,discountAmount:0})},q=M=>{const B=parseFloat(M)||0;n({discountAmount:B,discountPercent:0})},U=M=>{if(M===""){n({assemblyMaxDays:void 0});return}const B=Math.floor(Number(M)),ee=Number.isFinite(B)&&B>0?B:void 0;n({assemblyMaxDays:ee})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"assemblyMaxDays",children:"Perodo mximo de montagem (dias)"}),e.jsx(Pe,{id:"assemblyMaxDays",type:"number",min:"1",step:"1",placeholder:"Ex.: 7",value:t.assemblyMaxDays??"",onChange:M=>U(M.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Opcional. Aps aprovar a proposta, o check-in deve ocorrer at esse prazo."})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(ne,{type:"button",variant:"outline",onClick:()=>h(!0),className:"gap-2",children:[e.jsx(zm,{className:"w-4 h-4"}),"Adicionar Mdia do Inventrio"]}),e.jsxs(ne,{type:"button",variant:"outline",onClick:()=>v(!0),className:"gap-2",children:[e.jsx(fc,{className:"w-4 h-4"}),"Adicionar Produto/Servio"]})]}),t.items.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum item adicionado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Adicione unidades de mdia do seu inventrio ou produtos/servios para compor esta proposta"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(ne,{type:"button",variant:"outline",onClick:()=>h(!0),className:"gap-2",children:[e.jsx(zm,{className:"w-4 h-4"}),"Adicionar Mdia"]}),e.jsxs(ne,{type:"button",variant:"outline",onClick:()=>v(!0),className:"gap-2",children:[e.jsx(fc,{className:"w-4 h-4"}),"Adicionar Produto"]})]})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Item"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Tipo"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Tempo de ocupao"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Qtd"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Preo Unit."}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Total"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm text-gray-600",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y",children:t.items.map((M,B)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[M.mediaUnitId?e.jsx(zm,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}):e.jsx(fc,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-900",children:M.description})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${M.mediaUnitId?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"}`,children:M.mediaUnitId?"Mdia":"Produto"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:M.mediaUnitId?te(M.occupationDays):M.startDate||M.endDate?`${H(M.startDate)} - ${H(M.endDate)}`:""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:M.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:O(M.unitPrice)}),e.jsx("td",{className:"px-4 py-3 text-gray-900 text-right",children:(()=>{const ee=R(M);return e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:O(ee.finalTotal)}),ee.discountValue>0?e.jsxs("div",{className:"text-[11px] text-gray-500",children:[e.jsxs("div",{children:["Orig: ",O(ee.baseTotal)]}),e.jsxs("div",{className:"text-red-600",children:["Desc",ee.label?` (${ee.label})`:"",": -",O(ee.discountValue)]})]}):null]})})()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(B),className:"h-8 w-8 p-0",children:e.jsx(bl,{className:"w-4 h-4"})}),e.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(B),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(xa,{className:"w-4 h-4"})})]})})]},B))})]})})}),e.jsxs("div",{className:"border-t pt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Descontos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"discountPercent",children:"Desconto em %"}),e.jsx(Pe,{id:"discountPercent",type:"number",min:"0",step:"0.01",value:t.discountPercent||0,onChange:M=>X(M.target.value),disabled:!!t.discountAmount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"discountAmount",children:"Desconto em R$"}),e.jsx(Pe,{id:"discountAmount",type:"number",min:"0",step:"0.01",value:t.discountAmount||0,onChange:M=>q(M.target.value),disabled:!!t.discountPercent})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" Preencha apenas um campo. O desconto ser aplicado sobre o subtotal dos itens."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Resumo Financeiro"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal dos itens:"}),e.jsx("span",{className:"text-gray-900",children:O(t.subtotal)})]}),(t.discountPercent||t.discountAmount)&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Desconto",t.discountPercent?` (${t.discountPercent}%)`:"",":"]}),e.jsxs("span",{className:"text-red-600",children:["-"," ",O(t.discountAmount||t.subtotal*(t.discountPercent||0)/100)]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total da Proposta:"}),e.jsx("span",{className:"text-gray-900",children:O(t.totalAmount)})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"O subtotal  calculado automaticamente a partir dos itens."})]})]}),e.jsx(j6,{open:c,onOpenChange:h,onAddItem:A,referenceStartDate:t.campaignStartDate??null,initialMediaPointId:S??void 0,allowedMediaPointIds:l??void 0}),e.jsx(w6,{open:b,onOpenChange:v,defaultPeriod:{startDate:t.campaignStartDate},onAddItem:D}),e.jsx(N6,{open:!!g,onOpenChange:M=>{M||(w(null),j(null))},item:g,onSave:T})]})}function _6(t,s=[]){let n=[];function i(c,h){const m=p.createContext(h);m.displayName=c+"Context";const f=n.length;n=[...n,h];const b=g=>{const{scope:w,children:N,...j}=g,S=w?.[t]?.[f]||m,A=p.useMemo(()=>j,Object.values(j));return e.jsx(S.Provider,{value:A,children:N})};b.displayName=c+"Provider";function v(g,w){const N=w?.[t]?.[f]||m,j=p.useContext(N);if(j)return j;if(h!==void 0)return h;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[b,v]}const l=()=>{const c=n.map(h=>p.createContext(h));return function(m){const f=m?.[t]||c;return p.useMemo(()=>({[`__scope${t}`]:{...m,[t]:f}}),[m,f])}};return l.scopeName=t,[i,S6(l,...s)]}function S6(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const i=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const h=i.reduce((m,{useScope:f,scopeName:b})=>{const g=f(c)[`__scope${b}`];return{...m,...g}},{});return p.useMemo(()=>({[`__scope${s.scopeName}`]:h}),[h])}};return n.scopeName=s.scopeName,n}var A6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],uC=A6.reduce((t,s)=>{const n=ng(`Primitive.${s}`),i=p.forwardRef((l,c)=>{const{asChild:h,...m}=l,f=h?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...m,ref:c})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{}),d0="Progress",u0=100,[P6]=_6(d0),[E6,k6]=P6(d0),mC=p.forwardRef((t,s)=>{const{__scopeProgress:n,value:i=null,max:l,getValueLabel:c=T6,...h}=t;(l||l===0)&&!Fb(l)&&console.error(D6(`${l}`,"Progress"));const m=Fb(l)?l:u0;i!==null&&!$b(i,m)&&console.error(I6(`${i}`,"Progress"));const f=$b(i,m)?i:null,b=xh(f)?c(f,m):void 0;return e.jsx(E6,{scope:n,value:f,max:m,children:e.jsx(uC.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":xh(f)?f:void 0,"aria-valuetext":b,role:"progressbar","data-state":fC(f,m),"data-value":f??void 0,"data-max":m,...h,ref:s})})});mC.displayName=d0;var hC="ProgressIndicator",pC=p.forwardRef((t,s)=>{const{__scopeProgress:n,...i}=t,l=k6(hC,n);return e.jsx(uC.div,{"data-state":fC(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...i,ref:s})});pC.displayName=hC;function T6(t,s){return`${Math.round(t/s*100)}%`}function fC(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function xh(t){return typeof t=="number"}function Fb(t){return xh(t)&&!isNaN(t)&&t>0}function $b(t,s){return xh(t)&&!isNaN(t)&&t<=s&&t>=0}function D6(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${u0}\`.`}function I6(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${u0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var R6=mC,M6=pC;function O6(...t){return iw(eg(t))}function xC({className:t,value:s,...n}){return e.jsx(R6,{"data-slot":"progress",className:O6("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:e.jsx(M6,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function Tn(t,s=0){if(t==null)return s;const n=typeof t=="string"?Number(t):t;return typeof n=="number"&&Number.isFinite(n)?n:s}function Im(t){if(!t)return;const s=new Date(t);if(Number.isNaN(s.getTime()))return;const n=s.toISOString().split("T")[0],i=new Date(`${n}T00:00:00`);return Number.isNaN(i.getTime())?void 0:i}function L6(t=7){const s=new Date;return s.setHours(0,0,0,0),s.setDate(s.getDate()+t),s}function tx(t,s,n){const i=(t??[]).reduce((m,f)=>m+Tn(f.totalPrice,0),0),l=Tn(s,0),c=Tn(n,0);let h=i;return l>0?h=i-l:c>0&&(h=i-i*c/100),{subtotal:i,totalAmount:Math.max(0,h)}}function F6({open:t,onOpenChange:s,proposal:n,initialMediaPointId:i,initialMediaPointIds:l,onSave:c,onNavigate:h}){const[m,f]=p.useState(1),[b,v]=p.useState(null),[g,w]=p.useState(null),[N,j]=p.useState({clientId:"",responsibleUserId:"",title:"",validUntil:void 0,conditionsText:"",discountPercent:0,discountAmount:0,assemblyMaxDays:void 0,items:[],subtotal:0,totalAmount:0}),[S,A]=p.useState(!1);p.useEffect(()=>{if(n&&t){const M=(n.items??[]).map(J=>({...J,quantity:Tn(J.quantity,1),unitPrice:Tn(J.unitPrice,0),totalPrice:Tn(J.totalPrice,0),occupationDays:J.occupationDays??void 0,clientProvidesBanner:J.clientProvidesBanner??void 0,priceMonthSnapshot:J.priceMonthSnapshot??void 0,priceBiweeklySnapshot:J.priceBiweeklySnapshot??void 0,productionCostSnapshot:J.productionCostSnapshot??void 0,installationCostSnapshot:J.installationCostSnapshot??void 0,rentTotalSnapshot:J.rentTotalSnapshot??void 0,upfrontTotalSnapshot:J.upfrontTotalSnapshot??void 0,startDate:Im(J.startDate),endDate:Im(J.endDate)})),B=Tn(n.discountPercent,0),ee=Tn(n.discountAmount,0),me=tx(M,ee,B);j({clientId:n.clientId,responsibleUserId:n.responsibleUserId,title:n.title||"",campaignStartDate:Im(n.startDate),validUntil:Im(n.validUntil),conditionsText:(n.conditionsText||"").replace(/\\n/g,`
`),discountPercent:B,discountAmount:ee,assemblyMaxDays:n.assemblyMaxDays??void 0,items:M,subtotal:me.subtotal,totalAmount:me.totalAmount})}else if(!n&&t){const U=l&&l.length?l:i?[i]:[];w(U.length?U:null),v(U[0]??null),j({clientId:"",responsibleUserId:"",title:"",validUntil:L6(7),conditionsText:"",discountPercent:0,discountAmount:0,assemblyMaxDays:void 0,items:[],subtotal:0,totalAmount:0}),f(1)}},[n,t,i,l]);const D=U=>{j(M=>({...M,...U}))},E=U=>{j(M=>{const B=tx(U,M.discountAmount,M.discountPercent);return{...M,items:U,subtotal:B.subtotal,totalAmount:B.totalAmount}})},T=U=>{j(M=>{const B=U.discountPercent??M.discountPercent,ee=U.discountAmount??M.discountAmount,me=tx(M.items,ee,B);return{...M,...U,subtotal:me.subtotal,totalAmount:me.totalAmount}})},k=()=>{f(1),s(!1)},R=()=>{m===1&&S&&f(2)},O=()=>{f(1)},H=U=>({clientId:N.clientId,responsibleUserId:N.responsibleUserId,title:N.title,status:U,startDate:N.campaignStartDate?.toISOString(),validUntil:N.validUntil?.toISOString(),assemblyMaxDays:N.assemblyMaxDays?Number(N.assemblyMaxDays):void 0,discountPercent:Number(N.discountPercent||0),discountAmount:Number(N.discountAmount||0),conditionsText:N.conditionsText,items:N.items.map(M=>({mediaUnitId:M.mediaUnitId,mediaPointOwnerId:M.mediaPointOwnerId??void 0,productId:M.productId,description:M.description,quantity:Number(M.quantity),unitPrice:Number(M.unitPrice),discountPercent:Number(M.discountPercent||0),discountAmount:Number(M.discountAmount||0),discountApplyTo:M.discountApplyTo??"TOTAL",occupationDays:M.occupationDays??void 0,clientProvidesBanner:M.clientProvidesBanner??void 0,priceMonthSnapshot:M.priceMonthSnapshot??void 0,priceBiweeklySnapshot:M.priceBiweeklySnapshot??void 0,productionCostSnapshot:M.productionCostSnapshot??void 0,installationCostSnapshot:M.installationCostSnapshot??void 0,rentTotalSnapshot:M.rentTotalSnapshot??void 0,upfrontTotalSnapshot:M.upfrontTotalSnapshot??void 0,startDate:(M.productId||!M.occupationDays)&&M.startDate?new Date(M.startDate).toISOString():void 0,endDate:(M.productId||!M.occupationDays)&&M.endDate?new Date(M.endDate).toISOString():void 0}))}),te=async()=>{const U=H("RASCUNHO");await c(U)&&s(!1)},X=async()=>{const U=H("ENVIADA");await c(U)&&s(!1)},q=m===1?50:100;return e.jsx(Dn,{open:t,onOpenChange:U=>{U||k()},children:e.jsxs(In,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Bn,{children:[e.jsx(Un,{children:n?"Editar Proposta":"Nova Proposta"}),e.jsxs(_i,{children:["Passo ",m," de 2 - ",m===1?"Dados Gerais":"Itens da Proposta"]})]}),e.jsx("div",{className:"px-6",children:e.jsx(xC,{value:q,className:"h-2"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[m===1&&e.jsx(b6,{formData:N,onChange:D,onValidChange:A,onClose:k,onNavigate:h}),m===2&&e.jsx(C6,{formData:N,onItemsChange:E,onMetaChange:T,initialMediaPointId:b,initialMediaPointIds:g})]}),e.jsxs("div",{className:"border-t px-6 py-4 bg-gray-50",children:[m===1&&e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(ne,{variant:"outline",onClick:k,children:"Cancelar"}),e.jsx(ne,{onClick:R,disabled:!S,children:"Prximo"})]}),m===2&&e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(ne,{variant:"ghost",onClick:O,children:"Voltar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ne,{variant:"outline",onClick:te,children:"Salvar Rascunho"}),e.jsx(ne,{onClick:X,disabled:N.items.length===0,children:"Salvar e Enviar"})]})]})]})]})})}function $6(t){if(!t)return"-";const s=new Date(t);if(Number.isNaN(s.getTime()))return"-";const[n,i,l]=s.toISOString().split("T")[0].split("-");return`${l}/${i}/${n}`}function z6({proposals:t,onViewDetails:s,onEditProposal:n,onSendProposal:i}){if(t.length===0)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma proposta encontrada"})});const l=async c=>{const h=`${window.location.origin}/p/${c}`;try{window.open(h,"_blank","noopener,noreferrer")}catch{}try{await navigator.clipboard.writeText(h)}catch{console.log("Link pblico:",h)}};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Ttulo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Responsvel"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Itens"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Validade"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(c=>{const h=c.client?.companyName||c.client?.contactName||c.clientName||"-",m=c.client?.companyName?c.client?.contactName:void 0,f=c.responsibleUser?.name||c.responsibleUserName||"-",b=c.itemsCount??c.items?.length??void 0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:c.title||"Sem ttulo"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["ID: ...",c.id.slice(-6)]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:h}),m&&e.jsx("p",{className:"text-gray-500 text-sm",children:m})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:f}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:["R$"," ",Tn(c.totalAmount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),c.discountPercent!=null&&c.discountPercent>0&&e.jsxs("p",{className:"text-green-600 text-xs",children:["-",c.discountPercent,"% desconto"]}),c.discountPercent==null&&c.discountAmount!=null&&c.discountAmount>0&&e.jsxs("p",{className:"text-green-600 text-xs",children:["-R$"," ",Tn(c.discountAmount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:typeof b=="number"?`${b} ${b===1?"item":"itens"}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(l0,{status:c.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:$6(c.validUntil)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:v=>{v.preventDefault(),v.stopPropagation(),s(c)},"aria-label":"Ver detalhes",children:e.jsx(Za,{className:"w-4 h-4"})}),c.status===Jt.RASCUNHO&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:v=>{v.preventDefault(),v.stopPropagation(),n(c)},"aria-label":"Editar proposta",children:e.jsx(bl,{className:"w-4 h-4"})}),e.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:v=>{v.preventDefault(),v.stopPropagation(),i(c)},"aria-label":"Enviar proposta",children:e.jsx(_h,{className:"w-4 h-4"})})]}),c.publicHash&&e.jsx(ne,{type:"button",variant:"ghost",size:"sm",title:`Copiar link pblico: /p/${c.publicHash}`,onClick:v=>{v.preventDefault(),v.stopPropagation(),l(c.publicHash)},"aria-label":"Link pblico",children:e.jsx(Fj,{className:"w-4 h-4"})})]})})]},c.id)})})]})})}const zb="ONE_MEDIA_MEDIAMAP_PRESELECT_POINT_IDS";class B6 extends p.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s){console.error("Erro ao renderizar detalhes da proposta:",s)}render(){return this.state.hasError?e.jsxs("div",{className:"p-6 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"No foi possvel abrir os detalhes da proposta."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Abra o console do navegador (F12) para ver o erro. Depois volte e tente novamente."}),e.jsx(ne,{type:"button",variant:"outline",onClick:this.props.onBack,children:"Voltar"})]}):this.props.children}}function U6({onNavigate:t}){const[s,n]=p.useState(""),[i,l]=p.useState("all"),[c,h]=p.useState(1),m=40,[f,b]=p.useState({proposalStatuses:[],campaignStatus:void 0,billingStatus:void 0,responsibleUserId:void 0,createdFrom:void 0,createdTo:void 0}),[v,g]=p.useState(!1),w=p.useMemo(()=>{if(i!=="all")return i;if(f.proposalStatuses.length)return f.proposalStatuses},[i,f.proposalStatuses]),{proposals:N,total:j,totalPages:S,stats:A,loading:D,error:E,refetch:T,createProposal:k,updateProposal:R,updateProposalStatus:O,getProposalById:H}=V2({search:s||void 0,status:w,responsibleUserId:f.responsibleUserId,createdFrom:f.createdFrom,createdTo:f.createdTo,orderBy:"createdAt",sortOrder:"desc",page:c,pageSize:m});p.useEffect(()=>{h(1)},[s,i,f.responsibleUserId,f.createdFrom,f.createdTo,f.proposalStatuses.join("|")]);const[te,X]=p.useState(!1),[q,U]=p.useState(null),[M,B]=p.useState(null),[ee,me]=p.useState(null),[J,fe]=p.useState(null),[W,ae]=p.useState(!1);p.useEffect(()=>{const ue=new URLSearchParams(window.location.search),Fe=ue.get("new"),$e=ue.get("mediaPointId"),Ze=ue.get("mediaPointIds");let Ye=[];if(Ze&&(Ye=Ze.split(",").map(Xe=>String(Xe||"").trim()).filter(Boolean)),!Ye.length)try{const Xe=sessionStorage.getItem(zb);if(Xe){const Je=JSON.parse(Xe);Array.isArray(Je)&&(Ye=Je.map(ot=>String(ot||"").trim()).filter(Boolean))}}catch{}if(!Ye.length&&$e&&(Ye=[$e]),Ye.length?(me(Ye),B(Ye[0])):(me(null),B(null)),(Fe==="1"||Fe==="true"||Ye.length)&&(U(null),X(!0)),Fe||$e||Ze){Fe&&ue.delete("new"),$e&&ue.delete("mediaPointId"),Ze&&ue.delete("mediaPointIds");const Xe=ue.toString(),Je=`${window.location.pathname}${Xe?`?${Xe}`:""}`;window.history.replaceState({},"",Je)}try{sessionStorage.removeItem(zb)}catch{}},[]);const F=p.useMemo(()=>{const ue=new Date().getMonth(),Fe=new Date().getFullYear(),$e=N.filter(dt=>dt.status===Jt.APROVADA),Ze=N.filter(dt=>dt.status!==Jt.RASCUNHO),Ye=Ze.length>0?Math.round($e.length/Ze.length*100):0,Je=$e.filter(dt=>{if(!dt.approvedAt)return!1;const Tt=new Date(dt.approvedAt);return Tt.getMonth()===ue&&Tt.getFullYear()===Fe}).reduce((dt,Tt)=>dt+Number(Tt.totalAmount??0),0),ot=N.filter(dt=>dt.status===Jt.ENVIADA),jt=N.filter(dt=>dt.status===Jt.RASCUNHO);return{approved:$e.length,approvalRate:Ye,totalApprovedAmount:Je,sent:ot.length,drafts:jt.length}},[N]),$=p.useMemo(()=>A??{approved:F.approved,approvalRate:F.approvalRate,totalApprovedAmount:F.totalApprovedAmount,sent:F.sent,drafts:F.drafts},[A,F]),Y=()=>{U(null),B(null),me(null),X(!0)},Z=async ue=>{try{ae(!0);const Fe=await H(ue.id);U(Fe),X(!0)}catch{Ie.error("Erro ao carregar proposta para edio")}finally{ae(!1)}},K=async ue=>{fe(ue);try{ae(!0);const Fe=await H(ue.id);console.debug("Loaded full proposal for details:",Fe),fe($e=>$e&&$e.id===Fe.id?Fe:$e)}catch(Fe){console.warn("Erro ao carregar detalhes completos da proposta:",Fe)}finally{ae(!1)}},G=async ue=>{try{await O(ue.id,Jt.ENVIADA),Ie.success("Proposta enviada."),T()}catch{Ie.error("Erro ao enviar proposta")}},xe=async ue=>{try{const Fe=ue.status,{status:$e,...Ze}=ue;let Ye;return q?.id?(Ye=await R(q.id,Ze),Ie.success("Proposta atualizada com sucesso!")):(Ye=await k(Ze),Ie.success("Proposta criada com sucesso!")),Fe&&Fe!==Ye.status&&await O(Ye.id,Fe),X(!1),U(null),await T(),!0}catch(Fe){const $e=Fe?.response?.data?.message||"Erro ao salvar proposta";return Ie.error($e),!1}},le=ue=>{b(ue)};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Propostas"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie propostas comerciais (Proposal + ProposalItem)"})]}),e.jsxs(ne,{type:"button",className:"gap-2",onClick:Y,disabled:W,children:[e.jsx(Ss,{className:"w-4 h-4"}),"Nova Proposta"]})]}),D&&e.jsx("div",{children:"Carregando propostas..."}),!D&&E&&e.jsx("div",{children:"Erro ao carregar propostas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(Jt.APROVADA),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Aprovadas"}),e.jsx(Jm,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:$.approved}),e.jsxs("p",{className:"text-green-600 text-sm",children:["Taxa: ",$.approvalRate,"%"]})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Valor Aprovado"}),e.jsx(Jm,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("p",{className:"text-gray-900 mb-1",children:["R$"," ",$.totalApprovedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"No ms"})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(Jt.ENVIADA),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Enviadas"}),e.jsx(_h,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:$.sent}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Aguardando retorno"})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(Jt.RASCUNHO),children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Rascunhos"}),e.jsx(bl,{className:"w-5 h-5 text-gray-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:$.drafts}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Em elaborao"})]})})]}),e.jsx(Ue,{className:"mb-6",children:e.jsx(Ve,{className:"pt-6",children:e.jsx(v6,{searchQuery:s,onSearchChange:n,statusFilter:i,onStatusChange:ue=>l(ue),onOpenAdvancedFilters:()=>g(!0)})})}),(s||i!=="all"||f.proposalStatuses.length>0)&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[N.length," ",N.length===1?"proposta encontrada":"propostas encontradas",j>N.length?` (de ${j})`:""]})}),e.jsxs(Ue,{children:[e.jsx(z6,{proposals:N,onViewDetails:K,onEditProposal:Z,onSendProposal:G}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Pgina ",c," de ",S||1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>h(ue=>Math.max(1,ue-1)),disabled:D||c<=1,children:"Anterior"}),e.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>h(ue=>Math.min(S||1,ue+1)),disabled:D||c>=(S||1),children:"Prxima"})]})]})]}),e.jsx(p6,{open:v,onOpenChange:g,filters:f,onApplyFilters:le}),e.jsx(F6,{open:te,onOpenChange:ue=>{X(ue),ue||(U(null),B(null),me(null))},proposal:q,initialMediaPointId:M,initialMediaPointIds:ee,onSave:xe,onNavigate:t}),e.jsx(B6,{onBack:()=>fe(null),children:e.jsx(g6,{open:!!J,onOpenChange:ue=>{ue||fe(null)},proposal:J,onNavigate:t})})]})}function V6(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(!1),[m,f]=p.useState(null),b=p.useRef(null),v=async()=>{try{h(!0),f(null);const S=(await ke.get("/campaigns",{params:t})).data,A=Array.isArray(S)?S:S.data,D=Array.isArray(S)?A.length:S.total??A.length;n(A),l(D)}catch(j){f(j)}finally{h(!1)}};p.useEffect(()=>{b.current=()=>{v()}},[t.search,t.status,t.clientId,t.startFrom,t.startTo,t.endFrom,t.endTo,t.page,t.pageSize]),p.useEffect(()=>{let j=0;const S=()=>{if(typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible")return;const A=Date.now();A-j<800||(j=A,b.current?.())};return window.addEventListener("focus",S),document.addEventListener("visibilitychange",S),()=>{window.removeEventListener("focus",S),document.removeEventListener("visibilitychange",S)}},[]);const g=async j=>(await ke.get(`/campaigns/${j}`)).data,w=async j=>{const S=await ke.post("/campaigns",j);return n(A=>[S.data,...A]),S.data},N=async(j,S)=>{const A=await ke.put(`/campaigns/${j}`,S);return n(D=>D.map(E=>E.id===j?A.data:E)),A.data};return p.useEffect(()=>{v()},[t.search,t.status,t.clientId,t.startFrom,t.startTo,t.endFrom,t.endTo,t.page,t.pageSize]),{campaigns:s,total:i,loading:c,error:m,refetch:v,getCampaignById:g,createCampaign:w,updateCampaign:N}}function gC({status:t}){const s=i=>{switch(i){case mn.CANCELADA:return"bg-red-100 text-red-800";case mn.EM_VEICULACAO:return"bg-green-100 text-green-800";case mn.EM_INSTALACAO:return"bg-yellow-100 text-yellow-800";case mn.ATIVA:case mn.APROVADA:return"bg-blue-100 text-blue-800";case mn.AGUARDANDO_MATERIAL:return"bg-orange-100 text-orange-800";case mn.FINALIZADA:return"bg-gray-100 text-gray-800";case mn.RASCUNHO:default:return"bg-gray-100 text-gray-800"}},n=i=>{switch(i){case mn.CANCELADA:return"Cancelada";case mn.EM_VEICULACAO:return"Em veiculao";case mn.EM_INSTALACAO:return"Em instalao";case mn.ATIVA:return"Ativa";case mn.APROVADA:return"Aprovada";case mn.AGUARDANDO_MATERIAL:return"Aguardando material";case mn.FINALIZADA:return"Finalizada";case mn.RASCUNHO:default:return"Rascunho"}};return e.jsx(ht,{className:s(t),children:n(t)})}function as(t){if(t==null||t==="")return null;const s=t instanceof Date?t:new Date(t);return Number.isNaN(s.getTime())?null:s}function Vt(t,s="-"){const n=as(t);return n?n.toLocaleDateString("pt-BR"):s}function H6(t,s="-"){const n=as(t);return n?n.toLocaleString("pt-BR"):s}function hr(t,s="R$ 0,00"){const n=typeof t=="number"?t:typeof t=="string"?Number(t):typeof t?.toNumber=="function"?t.toNumber():Number(t);return Number.isFinite(n)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(n):s}function vC(t,s="R$ 0,00"){const n=typeof t=="number"?t:typeof t=="string"?Number(t):typeof t?.toNumber=="function"?t.toNumber():Number(t);return Number.isFinite(n)?hr(n/100,s):s}function yC(t){if(!t)return null;if(/^https?:\/\//i.test(t))return t;const s=t.indexOf("/uploads/"),n=s>=0?t.slice(s):t,i=String(ke.defaults?.baseURL??"");if(!i||i.startsWith("/"))return n;const l=i.replace(/\/?api\/?$/,"");return`${l.endsWith("/")?l.slice(0,-1):l}${n}`}function W6({campaign:t,showAllActions:s=!0,onViewDetails:n,onCheckIn:i,onGenerateReport:l,onViewBilling:c}){const h=t.client,m=(typeof t.reservedUnitsCount=="number"?t.reservedUnitsCount:void 0)??(typeof t.campaignItemsCount=="number"?t.campaignItemsCount:void 0)??(typeof t.reservationsCount=="number"?t.reservationsCount:void 0)??(t.items||[]).filter(A=>A.mediaUnitId).length,f=async()=>{try{await navigator.clipboard.writeText(t.proposalId),Ie.success("ID da proposta copiado")}catch{Ie.error("No foi possvel copiar o ID")}},b=Tn(t.totalAmountCents,0),v=vC(b),g=!!t.checkInAt,w=as(t.checkInDeadlineAt),N=as(t.startDate),j=as(t.endDate),S=g?`${Vt(N)} - ${Vt(j)}`:w?`Check-in at ${Vt(w)}`:`${Vt(N)} - ${Vt(j)}`;return e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-gray-900",children:t.name}),e.jsx(gC,{status:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:h?.companyName||h?.contactName||"Cliente no encontrado"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{children:"Proposta ID:"}),e.jsxs("button",{type:"button",className:"font-mono text-gray-700 hover:text-gray-900",title:t.proposalId,onClick:f,children:["...",t.proposalId.slice(-6)]}),e.jsx(ne,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",title:"Copiar ID",onClick:f,children:e.jsx(Wa,{className:"w-4 h-4"})})]}),e.jsx("span",{children:""}),e.jsx("span",{children:S}),e.jsx("span",{children:""}),e.jsxs("span",{children:[m," ",m===1?"unidade":"unidades"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-gray-900",children:v})})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-100",children:[e.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>n(t),children:[e.jsx(Za,{className:"w-4 h-4"}),"Ver Detalhes"]}),s&&i&&t.status==="EM_INSTALACAO"&&e.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>i(t),children:[e.jsx(VA,{className:"w-4 h-4"}),"Check-in"]}),e.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>l(t),children:[e.jsx(gr,{className:"w-4 h-4"}),"Relatrio"]}),s&&c&&e.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>c(t),children:[e.jsx(Vd,{className:"w-4 h-4"}),"Faturamento"]})]})]})})}function nx({campaigns:t,showAllActions:s=!0,onViewDetails:n,onCheckIn:i,onGenerateReport:l,onViewBilling:c}){return t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma campanha encontrada"})}):e.jsx("div",{className:"space-y-4",children:t.map(h=>e.jsx(W6,{campaign:h,showAllActions:s,onViewDetails:n,onCheckIn:i,onGenerateReport:l,onViewBilling:c},h.id))})}function q6({campaigns:t,onViewDetails:s,onCheckIn:n}){const i=(t||[]).filter(l=>l.status===mn.EM_INSTALACAO);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(TE,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-900",children:"Instalaes OOH"}),e.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Acompanhe campanhas em fase de instalao. Ao concluir a instalao, realize o ",e.jsx("b",{children:"check-in"})," com 1 foto por face."]})]})]})}),i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ci,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"Nenhuma instalao em andamento"}),e.jsx("p",{className:"text-sm",children:"Quando uma campanha estiver em EM_INSTALACAO, ela aparecer aqui."})]}):e.jsx("div",{className:"space-y-4",children:i.map(l=>{const c=as(l.checkInDeadlineAt),h=as(l.startDate),m=as(l.endDate),f=(typeof l.reservedUnitsCount=="number"?l.reservedUnitsCount:void 0)??(typeof l.campaignItemsCount=="number"?l.campaignItemsCount:void 0)??(typeof l.reservationsCount=="number"?l.reservationsCount:void 0)??l.items?.length??0,b=l.client?.contactName||l.client?.companyName||l.clientName||"",v=async()=>{try{await navigator.clipboard.writeText(l.proposalId),Ie.success("ID da proposta copiado")}catch{Ie.error("No foi possvel copiar o ID")}};return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:b}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsx("span",{children:c?`Check-in at ${Vt(c)}`:h&&m?`${Vt(h)} - ${Vt(m)}`:"-"}),e.jsx("span",{children:""}),e.jsxs("span",{children:[f," unidades"]})]}),l.proposalId&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1 inline-flex items-center gap-1",children:[e.jsx("span",{children:"Proposta ID:"}),e.jsxs("button",{type:"button",className:"font-mono text-gray-600 hover:text-gray-900",title:l.proposalId,onClick:v,children:["...",l.proposalId.slice(-6)]}),e.jsx("button",{type:"button",className:"p-1 rounded hover:bg-gray-100",title:"Copiar ID",onClick:v,children:e.jsx(Wa,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{variant:"outline",onClick:()=>s(l),children:"Ver detalhes"}),n&&e.jsx(ne,{onClick:()=>n(l),children:"Check-in"})]})]})},l.id)})})]})}function Z6({open:t,onOpenChange:s,campaign:n,defaultTab:i="summary",onRequestCheckIn:l}){const c=Vs(),[h,m]=p.useState(!1),[f,b]=p.useState(null),[v,g]=p.useState([]),[w,N]=p.useState([]),[j,S]=p.useState([]),[A,D]=p.useState(null),E=async()=>{if(n)try{m(!0);try{const Z=(await ke.get(`/campaigns/${n.id}/details`))?.data;if(Z&&typeof Z=="object"&&Z.campaign){b(Z.campaign),g(Array.isArray(Z.invoices)?Z.invoices:[]),N(Array.isArray(Z.forecastInvoices)?Z.forecastInvoices:[]),S(Array.isArray(Z.reservations)?Z.reservations:[]),D(Z.checkIn??null);return}}catch{}const[W,ae,F,$]=await Promise.allSettled([ke.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),ke.get("/billing-invoices/forecast",{params:{campaignId:n.id}}),ke.get("/reservations",{params:{campaignId:n.id,orderBy:"startDate"}}),ke.get(`/campaigns/${n.id}/checkin`)]);b(null),g(W.status==="fulfilled"&&Array.isArray(W.value.data)?W.value.data:[]),N(ae.status==="fulfilled"&&Array.isArray(ae.value.data)?ae.value.data:[]),S(F.status==="fulfilled"&&Array.isArray(F.value.data)?F.value.data:[]),D($.status==="fulfilled"?$.value.data:null)}catch(W){console.error(W),Ie.error("Erro ao carregar dados da campanha."),b(null),g([]),N([]),S([]),D(null)}finally{m(!1)}};p.useEffect(()=>{t&&E()},[t,n?.id]);const T=f??n,k=T?.client?.companyName||T?.client?.contactName||T?.clientName||"-",R=!!T?.checkInAt,O=as(T?.checkInDeadlineAt),H=p.useMemo(()=>{if(!T)return"-";const W=as(T.startDate),ae=as(T.endDate);return R?`${Vt(W)} - ${Vt(ae)}`:O?`Check-in at ${Vt(O)}`:`${Vt(W)} - ${Vt(ae)}`},[T,R,O]),te=p.useMemo(()=>{const W=v.filter(F=>F.status===qe.PAGA).reduce((F,$)=>F+Number($.amount||0),0),ae=v.filter(F=>F.status===qe.ABERTA||F.status===qe.VENCIDA).reduce((F,$)=>F+Number($.amount||0),0);return{paid:W,openAmount:ae}},[v]),X=p.useMemo(()=>{const W=G=>G.status===qe.PAGA,ae=G=>G.status===qe.CANCELADA;if(!v.length)return{ok:!0,pending:[]};const F=v.filter(G=>G.type===Ds.UPFRONT&&!ae(G)),$=v.filter(G=>G.type===Ds.RENT&&!ae(G)),Y=$.slice().sort((G,xe)=>{const le=G.sequence??9999,ue=xe.sequence??9999;return le!==ue?le-ue:new Date(G.dueDate).getTime()-new Date(xe.dueDate).getTime()})[0];let Z=[];if(F.length||$.length)Z=[...F,...Y?[Y]:[]];else{const G=Math.min(...v.map(xe=>new Date(xe.dueDate).getTime()));Z=v.filter(xe=>new Date(xe.dueDate).getTime()===G)}const K=Z.filter(G=>!W(G));return{ok:K.length===0,pending:K}},[v]),q=p.useMemo(()=>T?T.approvedAt?new Date(T.approvedAt).getDate():v.length?new Date(v[0].dueDate).getDate():null:null,[T,v]),U=p.useMemo(()=>{const W=F=>F.status===qe.PAGA,ae=F=>F.status===qe.CANCELADA;return v.filter(F=>!W(F)&&!ae(F)).slice().sort((F,$)=>new Date(F.dueDate).getTime()-new Date($.dueDate).getTime())[0]||null},[v]),M=p.useMemo(()=>{const W=v.some(F=>!!F.requiresConfirmation&&F.status!==qe.PAGA&&F.status!==qe.CANCELADA),ae=w.some(F=>!!F.requiresConfirmation);return W||ae},[v,w]),B=A?.faces??[],ee=B.filter(W=>!!W?.photo?.photoUrl).length,me=B.length,J=B.length>0?B.length:T?.reservedUnitsCount??T?.campaignItemsCount??j.length??0;if(!T)return null;const fe=W=>{const ae=W==="CONFIRMADA"?"bg-green-100 text-green-800":W==="CANCELADA"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800";return e.jsx(ht,{className:ae,children:W})};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsx(In,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx(Bn,{children:e.jsx(Un,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:T.name}),e.jsx(gC,{status:T.status})]})})}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:k}),e.jsx("span",{children:""}),e.jsx("span",{children:H}),!!T.totalAmountCents&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:vC(T.totalAmountCents)})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:e.jsxs(ki,{defaultValue:i,className:"h-full flex flex-col min-h-0",children:[e.jsxs(Ti,{className:"w-full justify-start px-6 py-0 h-12 border-b rounded-none bg-transparent overflow-x-auto flex-nowrap",children:[e.jsx(on,{value:"summary",className:"flex-none",children:"Resumo"}),e.jsx(on,{value:"media",className:"flex-none",children:"Veiculaes"}),e.jsx(on,{value:"installations",className:"flex-none",children:"Instalaes OOH"}),e.jsx(on,{value:"billing",className:"flex-none",children:"Financeiro"}),e.jsx(on,{value:"messages",className:"flex-none",children:"Mensagens"})]}),e.jsxs(_n,{value:"summary",className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:[h&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando dados..."}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Unidades planejadas"}),e.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:J})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Check-in"}),e.jsx("p",{className:"text-2xl font-semibold text-purple-900",children:R?"OK":me>0?`${ee}/${me}`:""})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Pago"}),e.jsx("p",{className:"text-2xl font-semibold text-green-900",children:hr(te.paid)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Em Aberto"}),e.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:hr(te.openAmount)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600",children:e.jsx("b",{children:"Resumo rpido"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ht,{className:"bg-gray-100 text-gray-800",children:["Reservas: ",j.length]}),e.jsxs(ht,{className:"bg-gray-100 text-gray-800",children:["Faturas: ",v.length]}),T?.proposalId?e.jsxs(ht,{className:"bg-gray-100 text-gray-800",children:["Proposta: ",T.proposalId.slice(0,8),""]}):null]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["No novo fluxo, as ",e.jsx("b",{children:"reservas"})," so criadas automaticamente ao concluir o ",e.jsx("b",{children:"check-in"})," (1 foto por face). Antes do check-in,  normal a campanha no ter reservas."]})]})]}),e.jsxs(_n,{value:"media",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Reservas da campanha"}),e.jsx(ne,{variant:"outline",size:"sm",onClick:E,disabled:h,children:"Atualizar"})]}),h?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando reservas..."}):j.length===0?e.jsxs("div",{className:"text-sm text-gray-500",children:["Nenhuma reserva encontrada. As reservas sero criadas automaticamente ao concluir o ",e.jsx("b",{children:"check-in"}),"."]}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Ponto / Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden md:table-cell",children:"Responsvel"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden lg:table-cell",children:"Ocupao"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Perodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium text-gray-900",children:W.mediaPointName||"-"}),e.jsx("div",{className:"text-xs text-gray-600",children:W.mediaUnitLabel||W.mediaUnitId})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden md:table-cell",children:W.responsibleCompanyName||W.responsibleOwnerName||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden lg:table-cell",children:W.occupationDays?`${W.occupationDays} dias`:"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[Vt(W.startDate)," - ",Vt(W.endDate)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:typeof W.rentAmount=="number"?hr(Number(W.rentAmount||0)):"-"}),e.jsx("td",{className:"px-4 py-3",children:fe(W.status)})]},W.id))})]})})]}),e.jsxs(_n,{value:"installations",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-blue-900",children:" Check-in de Instalao"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Para iniciar a veiculao, realize o ",e.jsx("b",{children:"check-in"})," enviando 1 foto por face/unidade."]}),!R&&O&&e.jsxs("p",{className:"text-sm text-blue-800",children:["Prazo limite: ",e.jsx("b",{children:Vt(O)})]}),R&&T.checkInAt&&e.jsxs("p",{className:"text-sm text-blue-800",children:["Check-in realizado em: ",e.jsx("b",{children:H6(T.checkInAt)})]}),!R&&A?.blockingReasons?.length?e.jsxs("div",{className:"rounded-lg p-3 text-sm bg-yellow-50 border border-yellow-200 text-yellow-900",children:[e.jsx("div",{className:"font-medium",children:"Pendncias"}),e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-yellow-800 space-y-1",children:A.blockingReasons.slice(0,6).map((W,ae)=>e.jsx("li",{children:W},`${W}-${ae}`))})]}):null,!R&&v.length>0?e.jsxs("div",{className:`rounded-lg p-3 text-sm ${X.ok?"bg-green-50 border border-green-200 text-green-900":"bg-red-50 border border-red-200 text-red-900"}`,children:[X.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in ficar bloqueado",!X.ok&&X.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:X.pending.map(W=>e.jsxs("li",{children:[W.type===Ds.UPFRONT?"Custos iniciais (produo/instalao)":W.type===Ds.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",Vt(W.dueDate)]},W.id))}):null]}):null,!R&&l&&T.status==="EM_INSTALACAO"&&e.jsx("div",{children:e.jsx(ne,{onClick:()=>l(T),disabled:v.length>0&&!X.ok,children:"Realizar check-in"})})]}),B.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No foi possvel listar as faces/unidades desta campanha. (Caso isso persista, verifique se existem itens de campanha.)"}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Face/Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden md:table-cell",children:"Ponto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Foto"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:B.map(W=>{const ae=yC(W?.photo?.photoUrl??null),F=!!ae;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium text-gray-900",children:W.label||W.mediaUnitId}),e.jsx("div",{className:"text-xs text-gray-600",children:W.mediaUnitId})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden md:table-cell",children:W.mediaPointName||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ht,{className:F?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:F?"OK":"Pendente"}),F?e.jsxs("a",{href:ae,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2",children:[e.jsx("img",{src:ae,alt:"Foto do check-in",className:"w-12 h-12 object-cover rounded-md border"}),e.jsx("span",{className:"text-xs text-gray-600",children:"abrir"})]}):e.jsx("span",{className:"text-xs text-gray-500",children:""})]})})]},W.mediaUnitId)})})]})})]}),e.jsxs(_n,{value:"billing",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Faturas da campanha"}),e.jsx(ne,{variant:"outline",size:"sm",onClick:E,disabled:h,children:"Atualizar"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Regra:"})," o primeiro pagamento deve estar ",e.jsx("b",{children:"pago"})," para liberar o check-in."]}),q?e.jsxs(ht,{className:"bg-gray-100 text-gray-800",children:["Recorrncia: dia ",q]}):null]}),U?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:["Prximo vencimento: ",e.jsx("b",{children:Vt(U.dueDate)})]}):null,M?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana marcada como requer confirmao (regra de 30 dias antes do vencimento)."]}):null]}),v.length>0?e.jsx("div",{className:`border rounded-lg p-4 text-sm ${X.ok?"bg-green-50 border-green-200 text-green-900":"bg-red-50 border-red-200 text-red-900"}`,children:X.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado"}):null,h?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando faturas..."}):v.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma fatura vinculada a esta campanha."}):e.jsx("div",{className:"space-y-3",children:v.map(W=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(W.type===Ds.UPFRONT?"Custos iniciais":W.type===Ds.RENT?"Aluguel":"Fatura")+(W.sequence?`  ciclo ${W.sequence}`:"")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Venc.: ",Vt(W.dueDate),"  Valor: ",hr(Number(W.amount||0))]}),W.periodStart&&W.periodEnd?e.jsxs("p",{className:"text-xs text-gray-500",children:["Perodo: ",Vt(W.periodStart)," - ",Vt(W.periodEnd)]}):null,W.requiresConfirmation?e.jsx("p",{className:"text-xs text-blue-700",children:"Requer confirmao (regra de 30 dias antes do vencimento)"}):null]}),e.jsx(ht,{className:W.status===qe.PAGA?"bg-green-100 text-green-800":W.status===qe.VENCIDA?"bg-red-100 text-red-800":W.status===qe.CANCELADA?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:W.status})]}),W.paidAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Pago em ",Vt(W.paidAt)]})]},W.id))}),h?null:e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-gray-900",children:"Faturas futuras (previsto)"}),e.jsx(ht,{className:"bg-gray-100 text-gray-800",children:"Forecast"})]}),w.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No h faturas futuras previstas para esta campanha."}):e.jsx("div",{className:"space-y-3",children:w.map(W=>{const ae=as(W.dueDate),F=as(W.periodStart),$=as(W.periodEnd);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Aluguel",W.sequence?`  ciclo ${W.sequence}`:""]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Venc.: ",Vt(ae),"  Valor: ",hr(Number(W.amount||0))]}),F&&$?e.jsxs("p",{className:"text-xs text-gray-500",children:["Perodo: ",Vt(F)," - ",Vt($)]}):null,W.requiresConfirmation?e.jsx("p",{className:"text-xs text-blue-700",children:"Requer confirmao (regra de 30 dias antes do vencimento)"}):null]}),e.jsx(ht,{className:"bg-gray-100 text-gray-800",children:"Prevista"})]})},W.id)})})]})]}),e.jsx(_n,{value:"messages",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Abra o mdulo ",e.jsx("span",{className:"font-medium",children:"Mensagens"})," para conversar no contexto desta campanha."]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(ne,{onClick:()=>{T&&(s(!1),c(`/app/messages?campaignId=${T.id}`))},children:"Abrir Mensagens"})})]})})]})})]})})})}function G6({open:t,onOpenChange:s,campaign:n,onCheckInComplete:i}){const[l,c]=p.useState(!1),[h,m]=p.useState(!1),[f,b]=p.useState(null),[v,g]=p.useState(!1),[w,N]=p.useState([]),[j,S]=p.useState({}),[A,D]=p.useState({}),E=p.useMemo(()=>n?f?.faces?.length?f.faces.map(B=>({mediaUnitId:B.mediaUnitId,label:B.label??void 0})):f?.expectedUnits?.length?f.expectedUnits.map(B=>({mediaUnitId:B.mediaUnitId,label:B.label??void 0})):(n.items||[]).filter(B=>!!B.mediaUnitId).map(B=>({mediaUnitId:B.mediaUnitId,label:void 0})):[],[n,f?.faces,f?.expectedUnits]),T=p.useMemo(()=>{if(!n)return null;const B=as(f?.checkInDeadlineAt??f?.deadlineAt),ee=as(n.checkInDeadlineAt??null);return B||ee},[n,f?.checkInDeadlineAt,f?.deadlineAt]),k=p.useMemo(()=>T?new Date().getTime()>T.getTime():!1,[T]),R=async()=>{if(n)try{m(!0);const B=await ke.get(`/campaigns/${n.id}/checkin`);b(B.data||null);const ee={};for(const me of B.data?.faces||[])me.photo?.photoUrl&&(ee[me.mediaUnitId]=me.photo.photoUrl);for(const me of B.data?.photos||[])ee[me.mediaUnitId]=me.photoUrl;for(const me of B.data?.expectedUnits||[])me.photoUrl&&(ee[me.mediaUnitId]=me.photoUrl);D(ee)}catch{b(null)}finally{m(!1)}},O=async()=>{if(n)try{g(!0);const B=await ke.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}});N(Array.isArray(B.data)?B.data:[])}catch{N([])}finally{g(!1)}},H=p.useMemo(()=>{if(!n)return{ok:!0,pending:[],nextDue:null};if(!w?.length)return{ok:!0,pending:[],nextDue:null};const B=$=>$.status===qe.PAGA,ee=$=>$.status===qe.CANCELADA,me=w.filter($=>$.type===Ds.UPFRONT&&!ee($)),J=w.filter($=>$.type===Ds.RENT&&!ee($)),fe=J.slice().sort(($,Y)=>{const Z=$.sequence??9999,K=Y.sequence??9999;return Z!==K?Z-K:new Date($.dueDate).getTime()-new Date(Y.dueDate).getTime()})[0];let W=[];if(me.length||J.length)W=[...me,...fe?[fe]:[]];else{const $=Math.min(...w.map(Y=>new Date(Y.dueDate).getTime()));W=w.filter(Y=>new Date(Y.dueDate).getTime()===$)}const ae=W.filter($=>!B($)),F=w.filter($=>!B($)&&!ee($)).slice().sort(($,Y)=>new Date($.dueDate).getTime()-new Date(Y.dueDate).getTime())[0]||null;return{ok:ae.length===0,pending:ae,nextDue:F}},[n,w]),te=p.useMemo(()=>n?n.approvedAt?new Date(n.approvedAt).getDate():H.nextDue?new Date(H.nextDue.dueDate).getDate():w?.length?new Date(w[0].dueDate).getDate():null:null,[n,w,H.nextDue]),X=p.useMemo(()=>w?.some(B=>!!B.requiresConfirmation&&B.status!==qe.PAGA&&B.status!==qe.CANCELADA),[w]);if(p.useEffect(()=>{t&&(S({}),D({}),R(),O())},[t,n?.id]),!n)return null;const q=(B,ee)=>{S(me=>({...me,[B]:ee}))},U=async()=>{try{const B=await ke.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),ee=Array.isArray(B.data)?B.data:[];if(N(ee),ee.length===0)return!0;const me=Y=>Y.status===qe.PAGA,J=Y=>Y.status===qe.CANCELADA,fe=ee.filter(Y=>Y.type===Ds.UPFRONT&&!J(Y)),W=ee.filter(Y=>Y.type===Ds.RENT&&!J(Y)),ae=W.slice().sort((Y,Z)=>{const K=Y.sequence??9999,G=Z.sequence??9999;return K!==G?K-G:new Date(Y.dueDate).getTime()-new Date(Z.dueDate).getTime()})[0];let F=[];if(fe.length||W.length)F=[...fe,...ae?[ae]:[]];else{const Y=Math.min(...ee.map(Z=>new Date(Z.dueDate).getTime()));F=ee.filter(Z=>new Date(Z.dueDate).getTime()===Y)}return F.filter(Y=>!me(Y)).length>0?(Ie.error("Check-in bloqueado: pagamento inicial pendente."),!1):!0}catch{return!0}},M=async()=>{if(l)return;if(n.status!=="EM_INSTALACAO"){Ie.error("Check-in s pode ser feito quando a campanha estiver em EM_INSTALACAO.");return}if(k){Ie.error("Prazo de check-in expirado.");return}const B=E.map(J=>J.mediaUnitId);if(B.length===0){Ie.error("Nenhuma unidade encontrada para check-in.");return}if(B.filter(J=>!A[J]&&!j[J]).length>0){Ie.error("Envie 1 foto para todas as faces/unidades para concluir o check-in.");return}if(await U())try{c(!0);for(const fe of B){if(A[fe])continue;const W=j[fe];if(!W)continue;const ae=new FormData;ae.append("file",W);const F=await ke.post(`/campaigns/${n.id}/checkin/${fe}/photo`,ae,{headers:{"Content-Type":"multipart/form-data"}});F.data?.photoUrl&&D($=>({...$,[fe]:F.data.photoUrl}))}const J=await ke.post(`/campaigns/${n.id}/checkin/confirm`);Ie.success("Check-in realizado com sucesso."),s(!1),i?.(J.data)}catch(J){console.error(J);const fe=J?.response?.data?.message||"Erro ao confirmar check-in.";Ie.error(fe)}finally{c(!1)}};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Bn,{children:e.jsxs(Un,{children:["Check-in - ",n.name]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-1",children:[e.jsx("p",{className:"text-sm text-blue-900",children:"Envie 1 foto por face/unidade. O check-in s ser concludo quando todas as fotos estiverem presentes."}),T&&e.jsxs("p",{className:"text-xs text-blue-800",children:["Prazo limite: ",e.jsx("b",{children:Vt(T)}),k?e.jsx("span",{className:"ml-2 text-red-700",children:"(expirado)"}):null]}),e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("b",{children:"Importante:"})," o pagamento inicial deve estar quitado para liberar o check-in."]}),te?e.jsxs("p",{className:"text-xs text-blue-800",children:["Cobrana recorrente: vencimento todo dia ",e.jsx("b",{children:te}),"."]}):null,X?e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana que requer confirmao do cliente (regra de 30 dias antes do vencimento)."]}):null]}),v?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando status de pagamento..."}):w.length>0?e.jsxs("div",{className:`border rounded-lg p-4 ${H.ok?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm ${H.ok?"text-green-900":"text-red-900"}`,children:H.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado"}),H.nextDue?e.jsxs(ht,{className:"bg-gray-100 text-gray-800",children:["Prximo venc.: ",Vt(H.nextDue.dueDate)]}):null]}),!H.ok&&H.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:H.pending.map(B=>e.jsxs("li",{children:[B.type===Ds.UPFRONT?"Custos iniciais (produo/instalao)":B.type===Ds.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",Vt(B.dueDate),"  ",hr(Number(B.amount||0))]},B.id))}):null,X?e.jsxs("p",{className:"mt-2 text-xs text-gray-700",children:["Ateno: h faturas marcadas como ",e.jsx("b",{children:"necessita confirmao"})," (regra de 30 dias antes)."]}):null]}):null,e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm text-gray-900",children:"Unidades para check-in"}),e.jsx(ne,{variant:"outline",size:"sm",onClick:R,disabled:h,children:h?"Atualizando...":"Atualizar"})]}),E.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma unidade encontrada."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Foto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map(B=>{const ee=A[B.mediaUnitId],me=j[B.mediaUnitId],J=!!ee||!!me;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B.label||`ID: ${B.mediaUnitId}`}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(we,{className:"text-xs text-gray-600",children:"Enviar foto"}),e.jsx("input",{type:"file",accept:"image/*",onChange:fe=>q(B.mediaUnitId,fe.target.files?.[0]||null)}),ee?e.jsx("a",{href:ee,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline",children:"Ver foto enviada"}):me?e.jsx("div",{className:"text-xs text-gray-600",children:me.name}):null]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ht,{className:J?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:J?"OK":"Pendente"})})]},B.mediaUnitId)})})]})}),f?.blockers?.length||f?.blockingReasons?.length||f?.missingPhotos?.length?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-yellow-900 mb-2",children:"Pendncias"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm text-yellow-800 space-y-1",children:[(f?.blockers||f?.blockingReasons||[]).map(B=>e.jsx("li",{children:B},B)),f?.missingPhotos?.length?e.jsxs("li",{children:["Faltam fotos para ",f.missingPhotos.length," unidade(s)."]},"missing-photos"):null]})]}):null,e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx(ne,{variant:"outline",onClick:()=>s(!1),disabled:l,children:"Cancelar"}),e.jsx(ne,{onClick:M,disabled:l||k||E.length===0||!!(f?.blockers?.length||f?.blockingReasons?.length)||w.length>0&&!H.ok,children:l?"Confirmando...":"Confirmar Check-in"})]})]})]})})}function K6({open:t,onOpenChange:s,campaign:n}){const[i,l]=p.useState("usage"),[c,h]=p.useState(!1),[m,f]=p.useState(!1),[b,v]=p.useState(null),g=n?.id??null,w=p.useMemo(()=>`Relatrio  ${n?.name||n?.proposalTitle||"Campanha"}`,[n?.name,g]),N=async()=>{if(g)try{h(!0),v(null);const k=(await ke.get(`/campaigns/${g}/report`,{params:{type:i,mode:"preview"}})).data;v(k?.preview??k?.details??null)}catch(T){Ie.error(T?.response?.data?.message||"Falha ao gerar relatrio")}finally{h(!1)}};p.useEffect(()=>{if(t){if(!g){v(null);return}N()}},[t,g,i]);const j=T=>{if(!T)return null;const k=T.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),R=(k?.[1]||k?.[2])?.trim();if(!R)return null;try{return decodeURIComponent(R)}catch{return R}},S=async T=>{if(g)try{f(!0);const k=await ke.get(`/campaigns/${g}/report`,{params:{type:i,format:T,mode:"download"},responseType:"blob"}),R=k.headers?.["content-type"]||(T==="pdf"?"application/pdf":"text/csv"),O=k.headers?.["content-disposition"],H=j(O)||`relatorio-${g}.${T}`,te=new Blob([k.data],{type:R}),X=window.URL.createObjectURL(te),q=document.createElement("a");q.href=X,q.download=H,document.body.appendChild(q),q.click(),q.remove(),window.URL.revokeObjectURL(X)}catch(k){Ie.error(k?.response?.data?.message||"Falha ao baixar relatrio")}finally{f(!1)}},A=b?.cover||null,D=Array.isArray(b?.photos)?b.photos:[],E=b?.summary||null;return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsx(In,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx(Bn,{children:e.jsx(Un,{children:w})}),e.jsxs("div",{className:"mt-4 flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{className:"space-y-2 md:max-w-sm",children:[e.jsx(we,{children:"Tipo de relatrio"}),e.jsxs(At,{value:i,onValueChange:T=>l(T),children:[e.jsx(Et,{className:"w-full",children:e.jsx(Pt,{placeholder:"Escolha o relatrio"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"usage",children:"Veiculao (geral)"}),e.jsx(De,{value:"checkin",children:"Check-in (fotos)"}),e.jsx(De,{value:"media",children:"Mdias / Unidades"}),e.jsx(De,{value:"billing",children:"Faturamento"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-start md:justify-end gap-2",children:[e.jsx(ne,{variant:"outline",onClick:N,disabled:!g||c,children:c?"Gerando...":"Atualizar"}),e.jsx(ne,{variant:"outline",onClick:()=>S("csv"),disabled:!g||c||m,children:m?"Baixando...":"Baixar CSV"}),e.jsx(ne,{onClick:()=>S("pdf"),disabled:!g||c||m,children:m?"Baixando...":"Baixar PDF"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:g?c?e.jsx("div",{className:"text-sm text-gray-600",children:"Gerando prvia..."}):b?e.jsxs(e.Fragment,{children:[A?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Capa"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:A.title||n?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("div",{className:"text-sm text-gray-900",children:A.clientName||n?.clientName||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsx("div",{className:"text-sm text-gray-900",children:A.startDate||A.endDate?`${Vt(A.startDate)}  ${Vt(A.endDate)}`:n?.startDate||n?.endDate?`${Vt(n?.startDate)}  ${Vt(n?.endDate)}`:"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Gerado em"}),e.jsx("div",{className:"text-sm text-gray-900",children:Vt(as(A.generatedAt)||new Date)})]})]})]}):null,E?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Resumo"}),e.jsx("div",{className:"mt-2 text-sm text-gray-900 whitespace-pre-wrap",children:E.text||E})]}):null,D.length>0?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Fotos"}),e.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-3",children:D.slice(0,24).map((T,k)=>{const R=T.photoUrl||T.url||null,O=yC(R);return e.jsx("a",{href:O||void 0,target:"_blank",rel:"noreferrer",className:"block",children:e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[O?e.jsx("img",{src:O,alt:"Foto",className:"w-full h-28 object-cover"}):e.jsx("div",{className:"w-full h-28 bg-gray-50 flex items-center justify-center text-xs text-gray-500",children:"sem foto"}),e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"text-xs text-gray-600 truncate",children:T.label||T.mediaUnitLabel||T.mediaUnitId||"-"})})]})},`${T.mediaUnitId||k}-${k}`)})}),D.length>24?e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Mostrando 24 de ",D.length," fotos."]}):null]}):null]}):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma prvia disponvel."}):e.jsx("div",{className:"text-sm text-gray-600",children:"Selecione uma campanha para gerar o relatrio."})})]})})})}function X6({open:t,onOpenChange:s,campaign:n}){const[i,l]=p.useState(!1),[c,h]=p.useState([]),[m,f]=p.useState([]),b=async()=>{if(n)try{l(!0);try{const R=(await ke.get(`/campaigns/${n.id}/details`))?.data;if(R&&typeof R=="object"){Array.isArray(R.invoices)?h(R.invoices):h([]),Array.isArray(R.forecastInvoices)?f(R.forecastInvoices):f([]);return}}catch{}const[E,T]=await Promise.allSettled([ke.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),ke.get("/billing-invoices/forecast",{params:{campaignId:n.id}})]);h(E.status==="fulfilled"&&Array.isArray(E.value.data)?E.value.data:[]),f(T.status==="fulfilled"&&Array.isArray(T.value.data)?T.value.data:[])}catch(E){console.error(E),Ie.error("Erro ao carregar faturas da campanha."),h([]),f([])}finally{l(!1)}};p.useEffect(()=>{t&&b()},[t,n?.id]);const v=p.useMemo(()=>{const E=c.filter(R=>R.status===qe.PAGA).reduce((R,O)=>R+Number(O.amount||0),0),T=c.filter(R=>R.status===qe.ABERTA||R.status===qe.VENCIDA).reduce((R,O)=>R+Number(O.amount||0),0),k=m.reduce((R,O)=>R+Number(O.amount||0),0);return{paid:E,openAmount:T,forecastAmount:k}},[c,m]),g=p.useMemo(()=>{const E=X=>X.status===qe.PAGA,T=X=>X.status===qe.CANCELADA;if(!c.length)return{ok:!0,pending:[]};const k=c.filter(X=>X.type===Ds.UPFRONT&&!T(X)),R=c.filter(X=>X.type===Ds.RENT&&!T(X)),O=R.slice().sort((X,q)=>{const U=X.sequence??9999,M=q.sequence??9999;return U!==M?U-M:new Date(X.dueDate).getTime()-new Date(q.dueDate).getTime()})[0];let H=[];if(k.length||R.length)H=[...k,...O?[O]:[]];else{const X=Math.min(...c.map(q=>new Date(q.dueDate).getTime()));H=c.filter(q=>new Date(q.dueDate).getTime()===X)}const te=H.filter(X=>!E(X));return{ok:te.length===0,pending:te}},[c]),w=p.useMemo(()=>n?n.approvedAt?new Date(n.approvedAt).getDate():c.length?new Date(c[0].dueDate).getDate():null:null,[n,c]),N=p.useMemo(()=>{const E=k=>k.status===qe.PAGA,T=k=>k.status===qe.CANCELADA;return c.filter(k=>!E(k)&&!T(k)).slice().sort((k,R)=>new Date(k.dueDate).getTime()-new Date(R.dueDate).getTime())[0]||null},[c]),j=p.useMemo(()=>{const E=c.some(k=>!!k.requiresConfirmation&&k.status!==qe.PAGA&&k.status!==qe.CANCELADA),T=m.some(k=>!!k.requiresConfirmation);return E||T},[c,m]);if(!n)return null;const S=E=>{switch(E){case qe.PAGA:return"Paga";case qe.VENCIDA:return"Vencida";case qe.CANCELADA:return"Cancelada";default:return"Aberta"}},A=E=>{switch(E){case pn.PIX:return"PIX";case pn.BOLETO:return"Boleto";case pn.CARTAO:return"Carto";case pn.TRANSFERENCIA:return"Transferncia";default:return"-"}},D=()=>{Ie.info("Integrao com tela Financeiro ser adicionada no mdulo financeiro.")};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsx(In,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx(Bn,{children:e.jsxs(Un,{children:["Faturamento  ",n.name]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Faturas vinculadas a esta campanha"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-gray-900",children:"Resumo Financeiro"}),e.jsx(ne,{variant:"outline",onClick:D,children:"Ver no Financeiro"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Regra:"})," o primeiro pagamento deve estar ",e.jsx("b",{children:"pago"})," para liberar o check-in."]}),w?e.jsxs(ht,{className:"bg-gray-100 text-gray-800",children:["Recorrncia: dia ",w]}):null]}),N?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:["Prximo vencimento: ",e.jsx("b",{children:Vt(N.dueDate)})]}):null,j?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana marcada como requer confirmao (regra de 30 dias antes do vencimento)."]}):null]}),c.length>0?e.jsxs("div",{className:`border rounded-lg p-4 text-sm ${g.ok?"bg-green-50 border-green-200 text-green-900":"bg-red-50 border-red-200 text-red-900"}`,children:[g.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado",!g.ok&&g.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:g.pending.map(E=>e.jsxs("li",{children:[E.type===Ds.UPFRONT?"Custos iniciais (produo/instalao)":E.type===Ds.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",Vt(E.dueDate),"  ",hr(Number(E.amount||0))]},E.id))}):null]}):null]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Pago"}),e.jsx("p",{className:"text-gray-900",children:hr(v.paid)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor em Aberto"}),e.jsx("p",{className:"text-gray-900",children:hr(v.openAmount)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Faturas Futuras (previsto)"}),e.jsx("p",{className:"text-gray-900",children:hr(v.forecastAmount)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Faturas"}),i?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando faturas..."}):c.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma fatura encontrada para esta campanha."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Mtodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Pagamento"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Vt(E.dueDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:hr(Number(E.amount||0))}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ht,{className:E.status===qe.PAGA?"bg-green-100 text-green-800":E.status===qe.VENCIDA?"bg-red-100 text-red-800":E.status===qe.CANCELADA?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:S(E.status)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:A(E.paymentMethod)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:E.paidAt?Vt(E.paidAt):"-"})]},E.id))})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Faturas futuras (previsto)"}),e.jsx(ht,{className:"bg-gray-100 text-gray-800",children:"Forecast"})]}),i?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando previso..."}):m.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No h faturas futuras previstas para esta campanha."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Seq."}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Perodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Ateno"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(E=>{const T=as(E.dueDate),k=as(E.periodStart),R=as(E.periodEnd);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:E.sequence??"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Vt(T)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[Vt(k),"  ",Vt(R)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:hr(Number(E.amount||0))}),e.jsx("td",{className:"px-4 py-3",children:E.requiresConfirmation?e.jsx(ht,{className:"bg-blue-100 text-blue-800",children:"Requer confirmao"}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})})]},E.id)})})]})})]})]})]})]})})})}function Y6(){const[t,s]=p.useState(""),[n,i]=p.useState("all"),{campaigns:l,loading:c,error:h,refetch:m}=V6({search:t||void 0,status:n==="all"?void 0:n}),[f,b]=p.useState(null),[v,g]=p.useState("summary"),[w,N]=p.useState(null),[j,S]=p.useState(null),[A,D]=p.useState(null),E=p.useMemo(()=>{const q=new Date().getMonth(),U=new Date().getFullYear(),M=l.filter(J=>J.status===mn.EM_VEICULACAO),B=l.filter(J=>J.status===mn.EM_INSTALACAO),ee=l.filter(J=>{if(J.status!==mn.FINALIZADA)return!1;const fe=as(J.endDate);return fe?fe.getMonth()===q&&fe.getFullYear()===U:!1}),me=M.reduce((J,fe)=>{const W=Number(fe.totalAmountCents||0),ae=W>0?W/100:0;return J+ae},0);return{emVeiculacao:M.length,emInstalacao:B.length,finalizadasMes:ee.length,valorEmVeiculacao:me}},[l]),T=p.useMemo(()=>l.filter(q=>q.status===mn.EM_INSTALACAO||q.status===mn.EM_VEICULACAO||q.status===mn.ATIVA),[l]),k=p.useMemo(()=>l.filter(q=>q.status===mn.FINALIZADA),[l]),R=p.useMemo(()=>l.filter(q=>q.status===mn.CANCELADA),[l]),O=(q,U="summary")=>{b(q),g(U)},H=q=>{N(q)},te=q=>{S(q)},X=q=>{D(q)};return e.jsxs("div",{className:"p-8",children:[c&&e.jsx("div",{children:"Carregando campanhas..."}),!c&&h&&e.jsx("div",{children:"Erro ao carregar campanhas."}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Campanhas"}),e.jsx("p",{className:"text-gray-600",children:"Acompanhe campanhas em execuo (Campaign + CampaignItem)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Em Veiculao"}),e.jsx("p",{className:"text-gray-900",children:E.emVeiculacao})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Em Instalao"}),e.jsx("p",{className:"text-gray-900",children:E.emInstalacao})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Finalizadas (Ms)"}),e.jsx("p",{className:"text-gray-900",children:E.finalizadasMes})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Valor em Veiculao"}),e.jsx("p",{className:"text-gray-900",children:hr(E.valorEmVeiculacao)})]})})]}),e.jsxs(ki,{defaultValue:"active",className:"space-y-6",children:[e.jsxs(Ti,{children:[e.jsx(on,{value:"active",children:"Em Andamento"}),e.jsx(on,{value:"finished",children:"Finalizadas"}),e.jsx(on,{value:"cancelled",children:"Canceladas"}),e.jsx(on,{value:"installations",children:"Instalaes OOH"})]}),e.jsx(_n,{value:"active",children:e.jsx(nx,{campaigns:T,showAllActions:!0,onViewDetails:O,onCheckIn:H,onGenerateReport:te,onViewBilling:X})}),e.jsx(_n,{value:"finished",children:e.jsx(nx,{campaigns:k,showAllActions:!1,onViewDetails:O,onGenerateReport:te})}),e.jsx(_n,{value:"cancelled",children:e.jsx(nx,{campaigns:R,showAllActions:!1,onViewDetails:O,onGenerateReport:te})}),e.jsx(_n,{value:"installations",children:e.jsx(q6,{campaigns:l,onViewDetails:q=>O(q,"installations"),onCheckIn:H})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Fluxo de Campanhas"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Campanha  criada automaticamente quando Proposta  aprovada. Status:"," ",e.jsx("strong",{children:"EM_INSTALACAO"})," (OOH sendo instalado)  ",e.jsx("strong",{children:"EM_VEICULACAO"})," (no ar)  ",e.jsx("strong",{children:"FINALIZADA"})," (ou ",e.jsx("strong",{children:"CANCELADA"})," por inadimplncia)"]})]}),e.jsx(Z6,{open:!!f,onOpenChange:q=>!q&&b(null),campaign:f,defaultTab:v,onRequestCheckIn:H}),e.jsx(G6,{open:!!w,onOpenChange:q=>!q&&N(null),campaign:w,onCheckInComplete:()=>{m()}}),e.jsx(K6,{open:!!j,onOpenChange:q=>!q&&S(null),campaign:j}),e.jsx(X6,{open:!!A,onOpenChange:q=>!q&&D(null),campaign:A})]})}function Q6(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(!1),[c,h]=p.useState(null),m=async()=>{try{l(!0),h(null);const w=(await ke.get("/reservations",{params:t})).data,N=Array.isArray(w)?w:w.data;n(N)}catch(g){h(g)}finally{l(!1)}},f=async g=>{const w=await ke.post("/reservations",g);return n(N=>[...N,w.data]),w.data},b=async(g,w)=>{const N=w?.status;if(!N)throw new Error("status  obrigatrio para atualizar a reserva");const j=await ke.patch(`/reservations/${g}/status`,{status:N});return n(S=>S.map(A=>A.id===g?j.data:A)),j.data},v=async g=>{await ke.delete(`/reservations/${g}`),n(w=>w.filter(N=>N.id!==g))};return p.useEffect(()=>{m()},[t.mediaUnitId,t.campaignId,t.proposalId,t.startDate,t.endDate,t.status]),{reservations:s,loading:i,error:c,refetch:m,createReservation:f,updateReservation:b,deleteReservation:v}}function bC({status:t}){const s=i=>{switch(i){case mr.CONFIRMADA:return"bg-green-100 text-green-800";case mr.RESERVADA:return"bg-yellow-100 text-yellow-800";case mr.CANCELADA:return"bg-red-100 text-red-800"}},n=i=>{switch(i){case mr.CONFIRMADA:return"Confirmada";case mr.RESERVADA:return"Em negociao";case mr.CANCELADA:return"Cancelada"}};return e.jsx(ht,{className:s(t),children:n(t)})}function J6({reservation:t,clientName:s,unitLabel:n,pointName:i,amount:l,onClick:c}){const h=t.mediaUnitType;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:c,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:"text-gray-900",children:s||"Cliente"}),e.jsx(bC,{status:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:i||"Unidade de Mdia"}),e.jsxs("p",{className:"text-gray-500 text-xs mb-2",children:[n||t.mediaUnitLabel||"Unidade","  ",h===kr.FACE?"Face":h===kr.SCREEN?"Tela":"-"]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[new Date(t.startDate).toLocaleDateString("pt-BR")," -"," ",new Date(t.endDate).toLocaleDateString("pt-BR")]}),e.jsx("span",{className:"text-gray-900",children:typeof l=="number"?`R$ ${l.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"R$ -"})]}),t.proposalTitle&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Proposta: ",t.proposalTitle]}),!t.proposalTitle&&t.proposalId&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Proposta: ...",t.proposalId.slice(-6)]}),t.campaignName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Campanha: ",t.campaignName]}),!t.campaignName&&t.campaignId&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Campanha: ...",t.campaignId.slice(-6)]})]})}function Bb(t,s){if(Number.isNaN(t.getTime())||Number.isNaN(s.getTime()))return null;const n=s.getTime()-t.getTime();return n<0?null:Math.floor(n/(1e3*60*60*24))+1}function e9(t){if(!t)return;const s=t.rentTotalSnapshot;if(typeof s=="number"&&Number.isFinite(s)&&s>0)return s;const n=t.rentAmount,i=t.occupationDays;if(typeof n=="number"&&Number.isFinite(n)&&n>0){const v=typeof i=="number"&&i>0?i:void 0,g=new Date(t.startDate),w=new Date(t.endDate),N=Bb(g,w),j=v??(N||void 0);return j?n*j:n}const l=t.mediaUnitPriceDay,c=t.mediaPointBasePriceDay,h=typeof l=="number"&&Number.isFinite(l)&&l>0?l:typeof c=="number"&&Number.isFinite(c)&&c>0?c:void 0;if(typeof h!="number")return;const m=new Date(t.startDate),f=new Date(t.endDate),b=Bb(m,f);if(b)return h*b}function sl(t){return typeof t!="number"||!Number.isFinite(t)?"":`R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}function fo(t){if(!t)return"";const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("pt-BR")}function t9({status:t}){const s="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(t){case qe.PAGA:return e.jsx("span",{className:`${s} bg-green-100 text-green-700`,children:"Paga"});case qe.ABERTA:return e.jsx("span",{className:`${s} bg-yellow-100 text-yellow-800`,children:"Em aberto"});case qe.VENCIDA:return e.jsx("span",{className:`${s} bg-red-100 text-red-700`,children:"Vencida"});case qe.CANCELADA:return e.jsx("span",{className:`${s} bg-gray-100 text-gray-600`,children:"Cancelada"});default:return e.jsx("span",{className:`${s} bg-gray-100 text-gray-700`,children:t})}}function n9({open:t,onOpenChange:s,reservation:n,clientName:i,unitLabel:l,pointName:c,amount:h}){const m=Vs(),[f,b]=p.useState([]),[v,g]=p.useState([]),[w,N]=p.useState(!1),[j,S]=p.useState(!1),[A,D]=p.useState(null),E=n?.mediaUnitType,T=p.useMemo(()=>h??n?.estimatedAmount??e9(n),[h,n]),k=p.useMemo(()=>{const q=f.filter(M=>M.status===qe.PAGA).reduce((M,B)=>M+Number(B.amount??0),0),U=f.filter(M=>M.status===qe.ABERTA||M.status===qe.VENCIDA).reduce((M,B)=>M+Number(B.amount??0),0);return{paid:q,open:U}},[f]),R=async()=>{if(!n)return;const q={orderBy:"dueDate",orderDirection:"asc"};if(n.campaignId)q.campaignId=n.campaignId;else if(n.proposalId)q.proposalId=n.proposalId;else{b([]);return}N(!0),D(null);try{const U=await ke.get("/billing-invoices",{params:q}),B=(Array.isArray(U.data)?U.data:[]).map(ee=>({...ee,amount:Number(ee.amount)}));b(B)}catch(U){D(U?.response?.data?.message||"No foi possvel carregar as faturas."),b([])}finally{N(!1)}},O=async()=>{if(!n?.campaignId){g([]);return}S(!0);try{const q=await ke.get("/billing-invoices/forecast",{params:{campaignId:n.campaignId}}),M=(Array.isArray(q.data)?q.data:[]).map(B=>({...B,amount:Number(B.amount)}));g(M)}catch{g([])}finally{S(!1)}};p.useEffect(()=>{t&&n&&(R(),O())},[t,n?.id]);const H=n?.id?n.id.slice(-6):"",te=()=>{n?.proposalId&&(s(!1),m(`/app/proposals?proposalId=${n.proposalId}`))},X=()=>{n?.campaignId&&(s(!1),m(`/app/campaigns?campaignId=${n.campaignId}`))};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsx(In,{className:"p-0 w-[96vw] max-w-5xl h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"px-6 py-5 border-b",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 pr-10",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Reserva ",H||""]}),n?.status&&e.jsx(bC,{status:n.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c||n?.mediaPointName||"Ponto de Mdia"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Valor estimado"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:sl(T)})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:i||n?.clientName||""})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Unidade"}),e.jsxs("p",{className:"text-sm text-gray-900 truncate",children:[l||n?.mediaUnitLabel||""," "," ",E===kr.FACE?"Face":E===kr.SCREEN?"Tela":""]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[fo(n?.startDate)," - ",fo(n?.endDate)]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden px-6 py-5",children:e.jsxs(ki,{defaultValue:"resumo",className:"h-full",children:[e.jsxs(Ti,{className:"w-full md:w-fit",children:[e.jsxs(on,{value:"resumo",className:"gap-2",children:[e.jsx(zj,{className:"w-4 h-4"}),"Resumo"]}),e.jsxs(on,{value:"origem",className:"gap-2",children:[e.jsx(gr,{className:"w-4 h-4"}),"Origem"]}),e.jsxs(on,{value:"financeiro",className:"gap-2",children:[e.jsx(Vd,{className:"w-4 h-4"}),"Financeiro"]})]}),e.jsx(_n,{value:"resumo",className:"flex-1 overflow-hidden",children:e.jsx(bc,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Detalhes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Proposta"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.proposalTitle||(n?.proposalId?`...${n.proposalId.slice(-6)}`:"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.campaignName||(n?.campaignId?`...${n.campaignId.slice(-6)}`:"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Dias de ocupao"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.occupationDays??""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Aluguel (snapshot)"}),e.jsx("p",{className:"text-sm text-gray-900",children:sl(n?.rentTotalSnapshot??null)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Custos iniciais (snapshot)"}),e.jsx("p",{className:"text-sm text-gray-900",children:sl(n?.upfrontTotalSnapshot??null)})]})]})]}),e.jsx("div",{className:"rounded-lg bg-indigo-50 border border-indigo-100 p-4",children:e.jsx("p",{className:"text-sm text-indigo-900",children:"No novo fluxo, as reservas so geradas automaticamente no check-in da campanha e ficam disponveis aqui apenas para consulta."})})]})})}),e.jsx(_n,{value:"origem",className:"flex-1 overflow-hidden",children:e.jsx(bc,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Origem da reserva"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reservas so geradas automaticamente no check-in da campanha e ficam disponveis aqui apenas para consulta."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Proposta"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:n?.proposalTitle||""}),e.jsx("div",{className:"mt-2",children:e.jsx(ne,{variant:"outline",size:"sm",onClick:te,disabled:!n?.proposalId,children:"Ver Proposta"})})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:n?.campaignName||""}),e.jsx("div",{className:"mt-2",children:e.jsx(ne,{variant:"outline",size:"sm",onClick:X,disabled:!n?.campaignId,children:"Ver Campanha"})})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Responsvel (proprietrio/empresa)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empresa"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.responsibleCompanyName||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nome"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.responsibleOwnerName||""})]})]})]})]})})}),e.jsx(_n,{value:"financeiro",className:"flex-1 overflow-hidden",children:e.jsx(bc,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Resumo financeiro"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Faturas vinculadas  campanha/proposta desta reserva."})]}),e.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{R(),O()},disabled:w||j,className:"gap-2",children:[e.jsx(oE,{className:"w-4 h-4"}),"Atualizar"]})]}),A&&e.jsx("p",{className:"text-sm text-red-600 mt-3",children:A}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-green-50 border border-green-100 p-3",children:[e.jsx("p",{className:"text-xs text-green-700",children:"Valor pago"}),e.jsx("p",{className:"text-lg font-semibold text-green-800",children:sl(k.paid)})]}),e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-100 p-3",children:[e.jsx("p",{className:"text-xs text-yellow-800",children:"Em aberto"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-900",children:sl(k.open)})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Faturas"}),w?e.jsx("p",{className:"text-sm text-gray-600",children:"Carregando faturas..."}):f.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nenhuma fatura encontrada para esta reserva."}):e.jsx("div",{className:"space-y-2",children:f.map(q=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(t9,{status:q.status}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.type==="UPFRONT"?"Custos iniciais":q.type==="RENT"?`Aluguel ${q.sequence?`#${q.sequence}`:""}`:"Fatura"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Venc.: ",fo(q.dueDate),q.periodStart&&q.periodEnd?`  Perodo: ${fo(q.periodStart)} - ${fo(q.periodEnd)}`:""]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:sl(Number(q.amount))})})]},q.id))})]}),n?.campaignId&&e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Faturas futuras (previso)"}),j?e.jsx("p",{className:"text-sm text-gray-600",children:"Carregando previso..."}):v.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Sem previso de faturas futuras."}):e.jsx("div",{className:"space-y-2",children:v.map(q=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.type==="UPFRONT"?"Custos iniciais":q.type==="RENT"?`Aluguel ${q.sequence?`#${q.sequence}`:""}`:"Fatura"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Venc.: ",fo(q.dueDate),q.periodStart&&q.periodEnd?`  Perodo: ${fo(q.periodStart)} - ${fo(q.periodEnd)}`:""]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:sl(Number(q.amount))})})]},q.id))})]})]})})})]})})]})})})}function Ub(t,s){const n=new Date(t),i=new Date(s);n.setHours(0,0,0,0),i.setHours(0,0,0,0);const l=i.getTime()-n.getTime();return l<0?0:Math.floor(l/864e5)+1}function Vb(t){const s=t.rentTotalSnapshot;if(typeof s=="number"&&Number.isFinite(s)&&s>0)return s;const n=t.rentAmount,i=t.occupationDays;if(typeof n=="number"&&Number.isFinite(n)&&n>0){const v=typeof i=="number"&&i>0?i:void 0,g=new Date(t.startDate),w=new Date(t.endDate),N=Ub(g,w),j=v??(N||void 0);return j?n*j:n}const l=t.mediaUnitPriceDay,c=t.mediaPointBasePriceDay,h=typeof l=="number"&&Number.isFinite(l)&&l>0?l:typeof c=="number"&&Number.isFinite(c)&&c>0?c:void 0;if(typeof h!="number")return;const m=new Date(t.startDate),f=new Date(t.endDate),b=Ub(m,f);if(b)return h*b}function s9(){const[t,s]=p.useState(new Date),[n,i]=p.useState(new Date),[l,c]=p.useState("ALL"),[h,m]=p.useState(""),[f,b]=p.useState(null),v=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],g=X=>{const q=X.getFullYear(),U=X.getMonth(),M=new Date(q,U,1),ee=new Date(q,U+1,0).getDate(),me=M.getDay();return{daysInMonth:ee,startingDayOfWeek:me}},{daysInMonth:w,startingDayOfWeek:N}=g(t),j=()=>{const X=new Date(t.getFullYear(),t.getMonth()-1);s(X),i(null)},S=()=>{const X=new Date(t.getFullYear(),t.getMonth()+1);s(X),i(null)},A=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),D=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString(),{reservations:E,loading:T,error:k}=Q6({startDate:A,endDate:D,status:l==="ALL"?void 0:l}),R=p.useMemo(()=>{const X=new Set,q=t.getFullYear(),U=t.getMonth(),M=new Date(q,U,1);M.setHours(0,0,0,0);const B=new Date(q,U+1,0);B.setHours(0,0,0,0);for(const ee of E){const me=new Date(ee.startDate),J=new Date(ee.endDate);if(Number.isNaN(me.getTime())||Number.isNaN(J.getTime())||(me.setHours(0,0,0,0),J.setHours(0,0,0,0),J<M||me>B))continue;const fe=me<M?M:me,W=J>B?B:J;for(let ae=new Date(fe);ae<=W;ae.setDate(ae.getDate()+1))ae.getMonth()===U&&ae.getFullYear()===q&&X.add(ae.getDate())}return X},[E,t]),O=p.useMemo(()=>{const X=E.filter(M=>M.status!==mr.CANCELADA).length,q=E.filter(M=>M.status===mr.CONFIRMADA).length,U=E.filter(M=>M.status!==mr.CANCELADA).reduce((M,B)=>M+(Vb(B)??0),0);return{activeCount:X,confirmedCount:q,totalAmount:U}},[E]),H=p.useMemo(()=>{if(!n)return[];const X=new Date(n);X.setHours(0,0,0,0);const q=new Date(n);q.setHours(23,59,59,999);const U=E.filter(B=>{const ee=new Date(B.startDate).getTime(),me=new Date(B.endDate).getTime();return ee<=q.getTime()&&me>=X.getTime()});if(!h)return U;const M=h.toLowerCase();return U.filter(B=>[B.clientName,B.mediaPointName,B.mediaUnitLabel,B.campaignName,B.proposalTitle].filter(Boolean).join(" ").toLowerCase().includes(M))},[n,E,h]),te=p.useMemo(()=>n?H.filter(X=>X.status!==mr.CANCELADA).length:0,[n,H]);return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Reservas"}),e.jsx("p",{className:"text-gray-600",children:"Visualize reservas por calendrio."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Reservas Ativas"}),e.jsx("p",{className:"text-gray-900",children:O.activeCount}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No ms selecionado"})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Confirmadas no Perodo"}),e.jsx("p",{className:"text-gray-900",children:O.confirmedCount})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Dia Selecionado"}),e.jsx("p",{className:"text-gray-900",children:te}),e.jsx("p",{className:"text-gray-500 text-sm",children:n?new Date(n).toLocaleDateString("pt-BR"):"Selecione um dia"})]})}),e.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Valor Estimado do Ms"}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",O.totalAmount.toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Baseado no valor estimado das reservas"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[T&&e.jsx("div",{children:"Carregando reservas..."}),!T&&k&&e.jsx("div",{children:"Erro ao carregar reservas."}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(ne,{variant:"ghost",size:"sm",onClick:j,children:e.jsx(Zx,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-gray-900",children:[v[t.getMonth()]," ",t.getFullYear()]}),e.jsx(ne,{variant:"ghost",size:"sm",onClick:S,children:e.jsx(Nh,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(At,{value:l,onValueChange:X=>c(X),children:[e.jsx(Et,{children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:"ALL",children:"Todos os status"}),e.jsx(De,{value:mr.RESERVADA,children:"Em negociao"}),e.jsx(De,{value:mr.CONFIRMADA,children:"Confirmada"}),e.jsx(De,{value:mr.CANCELADA,children:"Cancelada"})]})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(X=>e.jsx("div",{className:"text-center text-gray-600 text-sm py-2",children:X},X)),Array.from({length:N}).map((X,q)=>e.jsx("div",{},`empty-${q}`)),Array.from({length:w}).map((X,q)=>{const U=q+1,M=new Date(t.getFullYear(),t.getMonth(),U),B=n&&n.getDate()===U&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear(),ee=R.has(U);return e.jsxs("button",{onClick:()=>i(M),className:`aspect-square p-2 rounded-lg text-center transition-colors relative ${B?"bg-indigo-600 text-white":"hover:bg-gray-100 text-gray-900"}`,children:[U,ee&&e.jsx("div",{className:`absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 rounded-full ${B?"bg-white":"bg-indigo-600"}`})]},U)})]})]})})}),e.jsx("div",{className:"space-y-4",children:e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-gray-900 mb-2",children:["Reservas do dia ",n?new Date(n).toLocaleDateString("pt-BR"):"-"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{placeholder:"Buscar ponto, cliente, proposta...",className:"pl-10",value:h,onChange:X=>m(X.target.value)})]})]}),e.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:H.length>0?H.map(X=>{const q=Vb(X);return e.jsx(J6,{reservation:X,clientName:X.clientName??void 0,unitLabel:X.mediaUnitLabel??void 0,pointName:X.mediaPointName??void 0,amount:q,onClick:()=>b({...X,estimatedAmount:q})},X.id)}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:n?"Nenhuma reserva neste dia":"Selecione um dia no calendrio"})})})]})})})]}),e.jsx(n9,{open:!!f,onOpenChange:X=>!X&&b(null),reservation:f,clientName:f?.clientName??void 0,unitLabel:f?.mediaUnitLabel??void 0,pointName:f?.mediaPointName??void 0,amount:f?.estimatedAmount})]})}function rl(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function Rm(t){return{...t,dueDate:rl(t?.dueDate)??new Date,periodStart:rl(t?.periodStart)??void 0,periodEnd:rl(t?.periodEnd)??void 0,cancelledAt:rl(t?.cancelledAt),paidAt:rl(t?.paidAt),createdAt:rl(t?.createdAt)??new Date,updatedAt:rl(t?.updatedAt)??new Date}}function r9(t){const s={};return t.amountCents!==void 0&&(s.amountCents=t.amountCents),t.dueDate!==void 0&&(s.dueDate=t.dueDate),t.status!==void 0&&(s.status=t.status),t.paymentMethod!==void 0&&(s.paymentMethod=t.paymentMethod),t.gatewayInvoiceId!==void 0&&(s.gatewayInvoiceId=t.gatewayInvoiceId),t.generateNf!==void 0&&(s.generateNf=t.generateNf),s}function jC(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(!1),[m,f]=p.useState(null),b=async()=>{try{h(!0),f(null);const j=(await ke.get("/billing-invoices",{params:t})).data,A=(Array.isArray(j)?j:j.data).map(Rm),D=Array.isArray(j)?A.length:j.total??A.length;n(A),l(D)}catch(N){f(N)}finally{h(!1)}},v=async N=>{const j=await ke.post("/billing-invoices",N),S=Rm(j.data);return n(A=>[...A,S]),S},g=async(N,j)=>{const S=await ke.put(`/billing-invoices/${N}`,r9(j)),A=Rm(S.data);return n(D=>D.map(E=>E.id===N?A:E)),A},w=async N=>{const j=await ke.patch(`/billing-invoices/${N}/mark-paid`),S=Rm(j.data);return n(A=>A.map(D=>D.id===N?S:D)),S};return p.useEffect(()=>{b()},[t.search,t.status,t.clientId,t.campaignId,t.proposalId,t.dueDateFrom,t.dueDateTo,t.orderBy,t.orderDirection]),{invoices:s,total:i,loading:c,error:m,refetch:b,createInvoice:v,updateInvoice:g,markAsPaid:w}}function a9(t){const s=t.match(/^(\d{4})-(\d{2})-(\d{2})/);if(s){const n=Number(s[1]),i=Number(s[2])-1,l=Number(s[3]);return new Date(n,i,l)}return new Date(t)}function i9(t){return typeof t=="string"?a9(t):t}function o9(t){if(!t)return"";const s=i9(t);if(isNaN(s.getTime()))return"";const n=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0");return`${n}-${i}-${l}`}function wC(t){const[s,n,i]=t.split("-").map(Number);return new Date(s,n-1,i)}function l9({open:t,onOpenChange:s,invoice:n,onSave:i}){const[l,c]=p.useState({dueDate:"",amount:"",status:qe.ABERTA,paymentMethod:void 0,gatewayInvoiceId:"",generateNf:!1});p.useEffect(()=>{c(n?{dueDate:o9(n.dueDate),amount:String(n.amount??(n.amountCents?n.amountCents/100:"")),status:n.status,paymentMethod:n.paymentMethod,gatewayInvoiceId:n.gatewayInvoiceId||"",generateNf:n.generateNf}:{dueDate:"",amount:"",status:qe.ABERTA,paymentMethod:void 0,gatewayInvoiceId:"",generateNf:!1})},[n]);const h=()=>{if(!l.dueDate){alert("Data de vencimento  obrigatria");return}if(l.amount&&parseFloat(l.amount)<=0){alert("Valor deve ser maior que zero");return}const m={dueDate:l.dueDate?wC(l.dueDate):void 0,status:l.status,paymentMethod:l.paymentMethod,gatewayInvoiceId:l.gatewayInvoiceId||void 0,generateNf:l.generateNf};if(l.amount){const f=parseFloat(l.amount);m.amount=f,m.amountCents=Math.round(f*100)}l.status===qe.PAGA&&(m.paidAt=new Date),i(m)};return n?e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{children:[e.jsx(Bn,{children:e.jsx(Un,{children:"Editar Cobrana (BillingInvoice)"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:n.client?.companyName||n.client?.contactName||"Cliente no identificado"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2 mb-1",children:"Valor"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"0,00",value:l.amount,onChange:m=>c({...l,amount:m.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Vencimento (dueDate) *"}),e.jsx(Pe,{type:"date",value:l.dueDate,onChange:m=>c({...l,dueDate:m.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Status *"}),e.jsxs(At,{value:l.status,onValueChange:m=>c({...l,status:m}),children:[e.jsx(Et,{children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:qe.ABERTA,children:"Aberta"}),e.jsx(De,{value:qe.PAGA,children:"Paga"}),e.jsx(De,{value:qe.VENCIDA,children:"Vencida"}),e.jsx(De,{value:qe.CANCELADA,children:"Cancelada"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Mtodo de Pagamento (paymentMethod) *"}),e.jsxs(At,{value:l.paymentMethod,onValueChange:m=>c({...l,paymentMethod:m}),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione um mtodo"})}),e.jsxs(kt,{children:[e.jsx(De,{value:pn.PIX,children:"PIX"}),e.jsx(De,{value:pn.BOLETO,children:"Boleto"}),e.jsx(De,{value:pn.CARTAO,children:"Carto"}),e.jsx(De,{value:pn.TRANSFERENCIA,children:"Transferncia"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Gateway Invoice ID (opcional)"}),e.jsx(Pe,{placeholder:"ID do gateway de pagamento",value:l.gatewayInvoiceId,onChange:m=>c({...l,gatewayInvoiceId:m.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{checked:l.generateNf,onCheckedChange:m=>c({...l,generateNf:!!m})}),e.jsx(we,{className:"cursor-pointer",children:"Gerar NF (generateNf)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(ne,{onClick:h,children:"Salvar Alteraes"})]})]})]})}):e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{children:[e.jsx(Bn,{children:e.jsx(Un,{children:"Nova Cobrana"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Vencimento (dueDate) *"}),e.jsx(Pe,{type:"date",value:l.dueDate,onChange:m=>c({...l,dueDate:m.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Valor (R$)"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"0,00",value:l.amount,onChange:m=>c({...l,amount:m.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Status *"}),e.jsxs(At,{value:l.status,onValueChange:m=>c({...l,status:m}),children:[e.jsx(Et,{children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:qe.ABERTA,children:"Aberta"}),e.jsx(De,{value:qe.PAGA,children:"Paga"}),e.jsx(De,{value:qe.VENCIDA,children:"Vencida"}),e.jsx(De,{value:qe.CANCELADA,children:"Cancelada"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Mtodo de Pagamento (paymentMethod)"}),e.jsxs(At,{value:l.paymentMethod,onValueChange:m=>c({...l,paymentMethod:m}),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione um mtodo"})}),e.jsxs(kt,{children:[e.jsx(De,{value:pn.PIX,children:"PIX"}),e.jsx(De,{value:pn.BOLETO,children:"Boleto"}),e.jsx(De,{value:pn.CARTAO,children:"Carto"}),e.jsx(De,{value:pn.TRANSFERENCIA,children:"Transferncia"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Gateway Invoice ID (opcional)"}),e.jsx(Pe,{placeholder:"ID do gateway de pagamento",value:l.gatewayInvoiceId,onChange:m=>c({...l,gatewayInvoiceId:m.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{checked:l.generateNf,onCheckedChange:m=>c({...l,generateNf:!!m})}),e.jsx(we,{className:"cursor-pointer",children:"Gerar NF (generateNf)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(ne,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(ne,{onClick:h,children:"Salvar Alteraes"})]})]})]})})}function c9(){const{invoices:t,loading:s,error:n,refetch:i,updateInvoice:l,markAsPaid:c}=jC({}),[h,m]=p.useState(null),f=p.useMemo(()=>{const j=t.filter(E=>E.status===qe.ABERTA||E.status===qe.VENCIDA).reduce((E,T)=>E+Tn(T.amount??(T.amountCents?T.amountCents/100:0),0),0),S=t.filter(E=>E.status===qe.ABERTA).reduce((E,T)=>E+Tn(T.amount??(T.amountCents?T.amountCents/100:0),0),0),A=t.filter(E=>E.status===qe.PAGA).reduce((E,T)=>E+Tn(T.amount??(T.amountCents?T.amountCents/100:0),0),0),D=t.filter(E=>E.status===qe.VENCIDA).length;return{pendingAmount:j,openAmount:S,confirmedAmount:A,alertsCount:D}},[t]),b=async j=>{if(h)try{await l(h.id,j),Ie.success("Cobrana atualizada com sucesso"),m(null),i()}catch{Ie.error("Falha ao atualizar cobrana")}},v=j=>{switch(j){case qe.PAGA:return"bg-green-100 text-green-800";case qe.ABERTA:return"bg-yellow-100 text-yellow-800";case qe.VENCIDA:return"bg-red-100 text-red-800";case qe.CANCELADA:return"bg-gray-100 text-gray-800"}},g=j=>{switch(j){case qe.PAGA:return"Paga";case qe.ABERTA:return"Aberta";case qe.VENCIDA:return"Vencida";case qe.CANCELADA:return"Cancelada"}},w=j=>{if(!j)return"-";switch(j){case pn.PIX:return"PIX";case pn.BOLETO:return"Boleto";case pn.CARTAO:return"Carto";case pn.TRANSFERENCIA:return"Transferncia"}},N=async j=>{try{await c(j),Ie.success("Cobrana marcada como paga"),i()}catch{Ie.error("Falha ao marcar cobrana como paga")}};return e.jsxs("div",{className:"space-y-6",children:[s&&e.jsx("div",{children:"Carregando cobranas..."}),!s&&n&&e.jsx("div",{children:"Erro ao carregar cobranas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-50 text-yellow-600 p-2 rounded-lg",children:e.jsx(Lj,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Pendentes de Cobrana"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.pendingAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-orange-50 text-orange-600 p-2 rounded-lg",children:e.jsx(Ld,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cobranas em Aberto"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.openAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(Jm,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Receita Confirmada"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.confirmedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(Ld,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Alertas"})]}),e.jsxs("p",{className:"text-gray-900",children:[f.alertsCount," cobranas"]})]})})]}),e.jsxs(ki,{defaultValue:"open",className:"space-y-4",children:[e.jsxs(Ti,{children:[e.jsx(on,{value:"open",children:"Abertas"}),e.jsx(on,{value:"paid",children:"Pagas"}),e.jsx(on,{value:"overdue",children:"Vencidas"}),e.jsx(on,{value:"canceled",children:"Canceladas"})]}),e.jsx(_n,{value:"open",children:e.jsx(Ue,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta/Campanha"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"NF?"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===qe.ABERTA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[j.proposalId&&e.jsxs("p",{className:"text-indigo-600",children:["Prop: ",j.proposalTitle||j.proposalId]}),j.campaignId&&e.jsxs("p",{className:"text-gray-600",children:["Camp: ",j.campaignName||j.campaignId]})]})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Tn(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(j.dueDate).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:w(j.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:j.generateNf?e.jsx(ht,{className:"bg-blue-100 text-blue-800",children:"Sim"}):e.jsx(ht,{variant:"outline",children:"No"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(ht,{className:v(j.status),children:g(j.status)})}),e.jsxs("td",{className:"px-6 py-4 space-x-2",children:[e.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(j),children:[e.jsx(Vd,{className:"w-4 h-4"}),"Editar"]}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>N(j.id),children:"Marcar como paga"})]})]},j.id))})]})})})}),e.jsx(_n,{value:"paid",children:e.jsx(Ue,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Data Pgto"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===qe.PAGA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:j.proposalTitle||j.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Tn(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j.paidAt?new Date(j.paidAt).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:w(j.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(ht,{className:v(j.status),children:g(j.status)})})]},j.id))})]})})})}),e.jsx(_n,{value:"overdue",children:e.jsx(Ue,{children:t.filter(j=>j.status===qe.VENCIDA).length===0?e.jsxs(Ve,{className:"py-12 text-center",children:[e.jsx(Ld,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma cobrana vencida"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===qe.VENCIDA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:j.proposalTitle||j.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Tn(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-red-600",children:new Date(j.dueDate).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(ht,{className:v(j.status),children:g(j.status)})}),e.jsxs("td",{className:"px-6 py-4 space-x-2",children:[e.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(j),children:[e.jsx(Vd,{className:"w-4 h-4"}),"Editar"]}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>N(j.id),children:"Marcar como paga"})]})]},j.id))})]})})})}),e.jsx(_n,{value:"canceled",children:e.jsx(Ue,{children:t.filter(j=>j.status===qe.CANCELADA).length===0?e.jsxs(Ve,{className:"py-12 text-center",children:[e.jsx(gr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma cobrana cancelada"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===qe.CANCELADA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:j.proposalTitle||j.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Tn(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(ht,{className:v(j.status),children:g(j.status)})})]},j.id))})]})})})})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" BillingInvoice (Cobranas para Clientes)"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Cobranas criadas a partir de Propostas aprovadas. Campos: clientId, proposalId/campaignId, amount, dueDate, status, paymentMethod, generateNf. Status: ",e.jsx("strong",{children:"ABERTA"}),"  ",e.jsx("strong",{children:"PAGA"})," | ",e.jsx("strong",{children:"VENCIDA"})," | ",e.jsx("strong",{children:"CANCELADA"})]})]}),e.jsx(l9,{open:!!h,invoice:h,onOpenChange:j=>{j||m(null)},onSave:b})]})}function Hb(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function sx(t){return{...t,createdAt:Hb(t.createdAt)??new Date,updatedAt:Hb(t.updatedAt)??new Date}}function Wb(t){const s={};return t.name!==void 0&&(s.name=t.name),s}function NC(){const[t,s]=p.useState([]),[n,i]=p.useState(!0),[l,c]=p.useState(null),h=async()=>{try{i(!0),c(null);const v=await ke.get("/transaction-categories"),g=Array.isArray(v.data)?v.data:v.data.data;s((g??[]).map(sx))}catch(v){c(v.response?.data?.message||"Erro ao carregar categorias")}finally{i(!1)}};return p.useEffect(()=>{h()},[]),{categories:t,loading:n,error:l,refetch:h,createCategory:async v=>{try{c(null);const g=await ke.post("/transaction-categories",Wb(v));return s(w=>[sx(g.data),...w]),g.data}catch(g){throw c(g.response?.data?.message||"Erro ao criar categoria"),g}},updateCategory:async(v,g)=>{try{c(null);const w=await ke.put(`/transaction-categories/${v}`,Wb(g));return s(N=>N.map(j=>j.id===v?sx(w.data):j)),w.data}catch(w){throw c(w.response?.data?.message||"Erro ao atualizar categoria"),w}},deleteCategory:async v=>{try{c(null),await ke.delete(`/transaction-categories/${v}`),s(g=>g.filter(w=>w.id!==v))}catch(g){throw c(g.response?.data?.message||"Erro ao deletar categoria"),g}}}}function d9({open:t,onOpenChange:s,transaction:n,onSave:i}){const{categories:l,loading:c,error:h}=NC(),{mediaPoints:m}=$1({}),f=!!n,b=!!n?.isRecurringInstance,[v,g]=p.useState({flowType:Rt.RECEITA,date:new Date().toISOString().slice(0,10),isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:Jn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),[w,N]=p.useState([]),j=p.useMemo(()=>new Set(w.map(k=>k.mediaPointId).filter(k=>k&&k!=="none")),[w]);p.useEffect(()=>{n?(g({flowType:n.flowType,date:new Date(n.date).toISOString().slice(0,10),isRecurring:!!n.isRecurring,recurringUntil:n.recurringUntil?String(n.recurringUntil).slice(0,10):"",dueDate:n.dueDate?String(n.dueDate).slice(0,10):"",amount:String(n.amount??""),description:n.description,partnerName:n.partnerName||"",categoryId:n.categoryId||"",tags:n.tags?.join(", ")||"",paymentType:n.paymentType||Jn.A_VISTA,paymentMethod:n.paymentMethod,isPaid:n.isPaid,billingInvoiceId:n.billingInvoiceId||"",mediaPointId:n.mediaPointId||""}),n.mediaPointId?N([{key:"0",mediaPointId:n.mediaPointId,dueDate:n.dueDate?String(n.dueDate).slice(0,10):""}]):N([])):(g({flowType:Rt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:Jn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),N([]))},[n]);const S=()=>{N(k=>[...k,{key:`${Date.now()}_${k.length}`,mediaPointId:"none",dueDate:""}])},A=k=>{N(R=>R.filter(O=>O.key!==k))},D=(k,R)=>{N(O=>O.map(H=>H.key!==k||R.mediaPointId&&R.mediaPointId!=="none"&&j.has(R.mediaPointId)&&R.mediaPointId!==H.mediaPointId?H:{...H,...R}))},E=()=>{if(!v.date){alert("Data  obrigatria");return}if(!v.amount||parseFloat(v.amount)<=0){alert("Valor deve ser maior que zero");return}if(!v.description.trim()){alert("Descrio  obrigatria");return}const k={date:wC(v.date),description:v.description,partnerName:v.partnerName||void 0,categoryId:v.categoryId||void 0,tags:v.tags?v.tags.split(",").map(R=>R.trim()).filter(Boolean):[],amount:parseFloat(v.amount),flowType:v.flowType,paymentType:v.paymentType,paymentMethod:v.paymentMethod,isPaid:v.isRecurring?!1:!!v.isPaid,billingInvoiceId:v.billingInvoiceId||void 0,isRecurring:v.isRecurring,recurringUntil:v.isRecurring&&v.recurringUntil?v.recurringUntil:void 0};if(b&&(delete k.date,delete k.isRecurring,delete k.recurringUntil),f)k.mediaPointId=v.mediaPointId&&v.mediaPointId!=="none"?v.mediaPointId:void 0,k.dueDate=v.dueDate?v.dueDate:void 0;else{const R=w.map(O=>({mediaPointId:O.mediaPointId,dueDate:O.dueDate})).filter(O=>O.mediaPointId&&O.mediaPointId!=="none");R.length===1?(k.mediaPointId=R[0].mediaPointId,k.dueDate=R[0].dueDate||void 0):R.length>1&&(k.mediaPoints=R.map(O=>({mediaPointId:O.mediaPointId,dueDate:O.dueDate||void 0})))}i(k),g({flowType:Rt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:Jn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),N([])},T=()=>{s(!1),g({flowType:Rt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:Jn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),N([])};return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-2xl !p-0 !gap-0 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 pt-6",children:e.jsxs(Bn,{children:[e.jsx(Un,{children:n?"Editar Transao":"Nova Transao (CashTransaction)"}),e.jsx(_i,{children:"Insira os detalhes da transao financeira."})]})}),e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Tipo de Transao (flowType) *"}),e.jsxs(At,{value:v.flowType,onValueChange:k=>g({...v,flowType:k}),children:[e.jsx(Et,{children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:Rt.RECEITA,children:"Receita"}),e.jsx(De,{value:Rt.DESPESA,children:"Despesa"}),e.jsx(De,{value:Rt.PESSOAS,children:"Pessoas (Folha)"}),e.jsx(De,{value:Rt.IMPOSTO,children:"Imposto"}),e.jsx(De,{value:Rt.TRANSFERENCIA,children:"Transferncia"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Data *"}),e.jsx(Pe,{type:"date",value:v.date,onChange:k=>g({...v,date:k.target.value}),disabled:b}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(_o,{checked:v.isRecurring,onCheckedChange:k=>{const R=!!k;g(O=>({...O,isRecurring:R,isPaid:R?!1:O.isPaid,recurringUntil:R?O.recurringUntil:""}))},disabled:b}),e.jsx(we,{className:"cursor-pointer",children:"Recorrente (mensal)"})]}),v.isRecurring&&!b&&e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsx(we,{children:"Recorrente at (opcional)"}),e.jsx(Pe,{type:"date",value:v.recurringUntil,onChange:k=>g({...v,recurringUntil:k.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se vazio, repete indefinidamente."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Valor (R$) *"}),e.jsx(Pe,{type:"number",step:"0.01",placeholder:"0,00",value:v.amount,onChange:k=>g({...v,amount:k.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Descrio *"}),e.jsx(Pe,{placeholder:"Ex: Pagamento de campanha",value:v.description,onChange:k=>g({...v,description:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Parceiro (partnerName)"}),e.jsx(Pe,{placeholder:"Nome do cliente ou fornecedor",value:v.partnerName,onChange:k=>g({...v,partnerName:k.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Categoria (categoryId)"}),e.jsxs(At,{value:v.categoryId||void 0,onValueChange:k=>g({...v,categoryId:k}),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[c&&e.jsx(De,{value:"__loading",disabled:!0,children:"Carregando categorias..."}),!c&&l.length===0&&e.jsx(De,{value:"__empty",disabled:!0,children:h?`Erro ao carregar: ${h}`:"Nenhuma categoria cadastrada"}),l.map(k=>e.jsx(De,{value:k.id,children:k.name},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Tags (separadas por vrgula)"}),e.jsx(Pe,{placeholder:"Ex: campanha, maro, urgente",value:v.tags,onChange:k=>g({...v,tags:k.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Tipo de Pagamento (paymentType)"}),e.jsxs(At,{value:v.paymentType,onValueChange:k=>g({...v,paymentType:k}),children:[e.jsx(Et,{children:e.jsx(Pt,{})}),e.jsxs(kt,{children:[e.jsx(De,{value:Jn.A_VISTA,children:" vista"}),e.jsx(De,{value:Jn.PARCELADO,children:"Parcelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Modo de Pagamento (paymentMethod)"}),e.jsxs(At,{value:v.paymentMethod,onValueChange:k=>g({...v,paymentMethod:k}),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsxs(kt,{children:[e.jsx(De,{value:pn.PIX,children:"PIX"}),e.jsx(De,{value:pn.BOLETO,children:"Boleto"}),e.jsx(De,{value:pn.CARTAO,children:"Carto"}),e.jsx(De,{value:pn.TRANSFERENCIA,children:"Transferncia"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{checked:v.isPaid,onCheckedChange:k=>g({...v,isPaid:!!k}),disabled:v.isRecurring||b}),e.jsx(we,{className:"cursor-pointer",children:"J foi pago (isPaid)"}),v.isRecurring&&e.jsx("span",{className:"text-xs text-gray-500",children:"(bloqueado para transaes recorrentes)"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-3",children:[e.jsx("p",{className:"text-sm text-blue-900",children:" Para despesas de pontos de mdia (energia, taxa DER, aluguel), vincule o ponto e defina o vencimento:"}),f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Ponto de Mdia (opcional)"}),e.jsxs(At,{value:v.mediaPointId,onValueChange:k=>g({...v,mediaPointId:k}),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione o ponto"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"none",children:"Nenhum"}),m.map(k=>e.jsx(De,{value:k.id,children:k.name},k.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use para despesas como energia, taxa DER, aluguel de rea"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Data de Vencimento (opcional)"}),e.jsx(Pe,{type:"date",value:v.dueDate,onChange:k=>g({...v,dueDate:k.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Data de vencimento da taxa/despesa"})]})]}),!b&&e.jsx("p",{className:"text-xs text-gray-500",children:"Para vincular mltiplos pontos, crie uma nova transao."})]}):e.jsxs("div",{className:"space-y-3",children:[w.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"Nenhum ponto de mdia vinculado."}):e.jsx("div",{className:"max-h-72 overflow-y-auto pr-2",children:e.jsx("div",{className:"space-y-3",children:w.map((k,R)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:R===0?"Ponto de Mdia (opcional)":"Ponto de Mdia"}),e.jsxs(At,{value:k.mediaPointId,onValueChange:O=>D(k.key,{mediaPointId:O}),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione o ponto"})}),e.jsxs(kt,{children:[e.jsx(De,{value:"none",children:"Nenhum"}),m.map(O=>e.jsx(De,{value:O.id,disabled:j.has(O.id)&&O.id!==k.mediaPointId,children:O.name},O.id))]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(we,{children:"Data de Vencimento (opcional)"}),e.jsx(Pe,{type:"date",value:k.dueDate,onChange:O=>D(k.key,{dueDate:O.target.value})})]}),e.jsx(ne,{type:"button",variant:"outline",size:"icon",onClick:()=>A(k.key),title:"Remover ponto",children:e.jsx(xa,{className:"w-4 h-4"})})]})]},k.key))})}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs(ne,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:S,children:[e.jsx(Ss,{className:"w-4 h-4"}),"Adicionar ponto"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Voc pode vincular mltiplos pontos, cada um com seu vencimento."})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 px-6 pb-6 pt-4 border-t bg-background flex justify-end gap-3",children:[e.jsx(ne,{variant:"outline",onClick:T,children:"Cancelar"}),e.jsx(ne,{onClick:E,children:n?"Salvar Alteraes":"Salvar Transao"})]})]})})}function rx(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function Mm(t){return{...t,date:rx(t?.date)??new Date,createdAt:rx(t?.createdAt)??new Date,updatedAt:rx(t?.updatedAt)??new Date}}function qb(t){const s={date:t.date,description:t.description,partnerName:t.partnerName,categoryId:t.categoryId,tags:t.tags,amount:t.amount,flowType:t.flowType,paymentType:t.paymentType,paymentMethod:t.paymentMethod,isPaid:t.isPaid,billingInvoiceId:t.billingInvoiceId,mediaPointId:t.mediaPointId,dueDate:t.dueDate,isRecurring:t.isRecurring,recurringUntil:t.recurringUntil};return t.mediaPoints&&(s.mediaPoints=t.mediaPoints),Object.keys(s).forEach(n=>{s[n]===void 0&&delete s[n]}),s}function CC(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(!1),[m,f]=p.useState(null),b=async()=>{try{h(!0),f(null);const j=(await ke.get("/cash-transactions",{params:t})).data,A=((Array.isArray(j)?j:j.data)??[]).map(Mm);n(A),l(Array.isArray(j)?A.length:j.total??A.length)}catch(N){f(N)}finally{h(!1)}};return p.useEffect(()=>{b()},[t.search,t.flowType,t.categoryId,t.dateFrom,t.dateTo]),{transactions:s,total:i,loading:c,error:m,refetch:b,createTransaction:async N=>{const S=(await ke.post("/cash-transactions",qb(N))).data;if(Array.isArray(S)){const D=S.map(Mm);return n(E=>[...D,...E]),l(E=>E+D.length),D}const A=Mm(S);return n(D=>[A,...D]),l(D=>D+1),A},updateTransaction:async(N,j)=>{const S=N.includes("__R__"),A=await ke.put(`/cash-transactions/${N}`,qb(j)),D=Mm(A.data);return S&&(D.id===N||D.isRecurringInstance)?(n(T=>T.map(k=>{if(k.id!==N)return k;const R=k.id,O=k.date;return{...k,...D,id:R,date:O,dueDate:D.dueDate??k.dueDate}})),D):(n(T=>T.map(k=>{if(!(k.seriesId&&D.seriesId&&k.seriesId===D.seriesId||k.id===N||k.id===D.id))return k;const O=k.id,H=k.date,te=k.dueDate;return{...k,...D,id:O,date:H,dueDate:k.isRecurringInstance?te:D.dueDate}})),D)},deleteTransaction:async N=>{await ke.delete(`/cash-transactions/${N}`);const j=N.includes("__R__")?N.split("__R__")[0]:N;n(S=>S.filter(A=>A.id!==N&&A.id!==j)),l(S=>Math.max(0,S-1))}}}function u9(){const t=F=>F.toISOString().slice(0,10),s=F=>{if(!F)return"";const[$,Y,Z]=F.split("-");return!$||!Y||!Z?F:`${Z}/${Y}/${$}`},[n,i]=p.useState("month"),[l,c]=p.useState(()=>new Date().getMonth()),[h,m]=p.useState(()=>new Date().getFullYear()),[f,b]=p.useState(()=>{const F=new Date;return F.setMonth(F.getMonth()-2),t(F)}),[v,g]=p.useState(()=>t(new Date)),[w,N]=p.useState(!1),[j,S]=p.useState(null),{dateFrom:A,dateTo:D,periodLabel:E}=p.useMemo(()=>{if(n==="month"){const K=new Date(h,l,1),G=new Date(h,l+1,0);return{dateFrom:t(K),dateTo:t(G),periodLabel:null}}const F=f||t(new Date),$=v||t(new Date),Y=F<=$?F:$,Z=F<=$?$:F;return{dateFrom:Y,dateTo:Z,periodLabel:`Perodo: ${s(Y)} - ${s(Z)}`}},[l,h,f,v,n]),{transactions:T,loading:k,error:R,refetch:O,createTransaction:H,updateTransaction:te,deleteTransaction:X}=CC({dateFrom:A,dateTo:D}),{categories:q}=NC(),U=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],M=()=>{l===0?(c(11),m(h-1)):c(l-1)},B=()=>{l===11?(c(0),m(h+1)):c(l+1)},ee=p.useMemo(()=>T,[T]),me=p.useMemo(()=>{const F=ee.filter(K=>K.flowType===Rt.RECEITA).reduce((K,G)=>K+Tn(G.amount,0),0),$=ee.filter(K=>K.flowType===Rt.DESPESA||K.flowType===Rt.PESSOAS||K.flowType===Rt.IMPOSTO).reduce((K,G)=>K+Tn(G.amount,0),0),Y=ee.filter(K=>K.flowType===Rt.TRANSFERENCIA).reduce((K,G)=>K+Tn(G.amount,0),0),Z=F-$;return{receiptsTotal:F,expensesTotal:$,transfersTotal:Y,cashBalance:Z}},[ee]),J=async F=>{try{j?(await te(j.id,F),Ie.success("Transao atualizada com sucesso"),S(null)):(await H(F),Ie.success("Transao criada com sucesso")),N(!1),O()}catch{Ie.error("Falha ao salvar transao")}},fe=F=>{switch(F){case Rt.RECEITA:return"Receita";case Rt.DESPESA:return"Despesa";case Rt.TRANSFERENCIA:return"Transferncia";case Rt.IMPOSTO:return"Imposto";case Rt.PESSOAS:return"Pessoas"}},W=F=>{if(!F)return"-";switch(F){case Jn.A_VISTA:return" vista";case Jn.PARCELADO:return"Parcelado"}},ae=F=>{if(!F)return"-";switch(F){case pn.PIX:return"PIX";case pn.BOLETO:return"Boleto";case pn.CARTAO:return"Carto";case pn.TRANSFERENCIA:return"Transferncia"}};return e.jsxs("div",{className:"space-y-6",children:[k&&e.jsx("div",{children:"Carregando lanamentos..."}),!k&&R&&e.jsx("div",{children:"Erro ao carregar lanamentos."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{size:"sm",variant:n==="month"?"default":"outline",onClick:()=>i("month"),children:"Ms"}),e.jsx(ne,{size:"sm",variant:n==="range"?"default":"outline",onClick:()=>i("range"),children:"Perodo"})]}),n==="month"?e.jsxs(e.Fragment,{children:[e.jsx(ne,{variant:"ghost",size:"sm",onClick:M,children:e.jsx(Zx,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-gray-900",children:[U[l]," ",h]}),e.jsx(ne,{variant:"ghost",size:"sm",onClick:B,children:e.jsx(Nh,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{type:"month",className:"w-[160px]",value:`${h}-${String(l+1).padStart(2,"0")}`,onChange:F=>{const[$,Y]=F.target.value.split("-");if(!$||!Y)return;const Z=Number($),K=Number(Y)-1;Number.isNaN(Z)||Number.isNaN(K)||(m(Z),c(K))}}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const F=new Date;m(F.getFullYear()),c(F.getMonth())},children:"Hoje"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-gray-900",children:E}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Pe,{type:"date",className:"w-[160px]",value:f,onChange:F=>b(F.target.value)}),e.jsx("span",{className:"text-gray-500 text-sm",children:"at"}),e.jsx(Pe,{type:"date",className:"w-[160px]",value:v,onChange:F=>g(F.target.value)}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{g(t(new Date))},children:"Hoje"})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:[{label:"3 meses",months:3},{label:"6 meses",months:6},{label:"1 ano",years:1},{label:"2 anos",years:2},{label:"5 anos",years:5},{label:"10 anos",years:10}].map(F=>e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const $=new Date,Y=new Date($);F.months&&Y.setMonth(Y.getMonth()-F.months),F.years&&Y.setFullYear(Y.getFullYear()-F.years),g(t($)),b(t(Y))},children:F.label},F.label))})]})]}),e.jsxs(ne,{className:"gap-2",onClick:()=>{S(null),N(!0)},children:[e.jsx(Ss,{className:"w-4 h-4"}),"Nova Transao"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(Xx,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Recebimentos"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",me.receiptsTotal.toLocaleString("pt-BR")]})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(Gj,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Despesas"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",me.expensesTotal.toLocaleString("pt-BR")]})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`${me.cashBalance>=0?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"} p-2 rounded-lg`,children:e.jsx(Sh,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Saldo em Caixa"})]}),e.jsxs("p",{className:`${me.cashBalance>=0?"text-gray-900":"text-red-600"}`,children:["R$ ",me.cashBalance.toLocaleString("pt-BR")]})]})})]}),e.jsxs(ki,{defaultValue:"receita",className:"space-y-4",children:[e.jsxs(Ti,{children:[e.jsx(on,{value:"receita",children:"Receitas"}),e.jsx(on,{value:"despesa",children:"Despesas"}),e.jsx(on,{value:"pessoas",children:"Pessoas"}),e.jsx(on,{value:"imposto",children:"Impostos"}),e.jsx(on,{value:"transferencia",children:"Transferncias"})]}),[Rt.RECEITA,Rt.DESPESA,Rt.PESSOAS,Rt.IMPOSTO,Rt.TRANSFERENCIA].map(F=>{const $=ee.filter(Y=>Y.flowType===F);return e.jsx(_n,{value:F.toLowerCase(),children:e.jsx(Ue,{children:$.length===0?e.jsx(Ve,{className:"py-12 text-center",children:e.jsxs("p",{className:"text-gray-500",children:["Nenhuma transao de ",fe(F)," neste perodo"]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Parceiro"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Tags"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Modo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:$.map(Y=>{const Z=Y.categoryId?q.find(K=>K.id===Y.categoryId):void 0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(Y.date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:Y.description}),Y.billingInvoiceId&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Invoice: ",Y.billingInvoiceId]}),Y.mediaPointId&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Ponto: ",Y.mediaPointId]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Y.partnerName||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Z?.name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:Y.tags.map(K=>e.jsx(ht,{variant:"outline",className:"text-xs",children:K},K))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:Y.flowType===Rt.RECEITA?"text-green-600":"text-red-600",children:["R$"," ",Tn(Y.amount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:W(Y.paymentType)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:ae(Y.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(ht,{className:Y.isPaid?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:Y.isPaid?"Pago":"Pendente"})}),e.jsxs("td",{className:"px-6 py-4 flex flex-wrap gap-2",children:[e.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{try{await te(Y.id,{isPaid:!Y.isPaid}),Ie.success(Y.isPaid?"Transao marcada como pendente":"Transao marcada como paga"),O()}catch{Ie.error("Falha ao atualizar status de pagamento")}},children:Y.isPaid?"Desmarcar Pago":"Marcar Pago"}),e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{S(Y),N(!0)},children:"Editar"}),e.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{try{await X(Y.id),Ie.success("Transao excluda"),O()}catch{Ie.error("Falha ao excluir transao")}},children:"Excluir"})]})]},Y.id)})})]})})})},F)})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" CashTransaction (Fluxo de Caixa)"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Lanamentos financeiros da empresa. Campos: date, description, partnerName, categoryId, tags, amount, flowType, paymentType, paymentMethod, isPaid, billingInvoiceId, mediaPointId. flowType: ",e.jsx("strong",{children:"RECEITA"})," | ",e.jsx("strong",{children:"DESPESA"})," | ",e.jsx("strong",{children:"TRANSFERENCIA"})," | ",e.jsx("strong",{children:"IMPOSTO"})," | ",e.jsx("strong",{children:"PESSOAS"})]})]}),e.jsx(d9,{open:w,onOpenChange:F=>{F||(N(!1),S(null))},transaction:j,onSave:J})]})}function m9(t){const[s,n]=t.split("-").map(h=>parseInt(h,10)),i=new Date(s,n-1,1),l=new Date(s,n,0),c=h=>h.toISOString().slice(0,10);return{dateFrom:c(i),dateTo:c(l)}}function h9(){const t=new Date,[s,n]=p.useState(()=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`),{dateFrom:i,dateTo:l}=p.useMemo(()=>m9(s),[s]),{invoices:c,loading:h,error:m}=jC({dueDateFrom:i,dueDateTo:l}),{transactions:f,loading:b,error:v}=CC({dateFrom:i,dateTo:l}),g=p.useMemo(()=>{const D=T=>c.filter(k=>k.status===T).reduce((k,R)=>k+Tn(R.amount,0),0);return{total:c.reduce((T,k)=>T+Tn(k.amount,0),0),abertas:D(qe.ABERTA),vencidas:D(qe.VENCIDA),pagas:D(qe.PAGA),canceladas:D(qe.CANCELADA)}},[c]),w=p.useMemo(()=>{const D=R=>f.filter(O=>R.includes(O.flowType)).reduce((O,H)=>O+Tn(H.amount,0),0),E=D([Rt.RECEITA]),T=D([Rt.DESPESA,Rt.IMPOSTO,Rt.PESSOAS]),k=D([Rt.TRANSFERENCIA]);return{receipts:E,expenses:T,transfers:k,net:E-T}},[f]),N=p.useMemo(()=>{const D=new Map;for(const E of c){const T=E.clientName||E.client?.companyName||"Cliente no informado";D.set(T,(D.get(T)||0)+Tn(E.amount,0))}return Array.from(D.entries()).sort((E,T)=>T[1]-E[1]).slice(0,5)},[c]),j=D=>D.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),S=h||b,A=m||v;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 text-lg",children:"Relatrios"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Resumo por ms (cobranas por vencimento + fluxo de caixa por data)."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ms:"}),e.jsx(Pe,{type:"month",value:s,onChange:D=>n(D.target.value),className:"w-[180px]"})]})]}),S&&e.jsx("div",{children:"Carregando relatrio..."}),!S&&A&&e.jsx("div",{className:"text-red-600",children:"Erro ao carregar relatrio."}),!S&&!A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(Xx,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Receita no Caixa"})]}),e.jsx("p",{className:"text-gray-900",children:j(w.receipts)})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(Gj,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Despesas no Caixa"})]}),e.jsx("p",{className:"text-gray-900",children:j(w.expenses)})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-indigo-50 text-indigo-600 p-2 rounded-lg",children:e.jsx(Sh,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Saldo Lquido"})]}),e.jsx("p",{className:"text-gray-900",children:j(w.net)})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-50 text-yellow-600 p-2 rounded-lg",children:e.jsx(gr,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cobranas do Ms"})]}),e.jsx("p",{className:"text-gray-900",children:j(g.total)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Cobranas por Status"}),e.jsxs(ht,{variant:"outline",children:[i,"  ",l]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Abertas"}),e.jsx("span",{className:"text-gray-900",children:j(g.abertas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vencidas"}),e.jsx("span",{className:"text-gray-900",children:j(g.vencidas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pagas"}),e.jsx("span",{className:"text-gray-900",children:j(g.pagas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Canceladas"}),e.jsx("span",{className:"text-gray-900",children:j(g.canceladas)})]})]})]})}),e.jsx(Ue,{children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Top Clientes (por Cobrana)"}),e.jsx(ht,{variant:"outline",children:"Top 5"})]}),N.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nenhuma cobrana no perodo."}):e.jsx("div",{className:"space-y-2",children:N.map(([D,E])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 truncate pr-3",children:D}),e.jsx("span",{className:"text-gray-900 whitespace-nowrap",children:j(E)})]},D))})]})})]})]})]})}function p9(){return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Financeiro"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie cobranas e fluxo de caixa"})]}),e.jsxs(ki,{defaultValue:"charges",className:"space-y-6",children:[e.jsxs(Ti,{children:[e.jsx(on,{value:"charges",children:"Cobranas"}),e.jsx(on,{value:"cashflow",children:"Fluxo de Caixa"}),e.jsx(on,{value:"reports",children:"Relatrios"})]}),e.jsx(_n,{value:"charges",children:e.jsx(c9,{})}),e.jsx(_n,{value:"cashflow",children:e.jsx(u9,{})}),e.jsx(_n,{value:"reports",children:e.jsx(h9,{})})]})]})}function f9({conversations:t,selectedConversationId:s,searchQuery:n,onSearchChange:i,onSelectConversation:l}){const c=n.trim().toLowerCase(),h=t.filter(m=>c?m.clientName.toLowerCase().includes(c)||(m.proposalId||"").toLowerCase().includes(c)||(m.campaignId||"").toLowerCase().includes(c)||m.lastMessage.toLowerCase().includes(c):!0);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Pe,{placeholder:"Buscar conversas...",value:n,onChange:m=>i(m.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:h.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 text-sm",children:n?"Nenhuma conversa encontrada":"Nenhuma conversa"})}):h.map(m=>e.jsxs("button",{onClick:()=>l(m),className:`w-full p-4 rounded-lg text-left transition-colors ${s===m.id?"bg-indigo-50 border border-indigo-200":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-gray-900",children:m.clientName}),m.unreadCount>0&&e.jsx(ht,{className:"bg-indigo-600",children:m.unreadCount})]}),m.proposalId&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Proposta: ",m.proposalId]}),m.campaignId&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Campanha: ",m.campaignId]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:m.lastMessage}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.lastMessageAt.toLocaleString("pt-BR")})]},m.id))})]})}function x9({messages:t}){const s=p.useRef(null);p.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[t]);const n=l=>{switch(l){case go.EMAIL:return"";case go.WHATSAPP:return"";case go.SYSTEM:return""}},i=l=>{switch(l){case go.EMAIL:return"Email";case go.WHATSAPP:return"WhatsApp";case go.SYSTEM:return"Sistema"}};return t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhuma mensagem ainda"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Envie a primeira mensagem para o cliente"})]})}):e.jsxs("div",{className:"space-y-4",children:[t.map(l=>e.jsx("div",{className:`flex ${l.direction===ji.OUT?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-4 ${l.direction===ji.OUT?"bg-indigo-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsxs("span",{className:`text-xs ${l.direction===ji.OUT?"opacity-75":"opacity-60"}`,children:[n(l.channel)," ",i(l.channel)]}),l.senderType===pc.CLIENTE&&e.jsx(ht,{variant:"outline",className:`text-xs ${l.direction===ji.OUT?"border-white/50 text-white":"border-gray-400 text-gray-700"}`,children:"Cliente"}),l.senderType===pc.USER&&e.jsx(ht,{variant:"outline",className:`text-xs ${l.direction===ji.OUT?"border-white/50 text-white":"border-gray-400 text-gray-700"}`,children:"Usurio"})]}),e.jsx("p",{className:"mb-2 whitespace-pre-wrap",children:l.contentText}),e.jsxs("div",{className:`flex items-center justify-between text-xs ${l.direction===ji.OUT?"opacity-75":"opacity-60"}`,children:[e.jsx("span",{children:l.senderName}),e.jsxs("span",{children:[new Date(l.createdAt).toLocaleDateString("pt-BR")," s"," ",new Date(l.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]})},l.id)),e.jsx("div",{ref:s})]})}function g9({onSend:t,onAttach:s,disabled:n=!1}){const[i,l]=p.useState(""),c=p.useRef(null),h=()=>{const v=i.trim();v&&(t(v),l(""))},m=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),h())},f=()=>{c.current?.click()},b=v=>{const g=v.target.files;g&&g.length>0&&(s(g),v.target.value="")};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{ref:c,type:"file",multiple:!0,className:"hidden",onChange:b,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{placeholder:"Digite sua mensagem...",value:i,onChange:v=>l(v.target.value),onKeyDown:m,disabled:n}),e.jsx(ne,{variant:"outline",size:"sm",onClick:f,disabled:n,title:"Anexar arquivo",children:e.jsx(eE,{className:"w-4 h-4"})}),e.jsxs(ne,{size:"sm",className:"gap-2",onClick:h,disabled:n||!i.trim(),children:[e.jsx(_h,{className:"w-4 h-4"}),"Enviar"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Canal: Email  WhatsApp (via integrao futura)"})]})}function Zb(t){const s=t?.createdAt?new Date(t.createdAt):new Date,n=t?.updatedAt?new Date(t.updatedAt):s;return{...t,proposalId:t?.proposalId??void 0,campaignId:t?.campaignId??void 0,createdAt:s,updatedAt:n}}function Gb(t,s){const n=new Map;for(const i of t)i?.id&&n.set(String(i.id),i);for(const i of s)i?.id&&n.set(String(i.id),i);return Array.from(n.values()).sort((i,l)=>{const c=new Date(i.createdAt).getTime(),h=new Date(l.createdAt).getTime();return c!==h?c-h:String(i.id).localeCompare(String(l.id))})}function v9(t={},s={}){const[n,i]=p.useState([]),[l,c]=p.useState(!1),[h,m]=p.useState(null),f=p.useRef(!1),b=p.useRef(!1),v=p.useRef([]);v.current=n;const g=s.enabled??!0,w=s.pollIntervalMs??(t.proposalId||t.campaignId?3e3:5e3),N=async S=>{try{if(f.current)return;f.current=!0,S?.silent||(c(!0),m(null));const D=(await ke.get("/messages",{params:t})).data,E=Array.isArray(D)?D:D.data,T=(Array.isArray(E)?E:[]).map(Zb);i(k=>Gb(k,T)),b.current=!0}catch(A){(!S?.silent||!b.current||v.current.length===0)&&m(A)}finally{S?.silent||c(!1),f.current=!1}},j=async S=>{const A=await ke.post("/messages",S);return i(D=>Gb(D,[Zb(A.data)])),A.data};return p.useEffect(()=>{N({silent:!1})},[t.proposalId,t.campaignId,t.channel]),p.useEffect(()=>{if(!g)return;const S=window.setInterval(()=>{typeof document<"u"&&document.visibilityState!=="visible"||N({silent:!0})},w);return()=>window.clearInterval(S)},[g,w,t.proposalId,t.campaignId,t.channel]),{messages:n,loading:l,error:h,refetch:N,sendMessage:j}}function y9(){const{user:t}=yl(),{messages:s,loading:n,error:i,refetch:l,sendMessage:c}=v9({}),[h,m]=p.useState(""),[f,b]=p.useState(null),[v,g]=p.useState(null),[w,N]=p.useState(null),j=()=>{const k=new URLSearchParams(window.location.search),R=k.get("campaignId"),O=k.get("proposalId");return R?{type:"campaign",id:R}:O?{type:"proposal",id:O}:null};p.useEffect(()=>{const k=()=>g(j());return k(),window.addEventListener("app:navigation",k),window.addEventListener("popstate",k),()=>{window.removeEventListener("app:navigation",k),window.removeEventListener("popstate",k)}},[]),p.useEffect(()=>{(async()=>{if(!v){N(null);return}try{if(v.type==="proposal"){const O=(await ke.get(`/proposals/${v.id}`)).data,H=O?.clientName||O?.client?.companyName||O?.client?.contactName||"Cliente",te=O?.title||`Proposta ...${String(v.id).slice(-6)}`;N(`${H}  ${te}`)}else{const O=(await ke.get(`/campaigns/${v.id}`)).data,H=O?.clientName||O?.client?.companyName||O?.client?.contactName||"Cliente",te=O?.name||`Campanha ...${String(v.id).slice(-6)}`;N(`${H}  ${te}`)}}catch{N(null)}})()},[v?.type,v?.id]);const S=p.useMemo(()=>{const k=new Map,R=new Map;s.forEach(H=>{if(H.proposalId){const te=k.get(H.proposalId)||[];k.set(H.proposalId,[...te,H])}if(H.campaignId){const te=R.get(H.campaignId)||[];R.set(H.campaignId,[...te,H])}});const O=[];return k.forEach((H,te)=>{const X=H.slice().sort((me,J)=>new Date(J.createdAt).getTime()-new Date(me.createdAt).getTime()),q=X[0],M=(new Date().getTime()-new Date(q.createdAt).getTime())/(1e3*60*60),B=q.direction===ji.IN&&M<48?1:0,ee=X.find(me=>me.senderType===pc.CLIENTE)?.senderName||"Cliente";O.push({id:`proposal:${te}`,type:"proposal",clientName:ee,proposalId:te,lastMessage:q.contentText,lastMessageAt:new Date(q.createdAt),unreadCount:B})}),R.forEach((H,te)=>{const X=H.slice().sort((M,B)=>new Date(B.createdAt).getTime()-new Date(M.createdAt).getTime()),q=X[0],U=X.find(M=>M.senderType===pc.CLIENTE)?.senderName||"Cliente";O.push({id:`campaign:${te}`,type:"campaign",clientName:U,campaignId:te,lastMessage:q.contentText,lastMessageAt:new Date(q.createdAt),unreadCount:0})}),v&&(O.some(te=>v.type==="proposal"?te.proposalId===v.id:te.campaignId===v.id)||O.push({id:`${v.type}:${v.id}`,type:v.type,clientName:w||"Nova conversa",proposalId:v.type==="proposal"?v.id:void 0,campaignId:v.type==="campaign"?v.id:void 0,lastMessage:"Sem mensagens ainda",lastMessageAt:new Date,unreadCount:0})),O.sort((H,te)=>te.lastMessageAt.getTime()-H.lastMessageAt.getTime())},[s,v,w]);p.useEffect(()=>{if(!v)return;const k=S.find(R=>v.type==="proposal"?R.proposalId===v.id:R.campaignId===v.id);k&&b(k)},[v?.type,v?.id,S]),p.useEffect(()=>{v||!f&&S.length>0&&b(S[0])},[v,S,f]);const A=p.useMemo(()=>f?s.filter(R=>f.proposalId?R.proposalId===f.proposalId:f.campaignId?R.campaignId===f.campaignId:!1).sort((R,O)=>new Date(R.createdAt).getTime()-new Date(O.createdAt).getTime()):[],[s,f]),D=k=>{b({...k,unreadCount:0})},E=async k=>{if(!f){Ie.error("Nenhuma conversa selecionada");return}try{await c({proposalId:f.proposalId,campaignId:f.campaignId,direction:ji.OUT,channel:go.EMAIL,senderType:pc.USER,senderName:t?.name||"Usurio",senderContact:t?.email||"",contentText:k}),Ie.success("Mensagem enviada com sucesso!"),l()}catch{Ie.error("Erro ao enviar mensagem")}},T=k=>{const R=k.length,O=Array.from(k).map(H=>H.name).join(", ");Ie.info(`${R} arquivo(s) selecionado(s): ${O}. Upload real ser implementado na integrao com WhatsApp API / Email / Storage.`,{duration:5e3})};return e.jsxs("div",{className:"p-8 flex flex-col h-screen",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Mensagens"}),e.jsx("p",{className:"text-gray-600",children:"Central de conversas (Message) por Proposta/Campanha"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 min-h-0",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ue,{className:"h-full",children:e.jsx(Ve,{className:"pt-6 h-full",children:e.jsx(f9,{conversations:S,selectedConversationId:f?.id||null,searchQuery:h,onSearchChange:k=>m(k),onSelectConversation:D})})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ue,{className:"h-full flex flex-col",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-gray-900",children:f.clientName}),f.proposalId&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Proposta: ...",f.proposalId.slice(-6)]}),f.campaignId&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Campanha: ...",f.campaignId.slice(-6)]})]}),e.jsx(Ve,{className:"flex-1 overflow-y-auto p-6",children:e.jsx(x9,{messages:A})}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx(g9,{onSend:E,onAttach:T,disabled:n})})]}):e.jsx(Ve,{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"Selecione uma conversa"})})})})]}),n&&e.jsx("div",{className:"mt-4 p-3 rounded bg-gray-50 text-gray-700",children:"Carregando mensagens..."}),!n&&i&&e.jsx("div",{className:"mt-4 p-3 rounded bg-red-50 text-red-700",children:"Erro ao carregar mensagens."}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Message (Mensagens)"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Campos: proposalId/campaignId, direction (IN/OUT), channel (EMAIL/WHATSAPP/SYSTEM), senderType (USER/CLIENTE), senderName, senderContact, contentText. Integraes futuras: WhatsApp API, chatbot, upload de anexos."})]})]})}function b9(t={}){const[s,n]=p.useState([]),[i,l]=p.useState(0),[c,h]=p.useState(!1),[m,f]=p.useState(null),b=async()=>{try{h(!0),f(null);const g=(await ke.get("/activity-logs",{params:t})).data,w=Array.isArray(g)?g:g.data,N=Array.isArray(g)?w.length:g.total??w.length;n(w),l(N)}catch(v){f(v)}finally{h(!1)}};return p.useEffect(()=>{b()},[t.resourceType,t.resourceId,t.userId,t.dateFrom,t.dateTo]),{logs:s,total:i,loading:c,error:m,refetch:b}}const _C=t=>{const s=(t||"").trim();return!s||/\s/.test(s)||/[]/i.test(s)?s:s.replace(/_/g," ").toLowerCase().replace(/\b\w/g,i=>i.toUpperCase())},ax=t=>{const s=(t||"").trim(),n=s.toUpperCase(),l={CASH_TRANSACTION_CREATE:"Transao criada",CASH_TRANSACTION_UPDATE:"Transao atualizada",CASH_TRANSACTION_DELETE:"Transao excluda",BILLING_INVOICE_MARK_PAID:"Fatura marcada como paga",MEDIA_POINT_IMPORT:"Inventrio importado",MEDIA_POINT_CREATE:"Ponto de mdia criado",MEDIA_POINT_DELETE:"Ponto de mdia excludo",MEDIA_POINT_IMAGE_UPLOAD:"Imagem do ponto enviada",MEDIA_UNIT_CREATE:"Unidade criada",CLIENT_CREATE:"Cliente criado",CLIENT_DELETE:"Cliente excludo",CLIENT_DOCUMENT_UPLOAD:"Documento do cliente enviado",RESERVATION_CREATE:"Reserva criada",RESERVATION_CANCEL:"Reserva cancelada",RESERVATION_STATUS_UPDATE:"Status da reserva atualizado",CAMPAIGN_CREATE:"Campanha criada",PUBLIC_PROPOSAL_APPROVE:"Proposta aprovada (portal pblico)",PUBLIC_PROPOSAL_REJECT:"Proposta recusada (portal pblico)",PUBLIC_PROPOSAL_MESSAGE:"Mensagem recebida (portal pblico)"}[n]??_C(s),c=n.startsWith("CASH_TRANSACTION")||n.startsWith("BILLING_INVOICE")||n.startsWith("FINANC")?"Financeiro":n.startsWith("MEDIA_")||n.startsWith("INVENT")||n.startsWith("MEDIA POINT")?"Inventrio":n.startsWith("CLIENT_")?"Clientes":n.startsWith("PROPOS")||n.startsWith("PUBLIC_PROPOSAL")||s.toLowerCase().includes("proposta")?"Propostas":n.startsWith("RESERVATION_")?"Reservas":n.startsWith("CAMPAIGN_")?"Campanhas":s.toLowerCase().includes("portal")?"Portal pblico":"Outros";return{label:l,group:c}},j9=t=>({tags:"Tags",isPaid:"Pago",amount:"Valor",date:"Data",description:"Descrio",partnerName:"Parceiro",categoryId:"Categoria",paymentType:"Tipo de pagamento",paymentMethod:"Modo de pagamento",flowType:"Tipo de transao",mediaPointId:"Ponto de mdia"})[t]??_C(t);function w9(){const[t,s]=p.useState(""),[n,i]=p.useState("ALL"),[l,c]=p.useState("ALL"),{logs:h,loading:m,error:f}=b9({}),b=p.useMemo(()=>[...h].sort((D,E)=>new Date(E.createdAt).getTime()-new Date(D.createdAt).getTime()),[h]),v=p.useMemo(()=>{const D=new Set;return h.forEach(E=>D.add(E.resourceType)),Array.from(D.values())},[h]),g=p.useMemo(()=>{const D=new Map;h.forEach(T=>{const k=ax(T.action);D.set(T.action,{value:T.action,label:k.label,group:k.group})});const E=new Intl.Collator("pt-BR",{sensitivity:"base"});return Array.from(D.values()).sort((T,k)=>{const R=E.compare(T.group,k.group);return R!==0?R:E.compare(T.label,k.label)})},[h]),w=p.useMemo(()=>{let D=[...b];if(n!=="ALL"&&(D=D.filter(E=>E.resourceType===n)),l!=="ALL"&&(D=D.filter(E=>E.action===l)),t.trim()){const E=t.toLowerCase();D=D.filter(T=>{const k=T.details?JSON.stringify(T.details).toLowerCase():"",R=ax(T.action).label.toLowerCase(),O=(T.resourceName??"").toLowerCase(),H=(T.userName??"").toLowerCase(),te=(T.userEmail??"").toLowerCase();return T.action.toLowerCase().includes(E)||R.includes(E)||T.resourceType.toLowerCase().includes(E)||O.includes(E)||H.includes(E)||te.includes(E)||k.includes(E)})}return D},[b,n,l,t]),N=D=>{switch(D){case ss.CLIENTE:return"bg-blue-100 text-blue-800";case ss.PROPOSTA:return"bg-purple-100 text-purple-800";case ss.CAMPANHA:return"bg-teal-100 text-teal-800";case ss.RESERVA:return"bg-cyan-100 text-cyan-800";case ss.MIDIA:return"bg-green-100 text-green-800";case ss.FINANCEIRO:return"bg-emerald-100 text-emerald-800";case ss.USUARIO:return"bg-orange-100 text-orange-800";case ss.ASSINATURA:return"bg-red-100 text-red-800";case ss.NF:return"bg-yellow-100 text-yellow-800";case ss.INTEGRACAO:return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},j=D=>{switch(D){case ss.CLIENTE:return"Cliente";case ss.PROPOSTA:return"Proposta";case ss.CAMPANHA:return"Campanha";case ss.RESERVA:return"Reserva";case ss.MIDIA:return"Mdia";case ss.FINANCEIRO:return"Financeiro";case ss.USUARIO:return"Usurio";case ss.ASSINATURA:return"Assinatura";case ss.NF:return"NF";case ss.INTEGRACAO:return"Integrao";default:return D}},S=D=>new Date(D).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),A=D=>{const E=D.details;if(!E)return null;if(typeof E=="string")return e.jsx("p",{className:"text-sm text-gray-700",children:E});const T=[];Array.isArray(E.changedFields)&&E.changedFields.length&&T.push(e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Campos alterados:"}),E.changedFields.map(R=>e.jsx(ht,{className:"bg-gray-100 text-gray-800",children:j9(R)},R))]},"changedFields"));const k=[{k:"message",label:"Mensagem"},{k:"filename",label:"Arquivo"},{k:"fileName",label:"Arquivo"},{k:"status",label:"Status"},{k:"count",label:"Quantidade"}];for(const R of k)E?.[R.k]!==void 0&&E?.[R.k]!==null&&!Array.isArray(E?.[R.k])&&typeof E?.[R.k]!="object"&&T.push(e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("span",{className:"font-medium",children:[R.label,":"]})," ",String(E[R.k])]},R.k));return T.length?e.jsx("div",{className:"space-y-2",children:T}):null};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Atividades"}),e.jsx("p",{className:"text-gray-600",children:"Histrico de aes realizadas no sistema"})]}),m&&e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Carregando atividades..."}),!m&&f&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:"Erro ao carregar atividades."}),e.jsx(Ue,{className:"mb-6",children:e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Pe,{placeholder:"Buscar por nome, ao ou detalhes...",value:t,onChange:D=>s(D.target.value),className:"pl-10"})]}),e.jsxs(At,{value:n,onValueChange:D=>i(D),children:[e.jsxs(Et,{className:"w-full md:w-48",children:[e.jsx(Ch,{className:"h-4 w-4 mr-2"}),e.jsx(Pt,{placeholder:"Recurso"})]}),e.jsxs(kt,{children:[e.jsx(De,{value:"ALL",children:"Todos os recursos"}),v.map(D=>e.jsx(De,{value:D,children:j(D)},D))]})]}),e.jsxs(At,{value:l,onValueChange:D=>c(D),children:[e.jsxs(Et,{className:"w-full md:w-48",children:[e.jsx(Ud,{className:"h-4 w-4 mr-2"}),e.jsx(Pt,{placeholder:"Aes"})]}),e.jsxs(kt,{children:[e.jsx(De,{value:"ALL",children:"Todas as aes"}),e.jsx(Qy,{}),(()=>{const D=new Map;return g.forEach(T=>{const k=D.get(T.group)??[];k.push(T),D.set(T.group,k)}),Array.from(D.entries()).flatMap(([T,k],R)=>{const O=[];return R>0&&O.push(e.jsx(Qy,{},`${T}-sep`)),O.push(e.jsxs(L4,{children:[e.jsx(F4,{children:T}),k.map(H=>e.jsx(De,{value:H.value,children:H.label},H.value))]},T)),O})})()]})]})]})})}),e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsx(Ue,{children:e.jsx(Ve,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma atividade encontrada com os filtros selecionados."})})}):w.map(D=>{const E=ax(D.action),T=A(D),k=(D.userName||D.userEmail||"").trim()||"Sistema";return e.jsx(Ue,{className:"hover:shadow-md transition-shadow",children:e.jsx(Ve,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ht,{className:N(D.resourceType),children:j(D.resourceType)}),e.jsx("div",{className:"flex flex-col",children:e.jsx("h3",{className:"text-gray-900",children:E.label})})]}),D.resourceName&&e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Referncia:"})," ",D.resourceName]}),T&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg mb-3",children:T}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Usurio: ",k]}),e.jsx("span",{children:""}),e.jsx("span",{children:S(D.createdAt)})]})]})})})},D.id)})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-1",children:" Auditoria"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Esta tela  somente leitura e mostra um histrico de aes realizadas no sistema. Use os filtros acima para encontrar rapidamente uma ao ou um recurso."})]})]})}function N9({company:t,onUpdateCompany:s}){const[n,i]=p.useState(t.name),[l,c]=p.useState(t.cnpj||""),[h,m]=p.useState(t.phone||""),[f,b]=p.useState(t.email||""),[v,g]=p.useState(t.site||""),[w,N]=p.useState(t.primaryColor||"#4f46e5"),[j,S]=p.useState(t.addressZipcode||""),[A,D]=p.useState(t.addressStreet||""),[E,T]=p.useState(t.addressNumber||""),[k,R]=p.useState(t.addressDistrict||""),[O,H]=p.useState(t.addressCity||""),[te,X]=p.useState(t.addressState||""),[q,U]=p.useState(t.addressCountry||"Brasil"),[M,B]=p.useState(t.defaultProposalNotes||""),[ee,me]=p.useState(null),[J,fe]=p.useState(t.logoUrl??null),W=F=>{const $=F.target.files?.[0];if($){if(!$.type.startsWith("image/")){Ie.error("Por favor, selecione apenas arquivos de imagem.");return}me($);const Y=new FileReader;Y.onloadend=()=>{fe(Y.result)},Y.readAsDataURL($),Ie.info("Logo selecionada. Na verso real, o upload ser via S3 com URL pr-assinada e logoUrl ser salvo na Company.")}},ae=()=>{if(!n.trim()){Ie.error("Nome da empresa  obrigatrio");return}const F={...t,name:n.trim(),cnpj:l.trim()||void 0,phone:h.trim()||void 0,email:f.trim()||void 0,site:v.trim()||void 0,primaryColor:w||void 0,addressZipcode:j.trim()||void 0,addressStreet:A.trim()||void 0,addressNumber:E.trim()||void 0,addressDistrict:k.trim()||void 0,addressCity:O.trim()||void 0,addressState:te.trim()||void 0,addressCountry:q.trim()||void 0,defaultProposalNotes:M.trim()||void 0,updatedAt:new Date};s(F),Ie.success("Dados da empresa atualizados (simulao em memria)")};return e.jsxs(Ue,{children:[e.jsx(Ec,{children:e.jsx(kc,{children:"Dados da Empresa (Company)"})}),e.jsxs(Ve,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center overflow-hidden",children:J?e.jsx("img",{src:J,alt:"Logo",className:"w-full h-full object-cover"}):e.jsx(wh,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",className:"hidden",onChange:W}),e.jsx(ne,{variant:"outline",onClick:()=>document.getElementById("logo-upload")?.click(),children:"Alterar Logo (logoUrl)"}),ee&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Arquivo: ",ee.name]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"companyName",children:"Nome da Empresa (name) *"}),e.jsx(Pe,{id:"companyName",value:n,onChange:F=>i(F.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(Pe,{id:"cnpj",value:l,onChange:F=>c(F.target.value),placeholder:"12.345.678/0001-90"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"companyPhone",children:"Telefone (phone)"}),e.jsx(Pe,{id:"companyPhone",value:h,onChange:F=>m(F.target.value),placeholder:"(11) 3000-0000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"companyEmail",children:"Email"}),e.jsx(Pe,{id:"companyEmail",type:"email",value:f,onChange:F=>b(F.target.value),placeholder:"contato@empresa.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"site",children:"Website (site)"}),e.jsx(Pe,{id:"site",value:v,onChange:F=>g(F.target.value),placeholder:"https://www.empresa.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"primaryColor",children:"Cor Oficial (primaryColor)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Pe,{id:"primaryColor",type:"color",value:w,onChange:F=>N(F.target.value),className:"w-20 h-10 cursor-pointer"}),e.jsx(Pe,{value:w,onChange:F=>N(F.target.value),placeholder:"#4f46e5",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"zipcode",children:"CEP (addressZipcode)"}),e.jsx(Pe,{id:"zipcode",value:j,onChange:F=>S(F.target.value),placeholder:"01310-100"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{htmlFor:"street",children:"Logradouro (addressStreet)"}),e.jsx(Pe,{id:"street",value:A,onChange:F=>D(F.target.value),placeholder:"Av. Paulista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"number",children:"Nmero (addressNumber)"}),e.jsx(Pe,{id:"number",value:E,onChange:F=>T(F.target.value),placeholder:"1000"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(we,{htmlFor:"district",children:"Bairro (addressDistrict)"}),e.jsx(Pe,{id:"district",value:k,onChange:F=>R(F.target.value),placeholder:"Bela Vista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"city",children:"Cidade (addressCity)"}),e.jsx(Pe,{id:"city",value:O,onChange:F=>H(F.target.value),placeholder:"So Paulo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"state",children:"Estado (addressState)"}),e.jsx(Pe,{id:"state",value:te,onChange:F=>X(F.target.value),placeholder:"SP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"country",children:"Pas (addressCountry)"}),e.jsx(Pe,{id:"country",value:q,onChange:F=>U(F.target.value),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx(we,{htmlFor:"proposalNotes",children:"Observaes Padro para Propostas (defaultProposalNotes)"}),e.jsx(Ei,{id:"proposalNotes",rows:4,value:M,onChange:F=>B(F.target.value),placeholder:"Valores sujeitos a alterao sem aviso prvio. Validade da proposta: 15 dias."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Este texto ser exibido por padro em todas as novas propostas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ne,{onClick:ae,children:"Salvar Alteraes"})})]})]})}function C9(t,s=!1){return(s?t/100:t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Kb(t){switch(t){case Kr.TESTE:return"Teste";case Kr.ATIVA:return"Ativa";case Kr.EM_ATRASO:return"Em atraso";case Kr.CANCELADA:return"Cancelada";default:return String(t)}}function _9({company:t,subscription:s,plans:n,plansLoading:i,pointsUsed:l,onUpdateSubscription:c}){const h=p.useMemo(()=>n.find(q=>q.id===s.planId)||null,[n,s.planId]),[m,f]=p.useState(s.planId),[b,v]=p.useState(s.maxOwnersPerMediaPoint||1),[g,w]=p.useState(!1),N=p.useMemo(()=>n.find(q=>q.id===m)||null,[n,m]),j=N?.maxPoints??null,S=j==null?"Ilimitado":String(j),A=j==null?0:Math.min(100,Math.round(l/j*100)),D=m!==s.planId||b!==s.maxOwnersPerMediaPoint,E=j==null?!0:l<=j,T=N?.monthlyPrice??0,k=T>=1e4,R=k?Xj(b):ek(b),O=T+R,H=async()=>{if(!N){alert("Selecione um plano vlido.");return}if(!E){alert(`Voc possui ${l} pontos cadastrados. Para escolher este plano (${S}), exclua pontos ou selecione um plano maior.`);return}try{w(!0),await c({planId:m,maxOwnersPerMediaPoint:b}),alert("Assinatura atualizada com sucesso.")}catch(q){alert(q?.response?.data?.message||"Erro ao atualizar assinatura.")}finally{w(!1)}},te=s.status,X=te===Kr.ATIVA||te===Kr.TESTE;return e.jsx("div",{className:"space-y-6",children:e.jsxs(Ue,{children:[e.jsx(Ec,{children:e.jsxs(kc,{className:"flex items-center gap-2",children:[e.jsx(cP,{className:"w-5 h-5"}),"Plano e Limites"]})}),e.jsxs(Ve,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:X?e.jsxs(ht,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:[e.jsx(Oj,{className:"w-3 h-3 mr-1"}),Kb(te)]}):e.jsxs(ht,{variant:"destructive",children:[e.jsx(Ld,{className:"w-3 h-3 mr-1"}),Kb(te)]})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Plano atual"}),e.jsx("div",{className:"font-medium",children:h?.name||""})]})]}),e.jsx(Ue,{className:"border-gray-200",children:e.jsxs(Ve,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zj,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Uso de pontos (limite por conta)"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[l," / ",S]})]}),j!=null&&e.jsx(xC,{value:A}),e.jsxs("div",{className:"text-xs text-gray-500",children:["O limite de pontos  sempre da ",e.jsx("b",{children:"conta"}),", independentemente da quantidade de proprietrios."]})]})}),e.jsx(Ue,{className:"border-gray-200",children:e.jsxs(Ve,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Selecione seu plano de pontos"}),e.jsxs(At,{value:m,onValueChange:f,children:[e.jsx(Et,{disabled:!!i,children:e.jsx(Pt,{placeholder:i?"Carregando planos...":"Selecione um plano"})}),e.jsx(kt,{children:n.map(q=>{const U=q.maxPoints==null?q.name:`${q.name} (${q.minPoints??0}-${q.maxPoints} pontos)`;return e.jsx(De,{value:q.id,children:U},q.id)})})]}),!E&&e.jsxs("div",{className:"text-xs text-red-600",children:["Este plano  menor que a quantidade de pontos j cadastrados (",l,")."]})]})}),e.jsx(Ue,{className:"border-gray-200",children:e.jsxs(Ve,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Assinatura multi-proprietrios (limite por ponto)"}),e.jsxs(At,{value:String(b),onValueChange:q=>v(parseInt(q,10)),children:[e.jsx(Et,{children:e.jsx(Pt,{placeholder:"Selecione"})}),e.jsx(kt,{children:[1,2,3,4].map(q=>e.jsx(De,{value:String(q),children:tk(q)},q))})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Esse limite  aplicado em cada ponto de mdia (ex.: 2 proprietrios por ponto).",e.jsx("br",{}),"Voc pode cadastrar empresas proprietrias ilimitadas no Super Admin."]})]})}),e.jsx(Ue,{className:"border-amber-200 bg-amber-50",children:e.jsxs(Ve,{className:"p-4 text-sm text-amber-900",children:[e.jsx("b",{children:"Pagamento ainda no integrado."})," Este fluxo j est preparado para integrao futura: ao salvar, o backend valida downgrade (pontos e proprietrios por ponto) e persiste o plano.",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"(TODO: integrar gateway e prorrateio)"})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap pt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total mensal (estimado)"}),e.jsx("div",{className:"text-lg font-semibold",children:C9(O,k)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Plano de pontos + assinatura multi-proprietrios."})]}),e.jsx(ne,{onClick:H,disabled:!D||g||!!i,children:g?e.jsxs(e.Fragment,{children:[e.jsx(IP,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Atualizar assinatura"})]})]})]})})}function S9(){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:"Perfil do usurio"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Em breve: configuraes de perfil (senha, 2FA, preferncias) sero disponibilizadas aqui."})]})}function A9(){const[t,s]=p.useState([]),[n,i]=p.useState(!1),[l,c]=p.useState(null),h=async()=>{try{i(!0),c(null);const f=(await ke.get("/platform-plans")).data,b=Array.isArray(f)?f:f.data;s(b)}catch(m){c(m)}finally{i(!1)}};return p.useEffect(()=>{h()},[]),{plans:t,loading:n,error:l,refetch:h}}const P9=()=>{if(typeof window>"u")return"company";const t=new URLSearchParams(window.location.search).get("tab");return t==="subscription"||t==="company"||t==="profile"?t:"company"};function E9(){const{company:t,subscription:s,pointsUsed:n,updateCompanyData:i,updateSubscriptionData:l,isLoading:c}=So(),{plans:h,loading:m,error:f}=A9(),[b,v]=p.useState(P9),g=typeof window>"u"?"":window.location.search;return p.useEffect(()=>{const w=new URLSearchParams(g).get("tab");(w==="subscription"||w==="company"||w==="profile")&&v(w)},[g]),c?e.jsx(Ue,{children:e.jsx(Ve,{className:"p-6 text-center text-gray-500",children:"Carregando configuraes..."})}):!t||!s?e.jsx(Ue,{children:e.jsx(Ve,{className:"p-6 text-center text-gray-500",children:"No foi possvel carregar os dados da empresa."})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(Ue,{children:[e.jsx(Ec,{children:e.jsx(kc,{children:"Configuraes"})}),e.jsx(Ve,{children:e.jsxs(ki,{value:b,onValueChange:v,children:[e.jsxs(Ti,{className:"grid w-full grid-cols-3",children:[e.jsx(on,{value:"company",children:"Empresa"}),e.jsx(on,{value:"subscription",children:"Assinatura"}),e.jsx(on,{value:"profile",children:"Perfil"})]}),e.jsx(_n,{value:"company",className:"mt-6",children:e.jsx(N9,{company:t,onUpdateCompany:i})}),e.jsxs(_n,{value:"subscription",className:"mt-6",children:[f&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:String(f)}),e.jsx(_9,{company:t,subscription:s,plans:h,plansLoading:m,pointsUsed:n,onUpdateSubscription:async w=>{await l(w)}})]}),e.jsx(_n,{value:"profile",className:"mt-6",children:e.jsx(S9,{})})]})})]})})}function k9(){const{ownerCompanies:t,loading:s,error:n,refetch:i,createOwnerCompany:l,updateOwnerCompany:c,deleteOwnerCompany:h}=t2(!0),[m,f]=p.useState(""),[b,v]=p.useState(!1),[g,w]=p.useState(null),N=p.useMemo(()=>{const j=m.trim().toLowerCase();return j?t.filter(S=>S.name.toLowerCase().includes(j)||(S.document??"").toLowerCase().includes(j)||(S.email??"").toLowerCase().includes(j)||(S.phone??"").toLowerCase().includes(j)):t},[t,m]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ue,{children:[e.jsx(Ec,{children:e.jsx(kc,{children:"Super Admin (Interno)  Empresas Proprietrias"})}),e.jsxs(Ve,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Aqui voc cadastra empresas proprietrias que podero ser vinculadas aos pontos do inventrio.",e.jsx("br",{}),e.jsx("b",{children:"No h limite"})," de empresas proprietrias na conta. O limite da assinatura multi-proprietrios  apenas a ",e.jsx("b",{children:"quantidade de proprietrios por ponto"}),"."]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Pe,{placeholder:"Buscar por nome, documento, e-mail ou telefone",value:m,onChange:j=>f(j.target.value),className:"max-w-md"}),e.jsxs(ne,{variant:"outline",onClick:i,disabled:s,children:[e.jsx(Wj,{className:"w-4 h-4 mr-2"}),"Atualizar"]}),e.jsxs(ne,{onClick:()=>{w(null),v(!0)},children:[e.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Nova empresa"]})]}),n&&e.jsx("div",{className:"text-sm text-red-600",children:String(n)}),s&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."}),!s&&N.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma empresa encontrada."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:N.map(j=>e.jsx(Ue,{className:j.isPrimary?"border-blue-200 bg-blue-50/40":"",children:e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:j.name}),j.isPrimary&&e.jsx(ht,{variant:"secondary",children:"Empresa prpria"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-x-4 gap-y-1",children:[j.document&&e.jsxs("span",{children:["Doc: ",j.document]}),j.email&&e.jsxs("span",{children:["E-mail: ",j.email]}),j.phone&&e.jsxs("span",{children:["Tel: ",j.phone]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{w(j),v(!0)},disabled:j.isPrimary,title:j.isPrimary?"Edite a empresa principal em Configuraes > Empresa":"Editar",children:e.jsx(Kx,{className:"w-4 h-4"})}),e.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{if(!j.isPrimary&&confirm(`Excluir a empresa "${j.name}"?`))try{await h(j.id)}catch(S){alert(S?.response?.data?.message||"Erro ao excluir.")}},disabled:j.isPrimary,title:j.isPrimary?"A empresa principal no pode ser excluda":"Excluir",children:e.jsx(xa,{className:"w-4 h-4"})})]})]})})},j.id))})]})]}),e.jsx(T9,{open:b,onOpenChange:j=>v(j),editing:g,onSubmit:async j=>{try{g?await c(g.id,j):await l(j),v(!1),w(null)}catch(S){alert(S?.response?.data?.message||"Erro ao salvar.")}}})]})}function T9({open:t,onOpenChange:s,editing:n,onSubmit:i}){const[l,c]=p.useState(n?.name??""),[h,m]=p.useState(n?.document??""),[f,b]=p.useState(n?.email??""),[v,g]=p.useState(n?.phone??"");p.useEffect(()=>{t&&(c(n?.name??""),m(n?.document??""),b(n?.email??""),g(n?.phone??""))},[t,n]);const w=l.trim().length>=2;return e.jsx(Dn,{open:t,onOpenChange:s,children:e.jsxs(In,{className:"max-w-lg",children:[e.jsx(Bn,{children:e.jsx(Un,{children:n?"Editar empresa proprietria":"Nova empresa proprietria"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Nome *"}),e.jsx(Pe,{value:l,onChange:N=>c(N.target.value),placeholder:"Ex: Prefeitura de ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Documento"}),e.jsx(Pe,{value:h,onChange:N=>m(N.target.value),placeholder:"CNPJ/CPF"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"Telefone"}),e.jsx(Pe,{value:v,onChange:N=>g(N.target.value),placeholder:"(11) 99999-9999"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{children:"E-mail"}),e.jsx(Pe,{value:f,onChange:N=>b(N.target.value),placeholder:"contato@empresa.com"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(ne,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(ne,{onClick:()=>i({name:l.trim(),document:h.trim()||void 0,email:f.trim()||void 0,phone:v.trim()||void 0}),disabled:!w,children:n?"Salvar":"Criar"})]})]})]})})}class D9 extends p.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s){console.error("Error in page render:",s)}render(){return this.state.hasError?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"border border-red-200 rounded-lg bg-red-50 p-6",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Ocorreu um erro ao abrir esta pgina."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Abra o console (F12) para ver detalhes."}),e.jsx("button",{type:"button",onClick:()=>{this.setState({hasError:!1,error:void 0}),this.props.onReset?.()},className:"px-3 py-2 rounded bg-white border",children:"Tentar novamente"})]})}):this.props.children}}function Xb({initialPage:t="dashboard"}){const[s,n]=p.useState(t);p.useEffect(()=>{n(t)},[t]);const[i,l]=p.useState(!1);p.useEffect(()=>{n(t)},[t]);const{user:c,logout:h,authReady:m}=yl(),f=Vs(),{isBlocked:b,blockMessage:v,isTrialEndingSoon:g,daysRemainingInTrial:w,subscription:N}=So();if(p.useEffect(()=>{m&&!c&&f("/login")},[m,c,f]),!m)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."})});if(!c)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50 p-6",children:e.jsxs("div",{className:"w-full max-w-md bg-white border border-gray-200 rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-2",children:"Sua sesso expirou."}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Voc precisa entrar novamente para continuar."}),e.jsx("button",{type:"button",onClick:()=>f("/login"),className:"w-full px-4 py-2 rounded-lg bg-[#4F46E5] text-white hover:opacity-95",children:"Ir para o login"})]})});const j=p.useMemo(()=>{if(b||!N||String(N.status)!=="EM_ATRASO"||!N.currentPeriodEnd)return null;const E=new Date(N.currentPeriodEnd);if(Number.isNaN(E.getTime()))return null;const T=1440*60*1e3,R=E.getTime()+3*T-Date.now();return R<=0?0:Math.ceil(R/T)},[b,N?.status,N?.currentPeriodEnd]),S=()=>{n("settings"),l(!1),f("/app/settings?tab=subscription")},A=E=>{n(E),l(!1)},D=()=>{switch(s){case"dashboard":return e.jsx(lb,{onNavigate:A});case"inventory":return e.jsx(kO,{});case"mediamap":return e.jsx(GL,{});case"clients":return e.jsx(S3,{});case"products":return e.jsx(m6,{});case"proposals":return e.jsx(U6,{onNavigate:A});case"campaigns":return e.jsx(Y6,{});case"reservations":return e.jsx(s9,{});case"financial":return e.jsx(p9,{});case"messages":return e.jsx(y9,{});case"mediakit":return e.jsx(BN,{});case"activities":return e.jsx(w9,{});case"settings":return e.jsx(E9,{});case"superadmin":return e.jsx(k9,{});default:return e.jsx(lb,{onNavigate:A})}};return e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(eb,{currentPage:s,onNavigate:A,isSuperAdmin:c.isSuperAdmin})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>l(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 transform transition-transform duration-300 ease-in-out md:hidden ${i?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg z-10",children:e.jsx(pr,{className:"w-6 h-6"})}),e.jsx(eb,{currentPage:s,onNavigate:A,isSuperAdmin:c.isSuperAdmin,isMobile:!0})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 md:hidden",children:[e.jsx("button",{onClick:()=>l(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(WP,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4F46E5] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]})]}),e.jsx("div",{className:"hidden md:block flex-1"}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm text-gray-900",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500 hidden md:block",children:c.email})]}),e.jsx("button",{onClick:h,className:"px-3 md:px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Sair"})]})]})}),(b||g||j!==null&&j>0)&&e.jsx("div",{className:"px-4 md:px-8 py-3 border-b "+(b?"bg-red-50 border-red-200":"bg-amber-50 border-amber-200"),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("div",{className:"text-sm",children:b?e.jsx("span",{className:"text-red-700",children:v??"Sua conta est com acesso restrito."}):j!==null&&j>0?e.jsxs("span",{className:"text-amber-800",children:["No identificamos o pagamento da renovao. Voc tem ",j," dia(s) para regularizar antes do bloqueio total."]}):e.jsxs("span",{className:"text-amber-800",children:["Seu perodo de teste termina em ",w??0," dia(s). Assine um plano para no ser bloqueado."]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:S,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(b?"bg-red-600 text-white hover:opacity-95":"bg-amber-600 text-white hover:opacity-95"),children:b?"Regularizar assinatura":"Ver planos"})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx(D9,{onReset:()=>window.dispatchEvent(new Event("app:navigation")),children:D()})})]})]})}const SC=p.createContext(()=>{}),Vs=()=>p.useContext(SC);function I9(){const t=()=>window.location.pathname+window.location.search,[s,n]=p.useState(t());p.useEffect(()=>{const c=()=>{n(t())};return window.addEventListener("popstate",c),()=>window.removeEventListener("popstate",c)},[]);const i=c=>{t()!==c&&(window.history.pushState({},"",c),n(c),window.scrollTo(0,0))},l=()=>{const c=s.split("?")[0].replace(/\/$/,"")||"/";if(c.startsWith("/p/"))return e.jsx(Nk,{});if(c==="/mk")return e.jsx(cR,{});if(c.startsWith("/app")){const h=c.replace("/app/","").replace("/app","");return!h||h===""?e.jsx(Xb,{initialPage:"dashboard"}):e.jsx(Xb,{initialPage:h})}switch(c){case"/":return e.jsx(jy,{});case"/signup":case"/cadastro":return e.jsx(uk,{});case"/planos":return e.jsx(jk,{});case"/login":return e.jsx(pk,{});case"/verify-email":return e.jsx(xk,{});case"/dashboard":return e.jsx(gk,{});case"/contato":return e.jsx(vk,{});case"/termos":return e.jsx(yk,{});case"/privacidade":return e.jsx(bk,{});default:return i("/"),e.jsx(jy,{})}};return e.jsx(SC.Provider,{value:i,children:e.jsx(SA,{children:e.jsxs(PA,{children:[l(),e.jsx(W_,{richColors:!0,position:"top-right"})]})})})}const ix="app_version",Yb="cache_rescue_for_version";async function AC(){if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistrations();await Promise.all(t.map(s=>s.unregister()))}catch{}if("caches"in window)try{const t=await caches.keys();await Promise.all(t.map(s=>caches.delete(s)))}catch{}}async function R9(){try{const t=new URL(window.location.href);if(t.searchParams.get("clearcache")!=="1")return;t.searchParams.delete("clearcache"),window.history.replaceState({},"",t.toString()),await AC(),window.location.reload()}catch{}}async function PC(){try{const t=await fetch(`/version.json?ts=${Date.now()}`,{cache:"no-store"});if(!t.ok)return;const n=(await t.json())?.version;if(!n)return;const i=localStorage.getItem(ix);if(!i){localStorage.setItem(ix,n);return}i!==n&&(localStorage.getItem(Yb)!==n&&(await AC(),localStorage.setItem(Yb,n)),localStorage.setItem(ix,n),window.location.reload())}catch{}}R9();PC();document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&PC()});v_.createRoot(document.getElementById("root")).render(e.jsx(I9,{}));
