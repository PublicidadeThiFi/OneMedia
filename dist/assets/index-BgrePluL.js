function Y_(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(r,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Vg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var px={exports:{}},Jd={},fx={exports:{}},es={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function J_(){if(eb)return es;eb=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.iterator;function N(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function k(W,ne,K){this.props=W,this.context=ne,this.refs=C,this.updater=K||w}k.prototype.isReactComponent={},k.prototype.setState=function(W,ne){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ne,"setState")},k.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function E(){}E.prototype=k.prototype;function S(W,ne,K){this.props=W,this.context=ne,this.refs=C,this.updater=K||w}var P=S.prototype=new E;P.constructor=S,j(P,k.prototype),P.isPureReactComponent=!0;var D=Array.isArray,I=Object.prototype.hasOwnProperty,O={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function X(W,ne,K){var ee,U={},le=null,Y=null;if(ne!=null)for(ee in ne.ref!==void 0&&(Y=ne.ref),ne.key!==void 0&&(le=""+ne.key),ne)I.call(ne,ee)&&!F.hasOwnProperty(ee)&&(U[ee]=ne[ee]);var ae=arguments.length-2;if(ae===1)U.children=K;else if(1<ae){for(var Ie=Array(ae),$e=0;$e<ae;$e++)Ie[$e]=arguments[$e+2];U.children=Ie}if(W&&W.defaultProps)for(ee in ae=W.defaultProps,ae)U[ee]===void 0&&(U[ee]=ae[ee]);return{$$typeof:t,type:W,key:le,ref:Y,props:U,_owner:O.current}}function Q(W,ne){return{$$typeof:t,type:W.type,key:ne,ref:W.ref,props:W.props,_owner:W._owner}}function V(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function $(W){var ne={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(K){return ne[K]})}var R=/\/+/g;function z(W,ne){return typeof W=="object"&&W!==null&&W.key!=null?$(""+W.key):ne.toString(36)}function J(W,ne,K,ee,U){var le=typeof W;(le==="undefined"||le==="boolean")&&(W=null);var Y=!1;if(W===null)Y=!0;else switch(le){case"string":case"number":Y=!0;break;case"object":switch(W.$$typeof){case t:case s:Y=!0}}if(Y)return Y=W,U=U(Y),W=ee===""?"."+z(Y,0):ee,D(U)?(K="",W!=null&&(K=W.replace(R,"$&/")+"/"),J(U,ne,K,"",function($e){return $e})):U!=null&&(V(U)&&(U=Q(U,K+(!U.key||Y&&Y.key===U.key?"":(""+U.key).replace(R,"$&/")+"/")+W)),ne.push(U)),1;if(Y=0,ee=ee===""?".":ee+":",D(W))for(var ae=0;ae<W.length;ae++){le=W[ae];var Ie=ee+z(le,ae);Y+=J(le,ne,K,Ie,U)}else if(Ie=N(W),typeof Ie=="function")for(W=Ie.call(W),ae=0;!(le=W.next()).done;)le=le.value,Ie=ee+z(le,ae++),Y+=J(le,ne,K,Ie,U);else if(le==="object")throw ne=String(W),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Y}function ue(W,ne,K){if(W==null)return W;var ee=[],U=0;return J(W,ee,"","",function(le){return ne.call(K,le,U++)}),ee}function se(W){if(W._status===-1){var ne=W._result;ne=ne(),ne.then(function(K){(W._status===0||W._status===-1)&&(W._status=1,W._result=K)},function(K){(W._status===0||W._status===-1)&&(W._status=2,W._result=K)}),W._status===-1&&(W._status=0,W._result=ne)}if(W._status===1)return W._result.default;throw W._result}var fe={current:null},H={transition:null},re={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:H,ReactCurrentOwner:O};function G(){throw Error("act(...) is not supported in production builds of React.")}return es.Children={map:ue,forEach:function(W,ne,K){ue(W,function(){ne.apply(this,arguments)},K)},count:function(W){var ne=0;return ue(W,function(){ne++}),ne},toArray:function(W){return ue(W,function(ne){return ne})||[]},only:function(W){if(!V(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},es.Component=k,es.Fragment=n,es.Profiler=o,es.PureComponent=S,es.StrictMode=r,es.Suspense=f,es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,es.act=G,es.cloneElement=function(W,ne,K){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ee=j({},W.props),U=W.key,le=W.ref,Y=W._owner;if(ne!=null){if(ne.ref!==void 0&&(le=ne.ref,Y=O.current),ne.key!==void 0&&(U=""+ne.key),W.type&&W.type.defaultProps)var ae=W.type.defaultProps;for(Ie in ne)I.call(ne,Ie)&&!F.hasOwnProperty(Ie)&&(ee[Ie]=ne[Ie]===void 0&&ae!==void 0?ae[Ie]:ne[Ie])}var Ie=arguments.length-2;if(Ie===1)ee.children=K;else if(1<Ie){ae=Array(Ie);for(var $e=0;$e<Ie;$e++)ae[$e]=arguments[$e+2];ee.children=ae}return{$$typeof:t,type:W.type,key:U,ref:le,props:ee,_owner:Y}},es.createContext=function(W){return W={$$typeof:u,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:c,_context:W},W.Consumer=W},es.createElement=X,es.createFactory=function(W){var ne=X.bind(null,W);return ne.type=W,ne},es.createRef=function(){return{current:null}},es.forwardRef=function(W){return{$$typeof:h,render:W}},es.isValidElement=V,es.lazy=function(W){return{$$typeof:x,_payload:{_status:-1,_result:W},_init:se}},es.memo=function(W,ne){return{$$typeof:v,type:W,compare:ne===void 0?null:ne}},es.startTransition=function(W){var ne=H.transition;H.transition={};try{W()}finally{H.transition=ne}},es.unstable_act=G,es.useCallback=function(W,ne){return fe.current.useCallback(W,ne)},es.useContext=function(W){return fe.current.useContext(W)},es.useDebugValue=function(){},es.useDeferredValue=function(W){return fe.current.useDeferredValue(W)},es.useEffect=function(W,ne){return fe.current.useEffect(W,ne)},es.useId=function(){return fe.current.useId()},es.useImperativeHandle=function(W,ne,K){return fe.current.useImperativeHandle(W,ne,K)},es.useInsertionEffect=function(W,ne){return fe.current.useInsertionEffect(W,ne)},es.useLayoutEffect=function(W,ne){return fe.current.useLayoutEffect(W,ne)},es.useMemo=function(W,ne){return fe.current.useMemo(W,ne)},es.useReducer=function(W,ne,K){return fe.current.useReducer(W,ne,K)},es.useRef=function(W){return fe.current.useRef(W)},es.useState=function(W){return fe.current.useState(W)},es.useSyncExternalStore=function(W,ne,K){return fe.current.useSyncExternalStore(W,ne,K)},es.useTransition=function(){return fe.current.useTransition()},es.version="18.3.1",es}var tb;function Hg(){return tb||(tb=1,fx.exports=J_()),fx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function eA(){if(sb)return Jd;sb=1;var t=Hg(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,v){var x,g={},N=null,w=null;v!==void 0&&(N=""+v),f.key!==void 0&&(N=""+f.key),f.ref!==void 0&&(w=f.ref);for(x in f)r.call(f,x)&&!c.hasOwnProperty(x)&&(g[x]=f[x]);if(h&&h.defaultProps)for(x in f=h.defaultProps,f)g[x]===void 0&&(g[x]=f[x]);return{$$typeof:s,type:h,key:N,ref:w,props:g,_owner:o.current}}return Jd.Fragment=n,Jd.jsx=u,Jd.jsxs=u,Jd}var nb;function tA(){return nb||(nb=1,px.exports=eA()),px.exports}var e=tA(),Jm={},xx={exports:{}},fa={},gx={exports:{}},vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function sA(){return ab||(ab=1,(function(t){function s(H,re){var G=H.length;H.push(re);e:for(;0<G;){var W=G-1>>>1,ne=H[W];if(0<o(ne,re))H[W]=re,H[G]=ne,G=W;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var re=H[0],G=H.pop();if(G!==re){H[0]=G;e:for(var W=0,ne=H.length,K=ne>>>1;W<K;){var ee=2*(W+1)-1,U=H[ee],le=ee+1,Y=H[le];if(0>o(U,G))le<ne&&0>o(Y,U)?(H[W]=Y,H[le]=G,W=le):(H[W]=U,H[ee]=G,W=ee);else if(le<ne&&0>o(Y,G))H[W]=Y,H[le]=G,W=le;else break e}}return re}function o(H,re){var G=H.sortIndex-re.sortIndex;return G!==0?G:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],v=[],x=1,g=null,N=3,w=!1,j=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(H){for(var re=n(v);re!==null;){if(re.callback===null)r(v);else if(re.startTime<=H)r(v),re.sortIndex=re.expirationTime,s(f,re);else break;re=n(v)}}function D(H){if(C=!1,P(H),!j)if(n(f)!==null)j=!0,se(I);else{var re=n(v);re!==null&&fe(D,re.startTime-H)}}function I(H,re){j=!1,C&&(C=!1,E(X),X=-1),w=!0;var G=N;try{for(P(re),g=n(f);g!==null&&(!(g.expirationTime>re)||H&&!$());){var W=g.callback;if(typeof W=="function"){g.callback=null,N=g.priorityLevel;var ne=W(g.expirationTime<=re);re=t.unstable_now(),typeof ne=="function"?g.callback=ne:g===n(f)&&r(f),P(re)}else r(f);g=n(f)}if(g!==null)var K=!0;else{var ee=n(v);ee!==null&&fe(D,ee.startTime-re),K=!1}return K}finally{g=null,N=G,w=!1}}var O=!1,F=null,X=-1,Q=5,V=-1;function $(){return!(t.unstable_now()-V<Q)}function R(){if(F!==null){var H=t.unstable_now();V=H;var re=!0;try{re=F(!0,H)}finally{re?z():(O=!1,F=null)}}else O=!1}var z;if(typeof S=="function")z=function(){S(R)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ue=J.port2;J.port1.onmessage=R,z=function(){ue.postMessage(null)}}else z=function(){k(R,0)};function se(H){F=H,O||(O=!0,z())}function fe(H,re){X=k(function(){H(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){j||w||(j=!0,se(I))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(H){switch(N){case 1:case 2:case 3:var re=3;break;default:re=N}var G=N;N=re;try{return H()}finally{N=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var G=N;N=H;try{return re()}finally{N=G}},t.unstable_scheduleCallback=function(H,re,G){var W=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?W+G:W):G=W,H){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=G+ne,H={id:x++,callback:re,priorityLevel:H,startTime:G,expirationTime:ne,sortIndex:-1},G>W?(H.sortIndex=G,s(v,H),n(f)===null&&H===n(v)&&(C?(E(X),X=-1):C=!0,fe(D,G-W))):(H.sortIndex=ne,s(f,H),j||w||(j=!0,se(I))),H},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(H){var re=N;return function(){var G=N;N=re;try{return H.apply(this,arguments)}finally{N=G}}}})(vx)),vx}var rb;function nA(){return rb||(rb=1,gx.exports=sA()),gx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function aA(){if(ib)return fa;ib=1;var t=Hg(),s=nA();function n(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function c(a,l){u(a,l),u(a+"Capture",l)}function u(a,l){for(o[a]=l,a=0;a<l.length;a++)r.add(l[a])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},g={};function N(a){return f.call(g,a)?!0:f.call(x,a)?!1:v.test(a)?g[a]=!0:(x[a]=!0,!1)}function w(a,l,p,b){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return b?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function j(a,l,p,b){if(l===null||typeof l>"u"||w(a,l,p,b))return!0;if(b)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,p,b,A,T,B){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=b,this.attributeNamespace=A,this.mustUseProperty=p,this.propertyName=a,this.type=l,this.sanitizeURL=T,this.removeEmptyString=B}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];k[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function S(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(E,S);k[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(E,S);k[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(E,S);k[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function P(a,l,p,b){var A=k.hasOwnProperty(l)?k[l]:null;(A!==null?A.type!==0:b||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(j(l,p,A,b)&&(p=null),b||A===null?N(l)&&(p===null?a.removeAttribute(l):a.setAttribute(l,""+p)):A.mustUseProperty?a[A.propertyName]=p===null?A.type===3?!1:"":p:(l=A.attributeName,b=A.attributeNamespace,p===null?a.removeAttribute(l):(A=A.type,p=A===3||A===4&&p===!0?"":""+p,b?a.setAttributeNS(b,l,p):a.setAttribute(l,p))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),O=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),$=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),H=Symbol.iterator;function re(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var G=Object.assign,W;function ne(a){if(W===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+a}var K=!1;function ee(a,l){if(!a||K)return"";K=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Pe){var b=Pe}Reflect.construct(a,[],l)}else{try{l.call()}catch(Pe){b=Pe}a.call(l.prototype)}else{try{throw Error()}catch(Pe){b=Pe}a()}}catch(Pe){if(Pe&&b&&typeof Pe.stack=="string"){for(var A=Pe.stack.split(`
`),T=b.stack.split(`
`),B=A.length-1,ie=T.length-1;1<=B&&0<=ie&&A[B]!==T[ie];)ie--;for(;1<=B&&0<=ie;B--,ie--)if(A[B]!==T[ie]){if(B!==1||ie!==1)do if(B--,ie--,0>ie||A[B]!==T[ie]){var he=`
`+A[B].replace(" at new "," at ");return a.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",a.displayName)),he}while(1<=B&&0<=ie);break}}}finally{K=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?ne(a):""}function U(a){switch(a.tag){case 5:return ne(a.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return a=ee(a.type,!1),a;case 11:return a=ee(a.type.render,!1),a;case 1:return a=ee(a.type,!0),a;default:return""}}function le(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case O:return"Portal";case Q:return"Profiler";case X:return"StrictMode";case z:return"Suspense";case J:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case $:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case R:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ue:return l=a.displayName||null,l!==null?l:le(a.type)||"Memo";case se:l=a._payload,a=a._init;try{return le(a(l))}catch{}}return null}function Y(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(l);case 8:return l===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function ae(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ie(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function $e(a){var l=Ie(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),b=""+a[l];if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,T=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return A.call(this)},set:function(B){b=""+B,T.call(this,B)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(B){b=""+B},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ge(a){a._valueTracker||(a._valueTracker=$e(a))}function Xe(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),b="";return a&&(b=Ie(a)?a.checked?"true":"false":a.value),a=b,a!==p?(l.setValue(a),!0):!1}function Je(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function tt(a,l){var p=l.checked;return G({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function ut(a,l){var p=l.defaultValue==null?"":l.defaultValue,b=l.checked!=null?l.checked:l.defaultChecked;p=ae(l.value!=null?l.value:p),a._wrapperState={initialChecked:b,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function wt(a,l){l=l.checked,l!=null&&P(a,"checked",l,!1)}function mt(a,l){wt(a,l);var p=ae(l.value),b=l.type;if(p!=null)b==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(b==="submit"||b==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?zt(a,l.type,p):l.hasOwnProperty("defaultValue")&&zt(a,l.type,ae(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function kt(a,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var b=l.type;if(!(b!=="submit"&&b!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,p||l===a.value||(a.value=l),a.defaultValue=l}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function zt(a,l,p){(l!=="number"||Je(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var te=Array.isArray;function xe(a,l,p,b){if(a=a.options,l){l={};for(var A=0;A<p.length;A++)l["$"+p[A]]=!0;for(p=0;p<a.length;p++)A=l.hasOwnProperty("$"+a[p].value),a[p].selected!==A&&(a[p].selected=A),A&&b&&(a[p].defaultSelected=!0)}else{for(p=""+ae(p),l=null,A=0;A<a.length;A++){if(a[A].value===p){a[A].selected=!0,b&&(a[A].defaultSelected=!0);return}l!==null||a[A].disabled||(l=a[A])}l!==null&&(l.selected=!0)}}function pe(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ue(a,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(n(92));if(te(p)){if(1<p.length)throw Error(n(93));p=p[0]}l=p}l==null&&(l=""),p=l}a._wrapperState={initialValue:ae(p)}}function ce(a,l){var p=ae(l.value),b=ae(l.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),l.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),b!=null&&(a.defaultValue=""+b)}function ve(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function ze(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?ze(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var pt,me=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,b,A){MSApp.execUnsafeLocalFunction(function(){return a(l,p,b,A)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(pt=pt||document.createElement("div"),pt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=pt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Oe(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var Ke={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lt=["Webkit","ms","Moz","O"];Object.keys(Ke).forEach(function(a){lt.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Ke[l]=Ke[a]})});function Tt(a,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Ke.hasOwnProperty(a)&&Ke[a]?(""+l).trim():l+"px"}function ps(a,l){a=a.style;for(var p in l)if(l.hasOwnProperty(p)){var b=p.indexOf("--")===0,A=Tt(p,l[p],b);p==="float"&&(p="cssFloat"),b?a.setProperty(p,A):a[p]=A}}var Ts=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ws(a,l){if(l){if(Ts[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function rs(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function gs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Fs=null,Ws=null,ks=null;function an(a){if(a=bi(a)){if(typeof Fs!="function")throw Error(n(280));var l=a.stateNode;l&&(l=mc(l),Fs(a.stateNode,a.type,l))}}function yt(a){Ws?ks?ks.push(a):ks=[a]:Ws=a}function os(){if(Ws){var a=Ws,l=ks;if(ks=Ws=null,an(a),l)for(a=0;a<l.length;a++)an(l[a])}}function qt(a,l){return a(l)}function Ds(){}var js=!1;function vs(a,l,p){if(js)return a(l,p);js=!0;try{return qt(a,l,p)}finally{js=!1,(Ws!==null||ks!==null)&&(Ds(),os())}}function Ae(a,l){var p=a.stateNode;if(p===null)return null;var b=mc(p);if(b===null)return null;p=b[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,l,typeof p));return p}var nt=!1;if(h)try{var it={};Object.defineProperty(it,"passive",{get:function(){nt=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{nt=!1}function be(a,l,p,b,A,T,B,ie,he){var Pe=Array.prototype.slice.call(arguments,3);try{l.apply(p,Pe)}catch(Ze){this.onError(Ze)}}var Me=!1,Fe=null,Dt=!1,Mt=null,Ns={onError:function(a){Me=!0,Fe=a}};function Xt(a,l,p,b,A,T,B,ie,he){Me=!1,Fe=null,be.apply(Ns,arguments)}function ds(a,l,p,b,A,T,B,ie,he){if(Xt.apply(this,arguments),Me){if(Me){var Pe=Fe;Me=!1,Fe=null}else throw Error(n(198));Dt||(Dt=!0,Mt=Pe)}}function ys(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function Ys(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function un(a){if(ys(a)!==a)throw Error(n(188))}function In(a){var l=a.alternate;if(!l){if(l=ys(a),l===null)throw Error(n(188));return l!==a?null:a}for(var p=a,b=l;;){var A=p.return;if(A===null)break;var T=A.alternate;if(T===null){if(b=A.return,b!==null){p=b;continue}break}if(A.child===T.child){for(T=A.child;T;){if(T===p)return un(A),a;if(T===b)return un(A),l;T=T.sibling}throw Error(n(188))}if(p.return!==b.return)p=A,b=T;else{for(var B=!1,ie=A.child;ie;){if(ie===p){B=!0,p=A,b=T;break}if(ie===b){B=!0,b=A,p=T;break}ie=ie.sibling}if(!B){for(ie=T.child;ie;){if(ie===p){B=!0,p=T,b=A;break}if(ie===b){B=!0,b=T,p=A;break}ie=ie.sibling}if(!B)throw Error(n(189))}}if(p.alternate!==b)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:l}function Wo(a){return a=In(a),a!==null?Vi(a):null}function Vi(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Vi(a);if(l!==null)return l;a=a.sibling}return null}var Hl=s.unstable_scheduleCallback,Zo=s.unstable_cancelCallback,pd=s.unstable_shouldYield,oe=s.unstable_requestPaint,Ee=s.unstable_now,$t=s.unstable_getCurrentPriorityLevel,us=s.unstable_ImmediatePriority,Ut=s.unstable_UserBlockingPriority,Zs=s.unstable_NormalPriority,Rt=s.unstable_LowPriority,mn=s.unstable_IdlePriority,Yt=null,bt=null;function Cs(a){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:Ha,ns=Math.log,zn=Math.LN2;function Ha(a){return a>>>=0,a===0?32:31-(ns(a)/zn|0)|0}var mr=64,Hi=4194304;function Lt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Is(a,l){var p=a.pendingLanes;if(p===0)return 0;var b=0,A=a.suspendedLanes,T=a.pingedLanes,B=p&268435455;if(B!==0){var ie=B&~A;ie!==0?b=Lt(ie):(T&=B,T!==0&&(b=Lt(T)))}else B=p&~A,B!==0?b=Lt(B):T!==0&&(b=Lt(T));if(b===0)return 0;if(l!==0&&l!==b&&(l&A)===0&&(A=b&-b,T=l&-l,A>=T||A===16&&(T&4194240)!==0))return l;if((b&4)!==0&&(b|=p&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=b;0<l;)p=31-ct(l),A=1<<p,b|=a[p],l&=~A;return b}function fd(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ql(a,l){for(var p=a.suspendedLanes,b=a.pingedLanes,A=a.expirationTimes,T=a.pendingLanes;0<T;){var B=31-ct(T),ie=1<<B,he=A[B];he===-1?((ie&p)===0||(ie&b)!==0)&&(A[B]=fd(ie,l)):he<=l&&(a.expiredLanes|=ie),T&=~ie}}function Bn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Wu(){var a=mr;return mr<<=1,(mr&4194240)===0&&(mr=64),a}function qi(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function _a(a,l,p){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ct(l),a[l]=p}function Js(a,l){var p=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var b=a.eventTimes;for(a=a.expirationTimes;0<p;){var A=31-ct(p),T=1<<A;l[A]=0,b[A]=-1,a[A]=-1,p&=~T}}function hr(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var b=31-ct(p),A=1<<b;A&l|a[b]&l&&(a[b]|=l),p&=~A}}var is=0;function Wi(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Wl,di,Zl,Gl,Go,Ko=!1,Zi=[],Aa=null,pr=null,qa=null,Qo=new Map,It=new Map,yn=[],Ss="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xd(a,l){switch(a){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Qo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(l.pointerId)}}function ui(a,l,p,b,A,T){return a===null||a.nativeEvent!==T?(a={blockedOn:l,domEventName:p,eventSystemFlags:b,nativeEvent:T,targetContainers:[A]},l!==null&&(l=bi(l),l!==null&&di(l)),a):(a.eventSystemFlags|=b,l=a.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),a)}function gd(a,l,p,b,A){switch(l){case"focusin":return Aa=ui(Aa,a,l,p,b,A),!0;case"dragenter":return pr=ui(pr,a,l,p,b,A),!0;case"mouseover":return qa=ui(qa,a,l,p,b,A),!0;case"pointerover":var T=A.pointerId;return Qo.set(T,ui(Qo.get(T)||null,a,l,p,b,A)),!0;case"gotpointercapture":return T=A.pointerId,It.set(T,ui(It.get(T)||null,a,l,p,b,A)),!0}return!1}function Kl(a){var l=yi(a.target);if(l!==null){var p=ys(l);if(p!==null){if(l=p.tag,l===13){if(l=Ys(p),l!==null){a.blockedOn=l,Go(a.priority,function(){Zl(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Wa(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=Yl(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var b=new p.constructor(p.type,p);fs=b,p.target.dispatchEvent(b),fs=null}else return l=bi(p),l!==null&&di(l),a.blockedOn=p,!1;l.shift()}return!0}function Ql(a,l,p){Wa(a)&&p.delete(l)}function Xo(){Ko=!1,Aa!==null&&Wa(Aa)&&(Aa=null),pr!==null&&Wa(pr)&&(pr=null),qa!==null&&Wa(qa)&&(qa=null),Qo.forEach(Ql),It.forEach(Ql)}function Gs(a,l){a.blockedOn===l&&(a.blockedOn=null,Ko||(Ko=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Xo)))}function Pa(a){function l(A){return Gs(A,a)}if(0<Zi.length){Gs(Zi[0],a);for(var p=1;p<Zi.length;p++){var b=Zi[p];b.blockedOn===a&&(b.blockedOn=null)}}for(Aa!==null&&Gs(Aa,a),pr!==null&&Gs(pr,a),qa!==null&&Gs(qa,a),Qo.forEach(l),It.forEach(l),p=0;p<yn.length;p++)b=yn[p],b.blockedOn===a&&(b.blockedOn=null);for(;0<yn.length&&(p=yn[0],p.blockedOn===null);)Kl(p),p.blockedOn===null&&yn.shift()}var mi=D.ReactCurrentBatchConfig,Yo=!0;function Gp(a,l,p,b){var A=is,T=mi.transition;mi.transition=null;try{is=1,Jo(a,l,p,b)}finally{is=A,mi.transition=T}}function Zu(a,l,p,b){var A=is,T=mi.transition;mi.transition=null;try{is=4,Jo(a,l,p,b)}finally{is=A,mi.transition=T}}function Jo(a,l,p,b){if(Yo){var A=Yl(a,l,p,b);if(A===null)i(a,l,b,Xl,p),xd(a,b);else if(gd(A,a,l,p,b))b.stopPropagation();else if(xd(a,b),l&4&&-1<Ss.indexOf(a)){for(;A!==null;){var T=bi(A);if(T!==null&&Wl(T),T=Yl(a,l,p,b),T===null&&i(a,l,b,Xl,p),T===A)break;A=T}A!==null&&b.stopPropagation()}else i(a,l,b,null,p)}}var Xl=null;function Yl(a,l,p,b){if(Xl=null,a=gs(b),a=yi(a),a!==null)if(l=ys(a),l===null)a=null;else if(p=l.tag,p===13){if(a=Ys(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Xl=a,null}function ts(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($t()){case us:return 1;case Ut:return 4;case Zs:case Rt:return 16;case mn:return 536870912;default:return 16}default:return 16}}var Lr=null,Kn=null,Fr=null;function vd(){if(Fr)return Fr;var a,l=Kn,p=l.length,b,A="value"in Lr?Lr.value:Lr.textContent,T=A.length;for(a=0;a<p&&l[a]===A[a];a++);var B=p-a;for(b=1;b<=B&&l[p-b]===A[T-b];b++);return Fr=A.slice(a,1<b?1-b:void 0)}function Jl(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Gi(){return!0}function Gu(){return!1}function Un(a){function l(p,b,A,T,B){this._reactName=p,this._targetInst=A,this.type=b,this.nativeEvent=T,this.target=B,this.currentTarget=null;for(var ie in a)a.hasOwnProperty(ie)&&(p=a[ie],this[ie]=p?p(T):T[ie]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Gi:Gu,this.isPropagationStopped=Gu,this}return G(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),l}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=Un(Ki),hi=G({},Ki,{view:0,detail:0}),Kp=Un(hi),la,bd,Qi,Ea=G({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Qi&&(Qi&&a.type==="mousemove"?(la=a.screenX-Qi.screenX,bd=a.screenY-Qi.screenY):bd=la=0,Qi=a),la)},movementY:function(a){return"movementY"in a?a.movementY:bd}}),jd=Un(Ea),Ku=G({},Ea,{dataTransfer:0}),Nd=Un(Ku),Qp=G({},hi,{relatedTarget:0}),ec=Un(Qp),Qu=G({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Xp=Un(Qu),Yp=G({},Ki,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),wd=Un(Yp),Jp=G({},Ki,{data:0}),Cd=Un(Jp),Xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ef(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=pi[a])?!!l[a]:!1}function fi(){return ef}var ca=G({},hi,{key:function(a){if(a.key){var l=Xu[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Jl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?tc[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(a){return a.type==="keypress"?Jl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Jl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Yu=Un(ca),Ju=G({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),em=Un(Ju),Sd=G({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi}),_d=Un(Sd),tf=G({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),sf=Un(tf),tm=G({},Ea,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),nf=Un(tm),ka=[9,13,27,32],$r=h&&"CompositionEvent"in window,el=null;h&&"documentMode"in document&&(el=document.documentMode);var fr=h&&"TextEvent"in window&&!el,sm=h&&(!$r||el&&8<el&&11>=el),xi=" ",nm=!1;function Xi(a,l){switch(a){case"keyup":return ka.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var xr=!1;function af(a,l){switch(a){case"compositionend":return Ad(l);case"keypress":return l.which!==32?null:(nm=!0,xi);case"textInput":return a=l.data,a===xi&&nm?null:a;default:return null}}function zr(a,l){if(xr)return a==="compositionend"||!$r&&Xi(a,l)?(a=vd(),Fr=Kn=Lr=null,xr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return sm&&l.locale!=="ko"?null:l.data;default:return null}}var sc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!sc[a.type]:l==="textarea"}function nc(a,l,p,b){yt(b),l=y(l,"onChange"),0<l.length&&(p=new yd("onChange","change",null,p,b),a.push({event:p,listeners:l}))}var tl=null,Qn=null;function rf(a){Od(a,0)}function gr(a){var l=ji(a);if(Xe(l))return a}function of(a,l){if(a==="change")return l}var Za=!1;if(h){var Yi;if(h){var ac="oninput"in document;if(!ac){var rc=document.createElement("div");rc.setAttribute("oninput","return;"),ac=typeof rc.oninput=="function"}Yi=ac}else Yi=!1;Za=Yi&&(!document.documentMode||9<document.documentMode)}function sl(){tl&&(tl.detachEvent("onpropertychange",ic),Qn=tl=null)}function ic(a){if(a.propertyName==="value"&&gr(Qn)){var l=[];nc(l,Qn,a,gs(a)),vs(rf,l)}}function oc(a,l,p){a==="focusin"?(sl(),tl=l,Qn=p,tl.attachEvent("onpropertychange",ic)):a==="focusout"&&sl()}function Ji(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return gr(Qn)}function lc(a,l){if(a==="click")return gr(l)}function Pd(a,l){if(a==="input"||a==="change")return gr(l)}function rm(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Da=typeof Object.is=="function"?Object.is:rm;function Br(a,l){if(Da(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),b=Object.keys(l);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var A=p[b];if(!f.call(l,A)||!Da(a[A],l[A]))return!1}return!0}function im(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ed(a,l){var p=im(a);a=0;for(var b;p;){if(p.nodeType===3){if(b=a+p.textContent.length,a<=l&&b>=l)return{node:p,offset:l-a};a=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=im(p)}}function om(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?om(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function kd(){for(var a=window,l=Je();l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=Je(a.document)}return l}function Dd(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Ga(a){var l=kd(),p=a.focusedElem,b=a.selectionRange;if(l!==p&&p&&p.ownerDocument&&om(p.ownerDocument.documentElement,p)){if(b!==null&&Dd(p)){if(l=b.start,a=b.end,a===void 0&&(a=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(a,p.value.length);else if(a=(l=p.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var A=p.textContent.length,T=Math.min(b.start,A);b=b.end===void 0?T:Math.min(b.end,A),!a.extend&&T>b&&(A=b,b=T,T=A),A=Ed(p,T);var B=Ed(p,b);A&&B&&(a.rangeCount!==1||a.anchorNode!==A.node||a.anchorOffset!==A.offset||a.focusNode!==B.node||a.focusOffset!==B.offset)&&(l=l.createRange(),l.setStart(A.node,A.offset),a.removeAllRanges(),T>b?(a.addRange(l),a.extend(B.node,B.offset)):(l.setEnd(B.node,B.offset),a.addRange(l)))}}for(l=[],a=p;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)a=l[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var cc=h&&"documentMode"in document&&11>=document.documentMode,eo=null,to=null,nl=null,dc=!1;function lm(a,l,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;dc||eo==null||eo!==Je(b)||(b=eo,"selectionStart"in b&&Dd(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),nl&&Br(nl,b)||(nl=b,b=y(to,"onSelect"),0<b.length&&(l=new yd("onSelect","select",null,l,p),a.push({event:l,listeners:b}),l.target=eo)))}function Ur(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var so={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionend:Ur("Transition","TransitionEnd")},Vr={},Td={};h&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function al(a){if(Vr[a])return Vr[a];if(!so[a])return a;var l=so[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in Td)return Vr[a]=l[p];return a}var cm=al("animationend"),Ka=al("animationiteration"),Id=al("animationstart"),Md=al("transitionend"),no=new Map,dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(a,l){no.set(a,l),c(l,[a])}for(var gi=0;gi<dm.length;gi++){var uc=dm[gi],um=uc.toLowerCase(),lf=uc[0].toUpperCase()+uc.slice(1);Ta(um,"on"+lf)}Ta(cm,"onAnimationEnd"),Ta(Ka,"onAnimationIteration"),Ta(Id,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Md,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function Rd(a,l,p){var b=a.type||"unknown-event";a.currentTarget=p,ds(b,l,void 0,a),a.currentTarget=null}function Od(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var b=a[p],A=b.event;b=b.listeners;e:{var T=void 0;if(l)for(var B=b.length-1;0<=B;B--){var ie=b[B],he=ie.instance,Pe=ie.currentTarget;if(ie=ie.listener,he!==T&&A.isPropagationStopped())break e;Rd(A,ie,Pe),T=he}else for(B=0;B<b.length;B++){if(ie=b[B],he=ie.instance,Pe=ie.currentTarget,ie=ie.listener,he!==T&&A.isPropagationStopped())break e;Rd(A,ie,Pe),T=he}}}if(Dt)throw a=Mt,Dt=!1,Mt=null,a}function _s(a,l){var p=l[lo];p===void 0&&(p=l[lo]=new Set);var b=a+"__bubble";p.has(b)||(hm(l,a,2,!1),p.add(b))}function Ld(a,l,p){var b=0;l&&(b|=4),hm(p,a,b,l)}var rl="_reactListening"+Math.random().toString(36).slice(2);function ro(a){if(!a[rl]){a[rl]=!0,r.forEach(function(p){p!=="selectionchange"&&(mm.has(p)||Ld(p,!1,a),Ld(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[rl]||(l[rl]=!0,Ld("selectionchange",!1,l))}}function hm(a,l,p,b){switch(ts(l)){case 1:var A=Gp;break;case 4:A=Zu;break;default:A=Jo}p=A.bind(null,l,p,a),A=void 0,!nt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),b?A!==void 0?a.addEventListener(l,p,{capture:!0,passive:A}):a.addEventListener(l,p,!0):A!==void 0?a.addEventListener(l,p,{passive:A}):a.addEventListener(l,p,!1)}function i(a,l,p,b,A){var T=b;if((l&1)===0&&(l&2)===0&&b!==null)e:for(;;){if(b===null)return;var B=b.tag;if(B===3||B===4){var ie=b.stateNode.containerInfo;if(ie===A||ie.nodeType===8&&ie.parentNode===A)break;if(B===4)for(B=b.return;B!==null;){var he=B.tag;if((he===3||he===4)&&(he=B.stateNode.containerInfo,he===A||he.nodeType===8&&he.parentNode===A))return;B=B.return}for(;ie!==null;){if(B=yi(ie),B===null)return;if(he=B.tag,he===5||he===6){b=T=B;continue e}ie=ie.parentNode}}b=b.return}vs(function(){var Pe=T,Ze=gs(p),Qe=[];e:{var We=no.get(a);if(We!==void 0){var ot=yd,ht=a;switch(a){case"keypress":if(Jl(p)===0)break e;case"keydown":case"keyup":ot=Yu;break;case"focusin":ht="focus",ot=ec;break;case"focusout":ht="blur",ot=ec;break;case"beforeblur":case"afterblur":ot=ec;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=_d;break;case cm:case Ka:case Id:ot=Xp;break;case Md:ot=sf;break;case"scroll":ot=Kp;break;case"wheel":ot=nf;break;case"copy":case"cut":case"paste":ot=wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=em}var ft=(l&4)!==0,rn=!ft&&a==="scroll",Ce=ft?We!==null?We+"Capture":null:We;ft=[];for(var ge=Pe,Se;ge!==null;){Se=ge;var Ye=Se.stateNode;if(Se.tag===5&&Ye!==null&&(Se=Ye,Ce!==null&&(Ye=Ae(ge,Ce),Ye!=null&&ft.push(d(ge,Ye,Se)))),rn)break;ge=ge.return}0<ft.length&&(We=new ot(We,ht,null,p,Ze),Qe.push({event:We,listeners:ft}))}}if((l&7)===0){e:{if(We=a==="mouseover"||a==="pointerover",ot=a==="mouseout"||a==="pointerout",We&&p!==fs&&(ht=p.relatedTarget||p.fromElement)&&(yi(ht)||ht[bs]))break e;if((ot||We)&&(We=Ze.window===Ze?Ze:(We=Ze.ownerDocument)?We.defaultView||We.parentWindow:window,ot?(ht=p.relatedTarget||p.toElement,ot=Pe,ht=ht?yi(ht):null,ht!==null&&(rn=ys(ht),ht!==rn||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(ot=null,ht=Pe),ot!==ht)){if(ft=jd,Ye="onMouseLeave",Ce="onMouseEnter",ge="mouse",(a==="pointerout"||a==="pointerover")&&(ft=em,Ye="onPointerLeave",Ce="onPointerEnter",ge="pointer"),rn=ot==null?We:ji(ot),Se=ht==null?We:ji(ht),We=new ft(Ye,ge+"leave",ot,p,Ze),We.target=rn,We.relatedTarget=Se,Ye=null,yi(Ze)===Pe&&(ft=new ft(Ce,ge+"enter",ht,p,Ze),ft.target=Se,ft.relatedTarget=rn,Ye=ft),rn=Ye,ot&&ht)t:{for(ft=ot,Ce=ht,ge=0,Se=ft;Se;Se=_(Se))ge++;for(Se=0,Ye=Ce;Ye;Ye=_(Ye))Se++;for(;0<ge-Se;)ft=_(ft),ge--;for(;0<Se-ge;)Ce=_(Ce),Se--;for(;ge--;){if(ft===Ce||Ce!==null&&ft===Ce.alternate)break t;ft=_(ft),Ce=_(Ce)}ft=null}else ft=null;ot!==null&&M(Qe,We,ot,ft,!1),ht!==null&&rn!==null&&M(Qe,rn,ht,ft,!0)}}e:{if(We=Pe?ji(Pe):window,ot=We.nodeName&&We.nodeName.toLowerCase(),ot==="select"||ot==="input"&&We.type==="file")var gt=of;else if(am(We))if(Za)gt=Pd;else{gt=Ji;var Ct=oc}else(ot=We.nodeName)&&ot.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(gt=lc);if(gt&&(gt=gt(a,Pe))){nc(Qe,gt,p,Ze);break e}Ct&&Ct(a,We,Pe),a==="focusout"&&(Ct=We._wrapperState)&&Ct.controlled&&We.type==="number"&&zt(We,"number",We.value)}switch(Ct=Pe?ji(Pe):window,a){case"focusin":(am(Ct)||Ct.contentEditable==="true")&&(eo=Ct,to=Pe,nl=null);break;case"focusout":nl=to=eo=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,lm(Qe,p,Ze);break;case"selectionchange":if(cc)break;case"keydown":case"keyup":lm(Qe,p,Ze)}var St;if($r)e:{switch(a){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else xr?Xi(a,p)&&(Ot="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Ot="onCompositionStart");Ot&&(sm&&p.locale!=="ko"&&(xr||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&xr&&(St=vd()):(Lr=Ze,Kn="value"in Lr?Lr.value:Lr.textContent,xr=!0)),Ct=y(Pe,Ot),0<Ct.length&&(Ot=new Cd(Ot,a,null,p,Ze),Qe.push({event:Ot,listeners:Ct}),St?Ot.data=St:(St=Ad(p),St!==null&&(Ot.data=St)))),(St=fr?af(a,p):zr(a,p))&&(Pe=y(Pe,"onBeforeInput"),0<Pe.length&&(Ze=new Cd("onBeforeInput","beforeinput",null,p,Ze),Qe.push({event:Ze,listeners:Pe}),Ze.data=St))}Od(Qe,l)})}function d(a,l,p){return{instance:a,listener:l,currentTarget:p}}function y(a,l){for(var p=l+"Capture",b=[];a!==null;){var A=a,T=A.stateNode;A.tag===5&&T!==null&&(A=T,T=Ae(a,p),T!=null&&b.unshift(d(a,T,A)),T=Ae(a,l),T!=null&&b.push(d(a,T,A))),a=a.return}return b}function _(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function M(a,l,p,b,A){for(var T=l._reactName,B=[];p!==null&&p!==b;){var ie=p,he=ie.alternate,Pe=ie.stateNode;if(he!==null&&he===b)break;ie.tag===5&&Pe!==null&&(ie=Pe,A?(he=Ae(p,T),he!=null&&B.unshift(d(p,he,ie))):A||(he=Ae(p,T),he!=null&&B.push(d(p,he,ie)))),p=p.return}B.length!==0&&a.push({event:l,listeners:B})}var q=/\r\n?/g,de=/\u0000|\uFFFD/g;function we(a){return(typeof a=="string"?a:""+a).replace(q,`
`).replace(de,"")}function _e(a,l,p){if(l=we(l),we(a)!==l&&p)throw Error(n(425))}function Ve(){}var at=null,Nt=null;function Vt(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var bn=typeof setTimeout=="function"?setTimeout:void 0,hn=typeof clearTimeout=="function"?clearTimeout:void 0,Xn=typeof Promise=="function"?Promise:void 0,Vn=typeof queueMicrotask=="function"?queueMicrotask:typeof Xn<"u"?function(a){return Xn.resolve(null).then(a).catch(io)}:bn;function io(a){setTimeout(function(){throw a})}function Fd(a,l){var p=l,b=0;do{var A=p.nextSibling;if(a.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(b===0){a.removeChild(A),Pa(l);return}b--}else p!=="$"&&p!=="$?"&&p!=="$!"||b++;p=A}while(p);Pa(l)}function Hr(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function pm(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return a;l--}else p==="/$"&&l++}a=a.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Qa="__reactFiber$"+vi,oo="__reactProps$"+vi,bs="__reactContainer$"+vi,lo="__reactEvents$"+vi,cf="__reactListeners$"+vi,df="__reactHandles$"+vi;function yi(a){var l=a[Qa];if(l)return l;for(var p=a.parentNode;p;){if(l=p[bs]||p[Qa]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=pm(a);a!==null;){if(p=a[Qa])return p;a=pm(a)}return l}a=p,p=a.parentNode}return null}function bi(a){return a=a[Qa]||a[bs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ji(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function mc(a){return a[oo]||null}var uf=[],hc=-1;function co(a){return{current:a}}function $s(a){0>hc||(a.current=uf[hc],uf[hc]=null,hc--)}function Ms(a,l){hc++,uf[hc]=a.current,a.current=l}var uo={},Hn=co(uo),da=co(!1),il=uo;function pc(a,l){var p=a.type.contextTypes;if(!p)return uo;var b=a.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===l)return b.__reactInternalMemoizedMaskedChildContext;var A={},T;for(T in p)A[T]=l[T];return b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=A),A}function ua(a){return a=a.childContextTypes,a!=null}function fm(){$s(da),$s(Hn)}function Nv(a,l,p){if(Hn.current!==uo)throw Error(n(168));Ms(Hn,l),Ms(da,p)}function wv(a,l,p){var b=a.stateNode;if(l=l.childContextTypes,typeof b.getChildContext!="function")return p;b=b.getChildContext();for(var A in b)if(!(A in l))throw Error(n(108,Y(a)||"Unknown",A));return G({},p,b)}function xm(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||uo,il=Hn.current,Ms(Hn,a),Ms(da,da.current),!0}function Cv(a,l,p){var b=a.stateNode;if(!b)throw Error(n(169));p?(a=wv(a,l,il),b.__reactInternalMemoizedMergedChildContext=a,$s(da),$s(Hn),Ms(Hn,a)):$s(da),Ms(da,p)}var Ni=null,gm=!1,mf=!1;function Sv(a){Ni===null?Ni=[a]:Ni.push(a)}function g_(a){gm=!0,Sv(a)}function mo(){if(!mf&&Ni!==null){mf=!0;var a=0,l=is;try{var p=Ni;for(is=1;a<p.length;a++){var b=p[a];do b=b(!0);while(b!==null)}Ni=null,gm=!1}catch(A){throw Ni!==null&&(Ni=Ni.slice(a+1)),Hl(us,mo),A}finally{is=l,mf=!1}}return null}var fc=[],xc=0,vm=null,ym=0,Xa=[],Ya=0,ol=null,wi=1,Ci="";function ll(a,l){fc[xc++]=ym,fc[xc++]=vm,vm=a,ym=l}function _v(a,l,p){Xa[Ya++]=wi,Xa[Ya++]=Ci,Xa[Ya++]=ol,ol=a;var b=wi;a=Ci;var A=32-ct(b)-1;b&=~(1<<A),p+=1;var T=32-ct(l)+A;if(30<T){var B=A-A%5;T=(b&(1<<B)-1).toString(32),b>>=B,A-=B,wi=1<<32-ct(l)+A|p<<A|b,Ci=T+a}else wi=1<<T|p<<A|b,Ci=a}function hf(a){a.return!==null&&(ll(a,1),_v(a,1,0))}function pf(a){for(;a===vm;)vm=fc[--xc],fc[xc]=null,ym=fc[--xc],fc[xc]=null;for(;a===ol;)ol=Xa[--Ya],Xa[Ya]=null,Ci=Xa[--Ya],Xa[Ya]=null,wi=Xa[--Ya],Xa[Ya]=null}var Ia=null,Ma=null,Us=!1,vr=null;function Av(a,l){var p=sr(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=a,l=a.deletions,l===null?(a.deletions=[p],a.flags|=16):l.push(p)}function Pv(a,l){switch(a.tag){case 5:var p=a.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,Ia=a,Ma=Hr(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,Ia=a,Ma=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=ol!==null?{id:wi,overflow:Ci}:null,a.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=sr(18,null,null,0),p.stateNode=l,p.return=a,a.child=p,Ia=a,Ma=null,!0):!1;default:return!1}}function ff(a){return(a.mode&1)!==0&&(a.flags&128)===0}function xf(a){if(Us){var l=Ma;if(l){var p=l;if(!Pv(a,l)){if(ff(a))throw Error(n(418));l=Hr(p.nextSibling);var b=Ia;l&&Pv(a,l)?Av(b,p):(a.flags=a.flags&-4097|2,Us=!1,Ia=a)}}else{if(ff(a))throw Error(n(418));a.flags=a.flags&-4097|2,Us=!1,Ia=a}}}function Ev(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ia=a}function bm(a){if(a!==Ia)return!1;if(!Us)return Ev(a),Us=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Vt(a.type,a.memoizedProps)),l&&(l=Ma)){if(ff(a))throw kv(),Error(n(418));for(;l;)Av(a,l),l=Hr(l.nextSibling)}if(Ev(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(l===0){Ma=Hr(a.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}a=a.nextSibling}Ma=null}}else Ma=Ia?Hr(a.stateNode.nextSibling):null;return!0}function kv(){for(var a=Ma;a;)a=Hr(a.nextSibling)}function gc(){Ma=Ia=null,Us=!1}function gf(a){vr===null?vr=[a]:vr.push(a)}var v_=D.ReactCurrentBatchConfig;function $d(a,l,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var b=p.stateNode}if(!b)throw Error(n(147,a));var A=b,T=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(B){var ie=A.refs;B===null?delete ie[T]:ie[T]=B},l._stringRef=T,l)}if(typeof a!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,a))}return a}function jm(a,l){throw a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function Dv(a){var l=a._init;return l(a._payload)}function Tv(a){function l(Ce,ge){if(a){var Se=Ce.deletions;Se===null?(Ce.deletions=[ge],Ce.flags|=16):Se.push(ge)}}function p(Ce,ge){if(!a)return null;for(;ge!==null;)l(Ce,ge),ge=ge.sibling;return null}function b(Ce,ge){for(Ce=new Map;ge!==null;)ge.key!==null?Ce.set(ge.key,ge):Ce.set(ge.index,ge),ge=ge.sibling;return Ce}function A(Ce,ge){return Ce=bo(Ce,ge),Ce.index=0,Ce.sibling=null,Ce}function T(Ce,ge,Se){return Ce.index=Se,a?(Se=Ce.alternate,Se!==null?(Se=Se.index,Se<ge?(Ce.flags|=2,ge):Se):(Ce.flags|=2,ge)):(Ce.flags|=1048576,ge)}function B(Ce){return a&&Ce.alternate===null&&(Ce.flags|=2),Ce}function ie(Ce,ge,Se,Ye){return ge===null||ge.tag!==6?(ge=lx(Se,Ce.mode,Ye),ge.return=Ce,ge):(ge=A(ge,Se),ge.return=Ce,ge)}function he(Ce,ge,Se,Ye){var gt=Se.type;return gt===F?Ze(Ce,ge,Se.props.children,Ye,Se.key):ge!==null&&(ge.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===se&&Dv(gt)===ge.type)?(Ye=A(ge,Se.props),Ye.ref=$d(Ce,ge,Se),Ye.return=Ce,Ye):(Ye=qm(Se.type,Se.key,Se.props,null,Ce.mode,Ye),Ye.ref=$d(Ce,ge,Se),Ye.return=Ce,Ye)}function Pe(Ce,ge,Se,Ye){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Se.containerInfo||ge.stateNode.implementation!==Se.implementation?(ge=cx(Se,Ce.mode,Ye),ge.return=Ce,ge):(ge=A(ge,Se.children||[]),ge.return=Ce,ge)}function Ze(Ce,ge,Se,Ye,gt){return ge===null||ge.tag!==7?(ge=xl(Se,Ce.mode,Ye,gt),ge.return=Ce,ge):(ge=A(ge,Se),ge.return=Ce,ge)}function Qe(Ce,ge,Se){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=lx(""+ge,Ce.mode,Se),ge.return=Ce,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case I:return Se=qm(ge.type,ge.key,ge.props,null,Ce.mode,Se),Se.ref=$d(Ce,null,ge),Se.return=Ce,Se;case O:return ge=cx(ge,Ce.mode,Se),ge.return=Ce,ge;case se:var Ye=ge._init;return Qe(Ce,Ye(ge._payload),Se)}if(te(ge)||re(ge))return ge=xl(ge,Ce.mode,Se,null),ge.return=Ce,ge;jm(Ce,ge)}return null}function We(Ce,ge,Se,Ye){var gt=ge!==null?ge.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return gt!==null?null:ie(Ce,ge,""+Se,Ye);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case I:return Se.key===gt?he(Ce,ge,Se,Ye):null;case O:return Se.key===gt?Pe(Ce,ge,Se,Ye):null;case se:return gt=Se._init,We(Ce,ge,gt(Se._payload),Ye)}if(te(Se)||re(Se))return gt!==null?null:Ze(Ce,ge,Se,Ye,null);jm(Ce,Se)}return null}function ot(Ce,ge,Se,Ye,gt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Ce=Ce.get(Se)||null,ie(ge,Ce,""+Ye,gt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case I:return Ce=Ce.get(Ye.key===null?Se:Ye.key)||null,he(ge,Ce,Ye,gt);case O:return Ce=Ce.get(Ye.key===null?Se:Ye.key)||null,Pe(ge,Ce,Ye,gt);case se:var Ct=Ye._init;return ot(Ce,ge,Se,Ct(Ye._payload),gt)}if(te(Ye)||re(Ye))return Ce=Ce.get(Se)||null,Ze(ge,Ce,Ye,gt,null);jm(ge,Ye)}return null}function ht(Ce,ge,Se,Ye){for(var gt=null,Ct=null,St=ge,Ot=ge=0,An=null;St!==null&&Ot<Se.length;Ot++){St.index>Ot?(An=St,St=null):An=St.sibling;var ms=We(Ce,St,Se[Ot],Ye);if(ms===null){St===null&&(St=An);break}a&&St&&ms.alternate===null&&l(Ce,St),ge=T(ms,ge,Ot),Ct===null?gt=ms:Ct.sibling=ms,Ct=ms,St=An}if(Ot===Se.length)return p(Ce,St),Us&&ll(Ce,Ot),gt;if(St===null){for(;Ot<Se.length;Ot++)St=Qe(Ce,Se[Ot],Ye),St!==null&&(ge=T(St,ge,Ot),Ct===null?gt=St:Ct.sibling=St,Ct=St);return Us&&ll(Ce,Ot),gt}for(St=b(Ce,St);Ot<Se.length;Ot++)An=ot(St,Ce,Ot,Se[Ot],Ye),An!==null&&(a&&An.alternate!==null&&St.delete(An.key===null?Ot:An.key),ge=T(An,ge,Ot),Ct===null?gt=An:Ct.sibling=An,Ct=An);return a&&St.forEach(function(jo){return l(Ce,jo)}),Us&&ll(Ce,Ot),gt}function ft(Ce,ge,Se,Ye){var gt=re(Se);if(typeof gt!="function")throw Error(n(150));if(Se=gt.call(Se),Se==null)throw Error(n(151));for(var Ct=gt=null,St=ge,Ot=ge=0,An=null,ms=Se.next();St!==null&&!ms.done;Ot++,ms=Se.next()){St.index>Ot?(An=St,St=null):An=St.sibling;var jo=We(Ce,St,ms.value,Ye);if(jo===null){St===null&&(St=An);break}a&&St&&jo.alternate===null&&l(Ce,St),ge=T(jo,ge,Ot),Ct===null?gt=jo:Ct.sibling=jo,Ct=jo,St=An}if(ms.done)return p(Ce,St),Us&&ll(Ce,Ot),gt;if(St===null){for(;!ms.done;Ot++,ms=Se.next())ms=Qe(Ce,ms.value,Ye),ms!==null&&(ge=T(ms,ge,Ot),Ct===null?gt=ms:Ct.sibling=ms,Ct=ms);return Us&&ll(Ce,Ot),gt}for(St=b(Ce,St);!ms.done;Ot++,ms=Se.next())ms=ot(St,Ce,Ot,ms.value,Ye),ms!==null&&(a&&ms.alternate!==null&&St.delete(ms.key===null?Ot:ms.key),ge=T(ms,ge,Ot),Ct===null?gt=ms:Ct.sibling=ms,Ct=ms);return a&&St.forEach(function(X_){return l(Ce,X_)}),Us&&ll(Ce,Ot),gt}function rn(Ce,ge,Se,Ye){if(typeof Se=="object"&&Se!==null&&Se.type===F&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case I:e:{for(var gt=Se.key,Ct=ge;Ct!==null;){if(Ct.key===gt){if(gt=Se.type,gt===F){if(Ct.tag===7){p(Ce,Ct.sibling),ge=A(Ct,Se.props.children),ge.return=Ce,Ce=ge;break e}}else if(Ct.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===se&&Dv(gt)===Ct.type){p(Ce,Ct.sibling),ge=A(Ct,Se.props),ge.ref=$d(Ce,Ct,Se),ge.return=Ce,Ce=ge;break e}p(Ce,Ct);break}else l(Ce,Ct);Ct=Ct.sibling}Se.type===F?(ge=xl(Se.props.children,Ce.mode,Ye,Se.key),ge.return=Ce,Ce=ge):(Ye=qm(Se.type,Se.key,Se.props,null,Ce.mode,Ye),Ye.ref=$d(Ce,ge,Se),Ye.return=Ce,Ce=Ye)}return B(Ce);case O:e:{for(Ct=Se.key;ge!==null;){if(ge.key===Ct)if(ge.tag===4&&ge.stateNode.containerInfo===Se.containerInfo&&ge.stateNode.implementation===Se.implementation){p(Ce,ge.sibling),ge=A(ge,Se.children||[]),ge.return=Ce,Ce=ge;break e}else{p(Ce,ge);break}else l(Ce,ge);ge=ge.sibling}ge=cx(Se,Ce.mode,Ye),ge.return=Ce,Ce=ge}return B(Ce);case se:return Ct=Se._init,rn(Ce,ge,Ct(Se._payload),Ye)}if(te(Se))return ht(Ce,ge,Se,Ye);if(re(Se))return ft(Ce,ge,Se,Ye);jm(Ce,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,ge!==null&&ge.tag===6?(p(Ce,ge.sibling),ge=A(ge,Se),ge.return=Ce,Ce=ge):(p(Ce,ge),ge=lx(Se,Ce.mode,Ye),ge.return=Ce,Ce=ge),B(Ce)):p(Ce,ge)}return rn}var vc=Tv(!0),Iv=Tv(!1),Nm=co(null),wm=null,yc=null,vf=null;function yf(){vf=yc=wm=null}function bf(a){var l=Nm.current;$s(Nm),a._currentValue=l}function jf(a,l,p){for(;a!==null;){var b=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,b!==null&&(b.childLanes|=l)):b!==null&&(b.childLanes&l)!==l&&(b.childLanes|=l),a===p)break;a=a.return}}function bc(a,l){wm=a,vf=yc=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(ma=!0),a.firstContext=null)}function Ja(a){var l=a._currentValue;if(vf!==a)if(a={context:a,memoizedValue:l,next:null},yc===null){if(wm===null)throw Error(n(308));yc=a,wm.dependencies={lanes:0,firstContext:a}}else yc=yc.next=a;return l}var cl=null;function Nf(a){cl===null?cl=[a]:cl.push(a)}function Mv(a,l,p,b){var A=l.interleaved;return A===null?(p.next=p,Nf(l)):(p.next=A.next,A.next=p),l.interleaved=p,Si(a,b)}function Si(a,l){a.lanes|=l;var p=a.alternate;for(p!==null&&(p.lanes|=l),p=a,a=a.return;a!==null;)a.childLanes|=l,p=a.alternate,p!==null&&(p.childLanes|=l),p=a,a=a.return;return p.tag===3?p.stateNode:null}var ho=!1;function wf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rv(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function _i(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function po(a,l,p){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(ls&2)!==0){var A=b.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),b.pending=l,Si(a,p)}return A=b.interleaved,A===null?(l.next=l,Nf(b)):(l.next=A.next,A.next=l),b.interleaved=l,Si(a,p)}function Cm(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var b=l.lanes;b&=a.pendingLanes,p|=b,l.lanes=p,hr(a,p)}}function Ov(a,l){var p=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var A=null,T=null;if(p=p.firstBaseUpdate,p!==null){do{var B={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};T===null?A=T=B:T=T.next=B,p=p.next}while(p!==null);T===null?A=T=l:T=T.next=l}else A=T=l;p={baseState:b.baseState,firstBaseUpdate:A,lastBaseUpdate:T,shared:b.shared,effects:b.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}function Sm(a,l,p,b){var A=a.updateQueue;ho=!1;var T=A.firstBaseUpdate,B=A.lastBaseUpdate,ie=A.shared.pending;if(ie!==null){A.shared.pending=null;var he=ie,Pe=he.next;he.next=null,B===null?T=Pe:B.next=Pe,B=he;var Ze=a.alternate;Ze!==null&&(Ze=Ze.updateQueue,ie=Ze.lastBaseUpdate,ie!==B&&(ie===null?Ze.firstBaseUpdate=Pe:ie.next=Pe,Ze.lastBaseUpdate=he))}if(T!==null){var Qe=A.baseState;B=0,Ze=Pe=he=null,ie=T;do{var We=ie.lane,ot=ie.eventTime;if((b&We)===We){Ze!==null&&(Ze=Ze.next={eventTime:ot,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var ht=a,ft=ie;switch(We=l,ot=p,ft.tag){case 1:if(ht=ft.payload,typeof ht=="function"){Qe=ht.call(ot,Qe,We);break e}Qe=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=ft.payload,We=typeof ht=="function"?ht.call(ot,Qe,We):ht,We==null)break e;Qe=G({},Qe,We);break e;case 2:ho=!0}}ie.callback!==null&&ie.lane!==0&&(a.flags|=64,We=A.effects,We===null?A.effects=[ie]:We.push(ie))}else ot={eventTime:ot,lane:We,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Ze===null?(Pe=Ze=ot,he=Qe):Ze=Ze.next=ot,B|=We;if(ie=ie.next,ie===null){if(ie=A.shared.pending,ie===null)break;We=ie,ie=We.next,We.next=null,A.lastBaseUpdate=We,A.shared.pending=null}}while(!0);if(Ze===null&&(he=Qe),A.baseState=he,A.firstBaseUpdate=Pe,A.lastBaseUpdate=Ze,l=A.shared.interleaved,l!==null){A=l;do B|=A.lane,A=A.next;while(A!==l)}else T===null&&(A.shared.lanes=0);ml|=B,a.lanes=B,a.memoizedState=Qe}}function Lv(a,l,p){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var b=a[l],A=b.callback;if(A!==null){if(b.callback=null,b=p,typeof A!="function")throw Error(n(191,A));A.call(b)}}}var zd={},qr=co(zd),Bd=co(zd),Ud=co(zd);function dl(a){if(a===zd)throw Error(n(174));return a}function Cf(a,l){switch(Ms(Ud,l),Ms(Bd,a),Ms(qr,zd),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:He(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=He(l,a)}$s(qr),Ms(qr,l)}function jc(){$s(qr),$s(Bd),$s(Ud)}function Fv(a){dl(Ud.current);var l=dl(qr.current),p=He(l,a.type);l!==p&&(Ms(Bd,a),Ms(qr,p))}function Sf(a){Bd.current===a&&($s(qr),$s(Bd))}var Ks=co(0);function _m(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var _f=[];function Af(){for(var a=0;a<_f.length;a++)_f[a]._workInProgressVersionPrimary=null;_f.length=0}var Am=D.ReactCurrentDispatcher,Pf=D.ReactCurrentBatchConfig,ul=0,Qs=null,jn=null,Sn=null,Pm=!1,Vd=!1,Hd=0,y_=0;function qn(){throw Error(n(321))}function Ef(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!Da(a[p],l[p]))return!1;return!0}function kf(a,l,p,b,A,T){if(ul=T,Qs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Am.current=a===null||a.memoizedState===null?w_:C_,a=p(b,A),Vd){T=0;do{if(Vd=!1,Hd=0,25<=T)throw Error(n(301));T+=1,Sn=jn=null,l.updateQueue=null,Am.current=S_,a=p(b,A)}while(Vd)}if(Am.current=Dm,l=jn!==null&&jn.next!==null,ul=0,Sn=jn=Qs=null,Pm=!1,l)throw Error(n(300));return a}function Df(){var a=Hd!==0;return Hd=0,a}function Wr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Qs.memoizedState=Sn=a:Sn=Sn.next=a,Sn}function er(){if(jn===null){var a=Qs.alternate;a=a!==null?a.memoizedState:null}else a=jn.next;var l=Sn===null?Qs.memoizedState:Sn.next;if(l!==null)Sn=l,jn=a;else{if(a===null)throw Error(n(310));jn=a,a={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Sn===null?Qs.memoizedState=Sn=a:Sn=Sn.next=a}return Sn}function qd(a,l){return typeof l=="function"?l(a):l}function Tf(a){var l=er(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var b=jn,A=b.baseQueue,T=p.pending;if(T!==null){if(A!==null){var B=A.next;A.next=T.next,T.next=B}b.baseQueue=A=T,p.pending=null}if(A!==null){T=A.next,b=b.baseState;var ie=B=null,he=null,Pe=T;do{var Ze=Pe.lane;if((ul&Ze)===Ze)he!==null&&(he=he.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),b=Pe.hasEagerState?Pe.eagerState:a(b,Pe.action);else{var Qe={lane:Ze,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};he===null?(ie=he=Qe,B=b):he=he.next=Qe,Qs.lanes|=Ze,ml|=Ze}Pe=Pe.next}while(Pe!==null&&Pe!==T);he===null?B=b:he.next=ie,Da(b,l.memoizedState)||(ma=!0),l.memoizedState=b,l.baseState=B,l.baseQueue=he,p.lastRenderedState=b}if(a=p.interleaved,a!==null){A=a;do T=A.lane,Qs.lanes|=T,ml|=T,A=A.next;while(A!==a)}else A===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function If(a){var l=er(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var b=p.dispatch,A=p.pending,T=l.memoizedState;if(A!==null){p.pending=null;var B=A=A.next;do T=a(T,B.action),B=B.next;while(B!==A);Da(T,l.memoizedState)||(ma=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),p.lastRenderedState=T}return[T,b]}function $v(){}function zv(a,l){var p=Qs,b=er(),A=l(),T=!Da(b.memoizedState,A);if(T&&(b.memoizedState=A,ma=!0),b=b.queue,Mf(Vv.bind(null,p,b,a),[a]),b.getSnapshot!==l||T||Sn!==null&&Sn.memoizedState.tag&1){if(p.flags|=2048,Wd(9,Uv.bind(null,p,b,A,l),void 0,null),_n===null)throw Error(n(349));(ul&30)!==0||Bv(p,l,A)}return A}function Bv(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Qs.updateQueue,l===null?(l={lastEffect:null,stores:null},Qs.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function Uv(a,l,p,b){l.value=p,l.getSnapshot=b,Hv(l)&&qv(a)}function Vv(a,l,p){return p(function(){Hv(l)&&qv(a)})}function Hv(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!Da(a,p)}catch{return!0}}function qv(a){var l=Si(a,1);l!==null&&Nr(l,a,1,-1)}function Wv(a){var l=Wr();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:a},l.queue=a,a=a.dispatch=N_.bind(null,Qs,a),[l.memoizedState,a]}function Wd(a,l,p,b){return a={tag:a,create:l,destroy:p,deps:b,next:null},l=Qs.updateQueue,l===null?(l={lastEffect:null,stores:null},Qs.updateQueue=l,l.lastEffect=a.next=a):(p=l.lastEffect,p===null?l.lastEffect=a.next=a:(b=p.next,p.next=a,a.next=b,l.lastEffect=a)),a}function Zv(){return er().memoizedState}function Em(a,l,p,b){var A=Wr();Qs.flags|=a,A.memoizedState=Wd(1|l,p,void 0,b===void 0?null:b)}function km(a,l,p,b){var A=er();b=b===void 0?null:b;var T=void 0;if(jn!==null){var B=jn.memoizedState;if(T=B.destroy,b!==null&&Ef(b,B.deps)){A.memoizedState=Wd(l,p,T,b);return}}Qs.flags|=a,A.memoizedState=Wd(1|l,p,T,b)}function Gv(a,l){return Em(8390656,8,a,l)}function Mf(a,l){return km(2048,8,a,l)}function Kv(a,l){return km(4,2,a,l)}function Qv(a,l){return km(4,4,a,l)}function Xv(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Yv(a,l,p){return p=p!=null?p.concat([a]):null,km(4,4,Xv.bind(null,l,a),p)}function Rf(){}function Jv(a,l){var p=er();l=l===void 0?null:l;var b=p.memoizedState;return b!==null&&l!==null&&Ef(l,b[1])?b[0]:(p.memoizedState=[a,l],a)}function ey(a,l){var p=er();l=l===void 0?null:l;var b=p.memoizedState;return b!==null&&l!==null&&Ef(l,b[1])?b[0]:(a=a(),p.memoizedState=[a,l],a)}function ty(a,l,p){return(ul&21)===0?(a.baseState&&(a.baseState=!1,ma=!0),a.memoizedState=p):(Da(p,l)||(p=Wu(),Qs.lanes|=p,ml|=p,a.baseState=!0),l)}function b_(a,l){var p=is;is=p!==0&&4>p?p:4,a(!0);var b=Pf.transition;Pf.transition={};try{a(!1),l()}finally{is=p,Pf.transition=b}}function sy(){return er().memoizedState}function j_(a,l,p){var b=vo(a);if(p={lane:b,action:p,hasEagerState:!1,eagerState:null,next:null},ny(a))ay(l,p);else if(p=Mv(a,l,p,b),p!==null){var A=Jn();Nr(p,a,b,A),ry(p,l,b)}}function N_(a,l,p){var b=vo(a),A={lane:b,action:p,hasEagerState:!1,eagerState:null,next:null};if(ny(a))ay(l,A);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var B=l.lastRenderedState,ie=T(B,p);if(A.hasEagerState=!0,A.eagerState=ie,Da(ie,B)){var he=l.interleaved;he===null?(A.next=A,Nf(l)):(A.next=he.next,he.next=A),l.interleaved=A;return}}catch{}finally{}p=Mv(a,l,A,b),p!==null&&(A=Jn(),Nr(p,a,b,A),ry(p,l,b))}}function ny(a){var l=a.alternate;return a===Qs||l!==null&&l===Qs}function ay(a,l){Vd=Pm=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function ry(a,l,p){if((p&4194240)!==0){var b=l.lanes;b&=a.pendingLanes,p|=b,l.lanes=p,hr(a,p)}}var Dm={readContext:Ja,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},w_={readContext:Ja,useCallback:function(a,l){return Wr().memoizedState=[a,l===void 0?null:l],a},useContext:Ja,useEffect:Gv,useImperativeHandle:function(a,l,p){return p=p!=null?p.concat([a]):null,Em(4194308,4,Xv.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Em(4194308,4,a,l)},useInsertionEffect:function(a,l){return Em(4,2,a,l)},useMemo:function(a,l){var p=Wr();return l=l===void 0?null:l,a=a(),p.memoizedState=[a,l],a},useReducer:function(a,l,p){var b=Wr();return l=p!==void 0?p(l):l,b.memoizedState=b.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},b.queue=a,a=a.dispatch=j_.bind(null,Qs,a),[b.memoizedState,a]},useRef:function(a){var l=Wr();return a={current:a},l.memoizedState=a},useState:Wv,useDebugValue:Rf,useDeferredValue:function(a){return Wr().memoizedState=a},useTransition:function(){var a=Wv(!1),l=a[0];return a=b_.bind(null,a[1]),Wr().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,p){var b=Qs,A=Wr();if(Us){if(p===void 0)throw Error(n(407));p=p()}else{if(p=l(),_n===null)throw Error(n(349));(ul&30)!==0||Bv(b,l,p)}A.memoizedState=p;var T={value:p,getSnapshot:l};return A.queue=T,Gv(Vv.bind(null,b,T,a),[a]),b.flags|=2048,Wd(9,Uv.bind(null,b,T,p,l),void 0,null),p},useId:function(){var a=Wr(),l=_n.identifierPrefix;if(Us){var p=Ci,b=wi;p=(b&~(1<<32-ct(b)-1)).toString(32)+p,l=":"+l+"R"+p,p=Hd++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=y_++,l=":"+l+"r"+p.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},C_={readContext:Ja,useCallback:Jv,useContext:Ja,useEffect:Mf,useImperativeHandle:Yv,useInsertionEffect:Kv,useLayoutEffect:Qv,useMemo:ey,useReducer:Tf,useRef:Zv,useState:function(){return Tf(qd)},useDebugValue:Rf,useDeferredValue:function(a){var l=er();return ty(l,jn.memoizedState,a)},useTransition:function(){var a=Tf(qd)[0],l=er().memoizedState;return[a,l]},useMutableSource:$v,useSyncExternalStore:zv,useId:sy,unstable_isNewReconciler:!1},S_={readContext:Ja,useCallback:Jv,useContext:Ja,useEffect:Mf,useImperativeHandle:Yv,useInsertionEffect:Kv,useLayoutEffect:Qv,useMemo:ey,useReducer:If,useRef:Zv,useState:function(){return If(qd)},useDebugValue:Rf,useDeferredValue:function(a){var l=er();return jn===null?l.memoizedState=a:ty(l,jn.memoizedState,a)},useTransition:function(){var a=If(qd)[0],l=er().memoizedState;return[a,l]},useMutableSource:$v,useSyncExternalStore:zv,useId:sy,unstable_isNewReconciler:!1};function yr(a,l){if(a&&a.defaultProps){l=G({},l),a=a.defaultProps;for(var p in a)l[p]===void 0&&(l[p]=a[p]);return l}return l}function Of(a,l,p,b){l=a.memoizedState,p=p(b,l),p=p==null?l:G({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Tm={isMounted:function(a){return(a=a._reactInternals)?ys(a)===a:!1},enqueueSetState:function(a,l,p){a=a._reactInternals;var b=Jn(),A=vo(a),T=_i(b,A);T.payload=l,p!=null&&(T.callback=p),l=po(a,T,A),l!==null&&(Nr(l,a,A,b),Cm(l,a,A))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var b=Jn(),A=vo(a),T=_i(b,A);T.tag=1,T.payload=l,p!=null&&(T.callback=p),l=po(a,T,A),l!==null&&(Nr(l,a,A,b),Cm(l,a,A))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=Jn(),b=vo(a),A=_i(p,b);A.tag=2,l!=null&&(A.callback=l),l=po(a,A,b),l!==null&&(Nr(l,a,b,p),Cm(l,a,b))}};function iy(a,l,p,b,A,T,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,T,B):l.prototype&&l.prototype.isPureReactComponent?!Br(p,b)||!Br(A,T):!0}function oy(a,l,p){var b=!1,A=uo,T=l.contextType;return typeof T=="object"&&T!==null?T=Ja(T):(A=ua(l)?il:Hn.current,b=l.contextTypes,T=(b=b!=null)?pc(a,A):uo),l=new l(p,T),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Tm,a.stateNode=l,l._reactInternals=a,b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=A,a.__reactInternalMemoizedMaskedChildContext=T),l}function ly(a,l,p,b){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,b),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,b),l.state!==a&&Tm.enqueueReplaceState(l,l.state,null)}function Lf(a,l,p,b){var A=a.stateNode;A.props=p,A.state=a.memoizedState,A.refs={},wf(a);var T=l.contextType;typeof T=="object"&&T!==null?A.context=Ja(T):(T=ua(l)?il:Hn.current,A.context=pc(a,T)),A.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Of(a,l,T,p),A.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&Tm.enqueueReplaceState(A,A.state,null),Sm(a,p,A,b),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308)}function Nc(a,l){try{var p="",b=l;do p+=U(b),b=b.return;while(b);var A=p}catch(T){A=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:l,stack:A,digest:null}}function Ff(a,l,p){return{value:a,source:null,stack:p??null,digest:l??null}}function $f(a,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var __=typeof WeakMap=="function"?WeakMap:Map;function cy(a,l,p){p=_i(-1,p),p.tag=3,p.payload={element:null};var b=l.value;return p.callback=function(){$m||($m=!0,ex=b),$f(a,l)},p}function dy(a,l,p){p=_i(-1,p),p.tag=3;var b=a.type.getDerivedStateFromError;if(typeof b=="function"){var A=l.value;p.payload=function(){return b(A)},p.callback=function(){$f(a,l)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(p.callback=function(){$f(a,l),typeof b!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var B=l.stack;this.componentDidCatch(l.value,{componentStack:B!==null?B:""})}),p}function uy(a,l,p){var b=a.pingCache;if(b===null){b=a.pingCache=new __;var A=new Set;b.set(l,A)}else A=b.get(l),A===void 0&&(A=new Set,b.set(l,A));A.has(p)||(A.add(p),a=z_.bind(null,a,l,p),l.then(a,a))}function my(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function hy(a,l,p,b,A){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=_i(-1,1),l.tag=2,po(p,l,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=A,a)}var A_=D.ReactCurrentOwner,ma=!1;function Yn(a,l,p,b){l.child=a===null?Iv(l,null,p,b):vc(l,a.child,p,b)}function py(a,l,p,b,A){p=p.render;var T=l.ref;return bc(l,A),b=kf(a,l,p,b,T,A),p=Df(),a!==null&&!ma?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~A,Ai(a,l,A)):(Us&&p&&hf(l),l.flags|=1,Yn(a,l,b,A),l.child)}function fy(a,l,p,b,A){if(a===null){var T=p.type;return typeof T=="function"&&!ox(T)&&T.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=T,xy(a,l,T,b,A)):(a=qm(p.type,null,b,l,l.mode,A),a.ref=l.ref,a.return=l,l.child=a)}if(T=a.child,(a.lanes&A)===0){var B=T.memoizedProps;if(p=p.compare,p=p!==null?p:Br,p(B,b)&&a.ref===l.ref)return Ai(a,l,A)}return l.flags|=1,a=bo(T,b),a.ref=l.ref,a.return=l,l.child=a}function xy(a,l,p,b,A){if(a!==null){var T=a.memoizedProps;if(Br(T,b)&&a.ref===l.ref)if(ma=!1,l.pendingProps=b=T,(a.lanes&A)!==0)(a.flags&131072)!==0&&(ma=!0);else return l.lanes=a.lanes,Ai(a,l,A)}return zf(a,l,p,b,A)}function gy(a,l,p){var b=l.pendingProps,A=b.children,T=a!==null?a.memoizedState:null;if(b.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ms(Cc,Ra),Ra|=p;else{if((p&1073741824)===0)return a=T!==null?T.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Ms(Cc,Ra),Ra|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=T!==null?T.baseLanes:p,Ms(Cc,Ra),Ra|=b}else T!==null?(b=T.baseLanes|p,l.memoizedState=null):b=p,Ms(Cc,Ra),Ra|=b;return Yn(a,l,A,p),l.child}function vy(a,l){var p=l.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function zf(a,l,p,b,A){var T=ua(p)?il:Hn.current;return T=pc(l,T),bc(l,A),p=kf(a,l,p,b,T,A),b=Df(),a!==null&&!ma?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~A,Ai(a,l,A)):(Us&&b&&hf(l),l.flags|=1,Yn(a,l,p,A),l.child)}function yy(a,l,p,b,A){if(ua(p)){var T=!0;xm(l)}else T=!1;if(bc(l,A),l.stateNode===null)Mm(a,l),oy(l,p,b),Lf(l,p,b,A),b=!0;else if(a===null){var B=l.stateNode,ie=l.memoizedProps;B.props=ie;var he=B.context,Pe=p.contextType;typeof Pe=="object"&&Pe!==null?Pe=Ja(Pe):(Pe=ua(p)?il:Hn.current,Pe=pc(l,Pe));var Ze=p.getDerivedStateFromProps,Qe=typeof Ze=="function"||typeof B.getSnapshotBeforeUpdate=="function";Qe||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ie!==b||he!==Pe)&&ly(l,B,b,Pe),ho=!1;var We=l.memoizedState;B.state=We,Sm(l,b,B,A),he=l.memoizedState,ie!==b||We!==he||da.current||ho?(typeof Ze=="function"&&(Of(l,p,Ze,b),he=l.memoizedState),(ie=ho||iy(l,p,ie,b,We,he,Pe))?(Qe||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(l.flags|=4194308)):(typeof B.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=b,l.memoizedState=he),B.props=b,B.state=he,B.context=Pe,b=ie):(typeof B.componentDidMount=="function"&&(l.flags|=4194308),b=!1)}else{B=l.stateNode,Rv(a,l),ie=l.memoizedProps,Pe=l.type===l.elementType?ie:yr(l.type,ie),B.props=Pe,Qe=l.pendingProps,We=B.context,he=p.contextType,typeof he=="object"&&he!==null?he=Ja(he):(he=ua(p)?il:Hn.current,he=pc(l,he));var ot=p.getDerivedStateFromProps;(Ze=typeof ot=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ie!==Qe||We!==he)&&ly(l,B,b,he),ho=!1,We=l.memoizedState,B.state=We,Sm(l,b,B,A);var ht=l.memoizedState;ie!==Qe||We!==ht||da.current||ho?(typeof ot=="function"&&(Of(l,p,ot,b),ht=l.memoizedState),(Pe=ho||iy(l,p,Pe,b,We,ht,he)||!1)?(Ze||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(b,ht,he),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(b,ht,he)),typeof B.componentDidUpdate=="function"&&(l.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof B.componentDidUpdate!="function"||ie===a.memoizedProps&&We===a.memoizedState||(l.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ie===a.memoizedProps&&We===a.memoizedState||(l.flags|=1024),l.memoizedProps=b,l.memoizedState=ht),B.props=b,B.state=ht,B.context=he,b=Pe):(typeof B.componentDidUpdate!="function"||ie===a.memoizedProps&&We===a.memoizedState||(l.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ie===a.memoizedProps&&We===a.memoizedState||(l.flags|=1024),b=!1)}return Bf(a,l,p,b,T,A)}function Bf(a,l,p,b,A,T){vy(a,l);var B=(l.flags&128)!==0;if(!b&&!B)return A&&Cv(l,p,!1),Ai(a,l,T);b=l.stateNode,A_.current=l;var ie=B&&typeof p.getDerivedStateFromError!="function"?null:b.render();return l.flags|=1,a!==null&&B?(l.child=vc(l,a.child,null,T),l.child=vc(l,null,ie,T)):Yn(a,l,ie,T),l.memoizedState=b.state,A&&Cv(l,p,!0),l.child}function by(a){var l=a.stateNode;l.pendingContext?Nv(a,l.pendingContext,l.pendingContext!==l.context):l.context&&Nv(a,l.context,!1),Cf(a,l.containerInfo)}function jy(a,l,p,b,A){return gc(),gf(A),l.flags|=256,Yn(a,l,p,b),l.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Vf(a){return{baseLanes:a,cachePool:null,transitions:null}}function Ny(a,l,p){var b=l.pendingProps,A=Ks.current,T=!1,B=(l.flags&128)!==0,ie;if((ie=B)||(ie=a!==null&&a.memoizedState===null?!1:(A&2)!==0),ie?(T=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(A|=1),Ms(Ks,A&1),a===null)return xf(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(B=b.children,a=b.fallback,T?(b=l.mode,T=l.child,B={mode:"hidden",children:B},(b&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=B):T=Wm(B,b,0,null),a=xl(a,b,p,null),T.return=l,a.return=l,T.sibling=a,l.child=T,l.child.memoizedState=Vf(p),l.memoizedState=Uf,a):Hf(l,B));if(A=a.memoizedState,A!==null&&(ie=A.dehydrated,ie!==null))return P_(a,l,B,b,ie,A,p);if(T){T=b.fallback,B=l.mode,A=a.child,ie=A.sibling;var he={mode:"hidden",children:b.children};return(B&1)===0&&l.child!==A?(b=l.child,b.childLanes=0,b.pendingProps=he,l.deletions=null):(b=bo(A,he),b.subtreeFlags=A.subtreeFlags&14680064),ie!==null?T=bo(ie,T):(T=xl(T,B,p,null),T.flags|=2),T.return=l,b.return=l,b.sibling=T,l.child=b,b=T,T=l.child,B=a.child.memoizedState,B=B===null?Vf(p):{baseLanes:B.baseLanes|p,cachePool:null,transitions:B.transitions},T.memoizedState=B,T.childLanes=a.childLanes&~p,l.memoizedState=Uf,b}return T=a.child,a=T.sibling,b=bo(T,{mode:"visible",children:b.children}),(l.mode&1)===0&&(b.lanes=p),b.return=l,b.sibling=null,a!==null&&(p=l.deletions,p===null?(l.deletions=[a],l.flags|=16):p.push(a)),l.child=b,l.memoizedState=null,b}function Hf(a,l){return l=Wm({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Im(a,l,p,b){return b!==null&&gf(b),vc(l,a.child,null,p),a=Hf(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function P_(a,l,p,b,A,T,B){if(p)return l.flags&256?(l.flags&=-257,b=Ff(Error(n(422))),Im(a,l,B,b)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(T=b.fallback,A=l.mode,b=Wm({mode:"visible",children:b.children},A,0,null),T=xl(T,A,B,null),T.flags|=2,b.return=l,T.return=l,b.sibling=T,l.child=b,(l.mode&1)!==0&&vc(l,a.child,null,B),l.child.memoizedState=Vf(B),l.memoizedState=Uf,T);if((l.mode&1)===0)return Im(a,l,B,null);if(A.data==="$!"){if(b=A.nextSibling&&A.nextSibling.dataset,b)var ie=b.dgst;return b=ie,T=Error(n(419)),b=Ff(T,b,void 0),Im(a,l,B,b)}if(ie=(B&a.childLanes)!==0,ma||ie){if(b=_n,b!==null){switch(B&-B){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(b.suspendedLanes|B))!==0?0:A,A!==0&&A!==T.retryLane&&(T.retryLane=A,Si(a,A),Nr(b,a,A,-1))}return ix(),b=Ff(Error(n(421))),Im(a,l,B,b)}return A.data==="$?"?(l.flags|=128,l.child=a.child,l=B_.bind(null,a),A._reactRetry=l,null):(a=T.treeContext,Ma=Hr(A.nextSibling),Ia=l,Us=!0,vr=null,a!==null&&(Xa[Ya++]=wi,Xa[Ya++]=Ci,Xa[Ya++]=ol,wi=a.id,Ci=a.overflow,ol=l),l=Hf(l,b.children),l.flags|=4096,l)}function wy(a,l,p){a.lanes|=l;var b=a.alternate;b!==null&&(b.lanes|=l),jf(a.return,l,p)}function qf(a,l,p,b,A){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:A}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=b,T.tail=p,T.tailMode=A)}function Cy(a,l,p){var b=l.pendingProps,A=b.revealOrder,T=b.tail;if(Yn(a,l,b.children,p),b=Ks.current,(b&2)!==0)b=b&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wy(a,p,l);else if(a.tag===19)wy(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}b&=1}if(Ms(Ks,b),(l.mode&1)===0)l.memoizedState=null;else switch(A){case"forwards":for(p=l.child,A=null;p!==null;)a=p.alternate,a!==null&&_m(a)===null&&(A=p),p=p.sibling;p=A,p===null?(A=l.child,l.child=null):(A=p.sibling,p.sibling=null),qf(l,!1,A,p,T);break;case"backwards":for(p=null,A=l.child,l.child=null;A!==null;){if(a=A.alternate,a!==null&&_m(a)===null){l.child=A;break}a=A.sibling,A.sibling=p,p=A,A=a}qf(l,!0,p,null,T);break;case"together":qf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Mm(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ai(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),ml|=l.lanes,(p&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,p=bo(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=bo(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function E_(a,l,p){switch(l.tag){case 3:by(l),gc();break;case 5:Fv(l);break;case 1:ua(l.type)&&xm(l);break;case 4:Cf(l,l.stateNode.containerInfo);break;case 10:var b=l.type._context,A=l.memoizedProps.value;Ms(Nm,b._currentValue),b._currentValue=A;break;case 13:if(b=l.memoizedState,b!==null)return b.dehydrated!==null?(Ms(Ks,Ks.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?Ny(a,l,p):(Ms(Ks,Ks.current&1),a=Ai(a,l,p),a!==null?a.sibling:null);Ms(Ks,Ks.current&1);break;case 19:if(b=(p&l.childLanes)!==0,(a.flags&128)!==0){if(b)return Cy(a,l,p);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Ms(Ks,Ks.current),b)break;return null;case 22:case 23:return l.lanes=0,gy(a,l,p)}return Ai(a,l,p)}var Sy,Wf,_y,Ay;Sy=function(a,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Wf=function(){},_y=function(a,l,p,b){var A=a.memoizedProps;if(A!==b){a=l.stateNode,dl(qr.current);var T=null;switch(p){case"input":A=tt(a,A),b=tt(a,b),T=[];break;case"select":A=G({},A,{value:void 0}),b=G({},b,{value:void 0}),T=[];break;case"textarea":A=pe(a,A),b=pe(a,b),T=[];break;default:typeof A.onClick!="function"&&typeof b.onClick=="function"&&(a.onclick=Ve)}ws(p,b);var B;p=null;for(Pe in A)if(!b.hasOwnProperty(Pe)&&A.hasOwnProperty(Pe)&&A[Pe]!=null)if(Pe==="style"){var ie=A[Pe];for(B in ie)ie.hasOwnProperty(B)&&(p||(p={}),p[B]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(o.hasOwnProperty(Pe)?T||(T=[]):(T=T||[]).push(Pe,null));for(Pe in b){var he=b[Pe];if(ie=A?.[Pe],b.hasOwnProperty(Pe)&&he!==ie&&(he!=null||ie!=null))if(Pe==="style")if(ie){for(B in ie)!ie.hasOwnProperty(B)||he&&he.hasOwnProperty(B)||(p||(p={}),p[B]="");for(B in he)he.hasOwnProperty(B)&&ie[B]!==he[B]&&(p||(p={}),p[B]=he[B])}else p||(T||(T=[]),T.push(Pe,p)),p=he;else Pe==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,ie=ie?ie.__html:void 0,he!=null&&ie!==he&&(T=T||[]).push(Pe,he)):Pe==="children"?typeof he!="string"&&typeof he!="number"||(T=T||[]).push(Pe,""+he):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(o.hasOwnProperty(Pe)?(he!=null&&Pe==="onScroll"&&_s("scroll",a),T||ie===he||(T=[])):(T=T||[]).push(Pe,he))}p&&(T=T||[]).push("style",p);var Pe=T;(l.updateQueue=Pe)&&(l.flags|=4)}},Ay=function(a,l,p,b){p!==b&&(l.flags|=4)};function Zd(a,l){if(!Us)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function Wn(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,b=0;if(l)for(var A=a.child;A!==null;)p|=A.lanes|A.childLanes,b|=A.subtreeFlags&14680064,b|=A.flags&14680064,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)p|=A.lanes|A.childLanes,b|=A.subtreeFlags,b|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=b,a.childLanes=p,l}function k_(a,l,p){var b=l.pendingProps;switch(pf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(l),null;case 1:return ua(l.type)&&fm(),Wn(l),null;case 3:return b=l.stateNode,jc(),$s(da),$s(Hn),Af(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(a===null||a.child===null)&&(bm(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,vr!==null&&(nx(vr),vr=null))),Wf(a,l),Wn(l),null;case 5:Sf(l);var A=dl(Ud.current);if(p=l.type,a!==null&&l.stateNode!=null)_y(a,l,p,b,A),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!b){if(l.stateNode===null)throw Error(n(166));return Wn(l),null}if(a=dl(qr.current),bm(l)){b=l.stateNode,p=l.type;var T=l.memoizedProps;switch(b[Qa]=l,b[oo]=T,a=(l.mode&1)!==0,p){case"dialog":_s("cancel",b),_s("close",b);break;case"iframe":case"object":case"embed":_s("load",b);break;case"video":case"audio":for(A=0;A<ao.length;A++)_s(ao[A],b);break;case"source":_s("error",b);break;case"img":case"image":case"link":_s("error",b),_s("load",b);break;case"details":_s("toggle",b);break;case"input":ut(b,T),_s("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!T.multiple},_s("invalid",b);break;case"textarea":Ue(b,T),_s("invalid",b)}ws(p,T),A=null;for(var B in T)if(T.hasOwnProperty(B)){var ie=T[B];B==="children"?typeof ie=="string"?b.textContent!==ie&&(T.suppressHydrationWarning!==!0&&_e(b.textContent,ie,a),A=["children",ie]):typeof ie=="number"&&b.textContent!==""+ie&&(T.suppressHydrationWarning!==!0&&_e(b.textContent,ie,a),A=["children",""+ie]):o.hasOwnProperty(B)&&ie!=null&&B==="onScroll"&&_s("scroll",b)}switch(p){case"input":Ge(b),kt(b,T,!0);break;case"textarea":Ge(b),ve(b);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(b.onclick=Ve)}b=A,l.updateQueue=b,b!==null&&(l.flags|=4)}else{B=A.nodeType===9?A:A.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ze(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=B.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof b.is=="string"?a=B.createElement(p,{is:b.is}):(a=B.createElement(p),p==="select"&&(B=a,b.multiple?B.multiple=!0:b.size&&(B.size=b.size))):a=B.createElementNS(a,p),a[Qa]=l,a[oo]=b,Sy(a,l,!1,!1),l.stateNode=a;e:{switch(B=rs(p,b),p){case"dialog":_s("cancel",a),_s("close",a),A=b;break;case"iframe":case"object":case"embed":_s("load",a),A=b;break;case"video":case"audio":for(A=0;A<ao.length;A++)_s(ao[A],a);A=b;break;case"source":_s("error",a),A=b;break;case"img":case"image":case"link":_s("error",a),_s("load",a),A=b;break;case"details":_s("toggle",a),A=b;break;case"input":ut(a,b),A=tt(a,b),_s("invalid",a);break;case"option":A=b;break;case"select":a._wrapperState={wasMultiple:!!b.multiple},A=G({},b,{value:void 0}),_s("invalid",a);break;case"textarea":Ue(a,b),A=pe(a,b),_s("invalid",a);break;default:A=b}ws(p,A),ie=A;for(T in ie)if(ie.hasOwnProperty(T)){var he=ie[T];T==="style"?ps(a,he):T==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,he!=null&&me(a,he)):T==="children"?typeof he=="string"?(p!=="textarea"||he!=="")&&Oe(a,he):typeof he=="number"&&Oe(a,""+he):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(o.hasOwnProperty(T)?he!=null&&T==="onScroll"&&_s("scroll",a):he!=null&&P(a,T,he,B))}switch(p){case"input":Ge(a),kt(a,b,!1);break;case"textarea":Ge(a),ve(a);break;case"option":b.value!=null&&a.setAttribute("value",""+ae(b.value));break;case"select":a.multiple=!!b.multiple,T=b.value,T!=null?xe(a,!!b.multiple,T,!1):b.defaultValue!=null&&xe(a,!!b.multiple,b.defaultValue,!0);break;default:typeof A.onClick=="function"&&(a.onclick=Ve)}switch(p){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Wn(l),null;case 6:if(a&&l.stateNode!=null)Ay(a,l,a.memoizedProps,b);else{if(typeof b!="string"&&l.stateNode===null)throw Error(n(166));if(p=dl(Ud.current),dl(qr.current),bm(l)){if(b=l.stateNode,p=l.memoizedProps,b[Qa]=l,(T=b.nodeValue!==p)&&(a=Ia,a!==null))switch(a.tag){case 3:_e(b.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&_e(b.nodeValue,p,(a.mode&1)!==0)}T&&(l.flags|=4)}else b=(p.nodeType===9?p:p.ownerDocument).createTextNode(b),b[Qa]=l,l.stateNode=b}return Wn(l),null;case 13:if($s(Ks),b=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Us&&Ma!==null&&(l.mode&1)!==0&&(l.flags&128)===0)kv(),gc(),l.flags|=98560,T=!1;else if(T=bm(l),b!==null&&b.dehydrated!==null){if(a===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Qa]=l}else gc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wn(l),T=!1}else vr!==null&&(nx(vr),vr=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(b=b!==null,b!==(a!==null&&a.memoizedState!==null)&&b&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Ks.current&1)!==0?Nn===0&&(Nn=3):ix())),l.updateQueue!==null&&(l.flags|=4),Wn(l),null);case 4:return jc(),Wf(a,l),a===null&&ro(l.stateNode.containerInfo),Wn(l),null;case 10:return bf(l.type._context),Wn(l),null;case 17:return ua(l.type)&&fm(),Wn(l),null;case 19:if($s(Ks),T=l.memoizedState,T===null)return Wn(l),null;if(b=(l.flags&128)!==0,B=T.rendering,B===null)if(b)Zd(T,!1);else{if(Nn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(B=_m(a),B!==null){for(l.flags|=128,Zd(T,!1),b=B.updateQueue,b!==null&&(l.updateQueue=b,l.flags|=4),l.subtreeFlags=0,b=p,p=l.child;p!==null;)T=p,a=b,T.flags&=14680066,B=T.alternate,B===null?(T.childLanes=0,T.lanes=a,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=B.childLanes,T.lanes=B.lanes,T.child=B.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=B.memoizedProps,T.memoizedState=B.memoizedState,T.updateQueue=B.updateQueue,T.type=B.type,a=B.dependencies,T.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return Ms(Ks,Ks.current&1|2),l.child}a=a.sibling}T.tail!==null&&Ee()>Sc&&(l.flags|=128,b=!0,Zd(T,!1),l.lanes=4194304)}else{if(!b)if(a=_m(B),a!==null){if(l.flags|=128,b=!0,p=a.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),Zd(T,!0),T.tail===null&&T.tailMode==="hidden"&&!B.alternate&&!Us)return Wn(l),null}else 2*Ee()-T.renderingStartTime>Sc&&p!==1073741824&&(l.flags|=128,b=!0,Zd(T,!1),l.lanes=4194304);T.isBackwards?(B.sibling=l.child,l.child=B):(p=T.last,p!==null?p.sibling=B:l.child=B,T.last=B)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=Ee(),l.sibling=null,p=Ks.current,Ms(Ks,b?p&1|2:p&1),l):(Wn(l),null);case 22:case 23:return rx(),b=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==b&&(l.flags|=8192),b&&(l.mode&1)!==0?(Ra&1073741824)!==0&&(Wn(l),l.subtreeFlags&6&&(l.flags|=8192)):Wn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function D_(a,l){switch(pf(l),l.tag){case 1:return ua(l.type)&&fm(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return jc(),$s(da),$s(Hn),Af(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Sf(l),null;case 13:if($s(Ks),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));gc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return $s(Ks),null;case 4:return jc(),null;case 10:return bf(l.type._context),null;case 22:case 23:return rx(),null;case 24:return null;default:return null}}var Rm=!1,Zn=!1,T_=typeof WeakSet=="function"?WeakSet:Set,dt=null;function wc(a,l){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(b){en(a,l,b)}else p.current=null}function Zf(a,l,p){try{p()}catch(b){en(a,l,b)}}var Py=!1;function I_(a,l){if(at=Yo,a=kd(),Dd(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var A=b.anchorOffset,T=b.focusNode;b=b.focusOffset;try{p.nodeType,T.nodeType}catch{p=null;break e}var B=0,ie=-1,he=-1,Pe=0,Ze=0,Qe=a,We=null;t:for(;;){for(var ot;Qe!==p||A!==0&&Qe.nodeType!==3||(ie=B+A),Qe!==T||b!==0&&Qe.nodeType!==3||(he=B+b),Qe.nodeType===3&&(B+=Qe.nodeValue.length),(ot=Qe.firstChild)!==null;)We=Qe,Qe=ot;for(;;){if(Qe===a)break t;if(We===p&&++Pe===A&&(ie=B),We===T&&++Ze===b&&(he=B),(ot=Qe.nextSibling)!==null)break;Qe=We,We=Qe.parentNode}Qe=ot}p=ie===-1||he===-1?null:{start:ie,end:he}}else p=null}p=p||{start:0,end:0}}else p=null;for(Nt={focusedElem:a,selectionRange:p},Yo=!1,dt=l;dt!==null;)if(l=dt,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,dt=a;else for(;dt!==null;){l=dt;try{var ht=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var ft=ht.memoizedProps,rn=ht.memoizedState,Ce=l.stateNode,ge=Ce.getSnapshotBeforeUpdate(l.elementType===l.type?ft:yr(l.type,ft),rn);Ce.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var Se=l.stateNode.containerInfo;Se.nodeType===1?Se.textContent="":Se.nodeType===9&&Se.documentElement&&Se.removeChild(Se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ye){en(l,l.return,Ye)}if(a=l.sibling,a!==null){a.return=l.return,dt=a;break}dt=l.return}return ht=Py,Py=!1,ht}function Gd(a,l,p){var b=l.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var A=b=b.next;do{if((A.tag&a)===a){var T=A.destroy;A.destroy=void 0,T!==void 0&&Zf(l,p,T)}A=A.next}while(A!==b)}}function Om(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&a)===a){var b=p.create;p.destroy=b()}p=p.next}while(p!==l)}}function Gf(a){var l=a.ref;if(l!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof l=="function"?l(a):l.current=a}}function Ey(a){var l=a.alternate;l!==null&&(a.alternate=null,Ey(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Qa],delete l[oo],delete l[lo],delete l[cf],delete l[df])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ky(a){return a.tag===5||a.tag===3||a.tag===4}function Dy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ky(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Kf(a,l,p){var b=a.tag;if(b===5||b===6)a=a.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(a,l):p.insertBefore(a,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(a,p)):(l=p,l.appendChild(a)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Ve));else if(b!==4&&(a=a.child,a!==null))for(Kf(a,l,p),a=a.sibling;a!==null;)Kf(a,l,p),a=a.sibling}function Qf(a,l,p){var b=a.tag;if(b===5||b===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(b!==4&&(a=a.child,a!==null))for(Qf(a,l,p),a=a.sibling;a!==null;)Qf(a,l,p),a=a.sibling}var Mn=null,br=!1;function fo(a,l,p){for(p=p.child;p!==null;)Ty(a,l,p),p=p.sibling}function Ty(a,l,p){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Yt,p)}catch{}switch(p.tag){case 5:Zn||wc(p,l);case 6:var b=Mn,A=br;Mn=null,fo(a,l,p),Mn=b,br=A,Mn!==null&&(br?(a=Mn,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):Mn.removeChild(p.stateNode));break;case 18:Mn!==null&&(br?(a=Mn,p=p.stateNode,a.nodeType===8?Fd(a.parentNode,p):a.nodeType===1&&Fd(a,p),Pa(a)):Fd(Mn,p.stateNode));break;case 4:b=Mn,A=br,Mn=p.stateNode.containerInfo,br=!0,fo(a,l,p),Mn=b,br=A;break;case 0:case 11:case 14:case 15:if(!Zn&&(b=p.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){A=b=b.next;do{var T=A,B=T.destroy;T=T.tag,B!==void 0&&((T&2)!==0||(T&4)!==0)&&Zf(p,l,B),A=A.next}while(A!==b)}fo(a,l,p);break;case 1:if(!Zn&&(wc(p,l),b=p.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=p.memoizedProps,b.state=p.memoizedState,b.componentWillUnmount()}catch(ie){en(p,l,ie)}fo(a,l,p);break;case 21:fo(a,l,p);break;case 22:p.mode&1?(Zn=(b=Zn)||p.memoizedState!==null,fo(a,l,p),Zn=b):fo(a,l,p);break;default:fo(a,l,p)}}function Iy(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new T_),l.forEach(function(b){var A=U_.bind(null,a,b);p.has(b)||(p.add(b),b.then(A,A))})}}function jr(a,l){var p=l.deletions;if(p!==null)for(var b=0;b<p.length;b++){var A=p[b];try{var T=a,B=l,ie=B;e:for(;ie!==null;){switch(ie.tag){case 5:Mn=ie.stateNode,br=!1;break e;case 3:Mn=ie.stateNode.containerInfo,br=!0;break e;case 4:Mn=ie.stateNode.containerInfo,br=!0;break e}ie=ie.return}if(Mn===null)throw Error(n(160));Ty(T,B,A),Mn=null,br=!1;var he=A.alternate;he!==null&&(he.return=null),A.return=null}catch(Pe){en(A,l,Pe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)My(l,a),l=l.sibling}function My(a,l){var p=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(jr(l,a),Zr(a),b&4){try{Gd(3,a,a.return),Om(3,a)}catch(ft){en(a,a.return,ft)}try{Gd(5,a,a.return)}catch(ft){en(a,a.return,ft)}}break;case 1:jr(l,a),Zr(a),b&512&&p!==null&&wc(p,p.return);break;case 5:if(jr(l,a),Zr(a),b&512&&p!==null&&wc(p,p.return),a.flags&32){var A=a.stateNode;try{Oe(A,"")}catch(ft){en(a,a.return,ft)}}if(b&4&&(A=a.stateNode,A!=null)){var T=a.memoizedProps,B=p!==null?p.memoizedProps:T,ie=a.type,he=a.updateQueue;if(a.updateQueue=null,he!==null)try{ie==="input"&&T.type==="radio"&&T.name!=null&&wt(A,T),rs(ie,B);var Pe=rs(ie,T);for(B=0;B<he.length;B+=2){var Ze=he[B],Qe=he[B+1];Ze==="style"?ps(A,Qe):Ze==="dangerouslySetInnerHTML"?me(A,Qe):Ze==="children"?Oe(A,Qe):P(A,Ze,Qe,Pe)}switch(ie){case"input":mt(A,T);break;case"textarea":ce(A,T);break;case"select":var We=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!T.multiple;var ot=T.value;ot!=null?xe(A,!!T.multiple,ot,!1):We!==!!T.multiple&&(T.defaultValue!=null?xe(A,!!T.multiple,T.defaultValue,!0):xe(A,!!T.multiple,T.multiple?[]:"",!1))}A[oo]=T}catch(ft){en(a,a.return,ft)}}break;case 6:if(jr(l,a),Zr(a),b&4){if(a.stateNode===null)throw Error(n(162));A=a.stateNode,T=a.memoizedProps;try{A.nodeValue=T}catch(ft){en(a,a.return,ft)}}break;case 3:if(jr(l,a),Zr(a),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Pa(l.containerInfo)}catch(ft){en(a,a.return,ft)}break;case 4:jr(l,a),Zr(a);break;case 13:jr(l,a),Zr(a),A=a.child,A.flags&8192&&(T=A.memoizedState!==null,A.stateNode.isHidden=T,!T||A.alternate!==null&&A.alternate.memoizedState!==null||(Jf=Ee())),b&4&&Iy(a);break;case 22:if(Ze=p!==null&&p.memoizedState!==null,a.mode&1?(Zn=(Pe=Zn)||Ze,jr(l,a),Zn=Pe):jr(l,a),Zr(a),b&8192){if(Pe=a.memoizedState!==null,(a.stateNode.isHidden=Pe)&&!Ze&&(a.mode&1)!==0)for(dt=a,Ze=a.child;Ze!==null;){for(Qe=dt=Ze;dt!==null;){switch(We=dt,ot=We.child,We.tag){case 0:case 11:case 14:case 15:Gd(4,We,We.return);break;case 1:wc(We,We.return);var ht=We.stateNode;if(typeof ht.componentWillUnmount=="function"){b=We,p=We.return;try{l=b,ht.props=l.memoizedProps,ht.state=l.memoizedState,ht.componentWillUnmount()}catch(ft){en(b,p,ft)}}break;case 5:wc(We,We.return);break;case 22:if(We.memoizedState!==null){Ly(Qe);continue}}ot!==null?(ot.return=We,dt=ot):Ly(Qe)}Ze=Ze.sibling}e:for(Ze=null,Qe=a;;){if(Qe.tag===5){if(Ze===null){Ze=Qe;try{A=Qe.stateNode,Pe?(T=A.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(ie=Qe.stateNode,he=Qe.memoizedProps.style,B=he!=null&&he.hasOwnProperty("display")?he.display:null,ie.style.display=Tt("display",B))}catch(ft){en(a,a.return,ft)}}}else if(Qe.tag===6){if(Ze===null)try{Qe.stateNode.nodeValue=Pe?"":Qe.memoizedProps}catch(ft){en(a,a.return,ft)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===a)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===a)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===a)break e;Ze===Qe&&(Ze=null),Qe=Qe.return}Ze===Qe&&(Ze=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:jr(l,a),Zr(a),b&4&&Iy(a);break;case 21:break;default:jr(l,a),Zr(a)}}function Zr(a){var l=a.flags;if(l&2){try{e:{for(var p=a.return;p!==null;){if(ky(p)){var b=p;break e}p=p.return}throw Error(n(160))}switch(b.tag){case 5:var A=b.stateNode;b.flags&32&&(Oe(A,""),b.flags&=-33);var T=Dy(a);Qf(a,T,A);break;case 3:case 4:var B=b.stateNode.containerInfo,ie=Dy(a);Kf(a,ie,B);break;default:throw Error(n(161))}}catch(he){en(a,a.return,he)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function M_(a,l,p){dt=a,Ry(a)}function Ry(a,l,p){for(var b=(a.mode&1)!==0;dt!==null;){var A=dt,T=A.child;if(A.tag===22&&b){var B=A.memoizedState!==null||Rm;if(!B){var ie=A.alternate,he=ie!==null&&ie.memoizedState!==null||Zn;ie=Rm;var Pe=Zn;if(Rm=B,(Zn=he)&&!Pe)for(dt=A;dt!==null;)B=dt,he=B.child,B.tag===22&&B.memoizedState!==null?Fy(A):he!==null?(he.return=B,dt=he):Fy(A);for(;T!==null;)dt=T,Ry(T),T=T.sibling;dt=A,Rm=ie,Zn=Pe}Oy(a)}else(A.subtreeFlags&8772)!==0&&T!==null?(T.return=A,dt=T):Oy(a)}}function Oy(a){for(;dt!==null;){var l=dt;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Zn||Om(5,l);break;case 1:var b=l.stateNode;if(l.flags&4&&!Zn)if(p===null)b.componentDidMount();else{var A=l.elementType===l.type?p.memoizedProps:yr(l.type,p.memoizedProps);b.componentDidUpdate(A,p.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&Lv(l,T,b);break;case 3:var B=l.updateQueue;if(B!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}Lv(l,B,p)}break;case 5:var ie=l.stateNode;if(p===null&&l.flags&4){p=ie;var he=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":he.autoFocus&&p.focus();break;case"img":he.src&&(p.src=he.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Pe=l.alternate;if(Pe!==null){var Ze=Pe.memoizedState;if(Ze!==null){var Qe=Ze.dehydrated;Qe!==null&&Pa(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Zn||l.flags&512&&Gf(l)}catch(We){en(l,l.return,We)}}if(l===a){dt=null;break}if(p=l.sibling,p!==null){p.return=l.return,dt=p;break}dt=l.return}}function Ly(a){for(;dt!==null;){var l=dt;if(l===a){dt=null;break}var p=l.sibling;if(p!==null){p.return=l.return,dt=p;break}dt=l.return}}function Fy(a){for(;dt!==null;){var l=dt;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Om(4,l)}catch(he){en(l,p,he)}break;case 1:var b=l.stateNode;if(typeof b.componentDidMount=="function"){var A=l.return;try{b.componentDidMount()}catch(he){en(l,A,he)}}var T=l.return;try{Gf(l)}catch(he){en(l,T,he)}break;case 5:var B=l.return;try{Gf(l)}catch(he){en(l,B,he)}}}catch(he){en(l,l.return,he)}if(l===a){dt=null;break}var ie=l.sibling;if(ie!==null){ie.return=l.return,dt=ie;break}dt=l.return}}var R_=Math.ceil,Lm=D.ReactCurrentDispatcher,Xf=D.ReactCurrentOwner,tr=D.ReactCurrentBatchConfig,ls=0,_n=null,pn=null,Rn=0,Ra=0,Cc=co(0),Nn=0,Kd=null,ml=0,Fm=0,Yf=0,Qd=null,ha=null,Jf=0,Sc=1/0,Pi=null,$m=!1,ex=null,xo=null,zm=!1,go=null,Bm=0,Xd=0,tx=null,Um=-1,Vm=0;function Jn(){return(ls&6)!==0?Ee():Um!==-1?Um:Um=Ee()}function vo(a){return(a.mode&1)===0?1:(ls&2)!==0&&Rn!==0?Rn&-Rn:v_.transition!==null?(Vm===0&&(Vm=Wu()),Vm):(a=is,a!==0||(a=window.event,a=a===void 0?16:ts(a.type)),a)}function Nr(a,l,p,b){if(50<Xd)throw Xd=0,tx=null,Error(n(185));_a(a,p,b),((ls&2)===0||a!==_n)&&(a===_n&&((ls&2)===0&&(Fm|=p),Nn===4&&yo(a,Rn)),pa(a,b),p===1&&ls===0&&(l.mode&1)===0&&(Sc=Ee()+500,gm&&mo()))}function pa(a,l){var p=a.callbackNode;ql(a,l);var b=Is(a,a===_n?Rn:0);if(b===0)p!==null&&Zo(p),a.callbackNode=null,a.callbackPriority=0;else if(l=b&-b,a.callbackPriority!==l){if(p!=null&&Zo(p),l===1)a.tag===0?g_(zy.bind(null,a)):Sv(zy.bind(null,a)),Vn(function(){(ls&6)===0&&mo()}),p=null;else{switch(Wi(b)){case 1:p=us;break;case 4:p=Ut;break;case 16:p=Zs;break;case 536870912:p=mn;break;default:p=Zs}p=Gy(p,$y.bind(null,a))}a.callbackPriority=l,a.callbackNode=p}}function $y(a,l){if(Um=-1,Vm=0,(ls&6)!==0)throw Error(n(327));var p=a.callbackNode;if(_c()&&a.callbackNode!==p)return null;var b=Is(a,a===_n?Rn:0);if(b===0)return null;if((b&30)!==0||(b&a.expiredLanes)!==0||l)l=Hm(a,b);else{l=b;var A=ls;ls|=2;var T=Uy();(_n!==a||Rn!==l)&&(Pi=null,Sc=Ee()+500,pl(a,l));do try{F_();break}catch(ie){By(a,ie)}while(!0);yf(),Lm.current=T,ls=A,pn!==null?l=0:(_n=null,Rn=0,l=Nn)}if(l!==0){if(l===2&&(A=Bn(a),A!==0&&(b=A,l=sx(a,A))),l===1)throw p=Kd,pl(a,0),yo(a,b),pa(a,Ee()),p;if(l===6)yo(a,b);else{if(A=a.current.alternate,(b&30)===0&&!O_(A)&&(l=Hm(a,b),l===2&&(T=Bn(a),T!==0&&(b=T,l=sx(a,T))),l===1))throw p=Kd,pl(a,0),yo(a,b),pa(a,Ee()),p;switch(a.finishedWork=A,a.finishedLanes=b,l){case 0:case 1:throw Error(n(345));case 2:fl(a,ha,Pi);break;case 3:if(yo(a,b),(b&130023424)===b&&(l=Jf+500-Ee(),10<l)){if(Is(a,0)!==0)break;if(A=a.suspendedLanes,(A&b)!==b){Jn(),a.pingedLanes|=a.suspendedLanes&A;break}a.timeoutHandle=bn(fl.bind(null,a,ha,Pi),l);break}fl(a,ha,Pi);break;case 4:if(yo(a,b),(b&4194240)===b)break;for(l=a.eventTimes,A=-1;0<b;){var B=31-ct(b);T=1<<B,B=l[B],B>A&&(A=B),b&=~T}if(b=A,b=Ee()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*R_(b/1960))-b,10<b){a.timeoutHandle=bn(fl.bind(null,a,ha,Pi),b);break}fl(a,ha,Pi);break;case 5:fl(a,ha,Pi);break;default:throw Error(n(329))}}}return pa(a,Ee()),a.callbackNode===p?$y.bind(null,a):null}function sx(a,l){var p=Qd;return a.current.memoizedState.isDehydrated&&(pl(a,l).flags|=256),a=Hm(a,l),a!==2&&(l=ha,ha=p,l!==null&&nx(l)),a}function nx(a){ha===null?ha=a:ha.push.apply(ha,a)}function O_(a){for(var l=a;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var b=0;b<p.length;b++){var A=p[b],T=A.getSnapshot;A=A.value;try{if(!Da(T(),A))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function yo(a,l){for(l&=~Yf,l&=~Fm,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var p=31-ct(l),b=1<<p;a[p]=-1,l&=~b}}function zy(a){if((ls&6)!==0)throw Error(n(327));_c();var l=Is(a,0);if((l&1)===0)return pa(a,Ee()),null;var p=Hm(a,l);if(a.tag!==0&&p===2){var b=Bn(a);b!==0&&(l=b,p=sx(a,b))}if(p===1)throw p=Kd,pl(a,0),yo(a,l),pa(a,Ee()),p;if(p===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,fl(a,ha,Pi),pa(a,Ee()),null}function ax(a,l){var p=ls;ls|=1;try{return a(l)}finally{ls=p,ls===0&&(Sc=Ee()+500,gm&&mo())}}function hl(a){go!==null&&go.tag===0&&(ls&6)===0&&_c();var l=ls;ls|=1;var p=tr.transition,b=is;try{if(tr.transition=null,is=1,a)return a()}finally{is=b,tr.transition=p,ls=l,(ls&6)===0&&mo()}}function rx(){Ra=Cc.current,$s(Cc)}function pl(a,l){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,hn(p)),pn!==null)for(p=pn.return;p!==null;){var b=p;switch(pf(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&fm();break;case 3:jc(),$s(da),$s(Hn),Af();break;case 5:Sf(b);break;case 4:jc();break;case 13:$s(Ks);break;case 19:$s(Ks);break;case 10:bf(b.type._context);break;case 22:case 23:rx()}p=p.return}if(_n=a,pn=a=bo(a.current,null),Rn=Ra=l,Nn=0,Kd=null,Yf=Fm=ml=0,ha=Qd=null,cl!==null){for(l=0;l<cl.length;l++)if(p=cl[l],b=p.interleaved,b!==null){p.interleaved=null;var A=b.next,T=p.pending;if(T!==null){var B=T.next;T.next=A,b.next=B}p.pending=b}cl=null}return a}function By(a,l){do{var p=pn;try{if(yf(),Am.current=Dm,Pm){for(var b=Qs.memoizedState;b!==null;){var A=b.queue;A!==null&&(A.pending=null),b=b.next}Pm=!1}if(ul=0,Sn=jn=Qs=null,Vd=!1,Hd=0,Xf.current=null,p===null||p.return===null){Nn=1,Kd=l,pn=null;break}e:{var T=a,B=p.return,ie=p,he=l;if(l=Rn,ie.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Pe=he,Ze=ie,Qe=Ze.tag;if((Ze.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var We=Ze.alternate;We?(Ze.updateQueue=We.updateQueue,Ze.memoizedState=We.memoizedState,Ze.lanes=We.lanes):(Ze.updateQueue=null,Ze.memoizedState=null)}var ot=my(B);if(ot!==null){ot.flags&=-257,hy(ot,B,ie,T,l),ot.mode&1&&uy(T,Pe,l),l=ot,he=Pe;var ht=l.updateQueue;if(ht===null){var ft=new Set;ft.add(he),l.updateQueue=ft}else ht.add(he);break e}else{if((l&1)===0){uy(T,Pe,l),ix();break e}he=Error(n(426))}}else if(Us&&ie.mode&1){var rn=my(B);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),hy(rn,B,ie,T,l),gf(Nc(he,ie));break e}}T=he=Nc(he,ie),Nn!==4&&(Nn=2),Qd===null?Qd=[T]:Qd.push(T),T=B;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var Ce=cy(T,he,l);Ov(T,Ce);break e;case 1:ie=he;var ge=T.type,Se=T.stateNode;if((T.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(xo===null||!xo.has(Se)))){T.flags|=65536,l&=-l,T.lanes|=l;var Ye=dy(T,ie,l);Ov(T,Ye);break e}}T=T.return}while(T!==null)}Hy(p)}catch(gt){l=gt,pn===p&&p!==null&&(pn=p=p.return);continue}break}while(!0)}function Uy(){var a=Lm.current;return Lm.current=Dm,a===null?Dm:a}function ix(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),_n===null||(ml&268435455)===0&&(Fm&268435455)===0||yo(_n,Rn)}function Hm(a,l){var p=ls;ls|=2;var b=Uy();(_n!==a||Rn!==l)&&(Pi=null,pl(a,l));do try{L_();break}catch(A){By(a,A)}while(!0);if(yf(),ls=p,Lm.current=b,pn!==null)throw Error(n(261));return _n=null,Rn=0,Nn}function L_(){for(;pn!==null;)Vy(pn)}function F_(){for(;pn!==null&&!pd();)Vy(pn)}function Vy(a){var l=Zy(a.alternate,a,Ra);a.memoizedProps=a.pendingProps,l===null?Hy(a):pn=l,Xf.current=null}function Hy(a){var l=a;do{var p=l.alternate;if(a=l.return,(l.flags&32768)===0){if(p=k_(p,l,Ra),p!==null){pn=p;return}}else{if(p=D_(p,l),p!==null){p.flags&=32767,pn=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Nn=6,pn=null;return}}if(l=l.sibling,l!==null){pn=l;return}pn=l=a}while(l!==null);Nn===0&&(Nn=5)}function fl(a,l,p){var b=is,A=tr.transition;try{tr.transition=null,is=1,$_(a,l,p,b)}finally{tr.transition=A,is=b}return null}function $_(a,l,p,b){do _c();while(go!==null);if((ls&6)!==0)throw Error(n(327));p=a.finishedWork;var A=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var T=p.lanes|p.childLanes;if(Js(a,T),a===_n&&(pn=_n=null,Rn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||zm||(zm=!0,Gy(Zs,function(){return _c(),null})),T=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||T){T=tr.transition,tr.transition=null;var B=is;is=1;var ie=ls;ls|=4,Xf.current=null,I_(a,p),My(p,a),Ga(Nt),Yo=!!at,Nt=at=null,a.current=p,M_(p),oe(),ls=ie,is=B,tr.transition=T}else a.current=p;if(zm&&(zm=!1,go=a,Bm=A),T=a.pendingLanes,T===0&&(xo=null),Cs(p.stateNode),pa(a,Ee()),l!==null)for(b=a.onRecoverableError,p=0;p<l.length;p++)A=l[p],b(A.value,{componentStack:A.stack,digest:A.digest});if($m)throw $m=!1,a=ex,ex=null,a;return(Bm&1)!==0&&a.tag!==0&&_c(),T=a.pendingLanes,(T&1)!==0?a===tx?Xd++:(Xd=0,tx=a):Xd=0,mo(),null}function _c(){if(go!==null){var a=Wi(Bm),l=tr.transition,p=is;try{if(tr.transition=null,is=16>a?16:a,go===null)var b=!1;else{if(a=go,go=null,Bm=0,(ls&6)!==0)throw Error(n(331));var A=ls;for(ls|=4,dt=a.current;dt!==null;){var T=dt,B=T.child;if((dt.flags&16)!==0){var ie=T.deletions;if(ie!==null){for(var he=0;he<ie.length;he++){var Pe=ie[he];for(dt=Pe;dt!==null;){var Ze=dt;switch(Ze.tag){case 0:case 11:case 15:Gd(8,Ze,T)}var Qe=Ze.child;if(Qe!==null)Qe.return=Ze,dt=Qe;else for(;dt!==null;){Ze=dt;var We=Ze.sibling,ot=Ze.return;if(Ey(Ze),Ze===Pe){dt=null;break}if(We!==null){We.return=ot,dt=We;break}dt=ot}}}var ht=T.alternate;if(ht!==null){var ft=ht.child;if(ft!==null){ht.child=null;do{var rn=ft.sibling;ft.sibling=null,ft=rn}while(ft!==null)}}dt=T}}if((T.subtreeFlags&2064)!==0&&B!==null)B.return=T,dt=B;else e:for(;dt!==null;){if(T=dt,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Gd(9,T,T.return)}var Ce=T.sibling;if(Ce!==null){Ce.return=T.return,dt=Ce;break e}dt=T.return}}var ge=a.current;for(dt=ge;dt!==null;){B=dt;var Se=B.child;if((B.subtreeFlags&2064)!==0&&Se!==null)Se.return=B,dt=Se;else e:for(B=ge;dt!==null;){if(ie=dt,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:Om(9,ie)}}catch(gt){en(ie,ie.return,gt)}if(ie===B){dt=null;break e}var Ye=ie.sibling;if(Ye!==null){Ye.return=ie.return,dt=Ye;break e}dt=ie.return}}if(ls=A,mo(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Yt,a)}catch{}b=!0}return b}finally{is=p,tr.transition=l}}return!1}function qy(a,l,p){l=Nc(p,l),l=cy(a,l,1),a=po(a,l,1),l=Jn(),a!==null&&(_a(a,1,l),pa(a,l))}function en(a,l,p){if(a.tag===3)qy(a,a,p);else for(;l!==null;){if(l.tag===3){qy(l,a,p);break}else if(l.tag===1){var b=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(xo===null||!xo.has(b))){a=Nc(p,a),a=dy(l,a,1),l=po(l,a,1),a=Jn(),l!==null&&(_a(l,1,a),pa(l,a));break}}l=l.return}}function z_(a,l,p){var b=a.pingCache;b!==null&&b.delete(l),l=Jn(),a.pingedLanes|=a.suspendedLanes&p,_n===a&&(Rn&p)===p&&(Nn===4||Nn===3&&(Rn&130023424)===Rn&&500>Ee()-Jf?pl(a,0):Yf|=p),pa(a,l)}function Wy(a,l){l===0&&((a.mode&1)===0?l=1:(l=Hi,Hi<<=1,(Hi&130023424)===0&&(Hi=4194304)));var p=Jn();a=Si(a,l),a!==null&&(_a(a,l,p),pa(a,p))}function B_(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),Wy(a,p)}function U_(a,l){var p=0;switch(a.tag){case 13:var b=a.stateNode,A=a.memoizedState;A!==null&&(p=A.retryLane);break;case 19:b=a.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(l),Wy(a,p)}var Zy;Zy=function(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps||da.current)ma=!0;else{if((a.lanes&p)===0&&(l.flags&128)===0)return ma=!1,E_(a,l,p);ma=(a.flags&131072)!==0}else ma=!1,Us&&(l.flags&1048576)!==0&&_v(l,ym,l.index);switch(l.lanes=0,l.tag){case 2:var b=l.type;Mm(a,l),a=l.pendingProps;var A=pc(l,Hn.current);bc(l,p),A=kf(null,l,b,a,A,p);var T=Df();return l.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ua(b)?(T=!0,xm(l)):T=!1,l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,wf(l),A.updater=Tm,l.stateNode=A,A._reactInternals=l,Lf(l,b,a,p),l=Bf(null,l,b,!0,T,p)):(l.tag=0,Us&&T&&hf(l),Yn(null,l,A,p),l=l.child),l;case 16:b=l.elementType;e:{switch(Mm(a,l),a=l.pendingProps,A=b._init,b=A(b._payload),l.type=b,A=l.tag=H_(b),a=yr(b,a),A){case 0:l=zf(null,l,b,a,p);break e;case 1:l=yy(null,l,b,a,p);break e;case 11:l=py(null,l,b,a,p);break e;case 14:l=fy(null,l,b,yr(b.type,a),p);break e}throw Error(n(306,b,""))}return l;case 0:return b=l.type,A=l.pendingProps,A=l.elementType===b?A:yr(b,A),zf(a,l,b,A,p);case 1:return b=l.type,A=l.pendingProps,A=l.elementType===b?A:yr(b,A),yy(a,l,b,A,p);case 3:e:{if(by(l),a===null)throw Error(n(387));b=l.pendingProps,T=l.memoizedState,A=T.element,Rv(a,l),Sm(l,b,null,p);var B=l.memoizedState;if(b=B.element,T.isDehydrated)if(T={element:b,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){A=Nc(Error(n(423)),l),l=jy(a,l,b,p,A);break e}else if(b!==A){A=Nc(Error(n(424)),l),l=jy(a,l,b,p,A);break e}else for(Ma=Hr(l.stateNode.containerInfo.firstChild),Ia=l,Us=!0,vr=null,p=Iv(l,null,b,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(gc(),b===A){l=Ai(a,l,p);break e}Yn(a,l,b,p)}l=l.child}return l;case 5:return Fv(l),a===null&&xf(l),b=l.type,A=l.pendingProps,T=a!==null?a.memoizedProps:null,B=A.children,Vt(b,A)?B=null:T!==null&&Vt(b,T)&&(l.flags|=32),vy(a,l),Yn(a,l,B,p),l.child;case 6:return a===null&&xf(l),null;case 13:return Ny(a,l,p);case 4:return Cf(l,l.stateNode.containerInfo),b=l.pendingProps,a===null?l.child=vc(l,null,b,p):Yn(a,l,b,p),l.child;case 11:return b=l.type,A=l.pendingProps,A=l.elementType===b?A:yr(b,A),py(a,l,b,A,p);case 7:return Yn(a,l,l.pendingProps,p),l.child;case 8:return Yn(a,l,l.pendingProps.children,p),l.child;case 12:return Yn(a,l,l.pendingProps.children,p),l.child;case 10:e:{if(b=l.type._context,A=l.pendingProps,T=l.memoizedProps,B=A.value,Ms(Nm,b._currentValue),b._currentValue=B,T!==null)if(Da(T.value,B)){if(T.children===A.children&&!da.current){l=Ai(a,l,p);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var ie=T.dependencies;if(ie!==null){B=T.child;for(var he=ie.firstContext;he!==null;){if(he.context===b){if(T.tag===1){he=_i(-1,p&-p),he.tag=2;var Pe=T.updateQueue;if(Pe!==null){Pe=Pe.shared;var Ze=Pe.pending;Ze===null?he.next=he:(he.next=Ze.next,Ze.next=he),Pe.pending=he}}T.lanes|=p,he=T.alternate,he!==null&&(he.lanes|=p),jf(T.return,p,l),ie.lanes|=p;break}he=he.next}}else if(T.tag===10)B=T.type===l.type?null:T.child;else if(T.tag===18){if(B=T.return,B===null)throw Error(n(341));B.lanes|=p,ie=B.alternate,ie!==null&&(ie.lanes|=p),jf(B,p,l),B=T.sibling}else B=T.child;if(B!==null)B.return=T;else for(B=T;B!==null;){if(B===l){B=null;break}if(T=B.sibling,T!==null){T.return=B.return,B=T;break}B=B.return}T=B}Yn(a,l,A.children,p),l=l.child}return l;case 9:return A=l.type,b=l.pendingProps.children,bc(l,p),A=Ja(A),b=b(A),l.flags|=1,Yn(a,l,b,p),l.child;case 14:return b=l.type,A=yr(b,l.pendingProps),A=yr(b.type,A),fy(a,l,b,A,p);case 15:return xy(a,l,l.type,l.pendingProps,p);case 17:return b=l.type,A=l.pendingProps,A=l.elementType===b?A:yr(b,A),Mm(a,l),l.tag=1,ua(b)?(a=!0,xm(l)):a=!1,bc(l,p),oy(l,b,A),Lf(l,b,A,p),Bf(null,l,b,!0,a,p);case 19:return Cy(a,l,p);case 22:return gy(a,l,p)}throw Error(n(156,l.tag))};function Gy(a,l){return Hl(a,l)}function V_(a,l,p,b){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(a,l,p,b){return new V_(a,l,p,b)}function ox(a){return a=a.prototype,!(!a||!a.isReactComponent)}function H_(a){if(typeof a=="function")return ox(a)?1:0;if(a!=null){if(a=a.$$typeof,a===R)return 11;if(a===ue)return 14}return 2}function bo(a,l){var p=a.alternate;return p===null?(p=sr(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function qm(a,l,p,b,A,T){var B=2;if(b=a,typeof a=="function")ox(a)&&(B=1);else if(typeof a=="string")B=5;else e:switch(a){case F:return xl(p.children,A,T,l);case X:B=8,A|=8;break;case Q:return a=sr(12,p,l,A|2),a.elementType=Q,a.lanes=T,a;case z:return a=sr(13,p,l,A),a.elementType=z,a.lanes=T,a;case J:return a=sr(19,p,l,A),a.elementType=J,a.lanes=T,a;case fe:return Wm(p,A,T,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:B=10;break e;case $:B=9;break e;case R:B=11;break e;case ue:B=14;break e;case se:B=16,b=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return l=sr(B,p,l,A),l.elementType=a,l.type=b,l.lanes=T,l}function xl(a,l,p,b){return a=sr(7,a,b,l),a.lanes=p,a}function Wm(a,l,p,b){return a=sr(22,a,b,l),a.elementType=fe,a.lanes=p,a.stateNode={isHidden:!1},a}function lx(a,l,p){return a=sr(6,a,null,l),a.lanes=p,a}function cx(a,l,p){return l=sr(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function q_(a,l,p,b,A){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qi(0),this.expirationTimes=qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.identifierPrefix=b,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function dx(a,l,p,b,A,T,B,ie,he){return a=new q_(a,l,p,ie,he),l===1?(l=1,T===!0&&(l|=8)):l=0,T=sr(3,null,null,l),a.current=T,T.stateNode=a,T.memoizedState={element:b,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(T),a}function W_(a,l,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:b==null?null:""+b,children:a,containerInfo:l,implementation:p}}function Ky(a){if(!a)return uo;a=a._reactInternals;e:{if(ys(a)!==a||a.tag!==1)throw Error(n(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ua(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(a.tag===1){var p=a.type;if(ua(p))return wv(a,p,l)}return l}function Qy(a,l,p,b,A,T,B,ie,he){return a=dx(p,b,!0,a,A,T,B,ie,he),a.context=Ky(null),p=a.current,b=Jn(),A=vo(p),T=_i(b,A),T.callback=l??null,po(p,T,A),a.current.lanes=A,_a(a,A,b),pa(a,b),a}function Zm(a,l,p,b){var A=l.current,T=Jn(),B=vo(A);return p=Ky(p),l.context===null?l.context=p:l.pendingContext=p,l=_i(T,B),l.payload={element:a},b=b===void 0?null:b,b!==null&&(l.callback=b),a=po(A,l,B),a!==null&&(Nr(a,A,B,T),Cm(a,A,B)),B}function Gm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Xy(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function ux(a,l){Xy(a,l),(a=a.alternate)&&Xy(a,l)}function Z_(){return null}var Yy=typeof reportError=="function"?reportError:function(a){console.error(a)};function mx(a){this._internalRoot=a}Km.prototype.render=mx.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));Zm(a,l,null,null)},Km.prototype.unmount=mx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;hl(function(){Zm(null,a,null,null)}),l[bs]=null}};function Km(a){this._internalRoot=a}Km.prototype.unstable_scheduleHydration=function(a){if(a){var l=Gl();a={blockedOn:null,target:a,priority:l};for(var p=0;p<yn.length&&l!==0&&l<yn[p].priority;p++);yn.splice(p,0,a),p===0&&Kl(a)}};function hx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Qm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Jy(){}function G_(a,l,p,b,A){if(A){if(typeof b=="function"){var T=b;b=function(){var Pe=Gm(B);T.call(Pe)}}var B=Qy(l,b,a,0,null,!1,!1,"",Jy);return a._reactRootContainer=B,a[bs]=B.current,ro(a.nodeType===8?a.parentNode:a),hl(),B}for(;A=a.lastChild;)a.removeChild(A);if(typeof b=="function"){var ie=b;b=function(){var Pe=Gm(he);ie.call(Pe)}}var he=dx(a,0,!1,null,null,!1,!1,"",Jy);return a._reactRootContainer=he,a[bs]=he.current,ro(a.nodeType===8?a.parentNode:a),hl(function(){Zm(l,he,p,b)}),he}function Xm(a,l,p,b,A){var T=p._reactRootContainer;if(T){var B=T;if(typeof A=="function"){var ie=A;A=function(){var he=Gm(B);ie.call(he)}}Zm(l,B,a,A)}else B=G_(p,l,a,A,b);return Gm(B)}Wl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var p=Lt(l.pendingLanes);p!==0&&(hr(l,p|1),pa(l,Ee()),(ls&6)===0&&(Sc=Ee()+500,mo()))}break;case 13:hl(function(){var b=Si(a,1);if(b!==null){var A=Jn();Nr(b,a,1,A)}}),ux(a,1)}},di=function(a){if(a.tag===13){var l=Si(a,134217728);if(l!==null){var p=Jn();Nr(l,a,134217728,p)}ux(a,134217728)}},Zl=function(a){if(a.tag===13){var l=vo(a),p=Si(a,l);if(p!==null){var b=Jn();Nr(p,a,l,b)}ux(a,l)}},Gl=function(){return is},Go=function(a,l){var p=is;try{return is=a,l()}finally{is=p}},Fs=function(a,l,p){switch(l){case"input":if(mt(a,p),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var b=p[l];if(b!==a&&b.form===a.form){var A=mc(b);if(!A)throw Error(n(90));Xe(b),mt(b,A)}}}break;case"textarea":ce(a,p);break;case"select":l=p.value,l!=null&&xe(a,!!p.multiple,l,!1)}},qt=ax,Ds=hl;var K_={usingClientEntryPoint:!1,Events:[bi,ji,mc,yt,os,ax]},Yd={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q_={bundleType:Yd.bundleType,version:Yd.version,rendererPackageName:Yd.rendererPackageName,rendererConfig:Yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Wo(a),a===null?null:a.stateNode},findFiberByHostInstance:Yd.findFiberByHostInstance||Z_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{Yt=Ym.inject(Q_),bt=Ym}catch{}}return fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K_,fa.createPortal=function(a,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hx(l))throw Error(n(200));return W_(a,l,null,p)},fa.createRoot=function(a,l){if(!hx(a))throw Error(n(299));var p=!1,b="",A=Yy;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=dx(a,1,!1,null,null,p,!1,b,A),a[bs]=l.current,ro(a.nodeType===8?a.parentNode:a),new mx(l)},fa.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Wo(l),a=a===null?null:a.stateNode,a},fa.flushSync=function(a){return hl(a)},fa.hydrate=function(a,l,p){if(!Qm(l))throw Error(n(200));return Xm(null,a,l,!0,p)},fa.hydrateRoot=function(a,l,p){if(!hx(a))throw Error(n(405));var b=p!=null&&p.hydratedSources||null,A=!1,T="",B=Yy;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onRecoverableError!==void 0&&(B=p.onRecoverableError)),l=Qy(l,null,a,1,p??null,A,!1,T,B),a[bs]=l.current,ro(a),b)for(a=0;a<b.length;a++)p=b[a],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Km(l)},fa.render=function(a,l,p){if(!Qm(l))throw Error(n(200));return Xm(null,a,l,!1,p)},fa.unmountComponentAtNode=function(a){if(!Qm(a))throw Error(n(40));return a._reactRootContainer?(hl(function(){Xm(null,null,a,!1,function(){a._reactRootContainer=null,a[bs]=null})}),!0):!1},fa.unstable_batchedUpdates=ax,fa.unstable_renderSubtreeIntoContainer=function(a,l,p,b){if(!Qm(p))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Xm(a,l,p,!1,b)},fa.version="18.3.1-next-f1338f8080-20240426",fa}var ob;function CN(){if(ob)return xx.exports;ob=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),xx.exports=aA(),xx.exports}var lb;function rA(){if(lb)return Jm;lb=1;var t=CN();return Jm.createRoot=t.createRoot,Jm.hydrateRoot=t.hydrateRoot,Jm}var iA=rA(),m=Hg();const Be=Vg(m),qg=Y_({__proto__:null,default:Be},[m]);var Xc=CN();const SN=Vg(Xc);function oA(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const lA=t=>{switch(t){case"success":return uA;case"info":return hA;case"warning":return mA;case"error":return pA;default:return null}},cA=Array(12).fill(0),dA=({visible:t,className:s})=>Be.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Be.createElement("div",{className:"sonner-spinner"},cA.map((n,r)=>Be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),uA=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mA=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),hA=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pA=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fA=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xA=()=>{const[t,s]=Be.useState(document.hidden);return Be.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let lg=1;class gA{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:r,...o}=s,c=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:lg++,u=this.toasts.find(f=>f.id===c),h=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),u?this.toasts=this.toasts.map(f=>f.id===c?(this.publish({...f,...s,id:c,title:r}),{...f,...s,id:c,dismissible:h,title:r}):f):this.addToast({title:r,...o,dismissible:h,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(s instanceof Function?s():s);let c=r!==void 0,u;const h=o.then(async v=>{if(u=["resolve",v],Be.isValidElement(v))c=!1,this.create({id:r,type:"default",message:v});else if(yA(v)&&!v.ok){c=!1;const g=typeof n.error=="function"?await n.error(`HTTP error! status: ${v.status}`):n.error,N=typeof n.description=="function"?await n.description(`HTTP error! status: ${v.status}`):n.description,j=typeof g=="object"&&!Be.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:N,...j})}else if(v instanceof Error){c=!1;const g=typeof n.error=="function"?await n.error(v):n.error,N=typeof n.description=="function"?await n.description(v):n.description,j=typeof g=="object"&&!Be.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:N,...j})}else if(n.success!==void 0){c=!1;const g=typeof n.success=="function"?await n.success(v):n.success,N=typeof n.description=="function"?await n.description(v):n.description,j=typeof g=="object"&&!Be.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:N,...j})}}).catch(async v=>{if(u=["reject",v],n.error!==void 0){c=!1;const x=typeof n.error=="function"?await n.error(v):n.error,g=typeof n.description=="function"?await n.description(v):n.description,w=typeof x=="object"&&!Be.isValidElement(x)?x:{message:x};this.create({id:r,type:"error",description:g,...w})}}).finally(()=>{c&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((v,x)=>h.then(()=>u[0]==="reject"?x(u[1]):v(u[1])).catch(x));return typeof r!="string"&&typeof r!="number"?{unwrap:f}:Object.assign(r,{unwrap:f})},this.custom=(s,n)=>{const r=n?.id||lg++;return this.create({jsx:s(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ga=new gA,vA=(t,s)=>{const n=s?.id||lg++;return ga.addToast({title:t,...s,id:n}),n},yA=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",bA=vA,jA=()=>ga.toasts,NA=()=>ga.getActiveToasts(),ye=Object.assign(bA,{success:ga.success,info:ga.info,warning:ga.warning,error:ga.error,custom:ga.custom,message:ga.message,promise:ga.promise,dismiss:ga.dismiss,loading:ga.loading},{getHistory:jA,getToasts:NA});oA("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function eh(t){return t.label!==void 0}const wA=3,CA="24px",SA="16px",cb=4e3,_A=356,AA=14,PA=45,EA=200;function Gr(...t){return t.filter(Boolean).join(" ")}function kA(t){const[s,n]=t.split("-"),r=[];return s&&r.push(s),n&&r.push(n),r}const DA=t=>{var s,n,r,o,c,u,h,f,v;const{invert:x,toast:g,unstyled:N,interacting:w,setHeights:j,visibleToasts:C,heights:k,index:E,toasts:S,expanded:P,removeToast:D,defaultRichColors:I,closeButton:O,style:F,cancelButtonStyle:X,actionButtonStyle:Q,className:V="",descriptionClassName:$="",duration:R,position:z,gap:J,expandByDefault:ue,classNames:se,icons:fe,closeButtonAriaLabel:H="Close toast"}=t,[re,G]=Be.useState(null),[W,ne]=Be.useState(null),[K,ee]=Be.useState(!1),[U,le]=Be.useState(!1),[Y,ae]=Be.useState(!1),[Ie,$e]=Be.useState(!1),[Ge,Xe]=Be.useState(!1),[Je,tt]=Be.useState(0),[ut,wt]=Be.useState(0),mt=Be.useRef(g.duration||R||cb),kt=Be.useRef(null),zt=Be.useRef(null),te=E===0,xe=E+1<=C,pe=g.type,Ue=g.dismissible!==!1,ce=g.className||"",ve=g.descriptionClassName||"",ze=Be.useMemo(()=>k.findIndex(yt=>yt.toastId===g.id)||0,[k,g.id]),He=Be.useMemo(()=>{var yt;return(yt=g.closeButton)!=null?yt:O},[g.closeButton,O]),pt=Be.useMemo(()=>g.duration||R||cb,[g.duration,R]),me=Be.useRef(0),Oe=Be.useRef(0),Ke=Be.useRef(0),lt=Be.useRef(null),[Tt,ps]=z.split("-"),Ts=Be.useMemo(()=>k.reduce((yt,os,qt)=>qt>=ze?yt:yt+os.height,0),[k,ze]),ws=xA(),rs=g.invert||x,fs=pe==="loading";Oe.current=Be.useMemo(()=>ze*J+Ts,[ze,Ts]),Be.useEffect(()=>{mt.current=pt},[pt]),Be.useEffect(()=>{ee(!0)},[]),Be.useEffect(()=>{const yt=zt.current;if(yt){const os=yt.getBoundingClientRect().height;return wt(os),j(qt=>[{toastId:g.id,height:os,position:g.position},...qt]),()=>j(qt=>qt.filter(Ds=>Ds.toastId!==g.id))}},[j,g.id]),Be.useLayoutEffect(()=>{if(!K)return;const yt=zt.current,os=yt.style.height;yt.style.height="auto";const qt=yt.getBoundingClientRect().height;yt.style.height=os,wt(qt),j(Ds=>Ds.find(vs=>vs.toastId===g.id)?Ds.map(vs=>vs.toastId===g.id?{...vs,height:qt}:vs):[{toastId:g.id,height:qt,position:g.position},...Ds])},[K,g.title,g.description,j,g.id,g.jsx,g.action,g.cancel]);const gs=Be.useCallback(()=>{le(!0),tt(Oe.current),j(yt=>yt.filter(os=>os.toastId!==g.id)),setTimeout(()=>{D(g)},EA)},[g,D,j,Oe]);Be.useEffect(()=>{if(g.promise&&pe==="loading"||g.duration===1/0||g.type==="loading")return;let yt;return P||w||ws?(()=>{if(Ke.current<me.current){const Ds=new Date().getTime()-me.current;mt.current=mt.current-Ds}Ke.current=new Date().getTime()})():(()=>{mt.current!==1/0&&(me.current=new Date().getTime(),yt=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),gs()},mt.current))})(),()=>clearTimeout(yt)},[P,w,g,pe,ws,gs]),Be.useEffect(()=>{g.delete&&(gs(),g.onDismiss==null||g.onDismiss.call(g,g))},[gs,g.delete]);function Fs(){var yt;if(fe?.loading){var os;return Be.createElement("div",{className:Gr(se?.loader,g==null||(os=g.classNames)==null?void 0:os.loader,"sonner-loader"),"data-visible":pe==="loading"},fe.loading)}return Be.createElement(dA,{className:Gr(se?.loader,g==null||(yt=g.classNames)==null?void 0:yt.loader),visible:pe==="loading"})}const Ws=g.icon||fe?.[pe]||lA(pe);var ks,an;return Be.createElement("li",{tabIndex:0,ref:zt,className:Gr(V,ce,se?.toast,g==null||(s=g.classNames)==null?void 0:s.toast,se?.default,se?.[pe],g==null||(n=g.classNames)==null?void 0:n[pe]),"data-sonner-toast":"","data-rich-colors":(ks=g.richColors)!=null?ks:I,"data-styled":!(g.jsx||g.unstyled||N),"data-mounted":K,"data-promise":!!g.promise,"data-swiped":Ge,"data-removed":U,"data-visible":xe,"data-y-position":Tt,"data-x-position":ps,"data-index":E,"data-front":te,"data-swiping":Y,"data-dismissible":Ue,"data-type":pe,"data-invert":rs,"data-swipe-out":Ie,"data-swipe-direction":W,"data-expanded":!!(P||ue&&K),"data-testid":g.testId,style:{"--index":E,"--toasts-before":E,"--z-index":S.length-E,"--offset":`${U?Je:Oe.current}px`,"--initial-height":ue?"auto":`${ut}px`,...F,...g.style},onDragEnd:()=>{ae(!1),G(null),lt.current=null},onPointerDown:yt=>{yt.button!==2&&(fs||!Ue||(kt.current=new Date,tt(Oe.current),yt.target.setPointerCapture(yt.pointerId),yt.target.tagName!=="BUTTON"&&(ae(!0),lt.current={x:yt.clientX,y:yt.clientY})))},onPointerUp:()=>{var yt,os,qt;if(Ie||!Ue)return;lt.current=null;const Ds=Number(((yt=zt.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),js=Number(((os=zt.current)==null?void 0:os.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vs=new Date().getTime()-((qt=kt.current)==null?void 0:qt.getTime()),Ae=re==="x"?Ds:js,nt=Math.abs(Ae)/vs;if(Math.abs(Ae)>=PA||nt>.11){tt(Oe.current),g.onDismiss==null||g.onDismiss.call(g,g),ne(re==="x"?Ds>0?"right":"left":js>0?"down":"up"),gs(),$e(!0);return}else{var it,be;(it=zt.current)==null||it.style.setProperty("--swipe-amount-x","0px"),(be=zt.current)==null||be.style.setProperty("--swipe-amount-y","0px")}Xe(!1),ae(!1),G(null)},onPointerMove:yt=>{var os,qt,Ds;if(!lt.current||!Ue||((os=window.getSelection())==null?void 0:os.toString().length)>0)return;const vs=yt.clientY-lt.current.y,Ae=yt.clientX-lt.current.x;var nt;const it=(nt=t.swipeDirections)!=null?nt:kA(z);!re&&(Math.abs(Ae)>1||Math.abs(vs)>1)&&G(Math.abs(Ae)>Math.abs(vs)?"x":"y");let be={x:0,y:0};const Me=Fe=>1/(1.5+Math.abs(Fe)/20);if(re==="y"){if(it.includes("top")||it.includes("bottom"))if(it.includes("top")&&vs<0||it.includes("bottom")&&vs>0)be.y=vs;else{const Fe=vs*Me(vs);be.y=Math.abs(Fe)<Math.abs(vs)?Fe:vs}}else if(re==="x"&&(it.includes("left")||it.includes("right")))if(it.includes("left")&&Ae<0||it.includes("right")&&Ae>0)be.x=Ae;else{const Fe=Ae*Me(Ae);be.x=Math.abs(Fe)<Math.abs(Ae)?Fe:Ae}(Math.abs(be.x)>0||Math.abs(be.y)>0)&&Xe(!0),(qt=zt.current)==null||qt.style.setProperty("--swipe-amount-x",`${be.x}px`),(Ds=zt.current)==null||Ds.style.setProperty("--swipe-amount-y",`${be.y}px`)}},He&&!g.jsx&&pe!=="loading"?Be.createElement("button",{"aria-label":H,"data-disabled":fs,"data-close-button":!0,onClick:fs||!Ue?()=>{}:()=>{gs(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Gr(se?.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(an=fe?.close)!=null?an:fA):null,(pe||g.icon||g.promise)&&g.icon!==null&&(fe?.[pe]!==null||g.icon)?Be.createElement("div",{"data-icon":"",className:Gr(se?.icon,g==null||(o=g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Fs():null,g.type!=="loading"?Ws:null):null,Be.createElement("div",{"data-content":"",className:Gr(se?.content,g==null||(c=g.classNames)==null?void 0:c.content)},Be.createElement("div",{"data-title":"",className:Gr(se?.title,g==null||(u=g.classNames)==null?void 0:u.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?Be.createElement("div",{"data-description":"",className:Gr($,ve,se?.description,g==null||(h=g.classNames)==null?void 0:h.description)},typeof g.description=="function"?g.description():g.description):null),Be.isValidElement(g.cancel)?g.cancel:g.cancel&&eh(g.cancel)?Be.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||X,onClick:yt=>{eh(g.cancel)&&Ue&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,yt),gs())},className:Gr(se?.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,Be.isValidElement(g.action)?g.action:g.action&&eh(g.action)?Be.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||Q,onClick:yt=>{eh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,yt),!yt.defaultPrevented&&gs())},className:Gr(se?.actionButton,g==null||(v=g.classNames)==null?void 0:v.actionButton)},g.action.label):null)};function db(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function TA(t,s){const n={};return[t,s].forEach((r,o)=>{const c=o===1,u=c?"--mobile-offset":"--offset",h=c?SA:CA;function f(v){["top","right","bottom","left"].forEach(x=>{n[`${u}-${x}`]=typeof v=="number"?`${v}px`:v})}typeof r=="number"||typeof r=="string"?f(r):typeof r=="object"?["top","right","bottom","left"].forEach(v=>{r[v]===void 0?n[`${u}-${v}`]=h:n[`${u}-${v}`]=typeof r[v]=="number"?`${r[v]}px`:r[v]}):f(h)}),n}const IA=Be.forwardRef(function(s,n){const{id:r,invert:o,position:c="bottom-right",hotkey:u=["altKey","KeyT"],expand:h,closeButton:f,className:v,offset:x,mobileOffset:g,theme:N="light",richColors:w,duration:j,style:C,visibleToasts:k=wA,toastOptions:E,dir:S=db(),gap:P=AA,icons:D,containerAriaLabel:I="Notifications"}=s,[O,F]=Be.useState([]),X=Be.useMemo(()=>r?O.filter(K=>K.toasterId===r):O.filter(K=>!K.toasterId),[O,r]),Q=Be.useMemo(()=>Array.from(new Set([c].concat(X.filter(K=>K.position).map(K=>K.position)))),[X,c]),[V,$]=Be.useState([]),[R,z]=Be.useState(!1),[J,ue]=Be.useState(!1),[se,fe]=Be.useState(N!=="system"?N:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=Be.useRef(null),re=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=Be.useRef(null),W=Be.useRef(!1),ne=Be.useCallback(K=>{F(ee=>{var U;return(U=ee.find(le=>le.id===K.id))!=null&&U.delete||ga.dismiss(K.id),ee.filter(({id:le})=>le!==K.id)})},[]);return Be.useEffect(()=>ga.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{F(ee=>ee.map(U=>U.id===K.id?{...U,delete:!0}:U))});return}setTimeout(()=>{SN.flushSync(()=>{F(ee=>{const U=ee.findIndex(le=>le.id===K.id);return U!==-1?[...ee.slice(0,U),{...ee[U],...K},...ee.slice(U+1)]:[K,...ee]})})})}),[O]),Be.useEffect(()=>{if(N!=="system"){fe(N);return}if(N==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:ee})=>{fe(ee?"dark":"light")})}catch{K.addListener(({matches:U})=>{try{fe(U?"dark":"light")}catch(le){console.error(le)}})}},[N]),Be.useEffect(()=>{O.length<=1&&z(!1)},[O]),Be.useEffect(()=>{const K=ee=>{var U;if(u.every(ae=>ee[ae]||ee.code===ae)){var Y;z(!0),(Y=H.current)==null||Y.focus()}ee.code==="Escape"&&(document.activeElement===H.current||(U=H.current)!=null&&U.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[u]),Be.useEffect(()=>{if(H.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,W.current=!1)}},[H.current]),Be.createElement("section",{ref:n,"aria-label":`${I} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Q.map((K,ee)=>{var U;const[le,Y]=K.split("-");return X.length?Be.createElement("ol",{key:K,dir:S==="auto"?db():S,tabIndex:-1,ref:H,className:v,"data-sonner-toaster":!0,"data-sonner-theme":se,"data-y-position":le,"data-x-position":Y,style:{"--front-toast-height":`${((U=V[0])==null?void 0:U.height)||0}px`,"--width":`${_A}px`,"--gap":`${P}px`,...C,...TA(x,g)},onBlur:ae=>{W.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(W.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||W.current||(W.current=!0,G.current=ae.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{J||z(!1)},onDragEnd:()=>z(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||ue(!0)},onPointerUp:()=>ue(!1)},X.filter(ae=>!ae.position&&ee===0||ae.position===K).map((ae,Ie)=>{var $e,Ge;return Be.createElement(DA,{key:ae.id,icons:D,index:Ie,toast:ae,defaultRichColors:w,duration:($e=E?.duration)!=null?$e:j,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:o,visibleToasts:k,closeButton:(Ge=E?.closeButton)!=null?Ge:f,interacting:J,position:K,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:ne,toasts:X.filter(Xe=>Xe.position==ae.position),heights:V.filter(Xe=>Xe.position==ae.position),setHeights:$,expandByDefault:h,gap:P,expanded:R,swipeDirections:s.swipeDirections})})):null}))});function _N(t,s){return function(){return t.apply(s,arguments)}}const{toString:MA}=Object.prototype,{getPrototypeOf:Wg}=Object,{iterator:rp,toStringTag:AN}=Symbol,ip=(t=>s=>{const n=MA.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Rr=t=>(t=t.toLowerCase(),s=>ip(s)===t),op=t=>s=>typeof s===t,{isArray:Yc}=Array,Wc=op("undefined");function Pu(t){return t!==null&&!Wc(t)&&t.constructor!==null&&!Wc(t.constructor)&&wa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const PN=Rr("ArrayBuffer");function RA(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&PN(t.buffer),s}const OA=op("string"),wa=op("function"),EN=op("number"),Eu=t=>t!==null&&typeof t=="object",LA=t=>t===!0||t===!1,wh=t=>{if(ip(t)!=="object")return!1;const s=Wg(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(AN in t)&&!(rp in t)},FA=t=>{if(!Eu(t)||Pu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},$A=Rr("Date"),zA=Rr("File"),BA=Rr("Blob"),UA=Rr("FileList"),VA=t=>Eu(t)&&wa(t.pipe),HA=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||wa(t.append)&&((s=ip(t))==="formdata"||s==="object"&&wa(t.toString)&&t.toString()==="[object FormData]"))},qA=Rr("URLSearchParams"),[WA,ZA,GA,KA]=["ReadableStream","Request","Response","Headers"].map(Rr),QA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ku(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),Yc(t))for(r=0,o=t.length;r<o;r++)s.call(null,t[r],r,t);else{if(Pu(t))return;const c=n?Object.getOwnPropertyNames(t):Object.keys(t),u=c.length;let h;for(r=0;r<u;r++)h=c[r],s.call(null,t[h],h,t)}}function kN(t,s){if(Pu(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],s===o.toLowerCase())return o;return null}const wl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DN=t=>!Wc(t)&&t!==wl;function cg(){const{caseless:t,skipUndefined:s}=DN(this)&&this||{},n={},r=(o,c)=>{const u=t&&kN(n,c)||c;wh(n[u])&&wh(o)?n[u]=cg(n[u],o):wh(o)?n[u]=cg({},o):Yc(o)?n[u]=o.slice():(!s||!Wc(o))&&(n[u]=o)};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&ku(arguments[o],r);return n}const XA=(t,s,n,{allOwnKeys:r}={})=>(ku(s,(o,c)=>{n&&wa(o)?t[c]=_N(o,n):t[c]=o},{allOwnKeys:r}),t),YA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),JA=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},eP=(t,s,n,r)=>{let o,c,u;const h={};if(s=s||{},t==null)return s;do{for(o=Object.getOwnPropertyNames(t),c=o.length;c-- >0;)u=o[c],(!r||r(u,t,s))&&!h[u]&&(s[u]=t[u],h[u]=!0);t=n!==!1&&Wg(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},tP=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},sP=t=>{if(!t)return null;if(Yc(t))return t;let s=t.length;if(!EN(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},nP=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Wg(Uint8Array)),aP=(t,s)=>{const r=(t&&t[rp]).call(t);let o;for(;(o=r.next())&&!o.done;){const c=o.value;s.call(t,c[0],c[1])}},rP=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},iP=Rr("HTMLFormElement"),oP=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),ub=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),lP=Rr("RegExp"),TN=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ku(n,(o,c)=>{let u;(u=s(o,c,t))!==!1&&(r[c]=u||o)}),Object.defineProperties(t,r)},cP=t=>{TN(t,(s,n)=>{if(wa(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(wa(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dP=(t,s)=>{const n={},r=o=>{o.forEach(c=>{n[c]=!0})};return Yc(t)?r(t):r(String(t).split(s)),n},uP=()=>{},mP=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function hP(t){return!!(t&&wa(t.append)&&t[AN]==="FormData"&&t[rp])}const pP=t=>{const s=new Array(10),n=(r,o)=>{if(Eu(r)){if(s.indexOf(r)>=0)return;if(Pu(r))return r;if(!("toJSON"in r)){s[o]=r;const c=Yc(r)?[]:{};return ku(r,(u,h)=>{const f=n(u,o+1);!Wc(f)&&(c[h]=f)}),s[o]=void 0,c}}return r};return n(t,0)},fP=Rr("AsyncFunction"),xP=t=>t&&(Eu(t)||wa(t))&&wa(t.then)&&wa(t.catch),IN=((t,s)=>t?setImmediate:s?((n,r)=>(wl.addEventListener("message",({source:o,data:c})=>{o===wl&&c===n&&r.length&&r.shift()()},!1),o=>{r.push(o),wl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wa(wl.postMessage)),gP=typeof queueMicrotask<"u"?queueMicrotask.bind(wl):typeof process<"u"&&process.nextTick||IN,vP=t=>t!=null&&wa(t[rp]),ke={isArray:Yc,isArrayBuffer:PN,isBuffer:Pu,isFormData:HA,isArrayBufferView:RA,isString:OA,isNumber:EN,isBoolean:LA,isObject:Eu,isPlainObject:wh,isEmptyObject:FA,isReadableStream:WA,isRequest:ZA,isResponse:GA,isHeaders:KA,isUndefined:Wc,isDate:$A,isFile:zA,isBlob:BA,isRegExp:lP,isFunction:wa,isStream:VA,isURLSearchParams:qA,isTypedArray:nP,isFileList:UA,forEach:ku,merge:cg,extend:XA,trim:QA,stripBOM:YA,inherits:JA,toFlatObject:eP,kindOf:ip,kindOfTest:Rr,endsWith:tP,toArray:sP,forEachEntry:aP,matchAll:rP,isHTMLForm:iP,hasOwnProperty:ub,hasOwnProp:ub,reduceDescriptors:TN,freezeMethods:cP,toObjectSet:dP,toCamelCase:oP,noop:uP,toFiniteNumber:mP,findKey:kN,global:wl,isContextDefined:DN,isSpecCompliantForm:hP,toJSONObject:pP,isAsyncFn:fP,isThenable:xP,setImmediate:IN,asap:gP,isIterable:vP};function Ht(t,s,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}ke.inherits(Ht,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ke.toJSONObject(this.config),code:this.code,status:this.status}}});const MN=Ht.prototype,RN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{RN[t]={value:t}});Object.defineProperties(Ht,RN);Object.defineProperty(MN,"isAxiosError",{value:!0});Ht.from=(t,s,n,r,o,c)=>{const u=Object.create(MN);ke.toFlatObject(t,u,function(x){return x!==Error.prototype},v=>v!=="isAxiosError");const h=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return Ht.call(u,h,f,n,r,o),t&&u.cause==null&&Object.defineProperty(u,"cause",{value:t,configurable:!0}),u.name=t&&t.name||"Error",c&&Object.assign(u,c),u};const yP=null;function dg(t){return ke.isPlainObject(t)||ke.isArray(t)}function ON(t){return ke.endsWith(t,"[]")?t.slice(0,-2):t}function mb(t,s,n){return t?t.concat(s).map(function(o,c){return o=ON(o),!n&&c?"["+o+"]":o}).join(n?".":""):s}function bP(t){return ke.isArray(t)&&!t.some(dg)}const jP=ke.toFlatObject(ke,{},null,function(s){return/^is[A-Z]/.test(s)});function lp(t,s,n){if(!ke.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=ke.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,k){return!ke.isUndefined(k[C])});const r=n.metaTokens,o=n.visitor||x,c=n.dots,u=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&ke.isSpecCompliantForm(s);if(!ke.isFunction(o))throw new TypeError("visitor must be a function");function v(j){if(j===null)return"";if(ke.isDate(j))return j.toISOString();if(ke.isBoolean(j))return j.toString();if(!f&&ke.isBlob(j))throw new Ht("Blob is not supported. Use a Buffer instead.");return ke.isArrayBuffer(j)||ke.isTypedArray(j)?f&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function x(j,C,k){let E=j;if(j&&!k&&typeof j=="object"){if(ke.endsWith(C,"{}"))C=r?C:C.slice(0,-2),j=JSON.stringify(j);else if(ke.isArray(j)&&bP(j)||(ke.isFileList(j)||ke.endsWith(C,"[]"))&&(E=ke.toArray(j)))return C=ON(C),E.forEach(function(P,D){!(ke.isUndefined(P)||P===null)&&s.append(u===!0?mb([C],D,c):u===null?C:C+"[]",v(P))}),!1}return dg(j)?!0:(s.append(mb(k,C,c),v(j)),!1)}const g=[],N=Object.assign(jP,{defaultVisitor:x,convertValue:v,isVisitable:dg});function w(j,C){if(!ke.isUndefined(j)){if(g.indexOf(j)!==-1)throw Error("Circular reference detected in "+C.join("."));g.push(j),ke.forEach(j,function(E,S){(!(ke.isUndefined(E)||E===null)&&o.call(s,E,ke.isString(S)?S.trim():S,C,N))===!0&&w(E,C?C.concat(S):[S])}),g.pop()}}if(!ke.isObject(t))throw new TypeError("data must be an object");return w(t),s}function hb(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Zg(t,s){this._pairs=[],t&&lp(t,this,s)}const LN=Zg.prototype;LN.append=function(s,n){this._pairs.push([s,n])};LN.toString=function(s){const n=s?function(r){return s.call(this,r,hb)}:hb;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function NP(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function FN(t,s,n){if(!s)return t;const r=n&&n.encode||NP;ke.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let c;if(o?c=o(s,n):c=ke.isURLSearchParams(s)?s.toString():new Zg(s,n).toString(r),c){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class pb{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ke.forEach(this.handlers,function(r){r!==null&&s(r)})}}const $N={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wP=typeof URLSearchParams<"u"?URLSearchParams:Zg,CP=typeof FormData<"u"?FormData:null,SP=typeof Blob<"u"?Blob:null,_P={isBrowser:!0,classes:{URLSearchParams:wP,FormData:CP,Blob:SP},protocols:["http","https","file","blob","url","data"]},Gg=typeof window<"u"&&typeof document<"u",ug=typeof navigator=="object"&&navigator||void 0,AP=Gg&&(!ug||["ReactNative","NativeScript","NS"].indexOf(ug.product)<0),PP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",EP=Gg&&window.location.href||"http://localhost",kP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gg,hasStandardBrowserEnv:AP,hasStandardBrowserWebWorkerEnv:PP,navigator:ug,origin:EP},Symbol.toStringTag,{value:"Module"})),Gn={...kP,..._P};function DP(t,s){return lp(t,new Gn.classes.URLSearchParams,{visitor:function(n,r,o,c){return Gn.isNode&&ke.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function TP(t){return ke.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function IP(t){const s={},n=Object.keys(t);let r;const o=n.length;let c;for(r=0;r<o;r++)c=n[r],s[c]=t[c];return s}function zN(t){function s(n,r,o,c){let u=n[c++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=c>=n.length;return u=!u&&ke.isArray(o)?o.length:u,f?(ke.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!h):((!o[u]||!ke.isObject(o[u]))&&(o[u]=[]),s(n,r,o[u],c)&&ke.isArray(o[u])&&(o[u]=IP(o[u])),!h)}if(ke.isFormData(t)&&ke.isFunction(t.entries)){const n={};return ke.forEachEntry(t,(r,o)=>{s(TP(r),o,n,0)}),n}return null}function MP(t,s,n){if(ke.isString(t))try{return(s||JSON.parse)(t),ke.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Du={transitional:$N,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,c=ke.isObject(s);if(c&&ke.isHTMLForm(s)&&(s=new FormData(s)),ke.isFormData(s))return o?JSON.stringify(zN(s)):s;if(ke.isArrayBuffer(s)||ke.isBuffer(s)||ke.isStream(s)||ke.isFile(s)||ke.isBlob(s)||ke.isReadableStream(s))return s;if(ke.isArrayBufferView(s))return s.buffer;if(ke.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return DP(s,this.formSerializer).toString();if((h=ke.isFileList(s))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return lp(h?{"files[]":s}:s,f&&new f,this.formSerializer)}}return c||o?(n.setContentType("application/json",!1),MP(s)):s}],transformResponse:[function(s){const n=this.transitional||Du.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(ke.isResponse(s)||ke.isReadableStream(s))return s;if(s&&ke.isString(s)&&(r&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(s,this.parseReviver)}catch(h){if(u)throw h.name==="SyntaxError"?Ht.from(h,Ht.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gn.classes.FormData,Blob:Gn.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ke.forEach(["delete","get","head","post","put","patch"],t=>{Du.headers[t]={}});const RP=ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OP=t=>{const s={};let n,r,o;return t&&t.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!n||s[n]&&RP[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},fb=Symbol("internals");function eu(t){return t&&String(t).trim().toLowerCase()}function Ch(t){return t===!1||t==null?t:ke.isArray(t)?t.map(Ch):String(t)}function LP(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const FP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function yx(t,s,n,r,o){if(ke.isFunction(r))return r.call(this,s,n);if(o&&(s=n),!!ke.isString(s)){if(ke.isString(r))return s.indexOf(r)!==-1;if(ke.isRegExp(r))return r.test(s)}}function $P(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function zP(t,s){const n=ke.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,c,u){return this[r].call(this,s,o,c,u)},configurable:!0})})}let Ca=class{constructor(s){s&&this.set(s)}set(s,n,r){const o=this;function c(h,f,v){const x=eu(f);if(!x)throw new Error("header name must be a non-empty string");const g=ke.findKey(o,x);(!g||o[g]===void 0||v===!0||v===void 0&&o[g]!==!1)&&(o[g||f]=Ch(h))}const u=(h,f)=>ke.forEach(h,(v,x)=>c(v,x,f));if(ke.isPlainObject(s)||s instanceof this.constructor)u(s,n);else if(ke.isString(s)&&(s=s.trim())&&!FP(s))u(OP(s),n);else if(ke.isObject(s)&&ke.isIterable(s)){let h={},f,v;for(const x of s){if(!ke.isArray(x))throw TypeError("Object iterator must return a key-value pair");h[v=x[0]]=(f=h[v])?ke.isArray(f)?[...f,x[1]]:[f,x[1]]:x[1]}u(h,n)}else s!=null&&c(n,s,r);return this}get(s,n){if(s=eu(s),s){const r=ke.findKey(this,s);if(r){const o=this[r];if(!n)return o;if(n===!0)return LP(o);if(ke.isFunction(n))return n.call(this,o,r);if(ke.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=eu(s),s){const r=ke.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||yx(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let o=!1;function c(u){if(u=eu(u),u){const h=ke.findKey(r,u);h&&(!n||yx(r,r[h],h,n))&&(delete r[h],o=!0)}}return ke.isArray(s)?s.forEach(c):c(s),o}clear(s){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const c=n[r];(!s||yx(this,this[c],c,s,!0))&&(delete this[c],o=!0)}return o}normalize(s){const n=this,r={};return ke.forEach(this,(o,c)=>{const u=ke.findKey(r,c);if(u){n[u]=Ch(o),delete n[c];return}const h=s?$P(c):String(c).trim();h!==c&&delete n[c],n[h]=Ch(o),r[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return ke.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=s&&ke.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(o=>r.set(o)),r}static accessor(s){const r=(this[fb]=this[fb]={accessors:{}}).accessors,o=this.prototype;function c(u){const h=eu(u);r[h]||(zP(o,u),r[h]=!0)}return ke.isArray(s)?s.forEach(c):c(s),this}};Ca.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ke.reduceDescriptors(Ca.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});ke.freezeMethods(Ca);function bx(t,s){const n=this||Du,r=s||n,o=Ca.from(r.headers);let c=r.data;return ke.forEach(t,function(h){c=h.call(n,c,o.normalize(),s?s.status:void 0)}),o.normalize(),c}function BN(t){return!!(t&&t.__CANCEL__)}function Jc(t,s,n){Ht.call(this,t??"canceled",Ht.ERR_CANCELED,s,n),this.name="CanceledError"}ke.inherits(Jc,Ht,{__CANCEL__:!0});function UN(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new Ht("Request failed with status code "+n.status,[Ht.ERR_BAD_REQUEST,Ht.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function BP(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function UP(t,s){t=t||10;const n=new Array(t),r=new Array(t);let o=0,c=0,u;return s=s!==void 0?s:1e3,function(f){const v=Date.now(),x=r[c];u||(u=v),n[o]=f,r[o]=v;let g=c,N=0;for(;g!==o;)N+=n[g++],g=g%t;if(o=(o+1)%t,o===c&&(c=(c+1)%t),v-u<s)return;const w=x&&v-x;return w?Math.round(N*1e3/w):void 0}}function VP(t,s){let n=0,r=1e3/s,o,c;const u=(v,x=Date.now())=>{n=x,o=null,c&&(clearTimeout(c),c=null),t(...v)};return[(...v)=>{const x=Date.now(),g=x-n;g>=r?u(v,x):(o=v,c||(c=setTimeout(()=>{c=null,u(o)},r-g)))},()=>o&&u(o)]}const Fh=(t,s,n=3)=>{let r=0;const o=UP(50,250);return VP(c=>{const u=c.loaded,h=c.lengthComputable?c.total:void 0,f=u-r,v=o(f),x=u<=h;r=u;const g={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:v||void 0,estimated:v&&h&&x?(h-u)/v:void 0,event:c,lengthComputable:h!=null,[s?"download":"upload"]:!0};t(g)},n)},xb=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},gb=t=>(...s)=>ke.asap(()=>t(...s)),HP=Gn.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,Gn.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(Gn.origin),Gn.navigator&&/(msie|trident)/i.test(Gn.navigator.userAgent)):()=>!0,qP=Gn.hasStandardBrowserEnv?{write(t,s,n,r,o,c,u){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(s)}`];ke.isNumber(n)&&h.push(`expires=${new Date(n).toUTCString()}`),ke.isString(r)&&h.push(`path=${r}`),ke.isString(o)&&h.push(`domain=${o}`),c===!0&&h.push("secure"),ke.isString(u)&&h.push(`SameSite=${u}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function WP(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ZP(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function VN(t,s,n){let r=!WP(s);return t&&(r||n==!1)?ZP(t,s):s}const vb=t=>t instanceof Ca?{...t}:t;function Tl(t,s){s=s||{};const n={};function r(v,x,g,N){return ke.isPlainObject(v)&&ke.isPlainObject(x)?ke.merge.call({caseless:N},v,x):ke.isPlainObject(x)?ke.merge({},x):ke.isArray(x)?x.slice():x}function o(v,x,g,N){if(ke.isUndefined(x)){if(!ke.isUndefined(v))return r(void 0,v,g,N)}else return r(v,x,g,N)}function c(v,x){if(!ke.isUndefined(x))return r(void 0,x)}function u(v,x){if(ke.isUndefined(x)){if(!ke.isUndefined(v))return r(void 0,v)}else return r(void 0,x)}function h(v,x,g){if(g in s)return r(v,x);if(g in t)return r(void 0,v)}const f={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(v,x,g)=>o(vb(v),vb(x),g,!0)};return ke.forEach(Object.keys({...t,...s}),function(x){const g=f[x]||o,N=g(t[x],s[x],x);ke.isUndefined(N)&&g!==h||(n[x]=N)}),n}const HN=t=>{const s=Tl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:c,headers:u,auth:h}=s;if(s.headers=u=Ca.from(u),s.url=FN(VN(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),ke.isFormData(n)){if(Gn.hasStandardBrowserEnv||Gn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(ke.isFunction(n.getHeaders)){const f=n.getHeaders(),v=["content-type","content-length"];Object.entries(f).forEach(([x,g])=>{v.includes(x.toLowerCase())&&u.set(x,g)})}}if(Gn.hasStandardBrowserEnv&&(r&&ke.isFunction(r)&&(r=r(s)),r||r!==!1&&HP(s.url))){const f=o&&c&&qP.read(c);f&&u.set(o,f)}return s},GP=typeof XMLHttpRequest<"u",KP=GP&&function(t){return new Promise(function(n,r){const o=HN(t);let c=o.data;const u=Ca.from(o.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:v}=o,x,g,N,w,j;function C(){w&&w(),j&&j(),o.cancelToken&&o.cancelToken.unsubscribe(x),o.signal&&o.signal.removeEventListener("abort",x)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function E(){if(!k)return;const P=Ca.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),I={data:!h||h==="text"||h==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:P,config:t,request:k};UN(function(F){n(F),C()},function(F){r(F),C()},I),k=null}"onloadend"in k?k.onloadend=E:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(E)},k.onabort=function(){k&&(r(new Ht("Request aborted",Ht.ECONNABORTED,t,k)),k=null)},k.onerror=function(D){const I=D&&D.message?D.message:"Network Error",O=new Ht(I,Ht.ERR_NETWORK,t,k);O.event=D||null,r(O),k=null},k.ontimeout=function(){let D=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const I=o.transitional||$N;o.timeoutErrorMessage&&(D=o.timeoutErrorMessage),r(new Ht(D,I.clarifyTimeoutError?Ht.ETIMEDOUT:Ht.ECONNABORTED,t,k)),k=null},c===void 0&&u.setContentType(null),"setRequestHeader"in k&&ke.forEach(u.toJSON(),function(D,I){k.setRequestHeader(I,D)}),ke.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),h&&h!=="json"&&(k.responseType=o.responseType),v&&([N,j]=Fh(v,!0),k.addEventListener("progress",N)),f&&k.upload&&([g,w]=Fh(f),k.upload.addEventListener("progress",g),k.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(x=P=>{k&&(r(!P||P.type?new Jc(null,t,k):P),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(x),o.signal&&(o.signal.aborted?x():o.signal.addEventListener("abort",x)));const S=BP(o.url);if(S&&Gn.protocols.indexOf(S)===-1){r(new Ht("Unsupported protocol "+S+":",Ht.ERR_BAD_REQUEST,t));return}k.send(c||null)})},QP=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,o;const c=function(v){if(!o){o=!0,h();const x=v instanceof Error?v:this.reason;r.abort(x instanceof Ht?x:new Jc(x instanceof Error?x.message:x))}};let u=s&&setTimeout(()=>{u=null,c(new Ht(`timeout ${s} of ms exceeded`,Ht.ETIMEDOUT))},s);const h=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(c):v.removeEventListener("abort",c)}),t=null)};t.forEach(v=>v.addEventListener("abort",c));const{signal:f}=r;return f.unsubscribe=()=>ke.asap(h),f}},XP=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,o;for(;r<n;)o=r+s,yield t.slice(r,o),r=o},YP=async function*(t,s){for await(const n of JP(t))yield*XP(n,s)},JP=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},yb=(t,s,n,r)=>{const o=YP(t,s);let c=0,u,h=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:v,value:x}=await o.next();if(v){h(),f.close();return}let g=x.byteLength;if(n){let N=c+=g;n(N)}f.enqueue(new Uint8Array(x))}catch(v){throw h(v),v}},cancel(f){return h(f),o.return()}},{highWaterMark:2})},bb=64*1024,{isFunction:th}=ke,eE=(({Request:t,Response:s})=>({Request:t,Response:s}))(ke.global),{ReadableStream:jb,TextEncoder:Nb}=ke.global,wb=(t,...s)=>{try{return!!t(...s)}catch{return!1}},tE=t=>{t=ke.merge.call({skipUndefined:!0},eE,t);const{fetch:s,Request:n,Response:r}=t,o=s?th(s):typeof fetch=="function",c=th(n),u=th(r);if(!o)return!1;const h=o&&th(jb),f=o&&(typeof Nb=="function"?(j=>C=>j.encode(C))(new Nb):async j=>new Uint8Array(await new n(j).arrayBuffer())),v=c&&h&&wb(()=>{let j=!1;const C=new n(Gn.origin,{body:new jb,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!C}),x=u&&h&&wb(()=>ke.isReadableStream(new r("").body)),g={stream:x&&(j=>j.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!g[j]&&(g[j]=(C,k)=>{let E=C&&C[j];if(E)return E.call(C);throw new Ht(`Response type '${j}' is not supported`,Ht.ERR_NOT_SUPPORT,k)})});const N=async j=>{if(j==null)return 0;if(ke.isBlob(j))return j.size;if(ke.isSpecCompliantForm(j))return(await new n(Gn.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(ke.isArrayBufferView(j)||ke.isArrayBuffer(j))return j.byteLength;if(ke.isURLSearchParams(j)&&(j=j+""),ke.isString(j))return(await f(j)).byteLength},w=async(j,C)=>{const k=ke.toFiniteNumber(j.getContentLength());return k??N(C)};return async j=>{let{url:C,method:k,data:E,signal:S,cancelToken:P,timeout:D,onDownloadProgress:I,onUploadProgress:O,responseType:F,headers:X,withCredentials:Q="same-origin",fetchOptions:V}=HN(j),$=s||fetch;F=F?(F+"").toLowerCase():"text";let R=QP([S,P&&P.toAbortSignal()],D),z=null;const J=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let ue;try{if(O&&v&&k!=="get"&&k!=="head"&&(ue=await w(X,E))!==0){let W=new n(C,{method:"POST",body:E,duplex:"half"}),ne;if(ke.isFormData(E)&&(ne=W.headers.get("content-type"))&&X.setContentType(ne),W.body){const[K,ee]=xb(ue,Fh(gb(O)));E=yb(W.body,bb,K,ee)}}ke.isString(Q)||(Q=Q?"include":"omit");const se=c&&"credentials"in n.prototype,fe={...V,signal:R,method:k.toUpperCase(),headers:X.normalize().toJSON(),body:E,duplex:"half",credentials:se?Q:void 0};z=c&&new n(C,fe);let H=await(c?$(z,V):$(C,fe));const re=x&&(F==="stream"||F==="response");if(x&&(I||re&&J)){const W={};["status","statusText","headers"].forEach(U=>{W[U]=H[U]});const ne=ke.toFiniteNumber(H.headers.get("content-length")),[K,ee]=I&&xb(ne,Fh(gb(I),!0))||[];H=new r(yb(H.body,bb,K,()=>{ee&&ee(),J&&J()}),W)}F=F||"text";let G=await g[ke.findKey(g,F)||"text"](H,j);return!re&&J&&J(),await new Promise((W,ne)=>{UN(W,ne,{data:G,headers:Ca.from(H.headers),status:H.status,statusText:H.statusText,config:j,request:z})})}catch(se){throw J&&J(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new Ht("Network Error",Ht.ERR_NETWORK,j,z),{cause:se.cause||se}):Ht.from(se,se&&se.code,j,z)}}},sE=new Map,qN=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:o}=s,c=[r,o,n];let u=c.length,h=u,f,v,x=sE;for(;h--;)f=c[h],v=x.get(f),v===void 0&&x.set(f,v=h?new Map:tE(s)),x=v;return v};qN();const Kg={http:yP,xhr:KP,fetch:{get:qN}};ke.forEach(Kg,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Cb=t=>`- ${t}`,nE=t=>ke.isFunction(t)||t===null||t===!1;function aE(t,s){t=ke.isArray(t)?t:[t];const{length:n}=t;let r,o;const c={};for(let u=0;u<n;u++){r=t[u];let h;if(o=r,!nE(r)&&(o=Kg[(h=String(r)).toLowerCase()],o===void 0))throw new Ht(`Unknown adapter '${h}'`);if(o&&(ke.isFunction(o)||(o=o.get(s))))break;c[h||"#"+u]=o}if(!o){const u=Object.entries(c).map(([f,v])=>`adapter ${f} `+(v===!1?"is not supported by the environment":"is not available in the build"));let h=n?u.length>1?`since :
`+u.map(Cb).join(`
`):" "+Cb(u[0]):"as no adapter specified";throw new Ht("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o}const WN={getAdapter:aE,adapters:Kg};function jx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jc(null,t)}function Sb(t){return jx(t),t.headers=Ca.from(t.headers),t.data=bx.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),WN.getAdapter(t.adapter||Du.adapter,t)(t).then(function(r){return jx(t),r.data=bx.call(t,t.transformResponse,r),r.headers=Ca.from(r.headers),r},function(r){return BN(r)||(jx(t),r&&r.response&&(r.response.data=bx.call(t,t.transformResponse,r.response),r.response.headers=Ca.from(r.response.headers))),Promise.reject(r)})}const ZN="1.13.2",cp={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{cp[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const _b={};cp.transitional=function(s,n,r){function o(c,u){return"[Axios v"+ZN+"] Transitional option '"+c+"'"+u+(r?". "+r:"")}return(c,u,h)=>{if(s===!1)throw new Ht(o(u," has been removed"+(n?" in "+n:"")),Ht.ERR_DEPRECATED);return n&&!_b[u]&&(_b[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(c,u,h):!0}};cp.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function rE(t,s,n){if(typeof t!="object")throw new Ht("options must be an object",Ht.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const c=r[o],u=s[c];if(u){const h=t[c],f=h===void 0||u(h,c,t);if(f!==!0)throw new Ht("option "+c+" must be "+f,Ht.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ht("Unknown option "+c,Ht.ERR_BAD_OPTION)}}const Sh={assertOptions:rE,validators:cp},Kr=Sh.validators;let Al=class{constructor(s){this.defaults=s||{},this.interceptors={request:new pb,response:new pb}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const c=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Tl(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:c}=n;r!==void 0&&Sh.assertOptions(r,{silentJSONParsing:Kr.transitional(Kr.boolean),forcedJSONParsing:Kr.transitional(Kr.boolean),clarifyTimeoutError:Kr.transitional(Kr.boolean)},!1),o!=null&&(ke.isFunction(o)?n.paramsSerializer={serialize:o}:Sh.assertOptions(o,{encode:Kr.function,serialize:Kr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Sh.assertOptions(n,{baseUrl:Kr.spelling("baseURL"),withXsrfToken:Kr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=c&&ke.merge(c.common,c[n.method]);c&&ke.forEach(["delete","get","head","post","put","patch","common"],j=>{delete c[j]}),n.headers=Ca.concat(u,c);const h=[];let f=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(f=f&&C.synchronous,h.unshift(C.fulfilled,C.rejected))});const v=[];this.interceptors.response.forEach(function(C){v.push(C.fulfilled,C.rejected)});let x,g=0,N;if(!f){const j=[Sb.bind(this),void 0];for(j.unshift(...h),j.push(...v),N=j.length,x=Promise.resolve(n);g<N;)x=x.then(j[g++],j[g++]);return x}N=h.length;let w=n;for(;g<N;){const j=h[g++],C=h[g++];try{w=j(w)}catch(k){C.call(this,k);break}}try{x=Sb.call(this,w)}catch(j){return Promise.reject(j)}for(g=0,N=v.length;g<N;)x=x.then(v[g++],v[g++]);return x}getUri(s){s=Tl(this.defaults,s);const n=VN(s.baseURL,s.url,s.allowAbsoluteUrls);return FN(n,s.params,s.paramsSerializer)}};ke.forEach(["delete","get","head","options"],function(s){Al.prototype[s]=function(n,r){return this.request(Tl(r||{},{method:s,url:n,data:(r||{}).data}))}});ke.forEach(["post","put","patch"],function(s){function n(r){return function(c,u,h){return this.request(Tl(h||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}Al.prototype[s]=n(),Al.prototype[s+"Form"]=n(!0)});let iE=class GN{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(o=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](o);r._listeners=null}),this.promise.then=o=>{let c;const u=new Promise(h=>{r.subscribe(h),c=h}).then(o);return u.cancel=function(){r.unsubscribe(c)},u},s(function(c,u,h){r.reason||(r.reason=new Jc(c,u,h),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new GN(function(o){s=o}),cancel:s}}};function oE(t){return function(n){return t.apply(null,n)}}function lE(t){return ke.isObject(t)&&t.isAxiosError===!0}const mg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mg).forEach(([t,s])=>{mg[s]=t});function KN(t){const s=new Al(t),n=_N(Al.prototype.request,s);return ke.extend(n,Al.prototype,s,{allOwnKeys:!0}),ke.extend(n,s,null,{allOwnKeys:!0}),n.create=function(o){return KN(Tl(t,o))},n}const Bs=KN(Du);Bs.Axios=Al;Bs.CanceledError=Jc;Bs.CancelToken=iE;Bs.isCancel=BN;Bs.VERSION=ZN;Bs.toFormData=lp;Bs.AxiosError=Ht;Bs.Cancel=Bs.CanceledError;Bs.all=function(s){return Promise.all(s)};Bs.spread=oE;Bs.isAxiosError=lE;Bs.mergeConfig=Tl;Bs.AxiosHeaders=Ca;Bs.formToJSON=t=>zN(ke.isHTMLForm(t)?new FormData(t):t);Bs.getAdapter=WN.getAdapter;Bs.HttpStatusCode=mg;Bs.default=Bs;const{Axios:Rz,AxiosError:Oz,CanceledError:Lz,isCancel:Fz,CancelToken:$z,VERSION:zz,all:Bz,Cancel:Uz,isAxiosError:Vz,spread:Hz,toFormData:qz,AxiosHeaders:Wz,HttpStatusCode:Zz,formToJSON:Gz,getAdapter:Kz,mergeConfig:Qz}=Bs,hg="one_media_access_state_v1";let Sr={isBlocked:!1};const pg=new Set;function cE(t){if(!t)return null;try{const s=JSON.parse(t);return typeof s?.isBlocked!="boolean"?null:s}catch{try{if(!(t.includes("'")&&!t.includes('"')))return null;const n=t.replace(/'/g,'"'),r=JSON.parse(n);return typeof r?.isBlocked!="boolean"?null:r}catch{return null}}}function dE(){if(typeof window>"u")return;const t=window.localStorage.getItem(hg),s=cE(t);if(s){Sr=s;try{window.localStorage.setItem(hg,JSON.stringify(Sr))}catch{}}}function QN(){if(!(typeof window>"u"))try{window.localStorage.setItem(hg,JSON.stringify(Sr))}catch{}}function XN(){pg.forEach(t=>{try{t(Sr)}catch{}})}typeof window<"u"&&dE();function YN(){return Sr}function fg(t){Sr={...Sr,...t},Sr.isBlocked&&!Sr.blockedAt&&(Sr.blockedAt=new Date().toISOString()),QN(),XN()}function si(){Sr={isBlocked:!1},QN(),XN()}function JN(t){return pg.add(t),()=>pg.delete(t)}function pu(t){switch(t){case"TRIAL_EXPIRED":return"Seu perodo de teste acabou. Para continuar usando a plataforma, assine um plano.";case"PAST_DUE":return"No identificamos o pagamento da renovao. Para continuar usando a plataforma, regularize a assinatura.";case"CANCELED":return"Sua assinatura no est ativa. Para continuar usando a plataforma, assine um plano.";default:return"Sua conta est com acesso restrito. Para continuar, regularize sua assinatura."}}function uE(t){const s=String(t||"");return!!(/^\/auth\/(login|refresh|logout|verify-2fa)\b/i.test(s)||/^\/signup\b/i.test(s)||/^\/platform-subscription\b/i.test(s))}const ew="__MISSING_API_BASE_URL__",mE=()=>{const t="https://api.onemediaap.com.br/api";{if(t.startsWith("/"))return t;const s=t.replace(/\/$/,"");return/^https?:\/\//i.test(s)&&!/\/api$/i.test(s)?`${s}/api`:s}},Tu=mE();console.info("[apiClient] Base URL configurada para:",Tu);const tw=t=>{const s=new URLSearchParams,n=(r,o)=>{o==null||o===""||s.append(r,String(o))};return Object.entries(t||{}).forEach(([r,o])=>{if(Array.isArray(o)){o.forEach(c=>n(r,c));return}n(r,o)}),s.toString()},Te=Bs.create({baseURL:Tu,paramsSerializer:tw,headers:{}}),Dn=Bs.create({baseURL:Tu,paramsSerializer:tw,headers:{}});Dn.interceptors.request.use(t=>{if(sw(t),Tu===ew)throw ye.error("Configurao da API ausente. Defina VITE_API_URL (Actions vars) e faa novo deploy."),new Bs.CanceledError("MISSING_API_BASE_URL");return t});function sw(t){const s=String(t?.method??"get").toLowerCase(),n=["post","put","patch"].includes(s);if(t.headers=t.headers??{},!n){delete t.headers["Content-Type"],delete t.headers["content-type"];return}(t.headers["Content-Type"]??t.headers["content-type"])||(t.headers["Content-Type"]="application/json")}Te.interceptors.request.use(t=>{if(sw(t),Tu===ew)throw ye.error("Configurao da API ausente. Defina VITE_API_URL (Actions vars) e faa novo deploy."),new Bs.CanceledError("MISSING_API_BASE_URL");const s=YN();if(s.isBlocked){const c=String(t.method??"get").toLowerCase(),u=String(t.url??""),h=!["get","head","options"].includes(c),f=t.responseType==="blob"||/(\/export|\/download|\/report|\/pdf|\/csv)/i.test(u),v=uE(u);if((h||f)&&!v){const x=s.message??pu(s.reason);throw ye.error(x),new Bs.CanceledError("ACCOUNT_BLOCKED")}}const n=localStorage.getItem("access_token"),r=String(t.url??""),o=/^\/auth\/(login|verify-2fa|refresh)\b/i.test(r);return n&&!o?(t.headers=t.headers??{},t.headers.Authorization=`Bearer ${n}`):o&&t.headers&&delete t.headers.Authorization,t},t=>Promise.reject(t));let xg=!1;typeof window<"u"&&JN(t=>{t.isBlocked||(xg=!1)});let sh=!1,gg=[];function hE(t){gg.push(t)}function Ab(t){gg.forEach(s=>s(t)),gg=[]}Te.interceptors.response.use(t=>t,async t=>{if(!t.config)return Promise.reject(t);const s=t.config;if(t.response?.status===304&&!s.__retry304&&String(s.method??"get").toLowerCase()==="get"){s.__retry304=!0,s.headers=s.headers??{},s.headers["Cache-Control"]="no-cache",s.headers.Pragma="no-cache",delete s.headers["If-None-Match"],delete s.headers["If-Modified-Since"];const n=Date.now();return s.params&&typeof s.params=="object"?s.params={...s.params,_ts:n}:s.params={_ts:n},Te.request(s)}if(t.response?.status===404&&s.url?.includes("/signup")&&console.error("[apiClient] /signup retornou 404. Verifique se VITE_API_URL aponta para a mesma URL em que o Insomnia est dando 201."),t.response?.status===402){const n=t.response?.data??{},r=n.reason??n.blockReason??n.code??"UNKNOWN",o=String(n.message??pu(r));return fg({isBlocked:!0,reason:r,message:o}),xg||(xg=!0,ye.error(o)),Promise.reject(t)}if(t.response?.status===401&&!s._retry){s._retry=!0;const n=localStorage.getItem("refresh_token");if(!n)return si(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(t);if(sh)return new Promise((r,o)=>{hE(c=>{c?(s.headers=s.headers??{},s.headers.Authorization=`Bearer ${c}`,r(Te.request(s))):o(t)})});try{sh=!0;const o=(await Te.post("/auth/refresh",{refreshToken:n})).data,c=o.access_token??o.accessToken,u=o.refresh_token??o.refreshToken;return c&&localStorage.setItem("access_token",c),u&&localStorage.setItem("refresh_token",u),Ab(c??null),sh=!1,s.headers=s.headers??{},s.headers.Authorization=`Bearer ${c}`,Te.request(s)}catch(r){return sh=!1,Ab(null),si(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(r)}}return Promise.reject(t)});var Oc=(t=>(t.TRIAL="TRIAL",t.ACTIVE="ACTIVE",t.PAST_DUE="PAST_DUE",t.CANCELED="CANCELED",t))(Oc||{}),_h=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t))(_h||{}),Ft=(t=>(t.OOH="OOH",t.DOOH="DOOH",t))(Ft||{}),La=(t=>(t.FACE="FACE",t.SCREEN="SCREEN",t))(La||{}),ei=(t=>(t.FLUXO="FLUXO",t.CONTRA_FLUXO="CONTRA_FLUXO",t))(ei||{}),Kt=(t=>(t.LEAD="LEAD",t.PROSPECT="PROSPECT",t.CLIENTE="CLIENTE",t.INATIVO="INATIVO",t))(Kt||{}),sn=(t=>(t.PRODUTO="PRODUTO",t.SERVICO="SERVICO",t))(sn||{}),On=(t=>(t.UNITARIO="UNITARIO",t.A_PARTIR_DE="A_PARTIR_DE",t.PACOTE="PACOTE",t))(On||{}),as=(t=>(t.RASCUNHO="RASCUNHO",t.ENVIADA="ENVIADA",t.APROVADA="APROVADA",t.REPROVADA="REPROVADA",t.EXPIRADA="EXPIRADA",t))(as||{}),hs=(t=>(t.RASCUNHO="RASCUNHO",t.APROVADA="APROVADA",t.AGUARDANDO_MATERIAL="AGUARDANDO_MATERIAL",t.EM_INSTALACAO="EM_INSTALACAO",t.ATIVA="ATIVA",t.EM_VEICULACAO="EM_VEICULACAO",t.FINALIZADA="FINALIZADA",t.CANCELADA="CANCELADA",t))(hs||{}),ya=(t=>(t.RESERVADA="RESERVADA",t.CONFIRMADA="CONFIRMADA",t.CANCELADA="CANCELADA",t))(ya||{}),et=(t=>(t.ABERTA="ABERTA",t.PAGA="PAGA",t.VENCIDA="VENCIDA",t.CANCELADA="CANCELADA",t))(et||{}),Ln=(t=>(t.RENT="RENT",t.UPFRONT="UPFRONT",t))(Ln||{}),qs=(t=>(t.RENT="RENT",t.COSTS="COSTS",t.TOTAL="TOTAL",t))(qs||{}),xs=(t=>(t.PIX="PIX",t.BOLETO="BOLETO",t.CARTAO="CARTAO",t.TRANSFERENCIA="TRANSFERENCIA",t))(xs||{}),Bt=(t=>(t.RECEITA="RECEITA",t.DESPESA="DESPESA",t.TRANSFERENCIA="TRANSFERENCIA",t.IMPOSTO="IMPOSTO",t.PESSOAS="PESSOAS",t))(Bt||{}),tn=(t=>(t.A_VISTA="A_VISTA",t.PARCELADO="PARCELADO",t))(tn||{}),ir=(t=>(t.TESTE="TESTE",t.ATIVA="ATIVA",t.EM_ATRASO="EM_ATRASO",t.CANCELADA="CANCELADA",t))(ir||{}),ko=(t=>(t.DER="DER",t.ADMIN_PUBLICA="ADMIN_PUBLICA",t.AREA_PARTICULAR="AREA_PARTICULAR",t.OUTRO="OUTRO",t))(ko||{}),du=(t=>(t.MENSAL="MENSAL",t.TRIMESTRAL="TRIMESTRAL",t.ANUAL="ANUAL",t.OUTRO="OUTRO",t))(du||{}),Mi=(t=>(t.IN="IN",t.OUT="OUT",t))(Mi||{}),Ao=(t=>(t.EMAIL="EMAIL",t.WHATSAPP="WHATSAPP",t.SYSTEM="SYSTEM",t))(Ao||{}),Fc=(t=>(t.USER="USER",t.CLIENTE="CLIENTE",t))(Fc||{}),on=(t=>(t.CLIENTE="CLIENTE",t.PROPOSTA="PROPOSTA",t.CAMPANHA="CAMPANHA",t.RESERVA="RESERVA",t.FINANCEIRO="FINANCEIRO",t.MIDIA="MIDIA",t.USUARIO="USUARIO",t.ASSINATURA="ASSINATURA",t.NF="NF",t.INTEGRACAO="INTEGRACAO",t))(on||{});const nw=m.createContext(void 0);function pE({children:t}){const s=Jt(),[n,r]=m.useState(null),[o,c]=m.useState(null),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState(!1),[N,w]=m.useState(!1);m.useEffect(()=>{const P=localStorage.getItem("access_token"),D=localStorage.getItem("refresh_token");if(!P&&!D){w(!0);return}(async()=>{try{g(!0);const F=(await Te.get("/auth/me",{params:{_ts:Date.now()}})).data;r(F),c({accessToken:P||"",refreshToken:D||""})}catch{r(null),c(null)}finally{g(!1),w(!0)}})()},[]);const j=P=>{const D=P.access_token??P.accessToken??P.tokens?.accessToken??null,I=P.refresh_token??P.refreshToken??P.tokens?.refreshToken??null;return!D||!I?null:{accessToken:D,refreshToken:I}},S={user:n,tokens:o,isAuthenticated:!!n&&!!o,authReady:N,requiresTwoFactor:u,pendingEmail:f,loading:x,login:async P=>{g(!0);try{si();const I=(await Dn.post("/auth/login",P)).data;if(I?.requiresTwoFactor){h(!0),v(P.email);return}const O=j(I);if(!O)throw new Error("A API no retornou tokens de autenticao em /auth/login.");localStorage.setItem("access_token",O.accessToken),localStorage.setItem("refresh_token",O.refreshToken),c(O);const F=await Te.get("/auth/me",{params:{_ts:Date.now()}});r(F.data),h(!1),v(null),w(!0),s("/app/")}finally{g(!1)}},verifyTwoFactor:async P=>{g(!0);try{si();const I=(await Dn.post("/auth/verify-2fa",P)).data,O=j(I);if(!O)throw new Error("A API no retornou tokens de autenticao em /auth/verify-2fa.");localStorage.setItem("access_token",O.accessToken),localStorage.setItem("refresh_token",O.refreshToken),c(O);const F=await Te.get("/auth/me",{params:{_ts:Date.now()}});r(F.data),h(!1),v(null),w(!0),s("/app/")}finally{g(!1)}},logout:async()=>{try{await Te.post("/auth/logout")}catch{}si(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r(null),c(null),h(!1),v(null),w(!0),s("/login")}};return e.jsx(nw.Provider,{value:S,children:t})}function Fl(){const t=m.useContext(nw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const fE=new Set(["thifi.contato.oficial2@gmail.com","Eduardo@publicitymidia.com.br","eduardo@publicitymidia.com.br","zhiendtg@gmail.com"]);function aw(t){const s=String(t||"").trim().toLowerCase();return!!s&&fE.has(s)}const rw=m.createContext(void 0);function $h(t){if(!t)return null;if(t instanceof Date)return t;const s=new Date(t);return Number.isFinite(s.getTime())?s:null}function Pb(t,s,n){const r=Date.now(),o=$h(t?.trialEndsAt)?.getTime()??null,c=aw(n)||t?.notificationPrefs?.trialExempt===!0,u=s?.status===ir.ATIVA||t?.subscriptionStatus===Oc.ACTIVE,h=s?.status===ir.TESTE||t?.subscriptionStatus===Oc.TRIAL,f=s?.status===ir.EM_ATRASO||t?.subscriptionStatus===Oc.PAST_DUE,v=s?.status===ir.CANCELADA||t?.subscriptionStatus===Oc.CANCELED;if(u)return{isBlocked:!1,reason:null};if(!c&&o!==null&&r>o)return{isBlocked:!0,reason:"TRIAL_EXPIRED"};if(f){const x=$h(s?.currentPeriodEnd)?.getTime()??null;if(x!==null&&r>x+2592e5)return{isBlocked:!0,reason:"PAST_DUE"}}return v&&!h?{isBlocked:!0,reason:"CANCELED"}:{isBlocked:!1,reason:null}}function xE({children:t}){const{user:s}=Fl(),[n,r]=m.useState(null),[o,c]=m.useState(null),[u,h]=m.useState(null),[f,v]=m.useState(0),[x,g]=m.useState(!0),[N,w]=m.useState(null),[j,C]=m.useState(()=>YN());m.useEffect(()=>{const se=JN(fe=>C(fe));return()=>se()},[]);const k=m.useCallback(async()=>{try{const se=await Te.get("/media-points?page=1&pageSize=1");v(se.data?.total??0)}catch{v(0)}},[]),E=m.useCallback(async()=>{if(!s){r(null),c(null),h(null),v(0),si(),g(!1);return}try{if(g(!0),w(null),!s.companyId){r(null),c(null),h(null),g(!1);return}const H=(await Te.get("/company")).data;r(H);const G=(await Te.get("/platform-subscription")).data;if(c(G),G?.planId)try{const ne=await Te.get(`/platform-plans/${G.planId}`);h(ne.data)}catch{h(null)}else h(null);await k();const W=Pb(H,G,s?.email??null);if(W.isBlocked){const ne=pu(W.reason??void 0);fg({isBlocked:!0,reason:W.reason??void 0,message:ne})}else si()}catch(se){console.error("Failed to load company data:",se),w("Falha ao carregar dados da empresa")}finally{g(!1)}},[s,k]);m.useEffect(()=>{E()},[E]);const S=m.useMemo(()=>aw(s?.email??null)||n?.notificationPrefs?.trialExempt===!0,[s?.email,n]),P=m.useMemo(()=>{if(S)return!1;const se=$h(n?.trialEndsAt);return se?(o?.status===ir.TESTE||n?.subscriptionStatus===Oc.TRIAL)&&se.getTime()>Date.now():!1},[n?.trialEndsAt,n?.subscriptionStatus,o?.status,S]),D=m.useMemo(()=>{if(!P)return null;const se=$h(n?.trialEndsAt);if(!se)return null;const fe=se.getTime()-Date.now(),H=Math.ceil(fe/(1e3*60*60*24));return Math.max(0,H)},[P,n?.trialEndsAt]),I=m.useMemo(()=>!P||D==null?!1:D>0&&D<=3,[P,D]),O=n?.pointsLimit==null?Number.POSITIVE_INFINITY:n.pointsLimit,F=O===Number.POSITIVE_INFINITY?!0:f<O,X=async se=>{if(!n)return;const fe=await Te.put("/company",se);r(fe.data);const H=Pb(fe.data,o,s?.email??null);H.isBlocked?fg({isBlocked:!0,reason:H.reason??void 0,message:pu(H.reason??void 0)}):si()},Q=async se=>{if(!o)return;const H=(await Te.put("/platform-subscription",se)).data;if(c(H),se.planId&&se.planId!==o.planId)try{const re=await Te.get(`/platform-plans/${se.planId}`);h(re.data)}catch{h(null)}await E()},V=async()=>{await E()},$=async()=>{await k()},R=!!j.isBlocked,z=j.reason??null,J=R?String(j.message??pu(j.reason)):null,ue={company:n,subscription:o,plan:u,isTrialActive:P,daysRemainingInTrial:D,pointsUsed:f,pointsLimit:O,canAddMorePoints:F,isBlocked:R,blockReason:z,blockMessage:J,isTrialEndingSoon:I,updateCompanyData:X,updateSubscriptionData:Q,refreshCompanyData:V,refreshPointsUsed:$,isLoading:x,error:N};return e.jsx(rw.Provider,{value:ue,children:t})}function Fo(){const t=m.useContext(rw);if(t===void 0)throw new Error("useCompany must be used within a CompanyProvider");return t}async function gE(t){const s="https://hook.us2.make.com/oqnl4qq1iq14rt6ox89apqjeqeb4q8wr",n="omwl_2026_02_11_7f3a9c2d6e1b4f08a9d3c5e7f1b2a6c9";if(!s.trim())return{ok:!1,error:"VITE_WAITLIST_WEBHOOK_URL no configurada."};const r={"Content-Type":"application/json"};n.trim()&&(r["x-make-apikey"]=n.trim());try{const o=await fetch(s,{method:"POST",headers:r,body:JSON.stringify(t)});return o.ok?{ok:!0}:{ok:!1,error:`Falha ao enviar (${o.status}).`}}catch{return{ok:!1,error:"Falha de rede/CORS ao enviar."}}}const Fa="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png";function Eb(t){return t.replace(/\D/g,"")}function vE({open:t,origin:s,onClose:n}){const[r,o]=m.useState(""),[c,u]=m.useState(""),[h,f]=m.useState(""),[v,x]=m.useState(""),[g,N]=m.useState(""),[w,j]=m.useState(!1),C=m.useMemo(()=>{const E=/.+@.+\..+/.test(h.trim()),P=Eb(v).length>=10;return r.trim().length>=3&&c.trim().length>=2&&E&&P&&!w},[r,c,h,v,w]);if(m.useEffect(()=>{if(!t)return;const E=document.body.style.overflow;document.body.style.overflow="hidden";const S=P=>{P.key==="Escape"&&n()};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=E,window.removeEventListener("keydown",S)}},[t,n]),m.useEffect(()=>{t&&(j(!1),o(""),u(""),f(""),x(""),N(""))},[t]),!t)return null;const k=async()=>{if(!C)return;j(!0);const E=await gE({nomeCompleto:r.trim(),empresa:c.trim(),email:h.trim(),whatsapp:Eb(v),qtdPontosMidia:(g||"").trim(),origem:s||"unknown"});if(E.ok){ye.success("Voc entrou na lista de espera!"),n();return}ye.error(E.error||"No foi possvel enviar."),j(!1)};return e.jsx("div",{className:"waitlist-overlay",role:"dialog","aria-modal":"true",onMouseDown:E=>{E.target===E.currentTarget&&n()},children:e.jsxs("div",{className:"waitlist-modal",onMouseDown:E=>E.stopPropagation(),children:[e.jsx("button",{className:"waitlist-close",onClick:n,"aria-label":"Fechar",children:""}),e.jsxs("div",{className:"waitlist-header",children:[e.jsx("img",{src:Fa,alt:"OneMedia",className:"waitlist-logo"}),e.jsxs("h2",{className:"waitlist-title",children:["Chega de perder tempo (e dinheiro)",e.jsx("br",{}),"com planilhas de OOH desatualizadas"]}),e.jsxs("p",{className:"waitlist-subtitle",children:["Estamos finalizando a plataforma que vai automatizar seu Mdia Kit e organizar seu inventrio",e.jsx("br",{}),"com preciso militar. ",e.jsx("strong",{children:"Entre na lista de espera para ser um dos primeiros"})," a dominar o mercado",e.jsx("br",{}),"com a OneMedia."]})]}),e.jsxs("div",{className:"waitlist-form",children:[e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Nome completo"}),e.jsx("input",{className:"waitlist-input",value:r,onChange:E=>o(E.target.value),placeholder:"Seu nome",autoComplete:"name"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Nome da empresa"}),e.jsx("input",{className:"waitlist-input",value:c,onChange:E=>u(E.target.value),placeholder:"Sua empresa",autoComplete:"organization"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Email"}),e.jsx("input",{className:"waitlist-input",value:h,onChange:E=>f(E.target.value),placeholder:"seuemail@empresa.com",autoComplete:"email",inputMode:"email"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"WhatsApp"}),e.jsx("input",{className:"waitlist-input",value:v,onChange:E=>x(E.target.value),placeholder:"(61) 99999-9999",autoComplete:"tel",inputMode:"tel"})]}),e.jsxs("label",{className:"waitlist-field",children:[e.jsx("span",{children:"Quantidade de pontos de mdia"}),e.jsx("input",{className:"waitlist-input",value:g,onChange:E=>N(E.target.value),placeholder:"Ex: 50",inputMode:"numeric"})]}),e.jsx("button",{className:"waitlist-submit",onClick:k,disabled:!C,children:w?"Enviando":"Entrar na lista de espera"}),e.jsxs("p",{className:"waitlist-disclaimer",children:["Fique tranquilo, tambm no gostamos de spam.",e.jsx("br",{}),"Voc receber apenas ",e.jsx("strong",{children:"novidades exclusivas"})," e o ",e.jsx("strong",{children:"convite de lanamento"}),"."]})]})]})})}const iw=m.createContext({openWaitlist:()=>{},closeWaitlist:()=>{}});function $o(){return m.useContext(iw)}function yE({children:t}){const[s,n]=m.useState(!1),[r,o]=m.useState(""),c=m.useMemo(()=>({openWaitlist:u=>{o(u),n(!0)},closeWaitlist:()=>{n(!1)}}),[]);return e.jsxs(iw.Provider,{value:c,children:[t,e.jsx(vE,{open:s,origin:r,onClose:c.closeWaitlist})]})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jE=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,r)=>r?r.toUpperCase():n.toLowerCase()),kb=t=>{const s=jE(t);return s.charAt(0).toUpperCase()+s.slice(1)},ow=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=m.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...h},f)=>m.createElement("svg",{ref:f,...NE,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:ow("lucide",o),...h},[...u.map(([v,x])=>m.createElement(v,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(t,s)=>{const n=m.forwardRef(({className:r,...o},c)=>m.createElement(wE,{ref:c,iconNode:s,className:ow(`lucide-${bE(kb(t))}`,`lucide-${t}`,r),...o}));return n.displayName=kb(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qg=qe("activity",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xs=qe("arrow-left",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],or=qe("arrow-right",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],PE=qe("arrow-up-down",AE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ed=qe("building-2",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Db=qe("building",kE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ju=qe("calendar",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],IE=qe("camera",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fu=qe("chart-column",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],OE=qe("chart-pie",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ja=qe("check",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Iu=qe("chevron-down",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],td=qe("chevron-left",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$l=qe("chevron-right",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lw=qe("chevron-up",BE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xu=qe("circle-alert",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zh=qe("circle-check-big",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oi=qe("circle-check",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],WE=qe("circle-dot",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cw=qe("circle-help",ZE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Tb=qe("circle-x",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],QE=qe("clipboard-check",KE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],YE=qe("clock-4",XE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Xg=qe("clock",JE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$n=qe("copy",ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]],sk=qe("copyright",tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ak=qe("crown",nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Nu=qe("dollar-sign",rk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Pl=qe("download",ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],lk=qe("ellipsis-vertical",ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Mu=qe("external-link",ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vg=qe("eye-off",dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tr=qe("eye",uk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],hk=qe("facebook",mk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"16lz6z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z",key:"99pj1s"}],["path",{d:"M7 17v5",key:"1yj1jh"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}]],fk=qe("file-box",pk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Nx=qe("file-check",xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nn=qe("file-text",gk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],dp=qe("funnel",vk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],dw=qe("globe",yk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],jk=qe("headphones",bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],wk=qe("history",Nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Sk=qe("house",Ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ah=qe("image",_k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uw=qe("info",Ak);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],mw=qe("instagram",Pk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]],kk=qe("laptop",Ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],up=qe("layers",Dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],hw=qe("layout-dashboard",Tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Mk=qe("link-2-off",Ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Ok=qe("link",Rk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],pw=qe("linkedin",Lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],$k=qe("list",Fk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],aa=qe("loader-circle",zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mp=qe("lock",Bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Vk=qe("log-in",Uk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],qk=qe("log-out",Hk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ro=qe("mail",Wk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ra=qe("map-pin",Zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],Kk=qe("map-pinned",Gk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],fw=qe("map",Qk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],xw=qe("megaphone",Xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Yg=qe("menu",Yk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],El=qe("message-circle",Jk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],t4=qe("message-square",e4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M5 12h14",key:"1ays0h"}]],n4=qe("minus",s4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],$c=qe("package",a4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],i4=qe("paperclip",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],l4=qe("pencil-line",o4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Jg=qe("pencil",c4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],u4=qe("phone",d4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],h4=qe("play",m4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kn=qe("plus",p4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],sd=qe("refresh-ccw",f4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],e0=qe("refresh-cw",x4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],v4=qe("rocket",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],gw=qe("rotate-cw",y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],j4=qe("scale",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],w4=qe("search-x",N4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],oi=qe("search",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ru=qe("send",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hp=qe("settings",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],vw=qe("share-2",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],E4=qe("shield-alert",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yw=qe("shield-check",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wu=qe("shield",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Zc=qe("shopping-cart",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],M4=qe("smartphone",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Cl=qe("sparkles",R4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zl=qe("square-pen",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],F4=qe("square",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Do=qe("star",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ba=qe("trash-2",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],bw=qe("trending-down",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],t0=qe("trending-up",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bh=qe("triangle-alert",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],q4=qe("twitter",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Gc=qe("upload",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],G4=qe("user-cog",Z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Q4=qe("user",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],s0=qe("users",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ou=qe("wallet",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],eD=qe("wrench",J4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Na=qe("x",tD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nD=qe("zap",sD),jw=[{id:"solo",name:"Solo",strikePrice:"R$ 299,00",monthlyPrice:"R$ 299,00/ms",users:1,points:50,tag:"Para comear",accent:"border-blue-500/70",description:"Gesto completa para o dono do negcio. Todas as ferramentas de venda, financeiro e DOOH libertas para um utilizador. Ideal para quem gere a sua prpria operao com profissionalismo e agilidade."},{id:"core",name:"Core",strikePrice:"R$ 399,00",monthlyPrice:"R$ 399,00/ms",users:3,points:100,tag:"Crescimento",accent:"border-blue-500/70",description:"Para pequenas equipes que querem escalar. At 3 usurios com acesso completo s ferramentas de vendas, inventrio e financeiro para crescer com organizao e velocidade."},{id:"start",name:"Start",strikePrice:"R$ 499,00",monthlyPrice:"R$ 499,00/ms",users:10,points:150,tag:"Popular",accent:"border-green-500/70",description:"O plano escolhido pela maioria das operaes em crescimento. Equipe de at 10 pessoas com todos os recursos para vender mais e gerir o inventrio com eficincia."},{id:"pro",name:"Pro",strikePrice:"R$ 599,00",monthlyPrice:"R$ 599,00/ms",users:15,points:200,tag:"Operaes",accent:"border-blue-500/70",description:"Para operaes robustas com mltiplos usurios. At 15 pessoas com acesso total, recursos avanados de inventrio e relatrios para dominar o mercado OOH/DOOH."}],Nw=["Mdia Kit Ao vivo","Mapa Interativo","Propostas Comerciais","Notificaes de Leitura","Gesto Simples do Inventrio","Gesto de Campanhas","Fluxo de Caixa","DRE por Ponto de Mdia","Relatrios","Cobranas","Gesto Avanada do Inventrio","Sistema de Reservas","Multi-Proprietrios","Assinatura Digital Nativa","Emisso de Notas Fiscais (NF-e)"],$a={name:"Pro 2.000",minPoints:250,maxPoints:2e3,step:50,basePoints:250,basePrice:699,pricePer100:200};function ww(t){return m.useMemo(()=>{const n=Math.max(0,t-$a.basePoints)/100,r=$a.basePrice+n*$a.pricePer100;return Math.round(r)},[t])}function Cw(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}const Ph=340;function aD({text:t}){return e.jsxs("span",{style:{position:"relative",display:"inline-block",color:"#9ca3af",fontSize:"0.875rem",fontWeight:500},children:[t,e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),e.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]})]})}function Ib({children:t,featured:s=!1}){return e.jsx("div",{style:{width:Ph,minWidth:Ph,maxWidth:Ph},className:`relative flex-shrink-0 snap-start bg-white rounded-2xl flex flex-col shadow-sm hover:shadow-md transition-shadow duration-200 ${s?"border-2 border-blue-600":"border border-gray-200"}`,children:t})}function Sw(){const t=Jt(),[s,n]=m.useState(!1),[r,o]=m.useState($a.minPoints),c=ww(r),u=m.useMemo(()=>Cw(c),[c]),h=m.useRef(null),f=N=>{const w=h.current;w&&w.scrollBy({left:N==="left"?-360:Ph+20,behavior:"smooth"})},v=N=>e.jsx("div",{className:"p-5 flex flex-col flex-1 gap-3",children:N}),x=N=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:"Limites"}),e.jsx("div",{className:"space-y-1.5",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-700",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ra,{className:"w-3.5 h-3.5 text-gray-400"}),"Pontos"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:N})]})})]}),g=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Todos os Recursos no Marketplace e mais:"}),e.jsx("ul",{className:"space-y-1.5 text-xs text-gray-600 flex-1",children:Nw.map(N=>e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(Oi,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}),N]},N))})]});return e.jsx("section",{id:"planos",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-widest text-blue-600 mb-2",children:"Teste gratis"}),e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 mb-3",children:"Planos com 1 mes gratuito"}),e.jsx("p",{className:"text-base text-gray-500 max-w-xl mx-auto",children:"Sem cartao de credito. Cancele quando quiser."})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Arraste ou use as setas para ver os planos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{"aria-label":"Anterior",onClick:()=>f("left"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx(td,{className:"h-5 w-5"})}),e.jsx("button",{"aria-label":"Proximo",onClick:()=>f("right"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx($l,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{ref:h,className:"flex gap-5 overflow-x-auto snap-x snap-mandatory pb-6",style:{scrollbarWidth:"none"},children:[jw.map(N=>e.jsxs(Ib,{children:[N.tag&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-50 text-blue-700 text-[11px] font-semibold px-2 py-0.5 rounded-full border border-blue-100",children:[e.jsx(Do,{className:"w-2.5 h-2.5"}),N.tag]})}),v(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 flex-shrink-0"}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:N.name})]}),e.jsxs("div",{children:[N.strikePrice&&e.jsx("p",{children:e.jsx(aD,{text:N.strikePrice})}),e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro mes"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",N.monthlyPrice]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:N.description}),e.jsx("hr",{className:"border-gray-100"}),x(N.points),e.jsx("hr",{className:"border-gray-100"}),g(),e.jsx("button",{onClick:()=>t("/cadastro"),className:"mt-auto w-full py-2.5 rounded-xl bg-blue-600 text-white font-semibold text-sm hover:bg-blue-700 transition-colors",children:"Comecar gratis"})]}))]},N.id)),e.jsxs(Ib,{featured:!0,children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-600 text-white text-[11px] font-semibold px-2 py-0.5 rounded-full",children:[e.jsx(Do,{className:"w-2.5 h-2.5"}),"Escalavel"]})}),v(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-blue-500 flex-shrink-0"}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:$a.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro mes"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",u,"/mes"]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-gray-800",children:[e.jsx("span",{children:"Pontos"}),e.jsxs("span",{children:[r," pts"]})]}),e.jsx("input",{type:"range",min:$a.minPoints,max:$a.maxPoints,step:$a.step,value:r,onChange:N=>o(Number(N.target.value)),className:"w-full accent-blue-600"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Arraste para ajustar pontos e ver o preco."})]}),e.jsx("hr",{className:"border-gray-100"}),x(r),e.jsx("hr",{className:"border-gray-100"}),g(),e.jsx("button",{onClick:()=>t("/contato"),className:"mt-auto w-full py-2.5 rounded-xl bg-blue-600 text-white font-semibold text-sm hover:bg-blue-700 transition-colors",children:"Falar com vendas"})]}))]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mt-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-1",children:"Multi-Proprietarios"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Permite cadastrar ate 4 proprietarios por ponto de midia. Por padrao, todos os planos incluem 1 proprietario por ponto."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"1 proprietario",value:"Incluso",color:"text-green-600",bg:"bg-gray-50 border-gray-200"},{label:"2 proprietarios",value:"R$ 99/mes",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{label:"3 proprietarios",value:"R$ 113,85/mes",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{label:"4 proprietarios",value:"R$ 128,70/mes",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"}].map(({label:N,value:w,color:j,bg:C})=>e.jsxs("div",{className:`rounded-xl ${C} border px-3 py-2.5 text-center`,children:[e.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:N}),e.jsx("div",{className:`text-xs font-semibold ${j}`,children:w})]},N))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(cw,{className:"w-5 h-5 text-gray-400"})}),s&&e.jsxs("div",{className:"absolute right-0 top-10 w-72 bg-white rounded-xl shadow-xl p-4 border border-gray-200 z-10 text-xs text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"Quando preciso de multiplos proprietarios?"}),"Se voce gerencia pontos que pertencem a varios proprietarios diferentes, ou precisa dividir repasses entre multiplas empresas por ponto."]})]})]})})]})})}const n0="/figma-assets/b772fcca664e51771498ee420b09d2bb7a1c5fed.png",_w="/figma-assets/b410819dec3dab15947c18ed6baae2284d619ffd.png",rD="/figma-assets/4927f4005fdcb4cee75f7c6be5a84c437632a666.png",iD="/figma-assets/6798ffea025a808956ca89ea6da0e04d0cee19d8.png",a0="/figma-assets/6278c812688036c294627847a92c37d9fdd135d8.png",oD="/figma-assets/bdc94cbddf5660b338a9b0459df94874d600a7f6.png",r0="/figma-assets/8c102002d56706280ee26142532d5a1c15f2e0da.png",lD="/figma-assets/c111a3e573ecc1de8c1b8bded684b67ff2234cd6.png",i0="/figma-assets/15a28e63418d28c9ec12a06d0df66c23e5e7edac.png",cD="/figma-assets/18abb66ce6b22f670cd4116722de8d5e72ec0e1e.png",o0="/figma-assets/ea092394ba26ae8e99aec4c2c652c109f797a8ef.png",dD="/figma-assets/e4aae58e61f032bc98c383fa6c9fea846a8a8c06.png",uD="/figma-assets/02d010d4d626ef6df76355ef463372b4764a1d53.png",mD="/figma-assets/7d302fdd327d35135083ec1233df4d38236c20f7.png",hD="/figma-assets/ede0d250980b265fcc69c78bbcfc2cf1766ad469.png",pD="/figma-assets/cd83b92791eb35af88ec6625a90b444217be6c1b.png",fD="/figma-assets/bc4c41825d562aa00505148f9c2cf7776c1dda25.png",xD="/figma-assets/bbbe5dc0a7da7fae50e76241d183ed958b85d959.png",pp="/figma-assets/24be53fa98cb70de89bcd6b3013fd88d5eff019e.png",l0="/figma-assets/midiakit.png",gD="/figma-assets/2e890f0b983e67f4196361f257d7f43fc5fe006a.png",vD="/figma-assets/1896d19035e48bc6bce4326ab159c9231b61df91.png",yD={topRight:"solutions-badge--topRight",bottomLeft:"solutions-badge--bottomLeft",bottomRight:"solutions-badge--bottomRight"};function bD({name:t,fallback:s,className:n="",alt:r=""}){const o=t.normalize("NFD").replace(/[\u0300-\u036f]/g,""),[c,u]=m.useState(`/gifs/${t}.gif`),[h,f]=m.useState(!1);return h?e.jsx("div",{className:n,children:s}):e.jsx("img",{src:c,alt:r||t,className:n,onError:()=>{c===`/gifs/${t}.gif`&&o!==t?u(`/gifs/${o}.gif`):f(!0)}})}const wx={inventario:{image1:a0,image2:oD},propostas:{image1:r0,image2:lD},campanhas:{image1:i0,image2:cD},financeiro:{image1:o0,image2:dD},reservas:{image1:uD,image2:mD},clientes:{image1:hD,image2:pD},proprietarios:{image1:fD,image2:xD},relatorios:{image1:pp,image2:l0},outros:{image1:gD,image2:vD}},nr={inventario:{title:"Organize seu patrimnio com preciso militar",description:"Cadastre pontos, faces e proprietrios com geolocalizao automtica e controle de status em tempo real.",screenshot:a0,badges:[{label:"Cadastro Automtico",icon:e.jsx(Cl,{className:"w-4 h-4"}),position:"topRight"},{label:"Upload de Fotos",icon:e.jsx(Gc,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Geolocalizao Ativa",icon:e.jsx(ra,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:n0,statText:"Reduo de 70%",statSubtext:"no tempo de organizao",testimonial:{quote:'"O inventrio inteligente nos deu a organizao que precisvamos. Agora sabemos exatamente onde cada ponto est localizado e seu status em tempo real, acabou a baguna no controle do patrimnio."',name:"Carlos Mendes",role:"Diretor Comercial, OutdoorBR",avatar:_w}},propostas:{title:"Crie propostas comerciais em minutos",description:"Monte propostas profissionais com templates personalizveis, clculos automticos de valores e aprovao digital integrada.",screenshot:r0,badges:[{label:"Templates Prontos",icon:e.jsx(nn,{className:"w-4 h-4"}),position:"topRight"},{label:"Aprovao Digital",icon:e.jsx(Oi,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Envio em PDF",icon:e.jsx(nn,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Fa,statText:"Aumento de 85%",statSubtext:"na taxa de converso",testimonial:{quote:'"Com a automao de propostas, nosso time comercial triplicou a quantidade de oramentos enviados. Os templates prontos economizam horas de trabalho e impressionam os clientes."',name:"Mariana Silva",role:"Gerente de Vendas, MediaPlus",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"}},campanhas:{title:"Gerencie todas as campanhas em um s lugar",description:"Acompanhe veiculaes, monitore performance e controle prazos com calendrio visual integrado ao inventrio disponvel.",screenshot:i0,badges:[{label:"Status em Tempo Real",icon:e.jsx(fu,{className:"w-4 h-4"}),position:"topRight"},{label:"Calendrio Visual",icon:e.jsx(ja,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Prazos & Alertas",icon:e.jsx(Bh,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Fa,statText:"Reduo de 60%",statSubtext:"em conflitos de veiculao",testimonial:{quote:'"O controle de campanhas centralizado acabou com os problemas de sobreposio. Agora visualizamos tudo em tempo real e nunca mais perdemos um prazo de veiculao."',name:"Roberto Alves",role:"Coordenador de Operaes, UrbanMedia",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"}},financeiro:{title:"Controle financeiro completo e automtico",description:"Gesto de cobranas, recebimentos e despesas com alertas inteligentes e integrao direta s campanhas ativas.",screenshot:o0,badges:[{label:"Cobrana Automtica",icon:e.jsx(Cl,{className:"w-4 h-4"}),position:"topRight"},{label:"Alertas de Pagamento",icon:e.jsx(Bh,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Relatrios",icon:e.jsx(fu,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Fa,statText:"Reduo de 78%",statSubtext:"em inadimplncia",testimonial:{quote:'"Os alertas automticos de pagamento transformaram nosso fluxo de caixa. Antes perdamos muito tempo perseguindo clientes, agora o sistema cuida disso automaticamente."',name:"Paula Ferreira",role:"Diretora Financeira, VisionOut",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"}},midiakit:{title:"Mdia kit digital que vende sozinho",description:"Apresente seu inventrio com mapas interativos, fotos em alta resoluo e dados de audincia que impressionam clientes.",screenshot:l0,badges:[{label:"Mapa Interativo",icon:e.jsx(fw,{className:"w-4 h-4"}),position:"topRight"},{label:"Fotos HD",icon:e.jsx(Gc,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Solicitao Rpida",icon:e.jsx(Cl,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Fa,statText:"Aumento de 92%",statSubtext:"em engajamento de clientes",testimonial:{quote:'"O mdia kit digital  nossa melhor ferramenta de vendas. Os clientes navegam pelo mapa, veem fotos reais dos pontos e j fecham negcio na primeira reunio."',name:"Fernando Costa",role:"Diretor Comercial, MegaOut",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400"}},dashboard:{title:"Inteligncia de dados para decises rpidas",description:"Dashboards em tempo real com indicadores de ocupao, faturamento, performance comercial e anlises preditivas.",screenshot:pp,badges:[{label:"KPIs em Tempo Real",icon:e.jsx(fu,{className:"w-4 h-4"}),position:"topRight"},{label:"Insights",icon:e.jsx(Cl,{className:"w-4 h-4"}),position:"bottomLeft"},{label:"Config. Inteligente",icon:e.jsx(hp,{className:"w-4 h-4"}),position:"bottomRight"}],statLogo:Fa,statText:"Aumento de 110%",statSubtext:"na velocidade de deciso",testimonial:{quote:'"Ter todos os indicadores em um dashboard nico mudou completamente nossa gesto. Identificamos oportunidades e problemas em segundos, no mais em semanas."',name:"Juliana Martins",role:"CEO, StreetMedia Group",avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400"}}};function Mb(){const t=Jt(),{openWaitlist:s}=$o(),[n,r]=m.useState("inventario"),[o,c]=m.useState(null),[u,h]=m.useState(new Set),[f,v]=m.useState("inventario"),[x,g]=m.useState("reservas"),[N,w]=m.useState(!1),[j,C]=m.useState(!1),k=S=>{S!==n&&!j&&(u.has(S)&&h(P=>{const D=new Set(P);return D.delete(S),D}),c(n),C(!0),setTimeout(()=>{r(S)},10),setTimeout(()=>{C(!1),h(P=>new Set(P).add(n)),c(null)},360))},E={reservas:{title:"Automao de reservas",description:"O sistema calcula automaticamente a taxa de ocupao de cada ponto de mdia em tempo real. Monitora campanhas ativas, perodos disponveis e gera alertas quando um ponto fica livre para maximizar sua receita sem esforo manual."},relatorios:{title:"Gerador de relatrios",description:"Crie relatrios completos de performance, faturamento e ocupao em segundos. Escolha entre dezenas de templates prontos ou personalize suas prprias anlises. Exporte em PDF, Excel ou compartilhe diretamente com sua equipe."},financeira:{title:"Automao financeira",description:"Cobranas automticas vinculadas s campanhas, envio de boletos programados e alertas de inadimplncia. O sistema monitora pagamentos, gera segunda via e notifica clientes automaticamente, reduzindo drasticamente sua inadimplncia."},propostas:{title:"Automao de propostas",description:"Monte propostas comerciais profissionais em minutos com templates inteligentes. O sistema preenche automaticamente valores, disponibilidade, fotos dos pontos e envia para aprovao digital do cliente com tracking em tempo real."},midiakit:{title:"Automao do mdia kit",description:"Seu mdia kit digital se atualiza automaticamente com novos pontos, fotos, dados de audincia e localizao. Clientes podem navegar pelo mapa interativo, filtrar por caractersticas e solicitar oramentos sem sua interveno."},dashboard:{title:"Automao de dashboard",description:"Dashboards inteligentes que consolidam dados de todos os mdulos automaticamente. KPIs atualizados em tempo real, grficos interativos, comparativos de performance e alertas preditivos para antecipar problemas antes que aconteam."}};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-12"})}),e.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[e.jsx("a",{href:"#produtos",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Produtos"}),e.jsx("a",{href:"#solucoes",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Solues"}),e.jsx("a",{href:"#recursos",className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Recursos"}),e.jsx("button",{onClick:()=>t("/planos"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Preos"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/login"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Iniciar sesso"}),e.jsx("button",{onClick:()=>{s("index:header:ver-demonstracao")},className:"hidden md:flex items-center gap-2 px-6 py-2.5 border border-blue-600 text-blue-600 rounded-full hover:bg-blue-50 transition-colors",children:"Ver demonstrao"}),e.jsxs("button",{onClick:()=>{s("index:header:teste-gratis-30-dias")},className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:shadow-lg transition-all",children:["Teste Grtis 30 dias",e.jsx(or,{className:"w-4 h-4"})]})]})]})}),e.jsx("section",{id:"produtos",className:"landing-hero-section landing-anchor pb-20 px-6 bg-gradient-to-b from-gray-50 to-white overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-blue-500/5 rounded-[55px] hero-shell",children:[e.jsxs("div",{className:"text-center mb-8 hero-content",children:[e.jsxs("h1",{className:"hero-title text-gray-900 mb-5",children:["A plataforma completa para",e.jsx("br",{}),"dominar sua mdia OOH/DOOH"]}),e.jsxs("p",{className:"hero-subtitle text-gray-700 max-w-4xl mx-auto mb-8",children:["Centralize inventrio, propostas, campanhas e financeiro em uma nica sute inteligente.",e.jsx("br",{}),"Elimine planilhas desatualizadas e multiplique suas vendas."]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("button",{onClick:()=>{s("index:hero:teste-gratis-30-dias")},className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-xl rounded-full hover:shadow-xl transition-all",children:["Teste Grtis 30 dias",e.jsx(or,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-gray-600",children:"No  necessrio carto de crdito"})]})]}),e.jsx("div",{className:"hero-stage max-w-5xl mx-auto",children:e.jsx("div",{className:"hero-preview-viewport",children:Object.keys(wx).map(S=>{const P=S,D=P===n&&!j,I=P===o&&j,O=P===n&&j,F=u.has(P);let X="130%",Q=0,V="opacity 0s";return D?(X="0",Q=1,V="opacity 0s"):I?(X="-130%",Q=.92,V="all 340ms ease-in-out"):O?(X="0",Q=1,V="all 340ms ease-in-out"):F&&(X="-130%",Q=0,V="opacity 0s"),e.jsxs("div",{className:"absolute inset-0",style:{transform:`translateX(${X})`,opacity:Q,transition:V,pointerEvents:D?"auto":"none",zIndex:I?5:O?10:D?15:0},children:[e.jsx("div",{className:"hero-img-back",style:{animation:D?"float-secondary 3.2s ease-in-out infinite":"none",animationDelay:"0.5s"},children:e.jsx("img",{src:wx[P].image2,alt:`${P} - Vista 2`,className:"hero-img",style:{transform:"rotate(-1.5deg) scale(0.88)",transformOrigin:"center center"}})}),e.jsx("div",{className:"hero-img-front",style:{animation:D?"float-primary 2.8s ease-in-out infinite":"none",zIndex:10},children:e.jsx("img",{src:wx[P].image1,alt:`${P} - Vista 1`,className:"hero-img hero-img--front",style:{transform:"rotate(1.2deg)",transformOrigin:"center center"}})})]},P)})})}),e.jsxs("div",{className:"hero-module-card hidden lg:block",children:[e.jsx("p",{className:"text-center text-gray-900 mb-6",children:"O que voc gostaria de gerenciar hoje?"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Inventrio",key:"inventario"},{label:"Propostas",key:"propostas"},{label:"Campanhas",key:"campanhas"},{label:"Financeiro",key:"financeiro"},{label:"Reservas",key:"reservas"},{label:"Clientes",key:"clientes"},{label:"Proprietrios",key:"proprietarios"},{label:"Relatrios",key:"relatorios"},{label:"Outros...",key:"outros"}].map((S,P)=>e.jsxs("button",{onClick:()=>k(S.key),className:`border rounded-xl p-4 text-center transition-all cursor-pointer ${n===S.key?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-100":"border-gray-200 hover:border-blue-300 hover:bg-blue-50/30"}`,children:[e.jsx("div",{className:`w-4 h-4 border rounded mb-2 mx-auto transition-all ${n===S.key?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:n===S.key&&e.jsx(ja,{className:"w-3 h-3 text-white"})}),e.jsx("p",{className:"text-xs text-gray-700",children:S.label})]},P))}),e.jsxs("button",{onClick:()=>{s("index:produtos:teste-gratis-30-dias")},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:shadow-lg transition-all",children:["Teste Grtis 30 dias",e.jsx(or,{className:"w-5 h-5"})]})]})]})})}),e.jsx("section",{id:"solucoes",className:"landing-anchor py-16 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-medium text-gray-900 text-center mb-10",children:["Solues para todos os negcios.",e.jsx("br",{}),"Uma nica plataforma."]}),e.jsx("div",{className:"solutions-tabs",children:[{label:"Inventrio",key:"inventario"},{label:"Propostas",key:"propostas"},{label:"Campanhas",key:"campanhas"},{label:"Financeiro",key:"financeiro"},{label:"Mdia Kit",key:"midiakit"},{label:"Dashboard",key:"dashboard"}].map(S=>e.jsx("button",{onClick:()=>v(S.key),className:`solutions-tab ${f===S.key?"solutions-tab--active":""}`,children:S.label},S.key))}),e.jsxs("div",{className:"solutions-layout",children:[e.jsx("div",{className:"solutions-left-card bg-gradient-to-r from-blue-500 to-blue-700",children:e.jsxs("div",{className:"solutions-left-inner",children:[e.jsxs("div",{className:"solutions-left-text",children:[e.jsx("h3",{className:"solutions-left-title",children:nr[f].title}),e.jsx("p",{className:"solutions-left-desc",children:nr[f].description}),e.jsxs("button",{onClick:()=>{s(`index:solucoes:${f}:teste-gratis-30-dias`)},className:"solutions-left-cta",children:["Teste Grtis 30 dias",e.jsx(or,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"solutions-left-preview",children:[nr[f].badges?.map(S=>e.jsxs("div",{className:`solutions-badge ${yD[S.position]}`,children:[S.icon,e.jsx("span",{children:S.label})]},S.label)),e.jsx("div",{className:"solutions-preview-surface",children:e.jsx("div",{className:"solutions-preview-frame",children:e.jsx("img",{src:nr[f].screenshot,alt:"Preview do mdulo",className:"solutions-preview-img"})})})]})]})}),e.jsxs("div",{className:"solutions-right",children:[e.jsxs("div",{className:"solutions-right-statCard",children:[e.jsx("img",{src:nr[f].statLogo,alt:"Logo",className:"solutions-stat-logo"}),e.jsxs("p",{className:"solutions-stat",children:[e.jsx("span",{className:"solutions-stat-strong",children:nr[f].statText})," ",nr[f].statSubtext]})]}),e.jsxs("div",{className:"solutions-right-testimonialCard",children:[e.jsx("p",{className:"solutions-quote",children:nr[f].testimonial.quote}),e.jsx("div",{className:"solutions-divider"}),e.jsxs("div",{className:"solutions-person",children:[e.jsx("img",{src:nr[f].testimonial.avatar,alt:nr[f].testimonial.name,className:"solutions-avatar"}),e.jsxs("div",{className:"solutions-person-text",children:[e.jsx("p",{className:"solutions-person-name",children:nr[f].testimonial.name}),e.jsx("p",{className:"solutions-person-role",children:nr[f].testimonial.role})]})]})]})]})]})]})}),e.jsx("section",{id:"recursos",className:"landing-anchor efficiency-section",children:e.jsxs("div",{className:"efficiency-wrap",children:[e.jsxs("div",{className:"efficiency-header",children:[e.jsx("div",{className:"efficiency-iconWrap",children:e.jsx("img",{src:rD,alt:"Automao"})}),e.jsxs("h2",{className:"efficiency-heading",children:["Mais eficincia.",e.jsx("br",{}),"Multiplicada por automao."]})]}),e.jsxs("div",{className:"efficiency-grid",children:[e.jsx("div",{className:"efficiency-menu",children:[{label:"Automao de reservas",dot:"blue",key:"reservas"},{label:"Gerador de relatrios",dot:"red",key:"relatorios"},{label:"Automao financeira",dot:"yellow",key:"financeira"},{label:"Automao de propostas",dot:"green",key:"propostas"},{label:"Automao do mdia kit",dot:"blue2",key:"midiakit"},{label:"Automao de dashboard",dot:"red2",key:"dashboard"}].map(S=>e.jsxs("button",{onClick:()=>g(S.key),className:`efficiency-item ${x===S.key?"efficiency-item--active":""}`,type:"button",children:[e.jsx("span",{className:`efficiency-dot efficiency-dot--${S.dot}`,"aria-hidden":"true"}),e.jsx("span",{className:"efficiency-itemLabel",children:S.label})]},S.key))}),e.jsxs("div",{className:"efficiency-content",children:[e.jsx("h3",{className:"efficiency-content-title",children:E[x].title}),e.jsx("p",{className:"efficiency-content-desc",children:E[x].description})]})]})]})}),e.jsx("section",{className:"diff-section",children:e.jsxs("div",{className:"diff-container",children:[e.jsx("h2",{className:"diff-title",children:"O diferencial da onemedia.com"}),[{key:"planilhas",front:{color:"diff-theme-blue",title:"Gesto centralizada do seu inventrio",desc:"Automao que elimina retrabalho e multiplica sua produtividade operacional diariamente.",fallback:e.jsx(nD,{className:"w-20 h-20 text-blue-600"})},back:{statColor:"diff-theme-blue",statMain:"80%",statSub:`menos tempo
em planilhas`,quote:'"A automao transformou nossa rotina. O que levava horas em planilhas agora  feito em minutos, sem erros. Ganhamos uma agilidade impressionante."'}},{key:"visibilidade",front:{color:"diff-theme-red",title:"Visibilidade total em tempo real",desc:"Decises estratgicas baseadas em dados precisos, no em suposies arriscadas.",fallback:e.jsx(Tr,{className:"w-20 h-20 text-gray-500"})},back:{statColor:"diff-theme-red",statMain:"100%",statSub:`de visibilidade
sobre o inventrio`,quote:'"Agora tomamos decises estratgicas em minutos, com base em dados reais, no em palpites. A visibilidade  total."'}},{key:"resultados",front:{color:"diff-theme-yellow",title:"Implementao em minutos",desc:"Configure rapidamente e comece a ver resultados transformadores ainda hoje.",fallback:e.jsx(v4,{className:"w-20 h-20 text-orange-500"})},back:{statColor:"diff-theme-yellow",statMain:"15min",statSub:`tempo mdio
de configurao`,quote:'"Conectamos nossas telas, importamos o inventrio e comeamos a rodar campanhas no mesmo dia. Foi plug-and-play."'}},{key:"integracao",front:{color:"diff-theme-green",title:"Integrao completa e inteligente",desc:"Todos os mdulos conectados para fluxo de trabalho perfeito e eficiente.",fallback:e.jsx(hp,{className:"w-20 h-20 text-gray-600"})},back:{statColor:"diff-theme-green",statMain:"3x",statSub:`mais propostas
aprovadas`,quote:'"Agora, uma proposta aprovada gera automaticamente o contrato e a ordem de servio. Nossa equipe parou de bater cabea."'}}].map((S,P)=>{const D=P%2===1,I=e.jsx("div",{className:"diff-card diff-surface diff-iconCard",children:e.jsx(bD,{name:S.key==="integracao"?"integrao":S.key,fallback:S.front.fallback,className:"w-24 h-24 object-contain",alt:S.key})}),O=e.jsxs("div",{className:`diff-card diff-textCard ${S.key==="planilhas"?"diff-textCard--blue":""} ${S.key==="visibilidade"?"diff-textCard--red":""} ${S.key==="resultados"?"diff-textCard--yellow":""} ${S.key==="integracao"?"diff-textCard--green":""}`,children:[e.jsx("h3",{className:"diff-textTitle",children:S.front.title}),e.jsx("p",{className:"diff-textDesc",children:S.front.desc})]}),F=e.jsxs("div",{className:`diff-card diff-statCard ${S.key==="planilhas"?"diff-statCard--blue":""} ${S.key==="visibilidade"?"diff-statCard--red":""} ${S.key==="resultados"?"diff-statCard--yellow":""} ${S.key==="integracao"?"diff-statCard--green":""}`,children:[e.jsx("div",{className:"diff-statMain",children:S.back.statMain}),e.jsx("div",{className:"diff-statSub",children:String(S.back.statSub).split(`
`).map((Q,V)=>e.jsxs("span",{children:[Q,V<String(S.back.statSub).split(`
`).length-1?e.jsx("br",{}):null]},V))})]}),X=e.jsxs("div",{className:"diff-card diff-surface diff-testimonial",children:[e.jsxs("div",{className:"diff-testimonial-header",children:[e.jsxs("div",{className:"diff-testimonial-person",children:[e.jsx("img",{src:_w,className:"diff-avatar",alt:"Carlos Mendes"}),e.jsxs("div",{className:"diff-person-meta",children:[e.jsx("p",{className:"diff-person-name",children:"Carlos Mendes"}),e.jsx("p",{className:"diff-person-role",children:"Diretor Comercial, OutdoorBR"})]})]}),e.jsx("img",{src:n0,alt:"OutdoorBR",className:"diff-brand"})]}),e.jsx("p",{className:"diff-quote",children:S.back.quote})]});return e.jsx("div",{className:"differential-flip diff-row",children:e.jsxs("div",{className:"differential-flip-inner",children:[e.jsx("div",{className:"differential-face differential-front",children:e.jsx("div",{className:`diff-pair ${D?"diff-pair--reverse":""}`,children:D?e.jsxs(e.Fragment,{children:[O,I]}):e.jsxs(e.Fragment,{children:[I,O]})})}),e.jsx("div",{className:"differential-face differential-back",children:e.jsx("div",{className:`diff-pair ${D?"diff-pair--reverse":""}`,children:D?e.jsxs(e.Fragment,{children:[X,F]}):e.jsxs(e.Fragment,{children:[F,X]})})})]})},S.key)})]})}),e.jsx(Sw,{}),e.jsx("section",{className:"security-section",children:e.jsxs("div",{className:"security-wrap",children:[e.jsx("div",{className:"security-iconWrap","aria-hidden":"true",children:e.jsx("img",{src:iD,alt:"",className:"security-icon"})}),e.jsx("h2",{className:"security-title",children:"Segurana e Confiabilidade"}),e.jsxs("div",{className:"security-block",children:[e.jsx("h3",{className:"security-heading",children:"Proteo total dos seus dados:"}),e.jsxs("ul",{className:"security-list",children:[e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Criptografia SSL"})]}),e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Backup automtico"})]}),e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Conformidade LGPD"})]}),e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"Acesso seguro multi-dispositivo"})]})]})]}),e.jsxs("div",{className:"security-block security-block--support",children:[e.jsx("h3",{className:"security-heading",children:"Suporte que funciona:"}),e.jsx("ul",{className:"security-list",children:e.jsxs("li",{className:"security-item",children:[e.jsx("span",{className:"security-emoji",children:""}),e.jsx("span",{children:"E-mail prioritrio"})]})})]})]})}),e.jsx("footer",{className:"bg-white py-16 px-6 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-10 mb-6"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/planos"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Preos"}),e.jsx("p",{onClick:()=>w(!0),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Entre em contato conosco"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Produtos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#solucoes",onClick:()=>v("inventario"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Inventrio"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("propostas"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Propostas"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("campanhas"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Campanhas"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("financeiro"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Financeiro"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("midiakit"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Mdia Kit"}),e.jsx("a",{href:"#solucoes",onClick:()=>v("dashboard"),className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Dashboard"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Solues"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Agncias"}),e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Veculos"}),e.jsx("a",{href:"#solucoes",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Para Proprietrios"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recursos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Blog"}),e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Documentao"}),e.jsx("a",{href:"#recursos",className:"block cursor-pointer hover:text-blue-600 transition-colors",children:"Suporte"}),e.jsx("p",{onClick:()=>t("/contato"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Contato"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-gray-600",children:" 2026 OneMedia. Todos os direitos reservados."}),e.jsxs("div",{className:"flex gap-6 text-gray-600",children:[e.jsx("a",{href:"/privacidade",onClick:S=>{S.preventDefault(),t("/privacidade")},className:"hover:text-blue-600 transition-colors",children:"Privacidade"}),e.jsx("a",{href:"/termos",onClick:S=>{S.preventDefault(),t("/termos")},className:"hover:text-blue-600 transition-colors",children:"Termos"})]})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",onClick:S=>S.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Entre em contato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha como prefere falar conosco:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("a",{href:"https://wa.me/5561982541672?text=Ol!%20Gostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%20Poderia%20me%20ajudar?",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resposta rpida"})]})]}),e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com?subject=Interesse%20na%20plataforma%20OneMedia&body=Ol!%0A%0AGostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%0A%0APoderia%20me%20enviar%20mais%20informaes?%0A%0AObrigado!",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"thifi.contato.oficial@gmail.com"})]})]})]}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-6 px-6 py-3 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Fechar"})]})})]})}function jD({currentStep:t,steps:s}){const n=s.map((r,o)=>({number:o+1,title:r,isCompleted:o<t-1,isActive:o===t-1}));return e.jsx("div",{className:"flex items-center justify-center mb-8",children:n.map((r,o)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-all font-semibold ${r.isCompleted?"bg-green-500 text-white shadow-lg shadow-green-500/30":r.isActive?"bg-gradient-to-br from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-500/30":"bg-gray-200 text-gray-500"}`,children:r.isCompleted?e.jsx(ja,{className:"w-6 h-6"}):e.jsx("span",{className:"text-lg",children:r.number})}),e.jsx("span",{className:`mt-2 text-sm font-medium hidden sm:block ${r.isActive?"text-blue-600":r.isCompleted?"text-green-600":"text-gray-500"}`,children:r.title})]}),o<n.length-1&&e.jsx("div",{className:`w-16 sm:w-24 h-1 mx-2 rounded-full transition-all ${r.isCompleted?"bg-green-500":"bg-gray-200"}`})]},r.number))})}const ND=[{id:"9606a2fb-e7a9-4c77-b834-e566b87cdc0b",range:"0-50",name:"At 50 pontos",description:"Ideal para operaes menores que esto comeando",minPoints:0,maxPoints:50,monthlyPrice:29900,priceLabel:"R$ 299",isPopular:!1},{id:"1be52bed-89e1-4543-b833-8195afadd3be",range:"50-100",name:"50 a 100 pontos",description:"Para empresas em crescimento com inventrio moderado",minPoints:50,maxPoints:100,monthlyPrice:39900,priceLabel:"R$ 399",isPopular:!1},{id:"890bdd79-075b-4ff0-9684-e2fdff6ac74f",range:"101-150",name:"101 a 150 pontos",description:"Plano popular para operaes estabelecidas",minPoints:101,maxPoints:150,monthlyPrice:49900,priceLabel:"R$ 499",isPopular:!0},{id:"092ab0d7-0a88-49c5-a174-50633c37263d",range:"151-200",name:"151 a 200 pontos",description:"Para empresas com inventrio robusto",minPoints:151,maxPoints:200,monthlyPrice:59900,priceLabel:"R$ 599",isPopular:!1},{id:"db9c2c5a-eb13-4c0c-8560-b99e204028c4",range:"201-250",name:"201 a 250 pontos",description:"Operaes de mdio a grande porte",minPoints:201,maxPoints:250,monthlyPrice:69900,priceLabel:"R$ 699",isPopular:!1},{id:"6bf244fc-1d2c-4071-8d8f-9448e9a29c74",range:"251-300",name:"251 a 300 pontos",description:"Para grandes veculos regionais",minPoints:251,maxPoints:300,monthlyPrice:79900,priceLabel:"R$ 799",isPopular:!1},{id:"3e7fd9bc-d171-4a96-a05d-a6e085cbc77d",range:"301-350",name:"301 a 350 pontos",description:"Operaes de grande escala",minPoints:301,maxPoints:350,monthlyPrice:89900,priceLabel:"R$ 899",isPopular:!1},{id:"b1e59d89-f5f0-49fb-8852-ee73b197dd6c",range:"351-400",name:"351 a 400 pontos",description:"Para grandes redes nacionais",minPoints:351,maxPoints:400,monthlyPrice:99900,priceLabel:"R$ 999",isPopular:!1},{id:"8f155086-63fb-459c-9f97-7b7fd2880861",range:"401-plus",name:"Mais de 400 pontos",description:"Plano enterprise customizado para sua operao",minPoints:401,maxPoints:null,monthlyPrice:0,priceLabel:"Sob consulta",isPopular:!1}],Cx=9900;function Aw(t){return t<=1?0:t===2?Cx:t===3?Math.round(Cx*1.15):t===4?Math.round(Cx*1.3):0}function wD(t){return Aw(t)/100}function CD(t){return t<=1?"1 proprietrio":`${t} proprietrios`}function SD(t){return t<=1?"1 proprietrio (incluso)":`At ${t} proprietrios por ponto`}const Rb={solo:{range:"0-50",platformId:"9606a2fb-e7a9-4c77-b834-e566b87cdc0b"},core:{range:"50-100",platformId:"1be52bed-89e1-4543-b833-8195afadd3be"},start:{range:"101-150",platformId:"890bdd79-075b-4ff0-9684-e2fdff6ac74f"},pro:{range:"151-200",platformId:"092ab0d7-0a88-49c5-a174-50633c37263d"},"pro-2000":{range:"401-plus",platformId:"8f155086-63fb-459c-9f97-7b7fd2880861"}},Pw=300,Ob={width:"min(300px, calc(100vw - 48px))",minWidth:"min(300px, calc(100vw - 48px))",maxWidth:Pw};function _D({text:t}){return e.jsxs("span",{style:{position:"relative",display:"inline-block",color:"#9ca3af",fontSize:"0.875rem",fontWeight:500},children:[t,e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),e.jsx("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#ef4444",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]})]})}function AD({data:t,onChange:s,onNext:n,error:r}){const[o,c]=m.useState($a.minPoints),u=ww(o),h=m.useMemo(()=>Cw(u),[u]),f=m.useRef(null),[v,x]=m.useState(!1),g=m.useMemo(()=>t.selectedPlatformPlanId?Object.entries(Rb).find(([,S])=>S.platformId===t.selectedPlatformPlanId)?.[0]??null:null,[t.selectedPlatformPlanId]),N=S=>{const P=Rb[S];P&&s({...t,selectedPlanRange:P.range,selectedPlatformPlanId:P.platformId})},w=S=>{f.current?.scrollBy({left:S==="left"?-320:Pw+20,behavior:"smooth"})},j=S=>e.jsx("div",{className:"p-5 flex flex-col flex-1 gap-3",children:S}),C=S=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:"Limites"}),e.jsx("div",{className:"space-y-1.5",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-700",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ra,{className:"w-3.5 h-3.5 text-gray-400"}),"Pontos"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:S})]})})]}),k=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Todos os Recursos no Marketplace e mais:"}),e.jsx("ul",{className:"space-y-1.5 text-xs text-gray-600 flex-1",children:Nw.map(S=>e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(Oi,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}),S]},S))})]}),E=S=>({width:16,height:16,borderRadius:"50%",flexShrink:0,background:"white",transition:"border 0.15s",border:g===S?"5px solid #2563eb":"2px solid #d1d5db"});return e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Comece seu teste grtis em 3 passos"}),e.jsx("p",{className:"text-gray-600",children:"Escolha o volume de pontos que voc pretende gerenciar. Voc pode mudar o plano depois."})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Arraste ou use as setas para ver os planos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w("left"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx(td,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>w("right"),className:"p-2 rounded-full border border-gray-200 bg-white hover:border-blue-500 hover:text-blue-600 transition-colors",children:e.jsx($l,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{ref:f,className:"flex gap-5 overflow-x-auto snap-x snap-mandatory pb-6",style:{scrollbarWidth:"none"},children:[jw.map(S=>{const P=g===S.id;return e.jsxs("button",{onClick:()=>N(S.id),style:Ob,className:`relative text-left flex-shrink-0 snap-start bg-white rounded-2xl flex flex-col transition-all duration-200 ${P?"border-2 border-blue-600 shadow-lg":"border border-gray-200 shadow-sm hover:border-blue-300 hover:shadow-md"}`,children:[S.tag&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-50 text-blue-700 text-[11px] font-semibold px-2 py-0.5 rounded-full border border-blue-100",children:[e.jsx(Do,{className:"w-2.5 h-2.5"}),S.tag]})}),j(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{style:E(S.id)}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:S.name})]}),e.jsxs("div",{children:[S.strikePrice&&e.jsx("p",{children:e.jsx(_D,{text:S.strikePrice})}),e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro ms"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",S.monthlyPrice]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:S.description}),e.jsx("hr",{className:"border-gray-100"}),C(S.points),e.jsx("hr",{className:"border-gray-100"}),k(),e.jsx("div",{className:`mt-auto w-full py-2.5 rounded-xl text-center text-sm font-semibold transition-colors ${P?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:P?"Selecionado ":"Selecionar plano"})]}))]},S.id)}),(()=>{const S=g==="pro-2000";return e.jsxs("button",{onClick:()=>N("pro-2000"),style:Ob,className:`relative text-left flex-shrink-0 snap-start bg-white rounded-2xl flex flex-col transition-all duration-200 ${S?"border-2 border-blue-600 shadow-lg":"border-2 border-blue-200 shadow-sm hover:border-blue-400 hover:shadow-md"}`,children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-600 text-white text-[11px] font-semibold px-2 py-0.5 rounded-full",children:[e.jsx(Do,{className:"w-2.5 h-2.5"}),"Escalvel"]})}),j(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{style:E("pro-2000")}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:$a.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold text-gray-900",children:"R$ 0,00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"no primeiro ms"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Depois ",h,"/ms"]})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 space-y-2",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-gray-800",children:[e.jsx("span",{children:"Pontos"}),e.jsxs("span",{children:[o," pts"]})]}),e.jsx("input",{type:"range",min:$a.minPoints,max:$a.maxPoints,step:$a.step,value:o,onChange:P=>c(Number(P.target.value)),className:"w-full accent-blue-600"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Arraste para ajustar pontos e ver o preo."})]}),e.jsx("hr",{className:"border-gray-100"}),C(o),e.jsx("hr",{className:"border-gray-100"}),k(),e.jsx("div",{className:`mt-auto w-full py-2.5 rounded-xl text-center text-sm font-semibold transition-colors ${S?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:S?"Selecionado ":"Selecionar plano"})]}))]})})()]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mb-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-1",children:"Multi-Proprietrios"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Permite cadastrar at 4 proprietrios por ponto de mdia. Por padro, todos os planos incluem 1 proprietrio por ponto."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[{qty:"1",value:"Incluso",color:"text-green-600",bg:"bg-gray-50 border-gray-200"},{qty:"2",value:"R$ 99/ms",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{qty:"3",value:"R$ 113,85/ms",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"},{qty:"4",value:"R$ 128,70/ms",color:"text-blue-700",bg:"bg-blue-50 border-blue-200"}].map(({qty:S,value:P,color:D,bg:I})=>e.jsxs("div",{className:`rounded-xl ${I} border px-3 py-4 text-center flex flex-col items-center gap-1.5`,children:[e.jsx("div",{className:"text-xl font-bold text-gray-800 leading-none",children:S}),e.jsxs("div",{className:"text-xs text-gray-500 leading-tight",children:["proprietrio",S!=="1"?"s":""]}),e.jsx("div",{className:`text-xs font-semibold ${D} leading-tight`,children:P})]},S))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(cw,{className:"w-5 h-5 text-gray-400"})}),v&&e.jsx("div",{className:"absolute right-0 top-10 w-64 bg-white rounded-xl shadow-xl p-4 border border-gray-200 z-10 text-xs text-gray-600",children:"O add-on Multi-Proprietrios permite associar mais de um proprietrio por ponto de mdia, facilitando a gesto de receitas e comisses por proprietrio."})]})]})}),r&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-700 font-medium",children:r})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:"Prximo"})})]})}function Pr(t){return t.replace(/\D/g,"")}function Lb(t){const s=Pr(t);return s.length===10||s.length===11}function c0(t){const s=Pr(t);if(s.length===0)return"";const n=s.slice(0,2);if(s.length<=2)return`(${s}`;if(s.length===10){const r=s.slice(2,6),o=s.slice(6,10);return`(${n}) ${r}-${o}`}if(s.length===11){const r=s.slice(2,7),o=s.slice(7,11);return`(${n}) ${r}-${o}`}if(s.length<10){const r=s.slice(2,6),o=s.slice(6);return`(${n}) ${r}${o?"-"+o:""}`}return c0(s.slice(0,11))}function Ew(t){return Pr(t).slice(0,11)}function kw(t){const s=t.length>=8,n=/[A-Z]/.test(t),r=/\d/.test(t),o=/[^A-Za-z0-9]/.test(t);return{minLength:s,hasUpperCase:n,hasNumber:r,hasSpecialChar:o,isValid:s&&n&&r&&o}}function d0(t){return(t||"").trim().replace(/\s+/g,"").toLowerCase()}function Dw(t){const s=d0(t);if(!s)return null;if(!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9-]+)+$/i.test(s))return"E-mail invlido.";if(s.includes(".."))return'E-mail invlido (no pode conter ".." ).';const r=s.split("@")[1]||"";return r.endsWith(".con.br")?'E-mail invlido. Voc quis dizer ".com.br"?':/\.com\.br[a-z0-9]+$/i.test(r)?'E-mail invlido. Verifique o final do domnio (use ".com.br", sem letras extras).':null}function PD(t){return Dw(t)===null}function ED(t){const s=Pr(t);return s.length<=2?s:s.length<=5?`${s.slice(0,2)}.${s.slice(2)}`:s.length<=8?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5)}`:s.length<=12?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8)}`:`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8,12)}-${s.slice(12,14)}`}function kD(t){return Pr(t).length===14}const gu=[{uf:"AC",name:"Acre"},{uf:"AL",name:"Alagoas"},{uf:"AP",name:"Amap"},{uf:"AM",name:"Amazonas"},{uf:"BA",name:"Bahia"},{uf:"CE",name:"Cear"},{uf:"DF",name:"Distrito Federal"},{uf:"ES",name:"Esprito Santo"},{uf:"GO",name:"Gois"},{uf:"MA",name:"Maranho"},{uf:"MT",name:"Mato Grosso"},{uf:"MS",name:"Mato Grosso do Sul"},{uf:"MG",name:"Minas Gerais"},{uf:"PA",name:"Par"},{uf:"PB",name:"Paraba"},{uf:"PR",name:"Paran"},{uf:"PE",name:"Pernambuco"},{uf:"PI",name:"Piau"},{uf:"RJ",name:"Rio de Janeiro"},{uf:"RN",name:"Rio Grande do Norte"},{uf:"RS",name:"Rio Grande do Sul"},{uf:"RO",name:"Rondnia"},{uf:"RR",name:"Roraima"},{uf:"SC",name:"Santa Catarina"},{uf:"SP",name:"So Paulo"},{uf:"SE",name:"Sergipe"},{uf:"TO",name:"Tocantins"}];function DD(t){if(!t)return gu;const s=t.toLowerCase();return gu.filter(n=>n.name.toLowerCase().includes(s)||n.uf.toLowerCase().includes(s))}function TD({data:t,onChange:s,onNext:n,onBack:r,errors:o}){const[c,u]=m.useState(Pr(t.phone)),[h,f]=m.useState(t.state),[v,x]=m.useState(!1),[g,N]=m.useState(gu),w=(S,P)=>{s({...t,[S]:P})},j=S=>{const P=ED(S);w("cnpj",P)},C=S=>{const P=Ew(S);u(P),w("phone",P)},k=S=>{f(S),x(!0);const P=DD(S);N(P);const D=gu.find(I=>I.uf.toUpperCase()===S.toUpperCase());D&&w("state",D.uf)},E=(S,P)=>{f(S),w("state",S),x(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Dados da empresa"}),e.jsx("p",{className:"text-gray-600",children:"Essas informaes sero usadas para notas, contratos e relatrios."})]}),e.jsxs("div",{className:"space-y-5 mb-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome fantasia da empresa ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.fantasyName,onChange:S=>w("fantasyName",S.target.value),placeholder:"Ex: Outdoor Brasil Publicidade",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.fantasyName?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.fantasyName&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.fantasyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razo social"}),e.jsx("input",{type:"text",value:t.legalName,onChange:S=>w("legalName",S.target.value),placeholder:"Ex: Outdoor Brasil Publicidade Ltda",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNPJ ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.cnpj,onChange:S=>j(S.target.value),placeholder:"00.000.000/0000-00",maxLength:18,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.cnpj?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.cnpj&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.cnpj})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone / WhatsApp"}),e.jsx("input",{type:"tel",value:c0(c),onChange:S=>C(S.target.value),placeholder:"(11) 99999-9999",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.phone?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.phone}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"10 ou 11 dgitos (com DDD)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site"}),e.jsx("input",{type:"url",value:t.website,onChange:S=>w("website",S.target.value),placeholder:"https://www.exemplo.com.br",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UF / Estado"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h,onChange:S=>k(S.target.value),onFocus:()=>{x(!0),N(gu)},onBlur:()=>{setTimeout(()=>x(!1),200)},placeholder:"SP ou So Paulo",maxLength:20,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.state?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx(Iu,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),o.state&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.state}),v&&g.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(S=>e.jsxs("button",{type:"button",onMouseDown:()=>E(S.uf,S.name),className:"w-full px-4 py-2.5 text-left hover:bg-blue-50 text-sm transition-colors",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:S.uf}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["- ",S.name]})]},S.uf))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade"}),e.jsx("input",{type:"text",value:t.city,onChange:S=>w("city",S.target.value),placeholder:"Ex: So Paulo",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.city?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.city&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.city})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pas"}),e.jsx("input",{type:"text",value:t.country,onChange:S=>w("country",S.target.value),placeholder:"Brasil",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero estimado de usurios internos"}),e.jsx("input",{type:"text",value:t.estimatedUsers,onChange:S=>w("estimatedUsers",S.target.value),placeholder:"Ex: 5",className:"w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Apenas para inteligncia comercial, no afeta o plano"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:r,className:"px-10 py-3.5 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-medium",children:"Voltar"}),e.jsx("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:"Prximo"})]})]})}function ID({data:t,onChange:s,onSubmit:n,onBack:r,errors:o,isLoading:c}){const[u,h]=m.useState(!1),[f,v]=m.useState(!1),[x,g]=m.useState(Pr(t.phone)),N=(C,k)=>{s({...t,[C]:k})},w=C=>{const k=Ew(C);g(k),N("phone",k)},j=kw(t.password);return e.jsxs("div",{children:[o.api&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-700 font-medium whitespace-pre-line",children:o.api})}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-3",children:"Seus dados de acesso"}),e.jsx("p",{className:"text-gray-600",children:"Voc ser o administrador da conta. Depois poder convidar outros usurios."})]}),e.jsxs("div",{className:"space-y-5 mb-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome completo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:C=>N("name",C.target.value),placeholder:"Ex: Joo Silva",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.name?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["E-mail corporativo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",value:t.email,onChange:C=>N("email",d0(C.target.value)),placeholder:"seu.email@empresa.com.br",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.email?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Telefone / WhatsApp ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",value:c0(x),onChange:C=>w(C.target.value),placeholder:"(11) 99999-9999",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.phone?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),o.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.phone}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"10 ou 11 dgitos (com DDD)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:t.password,onChange:C=>N("password",C.target.value),placeholder:"Crie uma senha forte",className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.password?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:u?e.jsx(vg,{className:"w-5 h-5"}):e.jsx(Tr,{className:"w-5 h-5"})})]}),t.password&&e.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-100 rounded-xl space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Sua senha deve conter:"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.minLength?e.jsx(ja,{className:"w-4 h-4 text-green-600"}):e.jsx(Na,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.minLength?"text-green-700 font-medium":"text-gray-600",children:"Mnimo de 8 caracteres"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.hasUpperCase?e.jsx(ja,{className:"w-4 h-4 text-green-600"}):e.jsx(Na,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.hasUpperCase?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 letra maiscula (A-Z)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.hasNumber?e.jsx(ja,{className:"w-4 h-4 text-green-600"}):e.jsx(Na,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.hasNumber?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 nmero (0-9)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.hasSpecialChar?e.jsx(ja,{className:"w-4 h-4 text-green-600"}):e.jsx(Na,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:j.hasSpecialChar?"text-green-700 font-medium":"text-gray-600",children:"Pelo menos 1 caractere especial (!@#$%&*...)"})]})]})]}),o.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.password})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirmar senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",value:t.confirmPassword,onChange:C=>N("confirmPassword",C.target.value),placeholder:"Digite a senha novamente",className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${o.confirmPassword?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`}),e.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:f?e.jsx(vg,{className:"w-5 h-5"}):e.jsx(Tr,{className:"w-5 h-5"})})]}),o.confirmPassword&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.confirmPassword})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.acceptedTerms,onChange:C=>N("acceptedTerms",C.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Li e aceito os"," ",e.jsx("a",{href:"/termos",target:"_blank",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Termos de Uso"})," ","e a"," ",e.jsx("a",{href:"/privacidade",target:"_blank",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Poltica de Privacidade"}),". ",e.jsx("span",{className:"text-red-600",children:"*"})]})]}),o.acceptedTerms&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.acceptedTerms})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:r,disabled:c,className:"px-10 py-3.5 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all disabled:opacity-50 font-medium",children:"Voltar"}),e.jsx("button",{onClick:n,disabled:c,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg shadow-blue-500/30 font-medium",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):"Concluir cadastro"})]})]})}function zc(t,s="Ocorreu um erro. Tente novamente."){const n=t,r=n?.response?.status,o=n?.response?.data,c=o?.message,u=typeof c=="string"&&c.trim()?c:Array.isArray(c)?c.filter(Boolean).join(`
`):typeof n?.message=="string"&&n.message.trim()?n.message:s,h=typeof o?.code=="string"&&o.code.trim()?o.code:void 0,f=typeof o?.retryAfterSeconds=="number"?o.retryAfterSeconds:void 0;return{message:u,code:h,status:r,retryAfterSeconds:f}}function MD({companyName:t,userEmail:s}){const n=Jt(),[r,o]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState(0);m.useEffect(()=>{if(h<=0)return;const x=window.setInterval(()=>{f(g=>Math.max(0,g-1))},1e3);return()=>window.clearInterval(x)},[h]);const v=async()=>{if(s)try{u(null),o(!0);const x=await Dn.post("/auth/resend-verification",{email:s}),g=typeof x.data?.message=="string"&&x.data.message.trim()?x.data.message:"Se a conta existir e o e-mail ainda no estiver verificado, enviamos uma nova confirmao.";u(g);const N=typeof x.data?.retryAfterSeconds=="number"?x.data.retryAfterSeconds:60;f(Math.max(1,Math.min(600,N)))}catch(x){const g=zc(x,"No foi possvel reenviar o e-mail. Tente novamente.");u(g.message),g.retryAfterSeconds&&f(Math.max(1,Math.min(600,g.retryAfterSeconds)))}finally{o(!1)}};return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30",children:e.jsx(zh,{className:"w-14 h-14 text-white"})})}),e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 mb-6",children:"Conta criada com sucesso!"}),e.jsxs("div",{className:"max-w-lg mx-auto space-y-4 mb-10",children:[e.jsxs("p",{className:"text-gray-600 text-lg",children:["Parabns! A conta da empresa ",e.jsx("span",{className:"font-semibold text-gray-900",children:t})," foi criada com sucesso e voc j pode comear seu teste grtis de 30 dias."]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-5",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[" Enviamos um e-mail de confirmao para ",e.jsx("span",{className:"font-semibold",children:s})," com um link para ativar sua conta."]})}),e.jsx("p",{className:"text-gray-600",children:"Para acessar a plataforma, confirme seu e-mail primeiro. Depois disso, volte aqui e faa login."}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{type:"button",onClick:v,disabled:r||h>0,className:"inline-flex items-center justify-center gap-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-xl hover:bg-blue-50 transition-all font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(Ru,{className:"w-4 h-4"}),r?"Enviando...":h>0?`Reenviar em ${h}s`:"Reenviar e-mail de confirmao"]}),c?e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:c}):e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No recebeu? Verifique a caixa de spam e promoes."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>n("/login"),className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg shadow-blue-500/30 font-medium",children:[e.jsx(Vk,{className:"w-5 h-5"}),"Ir para Login"]}),e.jsxs("button",{onClick:()=>n("/"),className:"inline-flex items-center gap-2 bg-white border-2 border-gray-300 text-gray-700 px-10 py-3.5 rounded-xl hover:bg-gray-50 transition-all font-medium",children:[e.jsx(Sk,{className:"w-5 h-5"}),"Voltar para o site"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Precisa de ajuda?"," ",e.jsx("button",{onClick:()=>n("/contato"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Fale com nosso time comercial"})]})]})}const Il="/assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5-CDYQAuU1.png";function RD(){const t=Jt(),[s,n]=m.useState(1),[r,o]=m.useState(!1),[c,u]=m.useState(!1),[h,f]=m.useState({estimatedPoints:null,selectedPlanRange:null,selectedPlatformPlanId:null}),[v,x]=m.useState({fantasyName:"",legalName:"",cnpj:"",phone:"",website:"",city:"",state:"",country:"Brasil",estimatedUsers:""}),[g,N]=m.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",acceptedTerms:!1}),[w,j]=m.useState(null),[C,k]=m.useState({}),[E,S]=m.useState({});m.useEffect(()=>{const $=new URLSearchParams(window.location.search).get("planRange"),R=$?ND.find(z=>z.range===$):void 0;$&&R&&f({estimatedPoints:null,selectedPlanRange:$,selectedPlatformPlanId:R.id})},[]);const P=()=>!h.selectedPlanRange||!h.selectedPlatformPlanId?(j("Selecione um plano para continuar"),!1):(j(null),!0),D=()=>{const V={};return v.fantasyName.trim()||(V.fantasyName="Nome fantasia  obrigatrio"),v.cnpj.trim()?kD(v.cnpj)||(V.cnpj="CNPJ deve ter 14 dgitos"):V.cnpj="CNPJ  obrigatrio",v.phone&&!Lb(v.phone)&&(V.phone="Telefone deve ter 10 ou 11 dgitos (com DDD)"),k(V),Object.keys(V).length===0},I=()=>{const V={};if(g.name.trim()||(V.name="Nome completo  obrigatrio"),g.email.trim()?PD(g.email)||(V.email=Dw(g.email)??"E-mail invlido"):V.email="E-mail  obrigatrio",g.phone.trim()?Lb(g.phone)||(V.phone="Telefone deve ter 10 ou 11 dgitos (com DDD)"):V.phone="Telefone  obrigatrio",!g.password)V.password="Senha  obrigatria";else{const $=kw(g.password);if(!$.isValid){const R=[];$.minLength||R.push("8 caracteres"),$.hasUpperCase||R.push("1 letra maiscula"),$.hasNumber||R.push("1 nmero"),$.hasSpecialChar||R.push("1 caractere especial"),V.password=`A senha deve conter: ${R.join(", ")}`}}return g.password!==g.confirmPassword&&(V.confirmPassword="As senhas no coincidem"),g.acceptedTerms||(V.acceptedTerms="Voc deve aceitar os termos para continuar"),S(V),Object.keys(V).length===0},O=()=>{P()&&n(2)},F=()=>{D()&&n(3)},X=async()=>{if(I()){u(!0);try{if(!h.selectedPlatformPlanId){n(1),j("Selecione um plano para continuar");return}const V=v.estimatedUsers?.trim()?Number(Pr(v.estimatedUsers)):void 0,$={planId:h.selectedPlatformPlanId,companyName:v.fantasyName,cnpj:v.cnpj?Pr(v.cnpj):void 0,companyPhone:v.phone?Pr(v.phone):void 0,site:v.website||void 0,addressCity:v.city||void 0,addressState:v.state||void 0,addressCountry:v.country||void 0,estimatedUsers:typeof V=="number"&&!Number.isNaN(V)?V:void 0,adminName:g.name,adminEmail:d0(g.email),adminPhone:g.phone?Pr(g.phone):void 0,adminPassword:g.password,adminPasswordConfirmation:g.confirmPassword,acceptTerms:!!g.acceptedTerms};await Dn.post("/signup",$),o(!0)}catch(V){const $=V?.response?.data?.message,R=Array.isArray($)?$.join(`
`):typeof $=="string"?$:"Erro ao criar conta. Verifique os dados e tente novamente.";S({api:R})}finally{u(!1)}}},Q=["Plano","Empresa","Acesso"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Il,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 py-6 sm:py-12",children:r?e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-12",children:e.jsx(MD,{companyName:v.fantasyName,userEmail:g.email})}):e.jsxs(e.Fragment,{children:[e.jsx(jD,{currentStep:s,steps:Q}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-4 sm:p-10 mt-5 sm:mt-8",children:[s===1&&e.jsx(AD,{data:h,onChange:f,onNext:O,error:w}),s===2&&e.jsx(TD,{data:v,onChange:x,onNext:F,onBack:()=>n(1),errors:C}),s===3&&e.jsx(ID,{data:g,onChange:N,onSubmit:X,onBack:()=>n(2),errors:E,isLoading:c})]})]})})]})}function OD({onSubmit:t,isLoading:s,error:n,errorAction:r}){const o=Jt(),[c,u]=m.useState(!1),[h,f]=m.useState(""),[v,x]=m.useState(""),[g,N]=m.useState(!1),[w,j]=m.useState({}),{openWaitlist:C}=$o(),k=()=>{const P={};return h.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)||(P.email="E-mail invlido"):P.email="E-mail  obrigatrio",v||(P.password="Senha  obrigatria"),j(P),Object.keys(P).length===0},E=async P=>{P.preventDefault(),k()&&await t({email:h,password:v,rememberMe:g})},S=()=>{o("/forgot-password")};return e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-gray-900 mb-2",children:"Bem-vindo de volta"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Entre com suas credenciais para acessar o sistema"})]}),n&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:[e.jsx("p",{className:"text-sm text-red-700",children:n}),r?e.jsx("div",{className:"mt-3",children:r}):null]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["E-mail corporativo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ro,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:h,onChange:P=>f(P.target.value),placeholder:"seu.email@empresa.com.br",className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${w.email?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,disabled:s})]}),w.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:w.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(mp,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:c?"text":"password",value:v,onChange:P=>x(P.target.value),placeholder:"",className:`w-full pl-12 pr-12 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all ${w.password?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,disabled:s}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",disabled:s,children:c?e.jsx(vg,{className:"w-5 h-5"}):e.jsx(Tr,{className:"w-5 h-5"})})]}),w.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:w.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:P=>N(P.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600",disabled:s}),e.jsx("span",{className:"text-sm text-gray-700",children:"Lembrar de mim neste dispositivo"})]}),e.jsx("button",{type:"button",onClick:S,className:"text-sm text-blue-600 hover:text-blue-700 hover:underline font-medium",disabled:s,children:"Esqueci minha senha"})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-3.5 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 font-medium",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):"Entrar"}),e.jsxs("p",{className:"text-center text-sm text-gray-600 pt-2",children:["Ainda no tem conta?"," ",e.jsx("button",{type:"button",onClick:()=>{C("privacidade:cta:comecar-teste-gratis")},className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Comear teste grtis"})]})]})}function LD({email:t,onSubmit:s,onBack:n,isLoading:r,error:o}){const[c,u]=m.useState(["","","","","",""]),h=m.useRef([]);m.useEffect(()=>{h.current[0]?.focus()},[]);const f=(w,j)=>{if(!/^\d*$/.test(j))return;const C=[...c];C[w]=j.slice(-1),u(C),j&&w<5&&h.current[w+1]?.focus()},v=(w,j)=>{j.key==="Backspace"&&!c[w]&&w>0&&h.current[w-1]?.focus()},x=w=>{w.preventDefault();const j=w.clipboardData.getData("text").replace(/\D/g,"");if(j.length===6){const C=j.split("");u(C),h.current[5]?.focus()}},g=async w=>{w.preventDefault();const j=c.join("");j.length===6&&await s({email:t,code:j})},N=c.every(w=>w!=="");return e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[e.jsx("div",{className:"mb-4 md:mb-6 flex justify-center",children:e.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-[#4F46E5]/10 rounded-full flex items-center justify-center",children:e.jsx(wu,{className:"w-7 h-7 md:w-8 md:h-8 text-[#4F46E5]"})})}),e.jsx("h2",{className:"text-gray-900 mb-2",children:"Confirme sua identidade"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base px-2",children:"Digite o cdigo de 6 dgitos enviado para seu mtodo de autenticao configurado"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 break-all px-2",children:t})]}),o&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:o})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-3 text-center",children:"Cdigo de verificao"}),e.jsx("div",{className:"flex gap-1.5 sm:gap-2 justify-center",onPaste:x,children:c.map((w,j)=>e.jsx("input",{ref:C=>{h.current[j]=C},type:"text",inputMode:"numeric",maxLength:1,value:w,onChange:C=>f(j,C.target.value),onKeyDown:C=>v(j,C),className:"w-10 h-12 sm:w-12 sm:h-14 text-center text-lg sm:text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4F46E5] focus:border-[#4F46E5] transition-all",disabled:r},j))}),e.jsxs("p",{className:"text-xs text-gray-500 text-center mt-3 px-2",children:[" Dica para teste: use o cdigo ",e.jsx("span",{className:"font-mono font-semibold",children:"123456"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"submit",disabled:r||!N,className:"w-full bg-[#4F46E5] text-white px-6 md:px-8 py-3 rounded-lg hover:bg-[#4338CA] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Verificando..."]}):"Confirmar cdigo"}),e.jsxs("button",{type:"button",onClick:n,disabled:r,className:"w-full px-6 md:px-8 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx(Xs,{className:"w-5 h-5"}),"Voltar"]})]})]})}const FD={};function $D(){const t=Jt(),{login:s,verifyTwoFactor:n,requiresTwoFactor:r,pendingEmail:o}=Fl(),[c,u]=m.useState(!1),[h,f]=m.useState(null),[v,x]=m.useState(""),[g,N]=m.useState(!1),[w,j]=m.useState(!1),[C,k]=m.useState(null),[E,S]=m.useState(0);m.useEffect(()=>{si()},[]),m.useEffect(()=>{if(h!=="ACCOUNT_BLOCKED")return;const V="__one_media_cache_rescue_login__";sessionStorage.getItem(V)!=="1"&&(sessionStorage.setItem(V,"1"),(async()=>{try{if(si(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),"serviceWorker"in navigator){const $=await navigator.serviceWorker.getRegistrations();await Promise.all($.map(R=>R.unregister()))}if("caches"in window){const $=await caches.keys();await Promise.all($.map(R=>caches.delete(R)))}}catch{}finally{window.location.replace("/login")}})())},[h]);const P=m.useMemo(()=>v||o||"",[v,o]);m.useEffect(()=>{if(E<=0)return;const V=window.setInterval(()=>{S($=>Math.max(0,$-1))},1e3);return()=>window.clearInterval(V)},[E]);const D=async()=>{if(P)try{k(null),j(!0);const V=await Dn.post("/auth/resend-verification",{email:P}),$=typeof V.data?.message=="string"&&V.data.message.trim()?V.data.message:"Se a conta existir e o e-mail ainda no estiver verificado, enviamos uma nova confirmao.";k($);const R=typeof V.data?.retryAfterSeconds=="number"?V.data.retryAfterSeconds:60;S(Math.max(1,Math.min(600,R)))}catch(V){const $=zc(V,"No foi possvel reenviar o e-mail. Tente novamente.");k($.message),$.retryAfterSeconds&&S(Math.max(1,Math.min(600,$.retryAfterSeconds)))}finally{j(!1)}},I=async V=>{try{f(null),k(null),x(V.email),N(!1),u(!0),await s(V)}catch($){const R=zc($,"Erro ao fazer login");f(R.message),N(R.code==="EMAIL_NOT_VERIFIED")}finally{u(!1)}},O=async V=>{try{f(null),k(null),N(!1),u(!0),await n(V)}catch($){const R=zc($,"Erro ao verificar cdigo");f(R.message),N(R.code==="EMAIL_NOT_VERIFIED")}finally{u(!1)}},F=()=>{f(null)},X=V=>{const $=Dn.defaults.baseURL||"/api",R=$==="__MISSING_API_BASE_URL__"?"/api":$,J=`${(FD?.VITE_APP_URL||window.location.origin).replace(/\/$/,"")}/oauth-callback`;return`${R.replace(/\/$/,"")}/auth/${V}?redirect_uri=${encodeURIComponent(J)}`},Q=V=>{const $=X(V);window.location.href=$};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:[r&&o?e.jsx(LD,{email:o,onSubmit:O,onBack:F,isLoading:c,error:h}):e.jsx(OD,{onSubmit:I,isLoading:c,error:h,errorAction:g&&P?e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{type:"button",onClick:D,disabled:w||E>0,className:"inline-flex w-full items-center justify-center rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-blue-700 ring-1 ring-inset ring-blue-200 hover:bg-blue-50 disabled:opacity-60 disabled:cursor-not-allowed",children:w?"Enviando...":E>0?`Reenviar em ${E}s`:"Reenviar e-mail de confirmao"}),e.jsx("p",{className:"text-xs text-red-700/80",children:"Confirme o e-mail para liberar o acesso. Verifique tambm a caixa de spam."}),C?e.jsx("p",{className:"text-xs text-gray-600",children:C}):null]}):null}),!r&&e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[e.jsx("span",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{children:"ou"}),e.jsx("span",{className:"flex-1 h-px bg-gray-200"})]}),e.jsxs("button",{type:"button",onClick:()=>Q("google"),className:"w-full rounded-xl px-4 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 transition-colors flex items-center justify-center gap-3 shadow-sm",children:[e.jsxs("svg",{"aria-hidden":!0,viewBox:"0 0 24 24",className:"h-5 w-5 shrink-0",role:"img",children:[e.jsx("path",{fill:"#EA4335",d:"M23.5 12.3c0-.8-.1-1.6-.3-2.3H12v4.4h6.5c-.3 1.4-1 2.6-2.1 3.4v2.8h3.3c1.9-1.7 3-4.2 3-7.3z"}),e.jsx("path",{fill:"#34A853",d:"M12 24c2.7 0 5-.9 6.6-2.5l-3.3-2.8c-.9.6-2 1-3.3 1-2.6 0-4.7-1.7-5.5-4H3.1v2.5C4.6 21.8 7.5 24 12 24z"}),e.jsx("path",{fill:"#FBBC05",d:"M6.5 14.7c-.2-.6-.3-1.3-.3-2s.1-1.4.3-2V8.2H3.1C2.4 9.5 2 11 2 12.7s.4 3.2 1.1 4.5l3.4-2.5z"}),e.jsx("path",{fill:"#4285F4",d:"M12 7.5c1.5 0 2.8.5 3.8 1.5l2.9-2.9C17 3.8 14.7 2.7 12 2.7 8.5 2.7 5.6 4.9 4.2 8.2l3.4 2.5c.8-2.3 2.9-3.9 5.4-3.9z"})]}),"Entrar com Google"]}),e.jsxs("button",{type:"button",onClick:()=>Q("outlook"),className:"w-full rounded-xl px-4 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 transition-colors flex items-center justify-center gap-3 shadow-sm",children:[e.jsxs("svg",{"aria-hidden":!0,viewBox:"0 0 48 48",className:"h-5 w-5 shrink-0",role:"img",children:[e.jsx("rect",{x:"6",y:"6",width:"36",height:"36",rx:"4",fill:"#0078D4"}),e.jsx("path",{fill:"#ffffff",d:"M13 14h10c4.4 0 7 2.4 7 6.5 0 4.4-2.9 7-7.5 7H16v6.5H13V14zm3 11h6.3c2.8 0 4.4-1.4 4.4-4s-1.5-4-4.3-4H16v8z"})]}),"Entrar com Outlook"]})]})]}),e.jsx("div",{className:"mt-8 text-center px-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Problemas para acessar?"," ",e.jsx("button",{onClick:()=>t("/contato"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",children:"Entre em contato com o suporte"})]})})]})]})}function zD(t){const s=t?.response?.data?.message;return typeof s=="string"&&s.trim()?s:"No foi possvel confirmar seu e-mail. Tente novamente."}function BD(){const t=Jt(),s=m.useMemo(()=>new URLSearchParams(window.location.search).get("token"),[]),[n,r]=m.useState("loading"),[o,c]=m.useState("Confirmando seu e-mail...");return m.useEffect(()=>{let u=!1;return(async()=>{if(!s){r("error"),c("Token de verificao no encontrado. Verifique se voc abriu o link completo do e-mail.");return}r("loading"),c("Confirmando seu e-mail...");try{if(await Dn.post("/auth/verify-email",{token:s}),u)return;r("success"),c("E-mail confirmado com sucesso! Agora voc j pode fazer login.")}catch(f){if(u)return;r("error"),c(zD(f))}})(),()=>{u=!0}},[s]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Il,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:e.jsxs("div",{className:"text-center",children:[n==="loading"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-blue-50 flex items-center justify-center",children:e.jsx("div",{className:"h-7 w-7 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),n==="success"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-green-50 flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),n==="error"&&e.jsx("div",{className:"mx-auto mb-6 h-14 w-14 rounded-full bg-red-50 flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n==="loading"&&"Confirmando e-mail",n==="success"&&"Tudo certo!",n==="error"&&"No foi possvel confirmar"]}),e.jsx("p",{className:"mt-3 text-gray-600",children:o}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>t("/login"),className:"w-full sm:w-auto px-6 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors",children:"Ir para Login"}),e.jsx("button",{onClick:()=>t("/"),className:"w-full sm:w-auto px-6 py-3 rounded-xl border border-gray-200 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Voltar ao site"})]}),n==="error"&&e.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"Se o link expirou, voc pode solicitar um novo e-mail de confirmao na tela de login."})]})})})]})}function UD(){const t=Jt(),[s,n]=m.useState(""),[r,o]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState(0);m.useEffect(()=>{if(h<=0)return;const x=window.setInterval(()=>{f(g=>Math.max(0,g-1))},1e3);return()=>window.clearInterval(x)},[h]);const v=async x=>{if(x.preventDefault(),!(r||h>0))try{o(!0),u(null);const g=await Dn.post("/auth/forgot-password",{email:s}),N=typeof g.data?.message=="string"&&g.data.message.trim()?g.data.message:"Se existir uma conta para este e-mail, enviaremos um link de redefinio.";u(N),ye.success(N);const w=typeof g.data?.retryAfterSeconds=="number"?g.data.retryAfterSeconds:0;w>0&&f(Math.max(1,Math.min(600,w)))}catch(g){const N=zc(g,"No foi possvel enviar o e-mail. Tente novamente.");u(N.message),ye.error(N.message),N.retryAfterSeconds&&f(Math.max(1,Math.min(600,N.retryAfterSeconds)))}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/login"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Esqueceu sua senha?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Informe seu e-mail. Se existir uma conta, enviaremos um link para redefinir sua senha."}),e.jsxs("form",{onSubmit:v,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"E-mail"}),e.jsx("input",{type:"email",value:s,onChange:x=>n(x.target.value),placeholder:"seuemail@exemplo.com",className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-gray-900 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100",required:!0})]}),e.jsx("button",{type:"submit",disabled:r||h>0,className:"w-full rounded-xl bg-blue-600 px-4 py-3 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:r?"Enviando...":h>0?`Aguarde ${h}s`:"Enviar link de redefinio"})]}),c?e.jsx("p",{className:"mt-4 text-sm text-gray-700",children:c}):null,e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t("/login"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium text-sm",children:"Voltar para o login"})})]})})]})}function VD(){const t=Jt(),s=m.useMemo(()=>{try{return new URLSearchParams(window.location.search).get("token")??""}catch{return""}},[]),[n,r]=m.useState(""),[o,c]=m.useState(""),[u,h]=m.useState(!1),f=async v=>{if(v.preventDefault(),!u){if(!s){ye.error("Token invlido. Abra o link do e-mail novamente.");return}if(n.length<8){ye.error("A senha deve ter no mnimo 8 caracteres.");return}if(n!==o){ye.error("As senhas no conferem.");return}try{h(!0);const g=(await Dn.post("/auth/reset-password",{token:s,newPassword:n})).data?.message?.trim()||"Senha atualizada. Voc j pode fazer login.";ye.success(g),t("/login")}catch(x){const g=zc(x,"No foi possvel redefinir a senha.");ye.error(g.message)}finally{h(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/login"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar"})]})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-8 sm:py-20",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-5 sm:p-10",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Redefinir senha"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Digite sua nova senha abaixo."}),s?null:e.jsx("div",{className:"mt-6 rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:"Token invlido. Abra o link do e-mail novamente."}),e.jsxs("form",{onSubmit:f,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nova senha"}),e.jsx("input",{type:"password",value:n,onChange:v=>r(v.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-gray-900 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100",minLength:8,required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Mnimo de 8 caracteres."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar nova senha"}),e.jsx("input",{type:"password",value:o,onChange:v=>c(v.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-gray-900 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100",minLength:8,required:!0})]}),e.jsx("button",{type:"submit",disabled:u||!s,className:"w-full rounded-xl bg-blue-600 px-4 py-3 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:u?"Salvando...":"Atualizar senha"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t("/login"),className:"text-blue-600 hover:text-blue-700 hover:underline font-medium text-sm",children:"Voltar para o login"})})]})})]})}function HD(){const{user:t,logout:s}=Fl(),n=Jt();if(!t)return n("/login"),null;const r=[{icon:hw,name:"Dashboard",path:"/dashboard",disabled:!1},{icon:$c,name:"Inventrio",path:"/inventario",disabled:!0},{icon:s0,name:"Clientes",path:"/clientes",disabled:!0},{icon:nn,name:"Propostas",path:"/propostas",disabled:!0},{icon:xw,name:"Campanhas",path:"/campanhas",disabled:!0},{icon:ju,name:"Reservas",path:"/reservas",disabled:!0},{icon:Nu,name:"Financeiro",path:"/financeiro",disabled:!0},{icon:Ro,name:"Mensagens",path:"/mensagens",disabled:!0},{icon:fk,name:"Mdia Kit",path:"/midiakit",disabled:!0},{icon:Qg,name:"Atividades",path:"/atividades",disabled:!0},{icon:hp,name:"Configuraes",path:"/configuracoes",disabled:!0}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(qk,{className:"w-4 h-4"}),"Sair"]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-gray-900 mb-2",children:["Bem-vindo, ",t.name.split(" ")[0],"!"]}),e.jsx("p",{className:"text-gray-600",children:"Voc est autenticado no sistema OOH Manager"}),t.twoFactorEnabled&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:[e.jsx("span",{children:""}),"2FA Ativado (",t.twoFactorType,")"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>e.jsx("button",{onClick:()=>!o.disabled&&n(o.path),disabled:o.disabled,className:`p-6 bg-white rounded-xl border-2 transition-all text-left ${o.disabled?"border-gray-200 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-[#4F46E5] hover:shadow-md cursor-pointer"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${o.disabled?"bg-gray-100":"bg-[#4F46E5]/10"}`,children:e.jsx(o.icon,{className:`w-6 h-6 ${o.disabled?"text-gray-400":"text-[#4F46E5]"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:o.name}),e.jsx("p",{className:"text-sm text-gray-500",children:o.disabled?"Em desenvolvimento":"Acessar mdulo"})]})]})},o.path))}),e.jsxs("div",{className:"mt-8 p-6 bg-blue-50 border border-blue-200 rounded-xl",children:[e.jsx("h3",{className:"text-blue-900 mb-2",children:" Login realizado com sucesso!"}),e.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"Esta  uma interface de demonstrao. Os mdulos do sistema esto sendo desenvolvidos e sero habilitados em breve."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-semibold mb-1",children:"Dados do usurio:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ID: ",t.id]}),e.jsxs("li",{children:[" Company ID: ",t.companyId]}),e.jsxs("li",{children:[" Status: ",t.status]}),e.jsxs("li",{children:[" Super Admin: ",t.isSuperAdmin?"Sim":"No"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-semibold mb-1",children:"Credenciais de teste:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1",children:[e.jsx("li",{children:" Com 2FA: carlos.mendes@outdoorbrasil.com.br"}),e.jsx("li",{children:" Sem 2FA: ana.silva@outdoorbrasil.com.br"}),e.jsx("li",{children:" Senha: senha123"}),e.jsx("li",{children:" Cdigo 2FA: 123456"})]})]})]})]})]})]})}function qD(){const t=Jt();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 sm:py-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3",children:e.jsx("img",{src:Il,alt:"OneMedia",className:"h-9 sm:h-12"})}),e.jsx("button",{onClick:()=>t("/"),className:"text-sm sm:text-base text-gray-700 hover:text-blue-600 transition-colors",children:"Voltar ao site"})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16 lg:py-24",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-gray-900 mb-3 sm:mb-5",children:"Fale com nosso time comercial"}),e.jsx("p",{className:"text-base sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Interessado no plano Enterprise ou tem dvidas? Entre em contato conosco."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com",className:"bg-white rounded-2xl p-5 sm:p-8 border-2 border-gray-200 hover:border-blue-600 transition-all hover:shadow-xl group",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-4 sm:mb-5 group-hover:bg-gradient-to-br group-hover:from-blue-600 group-hover:to-blue-700 transition-all shadow-lg shadow-transparent group-hover:shadow-blue-500/30",children:e.jsx(Ro,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 group-hover:text-white transition-colors"})}),e.jsx("h3",{className:"text-base sm:text-xl font-semibold text-gray-900 mb-2",children:"E-mail"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:"Envie um e-mail para nossa equipe comercial"}),e.jsx("p",{className:"text-blue-600 font-medium text-sm sm:text-base group-hover:text-blue-700",children:"thifi.contato.oficial@gmail.com"})]}),e.jsxs("a",{href:"https://wa.me/5561982541672",target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-2xl p-5 sm:p-8 border-2 border-gray-200 hover:border-blue-600 transition-all hover:shadow-xl group",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-4 sm:mb-5 group-hover:bg-gradient-to-br group-hover:from-blue-600 group-hover:to-blue-700 transition-all shadow-lg shadow-transparent group-hover:shadow-blue-500/30",children:e.jsx(El,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 group-hover:text-white transition-colors"})}),e.jsx("h3",{className:"text-base sm:text-xl font-semibold text-gray-900 mb-2",children:"WhatsApp"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:"Fale diretamente com nosso time"}),e.jsx("p",{className:"text-blue-600 font-medium text-sm sm:text-base group-hover:text-blue-700",children:"(61) 98254-1672"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>t("/"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors font-medium",children:[e.jsx(Xs,{className:"w-4 h-4"}),"Voltar para o site"]})})]})]})}function WD(){const t=Jt(),{openWaitlist:s}=$o();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 sm:h-20 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:e.jsx("img",{src:Il,alt:"OneMedia",className:"h-7 sm:h-10 transition-transform group-hover:scale-105"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#4F46E5] transition-colors px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg hover:bg-gray-50",children:[e.jsx(Xs,{className:"w-4 h-4"}),"Voltar ao site"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 sm:w-20 sm:h-20 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-3xl shadow-xl mb-5",children:e.jsx(Nx,{className:"w-7 h-7 sm:w-10 sm:h-10 text-white"})}),e.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Termos de Uso"}),e.jsx("p",{className:"text-base sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Conhea as regras e diretrizes para o uso da plataforma OneMedia."})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Nx,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"1. Aceitao dos Termos"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"Ao acessar e usar o OneMedia, voc concorda em cumprir e estar vinculado a estes Termos de Uso. Se voc no concordar com qualquer parte destes termos, no dever usar nossa plataforma."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(wu,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"2. Descrio do Servio"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"O OneMedia  uma plataforma SaaS completa para gesto de mdia OOH/DOOH, incluindo mdulos de inventrio, propostas comerciais, campanhas, gesto financeira, mdia kit e muito mais. Oferecemos ferramentas especializadas para agncias, veculos e proprietrios de mdia exterior."})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Xg,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold mb-2 sm:mb-3",children:"3. Perodo de Teste Gratuito"}),e.jsx("p",{className:"text-sm sm:text-base leading-relaxed opacity-95 mb-3",children:"Oferecemos um perodo de teste gratuito de 30 dias com acesso completo  plataforma. Durante este perodo:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Acesso completo a todos os recursos"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Sem necessidade de carto de crdito"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{className:"opacity-95",children:"Cancelamento a qualquer momento"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(xu,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"4. Uso Aceitvel"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed mb-3",children:"Voc concorda em usar o servio apenas para fins legais e de acordo com todas as leis aplicveis.  estritamente proibido:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Utilizar a plataforma para atividades ilegais ou fraudulentas"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Tentar acessar reas restritas ou dados de outros usurios"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Fazer engenharia reversa ou copiar funcionalidades da plataforma"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Sobrecarregar nossos servidores com uso abusivo"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(sk,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"5. Propriedade Intelectual"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"Todo o contedo, recursos, funcionalidades e design do OneMedia so de propriedade exclusiva da empresa e protegidos por direitos autorais, marcas registradas e outras leis de propriedade intelectual. Os dados inseridos por voc permanecem de sua propriedade."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(j4,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"6. Limitao de Responsabilidade"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed mb-3",children:'O OneMedia  fornecido "como est". No garantimos que o servio ser ininterrupto ou livre de erros. Em nenhuma circunstncia seremos responsveis por:'}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Perda de dados ou lucros cessantes"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Danos indiretos ou consequenciais"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Uso indevido da plataforma por terceiros"})]})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Nx,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold mb-2 sm:mb-3",children:"7. Modificaes dos Termos"}),e.jsx("p",{className:"text-sm sm:text-base leading-relaxed opacity-95",children:"Reservamo-nos o direito de modificar estes termos a qualquer momento. Alteraes significativas sero notificadas por email ou atravs da plataforma. O uso continuado aps as modificaes constitui aceitao dos novos termos."})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ltima atualizao: ",e.jsx("span",{className:"font-medium text-gray-900",children:new Date().toLocaleDateString("pt-BR")})]})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>{s("termos:cta:comecar-teste-gratis")},className:"inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white px-8 py-4 rounded-full hover:shadow-xl hover:scale-105 transition-all text-lg font-medium",children:["Comear teste grtis",e.jsx(Xs,{className:"w-5 h-5 rotate-180"})]})})]})]})}function ZD(){const t=Jt(),{openWaitlist:s}=$o();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 sm:h-20 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:e.jsx("img",{src:Il,alt:"OneMedia",className:"h-7 sm:h-10 transition-transform group-hover:scale-105"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-[#4F46E5] transition-colors px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg hover:bg-gray-50",children:[e.jsx(Xs,{className:"w-4 h-4"}),"Voltar ao site"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl shadow-xl mb-5",children:e.jsx(wu,{className:"w-7 h-7 sm:w-10 sm:h-10 text-white"})}),e.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Poltica de Privacidade"}),e.jsx("p",{className:"text-base sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Sua privacidade  fundamental para ns. Conhea como protegemos e gerenciamos seus dados."})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Tr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"1. Informaes que Coletamos"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3",children:"Coletamos informaes que voc nos fornece diretamente, incluindo:"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Nome completo e informaes de contato"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Dados da empresa (CNPJ, razo social, etc.)"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Informaes de inventrio de mdia"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Dados de campanhas e propostas"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(nn,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"2. Como Usamos suas Informaes"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3",children:"Usamos as informaes coletadas para:"}),e.jsxs("ul",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Fornecer, manter e melhorar nossos servios"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Processar transaes e enviar notificaes"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Responder a comentrios e perguntas"})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:"Enviar informaes tcnicas e atualizaes"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(s0,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"3. Compartilhamento de Informaes"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"No vendemos, trocamos ou transferimos suas informaes pessoais para terceiros sem seu consentimento, exceto quando necessrio para fornecer o servio ou quando exigido por lei."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(mp,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"4. Segurana dos Dados"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:"Implementamos medidas de segurana apropriadas para proteger suas informaes contra acesso no autorizado, alterao, divulgao ou destruio."})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(wu,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold mb-2 sm:mb-3",children:"5. LGPD - Lei Geral de Proteo de Dados"}),e.jsx("p",{className:"text-sm sm:text-base leading-relaxed opacity-95",children:"Estamos em conformidade com a LGPD (Lei 13.709/2018). Voc tem direito de acessar, corrigir, excluir ou solicitar a portabilidade de seus dados pessoais a qualquer momento."})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-5 sm:p-8 shadow-md sm:shadow-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ro,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3",children:"6. Contato"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed mb-3",children:"Para questes sobre privacidade ou proteo de dados, entre em contato:"}),e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com",className:"inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-700 font-medium transition-colors text-sm sm:text-base",children:[e.jsx(Ro,{className:"w-4 h-4"}),"thifi.contato.oficial@gmail.com"]})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white rounded-full shadow-lg border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ltima atualizao: ",e.jsx("span",{className:"font-medium text-gray-900",children:new Date().toLocaleDateString("pt-BR")})]})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>{s("privacidade:cta:comecar-teste-gratis")},className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-4 rounded-full hover:shadow-xl hover:scale-105 transition-all text-lg font-medium",children:["Comear teste grtis",e.jsx(Xs,{className:"w-5 h-5 rotate-180"})]})})]})]})}function GD(){const t=Jt(),{openWaitlist:s}=$o();return e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur border-b border-gray-100",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-5 py-2 flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-8 w-auto"}),e.jsx("span",{className:"hidden sm:inline text-xs text-gray-600 whitespace-nowrap",children:"Suite OOH/DOOH"})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:()=>t("/login"),className:"text-xs sm:text-sm text-gray-700 hover:text-blue-600 whitespace-nowrap",children:"Entrar"}),e.jsxs("button",{onClick:()=>s("mobile-topbar:teste-gratis"),className:"inline-flex items-center gap-1 rounded-full bg-blue-600 px-3 py-2 text-[11px] font-semibold text-white shadow-sm hover:bg-blue-700 whitespace-nowrap",children:["Teste grtis",e.jsx(or,{className:"h-4 w-4"})]}),e.jsx("button",{"aria-label":"Menu",className:"p-2 text-gray-700 hover:text-blue-600 lg:hidden",children:e.jsx(Yg,{className:"h-5 w-5"})})]})]})})}const KD=[{label:"Inventrio e faces",value:"Organize tudo em minutos"},{label:"Propostas e reservas",value:"Envie e feche rpido"},{label:"Financeiro automtico",value:"Cobrana e alertas"}],QD=["Clear Channel","JCDecaux","Kallas","MediaOut","OutdoorBR"];function XD(){Jt();const{openWaitlist:t}=$o();return e.jsx("section",{className:"pt-28 pb-16 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-5 space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-xs font-semibold text-blue-700",children:[e.jsx(Cl,{className:"h-4 w-4"}),"Nova experincia mobile"]}),e.jsx("h1",{className:"text-3xl font-semibold text-gray-900 leading-snug",children:"Tudo que seu time precisa para vender mdia OOH/DOOH sem planilhas."}),e.jsx("p",{className:"text-base text-gray-600",children:"Capture leads, organize inventrio, envie propostas e cobre automaticamente com a mesma plataforma que voc j usa no desktop."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>t("mobile-landing:hero:trial-30-days"),className:"inline-flex items-center justify-center gap-2 rounded-full bg-blue-600 px-5 py-3 text-white font-semibold shadow-md hover:bg-blue-700",children:["Testar grtis 30 dias",e.jsx(or,{className:"h-5 w-5"})]}),e.jsxs("button",{onClick:()=>t("mobile-landing:hero:talk-to-sales"),className:"inline-flex items-center justify-center gap-2 rounded-full border border-gray-300 px-5 py-3 text-sm font-semibold text-gray-900 hover:border-blue-200",children:["Falar com vendas",e.jsx(h4,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-white shadow-sm p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Fa,alt:"OneMedia",className:"h-8"}),e.jsx(yw,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"SLA e suporte humano"})]}),e.jsx("div",{className:"rounded-xl border border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50 p-3",children:e.jsx("img",{src:pp,alt:"Dashboard",className:"w-full rounded-lg shadow"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:KD.map(s=>e.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-gray-50 px-3 py-2",children:[e.jsx(ja,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s.label}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:s.value})]})]},s.label))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Confiado por equipes de mdia"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[QD.map(s=>e.jsx("span",{className:"rounded-full border border-gray-200 bg-white px-3 py-2 text-xs font-semibold text-gray-700 shadow-sm",children:s},s)),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-2 text-xs font-semibold text-gray-700 shadow-sm",children:[e.jsx("img",{src:n0,alt:"OutdoorBR",className:"h-4"}),"OutdoorBR"]})]})]})]})})}const Sx=[{key:"inventario",title:"Inventrio e pontos",description:"Cadastro geolocalizado de pontos, faces e donos com fotos e status em tempo real.",bullets:["Geolocalizao automtica","Faces com checklist de qualidade","Versionamento e histrico"],stat:"70% tempo operacional",image:a0,icon:ra,accent:"from-blue-500/10 to-blue-600/5"},{key:"propostas",title:"Propostas e reservas",description:"Monte propostas com disponibilidade real, templates e assinatura digital.",bullets:["Templates com fotos reais","Disponibilidade em tempo real","Envio com tracking"],stat:"+85% converso",image:r0,icon:nn,accent:"from-purple-500/10 to-purple-600/5"},{key:"campanhas",title:"Campanhas e ativaes",description:"Planeje veiculaes, controle ocupao e acompanhe SLA por cliente.",bullets:["Calendrio visual","Alertas de sobreposio","Paineis por cliente"],stat:"100% visibilidade de veiculao",image:i0,icon:fu,accent:"from-amber-500/10 to-orange-500/5"},{key:"financeiro",title:"Financeiro automatizado",description:"Cobrana ligada s campanhas, boletos e alertas de inadimplncia.",bullets:["Baixas automticas","Emisso recorrente","Relatrios de margem"],stat:"78% inadimplncia",image:o0,icon:Ou,accent:"from-emerald-500/10 to-emerald-600/5"},{key:"insights",title:"Dashboard e mdia kit",description:"Inteligncia em tempo real e mdia kit digital com mapa interativo.",bullets:["KPIs em tempo real","Mapa com filtros","Compartilhamento seguro"],stat:"+92% engajamento",image:pp,icon:Cl,accent:"from-indigo-500/10 to-indigo-600/5"}];function YD(){const[t,s]=m.useState(Sx[0].key),[n,r]=m.useState(0),o=m.useMemo(()=>Sx.map(x=>({...x})),[]),c=o.find(x=>x.key===t)??o[0],u=c.icon,h=x=>{s(x);const g=o.findIndex(N=>N.key===x);g>=0&&r(g)},f=()=>{r(x=>{const g=(x+1)%o.length;return s(o[g].key),g})},v=()=>{r(x=>{const g=(x-1+o.length)%o.length;return s(o[g].key),g})};return m.useEffect(()=>{const x=window.setInterval(()=>{f()},3e3);return()=>window.clearInterval(x)},[o.length]),e.jsx("section",{id:"mobile-modulos",className:"py-16",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-5 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700",children:"Fluxos na palma da mo"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Escolha o mdulo e veja o fluxo mobile"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Navegao simples, cartes claros e os mesmos dados do desktop, sem abrir mo da velocidade."})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:Sx.map(x=>e.jsxs("button",{onClick:()=>h(x.key),className:`flex items-center gap-2 whitespace-nowrap rounded-full border px-3 py-2 text-sm font-semibold shadow-sm transition-colors ${x.key===t?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-blue-200"}`,children:[e.jsx(x.icon,{className:"h-4 w-4"}),x.title]},x.key))}),e.jsxs("div",{className:`relative rounded-2xl border border-gray-100 bg-gradient-to-br ${c.accent} p-4 shadow-sm space-y-4`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white text-blue-600 shadow",children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600",children:c.description})]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-gray-100 p-3 shadow-sm relative overflow-hidden",children:[e.jsx("img",{src:c.image,alt:c.title,className:"w-full rounded-lg transition-opacity duration-300"},c.key),e.jsx("div",{className:"absolute inset-y-0 left-2 flex items-center",children:e.jsx("button",{"aria-label":"Anterior",onClick:v,className:"rounded-full bg-white/80 border border-gray-200 p-2 shadow hover:bg-white",children:e.jsx(td,{className:"h-5 w-5 text-gray-700"})})}),e.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center",children:e.jsx("button",{"aria-label":"Prximo",onClick:f,className:"rounded-full bg-white/80 border border-gray-200 p-2 shadow hover:bg-white",children:e.jsx($l,{className:"h-5 w-5 text-gray-700"})})})]}),e.jsx("div",{className:"space-y-2",children:c.bullets.map(x=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(ja,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:x})]},x))}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-white px-4 py-3 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(or,{className:"h-4 w-4 text-blue-600"}),"Resultado direto no app"]}),e.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-50 px-3 py-1 rounded-full",children:c.stat})]})]})]})})}const JD=[{title:"Seguro e confivel",description:"Controle de acesso por papel, logs de ao e backups automticos.",icon:yw},{title:"Onboarding assistido",description:"Migrao guiada de planilhas e treinamento para seu time em 7 dias.",icon:El},{title:"Rpido para usar",description:"Interfaces claras no mobile e desktop, com os mesmos dados e permisses.",icon:YE}],eT=[{title:"Vendas",points:["Propostas com fotos reais","Follow-up com tracking","Aprovao digital"]},{title:"Operaes",points:["Checklists em campo","Disponibilidade em tempo real","Alertas de sobreposio"]},{title:"Financeiro",points:["Cobrana ligada  campanha","Recorrncia automtica","Dash de margem e impostos"]},{title:"Marketing",points:["Mdia kit interativo","Mapa com filtros","Links pblicos com token"]}];function tT(){return e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-5 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700",children:"Sempre simples, nunca bsico"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Projetado para a rotina em campo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Modo offline para checklists, notificaes rpidas e layouts claros no celular."})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-semibold text-sm",children:[e.jsx(M4,{className:"h-4 w-4"}),"Mobile primeiro"]}),e.jsx("img",{src:l0,alt:"Mdia kit",className:"w-full rounded-xl"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mapa, fotos, reservas e cobranas em telas otimizadas para toque."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gradient-to-br from-blue-500/10 to-blue-600/5 p-4 shadow-sm flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-semibold text-sm",children:[e.jsx(kk,{className:"h-4 w-4"}),"Desktop sincronizado"]}),e.jsx("p",{className:"text-sm text-gray-700",children:"Nada de verses diferentes: a mesma base de dados em qualquer dispositivo."}),e.jsxs("div",{className:"rounded-xl bg-white border border-gray-100 p-3 shadow-sm space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-800",children:[e.jsx(Cl,{className:"h-4 w-4 text-blue-600"}),"Automao pronta para uso"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Reservas liberam cobrana, campanhas alimentam dashboards e mdia kit atualiza sozinho."})]})]})]}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-3",children:JD.map(t=>e.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm space-y-2",children:[e.jsx(t.icon,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-xs text-gray-600",children:t.description})]},t.title))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Funciona para qualquer time"}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:eT.map(t=>e.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(Oi,{className:"h-4 w-4 text-green-600"}),t.title]}),e.jsx("ul",{className:"mt-2 space-y-1",children:t.points.map(s=>e.jsxs("li",{className:"text-xs text-gray-600",children:[" ",s]},s))})]},t.title))})]})]})})}function sT(){Jt();const{openWaitlist:t}=$o();return e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-5 space-y-6",children:e.jsxs("div",{className:"rounded-3xl border border-blue-100 bg-gradient-to-br from-blue-50 to-white p-6 shadow-sm space-y-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700",children:"Pronto para usar"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Coloque seu inventrio, propostas e financeiro no celular da equipe em dias, no meses."}),e.jsx("p",{className:"text-sm text-gray-600",children:"Teste com dados reais, convide seu time e mantenha tudo sincronizado com o desktop. Sem carto e com suporte humano."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>t("mobile-landing:cta:trial-30-days"),className:"inline-flex items-center justify-center gap-2 rounded-full bg-blue-600 px-5 py-3 text-white font-semibold shadow-md hover:bg-blue-700",children:["Criar conta grtis",e.jsx(or,{className:"h-5 w-5"})]}),e.jsxs("button",{onClick:()=>t("mobile-landing:cta:talk"),className:"inline-flex items-center justify-center gap-2 rounded-full border border-gray-300 px-5 py-3 text-sm font-semibold text-gray-900 hover:border-blue-200",children:["Falar com especialista",e.jsx(jk,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 border border-gray-200 shadow-sm",children:[e.jsx(El,{className:"h-4 w-4 text-blue-600"}),"Onboarding assistido"]}),e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 border border-gray-200 shadow-sm",children:"Suporte em portugus"}),e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 border border-gray-200 shadow-sm",children:"Cancelamento a qualquer momento"})]})]})})})}function nT(){const t=Jt(),s=[{title:"Solues",links:[{label:"Para veculos OOH/DOOH",href:"#"},{label:"Para redes digitais",href:"#"}]},{title:"Recursos",links:[{label:"API (em breve)",href:"#"},{label:"Integraes",href:"#"}]},{title:"Legal",links:[{label:"Poltica de Privacidade",href:"/privacidade",isRoute:!0},{label:"Termos de Uso",href:"/termos",isRoute:!0}]}];return e.jsx("footer",{className:"bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4F46E5] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gesto de Mdia Exterior  Inventrio, propostas, campanhas e financeiro em uma s plataforma."})]}),s.map(n=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:n.title}),e.jsx("ul",{className:"space-y-2",children:n.links.map(r=>e.jsx("li",{children:r.isRoute?e.jsx("button",{onClick:()=>t(r.href),className:"text-sm text-gray-600 hover:text-[#4F46E5] transition-colors",children:r.label}):e.jsx("a",{href:r.href,className:"text-sm text-gray-600 hover:text-[#4F46E5] transition-colors",children:r.label})},r.label))})]},n.title))]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[" ",new Date().getFullYear()," OneMedia. Todos os direitos reservados."]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#4F46E5] transition-colors",children:e.jsx(pw,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://instagram.com/thifi.agency",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#4F46E5] transition-colors",children:e.jsx(mw,{className:"w-5 h-5"})}),e.jsx("a",{href:"mailto:thifi.contato.oficial@gmail.com",className:"text-gray-600 hover:text-[#4F46E5] transition-colors",children:e.jsx(Ro,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://wa.me/5561982541672",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#4F46E5] transition-colors",children:e.jsx(El,{className:"w-5 h-5"})})]})]})]})})}function aT(){return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[e.jsx(GD,{}),e.jsxs("main",{className:"pt-28 pb-16 space-y-12",children:[e.jsx(XD,{}),e.jsx(YD,{}),e.jsx(tT,{}),e.jsx(sT,{})]}),e.jsx(nT,{})]})}function rT(){const t=Jt(),{openWaitlist:s}=$o(),[n,r]=m.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:Il,alt:"OneMedia",className:"h-12"})}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors",children:[e.jsx(Xs,{className:"w-5 h-5"}),"Voltar para Home"]})]})}),e.jsx("div",{className:"pt-32 pb-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl font-medium text-gray-900 mb-6",children:["Escolha o plano ideal",e.jsx("br",{}),"para o seu negcio"]}),e.jsx("p",{className:"text-2xl font-extralight text-gray-700 max-w-3xl mx-auto",children:"Todas as funcionalidades essenciais para revolucionar sua gesto de mdia OOH/DOOH"})]}),e.jsx("div",{className:"mb-16",children:e.jsx(Sw,{})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 rounded-3xl p-12 text-center text-white",children:[e.jsx("h2",{className:"text-4xl font-semibold mb-4",children:"Experimente grtis por 30 dias"}),e.jsx("p",{className:"text-xl mb-8 opacity-95",children:"Teste todas as funcionalidades sem compromisso. No  necessrio carto de crdito."}),e.jsxs("button",{onClick:()=>{s("planos:cta:comecar-teste-gratis")},className:"flex items-center gap-3 px-12 py-5 bg-white text-blue-700 text-2xl rounded-full hover:shadow-2xl transition-all mx-auto font-semibold",children:["Comear teste grtis",e.jsx(or,{className:"w-7 h-7"})]})]}),e.jsxs("div",{className:"mt-20",children:[e.jsx("h2",{className:"text-4xl font-semibold text-gray-900 text-center mb-12",children:"Perguntas Frequentes"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Posso mudar de plano depois?"}),e.jsx("p",{className:"text-gray-700",children:"Sim! Voc pode fazer upgrade ou downgrade do seu plano a qualquer momento, sem burocracia."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Como funciona o perodo de teste?"}),e.jsx("p",{className:"text-gray-700",children:"Voc tem acesso completo a todas as funcionalidades por 30 dias. No pedimos carto de crdito."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Qual a forma de pagamento?"}),e.jsx("p",{className:"text-gray-700",children:"Aceitamos carto de crdito, boleto bancrio e transferncia bancria para planos anuais."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Tem desconto para pagamento anual?"}),e.jsx("p",{className:"text-gray-700",children:"Sim! Oferecemos 20% de desconto para pagamentos anuais antecipados."})]})]})]})]})}),e.jsx("footer",{className:"bg-white py-16 px-6 border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("img",{src:Il,alt:"OneMedia",className:"h-10 mb-6"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/planos"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Preos"}),e.jsx("p",{onClick:()=>r(!0),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Entre em contato conosco"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Produtos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Inventrio"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Propostas"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Campanhas"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Financeiro"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Mdia Kit"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Dashboard"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Solues"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Agncias"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Veculos"}),e.jsx("p",{onClick:()=>{t("/"),setTimeout(()=>{window.location.hash="solucoes"},100)},className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Para Proprietrios"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recursos"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Blog"}),e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Documentao"}),e.jsx("p",{onClick:()=>t("/"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Suporte"}),e.jsx("p",{onClick:()=>t("/contato"),className:"cursor-pointer hover:text-blue-600 transition-colors",children:"Contato"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("p",{className:"text-gray-600",children:" 2026 OneMedia. Todos os direitos reservados."}),e.jsxs("div",{className:"flex gap-6 text-gray-600",children:[e.jsx("button",{type:"button",onClick:()=>t("/privacidade"),className:"hover:text-blue-600 transition-colors",children:"Privacidade"}),e.jsx("button",{type:"button",onClick:()=>t("/termos"),className:"hover:text-blue-600 transition-colors",children:"Termos"})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>r(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Entre em contato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha como prefere falar conosco:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("a",{href:"https://wa.me/5561982541672?text=Ol!%20Gostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%20Poderia%20me%20ajudar?",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resposta rpida"})]})]}),e.jsxs("a",{href:"mailto:thifi.contato.oficial@gmail.com?subject=Interesse%20na%20plataforma%20OneMedia&body=Ol!%0A%0AGostaria%20de%20conhecer%20mais%20sobre%20a%20plataforma%20OneMedia%20para%20gesto%20de%20mdia%20OOH/DOOH.%0A%0APoderia%20me%20enviar%20mais%20informaes?%0A%0AObrigado!",className:"flex items-center gap-4 p-4 border-2 border-gray-200 rounded-2xl hover:border-blue-600 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"thifi.contato.oficial@gmail.com"})]})]})]}),e.jsx("button",{onClick:()=>r(!1),className:"w-full mt-6 px-6 py-3 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Fechar"})]})})]})}function iT(){const t=import.meta?.env?.DEV===!0,s=import.meta?.env?.VITE_API_URL,n=typeof s=="string"?s.trim().replace(/\/$/,""):"";return n||(t?"http://localhost:3333/api":"/api")}function oT(){const t=m.useMemo(()=>{const ce=window.location.pathname.split("/").filter(Boolean),ve=ce.findIndex(ze=>ze==="p");return ve>=0?ce[ve+1]:ce[1]},[]),s=m.useMemo(()=>iT(),[]),n=m.useMemo(()=>new URLSearchParams(window.location.search).get("m"),[t]),r=m.useMemo(()=>new URLSearchParams(window.location.search).get("t"),[t]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),[x,g]=m.useState(""),[N,w]=m.useState(""),[j,C]=m.useState(""),[k,E]=m.useState(!1),[S,P]=m.useState(null),[D,I]=m.useState(null),[O,F]=m.useState(null),[X,Q]=m.useState(null),[V,$]=m.useState([]),[R,z]=m.useState(!1),[J,ue]=m.useState(null),[se,fe]=m.useState(""),[H,re]=m.useState(!1),[G,W]=m.useState(null),[ne,K]=m.useState(""),[ee,U]=m.useState(""),le=m.useRef(null),Y=m.useRef([]);Y.current=V;const ae=m.useRef(!1),Ie=!!r;m.useEffect(()=>{try{const ce=localStorage.getItem(`portal_name_${t}`),ve=localStorage.getItem(`portal_contact_${t}`);ce&&K(ce),ve&&U(ve)}catch{}},[t]),m.useEffect(()=>{(async()=>{try{if(h(!0),v(null),!t)throw new Error("Link invlido (hash ausente).");const ve=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}`),ze=await ve.json().catch(()=>null);if(!ve.ok)throw new Error(ze?.message||"No foi possvel carregar a proposta");c(ze)}catch(ve){v(ve?.message||"Erro ao carregar proposta"),c(null)}finally{h(!1)}})()},[s,t]);const $e=async ce=>{try{if(!t||ae.current)return;ae.current=!0,ce?.silent||(z(!0),ue(null));const ve=le.current,ze=ve?ve.scrollHeight-ve.scrollTop-ve.clientHeight<60:!0,He=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/messages`),pt=await He.json().catch(()=>[]);if(!He.ok)throw new Error(pt&&(pt.message||pt.error)||"Erro ao carregar mensagens");const me=Array.isArray(pt)?pt:[];$(me),requestAnimationFrame(()=>{const Oe=le.current;Oe&&ze&&(Oe.scrollTop=Oe.scrollHeight)})}catch(ve){(!ce?.silent||Y.current.length===0)&&ue(ve?.message||"Erro ao carregar mensagens")}finally{ae.current=!1,ce?.silent||z(!1)}};m.useEffect(()=>{$e({silent:!1})},[s,t]),m.useEffect(()=>{if(!t)return;const ce=window.setInterval(()=>{typeof document<"u"&&document.visibilityState!=="visible"||$e({silent:!0})},3e3);return()=>window.clearInterval(ce)},[s,t]);const Ge=async()=>{try{if(E(!0),P(null),I(null),!r)throw new Error("Token ausente.");const ce=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,signerName:x.trim(),signerEmail:N.trim(),comment:j.trim()})}),ve=await ce.json().catch(()=>null);if(!ce.ok)throw new Error(ve?.message||"No foi possvel aprovar");I("Proposta aprovada com sucesso!"),c(ze=>ze&&{...ze,status:"APROVADA"})}catch(ce){P(ce?.message||"Erro ao aprovar")}finally{E(!1)}},Xe=async()=>{try{if(E(!0),P(null),I(null),!r)throw new Error("Token ausente.");const ce=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,signerName:x.trim(),signerEmail:N.trim(),comment:j.trim()})}),ve=await ce.json().catch(()=>null);if(!ce.ok)throw new Error(ve?.message||"No foi possvel rejeitar");I("Proposta rejeitada."),c(ze=>ze&&{...ze,status:"REPROVADA"})}catch(ce){P(ce?.message||"Erro ao rejeitar")}finally{E(!1)}},Je=async(ce,ve)=>{try{if(F(ce),Q(null),!r)throw new Error("Token ausente.");const ze=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/media-decisions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,decisions:[{proposalItemId:ce,decisionStatus:ve}],signerName:(ne||x).trim()||void 0,signerEmail:(ee||N).trim()||void 0,comment:j.trim()||void 0})}),He=await ze.json().catch(()=>null);if(!ze.ok)throw new Error(He?.message||"No foi possvel salvar a deciso");c(He)}catch(ze){Q(ze?.message||"Erro ao salvar deciso")}finally{F(null)}},tt=async()=>{if(!n||!t)return;const ce=(ne||x).trim(),ve=(ee||N).trim(),ze=se.trim();if(W(null),!ce){W("Informe seu nome para enviar a mensagem.");return}if(!ve){W("Informe seu e-mail (ou contato) para enviar a mensagem.");return}if(!ze){W("Escreva uma mensagem.");return}try{re(!0);try{localStorage.setItem(`portal_name_${t}`,ce),localStorage.setItem(`portal_contact_${t}`,ve)}catch{}const He=await fetch(`${s}/public/proposals/${encodeURIComponent(t)}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,senderName:ce,senderContact:ve,contentText:ze})}),pt=await He.json().catch(()=>null);if(!He.ok)throw new Error(pt?.message||"No foi possvel enviar a mensagem");fe(""),$e({silent:!0})}catch(He){W(He?.message||"Erro ao enviar mensagem")}finally{re(!1)}};if(u)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600",children:"Carregando proposta..."})});if(f||!o)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Proposta indisponvel"}),e.jsx("p",{className:"text-gray-600 mt-2",children:f||"No foi possvel carregar a proposta."})]})});const ut=ce=>typeof ce!="number"||Number.isNaN(ce)?"":ce.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),wt=ce=>{if(!ce)return"";const ve=new Date(ce);return Number.isNaN(ve.getTime())?"":ve.toLocaleDateString("pt-BR")},mt=ce=>{if(!ce)return"";const ve=new Date(ce);return Number.isNaN(ve.getTime())?"":ve.toLocaleString("pt-BR")},kt=Array.isArray(o.items)?o.items:[],zt=kt.filter(ce=>!!ce.mediaUnitId),te=kt.filter(ce=>ce.mediaUnitId?String(ce.decisionStatus||"PENDING").toUpperCase()!=="REJECTED":!0),xe=zt.reduce((ce,ve)=>{const ze=String(ve.decisionStatus||"PENDING").toUpperCase();return ze==="REJECTED"?ce.rejected+=1:ze==="ACCEPTED"?ce.accepted+=1:ce.pending+=1,ce},{accepted:0,rejected:0,pending:0}),pe=o.clientName||o.client?.companyName||o.client?.contactName||"Cliente",Ue=ce=>typeof ce!="number"||Number.isNaN(ce)?"":String(ce);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:o.title||"Proposta"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Para: ",pe]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${o.status==="APROVADA"?"bg-green-100 text-green-800":o.status==="REPROVADA"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:o.status}),e.jsx("a",{className:"inline-flex items-center justify-center rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-900 hover:bg-gray-50",href:`${s}/public/proposals/${t}/pdf`,target:"_blank",rel:"noreferrer",children:"Baixar proposta (PDF)"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Valor total"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ut(o.totalAmount)}),typeof o.discountAmount=="number"&&o.discountAmount>0?e.jsxs("p",{className:"text-sm text-green-700",children:["Desconto: -",ut(o.discountAmount),o.discountPercent?` (${o.discountPercent}%)`:""]}):o.discountPercent?e.jsxs("p",{className:"text-sm text-green-700",children:["Desconto: -",o.discountPercent,"%"]}):null]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Validade"}),e.jsx("p",{className:"text-gray-900",children:wt(o.validUntil)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Responsvel"}),e.jsx("p",{className:"text-gray-900",children:o.responsibleUserName||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-gray-900",children:[wt(o.startDate)," ",o.endDate?` ${wt(o.endDate)}`:""]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Condies"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:o.conditionsText||""})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Observaes"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:o.notes||""})]}),te.length>0&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Itens"}),e.jsx("div",{className:"mt-2 divide-y divide-gray-200 rounded-xl border border-gray-100",children:te.map(ce=>{const ve=ce.product?.name||ce.mediaUnit?.label||ce.description||"Item",ze=ce.description&&(ce.product?.name||ce.mediaUnit?.label)?ce.description:null;return e.jsxs("div",{className:"p-3 flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ve}),ze?e.jsx("p",{className:"text-xs text-gray-600 mt-0.5 whitespace-pre-wrap",children:ze}):null,e.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:[wt(ce.startDate)," ",ce.endDate?` ${wt(ce.endDate)}`:""]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:["x",Ue(ce.quantity??1)]}),typeof ce.totalPrice=="number"?(()=>{const He=typeof ce.quantity=="number"?ce.quantity:1,pt=typeof ce.unitPrice=="number"?ce.unitPrice:0,me=He*pt,Oe=ce.totalPrice,Ke=Math.max(0,me-Oe),lt=ce.discountPercent,Tt=ce.discountAmount,ps=lt?`${lt}%`:Tt?`R$ ${ut(Tt)}`:null;return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ut(Oe)}),Ke>0?e.jsxs("p",{className:"text-[11px] text-red-600",children:["-",ut(Ke),ps?` (${ps})`:""]}):null]})})():null,typeof ce.unitPrice=="number"?e.jsxs("p",{className:"text-[11px] text-gray-500",children:[ut(ce.unitPrice)," / un"]}):null]})]},ce.id)})})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Converse com a equipe responsvel por esta proposta."})]}),!n&&e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Somente leitura",e.jsx("div",{children:"Pea  equipe o link com permisso de mensagens."})]})]}),e.jsx("div",{className:"mt-4",children:R?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando mensagens"}):J?e.jsx("div",{className:"text-sm text-red-600",children:J}):V.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma mensagem ainda."}):e.jsx("div",{ref:le,className:"max-h-80 overflow-y-auto space-y-3 rounded-xl bg-gray-50 p-4",children:V.map(ce=>{const ve=ce?.senderType==="CLIENTE"||ce?.direction==="IN";return e.jsx("div",{className:`flex ${ve?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm ${ve?"bg-indigo-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[e.jsx("div",{className:"text-[11px] opacity-80 mb-1",children:ce?.senderName||(ve?"Cliente":"Equipe")}),e.jsx("div",{className:"whitespace-pre-wrap",children:ce.contentText}),e.jsx("div",{className:"text-[10px] opacity-70 mt-1",children:ce.createdAt?new Date(ce.createdAt).toLocaleString("pt-BR"):""})]})},ce.id)})})}),n?e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu nome"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:ne,onChange:ce=>K(ce.target.value),placeholder:"Ex.: Joo Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu e-mail (ou contato)"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:ee,onChange:ce=>U(ce.target.value),placeholder:"Ex.: joao@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Mensagem"}),e.jsx("textarea",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm min-h-[96px]",value:se,onChange:ce=>fe(ce.target.value),placeholder:"Escreva sua mensagem"})]}),G&&e.jsx("div",{className:"text-sm text-red-600",children:G}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-indigo-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:tt,disabled:H,children:H?"Enviando":"Enviar mensagem"})]}):null]}),Ie&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ao"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Voc recebeu um link com permisso para ",e.jsx("span",{className:"font-medium",children:"aprovar"})," ou ",e.jsx("span",{className:"font-medium",children:"rejeitar"})," esta proposta."]}),zt.length>0&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-gray-50 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Deciso por ponto de mdia"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Escolha ",e.jsx("span",{className:"font-medium",children:"Aceito"})," ou ",e.jsx("span",{className:"font-medium",children:"Recuso"})," para cada ponto de mdia. Produtos/Servios no entram nessa deciso."]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Aceitos:"})," ",xe.accepted," "," ",e.jsx("span",{className:"font-medium text-red-700",children:"Recusados:"})," ",xe.rejected," "," ",e.jsx("span",{className:"font-medium text-gray-700",children:"Pendentes:"})," ",xe.pending]})]}),X&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:X}),e.jsx("div",{className:"mt-3 divide-y divide-gray-200 rounded-xl border border-gray-200 bg-white",children:zt.map(ce=>{const ve=ce.mediaUnit?.label||ce.description||"Ponto de mdia",ze=String(ce.decisionStatus||"PENDING").toUpperCase(),He=ze==="ACCEPTED",pt=ze==="REJECTED",me=O===ce.id;return e.jsxs("div",{className:"p-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ve}),e.jsxs("p",{className:"text-[11px] text-gray-500 mt-0.5",children:[wt(ce.startDate)," ",ce.endDate?` ${wt(ce.endDate)}`:""]}),typeof ce.totalPrice=="number"?e.jsxs("p",{className:"text-xs text-gray-700 mt-1",children:["Total: ",ut(ce.totalPrice)]}):null]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:`hidden sm:inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${pt?"bg-red-100 text-red-800":He?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:pt?"RECUSADO":He?"ACEITO":"PENDENTE"}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border disabled:opacity-50 ${He?"bg-green-600 text-white border-green-600":"bg-white text-gray-900 border-gray-200 hover:bg-green-50"}`,onClick:()=>Je(ce.id,"ACCEPTED"),disabled:me||k||o.status==="APROVADA"||o.status==="REPROVADA",children:me&&He?"Salvando":"Aceito"}),e.jsx("button",{className:`inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border disabled:opacity-50 ${pt?"bg-red-600 text-white border-red-600":"bg-white text-gray-900 border-gray-200 hover:bg-red-50"}`,onClick:()=>Je(ce.id,"REJECTED"),disabled:me||k||o.status==="APROVADA"||o.status==="REPROVADA",children:me&&pt?"Salvando":"Recuso"})]})]},ce.id)})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu nome"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:x,onChange:ce=>g(ce.target.value),placeholder:"Ex.: Joo Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Seu e-mail"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:N,onChange:ce=>w(ce.target.value),placeholder:"Ex.: joao@email.com"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Comentrio (opcional)"}),e.jsx("textarea",{className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm min-h-[96px]",value:j,onChange:ce=>C(ce.target.value),placeholder:"Deixe um comentrio..."})]}),S&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:S}),D&&e.jsx("div",{className:"mt-3 text-sm text-green-700",children:D}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-green-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:Ge,disabled:k,children:k?"Enviando":"Aprovar"}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white disabled:opacity-50",onClick:Xe,disabled:k,children:k?"Enviando":"Rejeitar"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ...",o.id.slice(-6),"  Atualizado em ",mt(o.updatedAt)]})]})})}function Tw(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(n=Tw(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function u0(){for(var t,s,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(s=Tw(t))&&(r&&(r+=" "),r+=s);return r}const m0="-",lT=t=>{const s=dT(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const h=u.split(m0);return h[0]===""&&h.length!==1&&h.shift(),Iw(h,s)||cT(u)},getConflictingClassGroupIds:(u,h)=>{const f=n[u]||[];return h&&r[u]?[...f,...r[u]]:f}}},Iw=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),o=r?Iw(t.slice(1),r):void 0;if(o)return o;if(s.validators.length===0)return;const c=t.join(m0);return s.validators.find(({validator:u})=>u(c))?.classGroupId},Fb=/^\[(.+)\]$/,cT=t=>{if(Fb.test(t)){const s=Fb.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},dT=t=>{const{theme:s,prefix:n}=t,r={nextPart:new Map,validators:[]};return mT(Object.entries(t.classGroups),n).forEach(([c,u])=>{yg(u,r,c,s)}),r},yg=(t,s,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const c=o===""?s:$b(s,o);c.classGroupId=n;return}if(typeof o=="function"){if(uT(o)){yg(o(r),s,n,r);return}s.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([c,u])=>{yg(u,$b(s,c),n,r)})})},$b=(t,s)=>{let n=t;return s.split(m0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uT=t=>t.isThemeGetter,mT=(t,s)=>s?t.map(([n,r])=>{const o=r.map(c=>typeof c=="string"?s+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([u,h])=>[s+u,h])):c);return[n,o]}):t,hT=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const o=(c,u)=>{n.set(c,u),s++,s>t&&(s=0,r=n,n=new Map)};return{get(c){let u=n.get(c);if(u!==void 0)return u;if((u=r.get(c))!==void 0)return o(c,u),u},set(c,u){n.has(c)?n.set(c,u):o(c,u)}}},Mw="!",pT=t=>{const{separator:s,experimentalParseClassName:n}=t,r=s.length===1,o=s[0],c=s.length,u=h=>{const f=[];let v=0,x=0,g;for(let k=0;k<h.length;k++){let E=h[k];if(v===0){if(E===o&&(r||h.slice(k,k+c)===s)){f.push(h.slice(x,k)),x=k+c;continue}if(E==="/"){g=k;continue}}E==="["?v++:E==="]"&&v--}const N=f.length===0?h:h.substring(x),w=N.startsWith(Mw),j=w?N.substring(1):N,C=g&&g>x?g-x:void 0;return{modifiers:f,hasImportantModifier:w,baseClassName:j,maybePostfixModifierPosition:C}};return n?h=>n({className:h,parseClassName:u}):u},fT=t=>{if(t.length<=1)return t;const s=[];let n=[];return t.forEach(r=>{r[0]==="["?(s.push(...n.sort(),r),n=[]):n.push(r)}),s.push(...n.sort()),s},xT=t=>({cache:hT(t.cacheSize),parseClassName:pT(t),...lT(t)}),gT=/\s+/,vT=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=s,c=[],u=t.trim().split(gT);let h="";for(let f=u.length-1;f>=0;f-=1){const v=u[f],{modifiers:x,hasImportantModifier:g,baseClassName:N,maybePostfixModifierPosition:w}=n(v);let j=!!w,C=r(j?N.substring(0,w):N);if(!C){if(!j){h=v+(h.length>0?" "+h:h);continue}if(C=r(N),!C){h=v+(h.length>0?" "+h:h);continue}j=!1}const k=fT(x).join(":"),E=g?k+Mw:k,S=E+C;if(c.includes(S))continue;c.push(S);const P=o(C,j);for(let D=0;D<P.length;++D){const I=P[D];c.push(E+I)}h=v+(h.length>0?" "+h:h)}return h};function yT(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=Rw(s))&&(r&&(r+=" "),r+=n);return r}const Rw=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=Rw(t[r]))&&(n&&(n+=" "),n+=s);return n};function bT(t,...s){let n,r,o,c=u;function u(f){const v=s.reduce((x,g)=>g(x),t());return n=xT(v),r=n.cache.get,o=n.cache.set,c=h,h(f)}function h(f){const v=r(f);if(v)return v;const x=vT(f,n);return o(f,x),x}return function(){return c(yT.apply(null,arguments))}}const zs=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},Ow=/^\[(?:([a-z-]+):)?(.+)\]$/i,jT=/^\d+\/\d+$/,NT=new Set(["px","full","screen"]),wT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ST=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_T=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ei=t=>Bc(t)||NT.has(t)||jT.test(t),No=t=>nd(t,"length",RT),Bc=t=>!!t&&!Number.isNaN(Number(t)),_x=t=>nd(t,"number",Bc),tu=t=>!!t&&Number.isInteger(Number(t)),PT=t=>t.endsWith("%")&&Bc(t.slice(0,-1)),Wt=t=>Ow.test(t),wo=t=>wT.test(t),ET=new Set(["length","size","percentage"]),kT=t=>nd(t,ET,Lw),DT=t=>nd(t,"position",Lw),TT=new Set(["image","url"]),IT=t=>nd(t,TT,LT),MT=t=>nd(t,"",OT),su=()=>!0,nd=(t,s,n)=>{const r=Ow.exec(t);return r?r[1]?typeof s=="string"?r[1]===s:s.has(r[1]):n(r[2]):!1},RT=t=>CT.test(t)&&!ST.test(t),Lw=()=>!1,OT=t=>_T.test(t),LT=t=>AT.test(t),FT=()=>{const t=zs("colors"),s=zs("spacing"),n=zs("blur"),r=zs("brightness"),o=zs("borderColor"),c=zs("borderRadius"),u=zs("borderSpacing"),h=zs("borderWidth"),f=zs("contrast"),v=zs("grayscale"),x=zs("hueRotate"),g=zs("invert"),N=zs("gap"),w=zs("gradientColorStops"),j=zs("gradientColorStopPositions"),C=zs("inset"),k=zs("margin"),E=zs("opacity"),S=zs("padding"),P=zs("saturate"),D=zs("scale"),I=zs("sepia"),O=zs("skew"),F=zs("space"),X=zs("translate"),Q=()=>["auto","contain","none"],V=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Wt,s],R=()=>[Wt,s],z=()=>["",Ei,No],J=()=>["auto",Bc,Wt],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],re=()=>["","0",Wt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Bc,Wt];return{cacheSize:500,separator:":",theme:{colors:[su],spacing:[Ei,No],blur:["none","",wo,Wt],brightness:W(),borderColor:[t],borderRadius:["none","","full",wo,Wt],borderSpacing:R(),borderWidth:z(),contrast:W(),grayscale:re(),hueRotate:W(),invert:re(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[PT,No],inset:$(),margin:$(),opacity:W(),padding:R(),saturate:W(),scale:W(),sepia:re(),skew:W(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Wt]}],container:["container"],columns:[{columns:[wo]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),Wt]}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tu,Wt]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wt]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",tu,Wt]}],"grid-cols":[{"grid-cols":[su]}],"col-start-end":[{col:["auto",{span:["full",tu,Wt]},Wt]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[su]}],"row-start-end":[{row:["auto",{span:[tu,Wt]},Wt]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wt]}],gap:[{gap:[N]}],"gap-x":[{"gap-x":[N]}],"gap-y":[{"gap-y":[N]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wt,s]}],"min-w":[{"min-w":[Wt,s,"min","max","fit"]}],"max-w":[{"max-w":[Wt,s,"none","full","min","max","fit","prose",{screen:[wo]},wo]}],h:[{h:[Wt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",wo,No]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_x]}],"font-family":[{font:[su]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wt]}],"line-clamp":[{"line-clamp":["none",Bc,_x]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ei,Wt]}],"list-image":[{"list-image":["none",Wt]}],"list-style-type":[{list:["none","disc","decimal",Wt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ei,No]}],"underline-offset":[{"underline-offset":["auto",Ei,Wt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),DT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IT]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:se()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[Ei,Wt]}],"outline-w":[{outline:[Ei,No]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Ei,No]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wo,MT]}],"shadow-color":[{shadow:[su]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",wo,Wt]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[g]}],saturate:[{saturate:[P]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wt]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Wt]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[tu,Wt]}],"translate-x":[{"translate-x":[X]}],"translate-y":[{"translate-y":[X]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ei,No,_x]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fw=bT(FT);function vt(...t){return Fw(u0(t))}function Re({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:vt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function zo({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:vt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function Bo({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:vt("leading-none",t),...s})}function Le({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:vt("px-6 [&:last-child]:pb-6",t),...s})}function zb(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function $i(...t){return s=>{let n=!1;const r=t.map(o=>{const c=zb(o,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let o=0;o<r.length;o++){const c=r[o];typeof c=="function"?c():zb(t[o],null)}}}}function Qt(...t){return m.useCallback($i(...t),t)}var $T=Symbol.for("react.lazy"),Uh=qg[" use ".trim().toString()];function zT(t){return typeof t=="object"&&t!==null&&"then"in t}function $w(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===$T&&"_payload"in t&&zT(t._payload)}function fp(t){const s=BT(t),n=m.forwardRef((r,o)=>{let{children:c,...u}=r;$w(c)&&typeof Uh=="function"&&(c=Uh(c._payload));const h=m.Children.toArray(c),f=h.find(VT);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}var zw=fp("Slot");function BT(t){const s=m.forwardRef((n,r)=>{let{children:o,...c}=n;if($w(o)&&typeof Uh=="function"&&(o=Uh(o._payload)),m.isValidElement(o)){const u=qT(o),h=HT(c,o.props);return o.type!==m.Fragment&&(h.ref=r?$i(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var UT=Symbol("radix.slottable");function VT(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===UT}function HT(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function qT(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Bb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ub=u0,h0=(t,s)=>n=>{var r;if(s?.variants==null)return Ub(t,n?.class,n?.className);const{variants:o,defaultVariants:c}=s,u=Object.keys(o).map(v=>{const x=n?.[v],g=c?.[v];if(x===null)return null;const N=Bb(x)||Bb(g);return o[v][N]}),h=n&&Object.entries(n).reduce((v,x)=>{let[g,N]=x;return N===void 0||(v[g]=N),v},{}),f=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((v,x)=>{let{class:g,className:N,...w}=x;return Object.entries(w).every(j=>{let[C,k]=j;return Array.isArray(k)?k.includes({...c,...h}[C]):{...c,...h}[C]===k})?[...v,g,N]:v},[]);return Ub(t,u,f,n?.class,n?.className)},WT=h0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function st({className:t,variant:s,asChild:n=!1,...r}){const o=n?zw:"span";return e.jsx(o,{"data-slot":"badge",className:vt(WT({variant:s}),t),...r})}const p0=h0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Z({className:t,variant:s,size:n,asChild:r=!1,type:o,...c}){const u=r?zw:"button";return e.jsx(u,{"data-slot":"button",className:vt(p0({variant:s,size:n,className:t})),type:r?void 0:o??"button",...c})}const Ne=m.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{ref:r,type:s,"data-slot":"input",className:vt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n}));Ne.displayName="Input";function bg(t,[s,n]){return Math.min(n,Math.max(s,t))}function rt(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function ZT(t,s){const n=m.createContext(s),r=c=>{const{children:u,...h}=c,f=m.useMemo(()=>h,Object.values(h));return e.jsx(n.Provider,{value:f,children:u})};r.displayName=t+"Provider";function o(c){const u=m.useContext(n);if(u)return u;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[r,o]}function Sa(t,s=[]){let n=[];function r(c,u){const h=m.createContext(u),f=n.length;n=[...n,u];const v=g=>{const{scope:N,children:w,...j}=g,C=N?.[t]?.[f]||h,k=m.useMemo(()=>j,Object.values(j));return e.jsx(C.Provider,{value:k,children:w})};v.displayName=c+"Provider";function x(g,N){const w=N?.[t]?.[f]||h,j=m.useContext(w);if(j)return j;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[v,x]}const o=()=>{const c=n.map(u=>m.createContext(u));return function(h){const f=h?.[t]||c;return m.useMemo(()=>({[`__scope${t}`]:{...h,[t]:f}}),[h,f])}};return o.scopeName=t,[r,GT(o,...s)]}function GT(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const u=r.reduce((h,{useScope:f,scopeName:v})=>{const g=f(c)[`__scope${v}`];return{...h,...g}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:u}),[u])}};return n.scopeName=s.scopeName,n}function Vb(t){const s=KT(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(XT);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function KT(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=JT(o),h=YT(c,o.props);return o.type!==m.Fragment&&(h.ref=r?$i(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var QT=Symbol("radix.slottable");function XT(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===QT}function YT(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function JT(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function f0(t){const s=t+"CollectionProvider",[n,r]=Sa(s),[o,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),u=C=>{const{scope:k,children:E}=C,S=Be.useRef(null),P=Be.useRef(new Map).current;return e.jsx(o,{scope:k,itemMap:P,collectionRef:S,children:E})};u.displayName=s;const h=t+"CollectionSlot",f=Vb(h),v=Be.forwardRef((C,k)=>{const{scope:E,children:S}=C,P=c(h,E),D=Qt(k,P.collectionRef);return e.jsx(f,{ref:D,children:S})});v.displayName=h;const x=t+"CollectionItemSlot",g="data-radix-collection-item",N=Vb(x),w=Be.forwardRef((C,k)=>{const{scope:E,children:S,...P}=C,D=Be.useRef(null),I=Qt(k,D),O=c(x,E);return Be.useEffect(()=>(O.itemMap.set(D,{ref:D,...P}),()=>void O.itemMap.delete(D))),e.jsx(N,{[g]:"",ref:I,children:S})});w.displayName=x;function j(C){const k=c(t+"CollectionConsumer",C);return Be.useCallback(()=>{const S=k.collectionRef.current;if(!S)return[];const P=Array.from(S.querySelectorAll(`[${g}]`));return Array.from(k.itemMap.values()).sort((O,F)=>P.indexOf(O.ref.current)-P.indexOf(F.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:u,Slot:v,ItemSlot:w},j,r]}var eI=m.createContext(void 0);function ad(t){const s=m.useContext(eI);return t||s||"ltr"}function tI(t){const s=sI(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(aI);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function sI(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=iI(o),h=rI(c,o.props);return o.type!==m.Fragment&&(h.ref=r?$i(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var nI=Symbol("radix.slottable");function aI(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nI}function rI(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function iI(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var oI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jt=oI.reduce((t,s)=>{const n=tI(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function Bw(t,s){t&&Xc.flushSync(()=>t.dispatchEvent(s))}function Fn(t){const s=m.useRef(t);return m.useEffect(()=>{s.current=t}),m.useMemo(()=>(...n)=>s.current?.(...n),[])}function lI(t,s=globalThis?.document){const n=Fn(t);m.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var cI="DismissableLayer",jg="dismissableLayer.update",dI="dismissableLayer.pointerDownOutside",uI="dismissableLayer.focusOutside",Hb,Uw=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xp=m.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:u,onDismiss:h,...f}=t,v=m.useContext(Uw),[x,g]=m.useState(null),N=x?.ownerDocument??globalThis?.document,[,w]=m.useState({}),j=Qt(s,F=>g(F)),C=Array.from(v.layers),[k]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(k),S=x?C.indexOf(x):-1,P=v.layersWithOutsidePointerEventsDisabled.size>0,D=S>=E,I=pI(F=>{const X=F.target,Q=[...v.branches].some(V=>V.contains(X));!D||Q||(o?.(F),u?.(F),F.defaultPrevented||h?.())},N),O=fI(F=>{const X=F.target;[...v.branches].some(V=>V.contains(X))||(c?.(F),u?.(F),F.defaultPrevented||h?.())},N);return lI(F=>{S===v.layers.size-1&&(r?.(F),!F.defaultPrevented&&h&&(F.preventDefault(),h()))},N),m.useEffect(()=>{if(x)return n&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(Hb=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(x)),v.layers.add(x),qb(),()=>{n&&v.layersWithOutsidePointerEventsDisabled.size===1&&(N.body.style.pointerEvents=Hb)}},[x,N,n,v]),m.useEffect(()=>()=>{x&&(v.layers.delete(x),v.layersWithOutsidePointerEventsDisabled.delete(x),qb())},[x,v]),m.useEffect(()=>{const F=()=>w({});return document.addEventListener(jg,F),()=>document.removeEventListener(jg,F)},[]),e.jsx(jt.div,{...f,ref:j,style:{pointerEvents:P?D?"auto":"none":void 0,...t.style},onFocusCapture:rt(t.onFocusCapture,O.onFocusCapture),onBlurCapture:rt(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:rt(t.onPointerDownCapture,I.onPointerDownCapture)})});xp.displayName=cI;var mI="DismissableLayerBranch",hI=m.forwardRef((t,s)=>{const n=m.useContext(Uw),r=m.useRef(null),o=Qt(s,r);return m.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(jt.div,{...t,ref:o})});hI.displayName=mI;function pI(t,s=globalThis?.document){const n=Fn(t),r=m.useRef(!1),o=m.useRef(()=>{});return m.useEffect(()=>{const c=h=>{if(h.target&&!r.current){let f=function(){Vw(dI,n,v,{discrete:!0})};const v={originalEvent:h};h.pointerType==="touch"?(s.removeEventListener("click",o.current),o.current=f,s.addEventListener("click",o.current,{once:!0})):f()}else s.removeEventListener("click",o.current);r.current=!1},u=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),s.removeEventListener("pointerdown",c),s.removeEventListener("click",o.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function fI(t,s=globalThis?.document){const n=Fn(t),r=m.useRef(!1);return m.useEffect(()=>{const o=c=>{c.target&&!r.current&&Vw(uI,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",o),()=>s.removeEventListener("focusin",o)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qb(){const t=new CustomEvent(jg);document.dispatchEvent(t)}function Vw(t,s,n,{discrete:r}){const o=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),r?Bw(o,c):o.dispatchEvent(c)}var Ax=0;function x0(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Wb()),document.body.insertAdjacentElement("beforeend",t[1]??Wb()),Ax++,()=>{Ax===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Ax--}},[])}function Wb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Px="focusScope.autoFocusOnMount",Ex="focusScope.autoFocusOnUnmount",Zb={bubbles:!1,cancelable:!0},xI="FocusScope",gp=m.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:c,...u}=t,[h,f]=m.useState(null),v=Fn(o),x=Fn(c),g=m.useRef(null),N=Qt(s,C=>f(C)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let C=function(P){if(w.paused||!h)return;const D=P.target;h.contains(D)?g.current=D:_o(g.current,{select:!0})},k=function(P){if(w.paused||!h)return;const D=P.relatedTarget;D!==null&&(h.contains(D)||_o(g.current,{select:!0}))},E=function(P){if(document.activeElement===document.body)for(const I of P)I.removedNodes.length>0&&_o(h)};document.addEventListener("focusin",C),document.addEventListener("focusout",k);const S=new MutationObserver(E);return h&&S.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",k),S.disconnect()}}},[r,h,w.paused]),m.useEffect(()=>{if(h){Kb.add(w);const C=document.activeElement;if(!h.contains(C)){const E=new CustomEvent(Px,Zb);h.addEventListener(Px,v),h.dispatchEvent(E),E.defaultPrevented||(gI(NI(Hw(h)),{select:!0}),document.activeElement===C&&_o(h))}return()=>{h.removeEventListener(Px,v),setTimeout(()=>{const E=new CustomEvent(Ex,Zb);h.addEventListener(Ex,x),h.dispatchEvent(E),E.defaultPrevented||_o(C??document.body,{select:!0}),h.removeEventListener(Ex,x),Kb.remove(w)},0)}}},[h,v,x,w]);const j=m.useCallback(C=>{if(!n&&!r||w.paused)return;const k=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(k&&E){const S=C.currentTarget,[P,D]=vI(S);P&&D?!C.shiftKey&&E===D?(C.preventDefault(),n&&_o(P,{select:!0})):C.shiftKey&&E===P&&(C.preventDefault(),n&&_o(D,{select:!0})):E===S&&C.preventDefault()}},[n,r,w.paused]);return e.jsx(jt.div,{tabIndex:-1,...u,ref:N,onKeyDown:j})});gp.displayName=xI;function gI(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(_o(r,{select:s}),document.activeElement!==n)return}function vI(t){const s=Hw(t),n=Gb(s,t),r=Gb(s.reverse(),t);return[n,r]}function Hw(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Gb(t,s){for(const n of t)if(!yI(n,{upTo:s}))return n}function yI(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function bI(t){return t instanceof HTMLInputElement&&"select"in t}function _o(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&bI(t)&&s&&t.select()}}var Kb=jI();function jI(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=Qb(t,s),t.unshift(s)},remove(s){t=Qb(t,s),t[0]?.resume()}}}function Qb(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function NI(t){return t.filter(s=>s.tagName!=="A")}var Tn=globalThis?.document?m.useLayoutEffect:()=>{},wI=qg[" useId ".trim().toString()]||(()=>{}),CI=0;function Er(t){const[s,n]=m.useState(wI());return Tn(()=>{n(r=>r??String(CI++))},[t]),t||(s?`radix-${s}`:"")}const SI=["top","right","bottom","left"],Oo=Math.min,Oa=Math.max,Vh=Math.round,nh=Math.floor,ni=t=>({x:t,y:t}),_I={left:"right",right:"left",bottom:"top",top:"bottom"},AI={start:"end",end:"start"};function Ng(t,s,n){return Oa(t,Oo(s,n))}function Li(t,s){return typeof t=="function"?t(s):t}function Fi(t){return t.split("-")[0]}function rd(t){return t.split("-")[1]}function g0(t){return t==="x"?"y":"x"}function v0(t){return t==="y"?"height":"width"}const PI=new Set(["top","bottom"]);function ti(t){return PI.has(Fi(t))?"y":"x"}function y0(t){return g0(ti(t))}function EI(t,s,n){n===void 0&&(n=!1);const r=rd(t),o=y0(t),c=v0(o);let u=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[c]>s.floating[c]&&(u=Hh(u)),[u,Hh(u)]}function kI(t){const s=Hh(t);return[wg(t),s,wg(s)]}function wg(t){return t.replace(/start|end/g,s=>AI[s])}const Xb=["left","right"],Yb=["right","left"],DI=["top","bottom"],TI=["bottom","top"];function II(t,s,n){switch(t){case"top":case"bottom":return n?s?Yb:Xb:s?Xb:Yb;case"left":case"right":return s?DI:TI;default:return[]}}function MI(t,s,n,r){const o=rd(t);let c=II(Fi(t),n==="start",r);return o&&(c=c.map(u=>u+"-"+o),s&&(c=c.concat(c.map(wg)))),c}function Hh(t){return t.replace(/left|right|bottom|top/g,s=>_I[s])}function RI(t){return{top:0,right:0,bottom:0,left:0,...t}}function qw(t){return typeof t!="number"?RI(t):{top:t,right:t,bottom:t,left:t}}function qh(t){const{x:s,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:s,right:s+r,bottom:n+o,x:s,y:n}}function Jb(t,s,n){let{reference:r,floating:o}=t;const c=ti(s),u=y0(s),h=v0(u),f=Fi(s),v=c==="y",x=r.x+r.width/2-o.width/2,g=r.y+r.height/2-o.height/2,N=r[h]/2-o[h]/2;let w;switch(f){case"top":w={x,y:r.y-o.height};break;case"bottom":w={x,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-o.width,y:g};break;default:w={x:r.x,y:r.y}}switch(rd(s)){case"start":w[u]-=N*(n&&v?-1:1);break;case"end":w[u]+=N*(n&&v?-1:1);break}return w}const OI=async(t,s,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:c=[],platform:u}=n,h=c.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(s));let v=await u.getElementRects({reference:t,floating:s,strategy:o}),{x,y:g}=Jb(v,r,f),N=r,w={},j=0;for(let C=0;C<h.length;C++){const{name:k,fn:E}=h[C],{x:S,y:P,data:D,reset:I}=await E({x,y:g,initialPlacement:r,placement:N,strategy:o,middlewareData:w,rects:v,platform:u,elements:{reference:t,floating:s}});x=S??x,g=P??g,w={...w,[k]:{...w[k],...D}},I&&j<=50&&(j++,typeof I=="object"&&(I.placement&&(N=I.placement),I.rects&&(v=I.rects===!0?await u.getElementRects({reference:t,floating:s,strategy:o}):I.rects),{x,y:g}=Jb(v,N,f)),C=-1)}return{x,y:g,placement:N,strategy:o,middlewareData:w}};async function Cu(t,s){var n;s===void 0&&(s={});const{x:r,y:o,platform:c,rects:u,elements:h,strategy:f}=t,{boundary:v="clippingAncestors",rootBoundary:x="viewport",elementContext:g="floating",altBoundary:N=!1,padding:w=0}=Li(s,t),j=qw(w),k=h[N?g==="floating"?"reference":"floating":g],E=qh(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(k)))==null||n?k:k.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(h.floating)),boundary:v,rootBoundary:x,strategy:f})),S=g==="floating"?{x:r,y:o,width:u.floating.width,height:u.floating.height}:u.reference,P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h.floating)),D=await(c.isElement==null?void 0:c.isElement(P))?await(c.getScale==null?void 0:c.getScale(P))||{x:1,y:1}:{x:1,y:1},I=qh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:S,offsetParent:P,strategy:f}):S);return{top:(E.top-I.top+j.top)/D.y,bottom:(I.bottom-E.bottom+j.bottom)/D.y,left:(E.left-I.left+j.left)/D.x,right:(I.right-E.right+j.right)/D.x}}const LI=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:o,rects:c,platform:u,elements:h,middlewareData:f}=s,{element:v,padding:x=0}=Li(t,s)||{};if(v==null)return{};const g=qw(x),N={x:n,y:r},w=y0(o),j=v0(w),C=await u.getDimensions(v),k=w==="y",E=k?"top":"left",S=k?"bottom":"right",P=k?"clientHeight":"clientWidth",D=c.reference[j]+c.reference[w]-N[w]-c.floating[j],I=N[w]-c.reference[w],O=await(u.getOffsetParent==null?void 0:u.getOffsetParent(v));let F=O?O[P]:0;(!F||!await(u.isElement==null?void 0:u.isElement(O)))&&(F=h.floating[P]||c.floating[j]);const X=D/2-I/2,Q=F/2-C[j]/2-1,V=Oo(g[E],Q),$=Oo(g[S],Q),R=V,z=F-C[j]-$,J=F/2-C[j]/2+X,ue=Ng(R,J,z),se=!f.arrow&&rd(o)!=null&&J!==ue&&c.reference[j]/2-(J<R?V:$)-C[j]/2<0,fe=se?J<R?J-R:J-z:0;return{[w]:N[w]+fe,data:{[w]:ue,centerOffset:J-ue-fe,...se&&{alignmentOffset:fe}},reset:se}}}),FI=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:o,middlewareData:c,rects:u,initialPlacement:h,platform:f,elements:v}=s,{mainAxis:x=!0,crossAxis:g=!0,fallbackPlacements:N,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:C=!0,...k}=Li(t,s);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const E=Fi(o),S=ti(h),P=Fi(h)===h,D=await(f.isRTL==null?void 0:f.isRTL(v.floating)),I=N||(P||!C?[Hh(h)]:kI(h)),O=j!=="none";!N&&O&&I.push(...MI(h,C,j,D));const F=[h,...I],X=await Cu(s,k),Q=[];let V=((r=c.flip)==null?void 0:r.overflows)||[];if(x&&Q.push(X[E]),g){const J=EI(o,u,D);Q.push(X[J[0]],X[J[1]])}if(V=[...V,{placement:o,overflows:Q}],!Q.every(J=>J<=0)){var $,R;const J=((($=c.flip)==null?void 0:$.index)||0)+1,ue=F[J];if(ue&&(!(g==="alignment"?S!==ti(ue):!1)||V.every(H=>ti(H.placement)===S?H.overflows[0]>0:!0)))return{data:{index:J,overflows:V},reset:{placement:ue}};let se=(R=V.filter(fe=>fe.overflows[0]<=0).sort((fe,H)=>fe.overflows[1]-H.overflows[1])[0])==null?void 0:R.placement;if(!se)switch(w){case"bestFit":{var z;const fe=(z=V.filter(H=>{if(O){const re=ti(H.placement);return re===S||re==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(re=>re>0).reduce((re,G)=>re+G,0)]).sort((H,re)=>H[1]-re[1])[0])==null?void 0:z[0];fe&&(se=fe);break}case"initialPlacement":se=h;break}if(o!==se)return{reset:{placement:se}}}return{}}}};function ej(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function tj(t){return SI.some(s=>t[s]>=0)}const $I=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...o}=Li(t,s);switch(r){case"referenceHidden":{const c=await Cu(s,{...o,elementContext:"reference"}),u=ej(c,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:tj(u)}}}case"escaped":{const c=await Cu(s,{...o,altBoundary:!0}),u=ej(c,n.floating);return{data:{escapedOffsets:u,escaped:tj(u)}}}default:return{}}}}},Ww=new Set(["left","top"]);async function zI(t,s){const{placement:n,platform:r,elements:o}=t,c=await(r.isRTL==null?void 0:r.isRTL(o.floating)),u=Fi(n),h=rd(n),f=ti(n)==="y",v=Ww.has(u)?-1:1,x=c&&f?-1:1,g=Li(s,t);let{mainAxis:N,crossAxis:w,alignmentAxis:j}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return h&&typeof j=="number"&&(w=h==="end"?j*-1:j),f?{x:w*x,y:N*v}:{x:N*v,y:w*x}}const BI=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:o,y:c,placement:u,middlewareData:h}=s,f=await zI(s,t);return u===((n=h.offset)==null?void 0:n.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:o+f.x,y:c+f.y,data:{...f,placement:u}}}}},UI=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:o}=s,{mainAxis:c=!0,crossAxis:u=!1,limiter:h={fn:k=>{let{x:E,y:S}=k;return{x:E,y:S}}},...f}=Li(t,s),v={x:n,y:r},x=await Cu(s,f),g=ti(Fi(o)),N=g0(g);let w=v[N],j=v[g];if(c){const k=N==="y"?"top":"left",E=N==="y"?"bottom":"right",S=w+x[k],P=w-x[E];w=Ng(S,w,P)}if(u){const k=g==="y"?"top":"left",E=g==="y"?"bottom":"right",S=j+x[k],P=j-x[E];j=Ng(S,j,P)}const C=h.fn({...s,[N]:w,[g]:j});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[N]:c,[g]:u}}}}}},VI=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:o,rects:c,middlewareData:u}=s,{offset:h=0,mainAxis:f=!0,crossAxis:v=!0}=Li(t,s),x={x:n,y:r},g=ti(o),N=g0(g);let w=x[N],j=x[g];const C=Li(h,s),k=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const P=N==="y"?"height":"width",D=c.reference[N]-c.floating[P]+k.mainAxis,I=c.reference[N]+c.reference[P]-k.mainAxis;w<D?w=D:w>I&&(w=I)}if(v){var E,S;const P=N==="y"?"width":"height",D=Ww.has(Fi(o)),I=c.reference[g]-c.floating[P]+(D&&((E=u.offset)==null?void 0:E[g])||0)+(D?0:k.crossAxis),O=c.reference[g]+c.reference[P]+(D?0:((S=u.offset)==null?void 0:S[g])||0)-(D?k.crossAxis:0);j<I?j=I:j>O&&(j=O)}return{[N]:w,[g]:j}}}},HI=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:o,rects:c,platform:u,elements:h}=s,{apply:f=()=>{},...v}=Li(t,s),x=await Cu(s,v),g=Fi(o),N=rd(o),w=ti(o)==="y",{width:j,height:C}=c.floating;let k,E;g==="top"||g==="bottom"?(k=g,E=N===(await(u.isRTL==null?void 0:u.isRTL(h.floating))?"start":"end")?"left":"right"):(E=g,k=N==="end"?"top":"bottom");const S=C-x.top-x.bottom,P=j-x.left-x.right,D=Oo(C-x[k],S),I=Oo(j-x[E],P),O=!s.middlewareData.shift;let F=D,X=I;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(X=P),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(F=S),O&&!N){const V=Oa(x.left,0),$=Oa(x.right,0),R=Oa(x.top,0),z=Oa(x.bottom,0);w?X=j-2*(V!==0||$!==0?V+$:Oa(x.left,x.right)):F=C-2*(R!==0||z!==0?R+z:Oa(x.top,x.bottom))}await f({...s,availableWidth:X,availableHeight:F});const Q=await u.getDimensions(h.floating);return j!==Q.width||C!==Q.height?{reset:{rects:!0}}:{}}}};function vp(){return typeof window<"u"}function id(t){return Zw(t)?(t.nodeName||"").toLowerCase():"#document"}function Ua(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function li(t){var s;return(s=(Zw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function Zw(t){return vp()?t instanceof Node||t instanceof Ua(t).Node:!1}function Ir(t){return vp()?t instanceof Element||t instanceof Ua(t).Element:!1}function ai(t){return vp()?t instanceof HTMLElement||t instanceof Ua(t).HTMLElement:!1}function sj(t){return!vp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ua(t).ShadowRoot}const qI=new Set(["inline","contents"]);function Lu(t){const{overflow:s,overflowX:n,overflowY:r,display:o}=Mr(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!qI.has(o)}const WI=new Set(["table","td","th"]);function ZI(t){return WI.has(id(t))}const GI=[":popover-open",":modal"];function yp(t){return GI.some(s=>{try{return t.matches(s)}catch{return!1}})}const KI=["transform","translate","scale","rotate","perspective"],QI=["transform","translate","scale","rotate","perspective","filter"],XI=["paint","layout","strict","content"];function b0(t){const s=j0(),n=Ir(t)?Mr(t):t;return KI.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||QI.some(r=>(n.willChange||"").includes(r))||XI.some(r=>(n.contain||"").includes(r))}function YI(t){let s=Lo(t);for(;ai(s)&&!Kc(s);){if(b0(s))return s;if(yp(s))return null;s=Lo(s)}return null}function j0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JI=new Set(["html","body","#document"]);function Kc(t){return JI.has(id(t))}function Mr(t){return Ua(t).getComputedStyle(t)}function bp(t){return Ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Lo(t){if(id(t)==="html")return t;const s=t.assignedSlot||t.parentNode||sj(t)&&t.host||li(t);return sj(s)?s.host:s}function Gw(t){const s=Lo(t);return Kc(s)?t.ownerDocument?t.ownerDocument.body:t.body:ai(s)&&Lu(s)?s:Gw(s)}function Su(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const o=Gw(t),c=o===((r=t.ownerDocument)==null?void 0:r.body),u=Ua(o);if(c){const h=Cg(u);return s.concat(u,u.visualViewport||[],Lu(o)?o:[],h&&n?Su(h):[])}return s.concat(o,Su(o,[],n))}function Cg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Kw(t){const s=Mr(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const o=ai(t),c=o?t.offsetWidth:n,u=o?t.offsetHeight:r,h=Vh(n)!==c||Vh(r)!==u;return h&&(n=c,r=u),{width:n,height:r,$:h}}function N0(t){return Ir(t)?t:t.contextElement}function Uc(t){const s=N0(t);if(!ai(s))return ni(1);const n=s.getBoundingClientRect(),{width:r,height:o,$:c}=Kw(s);let u=(c?Vh(n.width):n.width)/r,h=(c?Vh(n.height):n.height)/o;return(!u||!Number.isFinite(u))&&(u=1),(!h||!Number.isFinite(h))&&(h=1),{x:u,y:h}}const e5=ni(0);function Qw(t){const s=Ua(t);return!j0()||!s.visualViewport?e5:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function t5(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Ua(t)?!1:s}function Ml(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),c=N0(t);let u=ni(1);s&&(r?Ir(r)&&(u=Uc(r)):u=Uc(t));const h=t5(c,n,r)?Qw(c):ni(0);let f=(o.left+h.x)/u.x,v=(o.top+h.y)/u.y,x=o.width/u.x,g=o.height/u.y;if(c){const N=Ua(c),w=r&&Ir(r)?Ua(r):r;let j=N,C=Cg(j);for(;C&&r&&w!==j;){const k=Uc(C),E=C.getBoundingClientRect(),S=Mr(C),P=E.left+(C.clientLeft+parseFloat(S.paddingLeft))*k.x,D=E.top+(C.clientTop+parseFloat(S.paddingTop))*k.y;f*=k.x,v*=k.y,x*=k.x,g*=k.y,f+=P,v+=D,j=Ua(C),C=Cg(j)}}return qh({width:x,height:g,x:f,y:v})}function jp(t,s){const n=bp(t).scrollLeft;return s?s.left+n:Ml(li(t)).left+n}function Xw(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-jp(t,n),o=n.top+s.scrollTop;return{x:r,y:o}}function s5(t){let{elements:s,rect:n,offsetParent:r,strategy:o}=t;const c=o==="fixed",u=li(r),h=s?yp(s.floating):!1;if(r===u||h&&c)return n;let f={scrollLeft:0,scrollTop:0},v=ni(1);const x=ni(0),g=ai(r);if((g||!g&&!c)&&((id(r)!=="body"||Lu(u))&&(f=bp(r)),ai(r))){const w=Ml(r);v=Uc(r),x.x=w.x+r.clientLeft,x.y=w.y+r.clientTop}const N=u&&!g&&!c?Xw(u,f):ni(0);return{width:n.width*v.x,height:n.height*v.y,x:n.x*v.x-f.scrollLeft*v.x+x.x+N.x,y:n.y*v.y-f.scrollTop*v.y+x.y+N.y}}function n5(t){return Array.from(t.getClientRects())}function a5(t){const s=li(t),n=bp(t),r=t.ownerDocument.body,o=Oa(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),c=Oa(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+jp(t);const h=-n.scrollTop;return Mr(r).direction==="rtl"&&(u+=Oa(s.clientWidth,r.clientWidth)-o),{width:o,height:c,x:u,y:h}}const nj=25;function r5(t,s){const n=Ua(t),r=li(t),o=n.visualViewport;let c=r.clientWidth,u=r.clientHeight,h=0,f=0;if(o){c=o.width,u=o.height;const x=j0();(!x||x&&s==="fixed")&&(h=o.offsetLeft,f=o.offsetTop)}const v=jp(r);if(v<=0){const x=r.ownerDocument,g=x.body,N=getComputedStyle(g),w=x.compatMode==="CSS1Compat"&&parseFloat(N.marginLeft)+parseFloat(N.marginRight)||0,j=Math.abs(r.clientWidth-g.clientWidth-w);j<=nj&&(c-=j)}else v<=nj&&(c+=v);return{width:c,height:u,x:h,y:f}}const i5=new Set(["absolute","fixed"]);function o5(t,s){const n=Ml(t,!0,s==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,c=ai(t)?Uc(t):ni(1),u=t.clientWidth*c.x,h=t.clientHeight*c.y,f=o*c.x,v=r*c.y;return{width:u,height:h,x:f,y:v}}function aj(t,s,n){let r;if(s==="viewport")r=r5(t,n);else if(s==="document")r=a5(li(t));else if(Ir(s))r=o5(s,n);else{const o=Qw(t);r={x:s.x-o.x,y:s.y-o.y,width:s.width,height:s.height}}return qh(r)}function Yw(t,s){const n=Lo(t);return n===s||!Ir(n)||Kc(n)?!1:Mr(n).position==="fixed"||Yw(n,s)}function l5(t,s){const n=s.get(t);if(n)return n;let r=Su(t,[],!1).filter(h=>Ir(h)&&id(h)!=="body"),o=null;const c=Mr(t).position==="fixed";let u=c?Lo(t):t;for(;Ir(u)&&!Kc(u);){const h=Mr(u),f=b0(u);!f&&h.position==="fixed"&&(o=null),(c?!f&&!o:!f&&h.position==="static"&&!!o&&i5.has(o.position)||Lu(u)&&!f&&Yw(t,u))?r=r.filter(x=>x!==u):o=h,u=Lo(u)}return s.set(t,r),r}function c5(t){let{element:s,boundary:n,rootBoundary:r,strategy:o}=t;const u=[...n==="clippingAncestors"?yp(s)?[]:l5(s,this._c):[].concat(n),r],h=u[0],f=u.reduce((v,x)=>{const g=aj(s,x,o);return v.top=Oa(g.top,v.top),v.right=Oo(g.right,v.right),v.bottom=Oo(g.bottom,v.bottom),v.left=Oa(g.left,v.left),v},aj(s,h,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function d5(t){const{width:s,height:n}=Kw(t);return{width:s,height:n}}function u5(t,s,n){const r=ai(s),o=li(s),c=n==="fixed",u=Ml(t,!0,c,s);let h={scrollLeft:0,scrollTop:0};const f=ni(0);function v(){f.x=jp(o)}if(r||!r&&!c)if((id(s)!=="body"||Lu(o))&&(h=bp(s)),r){const w=Ml(s,!0,c,s);f.x=w.x+s.clientLeft,f.y=w.y+s.clientTop}else o&&v();c&&!r&&o&&v();const x=o&&!r&&!c?Xw(o,h):ni(0),g=u.left+h.scrollLeft-f.x-x.x,N=u.top+h.scrollTop-f.y-x.y;return{x:g,y:N,width:u.width,height:u.height}}function kx(t){return Mr(t).position==="static"}function rj(t,s){if(!ai(t)||Mr(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return li(t)===n&&(n=n.ownerDocument.body),n}function Jw(t,s){const n=Ua(t);if(yp(t))return n;if(!ai(t)){let o=Lo(t);for(;o&&!Kc(o);){if(Ir(o)&&!kx(o))return o;o=Lo(o)}return n}let r=rj(t,s);for(;r&&ZI(r)&&kx(r);)r=rj(r,s);return r&&Kc(r)&&kx(r)&&!b0(r)?n:r||YI(t)||n}const m5=async function(t){const s=this.getOffsetParent||Jw,n=this.getDimensions,r=await n(t.floating);return{reference:u5(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function h5(t){return Mr(t).direction==="rtl"}const p5={convertOffsetParentRelativeRectToViewportRelativeRect:s5,getDocumentElement:li,getClippingRect:c5,getOffsetParent:Jw,getElementRects:m5,getClientRects:n5,getDimensions:d5,getScale:Uc,isElement:Ir,isRTL:h5};function e1(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function f5(t,s){let n=null,r;const o=li(t);function c(){var h;clearTimeout(r),(h=n)==null||h.disconnect(),n=null}function u(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),c();const v=t.getBoundingClientRect(),{left:x,top:g,width:N,height:w}=v;if(h||s(),!N||!w)return;const j=nh(g),C=nh(o.clientWidth-(x+N)),k=nh(o.clientHeight-(g+w)),E=nh(x),P={rootMargin:-j+"px "+-C+"px "+-k+"px "+-E+"px",threshold:Oa(0,Oo(1,f))||1};let D=!0;function I(O){const F=O[0].intersectionRatio;if(F!==f){if(!D)return u();F?u(!1,F):r=setTimeout(()=>{u(!1,1e-7)},1e3)}F===1&&!e1(v,t.getBoundingClientRect())&&u(),D=!1}try{n=new IntersectionObserver(I,{...P,root:o.ownerDocument})}catch{n=new IntersectionObserver(I,P)}n.observe(t)}return u(!0),c}function x5(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,v=N0(t),x=o||c?[...v?Su(v):[],...Su(s)]:[];x.forEach(E=>{o&&E.addEventListener("scroll",n,{passive:!0}),c&&E.addEventListener("resize",n)});const g=v&&h?f5(v,n):null;let N=-1,w=null;u&&(w=new ResizeObserver(E=>{let[S]=E;S&&S.target===v&&w&&(w.unobserve(s),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var P;(P=w)==null||P.observe(s)})),n()}),v&&!f&&w.observe(v),w.observe(s));let j,C=f?Ml(t):null;f&&k();function k(){const E=Ml(t);C&&!e1(C,E)&&n(),C=E,j=requestAnimationFrame(k)}return n(),()=>{var E;x.forEach(S=>{o&&S.removeEventListener("scroll",n),c&&S.removeEventListener("resize",n)}),g?.(),(E=w)==null||E.disconnect(),w=null,f&&cancelAnimationFrame(j)}}const g5=BI,v5=UI,y5=FI,b5=HI,j5=$I,ij=LI,N5=VI,w5=(t,s,n)=>{const r=new Map,o={platform:p5,...n},c={...o.platform,_c:r};return OI(t,s,{...o,platform:c})};var C5=typeof document<"u",S5=function(){},Eh=C5?m.useLayoutEffect:S5;function Wh(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,o;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!Wh(t[r],s[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,o[r]))return!1;for(r=n;r--!==0;){const c=o[r];if(!(c==="_owner"&&t.$$typeof)&&!Wh(t[c],s[c]))return!1}return!0}return t!==t&&s!==s}function t1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function oj(t,s){const n=t1(t);return Math.round(s*n)/n}function Dx(t){const s=m.useRef(t);return Eh(()=>{s.current=t}),s}function _5(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:c,floating:u}={},transform:h=!0,whileElementsMounted:f,open:v}=t,[x,g]=m.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[N,w]=m.useState(r);Wh(N,r)||w(r);const[j,C]=m.useState(null),[k,E]=m.useState(null),S=m.useCallback(H=>{H!==O.current&&(O.current=H,C(H))},[]),P=m.useCallback(H=>{H!==F.current&&(F.current=H,E(H))},[]),D=c||j,I=u||k,O=m.useRef(null),F=m.useRef(null),X=m.useRef(x),Q=f!=null,V=Dx(f),$=Dx(o),R=Dx(v),z=m.useCallback(()=>{if(!O.current||!F.current)return;const H={placement:s,strategy:n,middleware:N};$.current&&(H.platform=$.current),w5(O.current,F.current,H).then(re=>{const G={...re,isPositioned:R.current!==!1};J.current&&!Wh(X.current,G)&&(X.current=G,Xc.flushSync(()=>{g(G)}))})},[N,s,n,$,R]);Eh(()=>{v===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,g(H=>({...H,isPositioned:!1})))},[v]);const J=m.useRef(!1);Eh(()=>(J.current=!0,()=>{J.current=!1}),[]),Eh(()=>{if(D&&(O.current=D),I&&(F.current=I),D&&I){if(V.current)return V.current(D,I,z);z()}},[D,I,z,V,Q]);const ue=m.useMemo(()=>({reference:O,floating:F,setReference:S,setFloating:P}),[S,P]),se=m.useMemo(()=>({reference:D,floating:I}),[D,I]),fe=m.useMemo(()=>{const H={position:n,left:0,top:0};if(!se.floating)return H;const re=oj(se.floating,x.x),G=oj(se.floating,x.y);return h?{...H,transform:"translate("+re+"px, "+G+"px)",...t1(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:G}},[n,h,se.floating,x.x,x.y]);return m.useMemo(()=>({...x,update:z,refs:ue,elements:se,floatingStyles:fe}),[x,z,ue,se,fe])}const A5=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?ij({element:r.current,padding:o}).fn(n):{}:r?ij({element:r,padding:o}).fn(n):{}}}},P5=(t,s)=>({...g5(t),options:[t,s]}),E5=(t,s)=>({...v5(t),options:[t,s]}),k5=(t,s)=>({...N5(t),options:[t,s]}),D5=(t,s)=>({...y5(t),options:[t,s]}),T5=(t,s)=>({...b5(t),options:[t,s]}),I5=(t,s)=>({...j5(t),options:[t,s]}),M5=(t,s)=>({...A5(t),options:[t,s]});var R5="Arrow",s1=m.forwardRef((t,s)=>{const{children:n,width:r=10,height:o=5,...c}=t;return e.jsx(jt.svg,{...c,ref:s,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});s1.displayName=R5;var O5=s1;function w0(t){const[s,n]=m.useState(void 0);return Tn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let u,h;if("borderBoxSize"in c){const f=c.borderBoxSize,v=Array.isArray(f)?f[0]:f;u=v.inlineSize,h=v.blockSize}else u=t.offsetWidth,h=t.offsetHeight;n({width:u,height:h})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var C0="Popper",[n1,Np]=Sa(C0),[L5,a1]=n1(C0),r1=t=>{const{__scopePopper:s,children:n}=t,[r,o]=m.useState(null);return e.jsx(L5,{scope:s,anchor:r,onAnchorChange:o,children:n})};r1.displayName=C0;var i1="PopperAnchor",o1=m.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...o}=t,c=a1(i1,n),u=m.useRef(null),h=Qt(s,u),f=m.useRef(null);return m.useEffect(()=>{const v=f.current;f.current=r?.current||u.current,v!==f.current&&c.onAnchorChange(f.current)}),r?null:e.jsx(jt.div,{...o,ref:h})});o1.displayName=i1;var S0="PopperContent",[F5,$5]=n1(S0),l1=m.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:c="center",alignOffset:u=0,arrowPadding:h=0,avoidCollisions:f=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:g="partial",hideWhenDetached:N=!1,updatePositionStrategy:w="optimized",onPlaced:j,...C}=t,k=a1(S0,n),[E,S]=m.useState(null),P=Qt(s,Y=>S(Y)),[D,I]=m.useState(null),O=w0(D),F=O?.width??0,X=O?.height??0,Q=r+(c!=="center"?"-"+c:""),V=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},$=Array.isArray(v)?v:[v],R=$.length>0,z={padding:V,boundary:$.filter(B5),altBoundary:R},{refs:J,floatingStyles:ue,placement:se,isPositioned:fe,middlewareData:H}=_5({strategy:"fixed",placement:Q,whileElementsMounted:(...Y)=>x5(...Y,{animationFrame:w==="always"}),elements:{reference:k.anchor},middleware:[P5({mainAxis:o+X,alignmentAxis:u}),f&&E5({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?k5():void 0,...z}),f&&D5({...z}),T5({...z,apply:({elements:Y,rects:ae,availableWidth:Ie,availableHeight:$e})=>{const{width:Ge,height:Xe}=ae.reference,Je=Y.floating.style;Je.setProperty("--radix-popper-available-width",`${Ie}px`),Je.setProperty("--radix-popper-available-height",`${$e}px`),Je.setProperty("--radix-popper-anchor-width",`${Ge}px`),Je.setProperty("--radix-popper-anchor-height",`${Xe}px`)}}),D&&M5({element:D,padding:h}),U5({arrowWidth:F,arrowHeight:X}),N&&I5({strategy:"referenceHidden",...z})]}),[re,G]=u1(se),W=Fn(j);Tn(()=>{fe&&W?.()},[fe,W]);const ne=H.arrow?.x,K=H.arrow?.y,ee=H.arrow?.centerOffset!==0,[U,le]=m.useState();return Tn(()=>{E&&le(window.getComputedStyle(E).zIndex)},[E]),e.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:fe?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(F5,{scope:n,placedSide:re,onArrowChange:I,arrowX:ne,arrowY:K,shouldHideArrow:ee,children:e.jsx(jt.div,{"data-side":re,"data-align":G,...C,ref:P,style:{...C.style,animation:fe?void 0:"none"}})})})});l1.displayName=S0;var c1="PopperArrow",z5={top:"bottom",right:"left",bottom:"top",left:"right"},d1=m.forwardRef(function(s,n){const{__scopePopper:r,...o}=s,c=$5(c1,r),u=z5[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(O5,{...o,ref:n,style:{...o.style,display:"block"}})})});d1.displayName=c1;function B5(t){return t!==null}var U5=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:o}=s,u=o.arrow?.centerOffset!==0,h=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[v,x]=u1(n),g={start:"0%",center:"50%",end:"100%"}[x],N=(o.arrow?.x??0)+h/2,w=(o.arrow?.y??0)+f/2;let j="",C="";return v==="bottom"?(j=u?g:`${N}px`,C=`${-f}px`):v==="top"?(j=u?g:`${N}px`,C=`${r.floating.height+f}px`):v==="right"?(j=`${-f}px`,C=u?g:`${w}px`):v==="left"&&(j=`${r.floating.width+f}px`,C=u?g:`${w}px`),{data:{x:j,y:C}}}});function u1(t){const[s,n="center"]=t.split("-");return[s,n]}var m1=r1,h1=o1,p1=l1,f1=d1,V5="Portal",wp=m.forwardRef((t,s)=>{const{container:n,...r}=t,[o,c]=m.useState(!1);Tn(()=>c(!0),[]);const u=n||o&&globalThis?.document?.body;return u?SN.createPortal(e.jsx(jt.div,{...r,ref:s}),u):null});wp.displayName=V5;function H5(t){const s=q5(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(Z5);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function q5(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=K5(o),h=G5(c,o.props);return o.type!==m.Fragment&&(h.ref=r?$i(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var W5=Symbol("radix.slottable");function Z5(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===W5}function G5(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function K5(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Q5=qg[" useInsertionEffect ".trim().toString()]||Tn;function dr({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,u]=X5({defaultProp:s,onChange:n}),h=t!==void 0,f=h?t:o;{const x=m.useRef(t!==void 0);m.useEffect(()=>{const g=x.current;g!==h&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=h},[h,r])}const v=m.useCallback(x=>{if(h){const g=Y5(x)?x(t):x;g!==t&&u.current?.(g)}else c(x)},[h,t,c,u]);return[f,v]}function X5({defaultProp:t,onChange:s}){const[n,r]=m.useState(t),o=m.useRef(n),c=m.useRef(s);return Q5(()=>{c.current=s},[s]),m.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function Y5(t){return typeof t=="function"}function _0(t){const s=m.useRef({value:t,previous:t});return m.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var x1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),J5="VisuallyHidden",eM=m.forwardRef((t,s)=>e.jsx(jt.span,{...t,ref:s,style:{...x1,...t.style}}));eM.displayName=J5;var tM=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Ac=new WeakMap,ah=new WeakMap,rh={},Tx=0,g1=function(t){return t&&(t.host||g1(t.parentNode))},sM=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=g1(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},nM=function(t,s,n,r){var o=sM(s,Array.isArray(t)?t:[t]);rh[n]||(rh[n]=new WeakMap);var c=rh[n],u=[],h=new Set,f=new Set(o),v=function(g){!g||h.has(g)||(h.add(g),v(g.parentNode))};o.forEach(v);var x=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(N){if(h.has(N))x(N);else try{var w=N.getAttribute(r),j=w!==null&&w!=="false",C=(Ac.get(N)||0)+1,k=(c.get(N)||0)+1;Ac.set(N,C),c.set(N,k),u.push(N),C===1&&j&&ah.set(N,!0),k===1&&N.setAttribute(n,"true"),j||N.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",N,E)}})};return x(s),h.clear(),Tx++,function(){u.forEach(function(g){var N=Ac.get(g)-1,w=c.get(g)-1;Ac.set(g,N),c.set(g,w),N||(ah.has(g)||g.removeAttribute(r),ah.delete(g)),w||g.removeAttribute(n)}),Tx--,Tx||(Ac=new WeakMap,Ac=new WeakMap,ah=new WeakMap,rh={})}},A0=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=tM(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),nM(r,o,n,"aria-hidden")):function(){return null}},Jr=function(){return Jr=Object.assign||function(s){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},Jr.apply(this,arguments)};function v1(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)s.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function aM(t,s,n){if(n||arguments.length===2)for(var r=0,o=s.length,c;r<o;r++)(c||!(r in s))&&(c||(c=Array.prototype.slice.call(s,0,r)),c[r]=s[r]);return t.concat(c||Array.prototype.slice.call(s))}var kh="right-scroll-bar-position",Dh="width-before-scroll-bar",rM="with-scroll-bars-hidden",iM="--removed-body-scroll-bar-size";function Ix(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function oM(t,s){var n=m.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=s,n.facade}var lM=typeof window<"u"?m.useLayoutEffect:m.useEffect,lj=new WeakMap;function cM(t,s){var n=oM(null,function(r){return t.forEach(function(o){return Ix(o,r)})});return lM(function(){var r=lj.get(n);if(r){var o=new Set(r),c=new Set(t),u=n.current;o.forEach(function(h){c.has(h)||Ix(h,null)}),c.forEach(function(h){o.has(h)||Ix(h,u)})}lj.set(n,t)},[t]),n}function dM(t){return t}function uM(t,s){s===void 0&&(s=dM);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var u=s(c,r);return n.push(u),function(){n=n.filter(function(h){return h!==u})}},assignSyncMedium:function(c){for(r=!0;n.length;){var u=n;n=[],u.forEach(c)}n={push:function(h){return c(h)},filter:function(){return n}}},assignMedium:function(c){r=!0;var u=[];if(n.length){var h=n;n=[],h.forEach(c),u=n}var f=function(){var x=u;u=[],x.forEach(c)},v=function(){return Promise.resolve().then(f)};v(),n={push:function(x){u.push(x),v()},filter:function(x){return u=u.filter(x),n}}}};return o}function mM(t){t===void 0&&(t={});var s=uM(null);return s.options=Jr({async:!0,ssr:!1},t),s}var y1=function(t){var s=t.sideCar,n=v1(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Jr({},n))};y1.isSideCarExport=!0;function hM(t,s){return t.useMedium(s),y1}var b1=mM(),Mx=function(){},Cp=m.forwardRef(function(t,s){var n=m.useRef(null),r=m.useState({onScrollCapture:Mx,onWheelCapture:Mx,onTouchMoveCapture:Mx}),o=r[0],c=r[1],u=t.forwardProps,h=t.children,f=t.className,v=t.removeScrollBar,x=t.enabled,g=t.shards,N=t.sideCar,w=t.noRelative,j=t.noIsolation,C=t.inert,k=t.allowPinchZoom,E=t.as,S=E===void 0?"div":E,P=t.gapMode,D=v1(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=N,O=cM([n,s]),F=Jr(Jr({},D),o);return m.createElement(m.Fragment,null,x&&m.createElement(I,{sideCar:b1,removeScrollBar:v,shards:g,noRelative:w,noIsolation:j,inert:C,setCallbacks:c,allowPinchZoom:!!k,lockRef:n,gapMode:P}),u?m.cloneElement(m.Children.only(h),Jr(Jr({},F),{ref:O})):m.createElement(S,Jr({},F,{className:f,ref:O}),h))});Cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cp.classNames={fullWidth:Dh,zeroRight:kh};var pM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=pM();return s&&t.setAttribute("nonce",s),t}function xM(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function gM(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var vM=function(){var t=0,s=null;return{add:function(n){t==0&&(s=fM())&&(xM(s,n),gM(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},yM=function(){var t=vM();return function(s,n){m.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},j1=function(){var t=yM(),s=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return s},bM={left:0,top:0,right:0,gap:0},Rx=function(t){return parseInt(t||"",10)||0},jM=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],o=s[t==="padding"?"paddingRight":"marginRight"];return[Rx(n),Rx(r),Rx(o)]},NM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return bM;var s=jM(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},wM=j1(),Vc="data-scroll-locked",CM=function(t,s,n,r){var o=t.left,c=t.top,u=t.right,h=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(rM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(Vc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kh,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(Dh,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(kh," .").concat(kh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dh," .").concat(Dh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vc,`] {
    `).concat(iM,": ").concat(h,`px;
  }
`)},cj=function(){var t=parseInt(document.body.getAttribute(Vc)||"0",10);return isFinite(t)?t:0},SM=function(){m.useEffect(function(){return document.body.setAttribute(Vc,(cj()+1).toString()),function(){var t=cj()-1;t<=0?document.body.removeAttribute(Vc):document.body.setAttribute(Vc,t.toString())}},[])},_M=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;SM();var c=m.useMemo(function(){return NM(o)},[o]);return m.createElement(wM,{styles:CM(c,!s,o,n?"":"!important")})},Sg=!1;if(typeof window<"u")try{var ih=Object.defineProperty({},"passive",{get:function(){return Sg=!0,!0}});window.addEventListener("test",ih,ih),window.removeEventListener("test",ih,ih)}catch{Sg=!1}var Pc=Sg?{passive:!1}:!1,AM=function(t){return t.tagName==="TEXTAREA"},N1=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!AM(t)&&n[s]==="visible")},PM=function(t){return N1(t,"overflowY")},EM=function(t){return N1(t,"overflowX")},dj=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=w1(t,r);if(o){var c=C1(t,r),u=c[1],h=c[2];if(u>h)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},kM=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},DM=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},w1=function(t,s){return t==="v"?PM(s):EM(s)},C1=function(t,s){return t==="v"?kM(s):DM(s)},TM=function(t,s){return t==="h"&&s==="rtl"?-1:1},IM=function(t,s,n,r,o){var c=TM(t,window.getComputedStyle(s).direction),u=c*r,h=n.target,f=s.contains(h),v=!1,x=u>0,g=0,N=0;do{if(!h)break;var w=C1(t,h),j=w[0],C=w[1],k=w[2],E=C-k-c*j;(j||E)&&w1(t,h)&&(g+=E,N+=j);var S=h.parentNode;h=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!f&&h!==document.body||f&&(s.contains(h)||s===h));return(x&&Math.abs(g)<1||!x&&Math.abs(N)<1)&&(v=!0),v},oh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},uj=function(t){return[t.deltaX,t.deltaY]},mj=function(t){return t&&"current"in t?t.current:t},MM=function(t,s){return t[0]===s[0]&&t[1]===s[1]},RM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},OM=0,Ec=[];function LM(t){var s=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),o=m.useState(OM++)[0],c=m.useState(j1)[0],u=m.useRef(t);m.useEffect(function(){u.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var C=aM([t.lockRef.current],(t.shards||[]).map(mj),!0).filter(Boolean);return C.forEach(function(k){return k.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),C.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var h=m.useCallback(function(C,k){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!u.current.allowPinchZoom;var E=oh(C),S=n.current,P="deltaX"in C?C.deltaX:S[0]-E[0],D="deltaY"in C?C.deltaY:S[1]-E[1],I,O=C.target,F=Math.abs(P)>Math.abs(D)?"h":"v";if("touches"in C&&F==="h"&&O.type==="range")return!1;var X=window.getSelection(),Q=X&&X.anchorNode,V=Q?Q===O||Q.contains(O):!1;if(V)return!1;var $=dj(F,O);if(!$)return!0;if($?I=F:(I=F==="v"?"h":"v",$=dj(F,O)),!$)return!1;if(!r.current&&"changedTouches"in C&&(P||D)&&(r.current=I),!I)return!0;var R=r.current||I;return IM(R,k,C,R==="h"?P:D)},[]),f=m.useCallback(function(C){var k=C;if(!(!Ec.length||Ec[Ec.length-1]!==c)){var E="deltaY"in k?uj(k):oh(k),S=s.current.filter(function(I){return I.name===k.type&&(I.target===k.target||k.target===I.shadowParent)&&MM(I.delta,E)})[0];if(S&&S.should){k.cancelable&&k.preventDefault();return}if(!S){var P=(u.current.shards||[]).map(mj).filter(Boolean).filter(function(I){return I.contains(k.target)}),D=P.length>0?h(k,P[0]):!u.current.noIsolation;D&&k.cancelable&&k.preventDefault()}}},[]),v=m.useCallback(function(C,k,E,S){var P={name:C,delta:k,target:E,should:S,shadowParent:FM(E)};s.current.push(P),setTimeout(function(){s.current=s.current.filter(function(D){return D!==P})},1)},[]),x=m.useCallback(function(C){n.current=oh(C),r.current=void 0},[]),g=m.useCallback(function(C){v(C.type,uj(C),C.target,h(C,t.lockRef.current))},[]),N=m.useCallback(function(C){v(C.type,oh(C),C.target,h(C,t.lockRef.current))},[]);m.useEffect(function(){return Ec.push(c),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:N}),document.addEventListener("wheel",f,Pc),document.addEventListener("touchmove",f,Pc),document.addEventListener("touchstart",x,Pc),function(){Ec=Ec.filter(function(C){return C!==c}),document.removeEventListener("wheel",f,Pc),document.removeEventListener("touchmove",f,Pc),document.removeEventListener("touchstart",x,Pc)}},[]);var w=t.removeScrollBar,j=t.inert;return m.createElement(m.Fragment,null,j?m.createElement(c,{styles:RM(o)}):null,w?m.createElement(_M,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function FM(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const $M=hM(b1,LM);var Sp=m.forwardRef(function(t,s){return m.createElement(Cp,Jr({},t,{ref:s,sideCar:$M}))});Sp.classNames=Cp.classNames;var zM=[" ","Enter","ArrowUp","ArrowDown"],BM=[" ","Enter"],Rl="Select",[_p,Ap,UM]=f0(Rl),[od]=Sa(Rl,[UM,Np]),Pp=Np(),[VM,Uo]=od(Rl),[HM,qM]=od(Rl),S1=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:o,onOpenChange:c,value:u,defaultValue:h,onValueChange:f,dir:v,name:x,autoComplete:g,disabled:N,required:w,form:j}=t,C=Pp(s),[k,E]=m.useState(null),[S,P]=m.useState(null),[D,I]=m.useState(!1),O=ad(v),[F,X]=dr({prop:r,defaultProp:o??!1,onChange:c,caller:Rl}),[Q,V]=dr({prop:u,defaultProp:h,onChange:f,caller:Rl}),$=m.useRef(null),R=k?j||!!k.closest("form"):!0,[z,J]=m.useState(new Set),ue=Array.from(z).map(se=>se.props.value).join(";");return e.jsx(m1,{...C,children:e.jsxs(VM,{required:w,scope:s,trigger:k,onTriggerChange:E,valueNode:S,onValueNodeChange:P,valueNodeHasChildren:D,onValueNodeHasChildrenChange:I,contentId:Er(),value:Q,onValueChange:V,open:F,onOpenChange:X,dir:O,triggerPointerDownPosRef:$,disabled:N,children:[e.jsx(_p.Provider,{scope:s,children:e.jsx(HM,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(se=>{J(fe=>new Set(fe).add(se))},[]),onNativeOptionRemove:m.useCallback(se=>{J(fe=>{const H=new Set(fe);return H.delete(se),H})},[]),children:n})}),R?e.jsxs(Q1,{"aria-hidden":!0,required:w,tabIndex:-1,name:x,autoComplete:g,value:Q,onChange:se=>V(se.target.value),disabled:N,form:j,children:[Q===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},ue):null]})})};S1.displayName=Rl;var _1="SelectTrigger",A1=m.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,c=Pp(n),u=Uo(_1,n),h=u.disabled||r,f=Qt(s,u.onTriggerChange),v=Ap(n),x=m.useRef("touch"),[g,N,w]=Y1(C=>{const k=v().filter(P=>!P.disabled),E=k.find(P=>P.value===u.value),S=J1(k,C,E);S!==void 0&&u.onValueChange(S.value)}),j=C=>{h||(u.onOpenChange(!0),w()),C&&(u.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return e.jsx(h1,{asChild:!0,...c,children:e.jsx(jt.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":X1(u.value)?"":void 0,...o,ref:f,onClick:rt(o.onClick,C=>{C.currentTarget.focus(),x.current!=="mouse"&&j(C)}),onPointerDown:rt(o.onPointerDown,C=>{x.current=C.pointerType;const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(j(C),C.preventDefault())}),onKeyDown:rt(o.onKeyDown,C=>{const k=g.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&N(C.key),!(k&&C.key===" ")&&zM.includes(C.key)&&(j(),C.preventDefault())})})})});A1.displayName=_1;var P1="SelectValue",E1=m.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:o,children:c,placeholder:u="",...h}=t,f=Uo(P1,n),{onValueNodeHasChildrenChange:v}=f,x=c!==void 0,g=Qt(s,f.onValueNodeChange);return Tn(()=>{v(x)},[v,x]),e.jsx(jt.span,{...h,ref:g,style:{pointerEvents:"none"},children:X1(f.value)?e.jsx(e.Fragment,{children:u}):c})});E1.displayName=P1;var WM="SelectIcon",k1=m.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...o}=t;return e.jsx(jt.span,{"aria-hidden":!0,...o,ref:s,children:r||""})});k1.displayName=WM;var ZM="SelectPortal",D1=t=>e.jsx(wp,{asChild:!0,...t});D1.displayName=ZM;var Ol="SelectContent",T1=m.forwardRef((t,s)=>{const n=Uo(Ol,t.__scopeSelect),[r,o]=m.useState();if(Tn(()=>{o(new DocumentFragment)},[]),!n.open){const c=r;return c?Xc.createPortal(e.jsx(I1,{scope:t.__scopeSelect,children:e.jsx(_p.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(M1,{...t,ref:s})});T1.displayName=Ol;var Cr=10,[I1,Vo]=od(Ol),GM="SelectContentImpl",KM=H5("SelectContent.RemoveScroll"),M1=m.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:c,onPointerDownOutside:u,side:h,sideOffset:f,align:v,alignOffset:x,arrowPadding:g,collisionBoundary:N,collisionPadding:w,sticky:j,hideWhenDetached:C,avoidCollisions:k,...E}=t,S=Uo(Ol,n),[P,D]=m.useState(null),[I,O]=m.useState(null),F=Qt(s,Y=>D(Y)),[X,Q]=m.useState(null),[V,$]=m.useState(null),R=Ap(n),[z,J]=m.useState(!1),ue=m.useRef(!1);m.useEffect(()=>{if(P)return A0(P)},[P]),x0();const se=m.useCallback(Y=>{const[ae,...Ie]=R().map(Xe=>Xe.ref.current),[$e]=Ie.slice(-1),Ge=document.activeElement;for(const Xe of Y)if(Xe===Ge||(Xe?.scrollIntoView({block:"nearest"}),Xe===ae&&I&&(I.scrollTop=0),Xe===$e&&I&&(I.scrollTop=I.scrollHeight),Xe?.focus(),document.activeElement!==Ge))return},[R,I]),fe=m.useCallback(()=>se([X,P]),[se,X,P]);m.useEffect(()=>{z&&fe()},[z,fe]);const{onOpenChange:H,triggerPointerDownPosRef:re}=S;m.useEffect(()=>{if(P){let Y={x:0,y:0};const ae=$e=>{Y={x:Math.abs(Math.round($e.pageX)-(re.current?.x??0)),y:Math.abs(Math.round($e.pageY)-(re.current?.y??0))}},Ie=$e=>{Y.x<=10&&Y.y<=10?$e.preventDefault():P.contains($e.target)||H(!1),document.removeEventListener("pointermove",ae),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[P,H,re]),m.useEffect(()=>{const Y=()=>H(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[H]);const[G,W]=Y1(Y=>{const ae=R().filter(Ge=>!Ge.disabled),Ie=ae.find(Ge=>Ge.ref.current===document.activeElement),$e=J1(ae,Y,Ie);$e&&setTimeout(()=>$e.ref.current.focus())}),ne=m.useCallback((Y,ae,Ie)=>{const $e=!ue.current&&!Ie;(S.value!==void 0&&S.value===ae||$e)&&(Q(Y),$e&&(ue.current=!0))},[S.value]),K=m.useCallback(()=>P?.focus(),[P]),ee=m.useCallback((Y,ae,Ie)=>{const $e=!ue.current&&!Ie;(S.value!==void 0&&S.value===ae||$e)&&$(Y)},[S.value]),U=r==="popper"?_g:R1,le=U===_g?{side:h,sideOffset:f,align:v,alignOffset:x,arrowPadding:g,collisionBoundary:N,collisionPadding:w,sticky:j,hideWhenDetached:C,avoidCollisions:k}:{};return e.jsx(I1,{scope:n,content:P,viewport:I,onViewportChange:O,itemRefCallback:ne,selectedItem:X,onItemLeave:K,itemTextRefCallback:ee,focusSelectedItem:fe,selectedItemText:V,position:r,isPositioned:z,searchRef:G,children:e.jsx(Sp,{as:KM,allowPinchZoom:!0,children:e.jsx(gp,{asChild:!0,trapped:S.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:rt(o,Y=>{S.trigger?.focus({preventScroll:!0}),Y.preventDefault()}),children:e.jsx(xp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:e.jsx(U,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Y=>Y.preventDefault(),...E,...le,onPlaced:()=>J(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:rt(E.onKeyDown,Y=>{const ae=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!ae&&Y.key.length===1&&W(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let $e=R().filter(Ge=>!Ge.disabled).map(Ge=>Ge.ref.current);if(["ArrowUp","End"].includes(Y.key)&&($e=$e.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const Ge=Y.target,Xe=$e.indexOf(Ge);$e=$e.slice(Xe+1)}setTimeout(()=>se($e)),Y.preventDefault()}})})})})})})});M1.displayName=GM;var QM="SelectItemAlignedPosition",R1=m.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,c=Uo(Ol,n),u=Vo(Ol,n),[h,f]=m.useState(null),[v,x]=m.useState(null),g=Qt(s,F=>x(F)),N=Ap(n),w=m.useRef(!1),j=m.useRef(!0),{viewport:C,selectedItem:k,selectedItemText:E,focusSelectedItem:S}=u,P=m.useCallback(()=>{if(c.trigger&&c.valueNode&&h&&v&&C&&k&&E){const F=c.trigger.getBoundingClientRect(),X=v.getBoundingClientRect(),Q=c.valueNode.getBoundingClientRect(),V=E.getBoundingClientRect();if(c.dir!=="rtl"){const Ge=V.left-X.left,Xe=Q.left-Ge,Je=F.left-Xe,tt=F.width+Je,ut=Math.max(tt,X.width),wt=window.innerWidth-Cr,mt=bg(Xe,[Cr,Math.max(Cr,wt-ut)]);h.style.minWidth=tt+"px",h.style.left=mt+"px"}else{const Ge=X.right-V.right,Xe=window.innerWidth-Q.right-Ge,Je=window.innerWidth-F.right-Xe,tt=F.width+Je,ut=Math.max(tt,X.width),wt=window.innerWidth-Cr,mt=bg(Xe,[Cr,Math.max(Cr,wt-ut)]);h.style.minWidth=tt+"px",h.style.right=mt+"px"}const $=N(),R=window.innerHeight-Cr*2,z=C.scrollHeight,J=window.getComputedStyle(v),ue=parseInt(J.borderTopWidth,10),se=parseInt(J.paddingTop,10),fe=parseInt(J.borderBottomWidth,10),H=parseInt(J.paddingBottom,10),re=ue+se+z+H+fe,G=Math.min(k.offsetHeight*5,re),W=window.getComputedStyle(C),ne=parseInt(W.paddingTop,10),K=parseInt(W.paddingBottom,10),ee=F.top+F.height/2-Cr,U=R-ee,le=k.offsetHeight/2,Y=k.offsetTop+le,ae=ue+se+Y,Ie=re-ae;if(ae<=ee){const Ge=$.length>0&&k===$[$.length-1].ref.current;h.style.bottom="0px";const Xe=v.clientHeight-C.offsetTop-C.offsetHeight,Je=Math.max(U,le+(Ge?K:0)+Xe+fe),tt=ae+Je;h.style.height=tt+"px"}else{const Ge=$.length>0&&k===$[0].ref.current;h.style.top="0px";const Je=Math.max(ee,ue+C.offsetTop+(Ge?ne:0)+le)+Ie;h.style.height=Je+"px",C.scrollTop=ae-ee+C.offsetTop}h.style.margin=`${Cr}px 0`,h.style.minHeight=G+"px",h.style.maxHeight=R+"px",r?.(),requestAnimationFrame(()=>w.current=!0)}},[N,c.trigger,c.valueNode,h,v,C,k,E,c.dir,r]);Tn(()=>P(),[P]);const[D,I]=m.useState();Tn(()=>{v&&I(window.getComputedStyle(v).zIndex)},[v]);const O=m.useCallback(F=>{F&&j.current===!0&&(P(),S?.(),j.current=!1)},[P,S]);return e.jsx(YM,{scope:n,contentWrapper:h,shouldExpandOnScrollRef:w,onScrollButtonChange:O,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:e.jsx(jt.div,{...o,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});R1.displayName=QM;var XM="SelectPopperPosition",_g=m.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Cr,...c}=t,u=Pp(n);return e.jsx(p1,{...u,...c,ref:s,align:r,collisionPadding:o,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_g.displayName=XM;var[YM,P0]=od(Ol,{}),Ag="SelectViewport",O1=m.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...o}=t,c=Vo(Ag,n),u=P0(Ag,n),h=Qt(s,c.onViewportChange),f=m.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(_p.Slot,{scope:n,children:e.jsx(jt.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:rt(o.onScroll,v=>{const x=v.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:N}=u;if(N?.current&&g){const w=Math.abs(f.current-x.scrollTop);if(w>0){const j=window.innerHeight-Cr*2,C=parseFloat(g.style.minHeight),k=parseFloat(g.style.height),E=Math.max(C,k);if(E<j){const S=E+w,P=Math.min(j,S),D=S-P;g.style.height=P+"px",g.style.bottom==="0px"&&(x.scrollTop=D>0?D:0,g.style.justifyContent="flex-end")}}}f.current=x.scrollTop})})})]})});O1.displayName=Ag;var L1="SelectGroup",[JM,eR]=od(L1),F1=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=Er();return e.jsx(JM,{scope:n,id:o,children:e.jsx(jt.div,{role:"group","aria-labelledby":o,...r,ref:s})})});F1.displayName=L1;var $1="SelectLabel",z1=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=eR($1,n);return e.jsx(jt.div,{id:o.id,...r,ref:s})});z1.displayName=$1;var Zh="SelectItem",[tR,B1]=od(Zh),U1=m.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:c,...u}=t,h=Uo(Zh,n),f=Vo(Zh,n),v=h.value===r,[x,g]=m.useState(c??""),[N,w]=m.useState(!1),j=Qt(s,S=>f.itemRefCallback?.(S,r,o)),C=Er(),k=m.useRef("touch"),E=()=>{o||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(tR,{scope:n,value:r,disabled:o,textId:C,isSelected:v,onItemTextChange:m.useCallback(S=>{g(P=>P||(S?.textContent??"").trim())},[]),children:e.jsx(_p.ItemSlot,{scope:n,value:r,disabled:o,textValue:x,children:e.jsx(jt.div,{role:"option","aria-labelledby":C,"data-highlighted":N?"":void 0,"aria-selected":v&&N,"data-state":v?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...u,ref:j,onFocus:rt(u.onFocus,()=>w(!0)),onBlur:rt(u.onBlur,()=>w(!1)),onClick:rt(u.onClick,()=>{k.current!=="mouse"&&E()}),onPointerUp:rt(u.onPointerUp,()=>{k.current==="mouse"&&E()}),onPointerDown:rt(u.onPointerDown,S=>{k.current=S.pointerType}),onPointerMove:rt(u.onPointerMove,S=>{k.current=S.pointerType,o?f.onItemLeave?.():k.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:rt(u.onPointerLeave,S=>{S.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:rt(u.onKeyDown,S=>{f.searchRef?.current!==""&&S.key===" "||(BM.includes(S.key)&&E(),S.key===" "&&S.preventDefault())})})})})});U1.displayName=Zh;var uu="SelectItemText",V1=m.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:o,...c}=t,u=Uo(uu,n),h=Vo(uu,n),f=B1(uu,n),v=qM(uu,n),[x,g]=m.useState(null),N=Qt(s,E=>g(E),f.onItemTextChange,E=>h.itemTextRefCallback?.(E,f.value,f.disabled)),w=x?.textContent,j=m.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:w},f.value),[f.disabled,f.value,w]),{onNativeOptionAdd:C,onNativeOptionRemove:k}=v;return Tn(()=>(C(j),()=>k(j)),[C,k,j]),e.jsxs(e.Fragment,{children:[e.jsx(jt.span,{id:f.textId,...c,ref:N}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?Xc.createPortal(c.children,u.valueNode):null]})});V1.displayName=uu;var H1="SelectItemIndicator",q1=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return B1(H1,n).isSelected?e.jsx(jt.span,{"aria-hidden":!0,...r,ref:s}):null});q1.displayName=H1;var Pg="SelectScrollUpButton",W1=m.forwardRef((t,s)=>{const n=Vo(Pg,t.__scopeSelect),r=P0(Pg,t.__scopeSelect),[o,c]=m.useState(!1),u=Qt(s,r.onScrollButtonChange);return Tn(()=>{if(n.viewport&&n.isPositioned){let h=function(){const v=f.scrollTop>0;c(v)};const f=n.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[n.viewport,n.isPositioned]),o?e.jsx(G1,{...t,ref:u,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=n;h&&f&&(h.scrollTop=h.scrollTop-f.offsetHeight)}}):null});W1.displayName=Pg;var Eg="SelectScrollDownButton",Z1=m.forwardRef((t,s)=>{const n=Vo(Eg,t.__scopeSelect),r=P0(Eg,t.__scopeSelect),[o,c]=m.useState(!1),u=Qt(s,r.onScrollButtonChange);return Tn(()=>{if(n.viewport&&n.isPositioned){let h=function(){const v=f.scrollHeight-f.clientHeight,x=Math.ceil(f.scrollTop)<v;c(x)};const f=n.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[n.viewport,n.isPositioned]),o?e.jsx(G1,{...t,ref:u,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=n;h&&f&&(h.scrollTop=h.scrollTop+f.offsetHeight)}}):null});Z1.displayName=Eg;var G1=m.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,c=Vo("SelectScrollButton",n),u=m.useRef(null),h=Ap(n),f=m.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return m.useEffect(()=>()=>f(),[f]),Tn(()=>{h().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[h]),e.jsx(jt.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:rt(o.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:rt(o.onPointerMove,()=>{c.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:rt(o.onPointerLeave,()=>{f()})})}),sR="SelectSeparator",K1=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(jt.div,{"aria-hidden":!0,...r,ref:s})});K1.displayName=sR;var kg="SelectArrow",nR=m.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=Pp(n),c=Uo(kg,n),u=Vo(kg,n);return c.open&&u.position==="popper"?e.jsx(f1,{...o,...r,ref:s}):null});nR.displayName=kg;var aR="SelectBubbleInput",Q1=m.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const o=m.useRef(null),c=Qt(r,o),u=_0(s);return m.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==s&&x){const g=new Event("change",{bubbles:!0});x.call(h,s),h.dispatchEvent(g)}},[u,s]),e.jsx(jt.select,{...n,style:{...x1,...n.style},ref:c,defaultValue:s})});Q1.displayName=aR;function X1(t){return t===""||t===void 0}function Y1(t){const s=Fn(t),n=m.useRef(""),r=m.useRef(0),o=m.useCallback(u=>{const h=n.current+u;s(h),(function f(v){n.current=v,window.clearTimeout(r.current),v!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(h)},[s]),c=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,c]}function J1(t,s,n){const o=s.length>1&&Array.from(s).every(v=>v===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let u=rR(t,Math.max(c,0));o.length===1&&(u=u.filter(v=>v!==n));const f=u.find(v=>v.textValue.toLowerCase().startsWith(o.toLowerCase()));return f!==n?f:void 0}function rR(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var iR=S1,oR=A1,lR=E1,cR=k1,dR=D1,uR=T1,mR=O1,hR=F1,pR=z1,fR=U1,xR=V1,gR=q1,vR=W1,yR=Z1,bR=K1;function _t({...t}){return e.jsx(iR,{"data-slot":"select",...t})}function jR({...t}){return e.jsx(hR,{"data-slot":"select-group",...t})}function At({...t}){return e.jsx(lR,{"data-slot":"select-value",...t})}function Pt({className:t,size:s="default",children:n,...r}){return e.jsxs(oR,{"data-slot":"select-trigger","data-size":s,className:vt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,e.jsx(cR,{asChild:!0,children:e.jsx(Iu,{className:"size-4 opacity-50"})})]})}function Et({className:t,children:s,position:n="popper",...r}){return e.jsx(dR,{children:e.jsxs(uR,{"data-slot":"select-content",className:vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(wR,{}),e.jsx(mR,{className:vt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(CR,{})]})})}function NR({className:t,...s}){return e.jsx(pR,{"data-slot":"select-label",className:vt("text-muted-foreground px-2 py-1.5 text-xs",t),...s})}function De({className:t,children:s,...n}){return e.jsxs(fR,{"data-slot":"select-item",className:vt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(gR,{children:e.jsx(ja,{className:"size-4"})})}),e.jsx(xR,{children:s})]})}function hj({className:t,...s}){return e.jsx(bR,{"data-slot":"select-separator",className:vt("bg-border pointer-events-none -mx-1 my-1 h-px",t),...s})}function wR({className:t,...s}){return e.jsx(vR,{"data-slot":"select-scroll-up-button",className:vt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(lw,{className:"size-4"})})}function CR({className:t,...s}){return e.jsx(yR,{"data-slot":"select-scroll-down-button",className:vt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Iu,{className:"size-4"})})}function SR(t,s){return m.useReducer((n,r)=>s[n][r]??n,t)}var ia=t=>{const{present:s,children:n}=t,r=_R(s),o=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),c=Qt(r.ref,AR(o));return typeof n=="function"||r.isPresent?m.cloneElement(o,{ref:c}):null};ia.displayName="Presence";function _R(t){const[s,n]=m.useState(),r=m.useRef(null),o=m.useRef(t),c=m.useRef("none"),u=t?"mounted":"unmounted",[h,f]=SR(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const v=lh(r.current);c.current=h==="mounted"?v:"none"},[h]),Tn(()=>{const v=r.current,x=o.current;if(x!==t){const N=c.current,w=lh(v);t?f("MOUNT"):w==="none"||v?.display==="none"?f("UNMOUNT"):f(x&&N!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,f]),Tn(()=>{if(s){let v;const x=s.ownerDocument.defaultView??window,g=w=>{const C=lh(r.current).includes(CSS.escape(w.animationName));if(w.target===s&&C&&(f("ANIMATION_END"),!o.current)){const k=s.style.animationFillMode;s.style.animationFillMode="forwards",v=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=k)})}},N=w=>{w.target===s&&(c.current=lh(r.current))};return s.addEventListener("animationstart",N),s.addEventListener("animationcancel",g),s.addEventListener("animationend",g),()=>{x.clearTimeout(v),s.removeEventListener("animationstart",N),s.removeEventListener("animationcancel",g),s.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:m.useCallback(v=>{r.current=v?getComputedStyle(v):null,n(v)},[])}}function lh(t){return t?.animationName||"none"}function AR(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function PR(t){const s=ER(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(DR);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function ER(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=IR(o),h=TR(c,o.props);return o.type!==m.Fragment&&(h.ref=r?$i(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var kR=Symbol("radix.slottable");function DR(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kR}function TR(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function IR(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ep="Dialog",[e2,t2]=Sa(Ep),[MR,Or]=e2(Ep),s2=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:o,onOpenChange:c,modal:u=!0}=t,h=m.useRef(null),f=m.useRef(null),[v,x]=dr({prop:r,defaultProp:o??!1,onChange:c,caller:Ep});return e.jsx(MR,{scope:s,triggerRef:h,contentRef:f,contentId:Er(),titleId:Er(),descriptionId:Er(),open:v,onOpenChange:x,onOpenToggle:m.useCallback(()=>x(g=>!g),[x]),modal:u,children:n})};s2.displayName=Ep;var n2="DialogTrigger",a2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Or(n2,n),c=Qt(s,o.triggerRef);return e.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":D0(o.open),...r,ref:c,onClick:rt(t.onClick,o.onOpenToggle)})});a2.displayName=n2;var E0="DialogPortal",[RR,r2]=e2(E0,{forceMount:void 0}),i2=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:o}=t,c=Or(E0,s);return e.jsx(RR,{scope:s,forceMount:n,children:m.Children.map(r,u=>e.jsx(ia,{present:n||c.open,children:e.jsx(wp,{asChild:!0,container:o,children:u})}))})};i2.displayName=E0;var Gh="DialogOverlay",o2=m.forwardRef((t,s)=>{const n=r2(Gh,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,c=Or(Gh,t.__scopeDialog);return c.modal?e.jsx(ia,{present:r||c.open,children:e.jsx(LR,{...o,ref:s})}):null});o2.displayName=Gh;var OR=PR("DialogOverlay.RemoveScroll"),LR=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Or(Gh,n);return e.jsx(Sp,{as:OR,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(jt.div,{"data-state":D0(o.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),Ll="DialogContent",l2=m.forwardRef((t,s)=>{const n=r2(Ll,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,c=Or(Ll,t.__scopeDialog);return e.jsx(ia,{present:r||c.open,children:c.modal?e.jsx(FR,{...o,ref:s}):e.jsx($R,{...o,ref:s})})});l2.displayName=Ll;var FR=m.forwardRef((t,s)=>{const n=Or(Ll,t.__scopeDialog),r=m.useRef(null),o=Qt(s,n.contentRef,r);return m.useEffect(()=>{const c=r.current;if(c)return A0(c)},[]),e.jsx(c2,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0;(u.button===2||h)&&c.preventDefault()}),onFocusOutside:rt(t.onFocusOutside,c=>c.preventDefault())})}),$R=m.forwardRef((t,s)=>{const n=Or(Ll,t.__scopeDialog),r=m.useRef(!1),o=m.useRef(!1);return e.jsx(c2,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(r.current||n.triggerRef.current?.focus(),c.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(r.current=!0,c.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=c.target;n.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.current&&c.preventDefault()}})}),c2=m.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:c,...u}=t,h=Or(Ll,n),f=m.useRef(null),v=Qt(s,f);return x0(),e.jsxs(e.Fragment,{children:[e.jsx(gp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:c,children:e.jsx(xp,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":D0(h.open),...u,ref:v,onDismiss:()=>h.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(BR,{titleId:h.titleId}),e.jsx(VR,{contentRef:f,descriptionId:h.descriptionId})]})]})}),k0="DialogTitle",d2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Or(k0,n);return e.jsx(jt.h2,{id:o.titleId,...r,ref:s})});d2.displayName=k0;var u2="DialogDescription",m2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Or(u2,n);return e.jsx(jt.p,{id:o.descriptionId,...r,ref:s})});m2.displayName=u2;var h2="DialogClose",p2=m.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Or(h2,n);return e.jsx(jt.button,{type:"button",...r,ref:s,onClick:rt(t.onClick,()=>o.onOpenChange(!1))})});p2.displayName=h2;function D0(t){return t?"open":"closed"}var f2="DialogTitleWarning",[zR,x2]=ZT(f2,{contentName:Ll,titleName:k0,docsSlug:"dialog"}),BR=({titleId:t})=>{const s=x2(f2),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},UR="DialogDescriptionWarning",VR=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${x2(UR).contentName}}.`;return m.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},T0=s2,HR=a2,I0=i2,Fu=o2,M0=l2,R0=d2,O0=m2,kp=p2;function Ps({...t}){return e.jsx(T0,{"data-slot":"dialog",...t})}function qR({...t}){return e.jsx(I0,{"data-slot":"dialog-portal",...t})}const g2=m.forwardRef(({className:t,...s},n)=>e.jsx(Fu,{ref:n,"data-slot":"dialog-overlay",className:vt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));g2.displayName=Fu.displayName;function Es({className:t,children:s,...n}){return e.jsxs(qR,{"data-slot":"dialog-portal",children:[e.jsx(g2,{}),e.jsxs(M0,{"data-slot":"dialog-content",className:vt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(kp,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Na,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Os({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:vt("flex flex-col gap-2 text-center sm:text-left",t),...s})}function v2({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:vt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Ls({className:t,...s}){return e.jsx(R0,{"data-slot":"dialog-title",className:vt("text-lg leading-none font-semibold",t),...s})}function kr({className:t,...s}){return e.jsx(O0,{"data-slot":"dialog-description",className:vt("text-muted-foreground text-sm",t),...s})}var Dp="Checkbox",[WR]=Sa(Dp),[ZR,L0]=WR(Dp);function GR(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:o,disabled:c,form:u,name:h,onCheckedChange:f,required:v,value:x="on",internal_do_not_use_render:g}=t,[N,w]=dr({prop:n,defaultProp:o??!1,onChange:f,caller:Dp}),[j,C]=m.useState(null),[k,E]=m.useState(null),S=m.useRef(!1),P=j?!!u||!!j.closest("form"):!0,D={checked:N,disabled:c,setChecked:w,control:j,setControl:C,name:h,form:u,value:x,hasConsumerStoppedPropagationRef:S,required:v,defaultChecked:Io(o)?!1:o,isFormControl:P,bubbleInput:k,setBubbleInput:E};return e.jsx(ZR,{scope:s,...D,children:KR(g)?g(D):r})}var y2="CheckboxTrigger",b2=m.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},o)=>{const{control:c,value:u,disabled:h,checked:f,required:v,setControl:x,setChecked:g,hasConsumerStoppedPropagationRef:N,isFormControl:w,bubbleInput:j}=L0(y2,t),C=Qt(o,x),k=m.useRef(f);return m.useEffect(()=>{const E=c?.form;if(E){const S=()=>g(k.current);return E.addEventListener("reset",S),()=>E.removeEventListener("reset",S)}},[c,g]),e.jsx(jt.button,{type:"button",role:"checkbox","aria-checked":Io(f)?"mixed":f,"aria-required":v,"data-state":_2(f),"data-disabled":h?"":void 0,disabled:h,value:u,...r,ref:C,onKeyDown:rt(s,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:rt(n,E=>{g(S=>Io(S)?!0:!S),j&&w&&(N.current=E.isPropagationStopped(),N.current||E.stopPropagation())})})});b2.displayName=y2;var j2=m.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:c,required:u,disabled:h,value:f,onCheckedChange:v,form:x,...g}=t;return e.jsx(GR,{__scopeCheckbox:n,checked:o,defaultChecked:c,disabled:h,required:u,onCheckedChange:v,name:r,form:x,value:f,internal_do_not_use_render:({isFormControl:N})=>e.jsxs(e.Fragment,{children:[e.jsx(b2,{...g,ref:s,__scopeCheckbox:n}),N&&e.jsx(S2,{__scopeCheckbox:n})]})})});j2.displayName=Dp;var N2="CheckboxIndicator",w2=m.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...o}=t,c=L0(N2,n);return e.jsx(ia,{present:r||Io(c.checked)||c.checked===!0,children:e.jsx(jt.span,{"data-state":_2(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...t.style}})})});w2.displayName=N2;var C2="CheckboxBubbleInput",S2=m.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:u,required:h,disabled:f,name:v,value:x,form:g,bubbleInput:N,setBubbleInput:w}=L0(C2,t),j=Qt(n,w),C=_0(c),k=w0(r);m.useEffect(()=>{const S=N;if(!S)return;const P=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(P,"checked").set,O=!o.current;if(C!==c&&I){const F=new Event("click",{bubbles:O});S.indeterminate=Io(c),I.call(S,Io(c)?!1:c),S.dispatchEvent(F)}},[N,C,c,o]);const E=m.useRef(Io(c)?!1:c);return e.jsx(jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??E.current,required:h,disabled:f,name:v,value:x,form:g,...s,tabIndex:-1,ref:j,style:{...s.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});S2.displayName=C2;function KR(t){return typeof t=="function"}function Io(t){return t==="indeterminate"}function _2(t){return Io(t)?"indeterminate":t?"checked":"unchecked"}function ri({className:t,...s}){return e.jsx(j2,{"data-slot":"checkbox",className:vt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(w2,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(ja,{className:"size-3.5"})})})}function QR(t,s){return m.useReducer((n,r)=>s[n][r]??n,t)}var F0="ScrollArea",[A2]=Sa(F0),[XR,ur]=A2(F0),P2=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:c=600,...u}=t,[h,f]=m.useState(null),[v,x]=m.useState(null),[g,N]=m.useState(null),[w,j]=m.useState(null),[C,k]=m.useState(null),[E,S]=m.useState(0),[P,D]=m.useState(0),[I,O]=m.useState(!1),[F,X]=m.useState(!1),Q=Qt(s,$=>f($)),V=ad(o);return e.jsx(XR,{scope:n,type:r,dir:V,scrollHideDelay:c,scrollArea:h,viewport:v,onViewportChange:x,content:g,onContentChange:N,scrollbarX:w,onScrollbarXChange:j,scrollbarXEnabled:I,onScrollbarXEnabledChange:O,scrollbarY:C,onScrollbarYChange:k,scrollbarYEnabled:F,onScrollbarYEnabledChange:X,onCornerWidthChange:S,onCornerHeightChange:D,children:e.jsx(jt.div,{dir:V,...u,ref:Q,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":P+"px",...t.style}})})});P2.displayName=F0;var E2="ScrollAreaViewport",k2=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:r,nonce:o,...c}=t,u=ur(E2,n),h=m.useRef(null),f=Qt(s,h,u.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(jt.div,{"data-radix-scroll-area-viewport":"",...c,ref:f,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});k2.displayName=E2;var ci="ScrollAreaScrollbar",D2=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=ur(ci,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:u}=o,h=t.orientation==="horizontal";return m.useEffect(()=>(h?c(!0):u(!0),()=>{h?c(!1):u(!1)}),[h,c,u]),o.type==="hover"?e.jsx(YR,{...r,ref:s,forceMount:n}):o.type==="scroll"?e.jsx(JR,{...r,ref:s,forceMount:n}):o.type==="auto"?e.jsx(T2,{...r,ref:s,forceMount:n}):o.type==="always"?e.jsx($0,{...r,ref:s}):null});D2.displayName=ci;var YR=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=ur(ci,t.__scopeScrollArea),[c,u]=m.useState(!1);return m.useEffect(()=>{const h=o.scrollArea;let f=0;if(h){const v=()=>{window.clearTimeout(f),u(!0)},x=()=>{f=window.setTimeout(()=>u(!1),o.scrollHideDelay)};return h.addEventListener("pointerenter",v),h.addEventListener("pointerleave",x),()=>{window.clearTimeout(f),h.removeEventListener("pointerenter",v),h.removeEventListener("pointerleave",x)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(ia,{present:n||c,children:e.jsx(T2,{"data-state":c?"visible":"hidden",...r,ref:s})})}),JR=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=ur(ci,t.__scopeScrollArea),c=t.orientation==="horizontal",u=Ip(()=>f("SCROLL_END"),100),[h,f]=QR("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(h==="idle"){const v=window.setTimeout(()=>f("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(v)}},[h,o.scrollHideDelay,f]),m.useEffect(()=>{const v=o.viewport,x=c?"scrollLeft":"scrollTop";if(v){let g=v[x];const N=()=>{const w=v[x];g!==w&&(f("SCROLL"),u()),g=w};return v.addEventListener("scroll",N),()=>v.removeEventListener("scroll",N)}},[o.viewport,c,f,u]),e.jsx(ia,{present:n||h!=="hidden",children:e.jsx($0,{"data-state":h==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:rt(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:rt(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),T2=m.forwardRef((t,s)=>{const n=ur(ci,t.__scopeScrollArea),{forceMount:r,...o}=t,[c,u]=m.useState(!1),h=t.orientation==="horizontal",f=Ip(()=>{if(n.viewport){const v=n.viewport.offsetWidth<n.viewport.scrollWidth,x=n.viewport.offsetHeight<n.viewport.scrollHeight;u(h?v:x)}},10);return Qc(n.viewport,f),Qc(n.content,f),e.jsx(ia,{present:r||c,children:e.jsx($0,{"data-state":c?"visible":"hidden",...o,ref:s})})}),$0=m.forwardRef((t,s)=>{const{orientation:n="vertical",...r}=t,o=ur(ci,t.__scopeScrollArea),c=m.useRef(null),u=m.useRef(0),[h,f]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),v=L2(h.viewport,h.content),x={...r,sizes:h,onSizesChange:f,hasThumb:v>0&&v<1,onThumbChange:N=>c.current=N,onThumbPointerUp:()=>u.current=0,onThumbPointerDown:N=>u.current=N};function g(N,w){return r3(N,u.current,h,w)}return n==="horizontal"?e.jsx(e3,{...x,ref:s,onThumbPositionChange:()=>{if(o.viewport&&c.current){const N=o.viewport.scrollLeft,w=pj(N,h,o.dir);c.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:N=>{o.viewport&&(o.viewport.scrollLeft=N)},onDragScroll:N=>{o.viewport&&(o.viewport.scrollLeft=g(N,o.dir))}}):n==="vertical"?e.jsx(t3,{...x,ref:s,onThumbPositionChange:()=>{if(o.viewport&&c.current){const N=o.viewport.scrollTop,w=pj(N,h);c.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:N=>{o.viewport&&(o.viewport.scrollTop=N)},onDragScroll:N=>{o.viewport&&(o.viewport.scrollTop=g(N))}}):null}),e3=m.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...o}=t,c=ur(ci,t.__scopeScrollArea),[u,h]=m.useState(),f=m.useRef(null),v=Qt(s,f,c.onScrollbarXChange);return m.useEffect(()=>{f.current&&h(getComputedStyle(f.current))},[f]),e.jsx(M2,{"data-orientation":"horizontal",...o,ref:v,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Tp(n)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,g)=>{if(c.viewport){const N=c.viewport.scrollLeft+x.deltaX;t.onWheelScroll(N),$2(N,g)&&x.preventDefault()}},onResize:()=>{f.current&&c.viewport&&u&&r({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Qh(u.paddingLeft),paddingEnd:Qh(u.paddingRight)}})}})}),t3=m.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...o}=t,c=ur(ci,t.__scopeScrollArea),[u,h]=m.useState(),f=m.useRef(null),v=Qt(s,f,c.onScrollbarYChange);return m.useEffect(()=>{f.current&&h(getComputedStyle(f.current))},[f]),e.jsx(M2,{"data-orientation":"vertical",...o,ref:v,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Tp(n)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,g)=>{if(c.viewport){const N=c.viewport.scrollTop+x.deltaY;t.onWheelScroll(N),$2(N,g)&&x.preventDefault()}},onResize:()=>{f.current&&c.viewport&&u&&r({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Qh(u.paddingTop),paddingEnd:Qh(u.paddingBottom)}})}})}),[s3,I2]=A2(ci),M2=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:h,onThumbPositionChange:f,onDragScroll:v,onWheelScroll:x,onResize:g,...N}=t,w=ur(ci,n),[j,C]=m.useState(null),k=Qt(s,Q=>C(Q)),E=m.useRef(null),S=m.useRef(""),P=w.viewport,D=r.content-r.viewport,I=Fn(x),O=Fn(f),F=Ip(g,10);function X(Q){if(E.current){const V=Q.clientX-E.current.left,$=Q.clientY-E.current.top;v({x:V,y:$})}}return m.useEffect(()=>{const Q=V=>{const $=V.target;j?.contains($)&&I(V,D)};return document.addEventListener("wheel",Q,{passive:!1}),()=>document.removeEventListener("wheel",Q,{passive:!1})},[P,j,D,I]),m.useEffect(O,[r,O]),Qc(j,F),Qc(w.content,F),e.jsx(s3,{scope:n,scrollbar:j,hasThumb:o,onThumbChange:Fn(c),onThumbPointerUp:Fn(u),onThumbPositionChange:O,onThumbPointerDown:Fn(h),children:e.jsx(jt.div,{...N,ref:k,style:{position:"absolute",...N.style},onPointerDown:rt(t.onPointerDown,Q=>{Q.button===0&&(Q.target.setPointerCapture(Q.pointerId),E.current=j.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),X(Q))}),onPointerMove:rt(t.onPointerMove,X),onPointerUp:rt(t.onPointerUp,Q=>{const V=Q.target;V.hasPointerCapture(Q.pointerId)&&V.releasePointerCapture(Q.pointerId),document.body.style.webkitUserSelect=S.current,w.viewport&&(w.viewport.style.scrollBehavior=""),E.current=null})})})}),Kh="ScrollAreaThumb",R2=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=I2(Kh,t.__scopeScrollArea);return e.jsx(ia,{present:n||o.hasThumb,children:e.jsx(n3,{ref:s,...r})})}),n3=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:r,...o}=t,c=ur(Kh,n),u=I2(Kh,n),{onThumbPositionChange:h}=u,f=Qt(s,g=>u.onThumbChange(g)),v=m.useRef(void 0),x=Ip(()=>{v.current&&(v.current(),v.current=void 0)},100);return m.useEffect(()=>{const g=c.viewport;if(g){const N=()=>{if(x(),!v.current){const w=i3(g,h);v.current=w,h()}};return h(),g.addEventListener("scroll",N),()=>g.removeEventListener("scroll",N)}},[c.viewport,x,h]),e.jsx(jt.div,{"data-state":u.hasThumb?"visible":"hidden",...o,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:rt(t.onPointerDownCapture,g=>{const w=g.target.getBoundingClientRect(),j=g.clientX-w.left,C=g.clientY-w.top;u.onThumbPointerDown({x:j,y:C})}),onPointerUp:rt(t.onPointerUp,u.onThumbPointerUp)})});R2.displayName=Kh;var z0="ScrollAreaCorner",O2=m.forwardRef((t,s)=>{const n=ur(z0,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?e.jsx(a3,{...t,ref:s}):null});O2.displayName=z0;var a3=m.forwardRef((t,s)=>{const{__scopeScrollArea:n,...r}=t,o=ur(z0,n),[c,u]=m.useState(0),[h,f]=m.useState(0),v=!!(c&&h);return Qc(o.scrollbarX,()=>{const x=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(x),f(x)}),Qc(o.scrollbarY,()=>{const x=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(x),u(x)}),v?e.jsx(jt.div,{...r,ref:s,style:{width:c,height:h,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Qh(t){return t?parseInt(t,10):0}function L2(t,s){const n=t/s;return isNaN(n)?0:n}function Tp(t){const s=L2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*s;return Math.max(r,18)}function r3(t,s,n,r="ltr"){const o=Tp(n),c=o/2,u=s||c,h=o-u,f=n.scrollbar.paddingStart+u,v=n.scrollbar.size-n.scrollbar.paddingEnd-h,x=n.content-n.viewport,g=r==="ltr"?[0,x]:[x*-1,0];return F2([f,v],g)(t)}function pj(t,s,n="ltr"){const r=Tp(s),o=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,c=s.scrollbar.size-o,u=s.content-s.viewport,h=c-r,f=n==="ltr"?[0,u]:[u*-1,0],v=bg(t,f);return F2([0,u],[0,h])(v)}function F2(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(n-t[0])}}function $2(t,s){return t>0&&t<s}var i3=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function o(){const c={left:t.scrollLeft,top:t.scrollTop},u=n.left!==c.left,h=n.top!==c.top;(u||h)&&s(),n=c,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function Ip(t,s){const n=Fn(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,s)},[n,s])}function Qc(t,s){const n=Fn(s);Tn(()=>{let r=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(r),o.unobserve(t)}}},[t,n])}var o3=P2,l3=k2,c3=O2;function kl({className:t,children:s,...n}){return e.jsxs(o3,{"data-slot":"scroll-area",className:vt("relative overflow-hidden",t),...n,children:[e.jsx(l3,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(d3,{}),e.jsx(c3,{})]})}function d3({className:t,orientation:s="vertical",...n}){return e.jsx(D2,{"data-slot":"scroll-area-scrollbar",orientation:s,className:vt("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(R2,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const u3="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Mo(t){const[s,n]=m.useState(!1),r=()=>{n(!0)},{src:o,alt:c,style:u,className:h,...f}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${h??""}`,style:u,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:u3,alt:"Error loading image",...f,"data-original-url":o})})}):e.jsx("img",{src:o,alt:c,className:h,style:u,...f,onError:r})}var mu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var m3=mu.exports,fj;function h3(){return fj||(fj=1,(function(t,s){(function(n,r){r(s)})(m3,(function(n){var r="1.9.4";function o(i){var d,y,_,M;for(y=1,_=arguments.length;y<_;y++){M=arguments[y];for(d in M)i[d]=M[d]}return i}var c=Object.create||(function(){function i(){}return function(d){return i.prototype=d,new i}})();function u(i,d){var y=Array.prototype.slice;if(i.bind)return i.bind.apply(i,y.call(arguments,1));var _=y.call(arguments,2);return function(){return i.apply(d,_.length?_.concat(y.call(arguments)):arguments)}}var h=0;function f(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function v(i,d,y){var _,M,q,de;return de=function(){_=!1,M&&(q.apply(y,M),M=!1)},q=function(){_?M=arguments:(i.apply(y,arguments),setTimeout(de,d),_=!0)},q}function x(i,d,y){var _=d[1],M=d[0],q=_-M;return i===_&&y?i:((i-M)%q+q)%q+M}function g(){return!1}function N(i,d){if(d===!1)return i;var y=Math.pow(10,d===void 0?6:d);return Math.round(i*y)/y}function w(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function j(i){return w(i).split(/\s+/)}function C(i,d){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var y in d)i.options[y]=d[y];return i.options}function k(i,d,y){var _=[];for(var M in i)_.push(encodeURIComponent(y?M.toUpperCase():M)+"="+encodeURIComponent(i[M]));return(!d||d.indexOf("?")===-1?"?":"&")+_.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function S(i,d){return i.replace(E,function(y,_){var M=d[_];if(M===void 0)throw new Error("No value provided for variable "+y);return typeof M=="function"&&(M=M(d)),M})}var P=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function D(i,d){for(var y=0;y<i.length;y++)if(i[y]===d)return y;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var F=0;function X(i){var d=+new Date,y=Math.max(0,16-(d-F));return F=d+y,window.setTimeout(i,y)}var Q=window.requestAnimationFrame||O("RequestAnimationFrame")||X,V=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function $(i,d,y){if(y&&Q===X)i.call(d);else return Q.call(window,u(i,d))}function R(i){i&&V.call(window,i)}var z={__proto__:null,extend:o,create:c,bind:u,get lastId(){return h},stamp:f,throttle:v,wrapNum:x,falseFn:g,formatNum:N,trim:w,splitWords:j,setOptions:C,getParamString:k,template:S,isArray:P,indexOf:D,emptyImageUrl:I,requestFn:Q,cancelFn:V,requestAnimFrame:$,cancelAnimFrame:R};function J(){}J.extend=function(i){var d=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=d.__super__=this.prototype,_=c(y);_.constructor=d,d.prototype=_;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(d[M]=this[M]);return i.statics&&o(d,i.statics),i.includes&&(ue(i.includes),o.apply(null,[_].concat(i.includes))),o(_,i),delete _.statics,delete _.includes,_.options&&(_.options=y.options?c(y.options):{},o(_.options,i.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var q=0,de=_._initHooks.length;q<de;q++)_._initHooks[q].call(this)}},d},J.include=function(i){var d=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=d,this.mergeOptions(i.options)),this},J.mergeOptions=function(i){return o(this.prototype.options,i),this},J.addInitHook=function(i){var d=Array.prototype.slice.call(arguments,1),y=typeof i=="function"?i:function(){this[i].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function ue(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=P(i)?i:[i];for(var d=0;d<i.length;d++)i[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var se={on:function(i,d,y){if(typeof i=="object")for(var _ in i)this._on(_,i[_],d);else{i=j(i);for(var M=0,q=i.length;M<q;M++)this._on(i[M],d,y)}return this},off:function(i,d,y){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var _ in i)this._off(_,i[_],d);else{i=j(i);for(var M=arguments.length===1,q=0,de=i.length;q<de;q++)M?this._off(i[q]):this._off(i[q],d,y)}return this},_on:function(i,d,y,_){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(i,d,y)===!1){y===this&&(y=void 0);var M={fn:d,ctx:y};_&&(M.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(M)}},_off:function(i,d,y){var _,M,q;if(this._events&&(_=this._events[i],!!_)){if(arguments.length===1){if(this._firingCount)for(M=0,q=_.length;M<q;M++)_[M].fn=g;delete this._events[i];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var de=this._listens(i,d,y);if(de!==!1){var we=_[de];this._firingCount&&(we.fn=g,this._events[i]=_=_.slice()),_.splice(de,1)}}},fire:function(i,d,y){if(!this.listens(i,y))return this;var _=o({},d,{type:i,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var M=this._events[i];if(M){this._firingCount=this._firingCount+1||1;for(var q=0,de=M.length;q<de;q++){var we=M[q],_e=we.fn;we.once&&this.off(i,_e,we.ctx),_e.call(we.ctx||this,_)}this._firingCount--}}return y&&this._propagateEvent(_),this},listens:function(i,d,y,_){typeof i!="string"&&console.warn('"string" type argument expected');var M=d;typeof d!="function"&&(_=!!d,M=void 0,y=void 0);var q=this._events&&this._events[i];if(q&&q.length&&this._listens(i,M,y)!==!1)return!0;if(_){for(var de in this._eventParents)if(this._eventParents[de].listens(i,d,y,_))return!0}return!1},_listens:function(i,d,y){if(!this._events)return!1;var _=this._events[i]||[];if(!d)return!!_.length;y===this&&(y=void 0);for(var M=0,q=_.length;M<q;M++)if(_[M].fn===d&&_[M].ctx===y)return M;return!1},once:function(i,d,y){if(typeof i=="object")for(var _ in i)this._on(_,i[_],d,!0);else{i=j(i);for(var M=0,q=i.length;M<q;M++)this._on(i[M],d,y,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var d in this._eventParents)this._eventParents[d].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};se.addEventListener=se.on,se.removeEventListener=se.clearAllEventListeners=se.off,se.addOneTimeEventListener=se.once,se.fireEvent=se.fire,se.hasEventListeners=se.listens;var fe=J.extend(se);function H(i,d,y){this.x=y?Math.round(i):i,this.y=y?Math.round(d):d}var re=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(i){return this.clone()._add(G(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(G(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new H(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new H(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(i){i=G(i);var d=i.x-this.x,y=i.y-this.y;return Math.sqrt(d*d+y*y)},equals:function(i){return i=G(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=G(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function G(i,d,y){return i instanceof H?i:P(i)?new H(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new H(i.x,i.y):new H(i,d,y)}function W(i,d){if(i)for(var y=d?[i,d]:i,_=0,M=y.length;_<M;_++)this.extend(y[_])}W.prototype={extend:function(i){var d,y;if(!i)return this;if(i instanceof H||typeof i[0]=="number"||"x"in i)d=y=G(i);else if(i=ne(i),d=i.min,y=i.max,!d||!y)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=y.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(i){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var d,y;return typeof i[0]=="number"||i instanceof H?i=G(i):i=ne(i),i instanceof W?(d=i.min,y=i.max):d=y=i,d.x>=this.min.x&&y.x<=this.max.x&&d.y>=this.min.y&&y.y<=this.max.y},intersects:function(i){i=ne(i);var d=this.min,y=this.max,_=i.min,M=i.max,q=M.x>=d.x&&_.x<=y.x,de=M.y>=d.y&&_.y<=y.y;return q&&de},overlaps:function(i){i=ne(i);var d=this.min,y=this.max,_=i.min,M=i.max,q=M.x>d.x&&_.x<y.x,de=M.y>d.y&&_.y<y.y;return q&&de},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var d=this.min,y=this.max,_=Math.abs(d.x-y.x)*i,M=Math.abs(d.y-y.y)*i;return ne(G(d.x-_,d.y-M),G(y.x+_,y.y+M))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,d){return!i||i instanceof W?i:new W(i,d)}function K(i,d){if(i)for(var y=d?[i,d]:i,_=0,M=y.length;_<M;_++)this.extend(y[_])}K.prototype={extend:function(i){var d=this._southWest,y=this._northEast,_,M;if(i instanceof U)_=i,M=i;else if(i instanceof K){if(_=i._southWest,M=i._northEast,!_||!M)return this}else return i?this.extend(le(i)||ee(i)):this;return!d&&!y?(this._southWest=new U(_.lat,_.lng),this._northEast=new U(M.lat,M.lng)):(d.lat=Math.min(_.lat,d.lat),d.lng=Math.min(_.lng,d.lng),y.lat=Math.max(M.lat,y.lat),y.lng=Math.max(M.lng,y.lng)),this},pad:function(i){var d=this._southWest,y=this._northEast,_=Math.abs(d.lat-y.lat)*i,M=Math.abs(d.lng-y.lng)*i;return new K(new U(d.lat-_,d.lng-M),new U(y.lat+_,y.lng+M))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof U||"lat"in i?i=le(i):i=ee(i);var d=this._southWest,y=this._northEast,_,M;return i instanceof K?(_=i.getSouthWest(),M=i.getNorthEast()):_=M=i,_.lat>=d.lat&&M.lat<=y.lat&&_.lng>=d.lng&&M.lng<=y.lng},intersects:function(i){i=ee(i);var d=this._southWest,y=this._northEast,_=i.getSouthWest(),M=i.getNorthEast(),q=M.lat>=d.lat&&_.lat<=y.lat,de=M.lng>=d.lng&&_.lng<=y.lng;return q&&de},overlaps:function(i){i=ee(i);var d=this._southWest,y=this._northEast,_=i.getSouthWest(),M=i.getNorthEast(),q=M.lat>d.lat&&_.lat<y.lat,de=M.lng>d.lng&&_.lng<y.lng;return q&&de},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,d){return i?(i=ee(i),this._southWest.equals(i.getSouthWest(),d)&&this._northEast.equals(i.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(i,d){return i instanceof K?i:new K(i,d)}function U(i,d,y){if(isNaN(i)||isNaN(d))throw new Error("Invalid LatLng object: ("+i+", "+d+")");this.lat=+i,this.lng=+d,y!==void 0&&(this.alt=+y)}U.prototype={equals:function(i,d){if(!i)return!1;i=le(i);var y=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return y<=(d===void 0?1e-9:d)},toString:function(i){return"LatLng("+N(this.lat,i)+", "+N(this.lng,i)+")"},distanceTo:function(i){return ae.distance(this,le(i))},wrap:function(){return ae.wrapLatLng(this)},toBounds:function(i){var d=180*i/40075017,y=d/Math.cos(Math.PI/180*this.lat);return ee([this.lat-d,this.lng-y],[this.lat+d,this.lng+y])},clone:function(){return new U(this.lat,this.lng,this.alt)}};function le(i,d,y){return i instanceof U?i:P(i)&&typeof i[0]!="object"?i.length===3?new U(i[0],i[1],i[2]):i.length===2?new U(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new U(i.lat,"lng"in i?i.lng:i.lon,i.alt):d===void 0?null:new U(i,d,y)}var Y={latLngToPoint:function(i,d){var y=this.projection.project(i),_=this.scale(d);return this.transformation._transform(y,_)},pointToLatLng:function(i,d){var y=this.scale(d),_=this.transformation.untransform(i,y);return this.projection.unproject(_)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var d=this.projection.bounds,y=this.scale(i),_=this.transformation.transform(d.min,y),M=this.transformation.transform(d.max,y);return new W(_,M)},infinite:!1,wrapLatLng:function(i){var d=this.wrapLng?x(i.lng,this.wrapLng,!0):i.lng,y=this.wrapLat?x(i.lat,this.wrapLat,!0):i.lat,_=i.alt;return new U(y,d,_)},wrapLatLngBounds:function(i){var d=i.getCenter(),y=this.wrapLatLng(d),_=d.lat-y.lat,M=d.lng-y.lng;if(_===0&&M===0)return i;var q=i.getSouthWest(),de=i.getNorthEast(),we=new U(q.lat-_,q.lng-M),_e=new U(de.lat-_,de.lng-M);return new K(we,_e)}},ae=o({},Y,{wrapLng:[-180,180],R:6371e3,distance:function(i,d){var y=Math.PI/180,_=i.lat*y,M=d.lat*y,q=Math.sin((d.lat-i.lat)*y/2),de=Math.sin((d.lng-i.lng)*y/2),we=q*q+Math.cos(_)*Math.cos(M)*de*de,_e=2*Math.atan2(Math.sqrt(we),Math.sqrt(1-we));return this.R*_e}}),Ie=6378137,$e={R:Ie,MAX_LATITUDE:85.0511287798,project:function(i){var d=Math.PI/180,y=this.MAX_LATITUDE,_=Math.max(Math.min(y,i.lat),-y),M=Math.sin(_*d);return new H(this.R*i.lng*d,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(i){var d=180/Math.PI;return new U((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*d,i.x*d/this.R)},bounds:(function(){var i=Ie*Math.PI;return new W([-i,-i],[i,i])})()};function Ge(i,d,y,_){if(P(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=d,this._c=y,this._d=_}Ge.prototype={transform:function(i,d){return this._transform(i.clone(),d)},_transform:function(i,d){return d=d||1,i.x=d*(this._a*i.x+this._b),i.y=d*(this._c*i.y+this._d),i},untransform:function(i,d){return d=d||1,new H((i.x/d-this._b)/this._a,(i.y/d-this._d)/this._c)}};function Xe(i,d,y,_){return new Ge(i,d,y,_)}var Je=o({},ae,{code:"EPSG:3857",projection:$e,transformation:(function(){var i=.5/(Math.PI*$e.R);return Xe(i,.5,-i,.5)})()}),tt=o({},Je,{code:"EPSG:900913"});function ut(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function wt(i,d){var y="",_,M,q,de,we,_e;for(_=0,q=i.length;_<q;_++){for(we=i[_],M=0,de=we.length;M<de;M++)_e=we[M],y+=(M?"L":"M")+_e.x+" "+_e.y;y+=d?Fe.svg?"z":"x":""}return y||"M0 0"}var mt=document.documentElement.style,kt="ActiveXObject"in window,zt=kt&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),xe=Me("webkit"),pe=Me("android"),Ue=Me("android 2")||Me("android 3"),ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ve=pe&&Me("Google")&&ce<537&&!("AudioNode"in window),ze=!!window.opera,He=!te&&Me("chrome"),pt=Me("gecko")&&!xe&&!ze&&!kt,me=!He&&Me("safari"),Oe=Me("phantom"),Ke="OTransition"in mt,lt=navigator.platform.indexOf("Win")===0,Tt=kt&&"transition"in mt,ps="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ue,Ts="MozPerspective"in mt,ws=!window.L_DISABLE_3D&&(Tt||ps||Ts)&&!Ke&&!Oe,rs=typeof orientation<"u"||Me("mobile"),fs=rs&&xe,gs=rs&&ps,Fs=!window.PointerEvent&&window.MSPointerEvent,Ws=!!(window.PointerEvent||Fs),ks="ontouchstart"in window||!!window.TouchEvent,an=!window.L_NO_TOUCH&&(ks||Ws),yt=rs&&ze,os=rs&&pt,qt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ds=(function(){var i=!1;try{var d=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,d),window.removeEventListener("testPassiveEventSupport",g,d)}catch{}return i})(),js=(function(){return!!document.createElement("canvas").getContext})(),vs=!!(document.createElementNS&&ut("svg").createSVGRect),Ae=!!vs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),nt=!vs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var d=i.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),it=navigator.platform.indexOf("Mac")===0,be=navigator.platform.indexOf("Linux")===0;function Me(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Fe={ie:kt,ielt9:zt,edge:te,webkit:xe,android:pe,android23:Ue,androidStock:ve,opera:ze,chrome:He,gecko:pt,safari:me,phantom:Oe,opera12:Ke,win:lt,ie3d:Tt,webkit3d:ps,gecko3d:Ts,any3d:ws,mobile:rs,mobileWebkit:fs,mobileWebkit3d:gs,msPointer:Fs,pointer:Ws,touch:an,touchNative:ks,mobileOpera:yt,mobileGecko:os,retina:qt,passiveEvents:Ds,canvas:js,svg:vs,vml:nt,inlineSvg:Ae,mac:it,linux:be},Dt=Fe.msPointer?"MSPointerDown":"pointerdown",Mt=Fe.msPointer?"MSPointerMove":"pointermove",Ns=Fe.msPointer?"MSPointerUp":"pointerup",Xt=Fe.msPointer?"MSPointerCancel":"pointercancel",ds={touchstart:Dt,touchmove:Mt,touchend:Ns,touchcancel:Xt},ys={touchstart:Ee,touchmove:oe,touchend:oe,touchcancel:oe},Ys={},un=!1;function In(i,d,y){return d==="touchstart"&&pd(),ys[d]?(y=ys[d].bind(this,y),i.addEventListener(ds[d],y,!1),y):(console.warn("wrong event specified:",d),g)}function Wo(i,d,y){if(!ds[d]){console.warn("wrong event specified:",d);return}i.removeEventListener(ds[d],y,!1)}function Vi(i){Ys[i.pointerId]=i}function Hl(i){Ys[i.pointerId]&&(Ys[i.pointerId]=i)}function Zo(i){delete Ys[i.pointerId]}function pd(){un||(document.addEventListener(Dt,Vi,!0),document.addEventListener(Mt,Hl,!0),document.addEventListener(Ns,Zo,!0),document.addEventListener(Xt,Zo,!0),un=!0)}function oe(i,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var y in Ys)d.touches.push(Ys[y]);d.changedTouches=[d],i(d)}}function Ee(i,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Gs(d),oe(i,d)}function $t(i){var d={},y,_;for(_ in i)y=i[_],d[_]=y&&y.bind?y.bind(i):y;return i=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var us=200;function Ut(i,d){i.addEventListener("dblclick",d);var y=0,_;function M(q){if(q.detail!==1){_=q.detail;return}if(!(q.pointerType==="mouse"||q.sourceCapabilities&&!q.sourceCapabilities.firesTouchEvents)){var de=mi(q);if(!(de.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!de.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var we=Date.now();we-y<=us?(_++,_===2&&d($t(q))):_=1,y=we}}}return i.addEventListener("click",M),{dblclick:d,simDblclick:M}}function Zs(i,d){i.removeEventListener("dblclick",d.dblclick),i.removeEventListener("click",d.simDblclick)}var Rt=qi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mn=qi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Yt=mn==="webkitTransition"||mn==="OTransition"?mn+"End":"transitionend";function bt(i){return typeof i=="string"?document.getElementById(i):i}function Cs(i,d){var y=i.style[d]||i.currentStyle&&i.currentStyle[d];if((!y||y==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(i,null);y=_?_[d]:null}return y==="auto"?null:y}function ct(i,d,y){var _=document.createElement(i);return _.className=d||"",y&&y.appendChild(_),_}function ns(i){var d=i.parentNode;d&&d.removeChild(i)}function zn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ha(i){var d=i.parentNode;d&&d.lastChild!==i&&d.appendChild(i)}function mr(i){var d=i.parentNode;d&&d.firstChild!==i&&d.insertBefore(i,d.firstChild)}function Hi(i,d){if(i.classList!==void 0)return i.classList.contains(d);var y=ql(i);return y.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(y)}function Lt(i,d){if(i.classList!==void 0)for(var y=j(d),_=0,M=y.length;_<M;_++)i.classList.add(y[_]);else if(!Hi(i,d)){var q=ql(i);fd(i,(q?q+" ":"")+d)}}function Is(i,d){i.classList!==void 0?i.classList.remove(d):fd(i,w((" "+ql(i)+" ").replace(" "+d+" "," ")))}function fd(i,d){i.className.baseVal===void 0?i.className=d:i.className.baseVal=d}function ql(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Bn(i,d){"opacity"in i.style?i.style.opacity=d:"filter"in i.style&&Wu(i,d)}function Wu(i,d){var y=!1,_="DXImageTransform.Microsoft.Alpha";try{y=i.filters.item(_)}catch{if(d===1)return}d=Math.round(d*100),y?(y.Enabled=d!==100,y.Opacity=d):i.style.filter+=" progid:"+_+"(opacity="+d+")"}function qi(i){for(var d=document.documentElement.style,y=0;y<i.length;y++)if(i[y]in d)return i[y];return!1}function _a(i,d,y){var _=d||new H(0,0);i.style[Rt]=(Fe.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(y?" scale("+y+")":"")}function Js(i,d){i._leaflet_pos=d,Fe.any3d?_a(i,d):(i.style.left=d.x+"px",i.style.top=d.y+"px")}function hr(i){return i._leaflet_pos||new H(0,0)}var is,Wi,Wl;if("onselectstart"in document)is=function(){It(window,"selectstart",Gs)},Wi=function(){Ss(window,"selectstart",Gs)};else{var di=qi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);is=function(){if(di){var i=document.documentElement.style;Wl=i[di],i[di]="none"}},Wi=function(){di&&(document.documentElement.style[di]=Wl,Wl=void 0)}}function Zl(){It(window,"dragstart",Gs)}function Gl(){Ss(window,"dragstart",Gs)}var Go,Ko;function Zi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Aa(),Go=i,Ko=i.style.outlineStyle,i.style.outlineStyle="none",It(window,"keydown",Aa))}function Aa(){Go&&(Go.style.outlineStyle=Ko,Go=void 0,Ko=void 0,Ss(window,"keydown",Aa))}function pr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function qa(i){var d=i.getBoundingClientRect();return{x:d.width/i.offsetWidth||1,y:d.height/i.offsetHeight||1,boundingClientRect:d}}var Qo={__proto__:null,TRANSFORM:Rt,TRANSITION:mn,TRANSITION_END:Yt,get:bt,getStyle:Cs,create:ct,remove:ns,empty:zn,toFront:Ha,toBack:mr,hasClass:Hi,addClass:Lt,removeClass:Is,setClass:fd,getClass:ql,setOpacity:Bn,testProp:qi,setTransform:_a,setPosition:Js,getPosition:hr,get disableTextSelection(){return is},get enableTextSelection(){return Wi},disableImageDrag:Zl,enableImageDrag:Gl,preventOutline:Zi,restoreOutline:Aa,getSizedParentNode:pr,getScale:qa};function It(i,d,y,_){if(d&&typeof d=="object")for(var M in d)gd(i,M,d[M],y);else{d=j(d);for(var q=0,de=d.length;q<de;q++)gd(i,d[q],y,_)}return this}var yn="_leaflet_events";function Ss(i,d,y,_){if(arguments.length===1)xd(i),delete i[yn];else if(d&&typeof d=="object")for(var M in d)Kl(i,M,d[M],y);else if(d=j(d),arguments.length===2)xd(i,function(we){return D(d,we)!==-1});else for(var q=0,de=d.length;q<de;q++)Kl(i,d[q],y,_);return this}function xd(i,d){for(var y in i[yn]){var _=y.split(/\d/)[0];(!d||d(_))&&Kl(i,_,null,null,y)}}var ui={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function gd(i,d,y,_){var M=d+f(y)+(_?"_"+f(_):"");if(i[yn]&&i[yn][M])return this;var q=function(we){return y.call(_||i,we||window.event)},de=q;!Fe.touchNative&&Fe.pointer&&d.indexOf("touch")===0?q=In(i,d,q):Fe.touch&&d==="dblclick"?q=Ut(i,q):"addEventListener"in i?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?i.addEventListener(ui[d]||d,q,Fe.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(q=function(we){we=we||window.event,Jo(i,we)&&de(we)},i.addEventListener(ui[d],q,!1)):i.addEventListener(d,de,!1):i.attachEvent("on"+d,q),i[yn]=i[yn]||{},i[yn][M]=q}function Kl(i,d,y,_,M){M=M||d+f(y)+(_?"_"+f(_):"");var q=i[yn]&&i[yn][M];if(!q)return this;!Fe.touchNative&&Fe.pointer&&d.indexOf("touch")===0?Wo(i,d,q):Fe.touch&&d==="dblclick"?Zs(i,q):"removeEventListener"in i?i.removeEventListener(ui[d]||d,q,!1):i.detachEvent("on"+d,q),i[yn][M]=null}function Wa(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ql(i){return gd(i,"wheel",Wa),this}function Xo(i){return It(i,"mousedown touchstart dblclick contextmenu",Wa),i._leaflet_disable_click=!0,this}function Gs(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Pa(i){return Gs(i),Wa(i),this}function mi(i){if(i.composedPath)return i.composedPath();for(var d=[],y=i.target;y;)d.push(y),y=y.parentNode;return d}function Yo(i,d){if(!d)return new H(i.clientX,i.clientY);var y=qa(d),_=y.boundingClientRect;return new H((i.clientX-_.left)/y.x-d.clientLeft,(i.clientY-_.top)/y.y-d.clientTop)}var Gp=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zu(i){return Fe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Gp:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Jo(i,d){var y=d.relatedTarget;if(!y)return!0;try{for(;y&&y!==i;)y=y.parentNode}catch{return!1}return y!==i}var Xl={__proto__:null,on:It,off:Ss,stopPropagation:Wa,disableScrollPropagation:Ql,disableClickPropagation:Xo,preventDefault:Gs,stop:Pa,getPropagationPath:mi,getMousePosition:Yo,getWheelDelta:Zu,isExternalTarget:Jo,addListener:It,removeListener:Ss},Yl=fe.extend({run:function(i,d,y,_){this.stop(),this._el=i,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=hr(i),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(i){var d=+new Date-this._startTime,y=this._duration*1e3;d<y?this._runFrame(this._easeOut(d/y),i):(this._runFrame(1),this._complete())},_runFrame:function(i,d){var y=this._startPos.add(this._offset.multiplyBy(i));d&&y._round(),Js(this._el,y),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),ts=fe.extend({options:{crs:Je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,d){d=C(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(le(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=mn&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),It(this._proxy,Yt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,d,y){if(d=d===void 0?this._zoom:this._limitZoom(d),i=this._limitCenter(le(i),d,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=o({animate:y.animate},y.zoom),y.pan=o({animate:y.animate,duration:y.duration},y.pan));var _=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,d,y.zoom):this._tryAnimatedPan(i,y.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(i,d,y.pan&&y.pan.noMoveStart),this},setZoom:function(i,d){return this._loaded?this.setView(this.getCenter(),i,{zoom:d}):(this._zoom=i,this)},zoomIn:function(i,d){return i=i||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,d)},zoomOut:function(i,d){return i=i||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,d)},setZoomAround:function(i,d,y){var _=this.getZoomScale(d),M=this.getSize().divideBy(2),q=i instanceof H?i:this.latLngToContainerPoint(i),de=q.subtract(M).multiplyBy(1-1/_),we=this.containerPointToLatLng(M.add(de));return this.setView(we,d,{zoom:y})},_getBoundsCenterZoom:function(i,d){d=d||{},i=i.getBounds?i.getBounds():ee(i);var y=G(d.paddingTopLeft||d.padding||[0,0]),_=G(d.paddingBottomRight||d.padding||[0,0]),M=this.getBoundsZoom(i,!1,y.add(_));if(M=typeof d.maxZoom=="number"?Math.min(d.maxZoom,M):M,M===1/0)return{center:i.getCenter(),zoom:M};var q=_.subtract(y).divideBy(2),de=this.project(i.getSouthWest(),M),we=this.project(i.getNorthEast(),M),_e=this.unproject(de.add(we).divideBy(2).add(q),M);return{center:_e,zoom:M}},fitBounds:function(i,d){if(i=ee(i),!i.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(i,d);return this.setView(y.center,y.zoom,d)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,d){return this.setView(i,this._zoom,{pan:d})},panBy:function(i,d){if(i=G(i).round(),d=d||{},!i.x&&!i.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Yl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Lt(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,y,d.duration||.25,d.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,d,y){if(y=y||{},y.animate===!1||!Fe.any3d)return this.setView(i,d,y);this._stop();var _=this.project(this.getCenter()),M=this.project(i),q=this.getSize(),de=this._zoom;i=le(i),d=d===void 0?de:d;var we=Math.max(q.x,q.y),_e=we*this.getZoomScale(de,d),Ve=M.distanceTo(_)||1,at=1.42,Nt=at*at;function Vt(bs){var lo=bs?-1:1,cf=bs?_e:we,df=_e*_e-we*we+lo*Nt*Nt*Ve*Ve,yi=2*cf*Nt*Ve,bi=df/yi,ji=Math.sqrt(bi*bi+1)-bi,mc=ji<1e-9?-18:Math.log(ji);return mc}function bn(bs){return(Math.exp(bs)-Math.exp(-bs))/2}function hn(bs){return(Math.exp(bs)+Math.exp(-bs))/2}function Xn(bs){return bn(bs)/hn(bs)}var Vn=Vt(0);function io(bs){return we*(hn(Vn)/hn(Vn+at*bs))}function Fd(bs){return we*(hn(Vn)*Xn(Vn+at*bs)-bn(Vn))/Nt}function Hr(bs){return 1-Math.pow(1-bs,1.5)}var pm=Date.now(),vi=(Vt(1)-Vn)/at,Qa=y.duration?1e3*y.duration:1e3*vi*.8;function oo(){var bs=(Date.now()-pm)/Qa,lo=Hr(bs)*vi;bs<=1?(this._flyToFrame=$(oo,this),this._move(this.unproject(_.add(M.subtract(_).multiplyBy(Fd(lo)/Ve)),de),this.getScaleZoom(we/io(lo),de),{flyTo:!0})):this._move(i,d)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),oo.call(this),this},flyToBounds:function(i,d){var y=this._getBoundsCenterZoom(i,d);return this.flyTo(y.center,y.zoom,d)},setMaxBounds:function(i){return i=ee(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var d=this.options.minZoom;return this.options.minZoom=i,this._loaded&&d!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var d=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&d!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,d){this._enforcingBounds=!0;var y=this.getCenter(),_=this._limitCenter(y,this._zoom,ee(i));return y.equals(_)||this.panTo(_,d),this._enforcingBounds=!1,this},panInside:function(i,d){d=d||{};var y=G(d.paddingTopLeft||d.padding||[0,0]),_=G(d.paddingBottomRight||d.padding||[0,0]),M=this.project(this.getCenter()),q=this.project(i),de=this.getPixelBounds(),we=ne([de.min.add(y),de.max.subtract(_)]),_e=we.getSize();if(!we.contains(q)){this._enforcingBounds=!0;var Ve=q.subtract(we.getCenter()),at=we.extend(q).getSize().subtract(_e);M.x+=Ve.x<0?-at.x:at.x,M.y+=Ve.y<0?-at.y:at.y,this.panTo(this.unproject(M),d),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),_=d.divideBy(2).round(),M=y.divideBy(2).round(),q=_.subtract(M);return!q.x&&!q.y?this:(i.animate&&i.pan?this.panBy(q):(i.pan&&this._rawPanBy(q),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),y=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,y,i):navigator.geolocation.getCurrentPosition(d,y,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var d=i.code,y=i.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var d=i.coords.latitude,y=i.coords.longitude,_=new U(d,y),M=_.toBounds(i.coords.accuracy*2),q=this._locateOptions;if(q.setView){var de=this.getBoundsZoom(M);this.setView(_,q.maxZoom?Math.min(de,q.maxZoom):de)}var we={latlng:_,bounds:M,timestamp:i.timestamp};for(var _e in i.coords)typeof i.coords[_e]=="number"&&(we[_e]=i.coords[_e]);this.fire("locationfound",we)}},addHandler:function(i,d){if(!d)return this;var y=this[i]=new d(this);return this._handlers.push(y),this.options[i]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ns(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ns(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,d){var y="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),_=ct("div",y,d||this._mapPane);return i&&(this._panes[i]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),d=this.unproject(i.getBottomLeft()),y=this.unproject(i.getTopRight());return new K(d,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,d,y){i=ee(i),y=G(y||[0,0]);var _=this.getZoom()||0,M=this.getMinZoom(),q=this.getMaxZoom(),de=i.getNorthWest(),we=i.getSouthEast(),_e=this.getSize().subtract(y),Ve=ne(this.project(we,_),this.project(de,_)).getSize(),at=Fe.any3d?this.options.zoomSnap:1,Nt=_e.x/Ve.x,Vt=_e.y/Ve.y,bn=d?Math.max(Nt,Vt):Math.min(Nt,Vt);return _=this.getScaleZoom(bn,_),at&&(_=Math.round(_/(at/100))*(at/100),_=d?Math.ceil(_/at)*at:Math.floor(_/at)*at),Math.max(M,Math.min(q,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,d){var y=this._getTopLeftPoint(i,d);return new W(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,d){var y=this.options.crs;return d=d===void 0?this._zoom:d,y.scale(i)/y.scale(d)},getScaleZoom:function(i,d){var y=this.options.crs;d=d===void 0?this._zoom:d;var _=y.zoom(i*y.scale(d));return isNaN(_)?1/0:_},project:function(i,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(le(i),d)},unproject:function(i,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(G(i),d)},layerPointToLatLng:function(i){var d=G(i).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(i){var d=this.project(le(i))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(le(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ee(i))},distance:function(i,d){return this.options.crs.distance(le(i),le(d))},containerPointToLayerPoint:function(i){return G(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return G(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var d=this.containerPointToLayerPoint(G(i));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(i)))},mouseEventToContainerPoint:function(i){return Yo(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var d=this._container=bt(i);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");It(d,"scroll",this._onScroll,this),this._containerId=f(d)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,Lt(i,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Cs(i,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Js(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Lt(i.markerPane,"leaflet-zoom-hide"),Lt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,d,y){Js(this._mapPane,new H(0,0));var _=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var M=this._zoom!==d;this._moveStart(M,y)._move(i,d)._moveEnd(M),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(i,d){return i&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(i,d,y,_){d===void 0&&(d=this._zoom);var M=this._zoom!==d;return this._zoom=d,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),_?y&&y.pinch&&this.fire("zoom",y):((M||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Js(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var d=i?Ss:It;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,d){for(var y=[],_,M=d==="mouseout"||d==="mouseover",q=i.target||i.srcElement,de=!1;q;){if(_=this._targets[f(q)],_&&(d==="click"||d==="preclick")&&this._draggableMoved(_)){de=!0;break}if(_&&_.listens(d,!0)&&(M&&!Jo(q,i)||(y.push(_),M))||q===this._container)break;q=q.parentNode}return!y.length&&!de&&!M&&this.listens(d,!0)&&(y=[this]),y},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var d=i.target||i.srcElement;if(!(!this._loaded||d._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(d))){var y=i.type;y==="mousedown"&&Zi(d),this._fireDOMEvent(i,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,d,y){if(i.type==="click"){var _=o({},i);_.type="preclick",this._fireDOMEvent(_,_.type,y)}var M=this._findEventTargets(i,d);if(y){for(var q=[],de=0;de<y.length;de++)y[de].listens(d,!0)&&q.push(y[de]);M=q.concat(M)}if(M.length){d==="contextmenu"&&Gs(i);var we=M[0],_e={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Ve=we.getLatLng&&(!we._radius||we._radius<=10);_e.containerPoint=Ve?this.latLngToContainerPoint(we.getLatLng()):this.mouseEventToContainerPoint(i),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Ve?we.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for(de=0;de<M.length;de++)if(M[de].fire(d,_e,!0),_e.originalEvent._stopped||M[de].options.bubblingMouseEvents===!1&&D(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,d=this._handlers.length;i<d;i++)this._handlers[i].disable()},whenReady:function(i,d){return this._loaded?i.call(d||this,{target:this}):this.on("load",i,d),this},_getMapPanePos:function(){return hr(this._mapPane)||new H(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,d){var y=i&&d!==void 0?this._getNewPixelOrigin(i,d):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,d){var y=this.getSize()._divideBy(2);return this.project(i,d)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,d,y){var _=this._getNewPixelOrigin(y,d);return this.project(i,d)._subtract(_)},_latLngBoundsToNewLayerBounds:function(i,d,y){var _=this._getNewPixelOrigin(y,d);return ne([this.project(i.getSouthWest(),d)._subtract(_),this.project(i.getNorthWest(),d)._subtract(_),this.project(i.getSouthEast(),d)._subtract(_),this.project(i.getNorthEast(),d)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,d,y){if(!y)return i;var _=this.project(i,d),M=this.getSize().divideBy(2),q=new W(_.subtract(M),_.add(M)),de=this._getBoundsOffset(q,y,d);return Math.abs(de.x)<=1&&Math.abs(de.y)<=1?i:this.unproject(_.add(de),d)},_limitOffset:function(i,d){if(!d)return i;var y=this.getPixelBounds(),_=new W(y.min.add(i),y.max.add(i));return i.add(this._getBoundsOffset(_,d))},_getBoundsOffset:function(i,d,y){var _=ne(this.project(d.getNorthEast(),y),this.project(d.getSouthWest(),y)),M=_.min.subtract(i.min),q=_.max.subtract(i.max),de=this._rebound(M.x,-q.x),we=this._rebound(M.y,-q.y);return new H(de,we)},_rebound:function(i,d){return i+d>0?Math.round(i-d)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(d))},_limitZoom:function(i){var d=this.getMinZoom(),y=this.getMaxZoom(),_=Fe.any3d?this.options.zoomSnap:1;return _&&(i=Math.round(i/_)*_),Math.max(d,Math.min(y,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Is(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,d){var y=this._getCenterOffset(i)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,d),!0)},_createAnimProxy:function(){var i=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(d){var y=Rt,_=this._proxy.style[y];_a(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),_===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ns(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),d=this.getZoom();_a(this._proxy,this.project(i,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,d,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(d),M=this._getCenterOffset(i)._divideBy(1-1/_);return y.animate!==!0&&!this.getSize().contains(M)?!1:($(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(i,d,!0)},this),!0)},_animateZoom:function(i,d,y,_){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=d,Lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:d,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Is(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Lr(i,d){return new ts(i,d)}var Kn=J.extend({options:{position:"topright"},initialize:function(i){C(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var d=this._map;return d&&d.removeControl(this),this.options.position=i,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var d=this._container=this.onAdd(i),y=this.getPosition(),_=i._controlCorners[y];return Lt(d,"leaflet-control"),y.indexOf("bottom")!==-1?_.insertBefore(d,_.firstChild):_.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ns(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Fr=function(i){return new Kn(i)};ts.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},d="leaflet-",y=this._controlContainer=ct("div",d+"control-container",this._container);function _(M,q){var de=d+M+" "+d+q;i[M+q]=ct("div",de,y)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ns(this._controlCorners[i]);ns(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vd=Kn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,d,y,_){return y<_?-1:_<y?1:0}},initialize:function(i,d,y){C(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in i)this._addLayer(i[_],_);for(_ in d)this._addLayer(d[_],_,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Kn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,d){return this._addLayer(i,d),this._map?this._update():this},addOverlay:function(i,d){return this._addLayer(i,d,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var d=this._getLayer(f(i));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Is(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Is(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",d=this._container=ct("div",i),y=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Xo(d),Ql(d);var _=this._section=ct("section",i+"-list");y&&(this._map.on("click",this.collapse,this),It(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=ct("a",i+"-toggle",d);M.href="#",M.title="Layers",M.setAttribute("role","button"),It(M,{keydown:function(q){q.keyCode===13&&this._expandSafely()},click:function(q){Gs(q),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=ct("div",i+"-base",_),this._separator=ct("div",i+"-separator",_),this._overlaysList=ct("div",i+"-overlays",_),d.appendChild(_)},_getLayer:function(i){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&f(this._layers[d].layer)===i)return this._layers[d]},_addLayer:function(i,d,y){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:d,overlay:y}),this.options.sortLayers&&this._layers.sort(u(function(_,M){return this.options.sortFunction(_.layer,M.layer,_.name,M.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zn(this._baseLayersList),zn(this._overlaysList),this._layerControlInputs=[];var i,d,y,_,M=0;for(y=0;y<this._layers.length;y++)_=this._layers[y],this._addItem(_),d=d||_.overlay,i=i||!_.overlay,M+=_.overlay?0:1;return this.options.hideSingleBase&&(i=i&&M>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=d&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var d=this._getLayer(f(i.target)),y=d.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;y&&this._map.fire(y,d)},_createRadioElement:function(i,d){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(d?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=y,_.firstChild},_addItem:function(i){var d=document.createElement("label"),y=this._map.hasLayer(i.layer),_;i.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=y):_=this._createRadioElement("leaflet-base-layers_"+f(this),y),this._layerControlInputs.push(_),_.layerId=f(i.layer),It(_,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+i.name;var q=document.createElement("span");d.appendChild(q),q.appendChild(_),q.appendChild(M);var de=i.overlay?this._overlaysList:this._baseLayersList;return de.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,d,y,_=[],M=[];this._handlingClick=!0;for(var q=i.length-1;q>=0;q--)d=i[q],y=this._getLayer(d.layerId).layer,d.checked?_.push(y):d.checked||M.push(y);for(q=0;q<M.length;q++)this._map.hasLayer(M[q])&&this._map.removeLayer(M[q]);for(q=0;q<_.length;q++)this._map.hasLayer(_[q])||this._map.addLayer(_[q]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,d,y,_=this._map.getZoom(),M=i.length-1;M>=0;M--)d=i[M],y=this._getLayer(d.layerId).layer,d.disabled=y.options.minZoom!==void 0&&_<y.options.minZoom||y.options.maxZoom!==void 0&&_>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,It(i,"click",Gs),this.expand();var d=this;setTimeout(function(){Ss(i,"click",Gs),d._preventClick=!1})}}),Jl=function(i,d,y){return new vd(i,d,y)},Gi=Kn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var d="leaflet-control-zoom",y=ct("div",d+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,d+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,d+"-out",y,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,d,y,_,M){var q=ct("a",y,_);return q.innerHTML=i,q.href="#",q.title=d,q.setAttribute("role","button"),q.setAttribute("aria-label",d),Xo(q),It(q,"click",Pa),It(q,"click",M,this),It(q,"click",this._refocusOnMap,this),q},_updateDisabled:function(){var i=this._map,d="leaflet-disabled";Is(this._zoomInButton,d),Is(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Lt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Lt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});ts.mergeOptions({zoomControl:!0}),ts.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gi,this.addControl(this.zoomControl))});var Gu=function(i){return new Gi(i)},Un=Kn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var d="leaflet-control-scale",y=ct("div",d),_=this.options;return this._addScales(_,d+"-line",y),i.on(_.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),y},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,d,y){i.metric&&(this._mScale=ct("div",d,y)),i.imperial&&(this._iScale=ct("div",d,y))},_update:function(){var i=this._map,d=i.getSize().y/2,y=i.distance(i.containerPointToLatLng([0,d]),i.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(y)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var d=this._getRoundNum(i),y=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,y,d/i)},_updateImperial:function(i){var d=i*3.2808399,y,_,M;d>5280?(y=d/5280,_=this._getRoundNum(y),this._updateScale(this._iScale,_+" mi",_/y)):(M=this._getRoundNum(d),this._updateScale(this._iScale,M+" ft",M/d))},_updateScale:function(i,d,y){i.style.width=Math.round(this.options.maxWidth*y)+"px",i.innerHTML=d},_getRoundNum:function(i){var d=Math.pow(10,(Math.floor(i)+"").length-1),y=i/d;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,d*y}}),Ki=function(i){return new Un(i)},yd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hi=Kn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?yd+" ":"")+"Leaflet</a>"},initialize:function(i){C(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),Xo(this._container);for(var d in i._layers)i._layers[d].getAttribution&&this.addAttribution(i._layers[d].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var d in this._attributions)this._attributions[d]&&i.push(d);var y=[];this.options.prefix&&y.push(this.options.prefix),i.length&&y.push(i.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});ts.mergeOptions({attributionControl:!0}),ts.addInitHook(function(){this.options.attributionControl&&new hi().addTo(this)});var Kp=function(i){return new hi(i)};Kn.Layers=vd,Kn.Zoom=Gi,Kn.Scale=Un,Kn.Attribution=hi,Fr.layers=Jl,Fr.zoom=Gu,Fr.scale=Ki,Fr.attribution=Kp;var la=J.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});la.addTo=function(i,d){return i.addHandler(d,this),this};var bd={Events:se},Qi=Fe.touch?"touchstart mousedown":"mousedown",Ea=fe.extend({options:{clickTolerance:3},initialize:function(i,d,y,_){C(this,_),this._element=i,this._dragStartTarget=d||i,this._preventOutline=y},enable:function(){this._enabled||(It(this._dragStartTarget,Qi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ea._dragging===this&&this.finishDrag(!0),Ss(this._dragStartTarget,Qi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Hi(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ea._dragging===this&&this.finishDrag();return}if(!(Ea._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ea._dragging=this,this._preventOutline&&Zi(this._element),Zl(),is(),!this._moving)){this.fire("down");var d=i.touches?i.touches[0]:i,y=pr(this._element);this._startPoint=new H(d.clientX,d.clientY),this._startPos=hr(this._element),this._parentScale=qa(y);var _=i.type==="mousedown";It(document,_?"mousemove":"touchmove",this._onMove,this),It(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var d=i.touches&&i.touches.length===1?i.touches[0]:i,y=new H(d.clientX,d.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,Gs(i),this._moved||(this.fire("dragstart"),this._moved=!0,Lt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Js(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Is(document.body,"leaflet-dragging"),this._lastTarget&&(Is(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ss(document,"mousemove touchmove",this._onMove,this),Ss(document,"mouseup touchend touchcancel",this._onUp,this),Gl(),Wi();var d=this._moved&&this._moving;this._moving=!1,Ea._dragging=!1,d&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function jd(i,d,y){var _,M=[1,4,2,8],q,de,we,_e,Ve,at,Nt,Vt;for(q=0,at=i.length;q<at;q++)i[q]._code=pi(i[q],d);for(we=0;we<4;we++){for(Nt=M[we],_=[],q=0,at=i.length,de=at-1;q<at;de=q++)_e=i[q],Ve=i[de],_e._code&Nt?Ve._code&Nt||(Vt=tc(Ve,_e,Nt,d,y),Vt._code=pi(Vt,d),_.push(Vt)):(Ve._code&Nt&&(Vt=tc(Ve,_e,Nt,d,y),Vt._code=pi(Vt,d),_.push(Vt)),_.push(_e));i=_}return i}function Ku(i,d){var y,_,M,q,de,we,_e,Ve,at;if(!i||i.length===0)throw new Error("latlngs not passed");ca(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Nt=le([0,0]),Vt=ee(i),bn=Vt.getNorthWest().distanceTo(Vt.getSouthWest())*Vt.getNorthEast().distanceTo(Vt.getNorthWest());bn<1700&&(Nt=Nd(i));var hn=i.length,Xn=[];for(y=0;y<hn;y++){var Vn=le(i[y]);Xn.push(d.project(le([Vn.lat-Nt.lat,Vn.lng-Nt.lng])))}for(we=_e=Ve=0,y=0,_=hn-1;y<hn;_=y++)M=Xn[y],q=Xn[_],de=M.y*q.x-q.y*M.x,_e+=(M.x+q.x)*de,Ve+=(M.y+q.y)*de,we+=de*3;we===0?at=Xn[0]:at=[_e/we,Ve/we];var io=d.unproject(G(at));return le([io.lat+Nt.lat,io.lng+Nt.lng])}function Nd(i){for(var d=0,y=0,_=0,M=0;M<i.length;M++){var q=le(i[M]);d+=q.lat,y+=q.lng,_++}return le([d/_,y/_])}var Qp={__proto__:null,clipPolygon:jd,polygonCenter:Ku,centroid:Nd};function ec(i,d){if(!d||!i.length)return i.slice();var y=d*d;return i=Jp(i,y),i=Yp(i,y),i}function Qu(i,d,y){return Math.sqrt(fi(i,d,y,!0))}function Xp(i,d,y){return fi(i,d,y)}function Yp(i,d){var y=i.length,_=typeof Uint8Array<"u"?Uint8Array:Array,M=new _(y);M[0]=M[y-1]=1,wd(i,M,d,0,y-1);var q,de=[];for(q=0;q<y;q++)M[q]&&de.push(i[q]);return de}function wd(i,d,y,_,M){var q=0,de,we,_e;for(we=_+1;we<=M-1;we++)_e=fi(i[we],i[_],i[M],!0),_e>q&&(de=we,q=_e);q>y&&(d[de]=1,wd(i,d,y,_,de),wd(i,d,y,de,M))}function Jp(i,d){for(var y=[i[0]],_=1,M=0,q=i.length;_<q;_++)ef(i[_],i[M])>d&&(y.push(i[_]),M=_);return M<q-1&&y.push(i[q-1]),y}var Cd;function Xu(i,d,y,_,M){var q=_?Cd:pi(i,y),de=pi(d,y),we,_e,Ve;for(Cd=de;;){if(!(q|de))return[i,d];if(q&de)return!1;we=q||de,_e=tc(i,d,we,y,M),Ve=pi(_e,y),we===q?(i=_e,q=Ve):(d=_e,de=Ve)}}function tc(i,d,y,_,M){var q=d.x-i.x,de=d.y-i.y,we=_.min,_e=_.max,Ve,at;return y&8?(Ve=i.x+q*(_e.y-i.y)/de,at=_e.y):y&4?(Ve=i.x+q*(we.y-i.y)/de,at=we.y):y&2?(Ve=_e.x,at=i.y+de*(_e.x-i.x)/q):y&1&&(Ve=we.x,at=i.y+de*(we.x-i.x)/q),new H(Ve,at,M)}function pi(i,d){var y=0;return i.x<d.min.x?y|=1:i.x>d.max.x&&(y|=2),i.y<d.min.y?y|=4:i.y>d.max.y&&(y|=8),y}function ef(i,d){var y=d.x-i.x,_=d.y-i.y;return y*y+_*_}function fi(i,d,y,_){var M=d.x,q=d.y,de=y.x-M,we=y.y-q,_e=de*de+we*we,Ve;return _e>0&&(Ve=((i.x-M)*de+(i.y-q)*we)/_e,Ve>1?(M=y.x,q=y.y):Ve>0&&(M+=de*Ve,q+=we*Ve)),de=i.x-M,we=i.y-q,_?de*de+we*we:new H(M,q)}function ca(i){return!P(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Yu(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ca(i)}function Ju(i,d){var y,_,M,q,de,we,_e,Ve;if(!i||i.length===0)throw new Error("latlngs not passed");ca(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var at=le([0,0]),Nt=ee(i),Vt=Nt.getNorthWest().distanceTo(Nt.getSouthWest())*Nt.getNorthEast().distanceTo(Nt.getNorthWest());Vt<1700&&(at=Nd(i));var bn=i.length,hn=[];for(y=0;y<bn;y++){var Xn=le(i[y]);hn.push(d.project(le([Xn.lat-at.lat,Xn.lng-at.lng])))}for(y=0,_=0;y<bn-1;y++)_+=hn[y].distanceTo(hn[y+1])/2;if(_===0)Ve=hn[0];else for(y=0,q=0;y<bn-1;y++)if(de=hn[y],we=hn[y+1],M=de.distanceTo(we),q+=M,q>_){_e=(q-_)/M,Ve=[we.x-_e*(we.x-de.x),we.y-_e*(we.y-de.y)];break}var Vn=d.unproject(G(Ve));return le([Vn.lat+at.lat,Vn.lng+at.lng])}var em={__proto__:null,simplify:ec,pointToSegmentDistance:Qu,closestPointOnSegment:Xp,clipSegment:Xu,_getEdgeIntersection:tc,_getBitCode:pi,_sqClosestPointOnSegment:fi,isFlat:ca,_flat:Yu,polylineCenter:Ju},Sd={project:function(i){return new H(i.lng,i.lat)},unproject:function(i){return new U(i.y,i.x)},bounds:new W([-180,-90],[180,90])},_d={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var d=Math.PI/180,y=this.R,_=i.lat*d,M=this.R_MINOR/y,q=Math.sqrt(1-M*M),de=q*Math.sin(_),we=Math.tan(Math.PI/4-_/2)/Math.pow((1-de)/(1+de),q/2);return _=-y*Math.log(Math.max(we,1e-10)),new H(i.lng*d*y,_)},unproject:function(i){for(var d=180/Math.PI,y=this.R,_=this.R_MINOR/y,M=Math.sqrt(1-_*_),q=Math.exp(-i.y/y),de=Math.PI/2-2*Math.atan(q),we=0,_e=.1,Ve;we<15&&Math.abs(_e)>1e-7;we++)Ve=M*Math.sin(de),Ve=Math.pow((1-Ve)/(1+Ve),M/2),_e=Math.PI/2-2*Math.atan(q*Ve)-de,de+=_e;return new U(de*d,i.x*d/y)}},tf={__proto__:null,LonLat:Sd,Mercator:_d,SphericalMercator:$e},sf=o({},ae,{code:"EPSG:3395",projection:_d,transformation:(function(){var i=.5/(Math.PI*_d.R);return Xe(i,.5,-i,.5)})()}),tm=o({},ae,{code:"EPSG:4326",projection:Sd,transformation:Xe(1/180,1,-1/180,.5)}),nf=o({},Y,{projection:Sd,transformation:Xe(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,d){var y=d.lng-i.lng,_=d.lat-i.lat;return Math.sqrt(y*y+_*_)},infinite:!0});Y.Earth=ae,Y.EPSG3395=sf,Y.EPSG3857=Je,Y.EPSG900913=tt,Y.EPSG4326=tm,Y.Simple=nf;var ka=fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var d=i.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var y=this.getEvents();d.on(y,this),this.once("remove",function(){d.off(y,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});ts.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var d=f(i);return this._layers[d]?this:(this._layers[d]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var d=f(i);return this._layers[d]?(this._loaded&&i.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return f(i)in this._layers},eachLayer:function(i,d){for(var y in this._layers)i.call(d,this._layers[y]);return this},_addLayers:function(i){i=i?P(i)?i:[i]:[];for(var d=0,y=i.length;d<y;d++)this.addLayer(i[d])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var d=f(i);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,d=-1/0,y=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var M=this._zoomBoundLayers[_].options;i=M.minZoom===void 0?i:Math.min(i,M.minZoom),d=M.maxZoom===void 0?d:Math.max(d,M.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=i===1/0?void 0:i,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $r=ka.extend({initialize:function(i,d){C(this,d),this._layers={};var y,_;if(i)for(y=0,_=i.length;y<_;y++)this.addLayer(i[y])},addLayer:function(i){var d=this.getLayerId(i);return this._layers[d]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var d=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(i){var d=typeof i=="number"?i:this.getLayerId(i);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var d=Array.prototype.slice.call(arguments,1),y,_;for(y in this._layers)_=this._layers[y],_[i]&&_[i].apply(_,d);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,d){for(var y in this._layers)i.call(d,this._layers[y]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),el=function(i,d){return new $r(i,d)},fr=$r.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),$r.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),$r.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new K;for(var d in this._layers){var y=this._layers[d];i.extend(y.getBounds?y.getBounds():y.getLatLng())}return i}}),sm=function(i,d){return new fr(i,d)},xi=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){C(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,d){var y=this._getIconUrl(i);if(!y){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(y,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(_,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(i,d){var y=this.options,_=y[d+"Size"];typeof _=="number"&&(_=[_,_]);var M=G(_),q=G(d==="shadow"&&y.shadowAnchor||y.iconAnchor||M&&M.divideBy(2,!0));i.className="leaflet-marker-"+d+" "+(y.className||""),q&&(i.style.marginLeft=-q.x+"px",i.style.marginTop=-q.y+"px"),M&&(i.style.width=M.x+"px",i.style.height=M.y+"px")},_createImg:function(i,d){return d=d||document.createElement("img"),d.src=i,d},_getIconUrl:function(i){return Fe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function nm(i){return new xi(i)}var Xi=xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Xi.imagePath!="string"&&(Xi.imagePath=this._detectIconPath()),(this.options.imagePath||Xi.imagePath)+xi.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var d=function(y,_,M){var q=_.exec(y);return q&&q[M]};return i=d(i,/^url\((['"])?(.+)\1\)$/,2),i&&d(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=ct("div","leaflet-default-icon-path",document.body),d=Cs(i,"background-image")||Cs(i,"backgroundImage");if(document.body.removeChild(i),d=this._stripUrl(d),d)return d;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),Ad=la.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ea(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Lt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Is(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var d=this._marker,y=d._map,_=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,q=hr(d._icon),de=y.getPixelBounds(),we=y.getPixelOrigin(),_e=ne(de.min._subtract(we).add(M),de.max._subtract(we).subtract(M));if(!_e.contains(q)){var Ve=G((Math.max(_e.max.x,q.x)-_e.max.x)/(de.max.x-_e.max.x)-(Math.min(_e.min.x,q.x)-_e.min.x)/(de.min.x-_e.min.x),(Math.max(_e.max.y,q.y)-_e.max.y)/(de.max.y-_e.max.y)-(Math.min(_e.min.y,q.y)-_e.min.y)/(de.min.y-_e.min.y)).multiplyBy(_);y.panBy(Ve,{animate:!1}),this._draggable._newPos._add(Ve),this._draggable._startPos._add(Ve),Js(d._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=$(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,i)))},_onDrag:function(i){var d=this._marker,y=d._shadow,_=hr(d._icon),M=d._map.layerPointToLatLng(_);y&&Js(y,_),d._latlng=M,i.latlng=M,i.oldLatLng=this._oldLatLng,d.fire("move",i).fire("drag",i)},_onDragEnd:function(i){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),xr=ka.extend({options:{icon:new Xi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,d){C(this,d),this._latlng=le(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var d=this._latlng;return this._latlng=le(i),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=i.icon.createIcon(this._icon),_=!1;y!==this._icon&&(this._icon&&this._removeIcon(),_=!0,i.title&&(y.title=i.title),y.tagName==="IMG"&&(y.alt=i.alt||"")),Lt(y,d),i.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(y,"focus",this._panOnFocus,this);var M=i.icon.createShadow(this._shadow),q=!1;M!==this._shadow&&(this._removeShadow(),q=!0),M&&(Lt(M,d),M.alt=""),this._shadow=M,i.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&q&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ss(this._icon,"focus",this._panOnFocus,this),ns(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ns(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Js(this._icon,i),this._shadow&&Js(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var d=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ad)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ad(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Bn(this._icon,i),this._shadow&&Bn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var d=this.options.icon.options,y=d.iconSize?G(d.iconSize):G(0,0),_=d.iconAnchor?G(d.iconAnchor):G(0,0);i.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:y.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function af(i,d){return new xr(i,d)}var zr=ka.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return C(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sc=zr.extend({options:{fill:!0,radius:10},initialize:function(i,d){C(this,d),this._latlng=le(i),this._radius=this.options.radius},setLatLng:function(i){var d=this._latlng;return this._latlng=le(i),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var d=i&&i.radius||this._radius;return zr.prototype.setStyle.call(this,i),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,d=this._radiusY||i,y=this._clickTolerance(),_=[i+y,d+y];this._pxBounds=new W(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function am(i,d){return new sc(i,d)}var nc=sc.extend({initialize:function(i,d,y){if(typeof d=="number"&&(d=o({},y,{radius:d})),C(this,d),this._latlng=le(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:zr.prototype.setStyle,_project:function(){var i=this._latlng.lng,d=this._latlng.lat,y=this._map,_=y.options.crs;if(_.distance===ae.distance){var M=Math.PI/180,q=this._mRadius/ae.R/M,de=y.project([d+q,i]),we=y.project([d-q,i]),_e=de.add(we).divideBy(2),Ve=y.unproject(_e).lat,at=Math.acos((Math.cos(q*M)-Math.sin(d*M)*Math.sin(Ve*M))/(Math.cos(d*M)*Math.cos(Ve*M)))/M;(isNaN(at)||at===0)&&(at=q/Math.cos(Math.PI/180*d)),this._point=_e.subtract(y.getPixelOrigin()),this._radius=isNaN(at)?0:_e.x-y.project([Ve,i-at]).x,this._radiusY=_e.y-de.y}else{var Nt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(Nt).x}this._updateBounds()}});function tl(i,d,y){return new nc(i,d,y)}var Qn=zr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,d){C(this,d),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var d=1/0,y=null,_=fi,M,q,de=0,we=this._parts.length;de<we;de++)for(var _e=this._parts[de],Ve=1,at=_e.length;Ve<at;Ve++){M=_e[Ve-1],q=_e[Ve];var Nt=_(i,M,q,!0);Nt<d&&(d=Nt,y=_(i,M,q))}return y&&(y.distance=Math.sqrt(d)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ju(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,d){return d=d||this._defaultShape(),i=le(i),d.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new K,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ca(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var d=[],y=ca(i),_=0,M=i.length;_<M;_++)y?(d[_]=le(i[_]),this._bounds.extend(d[_])):d[_]=this._convertLatLngs(i[_]);return d},_project:function(){var i=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),d=new H(i,i);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(i,d,y){var _=i[0]instanceof U,M=i.length,q,de;if(_){for(de=[],q=0;q<M;q++)de[q]=this._map.latLngToLayerPoint(i[q]),y.extend(de[q]);d.push(de)}else for(q=0;q<M;q++)this._projectLatlngs(i[q],d,y)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,y,_,M,q,de,we,_e;for(y=0,M=0,q=this._rings.length;y<q;y++)for(_e=this._rings[y],_=0,de=_e.length;_<de-1;_++)we=Xu(_e[_],_e[_+1],i,_,!0),we&&(d[M]=d[M]||[],d[M].push(we[0]),(we[1]!==_e[_+1]||_===de-2)&&(d[M].push(we[1]),M++))}},_simplifyPoints:function(){for(var i=this._parts,d=this.options.smoothFactor,y=0,_=i.length;y<_;y++)i[y]=ec(i[y],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,d){var y,_,M,q,de,we,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(y=0,q=this._parts.length;y<q;y++)for(we=this._parts[y],_=0,de=we.length,M=de-1;_<de;M=_++)if(!(!d&&_===0)&&Qu(i,we[M],we[_])<=_e)return!0;return!1}});function rf(i,d){return new Qn(i,d)}Qn._flat=Yu;var gr=Qn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ku(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var d=Qn.prototype._convertLatLngs.call(this,i),y=d.length;return y>=2&&d[0]instanceof U&&d[0].equals(d[y-1])&&d.pop(),d},_setLatLngs:function(i){Qn.prototype._setLatLngs.call(this,i),ca(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ca(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,d=this.options.weight,y=new H(d,d);if(i=new W(i.min.subtract(y),i.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,M=this._rings.length,q;_<M;_++)q=jd(this._rings[_],i,!0),q.length&&this._parts.push(q)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var d=!1,y,_,M,q,de,we,_e,Ve;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(q=0,_e=this._parts.length;q<_e;q++)for(y=this._parts[q],de=0,Ve=y.length,we=Ve-1;de<Ve;we=de++)_=y[de],M=y[we],_.y>i.y!=M.y>i.y&&i.x<(M.x-_.x)*(i.y-_.y)/(M.y-_.y)+_.x&&(d=!d);return d||Qn.prototype._containsPoint.call(this,i,!0)}});function of(i,d){return new gr(i,d)}var Za=fr.extend({initialize:function(i,d){C(this,d),this._layers={},i&&this.addData(i)},addData:function(i){var d=P(i)?i:i.features,y,_,M;if(d){for(y=0,_=d.length;y<_;y++)M=d[y],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var q=this.options;if(q.filter&&!q.filter(i))return this;var de=Yi(i,q);return de?(de.feature=lc(i),de.defaultOptions=de.options,this.resetStyle(de),q.onEachFeature&&q.onEachFeature(i,de),this.addLayer(de)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(d){this._setLayerStyle(d,i)},this)},_setLayerStyle:function(i,d){i.setStyle&&(typeof d=="function"&&(d=d(i.feature)),i.setStyle(d))}});function Yi(i,d){var y=i.type==="Feature"?i.geometry:i,_=y?y.coordinates:null,M=[],q=d&&d.pointToLayer,de=d&&d.coordsToLatLng||rc,we,_e,Ve,at;if(!_&&!y)return null;switch(y.type){case"Point":return we=de(_),ac(q,i,we,d);case"MultiPoint":for(Ve=0,at=_.length;Ve<at;Ve++)we=de(_[Ve]),M.push(ac(q,i,we,d));return new fr(M);case"LineString":case"MultiLineString":return _e=sl(_,y.type==="LineString"?0:1,de),new Qn(_e,d);case"Polygon":case"MultiPolygon":return _e=sl(_,y.type==="Polygon"?1:2,de),new gr(_e,d);case"GeometryCollection":for(Ve=0,at=y.geometries.length;Ve<at;Ve++){var Nt=Yi({geometry:y.geometries[Ve],type:"Feature",properties:i.properties},d);Nt&&M.push(Nt)}return new fr(M);case"FeatureCollection":for(Ve=0,at=y.features.length;Ve<at;Ve++){var Vt=Yi(y.features[Ve],d);Vt&&M.push(Vt)}return new fr(M);default:throw new Error("Invalid GeoJSON object.")}}function ac(i,d,y,_){return i?i(d,y):new xr(y,_&&_.markersInheritOptions&&_)}function rc(i){return new U(i[1],i[0],i[2])}function sl(i,d,y){for(var _=[],M=0,q=i.length,de;M<q;M++)de=d?sl(i[M],d-1,y):(y||rc)(i[M]),_.push(de);return _}function ic(i,d){return i=le(i),i.alt!==void 0?[N(i.lng,d),N(i.lat,d),N(i.alt,d)]:[N(i.lng,d),N(i.lat,d)]}function oc(i,d,y,_){for(var M=[],q=0,de=i.length;q<de;q++)M.push(d?oc(i[q],ca(i[q])?0:d-1,y,_):ic(i[q],_));return!d&&y&&M.length>0&&M.push(M[0].slice()),M}function Ji(i,d){return i.feature?o({},i.feature,{geometry:d}):lc(d)}function lc(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Pd={toGeoJSON:function(i){return Ji(this,{type:"Point",coordinates:ic(this.getLatLng(),i)})}};xr.include(Pd),nc.include(Pd),sc.include(Pd),Qn.include({toGeoJSON:function(i){var d=!ca(this._latlngs),y=oc(this._latlngs,d?1:0,!1,i);return Ji(this,{type:(d?"Multi":"")+"LineString",coordinates:y})}}),gr.include({toGeoJSON:function(i){var d=!ca(this._latlngs),y=d&&!ca(this._latlngs[0]),_=oc(this._latlngs,y?2:d?1:0,!0,i);return d||(_=[_]),Ji(this,{type:(y?"Multi":"")+"Polygon",coordinates:_})}}),$r.include({toMultiPoint:function(i){var d=[];return this.eachLayer(function(y){d.push(y.toGeoJSON(i).geometry.coordinates)}),Ji(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(i){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(i);var y=d==="GeometryCollection",_=[];return this.eachLayer(function(M){if(M.toGeoJSON){var q=M.toGeoJSON(i);if(y)_.push(q.geometry);else{var de=lc(q);de.type==="FeatureCollection"?_.push.apply(_,de.features):_.push(de)}}}),y?Ji(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function rm(i,d){return new Za(i,d)}var Da=rm,Br=ka.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,d,y){this._url=i,this._bounds=ee(d),C(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ns(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ha(this._image),this},bringToBack:function(){return this._map&&mr(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ee(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",d=this._image=i?this._url:ct("img");if(Lt(d,"leaflet-image-layer"),this._zoomAnimated&&Lt(d,"leaflet-zoom-animated"),this.options.className&&Lt(d,this.options.className),d.onselectstart=g,d.onmousemove=g,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(i){var d=this._map.getZoomScale(i.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;_a(this._image,y,d)},_reset:function(){var i=this._image,d=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=d.getSize();Js(i,d.min),i.style.width=y.x+"px",i.style.height=y.y+"px"},_updateOpacity:function(){Bn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),im=function(i,d,y){return new Br(i,d,y)},Ed=Br.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",d=this._image=i?this._url:ct("video");if(Lt(d,"leaflet-image-layer"),this._zoomAnimated&&Lt(d,"leaflet-zoom-animated"),this.options.className&&Lt(d,this.options.className),d.onselectstart=g,d.onmousemove=g,d.onloadeddata=u(this.fire,this,"load"),i){for(var y=d.getElementsByTagName("source"),_=[],M=0;M<y.length;M++)_.push(y[M].src);this._url=y.length>0?_:[d.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var q=0;q<this._url.length;q++){var de=ct("source");de.src=this._url[q],d.appendChild(de)}}});function om(i,d,y){return new Ed(i,d,y)}var kd=Br.extend({_initImage:function(){var i=this._image=this._url;Lt(i,"leaflet-image-layer"),this._zoomAnimated&&Lt(i,"leaflet-zoom-animated"),this.options.className&&Lt(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function Dd(i,d,y){return new kd(i,d,y)}var Ga=ka.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,d){i&&(i instanceof U||P(i))?(this._latlng=le(i),C(this,d)):(C(this,i),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Bn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Bn(this._container,1),this.bringToFront(),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Bn(this._container,0),this._removeTimeout=setTimeout(u(ns,void 0,this._container),200)):ns(this._container),this.options.interactive&&(Is(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=le(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ha(this._container),this},bringToBack:function(){return this._map&&mr(this._container),this},_prepareOpen:function(i){var d=this._source;if(!d._map)return!1;if(d instanceof fr){d=null;var y=this._source._layers;for(var _ in y)if(y[_]._map){d=y[_];break}if(!d)return!1;this._source=d}if(!i)if(d.getCenter)i=d.getCenter();else if(d.getLatLng)i=d.getLatLng();else if(d.getBounds)i=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")i.innerHTML=d;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),d=G(this.options.offset),y=this._getAnchor();this._zoomAnimated?Js(this._container,i.add(y)):d=d.add(i).add(y);var _=this._containerBottom=-d.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=_+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});ts.include({_initOverlay:function(i,d,y,_){var M=d;return M instanceof i||(M=new i(_).setContent(d)),y&&M.setLatLng(y),M}}),ka.include({_initOverlay:function(i,d,y,_){var M=y;return M instanceof i?(C(M,_),M._source=this):(M=d&&!_?d:new i(_,this),M.setContent(y)),M}});var cc=Ga.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Ga.prototype.openOn.call(this,i)},onAdd:function(i){Ga.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zr||this._source.on("preclick",Wa))},onRemove:function(i){Ga.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zr||this._source.off("preclick",Wa))},getEvents:function(){var i=Ga.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",d=this._container=ct("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=ct("div",i+"-content-wrapper",d);if(this._contentNode=ct("div",i+"-content",y),Xo(d),Ql(this._contentNode),It(d,"contextmenu",Wa),this._tipContainer=ct("div",i+"-tip-container",d),this._tip=ct("div",i+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=ct("a",i+"-close-button",d);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',It(_,"click",function(M){Gs(M),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,d=i.style;d.width="",d.whiteSpace="nowrap";var y=i.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),d.width=y+1+"px",d.whiteSpace="",d.height="";var _=i.offsetHeight,M=this.options.maxHeight,q="leaflet-popup-scrolled";M&&_>M?(d.height=M+"px",Lt(i,q)):Is(i,q),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var d=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),y=this._getAnchor();Js(this._container,d.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,d=parseInt(Cs(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+d,_=this._containerWidth,M=new H(this._containerLeft,-y-this._containerBottom);M._add(hr(this._container));var q=i.layerPointToContainerPoint(M),de=G(this.options.autoPanPadding),we=G(this.options.autoPanPaddingTopLeft||de),_e=G(this.options.autoPanPaddingBottomRight||de),Ve=i.getSize(),at=0,Nt=0;q.x+_+_e.x>Ve.x&&(at=q.x+_-Ve.x+_e.x),q.x-at-we.x<0&&(at=q.x-we.x),q.y+y+_e.y>Ve.y&&(Nt=q.y+y-Ve.y+_e.y),q.y-Nt-we.y<0&&(Nt=q.y-we.y),(at||Nt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([at,Nt]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),eo=function(i,d){return new cc(i,d)};ts.mergeOptions({closePopupOnClick:!0}),ts.include({openPopup:function(i,d,y){return this._initOverlay(cc,i,d,y).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ka.include({bindPopup:function(i,d){return this._popup=this._initOverlay(cc,this._popup,i,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof fr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Pa(i);var d=i.layer||i.target;if(this._popup._source===d&&!(d instanceof zr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=d,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var to=Ga.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Ga.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Ga.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Ga.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",d=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var d,y,_=this._map,M=this._container,q=_.latLngToContainerPoint(_.getCenter()),de=_.layerPointToContainerPoint(i),we=this.options.direction,_e=M.offsetWidth,Ve=M.offsetHeight,at=G(this.options.offset),Nt=this._getAnchor();we==="top"?(d=_e/2,y=Ve):we==="bottom"?(d=_e/2,y=0):we==="center"?(d=_e/2,y=Ve/2):we==="right"?(d=0,y=Ve/2):we==="left"?(d=_e,y=Ve/2):de.x<q.x?(we="right",d=0,y=Ve/2):(we="left",d=_e+(at.x+Nt.x)*2,y=Ve/2),i=i.subtract(G(d,y,!0)).add(at).add(Nt),Is(M,"leaflet-tooltip-right"),Is(M,"leaflet-tooltip-left"),Is(M,"leaflet-tooltip-top"),Is(M,"leaflet-tooltip-bottom"),Lt(M,"leaflet-tooltip-"+we),Js(M,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Bn(this._container,i)},_animateZoom:function(i){var d=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(d)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),nl=function(i,d){return new to(i,d)};ts.include({openTooltip:function(i,d,y){return this._initOverlay(to,i,d,y).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ka.include({bindTooltip:function(i,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(to,this._tooltip,i,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var d=i?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[d](y),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof fr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var d=typeof i.getElement=="function"&&i.getElement();d&&(It(d,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),It(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var d=typeof i.getElement=="function"&&i.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var d=i.latlng,y,_;this._tooltip.options.sticky&&i.originalEvent&&(y=this._map.mouseEventToContainerPoint(i.originalEvent),_=this._map.containerPointToLayerPoint(y),d=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(d)}});var dc=xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var d=i&&i.tagName==="DIV"?i:document.createElement("div"),y=this.options;if(y.html instanceof Element?(zn(d),d.appendChild(y.html)):d.innerHTML=y.html!==!1?y.html:"",y.bgPos){var _=G(y.bgPos);d.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function lm(i){return new dc(i)}xi.Default=Xi;var Ur=ka.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){C(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ns(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ha(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof H?i:new H(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var d=this.getPane().children,y=-i(-1/0,1/0),_=0,M=d.length,q;_<M;_++)q=d[_].style.zIndex,d[_]!==this._container&&q&&(y=i(y,+q));isFinite(y)&&(this.options.zIndex=y+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){Bn(this._container,this.options.opacity);var i=+new Date,d=!1,y=!1;for(var _ in this._tiles){var M=this._tiles[_];if(!(!M.current||!M.loaded)){var q=Math.min(1,(i-M.loaded)/200);Bn(M.el,q),q<1?d=!0:(M.active?y=!0:this._onOpaqueTile(M),M.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),d&&(R(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,d=this.options.maxZoom;if(i!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===i?(this._levels[y].el.style.zIndex=d-Math.abs(i-y),this._onUpdateLevel(y)):(ns(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var _=this._levels[i],M=this._map;return _||(_=this._levels[i]={},_.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=d,_.origin=M.project(M.unproject(M.getPixelOrigin()),i).round(),_.zoom=i,this._setZoomTransform(_,M.getCenter(),M.getZoom()),g(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,d,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)d=this._tiles[i],d.retain=d.current;for(i in this._tiles)if(d=this._tiles[i],d.current&&!d.active){var _=d.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var d in this._tiles)this._tiles[d].coords.z===i&&this._removeTile(d)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ns(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,d,y,_){var M=Math.floor(i/2),q=Math.floor(d/2),de=y-1,we=new H(+M,+q);we.z=+de;var _e=this._tileCoordsToKey(we),Ve=this._tiles[_e];return Ve&&Ve.active?(Ve.retain=!0,!0):(Ve&&Ve.loaded&&(Ve.retain=!0),de>_?this._retainParent(M,q,de,_):!1)},_retainChildren:function(i,d,y,_){for(var M=2*i;M<2*i+2;M++)for(var q=2*d;q<2*d+2;q++){var de=new H(M,q);de.z=y+1;var we=this._tileCoordsToKey(de),_e=this._tiles[we];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);y+1<_&&this._retainChildren(M,q,y+1,_)}},_resetView:function(i){var d=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var d=this.options;return d.minNativeZoom!==void 0&&i<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<i?d.maxNativeZoom:i},_setView:function(i,d,y,_){var M=Math.round(d);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var q=this.options.updateWhenZooming&&M!==this._tileZoom;(!_||q)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(i),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(i,d)},_setZoomTransforms:function(i,d){for(var y in this._levels)this._setZoomTransform(this._levels[y],i,d)},_setZoomTransform:function(i,d,y){var _=this._map.getZoomScale(y,i.zoom),M=i.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(d,y)).round();Fe.any3d?_a(i.el,M,_):Js(i.el,M)},_resetGrid:function(){var i=this._map,d=i.options.crs,y=this._tileSize=this.getTileSize(),_=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,d.wrapLng[0]],_).x/y.x),Math.ceil(i.project([0,d.wrapLng[1]],_).x/y.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([d.wrapLat[0],0],_).y/y.x),Math.ceil(i.project([d.wrapLat[1],0],_).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var d=this._map,y=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),_=d.getZoomScale(y,this._tileZoom),M=d.project(i,this._tileZoom).floor(),q=d.getSize().divideBy(_*2);return new W(M.subtract(q),M.add(q))},_update:function(i){var d=this._map;if(d){var y=this._clampZoom(d.getZoom());if(i===void 0&&(i=d.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(i),M=this._pxBoundsToTileRange(_),q=M.getCenter(),de=[],we=this.options.keepBuffer,_e=new W(M.getBottomLeft().subtract([we,-we]),M.getTopRight().add([we,-we]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ve in this._tiles){var at=this._tiles[Ve].coords;(at.z!==this._tileZoom||!_e.contains(new H(at.x,at.y)))&&(this._tiles[Ve].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(i,y);return}for(var Nt=M.min.y;Nt<=M.max.y;Nt++)for(var Vt=M.min.x;Vt<=M.max.x;Vt++){var bn=new H(Vt,Nt);if(bn.z=this._tileZoom,!!this._isValidTile(bn)){var hn=this._tiles[this._tileCoordsToKey(bn)];hn?hn.current=!0:de.push(bn)}}if(de.sort(function(Vn,io){return Vn.distanceTo(q)-io.distanceTo(q)}),de.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xn=document.createDocumentFragment();for(Vt=0;Vt<de.length;Vt++)this._addTile(de[Vt],Xn);this._level.el.appendChild(Xn)}}}},_isValidTile:function(i){var d=this._map.options.crs;if(!d.infinite){var y=this._globalTileRange;if(!d.wrapLng&&(i.x<y.min.x||i.x>y.max.x)||!d.wrapLat&&(i.y<y.min.y||i.y>y.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(i);return ee(this.options.bounds).overlaps(_)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var d=this._map,y=this.getTileSize(),_=i.scaleBy(y),M=_.add(y),q=d.unproject(_,i.z),de=d.unproject(M,i.z);return[q,de]},_tileCoordsToBounds:function(i){var d=this._tileCoordsToNwSe(i),y=new K(d[0],d[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var d=i.split(":"),y=new H(+d[0],+d[1]);return y.z=+d[2],y},_removeTile:function(i){var d=this._tiles[i];d&&(ns(d.el),delete this._tiles[i],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Lt(i,"leaflet-tile");var d=this.getTileSize();i.style.width=d.x+"px",i.style.height=d.y+"px",i.onselectstart=g,i.onmousemove=g,Fe.ielt9&&this.options.opacity<1&&Bn(i,this.options.opacity)},_addTile:function(i,d){var y=this._getTilePos(i),_=this._tileCoordsToKey(i),M=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(M),this.createTile.length<2&&$(u(this._tileReady,this,i,null,M)),Js(M,y),this._tiles[_]={el:M,coords:i,current:!0},d.appendChild(M),this.fire("tileloadstart",{tile:M,coords:i})},_tileReady:function(i,d,y){d&&this.fire("tileerror",{error:d,tile:y,coords:i});var _=this._tileCoordsToKey(i);y=this._tiles[_],y&&(y.loaded=+new Date,this._map._fadeAnimated?(Bn(y.el,0),R(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),d||(Lt(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var d=new H(this._wrapX?x(i.x,this._wrapX):i.x,this._wrapY?x(i.y,this._wrapY):i.y);return d.z=i.z,d},_pxBoundsToTileRange:function(i){var d=this.getTileSize();return new W(i.min.unscaleBy(d).floor(),i.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function so(i){return new Ur(i)}var Vr=Ur.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,d){this._url=i,d=C(this,d),d.detectRetina&&Fe.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,d){return this._url===i&&d===void 0&&(d=!0),this._url=i,d||this.redraw(),this},createTile:function(i,d){var y=document.createElement("img");return It(y,"load",u(this._tileOnLoad,this,d,y)),It(y,"error",u(this._tileOnError,this,d,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(i),y},getTileUrl:function(i){var d={r:Fe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-i.y;this.options.tms&&(d.y=y),d["-y"]=y}return S(this._url,o(d,this.options))},_tileOnLoad:function(i,d){Fe.ielt9?setTimeout(u(i,this,null,d),0):i(null,d)},_tileOnError:function(i,d,y){var _=this.options.errorTileUrl;_&&d.getAttribute("src")!==_&&(d.src=_),i(y,d)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,d=this.options.maxZoom,y=this.options.zoomReverse,_=this.options.zoomOffset;return y&&(i=d-i),i+_},_getSubdomain:function(i){var d=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var i,d;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(d=this._tiles[i].el,d.onload=g,d.onerror=g,!d.complete)){d.src=I;var y=this._tiles[i].coords;ns(d),delete this._tiles[i],this.fire("tileabort",{tile:d,coords:y})}},_removeTile:function(i){var d=this._tiles[i];if(d)return d.el.setAttribute("src",I),Ur.prototype._removeTile.call(this,i)},_tileReady:function(i,d,y){if(!(!this._map||y&&y.getAttribute("src")===I))return Ur.prototype._tileReady.call(this,i,d,y)}});function Td(i,d){return new Vr(i,d)}var al=Vr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,d){this._url=i;var y=o({},this.defaultWmsParams);for(var _ in d)_ in this.options||(y[_]=d[_]);d=C(this,d);var M=d.detectRetina&&Fe.retina?2:1,q=this.getTileSize();y.width=q.x*M,y.height=q.y*M,this.wmsParams=y},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,Vr.prototype.onAdd.call(this,i)},getTileUrl:function(i){var d=this._tileCoordsToNwSe(i),y=this._crs,_=ne(y.project(d[0]),y.project(d[1])),M=_.min,q=_.max,de=(this._wmsVersion>=1.3&&this._crs===tm?[M.y,M.x,q.y,q.x]:[M.x,M.y,q.x,q.y]).join(","),we=Vr.prototype.getTileUrl.call(this,i);return we+k(this.wmsParams,we,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+de},setParams:function(i,d){return o(this.wmsParams,i),d||this.redraw(),this}});function cm(i,d){return new al(i,d)}Vr.WMS=al,Td.wms=cm;var Ka=ka.extend({options:{padding:.1},initialize:function(i){C(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,d){var y=this._map.getZoomScale(d,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,d),q=_.multiplyBy(-y).add(M).subtract(this._map._getNewPixelOrigin(i,d));Fe.any3d?_a(this._container,q,y):Js(this._container,q)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,d=this._map.getSize(),y=this._map.containerPointToLayerPoint(d.multiplyBy(-i)).round();this._bounds=new W(y,y.add(d.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Id=Ka.extend({options:{tolerance:0},getEvents:function(){var i=Ka.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ka.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");It(i,"mousemove",this._onMouseMove,this),It(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),It(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,ns(this._container),Ss(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var d in this._layers)i=this._layers[d],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ka.prototype._update.call(this);var i=this._bounds,d=this._container,y=i.getSize(),_=Fe.retina?2:1;Js(d,i.min),d.width=_*y.x,d.height=_*y.y,d.style.width=y.x+"px",d.style.height=y.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Ka.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var d=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var d=i._order,y=d.next,_=d.prev;y?y.prev=_:this._drawLast=_,_?_.next=y:this._drawFirst=y,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var d=i.options.dashArray.split(/[, ]+/),y=[],_,M;for(M=0;M<d.length;M++){if(_=Number(d[M]),isNaN(_))return;y.push(_)}i.options._dashArray=y}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var d=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(i._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(i._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var d=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,d=this._redrawBounds;if(this._ctx.save(),d){var y=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)i=_.layer,(!d||i._pxBounds&&i._pxBounds.intersects(d))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,d){if(this._drawing){var y,_,M,q,de=i._parts,we=de.length,_e=this._ctx;if(we){for(_e.beginPath(),y=0;y<we;y++){for(_=0,M=de[y].length;_<M;_++)q=de[y][_],_e[_?"lineTo":"moveTo"](q.x,q.y);d&&_e.closePath()}this._fillStroke(_e,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var d=i._point,y=this._ctx,_=Math.max(Math.round(i._radius),1),M=(Math.max(Math.round(i._radiusY),1)||_)/_;M!==1&&(y.save(),y.scale(1,M)),y.beginPath(),y.arc(d.x,d.y/M,_,0,Math.PI*2,!1),M!==1&&y.restore(),this._fillStroke(y,i)}},_fillStroke:function(i,d){var y=d.options;y.fill&&(i.globalAlpha=y.fillOpacity,i.fillStyle=y.fillColor||y.color,i.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(i.setLineDash&&i.setLineDash(d.options&&d.options._dashArray||[]),i.globalAlpha=y.opacity,i.lineWidth=y.weight,i.strokeStyle=y.color,i.lineCap=y.lineCap,i.lineJoin=y.lineJoin,i.stroke())},_onClick:function(i){for(var d=this._map.mouseEventToLayerPoint(i),y,_,M=this._drawFirst;M;M=M.next)y=M.layer,y.options.interactive&&y._containsPoint(d)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(y))&&(_=y);this._fireEvent(_?[_]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,d)}},_handleMouseOut:function(i){var d=this._hoveredLayer;d&&(Is(this._container,"leaflet-interactive"),this._fireEvent([d],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,d){if(!this._mouseHoverThrottled){for(var y,_,M=this._drawFirst;M;M=M.next)y=M.layer,y.options.interactive&&y._containsPoint(d)&&(_=y);_!==this._hoveredLayer&&(this._handleMouseOut(i),_&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([_],i,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,d,y){this._map._fireDOMEvent(d,y||d.type,i)},_bringToFront:function(i){var d=i._order;if(d){var y=d.next,_=d.prev;if(y)y.prev=_;else return;_?_.next=y:y&&(this._drawFirst=y),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(i)}},_bringToBack:function(i){var d=i._order;if(d){var y=d.next,_=d.prev;if(_)_.next=y;else return;y?y.prev=_:_&&(this._drawLast=_),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(i)}}});function Md(i){return Fe.canvas?new Id(i):null}var no=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),dm={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ka.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var d=i._container=no("shape");Lt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",i._path=no("path"),d.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var d=i._container;this._container.appendChild(d),i.options.interactive&&i.addInteractiveTarget(d)},_removePath:function(i){var d=i._container;ns(d),i.removeInteractiveTarget(d),delete this._layers[f(i)]},_updateStyle:function(i){var d=i._stroke,y=i._fill,_=i.options,M=i._container;M.stroked=!!_.stroke,M.filled=!!_.fill,_.stroke?(d||(d=i._stroke=no("stroke")),M.appendChild(d),d.weight=_.weight+"px",d.color=_.color,d.opacity=_.opacity,_.dashArray?d.dashStyle=P(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=_.lineCap.replace("butt","flat"),d.joinstyle=_.lineJoin):d&&(M.removeChild(d),i._stroke=null),_.fill?(y||(y=i._fill=no("fill")),M.appendChild(y),y.color=_.fillColor||_.color,y.opacity=_.fillOpacity):y&&(M.removeChild(y),i._fill=null)},_updateCircle:function(i){var d=i._point.round(),y=Math.round(i._radius),_=Math.round(i._radiusY||y);this._setPath(i,i._empty()?"M0 0":"AL "+d.x+","+d.y+" "+y+","+_+" 0,"+65535*360)},_setPath:function(i,d){i._path.v=d},_bringToFront:function(i){Ha(i._container)},_bringToBack:function(i){mr(i._container)}},Ta=Fe.vml?no:ut,gi=Ka.extend({_initContainer:function(){this._container=Ta("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ta("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ns(this._container),Ss(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ka.prototype._update.call(this);var i=this._bounds,d=i.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,y.setAttribute("width",d.x),y.setAttribute("height",d.y)),Js(y,i.min),y.setAttribute("viewBox",[i.min.x,i.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(i){var d=i._path=Ta("path");i.options.className&&Lt(d,i.options.className),i.options.interactive&&Lt(d,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ns(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var d=i._path,y=i.options;d&&(y.stroke?(d.setAttribute("stroke",y.color),d.setAttribute("stroke-opacity",y.opacity),d.setAttribute("stroke-width",y.weight),d.setAttribute("stroke-linecap",y.lineCap),d.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?d.setAttribute("stroke-dasharray",y.dashArray):d.removeAttribute("stroke-dasharray"),y.dashOffset?d.setAttribute("stroke-dashoffset",y.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),y.fill?(d.setAttribute("fill",y.fillColor||y.color),d.setAttribute("fill-opacity",y.fillOpacity),d.setAttribute("fill-rule",y.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(i,d){this._setPath(i,wt(i._parts,d))},_updateCircle:function(i){var d=i._point,y=Math.max(Math.round(i._radius),1),_=Math.max(Math.round(i._radiusY),1)||y,M="a"+y+","+_+" 0 1,0 ",q=i._empty()?"M0 0":"M"+(d.x-y)+","+d.y+M+y*2+",0 "+M+-y*2+",0 ";this._setPath(i,q)},_setPath:function(i,d){i._path.setAttribute("d",d)},_bringToFront:function(i){Ha(i._path)},_bringToBack:function(i){mr(i._path)}});Fe.vml&&gi.include(dm);function uc(i){return Fe.svg||Fe.vml?new gi(i):null}ts.include({getRenderer:function(i){var d=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var d=this._paneRenderers[i];return d===void 0&&(d=this._createRenderer({pane:i}),this._paneRenderers[i]=d),d},_createRenderer:function(i){return this.options.preferCanvas&&Md(i)||uc(i)}});var um=gr.extend({initialize:function(i,d){gr.prototype.initialize.call(this,this._boundsToLatLngs(i),d)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ee(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function lf(i,d){return new um(i,d)}gi.create=Ta,gi.pointsToPath=wt,Za.geometryToLayer=Yi,Za.coordsToLatLng=rc,Za.coordsToLatLngs=sl,Za.latLngToCoords=ic,Za.latLngsToCoords=oc,Za.getFeature=Ji,Za.asFeature=lc,ts.mergeOptions({boxZoom:!0});var ao=la.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ss(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ns(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),is(),Zl(),this._startPoint=this._map.mouseEventToContainerPoint(i),It(document,{contextmenu:Pa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),Lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var d=new W(this._point,this._startPoint),y=d.getSize();Js(this._box,d.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(ns(this._box),Is(this._container,"leaflet-crosshair")),Wi(),Gl(),Ss(document,{contextmenu:Pa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ts.addInitHook("addHandler","boxZoom",ao),ts.mergeOptions({doubleClickZoom:!0});var mm=la.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var d=this._map,y=d.getZoom(),_=d.options.zoomDelta,M=i.originalEvent.shiftKey?y-_:y+_;d.options.doubleClickZoom==="center"?d.setZoom(M):d.setZoomAround(i.containerPoint,M)}});ts.addInitHook("addHandler","doubleClickZoom",mm),ts.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Rd=la.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ea(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Is(this._map._container,"leaflet-grab"),Is(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=ee(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var d=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(d),this._prunePositions(d)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,d){return i-(i-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;i.x<d.min.x&&(i.x=this._viscousLimit(i.x,d.min.x)),i.y<d.min.y&&(i.y=this._viscousLimit(i.y,d.min.y)),i.x>d.max.x&&(i.x=this._viscousLimit(i.x,d.max.x)),i.y>d.max.y&&(i.y=this._viscousLimit(i.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,d=Math.round(i/2),y=this._initialWorldOffset,_=this._draggable._newPos.x,M=(_-d+y)%i+d-y,q=(_+d+y)%i-d-y,de=Math.abs(M+y)<Math.abs(q+y)?M:q;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=de},_onDragEnd:function(i){var d=this._map,y=d.options,_=!y.inertia||i.noInertia||this._times.length<2;if(d.fire("dragend",i),_)d.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),q=(this._lastTime-this._times[0])/1e3,de=y.easeLinearity,we=M.multiplyBy(de/q),_e=we.distanceTo([0,0]),Ve=Math.min(y.inertiaMaxSpeed,_e),at=we.multiplyBy(Ve/_e),Nt=Ve/(y.inertiaDeceleration*de),Vt=at.multiplyBy(-Nt/2).round();!Vt.x&&!Vt.y?d.fire("moveend"):(Vt=d._limitOffset(Vt,d.options.maxBounds),$(function(){d.panBy(Vt,{duration:Nt,easeLinearity:de,noMoveStart:!0,animate:!0})}))}}});ts.addInitHook("addHandler","dragging",Rd),ts.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Od=la.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),It(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ss(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,d=document.documentElement,y=i.scrollTop||d.scrollTop,_=i.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(_,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var d=this._panKeys={},y=this.keyCodes,_,M;for(_=0,M=y.left.length;_<M;_++)d[y.left[_]]=[-1*i,0];for(_=0,M=y.right.length;_<M;_++)d[y.right[_]]=[i,0];for(_=0,M=y.down.length;_<M;_++)d[y.down[_]]=[0,i];for(_=0,M=y.up.length;_<M;_++)d[y.up[_]]=[0,-1*i]},_setZoomDelta:function(i){var d=this._zoomKeys={},y=this.keyCodes,_,M;for(_=0,M=y.zoomIn.length;_<M;_++)d[y.zoomIn[_]]=i;for(_=0,M=y.zoomOut.length;_<M;_++)d[y.zoomOut[_]]=-i},_addHooks:function(){It(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ss(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var d=i.keyCode,y=this._map,_;if(d in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(_=this._panKeys[d],i.shiftKey&&(_=G(_).multiplyBy(3)),y.options.maxBounds&&(_=y._limitOffset(G(_),y.options.maxBounds)),y.options.worldCopyJump){var M=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(_)));y.panTo(M)}else y.panBy(_)}else if(d in this._zoomKeys)y.setZoom(y.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;Pa(i)}}});ts.addInitHook("addHandler","keyboard",Od),ts.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _s=la.extend({addHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ss(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var d=Zu(i),y=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var _=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),_),Pa(i)},_performZoom:function(){var i=this._map,d=i.getZoom(),y=this._map.options.zoomSnap||0;i._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,q=y?Math.ceil(M/y)*y:M,de=i._limitZoom(d+(this._delta>0?q:-q))-d;this._delta=0,this._startTime=null,de&&(i.options.scrollWheelZoom==="center"?i.setZoom(d+de):i.setZoomAround(this._lastMousePos,d+de))}});ts.addInitHook("addHandler","scrollWheelZoom",_s);var Ld=600;ts.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var rl=la.extend({addHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ss(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var d=i.touches[0];this._startPos=this._newPos=new H(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(It(document,"touchend",Gs),It(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Ld),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Ss(document,"touchend",Gs),Ss(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Ss(document,"touchend touchcancel contextmenu",this._cancel,this),Ss(document,"touchmove",this._onMove,this)},_onMove:function(i){var d=i.touches[0];this._newPos=new H(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,d){var y=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});y._simulated=!0,d.target.dispatchEvent(y)}});ts.addInitHook("addHandler","tapHold",rl),ts.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var ro=la.extend({addHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Is(this._map._container,"leaflet-touch-zoom"),Ss(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var d=this._map;if(!(!i.touches||i.touches.length!==2||d._animatingZoom||this._zooming)){var y=d.mouseEventToContainerPoint(i.touches[0]),_=d.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(y.add(_)._divideBy(2))),this._startDist=y.distanceTo(_),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),Gs(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var d=this._map,y=d.mouseEventToContainerPoint(i.touches[0]),_=d.mouseEventToContainerPoint(i.touches[1]),M=y.distanceTo(_)/this._startDist;if(this._zoom=d.getScaleZoom(M,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&M<1||this._zoom>d.getMaxZoom()&&M>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var q=y._add(_)._divideBy(2)._subtract(this._centerPoint);if(M===1&&q.x===0&&q.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(q),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var de=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(de,this,!0),Gs(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),Ss(document,"touchmove",this._onTouchMove,this),Ss(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ts.addInitHook("addHandler","touchZoom",ro),ts.BoxZoom=ao,ts.DoubleClickZoom=mm,ts.Drag=Rd,ts.Keyboard=Od,ts.ScrollWheelZoom=_s,ts.TapHold=rl,ts.TouchZoom=ro,n.Bounds=W,n.Browser=Fe,n.CRS=Y,n.Canvas=Id,n.Circle=nc,n.CircleMarker=sc,n.Class=J,n.Control=Kn,n.DivIcon=dc,n.DivOverlay=Ga,n.DomEvent=Xl,n.DomUtil=Qo,n.Draggable=Ea,n.Evented=fe,n.FeatureGroup=fr,n.GeoJSON=Za,n.GridLayer=Ur,n.Handler=la,n.Icon=xi,n.ImageOverlay=Br,n.LatLng=U,n.LatLngBounds=K,n.Layer=ka,n.LayerGroup=$r,n.LineUtil=em,n.Map=ts,n.Marker=xr,n.Mixin=bd,n.Path=zr,n.Point=H,n.PolyUtil=Qp,n.Polygon=gr,n.Polyline=Qn,n.Popup=cc,n.PosAnimation=Yl,n.Projection=tf,n.Rectangle=um,n.Renderer=Ka,n.SVG=gi,n.SVGOverlay=kd,n.TileLayer=Vr,n.Tooltip=to,n.Transformation=Ge,n.Util=z,n.VideoOverlay=Ed,n.bind=u,n.bounds=ne,n.canvas=Md,n.circle=tl,n.circleMarker=am,n.control=Fr,n.divIcon=lm,n.extend=o,n.featureGroup=sm,n.geoJSON=rm,n.geoJson=Da,n.gridLayer=so,n.icon=nm,n.imageOverlay=im,n.latLng=le,n.latLngBounds=ee,n.layerGroup=el,n.map=Lr,n.marker=af,n.point=G,n.polygon=of,n.polyline=rf,n.popup=eo,n.rectangle=lf,n.setOptions=C,n.stamp=f,n.svg=uc,n.svgOverlay=Dd,n.tileLayer=Td,n.tooltip=nl,n.transformation=Xe,n.version=r,n.videoOverlay=om;var hm=window.L;n.noConflict=function(){return window.L=hm,this},window.L=n}))})(mu,mu.exports)),mu.exports}var Ho=h3();const $u=Vg(Ho);function z2(t,s){const n=m.useRef(s);m.useEffect(function(){s!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),s!=null&&t.attributionControl.addAttribution(s)),n.current=s},[t,s])}const p3=1;function f3(t){return Object.freeze({__version:p3,map:t})}function Mp(t,s){return Object.freeze({...t,...s})}const B2=m.createContext(null),U2=B2.Provider;function Rp(){const t=m.useContext(B2);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function V2(t){function s(n,r){const{instance:o,context:c}=t(n).current;return m.useImperativeHandle(r,()=>o),n.children==null?null:Be.createElement(U2,{value:c},n.children)}return m.forwardRef(s)}function x3(t){function s(n,r){const[o,c]=m.useState(!1),{instance:u}=t(n,c).current;m.useImperativeHandle(r,()=>u),m.useEffect(function(){o&&u.update()},[u,o,n.children]);const h=u._contentNode;return h?Xc.createPortal(n.children,h):null}return m.forwardRef(s)}function g3(t){function s(n,r){const{instance:o}=t(n).current;return m.useImperativeHandle(r,()=>o),null}return m.forwardRef(s)}function B0(t,s){const n=m.useRef();m.useEffect(function(){return s!=null&&t.instance.on(s),n.current=s,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,s])}function Op(t,s){const n=t.pane??s.pane;return n?{...t,pane:n}:t}function v3(t,s){return function(r,o){const c=Rp(),u=t(Op(r,c),c);return z2(c.map,r.attribution),B0(u.current,r.eventHandlers),s(u.current,c,r,o),u}}function ld(t,s,n){return Object.freeze({instance:t,context:s,container:n})}function Lp(t,s){return s==null?function(r,o){const c=m.useRef();return c.current||(c.current=t(r,o)),c}:function(r,o){const c=m.useRef();c.current||(c.current=t(r,o));const u=m.useRef(r),{instance:h}=c.current;return m.useEffect(function(){u.current!==r&&(s(h,r,u.current),u.current=r)},[h,r,o]),c}}function H2(t,s){m.useEffect(function(){return(s.layerContainer??s.map).addLayer(t.instance),function(){s.layerContainer?.removeLayer(t.instance),s.map.removeLayer(t.instance)}},[s,t])}function q2(t){return function(n){const r=Rp(),o=t(Op(n,r),r);return z2(r.map,n.attribution),B0(o.current,n.eventHandlers),H2(o.current,r),o}}function y3(t,s){const n=m.useRef();m.useEffect(function(){if(s.pathOptions!==n.current){const o=s.pathOptions??{};t.instance.setStyle(o),n.current=o}},[t,s])}function b3(t){return function(n){const r=Rp(),o=t(Op(n,r),r);return B0(o.current,n.eventHandlers),H2(o.current,r),y3(o.current,n),o}}function j3(t,s){const n=Lp(t,s),r=q2(n);return V2(r)}function N3(t,s){const n=Lp(t),r=v3(n,s);return x3(r)}function U0(t,s){const n=Lp(t,s),r=b3(n);return V2(r)}function w3(t,s){const n=Lp(t,s),r=q2(n);return g3(r)}function C3(t,s,n){const{opacity:r,zIndex:o}=s;r!=null&&r!==n.opacity&&t.setOpacity(r),o!=null&&o!==n.zIndex&&t.setZIndex(o)}function V0(){return Rp().map}function W2(t){const s=V0();return m.useEffect(function(){return s.on(t),function(){s.off(t)}},[s,t]),s}function Dg(){return Dg=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dg.apply(this,arguments)}function S3({bounds:t,boundsOptions:s,center:n,children:r,className:o,id:c,placeholder:u,style:h,whenReady:f,zoom:v,...x},g){const[N]=m.useState({className:o,id:c,style:h}),[w,j]=m.useState(null);m.useImperativeHandle(g,()=>w?.map??null,[w]);const C=m.useCallback(E=>{if(E!==null&&w===null){const S=new Ho.Map(E,x);n!=null&&v!=null?S.setView(n,v):t!=null&&S.fitBounds(t,s),f!=null&&S.whenReady(f),j(f3(S))}},[]);m.useEffect(()=>()=>{w?.map.remove()},[w]);const k=w?Be.createElement(U2,{value:w},r):u??null;return Be.createElement("div",Dg({},N,{ref:C}),k)}const Z2=m.forwardRef(S3),Tg=j3(function({position:s,...n},r){const o=new Ho.Marker(s,n);return ld(o,Mp(r,{overlayContainer:o}))},function(s,n,r){n.position!==r.position&&s.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&s.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&s.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&s.setOpacity(n.opacity),s.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?s.dragging.enable():s.dragging.disable())}),xj=U0(function({positions:s,...n},r){const o=new Ho.Polygon(s,n);return ld(o,Mp(r,{overlayContainer:o}))},function(s,n,r){n.positions!==r.positions&&s.setLatLngs(n.positions)}),_3=U0(function({positions:s,...n},r){const o=new Ho.Polyline(s,n);return ld(o,Mp(r,{overlayContainer:o}))},function(s,n,r){n.positions!==r.positions&&s.setLatLngs(n.positions)}),A3=N3(function(s,n){const r=new Ho.Popup(s,n.overlayContainer);return ld(r,n)},function(s,n,{position:r},o){m.useEffect(function(){const{instance:u}=s;function h(v){v.popup===u&&(u.update(),o(!0))}function f(v){v.popup===u&&o(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){n.map.off({popupopen:h,popupclose:f}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(u)}},[s,n,o,r])}),P3=U0(function({bounds:s,...n},r){const o=new Ho.Rectangle(s,n);return ld(o,Mp(r,{overlayContainer:o}))},function(s,n,r){n.bounds!==r.bounds&&s.setBounds(n.bounds)}),G2=w3(function({url:s,...n},r){const o=new Ho.TileLayer(s,Op(n,r));return ld(o,r)},function(s,n,r){C3(s,n,r);const{url:o}=n;o!=null&&o!==r.url&&s.setUrl(o)}),E3={};delete $u.Icon.Default.prototype._getIconUrl;$u.Icon.Default.mergeOptions({iconRetinaUrl:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",import.meta.url).href,iconUrl:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",import.meta.url).href,shadowUrl:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",import.meta.url).href});const k3="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png",D3="/figma-assets/outdoor.png";function T3(){const t=E3??{},s=typeof window<"u"?window.__ENV__??{}:{};return String(t.URL_ONE_MEDIA??t.VITE_URL_ONE_MEDIA??s.URL_ONE_MEDIA??"").trim()}function I3(t){const s=String(t??"").trim();return s?/^https?:\/\//i.test(s)?s:`https://${s}`:"#"}function M3(t){const s=String(t??"").replace(/\D/g,"");return s||null}function Sl(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function R3(t){const s=[[t.addressStreet,t.addressNumber].filter(Boolean).join(", "),t.addressDistrict,[t.addressCity,t.addressState].filter(Boolean).join(" - ")].filter(Boolean).join(" | "),n=[t.basePriceWeek!=null?`Semanal: ${Sl(t.basePriceWeek)}`:null,t.basePriceMonth!=null?`Mensal: ${Sl(t.basePriceMonth)}`:null,t.basePriceDay!=null?`Diria: ${Sl(t.basePriceDay)}`:null].filter(Boolean).join(" | "),r=t.availability??"Disponvel",o=t.unitsCount!=null?`Faces/Telas: ${t.unitsCount} (Livres: ${t.availableUnitsCount??0})`:null,c=t.dailyImpressions?`Impacto/dia: ${t.dailyImpressions}`:null,u=t.latitude&&t.longitude?`Mapa: https://www.google.com/maps?q=${t.latitude},${t.longitude}`:null;return[` ${t.name} (${t.type})`,s?`  - Endereo: ${s}`:null,t.subcategory?`  - Categoria: ${t.subcategory}`:null,t.environment?`  - Ambiente: ${t.environment}`:null,`  - Status: ${r}`,o?`  - ${o}`:null,c?`  - ${c}`:null,n?`  - ${n}`:null,u?`  - ${u}`:null].filter(Boolean).join(`
`)}function O3(t,s){const n=`https://wa.me/${encodeURIComponent(t)}?text=${encodeURIComponent(s)}`;window.open(n,"_blank","noopener,noreferrer")}function L3({lat:t,lng:s}){const n=V0();return m.useEffect(()=>{!Number.isFinite(t)||!Number.isFinite(s)||n.setView([t,s],Math.max(n.getZoom(),14),{animate:!0})},[t,s,n]),null}function F3(){const t=V0();return m.useEffect(()=>{const s=window.setTimeout(()=>{t.invalidateSize()},0);return()=>window.clearTimeout(s)},[t]),m.useEffect(()=>{const s=()=>t.invalidateSize();return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[t]),null}function K2({mode:t="internal",token:s}){const[n,r]=m.useState(""),[o,c]=m.useState("all"),[u,h]=m.useState("all"),[f,v]=m.useState("all"),[x,g]=m.useState("all"),[N,w]=m.useState(""),[j,C]=m.useState(!1),[k,E]=m.useState(""),[S,P]=m.useState(""),[D,I]=m.useState(""),[O,F]=m.useState(!1),[X,Q]=m.useState([]),[V,$]=m.useState(!1),[R,z]=m.useState(null),[J,ue]=m.useState(null),[se,fe]=m.useState(!1),[H,re]=m.useState(null);m.useEffect(()=>{const me=new URLSearchParams(window.location.search),Oe=(me.get("q")||"").trim(),Ke=(me.get("type")||"").trim(),lt=(me.get("city")||"").trim(),Tt=(me.get("state")||"").trim(),ps=(me.get("status")||"").trim(),Ts=(me.get("ownerCompanyId")||"").trim();Oe&&r(Oe),(Ke===Ft.OOH||Ke===Ft.DOOH)&&c(Ke),lt&&h(lt),Tt&&v(Tt),(ps==="Disponvel"||ps==="Parcial"||ps==="Ocupado")&&g(ps),Ts&&w(Ts)},[]),m.useEffect(()=>{const me=new URLSearchParams(window.location.search);N?me.set("ownerCompanyId",N):me.delete("ownerCompanyId");const Oe=me.toString(),Ke=Oe?`${window.location.pathname}?${Oe}`:window.location.pathname;window.history.replaceState(null,"",Ke)},[N]);const G=m.useMemo(()=>J?.points??[],[J?.points]),W=J?.company??null,ne=m.useMemo(()=>J?.ownerCompanies??[],[J?.ownerCompanies]),K=async()=>{try{if(fe(!0),re(null),t==="public"){const Ke=(s||"").trim();if(!Ke){re("Link invlido: token ausente."),ue(null);return}const lt=await Dn.get("/public/media-kit",{params:{token:Ke,ownerCompanyId:N||void 0}});ue(lt.data);const Tt=lt.data.selectedOwnerCompanyId??"";Tt&&Tt!==N&&w(Tt);return}const me=await Te.get("/media-kit",{params:{ownerCompanyId:N||void 0}});ue(me.data);const Oe=me.data.selectedOwnerCompanyId??"";Oe&&Oe!==N&&w(Oe)}catch(me){const Oe=me?.response?.status===401?"Voc no tem permisso para acessar este Mdia Kit.":"No foi possvel carregar o Mdia Kit.";re(Oe),ue(null)}finally{fe(!1)}};m.useEffect(()=>{K()},[t,s,N]);const ee=m.useMemo(()=>{const me=new Set(G.map(Oe=>Oe.addressCity).filter(Boolean));return Array.from(me).sort()},[G]),U=m.useMemo(()=>{const me=new Set(G.map(Oe=>Oe.addressState).filter(Boolean));return Array.from(me).sort()},[G]);m.useEffect(()=>{u!=="all"&&ee.length>0&&!ee.includes(u)&&h("all")},[ee]),m.useEffect(()=>{f!=="all"&&U.length>0&&!U.includes(f)&&v("all")},[U]);const le=m.useMemo(()=>{let me=[...G];if(o!=="all"&&(me=me.filter(Oe=>Oe.type===o)),u!=="all"&&(me=me.filter(Oe=>Oe.addressCity===u)),f!=="all"&&(me=me.filter(Oe=>Oe.addressState===f)),x!=="all"&&(me=me.filter(Oe=>{const Ke=Oe.availability??"Disponvel";return x==="Disponvel"?Ke==="Disponvel"||Ke==="Parcial":Ke===x})),n.trim()){const Oe=n.toLowerCase();me=me.filter(Ke=>Ke.name.toLowerCase().includes(Oe)||Ke.addressCity?.toLowerCase().includes(Oe)||Ke.addressState?.toLowerCase().includes(Oe)||Ke.addressStreet?.toLowerCase().includes(Oe)||Ke.addressDistrict?.toLowerCase().includes(Oe))}return me},[G,o,u,f,x,n]),Y=me=>{if(!me.latitude||!me.longitude)return null;const Oe=Number(me.latitude),Ke=Number(me.longitude);if(!Number.isFinite(Oe)||!Number.isFinite(Ke))return null;const lt=16,Tt="600x300",ps=`${Oe},${Ke}`,Ts=`${Oe},${Ke},red-pushpin`;return`https://staticmap.openstreetmap.de/staticmap.php?center=${encodeURIComponent(ps)}&zoom=${lt}&size=${Tt}&markers=${encodeURIComponent(Ts)}`},ae=me=>{if(!me.latitude||!me.longitude)return null;const Oe=Number(me.latitude),Ke=Number(me.longitude);if(!Number.isFinite(Oe)||!Number.isFinite(Ke))return null;const lt=.0045,Tt=Ke-lt,ps=Ke+lt,Ts=Oe+lt,ws=Oe-lt,rs=`${Tt},${ws},${ps},${Ts}`;return`https://www.openstreetmap.org/export/embed.html?bbox=${encodeURIComponent(rs)}&layer=mapnik&marker=${encodeURIComponent(`${Oe},${Ke}`)}`};function Ie({point:me}){const Oe=Y(me),Ke=ae(me),[lt,Tt]=m.useState(!1);return!Oe||!Ke?e.jsx("div",{className:"px-3 py-3 text-xs text-gray-500",children:"Sem coordenadas para preview do mapa."}):lt?e.jsx("iframe",{title:`Mapa de ${me.name}`,src:Ke,className:"w-full h-full",loading:"lazy",referrerPolicy:"no-referrer",style:{border:0}}):e.jsx("img",{src:Oe,alt:`Mapa de ${me.name}`,className:"w-full h-full object-cover",loading:"lazy",referrerPolicy:"no-referrer",onError:()=>Tt(!0)})}const $e=me=>{try{const Oe=document.createElement("textarea");Oe.value=me,Oe.style.position="fixed",Oe.style.left="-999999px",Oe.style.top="-999999px",document.body.appendChild(Oe),Oe.focus(),Oe.select();const Ke=document.execCommand("copy");return document.body.removeChild(Oe),Ke}catch{return!1}},Ge=me=>{try{const Oe=new URL(me),Ke=Oe.searchParams,lt=n.trim();return lt?Ke.set("q",lt):Ke.delete("q"),o!=="all"?Ke.set("type",String(o)):Ke.delete("type"),u!=="all"?Ke.set("city",u):Ke.delete("city"),f!=="all"?Ke.set("state",f):Ke.delete("state"),x!=="all"?Ke.set("status",String(x)):Ke.delete("status"),ze?Ke.set("ownerCompanyId",ze):Ke.delete("ownerCompanyId"),Oe.toString()}catch{return me}},Xe=async()=>{if(k)return k;try{const me=await Te.get("/media-kit/share-link"),Oe=`${window.location.origin}/mk?token=${encodeURIComponent(me.data.token)}`;return E(Oe),Oe}catch{return ye.error("No foi possvel gerar o link pblico do Mdia Kit."),""}},Je=me=>{try{const Oe=new URL(me);return Oe.pathname="/menu",Oe.toString()}catch{return`${window.location.origin}/menu`}},tt=async()=>{C(!0);const me=await Xe();me&&(P(Ge(me)),I(Je(me)))},ut=async()=>{const me=await Xe();if(!me)return;const Oe=Ge(me);P(Oe),Oe&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(Oe).then(()=>{ye.success("Link do Mdia Kit copiado para a rea de transferncia!"),C(!1)}).catch(()=>{$e(Oe)?(ye.success("Link do Mdia Kit copiado para a rea de transferncia!"),C(!1)):ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")}):$e(Oe)?(ye.success("Link do Mdia Kit copiado para a rea de transferncia!"),C(!1)):ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)"))},wt=async()=>{const me=await Xe();if(!me)return;const Oe=Je(me);if(I(Oe),!Oe)return;const Ke=()=>{ye.success("Link do Cardpio (prottipo) copiado para a rea de transferncia!"),C(!1)};navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(Oe).then(Ke).catch(()=>{$e(Oe)?Ke():ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")}):$e(Oe)?Ke():ye.info("Selecione e copie o link manualmente (Ctrl+C ou Cmd+C)")},mt=me=>{z(me),$(!0)},kt=me=>{const Oe=M3(He?.phone);if(!Oe){ye.error("Nmero de WhatsApp da empresa no cadastrado.");return}if(!me.length){ye.info("Selecione pelo menos um ponto.");return}const lt=[`Ol! Gostaria de solicitar uma proposta${He?.name?` (${He.name})`:""}.`,"","Pontos selecionados:",...me.map(Tt=>R3(Tt))].join(`
`);O3(Oe,lt)},zt=()=>{Q([]),F(!0)},te=m.useMemo(()=>{if(!X.length)return[];const me=new Map(G.map(Oe=>[Oe.id,Oe]));return X.map(Oe=>me.get(Oe)).filter(Boolean)},[X,G]),xe=m.useMemo(()=>le.filter(me=>Number.isFinite(Number(me.latitude))&&Number.isFinite(Number(me.longitude))),[le]),pe=m.useMemo(()=>{const me=xe[0],Oe=me?.latitude!=null?Number(me.latitude):-23.5505,Ke=me?.longitude!=null?Number(me.longitude):-46.6333;return{lat:Oe,lng:Ke}},[xe]),[Ue,ce]=m.useState(null),ve=T3(),ze=m.useMemo(()=>N||J?.selectedOwnerCompanyId||ne[0]?.id||"",[N,J?.selectedOwnerCompanyId,ne]),He=m.useMemo(()=>{const me=ne.find(Oe=>Oe.id===ze);return me?{id:me.id,name:me.name,logoUrl:me.logoUrl??null,primaryColor:null,email:me.email??null,phone:me.phone??null,site:me.site??null,addressCity:me.addressCity??null,addressState:me.addressState??null}:W},[ne,ze,W]),pt=He?.addressCity||He?.addressState?`${He?.addressCity??""}${He?.addressState?`, ${He.addressState}`:""}`:"";return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsxs("div",{className:"relative bg-cover",style:{backgroundImage:`url(${D3})`,backgroundPosition:"center -420px"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-8 md:px-10 py-20 md:py-28 min-h-[504px] md:min-h-[662px]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-6",children:[e.jsx("img",{src:k3,alt:"OneMedia",className:"h-8 md:h-10"}),e.jsx("div",{className:"flex items-center gap-2",children:t==="internal"&&e.jsxs(Z,{variant:"secondary",className:"gap-2",onClick:tt,children:[e.jsx(vw,{className:"w-4 h-4"}),"Compartilhar"]})})]}),e.jsxs("div",{className:"mt-14 md:mt-20 max-w-2xl",children:[e.jsx("h1",{className:"text-white text-3xl md:text-4xl font-semibold",children:"Mdia Kit Digital"}),He?.name&&e.jsxs("p",{className:"text-white/80 mt-2",children:[He.name,pt?`  ${pt}`:""]}),e.jsxs(Z,{className:"mt-6 gap-2",onClick:zt,children:[e.jsx(El,{className:"w-4 h-4"}),"Solicitar Proposta"]})]})]})]}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:flex-wrap gap-3",children:[e.jsxs("div",{className:"flex-1 relative min-w-[220px]",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ne,{placeholder:"Buscar por nome, cidade ou endereo...",className:"pl-10",value:n,onChange:me=>r(me.target.value)})]}),e.jsxs(_t,{value:o,onValueChange:me=>c(me),children:[e.jsx(Pt,{className:"w-full lg:w-44",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos os tipos"}),e.jsx(De,{value:Ft.OOH,children:"OOH"}),e.jsx(De,{value:Ft.DOOH,children:"DOOH"})]})]}),e.jsxs(_t,{value:u,onValueChange:me=>h(me),children:[e.jsx(Pt,{className:"w-full lg:w-44",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todas as cidades"}),ee.map(me=>e.jsx(De,{value:me,children:me},me))]})]}),e.jsxs(_t,{value:f,onValueChange:me=>v(me),children:[e.jsx(Pt,{className:"w-full lg:w-32",children:e.jsx(At,{placeholder:"UF"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todas UFs"}),U.map(me=>e.jsx(De,{value:me,children:me},me))]})]}),e.jsxs(_t,{value:x,onValueChange:me=>g(me),children:[e.jsx(Pt,{className:"w-full lg:w-40",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos"}),e.jsx(De,{value:"Disponvel",children:"Disponvel"}),e.jsx(De,{value:"Parcial",children:"Parcial"}),e.jsx(De,{value:"Ocupado",children:"Ocupado"})]})]}),ne.length>1&&e.jsxs(_t,{value:ze,onValueChange:me=>{w(me),ce(null)},children:[e.jsx(Pt,{className:"w-full lg:w-64",children:e.jsx(At,{placeholder:"Empresa responsvel"})}),e.jsx(Et,{children:ne.map(me=>e.jsxs(De,{value:me.id,children:[me.name,me.isPrimary?" (principal)":""]},me.id))})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6 w-full flex-1",children:se?e.jsx(Re,{children:e.jsx(Le,{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Carregando Mdia Kit"})})}):H?e.jsx(Re,{children:e.jsxs(Le,{className:"py-12 text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:H}),e.jsx(Z,{variant:"outline",onClick:K,children:"Tentar novamente"})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:le.length===0?e.jsx(Re,{children:e.jsx(Le,{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum ponto de mdia encontrado com os filtros selecionados."})})}):e.jsx("div",{className:"space-y-4",children:le.map(me=>{const Oe=me.unitsCount??me.units?.length??0,Ke=me.occupiedUnitsCount??0,lt=me.availableUnitsCount??Math.max(Oe-Ke,0),Tt=me.availability??(lt>0?"Disponvel":"Ocupado");return e.jsx(Re,{className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0 bg-gray-100 rounded-xl overflow-hidden",style:{width:180,height:200,minWidth:180},children:[e.jsx(Mo,{src:me.mainImageUrl||"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800",alt:me.name,className:"w-full h-full object-cover"}),e.jsx(st,{className:"absolute top-1 left-1 bg-indigo-500 text-[10px] px-2 py-0.5",children:me.type}),e.jsx(st,{className:`absolute top-1 right-1 text-[10px] px-2 py-0.5 ${Tt==="Disponvel"?"bg-green-500":Tt==="Parcial"?"bg-amber-500":"bg-orange-500"}`,children:Tt})]}),e.jsxs("div",{className:"flex-1 min-w-0 grid grid-cols-1 sm:grid-cols-[1fr_1.2fr_auto] gap-4 items-start",children:[e.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[e.jsxs("div",{children:["Faces/Telas: ",Oe]}),e.jsxs("div",{children:["Livres: ",lt]}),e.jsxs("div",{children:["Impacto/dia:"," ",me.dailyImpressions?`${Math.floor(Number(me.dailyImpressions)/1e3)}k`:""]})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-gray-900 font-semibold truncate",children:me.name}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-start gap-2",children:[e.jsx(ra,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[[me.addressStreet,me.addressNumber].filter(Boolean).join(", ")||"",me.addressDistrict?`  ${me.addressDistrict}`:"",me.addressCity||me.addressState?`  ${[me.addressCity,me.addressState].filter(Boolean).join(" / ")}`:""]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[me.subcategory?e.jsxs("div",{children:["Categoria: ",me.subcategory]}):null,me.environment?e.jsxs("div",{children:["Ambiente: ",me.environment]}):null]})]}),e.jsxs("div",{className:"w-full sm:w-52 flex-shrink-0 flex flex-col sm:items-end gap-2 px-4",children:[e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("div",{className:"text-indigo-600 font-semibold whitespace-nowrap",children:me.basePriceMonth!=null?`${Sl(me.basePriceMonth)}/ms`:""}),e.jsx("div",{className:"text-indigo-600 font-semibold whitespace-nowrap",children:me.basePriceWeek!=null?`${Sl(me.basePriceWeek)}/semana`:""})]}),e.jsxs(Z,{className:"gap-2 self-end",onClick:()=>{ce(me.id),mt(me)},children:[e.jsx(Tr,{className:"w-4 h-4"}),"Ver Detalhes"]})]})]})]})},me.id)})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Re,{className:"overflow-hidden lg:sticky lg:top-6",children:e.jsx(Le,{className:"p-0",children:e.jsx("div",{className:"h-[420px] sm:h-[520px]",style:{height:"clamp(420px, 60vh, 520px)",minHeight:420},children:xe.length===0?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-white text-sm text-gray-500",children:"Nenhum ponto com coordenadas para exibir no mapa."}):e.jsxs(Z2,{center:[pe.lat,pe.lng],zoom:12,scrollWheelZoom:!0,className:"w-full h-full",style:{height:"100%",width:"100%"},children:[e.jsx(G2,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(F3,{}),Ue&&(()=>{const me=xe.find(Oe=>Oe.id===Ue);return!me||me.latitude==null||me.longitude==null?null:e.jsx(L3,{lat:Number(me.latitude),lng:Number(me.longitude)})})(),xe.map(me=>{const Oe=Number(me.latitude),Ke=Number(me.longitude);return!Number.isFinite(Oe)||!Number.isFinite(Ke)?null:e.jsx(Tg,{position:[Oe,Ke],eventHandlers:{click:()=>{ce(me.id),mt(me)}},children:e.jsx(A3,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:me.name}),e.jsx("div",{className:"text-xs text-gray-600",children:[me.addressCity,me.addressState].filter(Boolean).join(" / ")||""}),e.jsx(Z,{size:"sm",className:"w-full",onClick:()=>mt(me),children:"Ver Detalhes"})]})})},me.id)})]},`mk-map-${ze}-${xe.length}`)})})})})]})}),e.jsx("footer",{className:"text-white mt-10 w-full",style:{backgroundImage:"linear-gradient(180deg, #0b1220 0%, #0f172a 60%, #020617 100%)",backgroundColor:"#0b1220",color:"#ffffff"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-14 pb-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Empresa responsvel pelos pontos"}),He?e.jsxs("div",{className:"inline-flex items-center gap-3 rounded-md bg-white/10 p-2",children:[He.logoUrl?e.jsx(Mo,{src:He.logoUrl,alt:He.name,className:"h-10 w-10 object-contain"}):e.jsx("div",{className:"h-10 w-10 rounded-md bg-white/10 flex items-center justify-center",children:e.jsx(Db,{className:"w-5 h-5 text-white/80"})}),e.jsx("span",{className:"font-semibold text-white",children:He.name})]}):e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-white/10 px-3 py-2 text-sm text-white/90",children:[e.jsx(Db,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Contato & Localizao"}),e.jsxs("div",{className:"space-y-2 text-sm text-white/90",children:[(He?.addressCity||He?.addressState)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Local"}),e.jsx("div",{children:[He?.addressCity,He?.addressState].filter(Boolean).join(" - ")})]}),He?.email&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Email"}),e.jsx("div",{children:He.email})]}),He?.phone&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Telefone"}),e.jsx("div",{children:He.phone})]}),He?.site&&e.jsxs("div",{children:[e.jsx("div",{className:"text-white/70 text-xs",children:"Site"}),e.jsx("a",{href:I3(He.site),target:"_blank",rel:"noreferrer noopener",className:"text-white/90 hover:text-white hover:underline",children:He.site})]})]})]}),e.jsxs("div",{className:"md:text-right",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Redes Sociais"}),e.jsxs("div",{className:"flex md:justify-end gap-3",children:[e.jsx("a",{href:ve||"#",target:ve?"_blank":void 0,rel:ve?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(pw,{className:"w-10 h-10"})}),e.jsx("a",{href:ve||"#",target:ve?"_blank":void 0,rel:ve?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(mw,{className:"w-10 h-10"})}),e.jsx("a",{href:ve||"#",target:ve?"_blank":void 0,rel:ve?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(hk,{className:"w-10 h-10"})}),e.jsx("a",{href:ve||"#",target:ve?"_blank":void 0,rel:ve?"noreferrer noopener":void 0,className:"inline-flex h-10 w-10 items-center justify-center rounded-md bg-white/10 hover:bg-white/15",children:e.jsx(q4,{className:"w-10 h-10"})})]})]})]}),e.jsxs("div",{className:"border-t border-white/10 mt-8 pt-4 text-center text-xs text-white/60",children:[" 2026"," ",e.jsx("a",{href:ve||"#",target:ve?"_blank":void 0,rel:ve?"noreferrer noopener":void 0,className:"text-white/70 hover:text-white hover:underline",children:"OneMedia"}),". Todos os direitos reservados. |"," ",e.jsx("a",{href:"/privacidade",className:"hover:underline",children:"Poltica de Privacidade"})," |"," ",e.jsx("a",{href:"/termos",className:"hover:underline",children:"Termos de Uso"})]})]})}),e.jsx(Ps,{open:O,onOpenChange:F,children:e.jsxs(Es,{className:"max-w-2xl",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:"Solicitar Proposta"}),e.jsxs(kr,{children:["Selecione um ou mais pontos e clique em ",e.jsx("b",{children:"Solicitar"})," para enviar uma mensagem no WhatsApp da empresa."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[X.length," selecionado(s)  ",le.length," ponto(s) na lista"]}),e.jsx(Z,{variant:"outline",onClick:()=>{X.length===le.length?Q([]):Q(le.map(me=>me.id))},children:X.length===le.length?"Desmarcar todos":"Selecionar todos"})]}),e.jsx("div",{className:"rounded-md border border-gray-200",children:e.jsx(kl,{className:"h-[360px]",children:e.jsx("div",{className:"p-3 space-y-2",children:le.map(me=>{const Oe=X.includes(me.id);return e.jsxs("button",{type:"button",onClick:()=>{Q(Ke=>Ke.includes(me.id)?Ke.filter(lt=>lt!==me.id):[...Ke,me.id])},className:"w-full text-left rounded-md hover:bg-gray-50 px-2 py-2 flex items-start gap-3",children:[e.jsx(ri,{checked:Oe,className:"mt-1"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:me.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[me.addressCity,me.addressState].filter(Boolean).join(" / ")||""})]})]},me.id)})})})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(Z,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),e.jsxs(Z,{className:"gap-2",onClick:()=>{kt(te),F(!1)},disabled:X.length===0,children:[e.jsx(El,{className:"w-4 h-4"}),"Solicitar"]})]})]})]})}),e.jsx(Ps,{open:V,onOpenChange:me=>{$(me),me||z(null)},children:e.jsxs(Es,{className:"max-w-4xl",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:"Detalhes do ponto"}),e.jsx(kr,{children:"Informaes completas do ponto e localizao no mapa."})]}),R?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200 bg-gray-50",children:e.jsx("div",{className:"h-56",children:e.jsx(Mo,{src:R.mainImageUrl||"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800",alt:R.name,className:"w-full h-full object-cover"})})}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200 bg-gray-50",children:e.jsx("div",{className:"h-56",children:e.jsx(Ie,{point:R})})})]}),e.jsxs("div",{className:"lg:col-span-2 flex flex-col",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"bg-indigo-500",children:R.type}),e.jsx(st,{className:(R.availability??"Disponvel")==="Disponvel"?"bg-green-500":(R.availability??"Disponvel")==="Parcial"?"bg-amber-500":"bg-orange-500",children:R.availability??"Disponvel"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:R.name}),e.jsxs("div",{className:"text-sm text-gray-700",children:[[R.addressStreet,R.addressNumber].filter(Boolean).join(", "),R.addressDistrict?`  ${R.addressDistrict}`:"",(R.addressCity||R.addressState)&&e.jsxs(e.Fragment,{children:["  ",[R.addressCity,R.addressState].filter(Boolean).join(" / ")]})]}),R.description&&e.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:R.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Faces/Telas"}),e.jsx("div",{className:"text-gray-900",children:R.unitsCount??""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Livres"}),e.jsx("div",{className:"text-gray-900",children:R.availableUnitsCount??""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Impacto/dia"}),e.jsx("div",{className:"text-gray-900",children:R.dailyImpressions??""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Categoria"}),e.jsx("div",{className:"text-gray-900",children:R.subcategory??""})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Semanal"}),e.jsx("div",{className:"text-gray-900",children:Sl(R.basePriceWeek)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensal"}),e.jsx("div",{className:"text-gray-900",children:Sl(R.basePriceMonth)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[e.jsxs(Z,{className:"gap-2",onClick:()=>{kt([R])},children:[e.jsx(El,{className:"w-4 h-4"}),"Solicitar proposta"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>{R.latitude&&R.longitude?window.open(`https://www.google.com/maps?q=${R.latitude},${R.longitude}`,"_blank"):ye.info("Coordenadas GPS no cadastradas para este ponto de mdia.")},children:[e.jsx(ra,{className:"w-4 h-4"}),"Abrir no mapa"]})]})]})]}):e.jsx("div",{className:"py-6 text-sm text-gray-600",children:"Nenhum ponto selecionado."})]})}),t==="internal"&&e.jsx(Ps,{open:j,onOpenChange:C,children:e.jsxs(Es,{children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:"Compartilhar Mdia Kit"}),e.jsx(kr,{children:"Compartilhe o link pblico do Mdia Kit com seus clientes. Se voc tiver filtros ativos, o link j abre com esses filtros aplicados (mas quem receber pode alter-los)."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Link do Mdia Kit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{readOnly:!0,value:S||"Gerando link...",className:"flex-1"}),e.jsxs(Z,{onClick:ut,className:"gap-2",disabled:!S,children:[e.jsx($n,{className:"w-4 h-4"}),"Copiar"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Link do Cardpio (prottipo)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{readOnly:!0,value:D||"Gerando link...",className:"flex-1"}),e.jsxs(Z,{onClick:wt,className:"gap-2",disabled:!D,children:[e.jsx($n,{className:"w-4 h-4"}),"Copiar"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Abre o fluxo do Cardpio (UF  Cidade  Pontos  Carrinho  Enviar proposta)."})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Qualquer pessoa com o link pode visualizar seu portflio. Se o link incluir filtros, eles sero aplicados inicialmente  e depois podem ser alterados normalmente."})]})]})})]})}function $3(){const t=new URLSearchParams(window.location.search),s=t.get("token")||t.get("t")||void 0;return e.jsx(K2,{mode:"public",token:s||void 0})}const Q2=m.createContext(()=>{}),Jt=()=>m.useContext(Q2),z3="/figma-assets/4e6db870c03dccede5d3c65f6e7438ecda23a8e5.png",B3="/figma-assets/outdoor.png";function gj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function U3(){const t=Jt(),s=m.useMemo(()=>{const r=new URLSearchParams(window.location.search);return r.get("token")||r.get("t")||""},[]),n=`/menu/uf${gj({token:s})}`;return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:B3,alt:"",className:"h-full w-full object-cover opacity-25",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/80 via-white/70 to-gray-50"})]}),e.jsxs("div",{className:"relative mx-auto max-w-5xl px-4 pt-10 pb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:z3,alt:"OneMedia",className:"h-9 w-9"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Cardpio de Outdoor"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Prottipo (sem login)"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Escolha sua praa e monte sua seleo"}),e.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600 max-w-2xl",children:"Navegue por UF  Cidade e avance no fluxo do Cardpio at a solicitao de proposta."})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsxs(Z,{className:"gap-2",onClick:()=>t(n),children:[e.jsx(Yg,{className:"h-4 w-4"}),"Ver Cardpio",e.jsx(or,{className:"h-4 w-4"})]}),e.jsx(Z,{variant:"outline",onClick:()=>t(`/mk${gj({token:s})}`),children:"Voltar para o Mdia Kit"})]}),!s&&e.jsx(Re,{className:"mt-6 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"Ateno"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:"Este prottipo funciona melhor quando aberto a partir do link compartilhado (com token)."})]})})]})]})})}const vj=new Map,Ox=new Map;function V3(t,s){return`${t}::${s??""}`}const H3=60*1e3;async function q3(t){const s=String(t.token??"").trim(),n=t.ownerCompanyId??null;if(!s)throw new Error("Token ausente. Abra o Cardpio a partir do link compartilhado.");const r=V3(s,n),o=Date.now(),c=vj.get(r);if(!t.force&&c&&o-c.fetchedAt<H3)return c.data;const u=Ox.get(r);if(u)return u;const h=(async()=>{try{const f=await Dn.get("/public/media-kit",{params:{token:s,ownerCompanyId:n||void 0}});return vj.set(r,{data:f.data,fetchedAt:Date.now()}),f.data}finally{Ox.delete(r)}})();return Ox.set(r,h),h}function Ig(t){const s=t.availability;if(s==="Disponvel"||s==="Parcial"||s==="Ocupado")return s;const n=t.unitsCount??t.units?.length??0,r=t.occupiedUnitsCount??0,o=t.availableUnitsCount??Math.max(n-r,0);return n<=0?"Disponvel":o<=0?"Ocupado":r>0?"Parcial":"Disponvel"}function Mg(t){const s=String(t??"").trim().toUpperCase();return s===Ft.OOH?Ft.OOH:s===Ft.DOOH?Ft.DOOH:null}function W3(t){return!!(t?.code==="ERR_CANCELED"||t?.name==="CanceledError"||t?.__CANCEL__===!0||typeof t?.message=="string"&&/cancel/i.test(t.message))}function cd(t){const s=m.useMemo(()=>String(t.token??"").trim(),[t.token]),n=t.ownerCompanyId??null,[r,o]=m.useState(null),[c,u]=m.useState(!1),[h,f]=m.useState(null),[v,x]=m.useState(0),g=m.useCallback(()=>x(N=>N+1),[]);return m.useEffect(()=>{let N=!0;return(async()=>{if(!s){o(null),f("Token ausente. Abra o Cardpio a partir do link compartilhado.");return}try{u(!0),f(null);const j=await q3({token:s,ownerCompanyId:n,force:v>0});if(!N)return;o(j)}catch(j){if(!N)return;const k=j?.response?.status===401?"Voc no tem permisso para acessar este Cardpio.":W3(j)?"Requisio cancelada.":j?.message||"No foi possvel carregar o Cardpio.";o(null),f(k)}finally{if(!N)return;u(!1)}})(),()=>{N=!1}},[s,n,v]),{data:r,loading:c,error:h,reload:g}}const Z3={AC:{uf:"AC",name:"Acre"},AL:{uf:"AL",name:"Alagoas"},AP:{uf:"AP",name:"Amap"},AM:{uf:"AM",name:"Amazonas"},BA:{uf:"BA",name:"Bahia"},CE:{uf:"CE",name:"Cear"},DF:{uf:"DF",name:"Distrito Federal"},ES:{uf:"ES",name:"Esprito Santo"},GO:{uf:"GO",name:"Gois"},MA:{uf:"MA",name:"Maranho"},MT:{uf:"MT",name:"Mato Grosso"},MS:{uf:"MS",name:"Mato Grosso do Sul"},MG:{uf:"MG",name:"Minas Gerais"},PA:{uf:"PA",name:"Par"},PB:{uf:"PB",name:"Paraba"},PR:{uf:"PR",name:"Paran"},PE:{uf:"PE",name:"Pernambuco"},PI:{uf:"PI",name:"Piau"},RJ:{uf:"RJ",name:"Rio de Janeiro"},RN:{uf:"RN",name:"Rio Grande do Norte"},RS:{uf:"RS",name:"Rio Grande do Sul"},RO:{uf:"RO",name:"Rondnia"},RR:{uf:"RR",name:"Roraima"},SC:{uf:"SC",name:"Santa Catarina"},SP:{uf:"SP",name:"So Paulo"},SE:{uf:"SE",name:"Sergipe"},TO:{uf:"TO",name:"Tocantins"}};function G3(t){const s=String(t??"").trim().toUpperCase();return Z3[s]?.name??s}function K3(){const t=new URLSearchParams(window.location.search);return t.get("token")||t.get("t")||""}function yj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Q3(){const t=Jt(),[s,n]=m.useState(""),r=m.useMemo(()=>K3(),[]),{data:o,loading:c,error:u,reload:h}=cd({token:r}),f=m.useMemo(()=>{const v=o?.points??[],x=new Map;for(const w of v){const j=String(w.addressState??"").trim().toUpperCase(),C=String(w.addressCity??"").trim();if(!j)continue;const k=x.get(j)??{points:0,cities:new Set};k.points+=1,C&&k.cities.add(C),x.set(j,k)}const g=Array.from(x.entries()).map(([w,j])=>({uf:w,name:G3(w),pointsCount:j.points,citiesCount:j.cities.size})).sort((w,j)=>w.uf.localeCompare(j.uf,"pt-BR")),N=s.trim().toLowerCase();return N?g.filter(w=>w.uf.toLowerCase().includes(N)||w.name.toLowerCase().includes(N)):g},[o?.points,s]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"UF  Cidade"}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(`/menu${yj({token:r})}`),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Selecione o Estado (UF)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"As UFs abaixo so derivadas do inventrio real do Mdia Kit pblico."})]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:h,disabled:c,children:[e.jsx(sd,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Ne,{value:s,onChange:v=>n(v.target.value),placeholder:"Buscar UF ou nome do estado..."})}),u&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:u})]})}),e.jsx("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:c&&f.length===0?Array.from({length:6}).map((v,x)=>e.jsx(Re,{className:"animate-pulse",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"h-4 w-16 rounded bg-gray-200"}),e.jsx("div",{className:"mt-2 h-3 w-32 rounded bg-gray-200"}),e.jsx("div",{className:"mt-3 h-8 w-full rounded bg-gray-200"})]})},x)):f.map(v=>e.jsx(Re,{className:"hover:shadow-sm transition-shadow",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(Kk,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v.uf}),e.jsx("div",{className:"text-xs text-gray-600",children:v.name}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[v.pointsCount," ponto(s)  ",v.citiesCount," cidade(s)"]})]}),e.jsxs(Z,{size:"sm",className:"gap-2",onClick:()=>t(`/menu/cidades${yj({token:r,uf:v.uf})}`),children:["Escolher",e.jsx(or,{className:"h-4 w-4"})]})]})})},v.uf))}),!c&&!u&&f.length===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"Nenhuma UF encontrada. Verifique se o token  vlido e se h pontos publicados no Mdia Kit."})]})})}function X3(){const t=new URLSearchParams(window.location.search);return{token:t.get("token")||t.get("t")||"",uf:String(t.get("uf")||"").trim().toUpperCase()}}function Lx(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Y3(){const t=Jt(),[s,n]=m.useState(""),{token:r,uf:o}=m.useMemo(()=>X3(),[]),{data:c,loading:u,error:h,reload:f}=cd({token:r}),v=m.useMemo(()=>{const x=c?.points??[],g=new Map;for(const j of x){const C=String(j.addressState??"").trim().toUpperCase();if(!o||C!==o)continue;const k=String(j.addressCity??"").trim();k&&g.set(k,(g.get(k)??0)+1)}const N=Array.from(g.entries()).map(([j,C])=>({city:j,pointsCount:C})).sort((j,C)=>j.city.localeCompare(C.city,"pt-BR")),w=s.trim().toLowerCase();return w?N.filter(j=>j.city.toLowerCase().includes(w)):N},[c?.points,o,s]);return o?e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"UF  Cidade"}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(`/menu/uf${Lx({token:r})}`),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Selecione a Cidade"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["UF selecionada: ",e.jsx("span",{className:"font-semibold",children:o})]})]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:f,disabled:u,children:[e.jsx(sd,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Ne,{value:s,onChange:x=>n(x.target.value),placeholder:"Buscar cidade..."})}),h&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:h})]})}),e.jsx("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:u&&v.length===0?Array.from({length:6}).map((x,g)=>e.jsx(Re,{className:"animate-pulse",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-gray-200"}),e.jsx("div",{className:"mt-2 h-3 w-20 rounded bg-gray-200"}),e.jsx("div",{className:"mt-3 h-8 w-full rounded bg-gray-200"})]})},g)):v.map(x=>e.jsx(Re,{className:"hover:shadow-sm transition-shadow",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(ed,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:x.city}),e.jsx("div",{className:"text-xs text-gray-600",children:o}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[x.pointsCount," ponto(s)"]})]}),e.jsxs(Z,{size:"sm",className:"gap-2",onClick:()=>t(`/menu/pontos${Lx({token:r,uf:o,city:x.city})}`),children:["Escolher",e.jsx(or,{className:"h-4 w-4"})]})]})})},x.city))}),!u&&!h&&v.length===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"Nenhuma cidade encontrada para esta UF."})]})}):e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-10",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("h1",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Selecione uma UF primeiro"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Para escolher uma cidade, volte e selecione um estado (UF)."}),e.jsx("div",{className:"mt-6",children:e.jsxs(Z,{onClick:()=>t(`/menu/uf${Lx({token:r})}`),className:"gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),"Ir para UFs"]})})]})})}const X2="menu_cart";function Dl(){return new Date().toISOString()}function J3(){try{const t=globalThis.crypto;if(t?.randomUUID)return t.randomUUID()}catch{}return`mc_${Math.random().toString(36).slice(2,10)}_${Date.now().toString(36)}`}function dd(t){const s=Math.max(0,Math.floor(Number(t?.years)||0)),n=Math.max(0,Math.floor(Number(t?.months)||0)),r=Math.max(0,Math.floor(Number(t?.days)||0));return{years:s,months:n,days:r}}function Fp(t){const s=dd(t),n=s.years*365+s.months*30+s.days;return Math.max(1,Math.min(365*100,Math.floor(n||0)))}function H0(t){const s=Math.max(1,Math.min(36500,Math.floor(Number(t)||30))),n=Math.floor(s/365),r=s%365,o=Math.floor(r/30),c=r%30;return{years:n,months:o,days:c}}function Xh(t){const s=dd(t),n=[];return s.years&&n.push(`${s.years} ${s.years===1?"ano":"anos"}`),s.months&&n.push(`${s.months} ${s.months===1?"ms":"meses"}`),(s.days||n.length===0)&&n.push(`${s.days||0} ${s.days===1?"dia":"dias"}`),n.join(", ")}function Y2(t){if(!t)return null;const s=String(t.id||"").trim(),n=String(t.pointId||"").trim();if(!s||!n)return null;const r=t.unitId===null||t.unitId===void 0?null:String(t.unitId),o=t.duration?dd(t.duration):H0(t.durationDays),c=Fp(o);return{id:s,pointId:n,unitId:r,duration:o,durationDays:c,addedAt:String(t.addedAt||Dl()),snapshot:t.snapshot||{}}}function Bl(){try{const t=localStorage.getItem(X2);if(!t)return{version:2,updatedAt:Dl(),items:[]};const s=JSON.parse(t),n=Array.isArray(s?.items)?s.items:Array.isArray(s)?s:[],r=[];for(const o of n){const c=Y2(o);c&&r.push(c)}return{version:2,updatedAt:String(s?.updatedAt||Dl()),items:r}}catch{return{version:2,updatedAt:Dl(),items:[]}}}function zu(t){const s=Array.isArray(t?.items)?t.items:[],n=[];for(const o of s){const c=Y2(o);c&&n.push(c)}const r={version:2,updatedAt:Dl(),items:n};localStorage.setItem(X2,JSON.stringify(r))}function Lc(){return Bl().items.length}function bj(t,s,n){return t.pointId===s&&String(t.unitId??"")===String(n??"")}function J2(t){const s=Bl(),n=t.unit??null,r=t.duration?dd(t.duration):H0(Number.isFinite(Number(t.durationDays))?Number(t.durationDays):30),o=Fp(r),c=t.point,u=String(c.name||"").trim()||"Ponto",h=[[String(c.addressStreet??"").trim(),String(c.addressNumber??"").trim()].filter(Boolean).join(", "),String(c.addressDistrict??"").trim()].filter(Boolean).join("  "),f={pointName:u,pointType:c.type,addressLine:h||void 0,city:String(c.addressCity??"").trim()||void 0,state:String(c.addressState??"").trim()||void 0,imageUrl:(n?.imageUrl??c.mainImageUrl)||void 0,unitLabel:n?.label?String(n.label):void 0,unitType:n?.unitType,priceMonth:n?.priceMonth??c.basePriceMonth??null,priceWeek:n?.priceWeek??c.basePriceWeek??null},v=c.id,x=n?.id??null,g=s.items.some(w=>bj(w,v,x)),N={id:g?s.items.find(w=>bj(w,v,x)).id:J3(),pointId:v,unitId:x,duration:r,durationDays:o,addedAt:Dl(),snapshot:f};return g?{added:!1,item:N}:(s.items=[...s.items,N],zu(s),{added:!0,item:N})}function eO(t){const s=Bl();s.items=s.items.filter(n=>n.id!==t),zu(s)}function Fx(t,s){const n=Bl(),r=dd(s),o=Fp(r);n.items=n.items.map(c=>c.id===t?{...c,duration:r,durationDays:o}:c),zu(n)}function tO(t){const s=Bl(),n=dd(t),r=Fp(n);s.items=s.items.map(o=>({...o,duration:n,durationDays:r})),zu(s)}function eC(){zu({updatedAt:Dl(),items:[]})}function ud(t){const s=String(t.addressStreet??"").trim(),n=String(t.addressNumber??"").trim(),r=String(t.addressDistrict??"").trim(),o=String(t.addressCity??"").trim(),c=String(t.addressState??"").trim();return[[s,n].filter(Boolean).join(", "),r,[o,c].filter(Boolean).join(" - ")].filter(Boolean).join("  ")}function nu(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function jj(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function gl(t){return String(t??"").trim()}function sO(){try{return Lc()}catch{return 0}}function nO(){const t=Jt(),s=m.useMemo(()=>sO(),[]),{token:n,uf:r,city:o}=m.useMemo(()=>{const S=new URLSearchParams(window.location.search);return{token:S.get("token")||S.get("t")||"",uf:String(S.get("uf")||"").trim().toUpperCase(),city:String(S.get("city")||"").trim()}},[]),{data:c,loading:u,error:h,reload:f}=cd({token:n}),[v,x]=m.useState(""),[g,N]=m.useState("all"),[w,j]=m.useState("all"),C=m.useMemo(()=>{let P=(c?.points??[]).filter(I=>{const O=gl(I.addressState).toUpperCase(),F=gl(I.addressCity);return!(r&&O!==r||o&&F!==o)});const D=v.trim().toLowerCase();return D&&(P=P.filter(I=>[I.name,I.subcategory,I.environment,I.addressStreet,I.addressDistrict,I.addressCity].filter(Boolean).join(" ").toLowerCase().includes(D))),g!=="all"&&(P=P.filter(I=>Mg(I.type)===g)),w!=="all"&&(P=P.filter(I=>Ig(I)===w)),P.sort((I,O)=>String(I.name).localeCompare(String(O.name),"pt-BR"))},[c?.points,r,o,v,g,w]),k=m.useMemo(()=>[r?`UF: ${r}`:null,o?`Cidade: ${o}`:null].filter(Boolean).join("  ")||"Selecione UF e cidade para ver os pontos.",[r,o]),E=S=>{if(!S?.id){ye.error("No foi possvel abrir os detalhes deste ponto.");return}t(`/menu/detalhe${nu({token:n,id:S.id,uf:r,city:o})}`)};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"UF  Cidade  Pontos"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s>0&&e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(`/menu/carrinho${nu({token:n,uf:r,city:o})}`),children:[e.jsx(Zc,{className:"h-4 w-4"}),"Ver carrinho (",s,")"]}),e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(`/menu/cidades${nu({token:n,uf:r})}`),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pontos disponveis"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:k})]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:f,disabled:u,children:[e.jsx(sd,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ne,{value:v,onChange:S=>x(S.target.value),placeholder:"Buscar por nome, bairro, rua, categoria..."})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(_t,{value:g,onValueChange:S=>{if(S==="all"){N("all");return}if(S===Ft.OOH||S===Ft.DOOH){N(S);return}N("all")},children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Tipo"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos"}),e.jsx(De,{value:Ft.OOH,children:"OOH"}),e.jsx(De,{value:Ft.DOOH,children:"DOOH"})]})]}),e.jsxs(_t,{value:w,onValueChange:S=>{if(S==="all"){j("all");return}if(S==="Disponvel"){j("Disponvel");return}if(S==="Parcial"){j("Parcial");return}if(S==="Ocupado"){j("Ocupado");return}j("all")},children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Status"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos"}),e.jsx(De,{value:"Disponvel",children:"Disponvel"}),e.jsx(De,{value:"Parcial",children:"Parcial"}),e.jsx(De,{value:"Ocupado",children:"Ocupado"})]})]})]})]}),h&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:h})]})}),e.jsx("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-2 gap-3",children:u&&C.length===0?Array.from({length:6}).map((S,P)=>e.jsx(Re,{className:"animate-pulse",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-24 w-32 rounded bg-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-40 rounded bg-gray-200"}),e.jsx("div",{className:"mt-2 h-3 w-56 rounded bg-gray-200"}),e.jsx("div",{className:"mt-4 h-3 w-32 rounded bg-gray-200"})]})]})})},P)):C.map(S=>{const P=Ig(S),D=Mg(S.type)??S.type,I=[[gl(S.addressStreet),gl(S.addressNumber)].filter(Boolean).join(", "),gl(S.addressDistrict),[gl(S.addressCity),gl(S.addressState)].filter(Boolean).join(" - ")].filter(Boolean).join("  "),O=S.unitsCount??S.units?.length??void 0,F=S.availableUnitsCount,X=S.dailyImpressions;return e.jsx(Re,{className:"hover:shadow-sm transition-shadow",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"sm:w-40",children:e.jsx("div",{className:"aspect-[4/3] w-full overflow-hidden rounded-xl bg-gray-100",children:e.jsx(Mo,{src:S.mainImageUrl||"",alt:S.name,className:"h-full w-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 truncate",children:S.name}),I&&e.jsx("div",{className:"mt-1 text-xs text-gray-600 line-clamp-2",children:I})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:D}),e.jsx(st,{className:P==="Disponvel"?"rounded-full bg-emerald-100 text-emerald-900 hover:bg-emerald-100":P==="Parcial"?"rounded-full bg-amber-100 text-amber-900 hover:bg-amber-100":"rounded-full bg-rose-100 text-rose-900 hover:bg-rose-100",children:P})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:jj(S.basePriceMonth)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:jj(S.basePriceWeek)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Faces/Telas:"})," ",e.jsx("span",{className:"font-semibold",children:O??""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Livres:"})," ",e.jsx("span",{className:"font-semibold",children:F??""})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Impacto/dia:"})," ",e.jsx("span",{className:"font-semibold",children:X??""})]})]}),e.jsx("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>E(S),children:[e.jsx(Tr,{className:"h-4 w-4"}),"Ver detalhes"]})})]})]})})},S.id)})}),!u&&!h&&C.length===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:"Nenhum ponto encontrado com os filtros atuais."}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsx(Z,{onClick:()=>t(`/menu/cidades${nu({token:n,uf:r})}`),variant:"outline",children:"Trocar cidade"}),e.jsx(Z,{onClick:()=>t(`/menu/uf${nu({token:n})}`),variant:"outline",children:"Trocar UF"})]})]})})}var aO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rO=aO.reduce((t,s)=>{const n=fp(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),iO="Separator",Nj="horizontal",oO=["horizontal","vertical"],tC=m.forwardRef((t,s)=>{const{decorative:n,orientation:r=Nj,...o}=t,c=lO(r)?r:Nj,h=n?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return e.jsx(rO.div,{"data-orientation":c,...h,...o,ref:s})});tC.displayName=iO;function lO(t){return oO.includes(t)}var cO=tC;function dn({className:t,orientation:s="horizontal",decorative:n=!0,...r}){return e.jsx(cO,{"data-slot":"separator-root",decorative:n,orientation:s,className:vt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}function $x(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function ch(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function wj(t){if(t==null)return null;if(typeof t=="number"&&Number.isFinite(t))return t;const s=String(t).trim();if(!s)return null;const n=s.replace(",","."),r=Number(n);return Number.isFinite(r)?r:null}function sC(t){const s=t,n=wj(s.latitude??s.lat??s.location?.lat),r=wj(s.longitude??s.lng??s.location?.lng??s.location?.lon);return n===null||r===null||n<-90||n>90||r<-180||r>180||ud(t)&&n==0&&r==0?null:{lat:n,lng:r}}function dO(t){const s=sC(t);if(s)return`https://www.google.com/maps?q=${encodeURIComponent(`${s.lat},${s.lng}`)}`;const n=ud(t);return n?`https://www.google.com/maps?q=${encodeURIComponent(n)}`:"https://www.google.com/maps"}function uO(t){const s=sC(t);if(s)return`https://www.google.com/maps?q=${encodeURIComponent(`${s.lat},${s.lng}`)}&z=15&output=embed`;const n=ud(t);return n?`https://www.google.com/maps?q=${encodeURIComponent(n)}&z=15&output=embed`:null}function mO(){const t=Jt(),{token:s,pointId:n,uf:r,city:o}=m.useMemo(()=>{const P=new URLSearchParams(window.location.search);return{token:P.get("token")||P.get("t")||"",pointId:P.get("id")||P.get("pointId")||"",uf:String(P.get("uf")||"").trim().toUpperCase(),city:String(P.get("city")||"").trim()}},[]),{data:c,loading:u,error:h}=cd({token:s}),f=m.useMemo(()=>(c?.points??[]).find(D=>String(D.id)===String(n))??null,[c?.points,n]),[v,x]=m.useState(()=>{try{return Lc()}catch{return 0}});m.useEffect(()=>{try{x(Lc())}catch{x(0)}const P=D=>{if(D.key==="menu_cart")try{x(Lc())}catch{x(0)}};return window.addEventListener("storage",P),()=>window.removeEventListener("storage",P)},[n]);const g=m.useMemo(()=>`/menu/pontos${$x({token:s,uf:r,city:o})}`,[s,r,o]),N=()=>{if(!f)return;const P=Array.isArray(f.units)?f.units.filter(O=>O?.isActive!==!1):[];if(P.length>1){t(`/menu/faces${$x({token:s,id:f.id,uf:r,city:o})}`);return}const D=P.length===1?P[0]:null,{added:I}=J2({point:f,unit:D,duration:{years:0,months:1,days:0}});if(I){ye.success("Adicionado ao carrinho",{description:f.name});try{x(Lc())}catch{}}else ye.info("Este item j est no seu carrinho",{description:f.name})},w=f?Ig(f):null,j=f?Mg(f.type)??f.type:null,C=m.useMemo(()=>Array.isArray(f?.units)?f.units.filter(D=>D?.isActive!==!1):[],[f]),k=m.useMemo(()=>{const P=[f?.mainImageUrl,...C.map(D=>D.imageUrl||"")].map(D=>String(D||"").trim()).filter(Boolean);return Array.from(new Set(P))},[f?.mainImageUrl,C]),E=f?dO(f):"https://www.google.com/maps",S=f?uO(f):null;return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Detalhe do ponto"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[v>0&&e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(`/menu/carrinho${$x({token:s,uf:r,city:o})}`),children:[e.jsx(Zc,{className:"h-4 w-4"}),"Ver carrinho (",v,")"]}),e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})]})]}),h&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:h})]})}),u&&!f&&e.jsx(Re,{className:"mt-5 animate-pulse",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"h-5 w-56 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-3 h-3 w-80 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-6 h-40 w-full bg-gray-200 rounded"})]})}),!u&&!h&&!f&&e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Ponto no encontrado"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte para a lista e selecione outro ponto."}),e.jsx("div",{className:"mt-4",children:e.jsx(Z,{variant:"outline",onClick:()=>t(g),children:"Voltar para a lista"})})]})}),f&&e.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:f.name}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:ud(f)||"Endereo no informado"}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[j&&e.jsx(st,{variant:"secondary",className:"rounded-full",children:j}),w&&e.jsx(st,{className:w==="Disponvel"?"rounded-full bg-emerald-100 text-emerald-900 hover:bg-emerald-100":w==="Parcial"?"rounded-full bg-amber-100 text-amber-900 hover:bg-amber-100":"rounded-full bg-rose-100 text-rose-900 hover:bg-rose-100",children:w}),f.subcategory&&e.jsx(st,{variant:"outline",className:"rounded-full",children:f.subcategory}),f.environment&&e.jsx(st,{variant:"outline",className:"rounded-full",children:f.environment})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Preo base"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:ch(f.basePriceMonth)}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Mensal  ",ch(f.basePriceWeek)," semanal"]})]})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Galeria"}),e.jsx("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-2",children:k.length>0?k.map(P=>e.jsx("div",{className:"h-40 w-64 flex-none overflow-hidden rounded-xl bg-gray-100",children:e.jsx(Mo,{src:P,alt:f.name,className:"h-full w-full object-cover"})},P)):e.jsx("div",{className:"h-40 w-full rounded-xl bg-gray-100 flex items-center justify-center text-sm text-gray-500",children:"Nenhuma imagem disponvel"})})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(up,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:"Faces/Telas"})]}),e.jsx("div",{className:"mt-2 text-gray-600",children:C.length>0?`${C.length} unidade(s) ativa(s)`:""}),typeof f.dailyImpressions=="number"&&e.jsxs("div",{className:"mt-2 text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Impacto/dia:"})," ",f.dailyImpressions]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:"Localizao"})]}),e.jsxs("div",{className:"mt-2 text-gray-600",children:[f.addressDistrict?`${f.addressDistrict}  `:"",f.addressCity||"",f.addressState?`/${f.addressState}`:""]}),e.jsx("div",{className:"mt-3",children:e.jsxs("a",{href:E,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm font-semibold text-blue-700 hover:text-blue-800",children:["Abrir no Google Maps",e.jsx(Mu,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsxs(Z,{className:"gap-2",onClick:N,children:[e.jsx(Zc,{className:"h-4 w-4"}),C.length>1?"Selecionar faces/telas":"Adicionar ao carrinho"]}),e.jsx(Z,{variant:"outline",onClick:()=>t(g),children:"Voltar para a lista"})]})]})}),e.jsx(Re,{className:"mt-4",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Mapa (preview)"}),e.jsx("div",{className:"mt-3 overflow-hidden rounded-xl border border-gray-200 bg-gray-100",children:S?e.jsx("iframe",{title:"Mapa",src:S,className:"h-64 w-full",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}):e.jsx("div",{className:"h-64 w-full flex items-center justify-center text-sm text-gray-600",children:"Coordenadas no informadas  use o boto Abrir no Google Maps."})})]})})]}),e.jsx("div",{children:e.jsx(Re,{children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Unidades"}),e.jsx("div",{className:"mt-3 space-y-3",children:C.length>0?C.map(P=>e.jsxs("div",{className:"rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[P.unitType==="SCREEN"?"Tela":"Face"," ",P.label]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[P.widthM&&P.heightM?`${P.widthM}m  ${P.heightM}m`:"Dimenses no informadas",P.orientation?`  ${P.orientation}`:""]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:ch(P.priceMonth??f.basePriceMonth)})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-700",children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:ch(P.priceWeek??f.basePriceWeek)})]}),P.imageUrl&&e.jsx("div",{className:"mt-3 h-28 w-full overflow-hidden rounded-lg bg-gray-100",children:e.jsx(Mo,{src:P.imageUrl,alt:P.label,className:"h-full w-full object-cover"})})]},P.id)):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma face/tela cadastrada neste ponto."})})]})})})]})]})})}function dh(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Cj(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function hO(){const t=Jt(),{token:s,pointId:n,uf:r,city:o}=m.useMemo(()=>{const E=new URLSearchParams(window.location.search);return{token:E.get("token")||E.get("t")||"",pointId:E.get("id")||E.get("pointId")||"",uf:String(E.get("uf")||"").trim().toUpperCase(),city:String(E.get("city")||"").trim()}},[]),{data:c,loading:u,error:h}=cd({token:s}),f=m.useMemo(()=>(c?.points??[]).find(S=>String(S.id)===String(n))??null,[c?.points,n]),v=m.useMemo(()=>Array.isArray(f?.units)?f.units.filter(S=>S?.isActive!==!1):[],[f]),[x,g]=m.useState({}),N=m.useMemo(()=>Object.values(x).filter(Boolean).length,[x]),w=m.useMemo(()=>`/menu/detalhe${dh({token:s,id:n,uf:r,city:o})}`,[s,n,r,o]),j=(E,S)=>{g(P=>({...P,[E]:S}))},C=()=>{if(!f)return;const E=Object.keys(x).filter(P=>x[P]);if(E.length===0){ye.info("Selecione pelo menos uma face/tela.");return}let S=0;E.forEach(P=>{const D=v.find(O=>O.id===P)??null;J2({point:f,unit:D,duration:{years:0,months:1,days:0}}).added&&(S+=1)}),S>0?ye.success("Adicionado ao carrinho",{description:`${S} item(ns) adicionado(s).`}):ye.info("Esses itens j estavam no carrinho."),t(`/menu/carrinho${dh({token:s,uf:r,city:o})}`)},k=m.useMemo(()=>Lc(),[N,n]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Seleo de faces/telas"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[k>0&&e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(`/menu/carrinho${dh({token:s,uf:r,city:o})}`),children:[e.jsx(Zc,{className:"h-4 w-4"}),"Ver carrinho (",k,")"]}),e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(w),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})]})]}),h&&e.jsx(Re,{className:"mt-5 border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"No foi possvel carregar"}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:h})]})}),u&&e.jsx(Re,{className:"mt-5 animate-pulse",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"h-5 w-56 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-3 h-3 w-80 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-6 h-40 w-full bg-gray-200 rounded"})]})}),!u&&!h&&!f&&e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-6",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Ponto no encontrado"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte e selecione outro ponto."}),e.jsx("div",{className:"mt-4",children:e.jsx(Z,{variant:"outline",onClick:()=>t(`/menu/pontos${dh({token:s,uf:r,city:o})}`),children:"Voltar para a lista"})})]})}),f&&e.jsx(e.Fragment,{children:e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:f.name}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:ud(f)||"Endereo no informado"}),e.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Selecione as faces/telas que deseja incluir no carrinho."})]}),e.jsxs(Z,{className:"gap-2",onClick:C,disabled:v.length===0,children:[e.jsx(Zc,{className:"h-4 w-4"}),"Adicionar selecionadas (",N,")"]})]}),e.jsx(dn,{className:"my-5"}),e.jsx("div",{className:"space-y-3",children:v.length>0?v.map(E=>{const S=!!x[E.id],P=E.priceMonth??f.basePriceMonth,D=E.priceWeek??f.basePriceWeek;return e.jsx("div",{className:"rounded-xl border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ri,{checked:S,onCheckedChange:I=>j(E.id,I===!0),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[E.unitType==="SCREEN"?"Tela":"Face"," ",E.label]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[E.widthM&&E.heightM?`${E.widthM}m  ${E.heightM}m`:"Dimenses no informadas",E.orientation?`  ${E.orientation}`:""]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:Cj(P)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:Cj(D)})]})]})]}),e.jsx("div",{className:"h-20 w-28 overflow-hidden rounded-lg bg-gray-100",children:e.jsx(Mo,{src:E.imageUrl||f.mainImageUrl||"",alt:E.label,className:"h-full w-full object-cover"})})]})},E.id)}):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma face/tela ativa cadastrada neste ponto."})})]})})})]})})}function Sj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function _j(t){return t==null||!Number.isFinite(Number(t))?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0}).format(Number(t))}function pO(){const t=Jt(),{token:s,uf:n,city:r}=m.useMemo(()=>{const P=new URLSearchParams(window.location.search);return{token:P.get("token")||P.get("t")||"",uf:String(P.get("uf")||"").trim().toUpperCase(),city:String(P.get("city")||"").trim()}},[]),{data:o}=cd({token:s}),[c,u]=m.useState(0),h=m.useMemo(()=>Bl(),[c]);m.useEffect(()=>{const P=D=>{D.key==="menu_cart"&&u(I=>I+1)};return window.addEventListener("storage",P),()=>window.removeEventListener("storage",P)},[]);const f=m.useMemo(()=>`/menu/pontos${Sj({token:s,uf:n,city:r})}`,[s,n,r]),[v,x]=m.useState("0"),[g,N]=m.useState("1"),[w,j]=m.useState("0"),C=()=>{const P={years:Math.max(0,Math.floor(Number(v)||0)),months:Math.max(0,Math.floor(Number(g)||0)),days:Math.max(0,Math.floor(Number(w)||0))};tO(P),u(D=>D+1),ye.success("Durao aplicada para todos os itens",{description:Xh(P)})},k=P=>{eO(P),u(D=>D+1),ye.success("Item removido do carrinho")},E=()=>{eC(),u(P=>P+1),ye.success("Carrinho limpo")},S=m.useMemo(()=>{const P=o?.points??[];return h.items.map(D=>{const I=P.find(z=>z.id===D.pointId)??null,O=I?.units?.find(z=>z.id===D.unitId)??null,F=D.snapshot?.pointName||I?.name||"Ponto",X=D.snapshot?.unitLabel||O?.label||"",Q=I?ud(I):D.snapshot?.addressLine||"",V=D.snapshot?.imageUrl||O?.imageUrl||I?.mainImageUrl||"",$=D.snapshot?.priceMonth??O?.priceMonth??I?.basePriceMonth??null,R=D.snapshot?.priceWeek??O?.priceWeek??I?.basePriceWeek??null;return{item:D,pointName:F,unitLabel:X,address:Q,img:V,priceMonth:$,priceWeek:R}})},[h.items,o?.points]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Carrinho"}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(f),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sua seleo"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Itens salvos neste navegador. Na prxima etapa, este carrinho vira uma solicitao de proposta."})]}),h.items.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:E,children:[e.jsx(Ba,{className:"h-4 w-4"}),"Limpar"]})})]}),h.items.length===0?e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gray-100 flex items-center justify-center",children:e.jsx(Zc,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seu carrinho est vazio"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte para a lista de pontos e adicione itens."})]})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Z,{onClick:()=>t(f),children:"Ver pontos"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:h.items.length})," item(ns)"]}),e.jsxs("div",{className:"sm:ml-auto flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Anos"}),e.jsx(Ne,{type:"number",min:0,value:v,onChange:P=>x(P.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Meses"}),e.jsx(Ne,{type:"number",min:0,value:g,onChange:P=>N(P.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Dias"}),e.jsx(Ne,{type:"number",min:0,value:w,onChange:P=>j(P.target.value)})]})]}),e.jsx(Z,{variant:"outline",onClick:C,children:"Aplicar para todos"})]})]})})}),e.jsx("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3",children:S.map(({item:P,pointName:D,unitLabel:I,address:O,img:F,priceMonth:X,priceWeek:Q})=>e.jsx(Re,{className:"hover:shadow-sm transition-shadow",children:e.jsx(Le,{className:"py-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-28 sm:w-32",children:e.jsx("div",{className:"aspect-[4/3] w-full overflow-hidden rounded-xl bg-gray-100",children:e.jsx(Mo,{src:F,alt:D,className:"h-full w-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 truncate",children:D}),I&&e.jsx("div",{className:"mt-1 text-xs text-gray-700",children:I}),O&&e.jsx("div",{className:"mt-1 text-xs text-gray-600 line-clamp-2",children:O})]}),e.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>k(P.id),title:"Remover",children:e.jsx(Ba,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Mensal:"})," ",e.jsx("span",{className:"font-semibold",children:_j(X)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Semanal:"})," ",e.jsx("span",{className:"font-semibold",children:_j(Q)})]})]}),e.jsx(dn,{className:"my-3"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Durao"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full sm:w-auto",children:[e.jsx(Ne,{type:"number",min:0,value:String(P.duration?.years??0),onChange:V=>{Fx(P.id,{...P.duration,years:Number(V.target.value||0)}),u($=>$+1)},placeholder:"Anos"}),e.jsx(Ne,{type:"number",min:0,value:String(P.duration?.months??0),onChange:V=>{Fx(P.id,{...P.duration,months:Number(V.target.value||0)}),u($=>$+1)},placeholder:"Meses"}),e.jsx(Ne,{type:"number",min:0,value:String(P.duration?.days??0),onChange:V=>{Fx(P.id,{...P.duration,days:Number(V.target.value||0)}),u($=>$+1)},placeholder:"Dias"})]}),e.jsxs("div",{className:"sm:ml-auto text-xs text-gray-600",children:[Xh(P.duration),P.durationDays>=30?"  Mensal":"  Perodo curto"]})]})]})]})})},P.id))}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsx(Z,{onClick:()=>t(f),variant:"outline",children:"Adicionar mais pontos"}),e.jsx(Z,{onClick:()=>t(`/menu/checkout${Sj({token:s,uf:n,city:r})}`),className:"gap-2",children:"Continuar"})]})]})]})})}var fO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xO=fO.reduce((t,s)=>{const n=fp(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),gO="Label",nC=m.forwardRef((t,s)=>e.jsx(xO.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));nC.displayName=gO;var vO=nC;function je({className:t,...s}){return e.jsx(vO,{"data-slot":"label",className:vt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Va=m.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{ref:n,"data-slot":"textarea",className:vt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s}));Va.displayName="Textarea";function md(t){const s=Number(t?.response?.status||0),n=String(t?.response?.data?.message||t?.response?.data?.error||t?.message||"").trim(),r=n.toLowerCase(),o=r.includes("expir"),c=r.includes("revog")||r.includes("invlid")||r.includes("inval");if([401,403,410].includes(s))return o?{kind:"EXPIRED",title:"Link expirado",description:"Este link expirou. Pea ao responsvel para gerar um novo link."}:{kind:"REVOKED",title:"Link revogado ou invlido",description:"Este link no  mais vlido (pode ter sido regenerado). Pea um novo link ao responsvel."};if(s===404)return{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou pea ao responsvel para reenviar."};if(s===400){if(r.includes("token")||r.includes("ausente")||r.includes("missing"))return{kind:"MISSING_TOKEN",title:"Acesso invlido",description:"Token ausente. Abra o Cardpio a partir do link compartilhado."};if(c)return{kind:"REVOKED",title:"Link revogado ou invlido",description:"Este link no  mais vlido (pode ter sido regenerado). Pea um novo link ao responsvel."}}return{kind:"GENERIC",title:"No foi possvel carregar",description:n||"Falha ao carregar."}}async function yO(t){const s={token:String(t.token||"").trim(),customerName:String(t.customerName||"").trim(),customerEmail:String(t.customerEmail||"").trim(),customerPhone:String(t.customerPhone||"").trim(),customerCompanyName:String(t.customerCompanyName||"").trim()||void 0,customerCnpj:String(t.customerCnpj||"").trim()||void 0,notes:String(t.notes||"").trim()||void 0,uf:String(t.uf||"").trim().toUpperCase()||void 0,city:String(t.city||"").trim()||void 0,items:Array.isArray(t.items)?t.items:[]};return(await Dn.post("/public/menu/request",s)).data}async function ii(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim(),c={view:t.view};return r?c.t=r:c.token=n,(await Dn.get(`/public/menu/request/${encodeURIComponent(s)}`,{params:c})).data}async function bO(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim();return(await Dn.post(`/public/menu/quote/${encodeURIComponent(s)}/send`,{token:n||void 0,t:r||void 0,draft:t.draft})).data}async function jO(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim();return(await Dn.post(`/public/menu/quote/${encodeURIComponent(s)}/reject`,{token:n||void 0,t:r||void 0,reason:t.reason})).data}async function NO(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim();return(await Dn.post(`/public/menu/quote/${encodeURIComponent(s)}/approve`,{token:n||void 0,t:r||void 0})).data}async function aC(t){const s=String(t.requestId||"").trim(),n=String(t.token||"").trim(),r=String(t.t||"").trim(),o=t.aud;return(await Dn.post(`/public/menu/link/${encodeURIComponent(s)}/regenerate`,{token:n||void 0,t:r||void 0},{params:{aud:o}})).data}function uh(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function wO(t){const s=String(t||"").trim();return/.+@.+\..+/.test(s)}function CO(t){return String(t||"").replace(/\D+/g,"")}function SO(){const t=Jt(),{token:s,uf:n,city:r}=m.useMemo(()=>{const I=new URLSearchParams(window.location.search);return{token:I.get("token")||I.get("t")||"",uf:String(I.get("uf")||"").trim().toUpperCase(),city:String(I.get("city")||"").trim()}},[]),o=m.useMemo(()=>Bl(),[]),c=m.useMemo(()=>`/menu/carrinho${uh({token:s,uf:n,city:r})}`,[s,n,r]),[u,h]=m.useState(""),[f,v]=m.useState(""),[x,g]=m.useState(""),[N,w]=m.useState(""),[j,C]=m.useState(""),[k,E]=m.useState(""),[S,P]=m.useState(!1),D=async()=>{const I=String(u||"").trim(),O=String(x||"").trim(),F=CO(f),X=String(s||"").trim();if(!X){ye.error("Token ausente. Abra o Cardpio a partir do link compartilhado.");return}if(!o.items.length){ye.error("Seu carrinho est vazio."),t(`/menu/pontos${uh({token:X,uf:n,city:r})}`);return}if(!I){ye.error("Informe seu nome.");return}if(!F||F.length<10){ye.error("Informe um WhatsApp/telefone vlido.");return}if(!wO(O)){ye.error("Informe um e-mail vlido.");return}P(!0);try{const Q=await yO({token:X,customerName:I,customerEmail:O,customerPhone:f,customerCompanyName:N||void 0,customerCnpj:j||void 0,notes:k||void 0,items:o.items,uf:n||void 0,city:r||void 0});eC(),ye.success("Solicitao enviada!"),t(`/menu/enviado${uh({token:X,rid:Q.requestId,uf:n,city:r})}`)}catch(Q){const V=Q?.response?.data?.message||Q?.message||"Falha ao enviar solicitao.";ye.error("No foi possvel enviar",{description:String(V)})}finally{P(!1)}};return o.items.length?e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Checkout"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(c),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enviar solicitao de proposta"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Preencha seus dados e envie. O responsvel receber por e-mail automaticamente."})]}),e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-5",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Resumo do carrinho"}),e.jsx("div",{className:"mt-2 space-y-2",children:o.items.map(I=>e.jsxs("div",{className:"flex items-start justify-between gap-3 text-sm",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 truncate",children:[I.snapshot?.pointName||"Ponto",I.snapshot?.unitLabel?`  ${I.snapshot.unitLabel}`:""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[I.snapshot?.city?`${I.snapshot.city}`:"",I.snapshot?.state?`/${I.snapshot.state}`:"",I.snapshot?.addressLine?`  ${I.snapshot.addressLine}`:""]})]}),e.jsx("div",{className:"shrink-0 text-xs text-gray-700",children:e.jsx("span",{className:"font-semibold",children:Xh(I.duration)})})]},I.id))})]})}),e.jsx(Re,{className:"mt-4",children:e.jsxs(Le,{className:"py-5",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seus dados"}),e.jsx(dn,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome *"}),e.jsx(Ne,{value:u,onChange:I=>h(I.target.value),placeholder:"Seu nome"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"WhatsApp/Telefone *"}),e.jsx(Ne,{value:f,onChange:I=>v(I.target.value),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(je,{children:"E-mail *"}),e.jsx(Ne,{value:x,onChange:I=>g(I.target.value),placeholder:"seuemail@exemplo.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Empresa (opcional)"}),e.jsx(Ne,{value:N,onChange:I=>w(I.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"CNPJ (opcional)"}),e.jsx(Ne,{value:j,onChange:I=>C(I.target.value),placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(je,{children:"Observaes (opcional)"}),e.jsx(Va,{value:k,onChange:I=>E(I.target.value),placeholder:"Ex.: preferncia de bairros, datas desejadas, briefing, etc.",className:"min-h-[110px]"})]})]}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsx(Z,{variant:"outline",onClick:()=>t(c),children:"Voltar ao carrinho"}),e.jsxs(Z,{onClick:D,disabled:S,className:"gap-2",children:[e.jsx(Ro,{className:"h-4 w-4"}),S?"Enviando...":"Enviar solicitao"]})]})]})})]})}):e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Checkout"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(c),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsxs(Le,{className:"py-8",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seu carrinho est vazio"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"Volte para a lista de pontos e adicione itens."}),e.jsx("div",{className:"mt-5",children:e.jsx(Z,{onClick:()=>t(`/menu/pontos${uh({token:s,uf:n,city:r})}`),children:"Ver pontos"})})]})})]})})}function Aj(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function _O(){const t=Jt(),{token:s,t:n,rid:r,uf:o,city:c}=m.useMemo(()=>{const w=new URLSearchParams(window.location.search);return{token:w.get("token")||"",t:w.get("t")||"",rid:w.get("rid")||w.get("requestId")||"",uf:String(w.get("uf")||"").trim().toUpperCase(),city:String(w.get("city")||"").trim()}},[]),[u,h]=m.useState(!1),f=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),v=m.useMemo(()=>`/menu/acompanhar${Aj(f)}`,[f]),x=m.useMemo(()=>`${typeof window<"u"?window.location.origin:""}${v}`,[v]),g=async()=>{try{await navigator.clipboard.writeText(x),h(!0),ye.success("Link copiado"),setTimeout(()=>h(!1),1200)}catch{ye.error("No foi possvel copiar o link")}},N=s?`/menu/pontos${Aj({token:s,uf:o,city:c})}`:"/menu";return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Confirmao"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(N),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar ao cardpio"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-11 w-11 rounded-2xl bg-green-50 flex items-center justify-center",children:e.jsx(Oi,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Solicitao enviada"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"O responsvel j recebeu sua solicitao por e-mail. Assim que responder, voc segue com a proposta."}),r&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:r})]}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsxs(Z,{className:"gap-2",onClick:()=>t(v),children:[e.jsx(Qg,{className:"h-4 w-4"}),"Acompanhar proposta"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:g,children:[e.jsx($n,{className:"h-4 w-4"}),u?"Copiado!":"Copiar link de acompanhamento"]})]}),e.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"* Nesta etapa do prottipo, o acompanhamento mostra o status bsico do envio."})]})]})})})]})})}function AO(t){return t==="EXPIRED"?Xg:t==="REVOKED"?Mk:t==="NOT_FOUND"?w4:E4}function q0(t){const s=AO(t.error.kind);return e.jsx(Re,{className:"border-amber-200 bg-amber-50",children:e.jsx(Le,{className:"py-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-11 w-11 rounded-2xl bg-amber-100 flex items-center justify-center",children:e.jsx(s,{className:"h-6 w-6 text-amber-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-amber-900",children:t.error.title}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:t.error.description}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-2",children:[t.primaryAction&&e.jsx(Z,{className:"gap-2",variant:t.primaryAction.variant??"default",onClick:t.primaryAction.onClick,disabled:t.primaryAction.disabled,children:t.primaryAction.label}),t.secondaryAction&&e.jsx(Z,{className:"gap-2",variant:t.secondaryAction.variant??"outline",onClick:t.secondaryAction.onClick,disabled:t.secondaryAction.disabled,children:t.secondaryAction.label})]})]})]})})})}function zx(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Pj(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function PO(){const t=Jt(),{token:s,t:n,rid:r}=m.useMemo(()=>{const E=new URLSearchParams(window.location.search);return{token:E.get("token")||"",t:E.get("t")||"",rid:E.get("rid")||E.get("requestId")||""}},[]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),x=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),g=m.useMemo(()=>`/menu/enviado${zx(x)}`,[x]),N=m.useMemo(()=>`/menu/proposta${zx(x)}`,[x]),w=m.useMemo(()=>`/menu/dono${zx({token:s,rid:r})}`,[s,r]);m.useEffect(()=>{let E=!0;return String(r||"").trim()?((async()=>{try{h(!0),v(null);const S=await ii({requestId:r,token:s,t:n,view:"client"});if(!E)return;c(S)}catch(S){if(!E)return;c(null);const P=md(S);v(P),P.kind==="GENERIC"&&ye.error(P.title,{description:P.description})}finally{E&&h(!1)}})(),()=>{E=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso invlido",description:"O link est incompleto. Abra o acompanhamento a partir do link enviado."}),()=>{E=!1})},[r,s,n]);const j=m.useMemo(()=>{const E=Array.isArray(o?.events)?o.events:[],S=P=>E.find(D=>D.type===P)?.at||null;return[{key:"REQUEST_SUBMITTED",title:"Solicitao enviada",desc:"Recebemos sua solicitao e enviamos ao responsvel.",at:S("REQUEST_SUBMITTED")},{key:"OWNER_OPENED",title:"Em anlise",desc:"O responsvel est avaliando os itens e condies.",at:S("OWNER_OPENED")},{key:"QUOTE_SENT",title:"Proposta enviada",desc:"Uma verso da proposta foi enviada para voc visualizar.",at:S("QUOTE_SENT")},{key:"QUOTE_OPENED",title:"Proposta visualizada",desc:"Registramos a abertura do link (prottipo).",at:S("QUOTE_OPENED")},{key:"QUOTE_REJECTED",title:"Reviso solicitada",desc:"Voc solicitou reviso/ajuste na proposta.",at:S("QUOTE_REJECTED")},{key:"QUOTE_APPROVED",title:"Aprovada",desc:"A proposta foi aprovada e ficou travada.",at:S("QUOTE_APPROVED")}]},[o]),C=!!o?.currentQuoteVersion,k=m.useMemo(()=>{const E=String(o?.status||"").toUpperCase();return E==="SUBMITTED"?"Solicitao recebida":E==="IN_REVIEW"?"Em anlise":E==="QUOTE_SENT"?"Proposta enviada":E==="REVISION_REQUESTED"?"Reviso solicitada":E==="APPROVED"?"Aprovada":E==="RECEBIDA"?"Solicitao recebida":E||""},[o?.status]);return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Acompanhar proposta"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:u?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(aa,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:o.id})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Enviado em ",e.jsx("span",{className:"font-semibold",children:Pj(o.createdAt)})]})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Status"}),e.jsxs("div",{className:"mt-2 flex items-start gap-3",children:[e.jsx(WE,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k}),e.jsx("div",{className:"mt-0.5 text-xs text-gray-600",children:C?"Voc j pode abrir a proposta e aprovar/solicitar reviso.":"Aguardando avaliao do responsvel."})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[e.jsxs(Z,{className:"gap-2",disabled:!C,onClick:()=>t(N),children:[e.jsx(nn,{className:"h-4 w-4"}),"Ver proposta"]}),s?e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(w),children:[e.jsx(G4,{className:"h-4 w-4"}),"Sou o responsvel"]}):null]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Seus dados"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Nome:"})," ",e.jsx("span",{className:"font-medium",children:o.customerName})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"WhatsApp:"})," ",o.customerPhone]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"E-mail:"})," ",o.customerEmail]}),o.customerCompanyName&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Empresa:"})," ",o.customerCompanyName]})]})]})]}),o.notes&&e.jsxs(e.Fragment,{children:[e.jsx(dn,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Observaes"}),e.jsx("div",{className:"mt-2 text-sm text-gray-700 whitespace-pre-wrap",children:o.notes})]})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Linha do tempo"}),e.jsx("div",{className:"mt-3 space-y-3",children:j.map(E=>{const S=!!E.at;return e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-0.5 h-2.5 w-2.5 rounded-full ${S?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.title}),e.jsx("div",{className:"text-xs text-gray-500",children:S?Pj(E.at):""})]}),e.jsx("div",{className:"mt-0.5 text-xs text-gray-600",children:E.desc})]})]})},E.key)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Itens solicitados"}),e.jsx("div",{className:"mt-3 space-y-3",children:o.items.map(E=>e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E.snapshot?.pointName||"Ponto",E.snapshot?.unitLabel?`  ${E.snapshot.unitLabel}`:""]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[E.snapshot?.city?`${E.snapshot.city}`:"",E.snapshot?.state?`/${E.snapshot.state}`:"",E.snapshot?.addressLine?`  ${E.snapshot.addressLine}`:""]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:["Durao: ",e.jsx("span",{className:"font-semibold",children:Xh(E.duration||H0(E.durationDays))})]})]},E.id))})]})]}):e.jsx(q0,{error:f||{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou pea ao responsvel para reenviar."},primaryAction:{label:"Ir para o incio",variant:"outline",onClick:()=>t("/menu")},secondaryAction:{label:"Voltar",variant:"ghost",onClick:()=>t(g)}})})})]})})}function EO(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function au(t){const s=Number(t||0);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}catch{return`R$ ${s.toFixed(2)}`}}function kO(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function DO(){const t=Jt(),{token:s,t:n,rid:r}=m.useMemo(()=>{const X=new URLSearchParams(window.location.search);return{token:X.get("token")||"",t:X.get("t")||"",rid:X.get("rid")||X.get("requestId")||""}},[]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),[x,g]=m.useState(!1),[N,w]=m.useState(!1),[j,C]=m.useState(""),k=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),E=m.useMemo(()=>`/menu/acompanhar${EO(k)}`,[k]),S=m.useMemo(()=>{const X=Array.isArray(o?.quotes)?o.quotes:[],Q=o?.currentQuoteVersion;return Q&&X.find(V=>V.version===Q)||null},[o]),P=async()=>{const X=await ii({requestId:r,token:s,t:n,view:"client"});c(X)};m.useEffect(()=>{let X=!0;return String(r||"").trim()?((async()=>{try{h(!0),v(null);const Q=await ii({requestId:r,token:s,t:n,view:"client"});if(!X)return;c(Q)}catch(Q){if(!X)return;c(null);const V=md(Q);v(V),V.kind==="GENERIC"&&ye.error(V.title,{description:V.description})}finally{X&&h(!1)}})(),()=>{X=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso invlido",description:"O link est incompleto. Abra a proposta a partir do link enviado."}),()=>{X=!1})},[r,s,n]);const D=!!S&&S?.status!=="APPROVED"&&String(o?.status||"").toUpperCase()!=="APPROVED",I=!!S&&S?.status==="SENT"&&String(o?.status||"").toUpperCase()!=="APPROVED",O=async()=>{try{g(!0),await NO({requestId:r,token:s,t:n}),ye.success("Aprovada!",{description:"Registramos sua aprovao (prottipo)."}),await P(),t(E)}catch(X){const Q=X?.response?.data?.message||X?.message||"Falha ao aprovar.";ye.error("No foi possvel aprovar",{description:String(Q)})}finally{g(!1)}},F=async()=>{try{g(!0),await jO({requestId:r,token:s,t:n,reason:j}),ye.success("Reviso solicitada",{description:"Enviamos o pedido de reviso ao responsvel (prottipo)."}),w(!1),C(""),await P(),t(E)}catch(X){const Q=X?.response?.data?.message||X?.message||"Falha ao solicitar reviso.";ye.error("No foi possvel solicitar reviso",{description:String(Q)})}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Proposta"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(E),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:u?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(aa,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o?S?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:o.id})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Verso ",e.jsxs("span",{className:"font-semibold",children:["v",S.version]}),"  enviada em"," ",e.jsx("span",{className:"font-semibold",children:kO(S.createdAt)})]})]}),S.status==="APPROVED"&&e.jsxs("div",{className:"mt-4 rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-900",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Oi,{className:"h-4 w-4"}),"Proposta aprovada"]}),e.jsx("div",{className:"mt-1 text-xs text-green-800",children:"Esta verso est travada (prottipo)."})]}),S.status==="REJECTED"&&e.jsxs("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Tb,{className:"h-4 w-4"}),"Reviso solicitada"]}),S.rejectReason&&e.jsx("div",{className:"mt-1 text-xs text-amber-800 whitespace-pre-wrap",children:S.rejectReason})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Base (pontos/faces)"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-gray-900",children:au(S.totals.base)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servios"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-gray-900",children:au(S.totals.services)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Descontos"}),e.jsxs("div",{className:"mt-1 text-lg font-bold text-gray-900",children:["- ",au(S.totals.discount)]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-900 bg-gray-900 px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Total"}),e.jsx("div",{className:"mt-1 text-lg font-bold text-white",children:au(S.totals.total)})]})]}),Array.isArray(S.draft?.services)&&S.draft.services.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(dn,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Servios includos"}),e.jsx("div",{className:"mt-3 space-y-2",children:S.draft.services.map((X,Q)=>e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-sm text-gray-900",children:X.name}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:au(X.value)})]},`${X.name}-${Q}`))})]})]}),S.draft?.message&&e.jsxs(e.Fragment,{children:[e.jsx(dn,{className:"my-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Mensagem do responsvel"}),e.jsx("div",{className:"mt-2 text-sm text-gray-700 whitespace-pre-wrap",children:S.draft.message})]})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Z,{className:"gap-2",disabled:!D||x,onClick:O,children:[e.jsx(Oi,{className:"h-4 w-4"}),"Aprovar"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",disabled:!I||x,onClick:()=>w(X=>!X),children:[e.jsx(Tb,{className:"h-4 w-4"}),"Solicitar reviso"]})]}),N&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-white px-4 py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"O que voc quer ajustar?"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:"Ex.: prazo, desconto, servios, ponto especfico"}),e.jsx("div",{className:"mt-3",children:e.jsx(Va,{placeholder:"Escreva aqui (opcional)",value:j,onChange:X=>C(X.target.value)})}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx(Z,{disabled:x,onClick:F,children:"Enviar reviso"}),e.jsx(Z,{variant:"ghost",disabled:x,onClick:()=>w(!1),children:"Cancelar"})]})]})]}):e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-2xl bg-gray-100 flex items-center justify-center",children:e.jsx(nn,{className:"h-5 w-5 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Ainda no h proposta"}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:"O responsvel ainda no enviou a proposta. Voc pode acompanhar pelo status."}),e.jsx("div",{className:"mt-4",children:e.jsx(Z,{onClick:()=>t(E),children:"Voltar para acompanhamento"})})]})]})}):e.jsx(q0,{error:f||{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou pea ao responsvel para reenviar."},primaryAction:{label:"Ir para o incio",variant:"outline",onClick:()=>t("/menu")},secondaryAction:{label:"Voltar para acompanhamento",variant:"ghost",onClick:()=>t(E)}})})})]})})}function kc(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function ki(t){const s=Number(t||0);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}catch{return`R$ ${s.toFixed(2)}`}}function Dc(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}const mh=[{name:"Impresso (material)",defaultValue:1200},{name:"Instalao (mo de obra)",defaultValue:600},{name:"Criao/Arte",defaultValue:800},{name:"Logstica",defaultValue:350}];function TO(t){let s=0;for(const n of t||[]){const r=(()=>{const h=Number(n?.durationDays);if(Number.isFinite(h)&&h>0)return Math.max(1,Math.floor(h));const f=n?.duration||{},v=Math.max(0,Math.floor(Number(f?.years)||0)),x=Math.max(0,Math.floor(Number(f?.months)||0)),g=Math.max(0,Math.floor(Number(f?.days)||0)),N=v*365+x*30+g;return Math.max(1,Math.floor(Number.isFinite(N)&&N>0?N:30))})(),o=Number(n?.snapshot?.priceWeek||0),c=Number(n?.snapshot?.priceMonth||0);let u=0;r<=7&&o>0?u=o:c>0?u=c*Math.max(1,r/30):o>0&&(u=o*Math.max(1,r/7)),s+=u}return Number(s.toFixed(2))}function IO(t,s){const n=TO(t?.items||[]),r=Math.max(0,Number(s.manualServiceValue||0)),o=Array.isArray(s.services)?s.services:[],c=Number((o.reduce((k,E)=>k+Number(E.value||0),0)+r).toFixed(2));let u=0;for(const k of o){const E=Math.max(0,Number(k.value||0));if(E<=0)continue;const S=Math.max(0,Number(k?.discountPercent||0)),P=Math.max(0,Number(k?.discountFixed||0)),D=Math.min(E,E*(S/100)+P);u+=D}u=Number(u.toFixed(2));const h=Number(Math.max(0,c-u).toFixed(2)),f=String(s?.discountApplyTo||"").trim().toUpperCase(),v=f==="BASE"?"BASE":f==="SERVICES"?"SERVICES":"ALL",x=Math.max(0,Number(s.discountPercent||0)),g=Math.max(0,Number(s.discountFixed||0)),N=v==="BASE"?n:v==="SERVICES"?h:n+h,w=Number(Math.min(N,N*(x/100)+g).toFixed(2)),j=Number((u+w).toFixed(2)),C=Number(Math.max(0,n+c-j).toFixed(2));return{base:n,services:c,discount:j,total:C,servicesLineDiscount:u,globalDiscount:w,applyTo:v}}function MO(){const t=Jt(),{token:s,t:n,rid:r}=m.useMemo(()=>{const Y=new URLSearchParams(window.location.search);return{token:Y.get("token")||"",t:Y.get("t")||"",rid:Y.get("rid")||Y.get("requestId")||""}},[]),[o,c]=m.useState(null),[u,h]=m.useState(!0),[f,v]=m.useState(null),[x,g]=m.useState(!1),[N,w]=m.useState(!1),[j,C]=m.useState({message:"",services:[],manualServiceValue:null,discountPercent:null,discountFixed:null,discountApplyTo:"ALL"}),[k,E]=m.useState(mh[0]?.name||""),[S,P]=m.useState(mh[0]?.defaultValue||0),D=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),I=o?.links?.client?.token||"",O=o?.links?.owner?.token||"",F=m.useMemo(()=>I?`/menu/acompanhar?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(I)}`:`/menu/acompanhar${kc(D)}`,[I,r,D]),X=m.useMemo(()=>I?`/menu/proposta?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(I)}`:`/menu/proposta${kc(D)}`,[I,r,D]),Q=m.useMemo(()=>`/menu/dono/enviada${kc(D)}`,[D]),V=m.useMemo(()=>`/menu/dono/revisao${kc(D)}`,[D]),$=m.useMemo(()=>`/menu/dono/aprovada${kc(D)}`,[D]),R=m.useMemo(()=>O?`/menu/dono?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(O)}`:`/menu/dono${kc(D)}`,[O,r,D]);m.useMemo(()=>{const Y=Array.isArray(o?.quotes)?o.quotes:[],ae=o?.currentQuoteVersion;return ae&&Y.find(Ie=>Ie.version===ae)||null},[o]);const z=String(o?.status||"").toUpperCase(),J=z==="APPROVED",ue=m.useMemo(()=>IO(o,j),[o,j]);m.useEffect(()=>{let Y=!0;return String(r||"").trim()?((async()=>{try{h(!0),v(null);const ae=await ii({requestId:r,token:s,t:n,view:"owner"});if(!Y)return;c(ae);const Ie=Array.isArray(ae?.quotes)?ae.quotes:[],$e=ae?.currentQuoteVersion,Ge=$e?Ie.find(Xe=>Xe.version===$e):null;Ge?.draft&&C({message:Ge.draft.message||"",services:Array.isArray(Ge.draft.services)?Ge.draft.services.map(Xe=>({name:Xe?.name,value:Xe?.value,discountPercent:Xe?.discountPercent??null,discountFixed:Xe?.discountFixed??null})):[],manualServiceValue:Ge.draft.manualServiceValue??null,discountPercent:Ge.draft.discountPercent??null,discountFixed:Ge.draft.discountFixed??null,discountApplyTo:Ge.draft?.discountApplyTo??"ALL"})}catch(ae){const Ie=md(ae);c(null),v(Ie),Ie.kind==="GENERIC"&&ye.error(Ie.title,{description:Ie.description})}finally{Y&&h(!1)}})(),()=>{Y=!1}):(c(null),h(!1),v({kind:"MISSING_TOKEN",title:"Acesso invlido",description:"O link est incompleto. Abra o workspace a partir do link do responsvel."}),()=>{Y=!1})},[r,s,n]);const se=async()=>{const Y=await ii({requestId:r,token:s,t:n,view:"owner"});c(Y)},fe=typeof window<"u"?window.location.origin:"",H=Y=>`${fe}${Y}`,re=async Y=>{try{await navigator.clipboard.writeText(Y),ye.success("Copiado")}catch{ye.error("No foi possvel copiar")}},G=async()=>{try{w(!0),await aC({requestId:r,aud:"client",token:s,t:n}),await se(),ye.success("Link do cliente regenerado",{description:"O link anterior foi invalidado."})}catch(Y){const ae=Y?.response?.data?.message||Y?.message||"Falha ao regenerar.";ye.error("No foi possvel regenerar",{description:String(ae)})}finally{w(!1)}},W=Y=>{E(Y);const ae=mh.find(Ie=>Ie.name===Y);ae&&P(ae.defaultValue)},ne=()=>{const Y=String(k||"").trim(),ae=Number(S||0);if(!Y||!Number.isFinite(ae)||ae<=0)return;const Ie={name:Y,value:ae,discountPercent:null,discountFixed:null};C($e=>({...$e,services:[...$e.services||[],Ie]}))},K=Y=>{C(ae=>({...ae,services:(ae.services||[]).filter((Ie,$e)=>$e!==Y)}))},ee=(Y,ae)=>{C(Ie=>({...Ie,services:(Ie.services||[]).map(($e,Ge)=>Ge===Y?{...$e,...ae}:$e)}))},U=async()=>{try{if(J)return;g(!0),await bO({requestId:r,token:s,t:n,draft:j}),ye.success("Proposta enviada",{description:"Verso criada e vinculada ao request (prottipo)."}),t(Q)}catch(Y){const ae=Y?.response?.data?.message||Y?.message||"Falha ao enviar.";ye.error("No foi possvel enviar",{description:String(ae)})}finally{g(!1)}},le=()=>{if(z==="APPROVED")return t($);if(z==="REVISION_REQUESTED")return t(V);if(z==="QUOTE_SENT")return t(Q)};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Workspace do responsvel"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(F),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Acompanhar"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:le,children:[e.jsx(nn,{className:"h-4 w-4"}),"Estado atual"]})]})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:u?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(aa,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:o.id})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Atualizado em ",e.jsx("span",{className:"font-semibold",children:Dc(o.updatedAt||o.createdAt)})]})]}),o.links&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Link do cliente (assinado)"}),e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:G,disabled:N,children:[N?e.jsx(aa,{className:"h-4 w-4 animate-spin"}):e.jsx(gw,{className:"h-4 w-4"}),"Regenerar"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Dc(o.links?.client?.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Dc(o.links?.client?.expiresAt)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>re(H(F)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar acompanhamento"]}),e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>re(H(X)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar proposta"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:H(X)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Link do dono (workspace)"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Dc(o.links?.owner?.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Dc(o.links?.owner?.expiresAt)})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>re(H(R)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar link"]})}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:H(R)})]})]}),J&&e.jsxs("div",{className:"mt-4 rounded-xl border border-gray-900 bg-gray-900 px-4 py-3 text-sm text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(mp,{className:"h-4 w-4"}),"Proposta aprovada (travada)"]}),e.jsx("div",{className:"mt-1 text-xs text-gray-200",children:"Voc no pode gerar novas verses aps aprovao."})]}),z==="REVISION_REQUESTED"&&e.jsxs("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:[e.jsx("div",{className:"font-semibold",children:"Reviso solicitada pelo cliente"}),e.jsx("div",{className:"mt-1 text-xs text-amber-800",children:"Abra a tela de reviso para ver a mensagem do cliente."}),e.jsx("div",{className:"mt-3",children:e.jsx(Z,{variant:"outline",onClick:()=>t(V),children:"Ver reviso"})})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Resumo do cliente"}),e.jsxs("div",{className:"mt-3 rounded-xl border border-gray-200 bg-white px-4 py-3 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Nome:"})," ",e.jsx("span",{className:"font-medium",children:o.customerName})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"WhatsApp:"})," ",o.customerPhone]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"E-mail:"})," ",o.customerEmail]}),o.customerCompanyName&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Empresa:"})," ",o.customerCompanyName]}),o.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Observaes"}),e.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:o.notes})]})]}),e.jsx("div",{className:"mt-5 text-sm font-semibold text-gray-900",children:"Histrico de verses"}),e.jsx("div",{className:"mt-3 space-y-2",children:(Array.isArray(o.quotes)?o.quotes:[]).length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma verso enviada ainda."}):(o.quotes||[]).slice().reverse().map(Y=>e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["v",Y.version]}),e.jsx("div",{className:"text-xs text-gray-600",children:Dc(Y.createdAt)})]}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["Status: ",e.jsx("span",{className:"font-semibold",children:Y.status})]}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:ki(Y.totals.total)})]})]},Y.version))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Documento editvel (mock)"}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(X),children:[e.jsx(Mu,{className:"h-4 w-4"}),"Ver como cliente"]})]}),e.jsxs("div",{className:"mt-3 rounded-xl border border-gray-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensagem (opcional)"}),e.jsx("div",{className:"mt-2",children:e.jsx(Va,{value:String(j.message??""),onChange:Y=>C(ae=>({...ae,message:Y.target.value})),placeholder:"Explique condies, prazos, observaes",disabled:J})}),e.jsx(dn,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Servios"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:k,onChange:Y=>W(Y.target.value),disabled:J,children:mh.map(Y=>e.jsx("option",{value:Y.name,children:Y.name},Y.name))}),e.jsx(Ne,{type:"number",value:Number.isFinite(Number(S))?String(S):"",onChange:Y=>P(Number(Y.target.value||0)),placeholder:"Valor",disabled:J}),e.jsx(Z,{variant:"outline",onClick:ne,disabled:J,children:"Adicionar"})]}),(j.services||[]).length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:(j.services||[]).map((Y,ae)=>{const Ie=Math.max(0,Number(Y?.value||0)),$e=Math.max(0,Number(Y?.discountPercent||0)),Ge=Math.max(0,Number(Y?.discountFixed||0)),Xe=Number(Math.min(Ie,Ie*($e/100)+Ge).toFixed(2)),Je=Xe>0;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 rounded-xl border border-gray-200 px-3 py-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm text-gray-900",children:Y.name}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Desconto do servio (opcional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{type:"number",className:"h-9 w-20",value:Y?.discountPercent==null?"":String(Y?.discountPercent),onChange:tt=>ee(ae,{discountPercent:tt.target.value?Number(tt.target.value):null}),placeholder:"%",disabled:J}),e.jsx(Ne,{type:"number",className:"h-9 w-24",value:Y?.discountFixed==null?"":String(Y?.discountFixed),onChange:tt=>ee(ae,{discountFixed:tt.target.value?Number(tt.target.value):null}),placeholder:"R$",disabled:J})]}),Je&&e.jsxs("div",{className:"text-xs text-gray-500",children:["(- ",ki(Xe),")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:ki(Y.value)}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>K(ae),disabled:J,children:"Remover"})]})]},`${Y.name}-${ae}`)})}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servio manual (R$)"}),e.jsx(Ne,{type:"number",value:j.manualServiceValue==null?"":String(j.manualServiceValue),onChange:Y=>C(ae=>({...ae,manualServiceValue:Y.target.value?Number(Y.target.value):null})),placeholder:"0",disabled:J})]}),e.jsx("div",{})]}),e.jsx(dn,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Descontos"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Aplicar em"}),e.jsxs("select",{className:"h-10 w-full rounded-md border border-gray-200 bg-white px-3 text-sm",value:String(j?.discountApplyTo||"ALL"),onChange:Y=>C(ae=>({...ae,discountApplyTo:Y.target.value})),disabled:J,children:[e.jsx("option",{value:"ALL",children:"Tudo (base + servios)"}),e.jsx("option",{value:"BASE",children:"Base (pontos/faces)"}),e.jsx("option",{value:"SERVICES",children:"Servios"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"% (sobre escopo)"}),e.jsx(Ne,{type:"number",value:j.discountPercent==null?"":String(j.discountPercent),onChange:Y=>C(ae=>({...ae,discountPercent:Y.target.value?Number(Y.target.value):null})),placeholder:"0",disabled:J})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"R$ fixo"}),e.jsx(Ne,{type:"number",value:j.discountFixed==null?"":String(j.discountFixed),onChange:Y=>C(ae=>({...ae,discountFixed:Y.target.value?Number(Y.target.value):null})),placeholder:"0",disabled:J})]})]}),e.jsx(dn,{className:"my-4"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Resumo (preview)"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Base"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:ki(ue.base)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servios"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:ki(ue.services)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Descontos"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["- ",ki(ue.discount)]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[11px] text-gray-500",children:[ue.servicesLineDiscount>0&&e.jsxs("div",{children:["Servios: - ",ki(ue.servicesLineDiscount)]}),ue.globalDiscount>0&&e.jsxs("div",{children:["Global (",ue.applyTo==="BASE"?"Base":ue.applyTo==="SERVICES"?"Servios":"Tudo","): - ",ki(ue.globalDiscount)]})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-900 bg-gray-900 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Total"}),e.jsx("div",{className:"text-sm font-semibold text-white",children:ki(ue.total)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(Z,{className:"w-full gap-2",onClick:U,disabled:J||x,children:[x?e.jsx(aa,{className:"h-4 w-4 animate-spin"}):e.jsx(Ru,{className:"h-4 w-4"}),"Enviar proposta (gera nova verso)"]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center gap-2",children:[e.jsx(wk,{className:"h-3.5 w-3.5"}),"Ao reenviar, criamos v1/v2/v3 sem perder histrico."]})]})]})]})]})]}):e.jsx(q0,{error:f||{kind:"NOT_FOUND",title:"Solicitao no encontrada",description:"Verifique se o link est completo ou gere um novo link para o responsvel."},primaryAction:{label:"Ir para o incio",variant:"outline",onClick:()=>t("/menu")}})})})]})})}function Bx(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function Tc(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function RO(){const t=Jt(),{token:s,t:n,rid:r}=m.useMemo(()=>{const F=new URLSearchParams(window.location.search);return{token:F.get("token")||"",t:F.get("t")||"",rid:F.get("rid")||F.get("requestId")||""}},[]),o=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),[c,u]=m.useState(null),[h,f]=m.useState(!0),[v,x]=m.useState(null),[g,N]=m.useState(!1),w=m.useMemo(()=>`/menu/dono${Bx(o)}`,[o]),j=m.useMemo(()=>{const F=Array.isArray(c?.quotes)?c.quotes:[],X=c?.currentQuoteVersion;return X&&F.find(Q=>Q.version===X)||null},[c]),C=async()=>{const F=await ii({requestId:r,token:s,t:n,view:"owner"});u(F)};m.useEffect(()=>{let F=!0;return(async()=>{try{f(!0),x(null);const X=await ii({requestId:r,token:s,t:n,view:"owner"});if(!F)return;u(X)}catch(X){if(!F)return;u(null);const Q=md(X);x(Q),Q.kind==="GENERIC"&&ye.error(Q.title,{description:Q.description})}finally{F&&f(!1)}})(),()=>{F=!1}},[r,s,n]);const k=typeof window<"u"?window.location.origin:"",E=F=>`${k}${F}`,S=c?.links?.client?.token||"",P=S?`/menu/proposta?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(S)}`:`/menu/proposta${Bx(o)}`,D=S?`/menu/acompanhar?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(S)}`:`/menu/acompanhar${Bx(o)}`,I=async F=>{try{await navigator.clipboard.writeText(F),ye.success("Copiado")}catch{ye.error("No foi possvel copiar")}},O=async()=>{try{N(!0),await aC({requestId:r,aud:"client",token:s,t:n}),await C(),ye.success("Link regenerado",{description:"O link anterior foi invalidado e um novo foi gerado."})}catch(F){const X=F?.response?.data?.message||F?.message||"Falha ao regenerar.";ye.error("No foi possvel regenerar",{description:String(X)})}finally{N(!1)}};return e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dono  Enviada"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(w),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:h?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(aa,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:c.id})]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:C,children:[e.jsx(e0,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsx(dn,{className:"my-5"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Proposta atual"}),e.jsx("div",{className:"mt-2 rounded-xl border border-gray-200 bg-white px-4 py-3 text-sm text-gray-700",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Verso: ",e.jsxs("span",{className:"font-semibold",children:["v",j.version]})]}),e.jsxs("div",{className:"mt-1",children:["Enviada em: ",e.jsx("span",{className:"font-semibold",children:Tc(j.createdAt)})]}),e.jsxs("div",{className:"mt-1",children:["ltima abertura (proposta): ",e.jsx("span",{className:"font-semibold",children:Tc(j.openedAt)})]}),e.jsxs("div",{className:"mt-1",children:["Status: ",e.jsx("span",{className:"font-semibold",children:j.status})]})]}):e.jsx("div",{children:"Nenhuma verso enviada ainda."})}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Link do cliente (proposta)"}),e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:O,disabled:g,children:[g?e.jsx(aa,{className:"h-4 w-4 animate-spin"}):e.jsx(gw,{className:"h-4 w-4"}),"Regenerar"]})]}),c.links?.client&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Tc(c.links.client.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Tc(c.links.client.expiresAt)})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(Z,{className:"gap-2",onClick:()=>t(P),children:[e.jsx(nn,{className:"h-4 w-4"}),"Abrir"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>I(E(P)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:E(P)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Acompanhamento (timeline)"}),c.links?.client&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Aberta em: ",e.jsx("span",{className:"font-semibold",children:Tc(c.links.client.openedAtLast)})]}),e.jsxs("div",{className:"mt-0.5",children:["Expira em: ",e.jsx("span",{className:"font-semibold",children:Tc(c.links.client.expiresAt)})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(D),children:[e.jsx(Mu,{className:"h-4 w-4"}),"Abrir"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>I(E(D)),children:[e.jsx($n,{className:"h-4 w-4"}),"Copiar"]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all",children:E(D)})]})]}),e.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"* Etapa 6: links assinados com expirao + rastreio (aberto/expira) + regenerao."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v?.title||"No encontramos essa solicitao."}),e.jsx("div",{className:"text-sm text-gray-600",children:v?.description||"Verifique o link e tente novamente."}),e.jsx("div",{className:"pt-2",children:e.jsx(Z,{variant:"outline",onClick:()=>t("/menu"),children:"Ir para o incio"})})]})})})]})})}function OO(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function LO(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function FO(){const t=Jt(),{token:s,t:n,rid:r}=m.useMemo(()=>{const j=new URLSearchParams(window.location.search);return{token:j.get("token")||"",t:j.get("t")||"",rid:j.get("rid")||j.get("requestId")||""}},[]),o=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),[c,u]=m.useState(null),[h,f]=m.useState(!0),[v,x]=m.useState(null),g=m.useMemo(()=>`/menu/dono${OO(o)}`,[o]),N=m.useMemo(()=>{const j=Array.isArray(c?.quotes)?c.quotes:[],C=c?.currentQuoteVersion;return C&&j.find(k=>k.version===C)||null},[c]),w=async()=>{const j=await ii({requestId:r,token:s,t:n,view:"owner"});u(j)};return m.useEffect(()=>{let j=!0;return(async()=>{try{f(!0),x(null);const C=await ii({requestId:r,token:s,t:n,view:"owner"});if(!j)return;u(C)}catch(C){if(!j)return;u(null);const k=md(C);x(k),k.kind==="GENERIC"&&ye.error(k.title,{description:k.description})}finally{j&&f(!1)}})(),()=>{j=!1}},[r,s,n]),e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dono  Reviso solicitada"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:w,children:[e.jsx(e0,{className:"h-4 w-4"}),"Atualizar"]})]})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:h?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(aa,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-amber-200 bg-amber-50 px-4 py-3",children:[e.jsx(Bh,{className:"h-5 w-5 text-amber-700 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-amber-900",children:"Cliente solicitou reviso"}),e.jsx("div",{className:"mt-1 text-xs text-amber-800",children:"Ajuste a proposta e envie uma nova verso (v2, v3)."})]})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:c.id}),e.jsx("div",{className:"mt-4 text-sm font-semibold text-gray-900",children:"Verso atual"}),e.jsx("div",{className:"mt-2 text-sm text-gray-700",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["v",N.version,"  enviada em ",e.jsx("span",{className:"font-semibold",children:LO(N.createdAt)})]}),e.jsxs("div",{className:"mt-1",children:["Status: ",e.jsx("span",{className:"font-semibold",children:N.status})]}),N.rejectReason&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensagem do cliente"}),e.jsx("div",{className:"mt-1 rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 whitespace-pre-wrap",children:N.rejectReason})]})]}):e.jsx("div",{children:"Nenhuma verso enviada ainda."})}),e.jsx("div",{className:"mt-5",children:e.jsxs(Z,{className:"gap-2",onClick:()=>t(g),children:[e.jsx(l4,{className:"h-4 w-4"}),"Ajustar e enviar nova verso"]})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v?.title||"No encontramos essa solicitao."}),e.jsx("div",{className:"text-sm text-gray-600",children:v?.description||"Verifique o link e tente novamente."}),e.jsx("div",{className:"pt-2",children:e.jsx(Z,{variant:"outline",onClick:()=>t("/menu"),children:"Ir para o incio"})})]})})})]})})}function Ej(t){const s=new URLSearchParams;Object.entries(t).forEach(([r,o])=>{const c=String(o??"").trim();c&&s.set(r,c)});const n=s.toString();return n?`?${n}`:""}function $O(t){const s=Number(t||0);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}catch{return`R$ ${s.toFixed(2)}`}}function zO(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",dateStyle:"short",timeStyle:"short"}).format(s)}catch{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(s)}}function BO(){const t=Jt(),{token:s,t:n,rid:r}=m.useMemo(()=>{const C=new URLSearchParams(window.location.search);return{token:C.get("token")||"",t:C.get("t")||"",rid:C.get("rid")||C.get("requestId")||""}},[]),o=m.useMemo(()=>n?{t:n,rid:r}:{token:s,rid:r},[n,s,r]),[c,u]=m.useState(null),[h,f]=m.useState(!0),[v,x]=m.useState(null),g=m.useMemo(()=>`/menu/dono${Ej(o)}`,[o]),N=m.useMemo(()=>{const C=Array.isArray(c?.quotes)?c.quotes:[],k=c?.currentQuoteVersion;return k&&C.find(E=>E.version===k)||null},[c]),w=c?.links?.client?.token||"",j=m.useMemo(()=>w?`/menu/proposta?rid=${encodeURIComponent(r)}&t=${encodeURIComponent(w)}`:`/menu/proposta${Ej(o)}`,[w,r,o]);return m.useEffect(()=>{let C=!0;return(async()=>{try{f(!0),x(null);const k=await ii({requestId:r,token:s,t:n,view:"owner"});if(!C)return;u(k)}catch(k){if(!C)return;u(null);const E=md(k);x(E),E.kind==="GENERIC"&&ye.error(E.title,{description:E.description})}finally{C&&f(!1)}})(),()=>{C=!1}},[r,s,n]),e.jsx("div",{className:"min-h-screen w-full bg-gray-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{variant:"secondary",className:"rounded-full",children:"Prottipo"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dono  Aprovada (travada)"}),e.jsx("div",{className:"ml-auto",children:e.jsxs(Z,{variant:"ghost",className:"gap-2",onClick:()=>t(g),children:[e.jsx(Xs,{className:"h-4 w-4"}),"Voltar"]})})]}),e.jsx(Re,{className:"mt-5",children:e.jsx(Le,{className:"py-6",children:h?e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsx(aa,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-gray-900 bg-gray-900 px-4 py-3 text-white",children:[e.jsx("div",{className:"mt-0.5 h-9 w-9 rounded-2xl bg-white/10 flex items-center justify-center",children:e.jsx(mp,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Proposta aprovada e travada"}),e.jsx("div",{className:"mt-1 text-xs text-gray-200",children:"Este estado representa o fim do ciclo no prottipo."})]})]}),e.jsx(dn,{className:"my-5"}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Request ID"}),e.jsx("div",{className:"mt-1 font-mono text-sm text-gray-800 break-all",children:c.id}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Verso final"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600",children:N?`v${N.version}  ${zO(N.createdAt)}`:""})]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>t(j),children:[e.jsx(nn,{className:"h-4 w-4"}),"Ver proposta"]})]}),N&&e.jsxs(e.Fragment,{children:[e.jsx(dn,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:$O(N.totals.total)})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 px-3 py-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(Oi,{className:"h-4 w-4 text-green-600"}),N.status]})]})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:v?.title||"No encontramos essa solicitao."}),e.jsx("div",{className:"text-sm text-gray-600",children:v?.description||"Verifique o link e tente novamente."}),e.jsx("div",{className:"pt-2",children:e.jsx(Z,{variant:"outline",onClick:()=>t("/menu"),children:"Ir para o incio"})})]})})})]})})}function UO(){const t=Jt(),[s,n]=m.useState(null);return m.useEffect(()=>{const r=new URLSearchParams(window.location.search),o=new URLSearchParams(window.location.hash.replace(/^#/,"")),c=r.get("access_token")??r.get("token")??o.get("access_token")??o.get("token"),u=r.get("refresh_token")??o.get("refresh_token"),h=r.get("error")??o.get("error");if(h){n(decodeURIComponent(h));return}if(!c){n("Token de acesso no encontrado na resposta do servidor.");return}localStorage.setItem("access_token",c),u&&localStorage.setItem("refresh_token",u),window.history.replaceState(null,"","/oauth-callback"),t("/app")},[]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-sm w-full bg-white rounded-2xl border border-gray-200 shadow-sm p-8 text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mx-auto",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Falha na autenticao"}),e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full py-2.5 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Voltar para o login"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Autenticando, aguarde"})]})})}const VO=[{id:"dashboard",label:"Dashboard",icon:hw},{id:"inventory",label:"Inventrio",icon:ra},{id:"mediamap",label:"Mdia Map",icon:fw},{id:"clients",label:"Clientes",icon:s0},{id:"products",label:"Produtos/Servios",icon:$c},{id:"proposals",label:"Propostas",icon:nn},{id:"campaigns",label:"Campanhas",icon:xw},{id:"reservations",label:"Reservas",icon:ju},{id:"financial",label:"Financeiro",icon:Ou},{id:"messages",label:"Mensagens",icon:t4},{id:"mediakit",label:"Mdia Kit",icon:dw},{id:"activities",label:"Atividades",icon:Qg},{id:"settings",label:"Configuraes",icon:hp}];function kj({currentPage:t,onNavigate:s,isSuperAdmin:n,isMobile:r=!1}){const{company:o,subscription:c,pointsLimit:u,daysRemainingInTrial:h}=Fo();return e.jsxs("div",{className:"w-64 md:w-64 bg-white border-r border-gray-200 flex flex-col h-full overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h1",{className:"text-indigo-600",children:"OneMedia"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gesto de Mdia Exterior"})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[VO.map(f=>{const v=f.icon,x=t===f.id;return e.jsxs("button",{onClick:()=>s(f.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${x?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(v,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:f.label})]},f.id)}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-t border-gray-200"}),e.jsxs("button",{onClick:()=>s("superadmin"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${t==="superadmin"?"bg-red-50 text-red-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(wu,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Super Admin"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-indigo-900 text-sm",children:"Plano Atual"}),e.jsxs("p",{className:"text-indigo-600 mt-1",children:["At ",u," pontos"]}),h!==null&&e.jsxs("p",{className:"text-gray-600 text-xs mt-2",children:[h," dias de teste restantes"]}),c&&e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:SD(c.maxOwnersPerMediaPoint)})]})})]})}function Dj(t){if(!t)return"Erro inesperado";if(typeof t=="string")return t;if(t instanceof Error)return t.message||"Erro inesperado";const s=t;if(typeof s?.message=="string"&&s.message.trim())return s.message.trim();try{return JSON.stringify(t)}catch{return"Erro inesperado"}}function ea(t){const{enabled:s,mode:n,deps:r,fetcher:o,computeMock:c,mockDelayMs:u=220,fallbackToMock:h=!0}=t,[f,v]=m.useState(0),[x,g]=m.useState({status:s?"loading":"idle",data:void 0,errorMessage:void 0,source:n==="backend"?"backend":"mock"}),N=m.useMemo(()=>n==="backend"?"backend":"mock",[n]);return m.useEffect(()=>{if(!s){g({status:"idle",data:void 0,errorMessage:void 0,source:N});return}g(k=>({...k,status:"loading",errorMessage:void 0,source:N}));const w=new AbortController;let j;return(async()=>{try{if(n==="backend"){if(!o)throw new Error("Fetcher no configurado para modo backend");const E=await o(w.signal);if(w.signal.aborted)return;g({status:"ready",data:E,errorMessage:void 0,source:"backend"});return}if(await new Promise(E=>{j=window.setTimeout(()=>E(),u)}),w.signal.aborted)return;const k=c();if(w.signal.aborted)return;g({status:"ready",data:k,errorMessage:void 0,source:"mock"})}catch(k){if(w.signal.aborted)return;if(n==="backend"&&h)try{const S=c();g({status:"ready",data:S,errorMessage:void 0,source:"mock-fallback"});return}catch(S){const P=Dj(S);g({status:"error",data:void 0,errorMessage:P,source:"backend"});return}const E=Dj(k);g({status:"error",data:void 0,errorMessage:E,source:N})}})(),()=>{w.abort(),j&&window.clearTimeout(j)}},[s,n,f,N,...r]),{...x,refetch:()=>v(w=>w+1)}}const HO=import.meta?.env?.VITE_API_BASE_URL??"";function qO(t,s){const n=(t||"").replace(/\/$/,""),r=(s||"").startsWith("/")?s:`/${s}`;return`${n}${r}`}async function WO(t){try{return await t.text()}catch{return""}}function ZO(t,s){let n=`Erro HTTP ${t}`,r;const o=(s||"").trim();if(o)try{const c=JSON.parse(o);r=c,typeof c?.message=="string"&&c.message.trim()?n=c.message.trim():typeof c?.error=="string"&&c.error.trim()&&(n=c.error.trim())}catch{n=o.length>200?`${o.slice(0,200)}...`:o}return{status:t,message:n,details:r}}async function ta(t,s,n){const r=qO(HO,t)+(s?`?${s}`:""),o=await fetch(r,{method:"GET",credentials:"include",headers:{Accept:"application/json",...n?.headers||{}},signal:n?.signal});if(!o.ok){const c=await WO(o);throw ZO(o.status,c)}if(o.status!==204)return await o.json()}const Ux=import.meta?.env?.VITE_DASHBOARD_DATA_MODE==="backend"?"backend":"mock",Th=20,Zt={overview:"/api/dashboard/overview",funnel:"/api/dashboard/funnel",alerts:"/api/dashboard/alerts",drilldown:"/api/dashboard/drilldown",commercialSummary:"/api/dashboard/commercial/summary",stalledProposals:"/api/dashboard/proposals/stalled",sellerRanking:"/api/dashboard/commercial/sellers/ranking",revenueTimeseries:"/api/dashboard/revenue/timeseries",cashflowTimeseries:"/api/dashboard/cashflow/timeseries",topClients:"/api/dashboard/top/clients",receivablesAgingSummary:"/api/dashboard/receivables/aging/summary",oohOpsSummary:"/api/dashboard/ooh/ops/summary",doohProofOfPlaySummary:"/api/dashboard/dooh/proof-of-play/summary",inventoryMap:"/api/dashboard/inventory/map",inventoryRanking:"/api/dashboard/inventory/ranking"};function ss(t){return((t??0)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Cn(t){let s=2166136261;for(let n=0;n<t.length;n++)s^=t.charCodeAt(n),s=Math.imul(s,16777619);return Math.abs(s)}function Ii(t,s,n){return Math.max(s,Math.min(n,t))}function Vx(t,s=10){const n=[];let r=t%40+20;for(let o=0;o<s;o++){const c=(t+o*97)%11-5;r=Ii(r+c,5,95),n.push(r)}return n}function rr(t){return(t||"").trim().toLowerCase()}function Xr(t,s){const n=rr(t),r=rr(s);return r?n.includes(r):!0}function GO(t){const s=new Set,n=[];for(const r of t)s.has(r.id)||(s.add(r.id),n.push(r));return n}function wn(t,s){return s==="id"?t.id:s==="title"?t.title:s==="subtitle"?t.subtitle:s==="status"?t.status:s==="amountCents"?t.amountCents:t.fields?t.fields[s]:void 0}function gn(t,s){if(t==null)return"";if(s==="currency")return ss(Number(t)||0);if(s==="percent")return`${Math.round(Number(t)||0)}%`;if(s==="datetime"){const n=Date.parse(String(t));return Number.isFinite(n)?new Date(n).toLocaleString("pt-BR"):String(t)}if(s==="date"){const n=Date.parse(String(t));return Number.isFinite(n)?new Date(n).toLocaleDateString("pt-BR"):String(t)}return String(t)}function Qr(t){try{return new Date(t).toLocaleDateString("pt-BR")}catch{return t}}function Tj(t){const s=t.map(c=>(c?.valueCents??0)/100),n=Math.max(...s,1),r=Math.min(...s,0),o=Math.max(1,n-r);return s.map(c=>{const u=(c-r)/o*90+5;return Math.round(Ii(u,5,95))})}function KO(t){const s=[],n=[];return t.query&&(s.push(`busca "${t.query}"`),n.push("Limpe o campo de busca.")),t.city&&(s.push(`cidade/regio "${t.city}"`),n.push("Remova o filtro de cidade/regio.")),t.mediaType&&t.mediaType!=="ALL"&&(s.push(`tipo ${t.mediaType}`),n.push("Tente alternar para OOH + DOOH.")),s.length?{hint:`Com os filtros atuais (${s.join(", ")}), no encontramos resultados.`,suggestions:n}:{hint:void 0,suggestions:void 0}}function QO(t,s){const n=(s||"").trim(),r=KO(t),o=[];return n&&o.push(n.replace(/\.*$/,"")),r.hint&&o.push(r.hint),r.suggestions&&r.suggestions.length&&o.push(`Sugestes: ${r.suggestions.join(" ")}`),o.filter(Boolean).join(" ")}function Dr(t){const s=String(t??"");return/([\n\r";,])/.test(s)?`"${s.replace(/"/g,'""')}"`:s}function $p(t,s,n="text/plain;charset=utf-8"){const r=new Blob([s],{type:n}),o=URL.createObjectURL(r),c=document.createElement("a");c.href=o,c.download=t,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(o)}function vl(t,s,n){const r=(n||[{id:"id",label:"id",get:f=>f.id},{id:"title",label:"item",get:f=>f.title},{id:"subtitle",label:"cidade",get:f=>f.subtitle},{id:"status",label:"status",get:f=>f.status},{id:"amountCents",label:"valor",get:f=>f.amountCents}]).filter(f=>f.csv!==!1),c=[r.map(f=>f.label).map(Dr).join(";")];for(const f of s){const v=r.map(x=>{const g=x.get(f);return x.id==="amountCents"?gn(g,"currency"):x.id.toLowerCase().includes("percent")?gn(g,"percent"):x.id==="lastSeen"?gn(g,"datetime"):x.id==="dueDate"?gn(g,"date"):gn(g)});c.push(v.map(Dr).join(";"))}const h=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"drilldown"}.csv`;$p(h,c.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado",{description:h})}function XO(t,s,n){const o=[["bucket","amount","total"].join(";")];for(const h of s)o.push([Dr(h.label),Dr(ss(h.amountCents)),Dr(typeof n=="number"?ss(n):"")].join(";"));const u=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"dashboard"}_aging.csv`;$p(u,o.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado (mock)",{description:u})}function Ij(t,s){const r=[["date","value"].join(";")];for(const u of s)r.push([Dr(u.date),Dr(ss(u.valueCents))].join(";"));const c=`export_${t.replace(/[^a-z0-9\-\_]+/gi,"_").slice(0,40)||"dashboard"}.csv`;$p(c,r.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado",{description:c})}function hh(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function YO(){return Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(s=>{if(s.tagName.toLowerCase()==="style")return`<style>${s.textContent||""}</style>`;const r=s.href;return r?`<link rel="stylesheet" href="${r}">`:""}).join(`
`)}function JO(){return`
    @page { size: A4; margin: 12mm; }
    html, body { background: white !important; }
    [data-no-print], .no-print, .backend-hint { display: none !important; }
    .print-avoid-break { break-inside: avoid; page-break-inside: avoid; }
    .print-header { display:flex; justify-content:space-between; align-items:flex-start; gap:16px; }
    .print-title { font-size: 16px; font-weight: 700; margin: 0; }
    .print-subtitle { font-size: 12px; color: #6b7280; margin: 4px 0 0 0; }
    .print-meta { margin-top: 10px; display:flex; flex-wrap:wrap; gap:8px; }
    .print-pill { font-size: 11px; color:#374151; background:#f3f4f6; padding:6px 10px; border-radius: 9999px; }
    .print-pill span { color:#6b7280; }
    .print-separator { height: 1px; background:#e5e7eb; margin: 12px 0; }
  `}function e6(t,s){const n=window.open("","_blank","noopener,noreferrer");return n?(n.document.open(),n.document.write(t),n.document.close(),n.document.title=s,n):(ye.error("No foi possvel abrir a janela de impresso. Verifique o bloqueador de pop-ups."),null)}function t6({title:t,subtitle:s,meta:n,contentHtml:r}){const o=YO(),c=JO(),u=(n||[]).filter(v=>v.value).map(v=>`<div class="print-pill"><span>${hh(v.label)}:</span> ${hh(v.value)}</div>`).join(""),h=`
    <!doctype html>
    <html>
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        ${o}
        <style>${c}</style>
      </head>
      <body>
        <div>
          <div class="print-header">
            <div>
              <h1 class="print-title">${hh(t)}</h1>
              ${s?`<p class="print-subtitle">${hh(s)}</p>`:""}
            </div>
          </div>
          ${u?`<div class="print-meta">${u}</div>`:""}
          <div class="print-separator"></div>
          ${r}
        </div>
        <script>
          window.addEventListener('load', () => {
            setTimeout(() => window.print(), 50);
          });
        <\/script>
      </body>
    </html>
  `;e6(h,t)&&ye.success("Abrindo impresso (PDF)...")}function Mj({element:t,title:s,subtitle:n,meta:r}){const o=`<div>${t.outerHTML}</div>`;t6({title:s,subtitle:n,meta:r,contentHtml:o})}function Hx(t){const s={id:"amountCents",label:"Valor",align:"right",sortable:!0,sortKey:"amountCents",get:r=>r.amountCents,render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"currency")})},n={defaultSort:{by:"amountCents",dir:"desc"},columns:[{id:"id",label:"ID",sortable:!0,sortKey:"id",get:r=>r.id},{id:"title",label:"Item",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"status",label:"Status",sortable:!0,sortKey:"status",get:r=>r.status},s]};if(!t)return n;switch(t){case"topClients":return{defaultSort:{by:"amountCents",dir:"desc"},rowAction:{label:"Abrir Comercial",page:"proposals"},columns:[{id:"title",label:"Cliente",sortable:!0,sortKey:"title",get:r=>r.title},{id:"campaignsCount",label:"Campanhas",align:"right",sortable:!0,sortKey:"campaignsCount",get:r=>wn(r,"campaignsCount"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},s]};case"inventoryRanking":return{defaultSort:{by:"occupancyPercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ponto",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"occupancyPercent",label:"Ocupao",align:"right",sortable:!0,sortKey:"occupancyPercent",get:r=>wn(r,"occupancyPercent"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"percent")})},{id:"activeCampaigns",label:"Campanhas",align:"right",sortable:!0,sortKey:"activeCampaigns",get:r=>wn(r,"activeCampaigns"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},{id:"revenueCents",label:"Receita",align:"right",sortable:!0,sortKey:"revenueCents",get:r=>wn(r,"revenueCents")??r.amountCents,render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"currency")})}]};case"inventoryPin":return{defaultSort:{by:"endsAt",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ativo",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Campanha",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"region",label:"Regio",sortable:!0,sortKey:"region",get:r=>wn(r,"region")},{id:"line",label:"Linha",sortable:!0,sortKey:"line",get:r=>wn(r,"line")},{id:"startsAt",label:"Incio",sortable:!0,sortKey:"startsAt",get:r=>wn(r,"startsAt"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"date")})},{id:"endsAt",label:"Fim",sortable:!0,sortKey:"endsAt",get:r=>wn(r,"endsAt"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"date")})},{id:"status",label:"Status",sortable:!0,sortKey:"status",get:r=>r.status},s]};case"inventoryRegionLine":return{defaultSort:{by:"occupancyPercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Ponto",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"region",label:"Regio",sortable:!0,sortKey:"region",get:r=>wn(r,"region")},{id:"line",label:"Linha",sortable:!0,sortKey:"line",get:r=>wn(r,"line")},{id:"occupancyPercent",label:"Ocupao",align:"right",sortable:!0,sortKey:"occupancyPercent",get:r=>wn(r,"occupancyPercent"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"percent")})},{id:"activeCampaigns",label:"Campanhas",align:"right",sortable:!0,sortKey:"activeCampaigns",get:r=>wn(r,"activeCampaigns"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},{id:"revenueCents",label:"Receita",align:"right",sortable:!0,sortKey:"revenueCents",get:r=>wn(r,"revenueCents")??r.amountCents,render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"currency")})}]};case"receivablesOverdue":return{defaultSort:{by:"dueDate",dir:"asc"},rowAction:{label:"Abrir Financeiro",page:"financial"},columns:[{id:"title",label:"Fatura",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cliente",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"dueDate",label:"Vencimento",sortable:!0,sortKey:"dueDate",get:r=>wn(r,"dueDate"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"date")})},s]};case"proofOfPlay":return{defaultSort:{by:"uptimePercent",dir:"desc"},rowAction:{label:"Abrir Inventrio",page:"inventory"},columns:[{id:"title",label:"Tela",sortable:!0,sortKey:"title",get:r=>r.title},{id:"subtitle",label:"Cidade",sortable:!0,sortKey:"subtitle",get:r=>r.subtitle},{id:"uptimePercent",label:"Uptime",align:"right",sortable:!0,sortKey:"uptimePercent",get:r=>wn(r,"uptimePercent"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"percent")})},{id:"plays",label:"Plays",align:"right",sortable:!0,sortKey:"plays",get:r=>wn(r,"plays"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r)})},{id:"lastSeen",label:"ltima",sortable:!0,sortKey:"lastSeen",get:r=>wn(r,"lastSeen"),render:r=>e.jsx("span",{className:"tabular-nums",children:gn(r,"datetime")})}]};case"aging":return{defaultSort:{by:"amountCents",dir:"desc"},rowAction:{label:"Abrir Financeiro",page:"financial"},columns:[{id:"title",label:"Faixa",sortable:!0,sortKey:"title",get:r=>r.title},s]};default:return n}}const En={fetchOverviewKpis:(t,s)=>{const n=Cn(`${t}:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=120+n%90,o=18+n%22,c=28+n%42,u=6+n%12,h=(25e5+n%8e6)*1,f=14+n%30,v=Math.floor(h/Math.max(1,u)),x=18e5+n%7e6,g=6e5+n%35e5,N=8e4+n%9e5,w=46+n%42;return{inventoryTotalPoints:r,proposalsTotal:o,approvalRatePercent:c,campaignsActiveCount:u,campaignsActiveAmountCents:h,clientsActiveCount:f,averageTicketCents:v,revenueRecognizedCents:x,revenueToInvoiceCents:g,receivablesOverdueCents:N,occupancyPercent:w,trends:{revenue:{deltaPercent:n%19-7,points:Vx(n+11)},occupancy:{deltaPercent:n%13-4,points:Vx(n+29)},proposals:{deltaPercent:n%21-8,points:Vx(n+53)}}}},fetchCommercialFunnel:(t,s)=>{const n=Cn(`${t}:funnel:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=[{key:"lead",label:"Leads",count:22+n%20,amountCents:0},{key:"prospect",label:"Prospects",count:14+n%16,amountCents:0},{key:"sent",label:"Propostas Enviadas",count:9+n%10,amountCents:9e5+n%22e5},{key:"approved",label:"Aprovadas",count:4+n%6,amountCents:7e5+n%18e5},{key:"active",label:"Em Veiculao",count:3+n%5,amountCents:65e4+n%15e5}],o=Array.from({length:6}).map((h,f)=>{const v=`PROP-${n%9e3+1e3+f}`;return{id:v,title:`Proposta ${v}`,client:["Alpha","Beta","Gamma","Delta","Epsilon","Zeta"][f%6],daysWithoutUpdate:6+(n+f*17)%23,amountCents:12e4+(n+f*777)%9e5}}),c=rr(s.query),u=c?o.filter(h=>Xr(`${h.id} ${h.title} ${h.client}`,c)):o;return{stages:r,averageDaysToClose:9+n%17,stalledProposals:u}},fetchCommercialSummary:(t,s)=>{const n=Cn(`${t}:commercialSummary:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=En.fetchCommercialFunnel(t,s),o=18+n%28,c=25+n%55,u=r.averageDaysToClose,h=r.stages.reduce((v,x)=>v+(x.amountCents||0),0),f=r.stalledProposals.length;return{proposalsTotal:o,approvalRatePercent:c,averageDaysToClose:u,activePipelineAmountCents:h,stalledProposalsCount:f}},fetchStalledProposals:(t,s)=>({rows:En.fetchCommercialFunnel(t,s).stalledProposals}),fetchSellerRanking:(t,s)=>{const n=Cn(`${t}:sellerRanking:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=["Ana","Bruno","Carla","Diego","Eduarda","Felipe","Giovana","Henrique"],c=Array.from({length:8}).map((f,v)=>{const x=`USR-${n%7e3+2e3+v}`,g=1+(n+v*11)%12,N=1+(n+v*19)%16,w=38e4+(n+v*997)%42e5,j=22e4+(n+v*733)%36e5;return{id:x,name:o[v%o.length],city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][v%5],dealsWon:g,dealsInPipeline:N,amountWonCents:w,amountPipelineCents:j}}),u=rr(s.query),h=u?c.filter(f=>Xr(`${f.id} ${f.name} ${f.city||""}`,u)):c;return h.sort((f,v)=>(v.amountWonCents??0)-(f.amountWonCents??0)),{rows:h}},fetchAlerts:(t,s)=>{const n=Cn(`${t}:alerts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=u=>u[n%u.length],o=[{id:`AL-${n%1e3}`,severity:"HIGH",title:"Faturas vencendo em 7 dias",description:`Voc tem ${3+n%8} cobranas perto do vencimento.`,ctaLabel:"Ver financeiro",ctaPage:"financial"},{id:`AL-${(n+1)%1e3}`,severity:"MEDIUM",title:"Campanhas aguardando material",description:`Existem ${2+n%4} campanhas paradas aguardando envio de material.`,ctaLabel:"Ver campanhas",ctaPage:"campaigns"},{id:`AL-${(n+2)%1e3}`,severity:r(["LOW","MEDIUM"]),title:"Ocupao abaixo do esperado em uma regio",description:"Identificamos pontos com baixa ocupao no perodo selecionado.",ctaLabel:"Ver inventrio",ctaPage:"inventory"}],c=rr(s.query);return c?o.filter(u=>Xr(`${u.title} ${u.description}`,c)):o},fetchDrilldown:(t,s,n,r)=>{const o=r?.params?Object.entries(r.params).sort(([P],[D])=>P.localeCompare(D)).map(([P,D])=>`${P}=${D}`).join("&"):"",c=Cn(`${t}:drill:${s}:${n.datePreset}:${n.query}:${n.city}:${n.mediaType}:${o}`),u=55+c%25,h=rr(n.query),f=Array.from({length:u}).map((P,D)=>{const I=["Braslia","Goinia","So Paulo","Recife","Curitiba"][D%5],O={id:`${s}-${c%9e3+1e3+D}`,title:`${s.toUpperCase()}  Item ${c%90+D+1}`,subtitle:I,amountCents:8e4+(c+D*1234)%14e5,status:["ATIVA","AGUARDANDO","VENCIDA","APROVADA"][D%4],fields:{}};if(s==="topClients"&&(O.title=`Cliente ${c%70+D+1}`,O.status=void 0,O.fields={campaignsCount:1+(c+D)%8,averageTicketCents:Math.floor((O.amountCents||0)/Math.max(1,1+(c+D)%8))}),s==="inventoryRanking"||s==="occupancy"){const F=Ii(35+(c+D*7)%60,0,100);O.title=`Ponto ${String.fromCharCode(65+D%26)}-${c%90+D+1}`,O.status=void 0,O.fields={occupancyPercent:F,activeCampaigns:(c+D)%6,revenueCents:O.amountCents}}if(s==="inventoryPin"){const F=r?.params?.pinId||"PIN",X=new Date;X.setDate(X.getDate()-(D%20+1));const Q=new Date(X);Q.setDate(Q.getDate()+(D%40+7)),O.title=`Ativo ${c%120+D+1}`,O.subtitle=`Campanha ${c%60+D%20+1}  ${F}`,O.status=["ATIVA","PAUSADA","AGENDADA"][D%3],O.fields={region:r?.params?.region,line:r?.params?.line,startsAt:X.toISOString(),endsAt:Q.toISOString()}}if(s==="inventoryRegionLine"){const F=Ii(35+(c+D*7)%60,0,100);O.title=`Ponto ${String.fromCharCode(65+D%26)}-${c%90+D+1}`,O.status=void 0,O.subtitle=r?.params?.region||O.subtitle,O.fields={region:r?.params?.region,line:r?.params?.line,occupancyPercent:F,activeCampaigns:(c+D)%6,revenueCents:O.amountCents}}if(s==="oohOps"){const F=new Date;F.setDate(F.getDate()+(D%12-3)),O.title=`Pendncia OOH ${c%40+D+1}`,O.status=["OK","PENDING","LATE"][D%3],O.amountCents=void 0,O.fields={dueDate:F.toISOString()}}if(s==="proofOfPlay"){const F=new Date;F.setMinutes(F.getMinutes()-(D%180+5)),O.title=`Tela ${c%300+D+1}`,O.status=void 0,O.amountCents=void 0,O.fields={uptimePercent:Ii(72+(c+D*9)%28,0,100),plays:1e3+(c+D*17)%9e3,lastSeen:F.toISOString()}}if(s==="aging"){const F=["0-7","8-15","16-30","31-60","61+"],X=F[D%F.length];O.id=`aging-${X}-${D}`,O.title=X,O.subtitle=void 0,O.status=void 0,O.amountCents=2e4+(c+D*999)%28e5,O.fields={}}return O}),v=h?f.filter(P=>Xr(`${P.id} ${P.title} ${P.subtitle||""} ${P.status||""}`,h)):f,x=r?.sortBy,g=r?.sortDir||"desc",N=x?[...v].sort((P,D)=>{const I=wn(P,x),O=wn(D,x),F=typeof I=="number"?I:Number.NaN,X=typeof O=="number"?O:Number.NaN;let Q=0;if(Number.isFinite(F)&&Number.isFinite(X))Q=F-X;else{const V=I==null?"":String(I),$=O==null?"":String(O),R=Date.parse(V),z=Date.parse($);Number.isFinite(R)&&Number.isFinite(z)?Q=R-z:Q=V.localeCompare($,"pt-BR")}return g==="asc"?Q:-Q}):v,w=Math.max(1,Math.min(r?.limit??Th,100));let j=0;if(r?.cursor){const P=Number.parseInt(String(r.cursor),10);j=Number.isFinite(P)&&P>0?P:0}const C=N.slice(j,j+w),k=j+w,E=k<N.length,S=E?String(k):void 0;return{rows:C,paging:{hasMore:E,nextCursor:S}}},fetchRevenueTimeseries:(t,s)=>{const n=Cn(`${t}:revts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=new Date,o=s.datePreset==="7d"?7:s.datePreset==="30d"?14:18;return{points:Array.from({length:o}).map((u,h)=>{const f=new Date(r);f.setDate(f.getDate()-(o-1-h));const v=35e4+n%9e5,x=(n+h*131)%17-8,g=v+x*42e3+h%3*15e3;return{date:f.toISOString(),valueCents:g}})}},fetchCashflowTimeseries:(t,s)=>{const n=Cn(`${t}:cashts:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=new Date,o=s.datePreset==="7d"?7:s.datePreset==="30d"?14:18;return{points:Array.from({length:o}).map((u,h)=>{const f=new Date(r);f.setDate(f.getDate()-(o-1-h));const v=18e4+n%65e4,x=(n+h*97)%21-10,g=v+x*38e3+(h%4-1)*12e3;return{date:f.toISOString(),valueCents:g}})}},fetchInventoryMap:(t,s)=>{const n=Cn(`${t}:invmap:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=Array.from({length:18}).map((h,f)=>{const v=`MP-${n%9e3+1e3+f}`,x=Ii(35+(n+f*13)%60,0,100);return{id:v,label:`Ponto ${String.fromCharCode(65+f%26)}-${n%90+f+1}`,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],occupancyPercent:x,region:["Centro","Norte","Sul","Leste","Oeste"][f%5],line:["Linha A","Linha B","Linha C"][f%3],lat:-15.7+(n+f*3)%100/1e3,lng:-47.9+(n+f*7)%100/1e3}}),c=rr(s.query);return{pins:c?o.filter(h=>Xr(`${h.id} ${h.label} ${h.city||""}`,c)):o}},fetchInventoryRanking:(t,s)=>{const n=Cn(`${t}:invrank:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=Array.from({length:12}).map((h,f)=>{const v=`UNIT-${n%8e3+2e3+f}`,x=Ii(40+(n+f*17)%55,0,100),g=14e4+(n+f*999)%12e5,N=1+(n+f*29)%6;return{id:v,label:["Painel","Empena","Relgio","Totem","Outdoor"][f%5]+` ${String.fromCharCode(65+f%26)}`,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],occupancyPercent:x,activeCampaigns:N,revenueCents:g}}),c=rr(s.query),u=c?o.filter(h=>Xr(`${h.id} ${h.label} ${h.city||""}`,c)):o;return u.sort((h,f)=>(f.occupancyPercent??0)-(h.occupancyPercent??0)),{rows:u}},fetchTopClients:(t,s)=>{const n=Cn(`${t}:topclients:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Omega","Sigma","Kappa","Lambda"],c=Array.from({length:10}).map((f,v)=>{const x=`CL-${n%6e3+3e3+v}`,g=35e4+(n+v*997)%38e5,N=1+(n+v*37)%6,w=Math.floor(g/Math.max(1,N));return{id:x,name:o[v%o.length]+(v<5?"":` ${String.fromCharCode(65+v%26)}`),city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][v%5],amountCents:g,campaignsCount:N,averageTicketCents:w}}),u=rr(s.query),h=u?c.filter(f=>Xr(`${f.id} ${f.name} ${f.city||""}`,u)):c;return h.sort((f,v)=>(v.amountCents??0)-(f.amountCents??0)),{rows:h}},fetchReceivablesAgingSummary:(t,s)=>{const n=Cn(`${t}:aging:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=9e5+n%55e5,o=[.22,.18,.27,.33],u=["0-7 dias","8-15 dias","16-30 dias","31+ dias"].map((h,f)=>{const v=(n+f*31)%11-5,x=Ii(o[f]+v*.005,.08,.6),g=Math.round(r*x);return{label:h,amountCents:g}});return{totalCents:r,buckets:u}},fetchOohOpsSummary:(t,s)=>{const n=Cn(`${t}:oohops:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=["OK","PENDING","LATE"],c=["Aguardando material","Agendar instalao","Revisar arte","Pendncia de foto","Recolher prova","Confirmar local"],u=Array.from({length:10}).map((x,g)=>{const N=`OPS-${n%7e3+1e3+g}`,w=new Date;w.setDate(w.getDate()+(n+g*7)%12-4);const j=o[(n+g*13)%o.length];return{id:N,title:c[g%c.length],status:j,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][g%5],dueDate:w.toISOString()}}),h=rr(s.query),f=h?u.filter(x=>Xr(`${x.id} ${x.title} ${x.city||""} ${x.status}`,h)):u,v=x=>x==="LATE"?2:x==="PENDING"?1:0;return f.sort((x,g)=>v(g.status)-v(x.status)),{items:f}},fetchDoohProofOfPlaySummary:(t,s)=>{const n=Cn(`${t}:pop:${s.datePreset}:${s.query}:${s.city}:${s.mediaType}`),r=s.city?.trim()||void 0,o=Array.from({length:10}).map((h,f)=>{const v=`SCR-${n%9e3+1e3+f}`,x=Ii(88+(n+f*9)%15,0,100),g=1200+(n+f*77)%6200,N=new Date;return N.setMinutes(N.getMinutes()-(n+f*23)%600),{id:v,screen:`Tela ${String.fromCharCode(65+f%26)}-${n%90+f+1}`,city:r||["Braslia","Goinia","So Paulo","Recife","Curitiba"][f%5],uptimePercent:x,plays:g,lastSeen:N.toISOString()}}),c=rr(s.query),u=c?o.filter(h=>Xr(`${h.id} ${h.screen} ${h.city||""}`,c)):o;return u.sort((h,f)=>(f.uptimePercent??0)-(h.uptimePercent??0)),{rows:u}},getPublicMapUrl:t=>{const s=Cn(t);return`https://onemedia.app/public/map/${t}?t=${s%1e5}`}};function s6(t){const s=new Date,n=new Date(s);return t==="7d"?n.setDate(n.getDate()-7):t==="30d"?n.setDate(n.getDate()-30):t==="90d"?n.setDate(n.getDate()-90):t==="ytd"&&(n.setMonth(0,1),n.setHours(0,0,0,0)),{dateFrom:n.toISOString(),dateTo:s.toISOString()}}function rC(t){const{dateFrom:s,dateTo:n}=s6(t.datePreset);return{dateFrom:s,dateTo:n,q:t.query?.trim()?t.query.trim():void 0,city:t.city?.trim()?t.city.trim():void 0,mediaType:t.mediaType==="ALL"?void 0:t.mediaType}}function Ih(t,s){const n=new URLSearchParams,r={dateFrom:t.dateFrom,dateTo:t.dateTo,q:t.q,city:t.city,mediaType:t.mediaType,...s||{}};for(const[o,c]of Object.entries(r)){if(c==null)continue;const u=String(c).trim();u&&n.set(o,u)}return n.toString()}function W0(t){return typeof t=="string"?t:""}function Mh(t){return Array.isArray(t)?t.map(W0).filter(Boolean):typeof t=="string"?[t]:[]}function qx(t,s){const n=t.map(r=>r.toLowerCase());return s.some(r=>n.includes(r.toLowerCase()))}function n6(t){const s=W0(t?.role||t?.type||t?.profile),n=Mh(t?.roles),r=Mh(t?.permissions||t?.perms),o=Mh(t?.scopes),c=[s,...n,...r,...o].filter(Boolean);return{role:s,roles:n,perms:r,scopes:o,all:c}}function a6(t){const s=Mh(t?.modules||t?.features||t?.enabledModules),n=W0(t?.plan||t?.tier),r=[...s,n].filter(Boolean);return{modules:s,plan:n,all:r}}function r6(t,s){const n=n6(t),r=a6(s),o=["finance","financial","billing","invoices","payments","contas","faturamento","financeiro","DASHBOARD_FINANCE","dashboard:finance","finance:read","billing:read"],c=qx(n.all,o)||qx(r.all,o),u=["readonly","read_only","DASHBOARD_VIEWS_READONLY","dashboard:views:readonly"],h=!qx(n.all,u);return{allowedTabs:["executivo","comercial","operacoes",...c?["financeiro"]:[],"inventario"],canViewFinance:c,canManageSavedViews:h}}function iC(t,s){return`oneMedia.dashboard.savedViews.v1:${t}:${s}`}function i6(){const t=typeof crypto<"u"?crypto:void 0;return t&&typeof t.randomUUID=="function"?t.randomUUID():`view_${Date.now()}_${Math.random().toString(16).slice(2)}`}function Wx(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function o6(t){if(!Wx(t))return null;const s=typeof t.id=="string"?t.id:void 0,n=typeof t.name=="string"?t.name:void 0,r=typeof t.tab=="string"?t.tab:void 0,o=Wx(t.filters)?t.filters:void 0,c=Wx(t.layout)?t.layout:{version:1},u=typeof t.createdAt=="string"?t.createdAt:new Date().toISOString(),h=typeof t.updatedAt=="string"?t.updatedAt:u;return!s||!n||!r||!o?null:{id:s,name:n,tab:r,filters:o,layout:c,createdAt:u,updatedAt:h}}function Z0(t,s){if(typeof window>"u")return[];try{const n=window.localStorage.getItem(iC(t,s));if(!n)return[];const r=JSON.parse(n);if(!Array.isArray(r))return[];const o=r.map(o6).filter(c=>c!==null);return o.sort((c,u)=>c.updatedAt<u.updatedAt?1:-1),o}catch{return[]}}function oC(t,s,n){if(!(typeof window>"u"))try{window.localStorage.setItem(iC(t,s),JSON.stringify(n))}catch{}}function l6(t,s,n){const r=Z0(t,s),o=r.findIndex(u=>u.id===n.id),c=[...r];return o>=0?c[o]=n:c.unshift(n),c.sort((u,h)=>u.updatedAt<h.updatedAt?1:-1),oC(t,s,c),c}function c6(t,s,n){const o=Z0(t,s).filter(c=>c.id!==n);return oC(t,s,o),o}const d6=50,Po=new Map;function u6(t,s){for(Po.has(t)&&Po.delete(t),Po.set(t,s);Po.size>d6;){const n=Po.keys().next().value;if(!n)break;Po.delete(n)}}function xa(t,s){const[n,r]=m.useState(()=>Po.get(t)?.value);return m.useEffect(()=>{const o=Po.get(t);r(o?.value)},[t]),m.useEffect(()=>{if(s?.status!=="ready"||s.data===void 0||s.data===null)return;const o={value:s.data,ts:Date.now()};u6(t,o),r(s.data)},[t,s?.status,s?.data]),s?.data??n}function m6(){try{const s=new URL(window.location.href).searchParams.get("dashboardMetrics");return s==="1"||s==="true"?!0:window.localStorage.getItem("dashboard.metrics")==="1"}catch{return!1}}function sa(t,s,n){const r=m.useMemo(()=>typeof window<"u"?m6():!1,[]),o=m.useRef(null),c=m.useRef(""),u=`${n.companyId||""}|${n.tab||""}|${n.backendQs||""}`;m.useEffect(()=>{if(r){if(s.status==="loading"){o.current=performance.now();return}if((s.status==="ready"||s.status==="error")&&o.current!=null){const h=Math.max(0,Math.round(performance.now()-o.current)),f=`${t}|${u}|${s.status}|${s.source||""}|${h}`;if(f===c.current){o.current=null;return}c.current=f;const v={widgetKey:t,status:s.status,ms:h,source:s.source,companyId:n.companyId,tab:n.tab,backendQs:n.backendQs,error:s.status==="error"?s.errorMessage||"unknown":void 0};h>=1500?console.warn("[dashboard][widget]",v):console.info("[dashboard][widget]",v),o.current=null}}},[r,t,u,s.status,s.source,s.errorMessage,n.companyId,n.tab,n.backendQs])}let Rj=!1;function h6(){try{const s=new URL(window.location.href).searchParams.get("dashboardQa");return s==="1"||s==="true"?!0:window.localStorage.getItem("dashboard.qa")==="1"}catch{return!1}}function yl(t,s){if(!t)throw new Error(s)}function p6(){if(!Rj&&!(typeof window>"u")&&h6()){Rj=!0;try{yl(Dr("abc")==="abc","escapeCsvValue basic"),yl(Dr("a;b").includes('"'),"escapeCsvValue delimiter"),yl(Dr(`a
 b`).includes('"'),"escapeCsvValue newline");const t=rC({datePreset:"30d",query:"  hello  ",city:"  ",mediaType:"ALL"});yl(t.q==="hello","buildDashboardBackendQuery trims query"),yl(t.city===void 0,"buildDashboardBackendQuery omits empty city");const s=Ih(t);yl(s.includes("q=hello"),"toQueryString includes trimmed q"),yl(!s.includes("city="),"toQueryString omits empty city"),console.info("[dashboard][qa] ok")}catch(t){console.error("[dashboard][qa] failed",t)}}}class f6 extends m.Component{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(s){try{this.props.onError?.(s)}catch{}}render(){return this.state.hasError?this.props.fallback:this.props.children}}const x6="oneMedia.dashboard.rollout.config.v1",g6="oneMedia.dashboard.rollout.force.v1",G0=()=>typeof window<"u"?window:null;function Hc(t){return(t||"").trim()}function lC(t){const s=G0();if(!s)return null;try{const n=s.localStorage.getItem(t);return n?JSON.parse(n):null}catch{return null}}function v6(t,s){const n=G0();if(n)try{n.localStorage.setItem(t,JSON.stringify(s))}catch{}}function ru(t){try{return import.meta?.env?.[t]||void 0}catch{return}}function ph(t){return t?t.split(",").map(s=>s.trim()).filter(Boolean):[]}function y6(){const t=G0();return t?new URLSearchParams(t.location.search):new URLSearchParams}function cC(t,s){return`${g6}:${Hc(t)||"na"}:${Hc(s)||"na"}`}function Oj(t){const s=t.ttlMs??864e5,n=Date.now()+s,r={variant:t.variant,until:n,reason:t.reason};v6(cC(t.companyId,t.userId),r)}function b6(){const t=lC(x6)||{},s=ru("VITE_DASHBOARD_ROLLOUT_DEFAULT"),n=ph(ru("VITE_DASHBOARD_ROLLOUT_ENABLED_COMPANIES")),r=ph(ru("VITE_DASHBOARD_ROLLOUT_ENABLED_USERS")),o=ph(ru("VITE_DASHBOARD_ROLLOUT_DISABLED_COMPANIES")),c=ph(ru("VITE_DASHBOARD_ROLLOUT_DISABLED_USERS"));return{defaultVariant:t.defaultVariant||(s==="compact"?"compact":s==="v2"?"v2":void 0),enabledCompanies:fh([...t.enabledCompanies||[],...n]),enabledUsers:fh([...t.enabledUsers||[],...r]),disabledCompanies:fh([...t.disabledCompanies||[],...o]),disabledUsers:fh([...t.disabledUsers||[],...c])}}function fh(t){const s=new Set;return t.forEach(n=>{const r=Hc(n);r&&s.add(r)}),Array.from(s)}function j6(t){const s=(t||"").trim().toLowerCase();return s?s==="v2"||s==="new"?"v2":s==="compact"||s==="safe"||s==="v1"||s==="off"?"compact":null:null}function N6(t){const s=(t||"").trim().toLowerCase();if(s){if(s==="backend")return"backend";if(s==="mock")return"mock"}}function w6(t){const s=Hc(t.companyId),n=Hc(t.userId)||Hc(t.userEmail),r=!!t.canOverride,o=y6(),c=o.get("dashboard"),u=o.get("dashboardData"),h=j6(c),f=N6(u);if(h)return{variant:h,reason:`Override por URL (?dashboard=${c})`,source:"query",dataModeOverride:f,canOverride:r,debug:{queryDashboard:c||void 0,queryDataMode:u||void 0}};const v=lC(cC(s,n));if(v&&typeof v.until=="number"&&v.until>Date.now())return{variant:v.variant,reason:v.reason||"Override forado (rollback/mitigao)",source:"forced",dataModeOverride:f,canOverride:r,debug:{forcedUntil:v.until,forcedVariant:v.variant,queryDataMode:u||void 0}};const x=b6(),g=new Set(x.disabledCompanies||[]),N=new Set(x.disabledUsers||[]),w=new Set(x.enabledCompanies||[]),j=new Set(x.enabledUsers||[]);if(s&&g.has(s))return{variant:"compact",reason:"Bloqueado por empresa (denylist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};if(n&&N.has(n))return{variant:"compact",reason:"Bloqueado por usurio (denylist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};if(s&&w.has(s))return{variant:"v2",reason:"Habilitado por empresa (allowlist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};if(n&&j.has(n))return{variant:"v2",reason:"Habilitado por usurio (allowlist)",source:"config",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}};const C=x.defaultVariant||"v2";return{variant:C,reason:C==="v2"?"Padro (v2)":"Padro (compact)",source:x.defaultVariant?"env":"default",dataModeOverride:f,canOverride:r,debug:{queryDataMode:u||void 0}}}const dC=[{id:"overview-kpis",title:"KPIs principais (Executivo)",description:"Comparar os KPIs do topo com a fonte oficial (relatorios/queries do backend).",route:Zt.overview,fields:["inventoryTotalPoints","proposalsTotal","approvalRatePercent","campaignsActiveCount","revenueTotal","revenueMtd","revenueYtd","receivablesOpen"],tolerance:0},{id:"commercial-funnel",title:"Funil Comercial",description:"Conferir volumes por etapa e totals.",route:Zt.funnel,fields:["stages[].count","stages[].value","totalCount","totalValue"],tolerance:0},{id:"inventory-map",title:"Inventario / Mapa (pins)",description:"Conferir contagem de pontos, ocupacao e coordenadas (lat/lng).",route:Zt.inventoryMap,fields:["pins[].id","pins[].lat","pins[].lng","pins[].occupancy","pins[].region","pins[].line"]},{id:"inventory-ranking",title:"Inventario / Ranking",description:"Conferir top pontos por performance.",route:Zt.inventoryRanking,fields:["rows[].id","rows[].name","rows[].occupancy","rows[].impressions"]},{id:"finance-aging",title:"Financeiro / Aging",description:"Conferir buckets (faixas) e totals.",route:Zt.receivablesAgingSummary,fields:["buckets[].label","buckets[].amount","totalOpen"]},{id:"ops-proof-of-play",title:"Operacoes / Proof of Play",description:"Conferir eventos POP no periodo do filtro.",route:Zt.doohProofOfPlaySummary,fields:["rows[].mediaId","rows[].plays","rows[].lastPlayedAt"]}],C6="oneMedia.dashboard.parity.marks.v1";function K0(t,s){const n=(t||"na").trim(),r=(s||"na").trim();return`${C6}:${n}:${r}`}function S6(t,s){if(typeof window>"u")return{};try{const n=window.localStorage.getItem(K0(t,s));if(!n)return{};const r=JSON.parse(n);return r&&typeof r=="object"?r:{}}catch{return{}}}function _6(t,s,n){if(!(typeof window>"u"))try{window.localStorage.setItem(K0(t,s),JSON.stringify(n))}catch{}}function A6(t,s,n,r){const o={...n,[r]:!n[r]};return _6(t,s,o),o}function P6(t,s){if(!(typeof window>"u"))try{window.localStorage.removeItem(K0(t,s))}catch{}}function E6(){return dC.map(t=>`- [ ] ${t.title}  (${t.route})
  Campos: ${t.fields.join(", ")}`).join(`
`)}function Ri({className:t=""}){return e.jsx("div",{className:`animate-pulse rounded bg-gray-100 ${t}`})}function uC({title:t,description:s}){return e.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t}),s?e.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-sm",children:s}):null]})}function mC({title:t,description:s}){return e.jsxs("div",{className:"py-8",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t}),s?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s}):null]})}function Rg({points:t}){if(!t||t.length===0)return null;const s=80,n=24,r=t.map((u,h)=>h/Math.max(1,t.length-1)*s),o=t.map(u=>n-u/100*n),c=t.map((u,h)=>`${h===0?"M":"L"} ${r[h].toFixed(2)} ${o[h].toFixed(2)}`).join(" ");return e.jsx("svg",{width:s,height:n,viewBox:`0 0 ${s} ${n}`,children:e.jsx("path",{d:c,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400"})})}function k6({value:t}){const s=t>0?"+":"",n=t>0?"text-green-600":t<0?"text-red-600":"text-gray-500";return e.jsxs("span",{className:`text-xs ${n}`,children:[s,t,"%"]})}function iu({active:t,icon:s,label:n,onClick:r}){return e.jsxs("button",{type:"button",onClick:r,className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors border ${t?"bg-white text-gray-900 border-gray-200 shadow-sm":"bg-transparent text-gray-600 border-transparent hover:bg-white/60"}`,children:[s,n]})}function Di({label:t,value:s}){return e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 text-xs whitespace-nowrap",children:[e.jsxs("span",{className:"text-gray-500",children:[t,":"]})," ",s]})}function D6({severity:t}){const s=t==="HIGH"?"bg-red-500":t==="MEDIUM"?"bg-yellow-500":"bg-green-500";return e.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${s}`})}function ar({id:t,title:s,subtitle:n,actions:r,loading:o,error:c,empty:u,emptyTitle:h,emptyDescription:f,children:v}){return e.jsx("div",{id:t,className:"print-avoid-break",children:e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(Bo,{children:s}),n?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n}):null]}),r?e.jsx("div",{className:"flex items-center gap-2","data-no-print":!0,children:r}):null]})}),e.jsx(Le,{children:o?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ri,{className:"h-5 w-1/2"}),e.jsx(Ri,{className:"h-5 w-2/3"}),e.jsx(Ri,{className:"h-32 w-full"})]}):c?e.jsx(mC,{title:c.title,description:c.description}):u?e.jsx(uC,{title:h||"Sem dados",description:f}):v})]})})}function fn({label:t,value:s,helper:n,delta:r,spark:o,onClick:c,loading:u}){return e.jsx(Re,{className:c?"cursor-pointer hover:shadow-sm":"",onClick:c,children:e.jsxs(Le,{className:"pt-5",children:[e.jsx("p",{className:"text-xs text-gray-500",children:t}),u?e.jsxs("div",{className:"mt-2",children:[e.jsx(Ri,{className:"h-7 w-2/3"}),e.jsx(Ri,{className:"h-4 w-1/2 mt-2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-900 mt-1",children:s||""}),n?e.jsx("p",{className:`text-xs text-gray-500 mt-2 ${n.includes("BACKEND:")?"backend-hint":""}`.trim(),children:n}):null,typeof r=="number"&&o?e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(k6,{value:r}),e.jsx(Rg,{points:o})]}):null]})]})})}function xh(t,s,n){return Math.max(s,Math.min(n,t))}function Lj(t){return t>=75?"bg-red-500 border-red-600":t>=45?"bg-yellow-400 border-yellow-500":"bg-green-500 border-green-600"}function T6(t){return t>=75?{label:"Alta",className:"text-red-700 bg-red-50 border-red-200"}:t>=45?{label:"Media",className:"text-yellow-800 bg-yellow-50 border-yellow-200"}:{label:"Baixa",className:"text-green-700 bg-green-50 border-green-200"}}function I6(){const t=m.useRef(null),[s,n]=m.useState({width:0,height:0});return m.useEffect(()=>{const r=t.current;if(!r)return;const o=new ResizeObserver(c=>{const u=c[0];if(!u)return;const h=u.contentRect;n({width:Math.round(h.width),height:Math.round(h.height)})});return o.observe(r),()=>o.disconnect()},[]),{ref:t,...s}}function hC(t){return t.map((r,o)=>{const c=typeof r.lat=="number"?r.lat:-15.78+(o%9-4)*.01,u=typeof r.lng=="number"?r.lng:-47.9+(o%11-5)*.01,h=String(r.region||r.city||"Regiao").trim()||"Regiao",f=String(r.line||`Linha ${String.fromCharCode(65+o%3)}`).trim()||"Linha";return{...r,lat:c,lng:u,regionSafe:h,lineSafe:f}})}function M6(t,s,n){const r=hC(t),o=r.map(C=>C.lat),c=r.map(C=>C.lng),u=Math.min(...o),h=Math.max(...o),f=Math.min(...c),v=Math.max(...c),x=24,g=Math.max(1,s-x*2),N=Math.max(1,n-x*2),w=Math.max(1e-9,h-u),j=Math.max(1e-9,v-f);return r.map(C=>{const k=(C.lng-f)/j,E=(C.lat-u)/w,S=x+k*g,P=x+(1-E)*N;return{...C,x:S,y:P,regionSafe:C.regionSafe,lineSafe:C.lineSafe}})}function R6(t,s){const r=34/Math.max(.6,s),o=new Set,c=[];for(let u=0;u<t.length;u++){const h=t[u];if(o.has(h.id))continue;const f=[h];o.add(h.id);for(let N=u+1;N<t.length;N++){const w=t[N];if(o.has(w.id))continue;const j=w.x-h.x,C=w.y-h.y;Math.sqrt(j*j+C*C)<=r&&(f.push(w),o.add(w.id))}if(f.length===1){c.push({id:`pin:${h.id}`,x:h.x,y:h.y,count:1,occupancyAvg:h.occupancyPercent,pins:[h]});continue}const v=Math.round(f.reduce((N,w)=>N+w.x,0)/f.length),x=Math.round(f.reduce((N,w)=>N+w.y,0)/f.length),g=f.reduce((N,w)=>N+(w.occupancyPercent||0),0)/f.length;c.push({id:`cluster:${f[0].id}:${f.length}`,x:v,y:x,count:f.length,occupancyAvg:g,pins:f})}return c}function O6(t){return t>=75?"bg-red-100 border-red-200":t>=45?"bg-yellow-100 border-yellow-200":"bg-green-100 border-green-200"}function L6(t){const s=m.useMemo(()=>hC(t.pins),[t.pins]),n=m.useMemo(()=>{const c=new Set;for(const u of s)c.add(u.regionSafe);return Array.from(c).slice(0,6)},[s]),r=m.useMemo(()=>{const c=new Set;for(const u of s)c.add(u.lineSafe);return Array.from(c).slice(0,5)},[s]),o=m.useMemo(()=>{const c=new Map;for(const u of s){const h=`${u.regionSafe}::${u.lineSafe}`,f=c.get(h)||{sum:0,count:0};c.set(h,{sum:f.sum+(u.occupancyPercent||0),count:f.count+1})}return c},[s]);return n.length===0||r.length===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(up,{className:"w-4 h-4 text-gray-700"}),e.jsx("p",{className:"text-sm text-gray-900",children:"Ocupacao por regiao e linha"}),e.jsx("p",{className:"text-xs text-gray-500",children:"(clique para abrir lista)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left font-medium text-gray-700 px-2 py-2 border-b border-gray-200",children:"Regiao"}),r.map(c=>e.jsx("th",{className:"text-left font-medium text-gray-700 px-2 py-2 border-b border-gray-200",children:c},c))]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 border-b border-gray-100 text-gray-900 whitespace-nowrap",children:c}),r.map(u=>{const h=`${c}::${u}`,f=o.get(h),v=f&&f.count?f.sum/f.count:0,x=f?.count||0;return e.jsx("td",{className:"px-2 py-2 border-b border-gray-100",children:e.jsx("button",{type:"button",className:`w-full border rounded-md px-2 py-1 text-left ${O6(v)}`,onClick:()=>t.onSelect?.(c,u),disabled:x===0,title:x===0?"Sem pontos":"Abrir drilldown",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"tabular-nums text-gray-900",children:[Math.round(v),"%"]}),e.jsx("span",{className:"text-gray-600",children:x})]})})},h)})]},c))})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-green-200 border border-green-300"}),"baixa"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-yellow-200 border border-yellow-300"}),"media"]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-sm bg-red-200 border border-red-300"}),"alta"]})]})]})}function F6(t){const s=t.height??320,{ref:n,width:r}=I6(),o=m.useMemo(()=>M6(t.pins,Math.max(1,r),s),[t.pins,r,s]),[c,u]=m.useState(1),[h,f]=m.useState({x:0,y:0}),[v,x]=m.useState(!1),g=m.useRef(null),[N,w]=m.useState(!0),[j,C]=m.useState(!0),[k,E]=m.useState(null),S=m.useMemo(()=>N?c>=2.2?o.map(R=>({id:`pin:${R.id}`,x:R.x,y:R.y,count:1,occupancyAvg:R.occupancyPercent,pins:[R]})):R6(o,c):o.map(R=>({id:`pin:${R.id}`,x:R.x,y:R.y,count:1,occupancyAvg:R.occupancyPercent,pins:[R]})),[o,c,N]),P=m.useCallback(R=>{if(R.preventDefault(),!r)return;const J=R.deltaY>0?.92:1.08,ue=xh(c*J,.8,6);if(ue==c)return;const se=R.currentTarget.getBoundingClientRect(),fe=R.clientX-se.left,H=R.clientY-se.top,re=fe-(fe-h.x)*(ue/c),G=H-(H-h.y)*(ue/c);u(ue),f({x:re,y:G})},[c,h.x,h.y,r]),D=m.useCallback(R=>{R.currentTarget.setPointerCapture(R.pointerId),x(!0),g.current={x:R.clientX,y:R.clientY,panX:h.x,panY:h.y}},[h.x,h.y]),I=m.useCallback(R=>{if(!v||!g.current)return;const z=R.clientX-g.current.x,J=R.clientY-g.current.y;f({x:g.current.panX+z,y:g.current.panY+J})},[v]),O=m.useCallback(()=>{x(!1),g.current=null},[]),F=m.useCallback(()=>{u(1),f({x:0,y:0})},[]),X=m.useCallback((R,z,J)=>{const ue=n.current;if(!ue){u(J);return}const se=ue.getBoundingClientRect(),fe=se.width/2,H=se.height/2;u(J),f({x:fe-R*J,y:H-z*J})},[n]),Q=m.useCallback(()=>u(R=>xh(R*1.25,.8,6)),[]),V=m.useCallback(()=>u(R=>xh(R*.8,.8,6)),[]),$=m.useMemo(()=>[{label:"0-44% (baixa)",dot:"bg-green-500 border-green-600"},{label:"45-74% (media)",dot:"bg-yellow-400 border-yellow-500"},{label:"75-100% (alta)",dot:"bg-red-500 border-red-600"}],[]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:F,title:"Reset view",children:e.jsx(sd,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:V,title:"Zoom out",children:e.jsx(n4,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:Q,title:"Zoom in",children:e.jsx(kn,{className:"w-4 h-4"})}),e.jsxs(Z,{variant:"outline",className:"h-9",onClick:()=>w(R=>!R),title:"Clusters",children:[e.jsx(up,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2 text-sm",children:N?"Cluster":"Pins"})]}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>C(R=>!R),title:"Heatmap",children:e.jsx("span",{className:"text-sm",children:j?"Heat ON":"Heat OFF"})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"tabular-nums",children:["Zoom ",c.toFixed(2),"x"]}),e.jsx("span",{children:""}),e.jsxs("span",{className:"tabular-nums",children:[t.pins.length," pins"]})]})]}),e.jsxs("div",{ref:n,className:"relative w-full rounded-lg border border-gray-200 overflow-hidden select-none",style:{height:s},onWheel:P,onPointerDown:D,onPointerMove:I,onPointerUp:O,onPointerCancel:O,children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:"0 0"}}),e.jsx("div",{className:"absolute inset-0",style:{transform:`translate(${h.x}px, ${h.y}px) scale(${c})`,transformOrigin:"0 0"},children:e.jsxs("div",{className:"relative",style:{width:Math.max(1,r),height:s},children:[j&&o.map(R=>e.jsx("div",{className:"absolute rounded-full blur-2xl opacity-40",style:{left:R.x-28,top:R.y-28,width:56,height:56},children:e.jsx("div",{className:`w-full h-full rounded-full ${Lj(R.occupancyPercent).split(" ")[0]} opacity-30`})},`heat:${R.id}`)),S.map(R=>{const z=R.count>1,J=z?30:16,ue=R.x-J/2,se=R.y-J/2,fe=Lj(R.occupancyAvg),H=!z&&R.pins[0]&&R.pins[0].id===t.selectedPinId;return e.jsx("button",{type:"button",className:`absolute rounded-full border ${fe} flex items-center justify-center text-white shadow-sm ${H?"ring-2 ring-gray-900 ring-offset-2":""}`,style:{left:ue,top:se,width:J,height:J},onClick:re=>{if(re.stopPropagation(),z){X(R.x,R.y,xh(c*1.7,.8,6));return}const G=R.pins[0];G&&t.onPinClick?.(G)},onMouseEnter:re=>{const G=R.pins[0];if(!G)return;const W=re.currentTarget.getBoundingClientRect();E({x:W.left+W.width/2,y:W.top,title:z?`${R.count} pins`:G.label,subtitle:z?"Cluster":G.city||G.region,occ:Math.round(R.occupancyAvg)})},onMouseLeave:()=>E(null),title:z?`${R.count} pontos`:R.pins[0]?.label,children:z?e.jsx("span",{className:"text-xs font-semibold tabular-nums",children:R.count}):null},R.id)})]})}),e.jsx("div",{className:"absolute left-3 bottom-3 bg-white/90 backdrop-blur rounded-md border border-gray-200 px-2 py-2 space-y-1",children:$.map(R=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-sm border ${R.dot}`}),e.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:R.label})]},R.label))})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.pins.slice(0,8).map(R=>{const z=T6(R.occupancyPercent);return e.jsxs("button",{type:"button",className:`text-xs px-2 py-1 rounded-md border ${z.className} hover:opacity-90`,onClick:()=>t.onPinClick?.(R),children:[R.label," ",e.jsxs("span",{className:"tabular-nums",children:[Math.round(R.occupancyPercent),"%"]})]},R.id)})}),k?e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:k.x,top:k.y,transform:"translate(-50%, -8px)"},children:e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white shadow-lg px-3 py-2",children:[e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:k.title}),k.subtitle?e.jsx("p",{className:"text-xs text-gray-500",children:k.subtitle}):null,e.jsxs("p",{className:"text-xs text-gray-700",children:["Ocupacao: ",e.jsxs("span",{className:"tabular-nums",children:[k.occ,"%"]})]})]})}):null]})}function Fj({onNavigate:t}){const{user:s}=Fl(),{company:n}=Fo(),[r,o]=m.useState("executivo"),c={datePreset:"30d",query:"",city:"",mediaType:"ALL"},[u,h]=m.useState(c),[f,v]=m.useState(c),[x,g]=m.useState(!1);m.useEffect(()=>{if(!(u.query!==f.query||u.city!==f.city)){g(!1);return}g(!0);const Ee=window.setTimeout(()=>{v($t=>({...$t,query:u.query,city:u.city})),g(!1)},350);return()=>window.clearTimeout(Ee)},[u.query,u.city,f.query,f.city]);const N=m.useMemo(()=>r6(s,n),[s,n]),w=m.useMemo(()=>w6({companyId:n?.id,userId:s?.id,userEmail:s?.email,canOverride:N.canManageSavedViews}),[n?.id,s?.id,s?.email,N.canManageSavedViews]),[j,C]=m.useState(()=>{const oe=w.dataModeOverride??Ux;return w.variant==="compact"?"mock":oe});m.useEffect(()=>{const oe=w.dataModeOverride??Ux;C(w.variant==="compact"?"mock":oe)},[w.dataModeOverride,w.variant]),m.useEffect(()=>{if(j==="backend")try{sessionStorage.getItem("oneMedia.dashboard.dataMode.session")==="mock"&&C("mock")}catch{}},[j]);const k=oe=>{w.canOverride&&(Oj({companyId:n?.id,userId:s?.id||s?.email,variant:oe,ttlMs:1440*60*1e3,reason:"Override manual (Etapa 16)"}),window.location.reload())},[E,S]=m.useState(!1),[P,D]=m.useState({});m.useEffect(()=>{D(S6(n?.id,s?.id||s?.email))},[n?.id,s?.id,s?.email]);const I=m.useMemo(()=>String(n?.id??""),[n]),O=m.useMemo(()=>{const oe=s;return String(oe?.id??oe?.uid??oe?.userId??oe?.email??"")},[s]),[F,X]=m.useState([]),[Q,V]=m.useState(""),[$,R]=m.useState(!1),[z,J]=m.useState("create"),[ue,se]=m.useState(""),fe=m.useMemo(()=>(N.allowedTabs||[]).join("|"),[N.allowedTabs]),[H,re]=m.useState(!1),[G,W]=m.useState(!1),ne=m.useMemo(()=>rC(f),[f]),K=m.useMemo(()=>Ih(ne),[ne]),[ee,U]=m.useState({open:!1,key:void 0,title:"",rows:[],hint:void 0,status:"idle",errorMessage:void 0,sortBy:void 0,sortDir:void 0,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""}),le=ea({enabled:!!n,mode:j,deps:[n?.id,K],computeMock:()=>En.fetchOverviewKpis(n.id,f),fetcher:oe=>ta(Zt.overview,K,{signal:oe})}),Y=ea({enabled:!!n,mode:j,deps:[n?.id,K],computeMock:()=>En.fetchCommercialFunnel(n.id,f),fetcher:oe=>ta(Zt.funnel,K,{signal:oe})}),ae=ea({enabled:!!n&&r==="comercial",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchCommercialSummary(n.id,f),fetcher:oe=>ta(Zt.commercialSummary,K,{signal:oe})}),Ie=ea({enabled:!!n&&r==="comercial",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchStalledProposals(n.id,f),fetcher:oe=>ta(Zt.stalledProposals,K,{signal:oe})}),$e=ea({enabled:!!n&&r==="comercial",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchSellerRanking(n.id,f),fetcher:oe=>ta(Zt.sellerRanking,K,{signal:oe})}),Ge=ea({enabled:!!n,mode:j,deps:[n?.id,K],computeMock:()=>En.fetchAlerts(n.id,f),fetcher:oe=>ta(Zt.alerts,K,{signal:oe})}),Xe=m.useMemo(()=>ee.key?Ih(ne,{cursor:ee.cursor,limit:String(Th),sortBy:ee.sortBy,sortDir:ee.sortDir,...ee.params||{}}):K,[ne,K,ee.key,ee.cursor,ee.sortBy,ee.sortDir,ee.params]),Je=ea({enabled:!!n&&ee.open&&!!ee.key,mode:j,deps:[n?.id,ee.key,Xe],computeMock:()=>En.fetchDrilldown(n.id,ee.key,f,{cursor:ee.cursor,limit:Th,sortBy:ee.sortBy,sortDir:ee.sortDir,params:ee.params}),fetcher:oe=>ta(`${Zt.drilldown}/${ee.key}`,Xe,{signal:oe})});m.useEffect(()=>{ee.open&&U(oe=>({...oe,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:oe.key?"loading":oe.status,errorMessage:void 0}))},[K]),m.useEffect(()=>{if(!(!ee.open||!ee.key)){if(Je.status==="loading"){U(oe=>({...oe,status:"loading",errorMessage:void 0}));return}if(Je.status==="error"){U(oe=>({...oe,status:"error",errorMessage:Je.errorMessage||"Erro inesperado ao carregar detalhes"}));return}if(Je.status==="ready"){const oe=Je.data,Ee=oe?.paging||{},$t=Ee.nextCursor??Ee.cursor,us=!!(Ee.hasMore&&$t),Ut=oe?.rows||[];U(Zs=>{const mn=!!(Zs.cursor&&Zs.rows.length>0)?GO([...Zs.rows||[],...Ut]):Ut;return{...Zs,rows:mn,status:"ready",errorMessage:void 0,hasMore:us,nextCursor:$t}})}}},[ee.open,ee.key,Je.status,Je.data,Je.errorMessage]);const tt=ea({enabled:!!n&&r==="executivo",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchRevenueTimeseries(n.id,f),fetcher:oe=>ta(Zt.revenueTimeseries,K,{signal:oe})}),ut=ea({enabled:!!n&&r==="financeiro",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchCashflowTimeseries(n.id,f),fetcher:oe=>ta(Zt.cashflowTimeseries,K,{signal:oe})}),wt=ea({enabled:!!n&&r==="inventario",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchInventoryMap(n.id,f),fetcher:oe=>ta(Zt.inventoryMap,K,{signal:oe})}),mt=ea({enabled:!!n&&r==="inventario",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchInventoryRanking(n.id,f),fetcher:oe=>ta(Zt.inventoryRanking,K,{signal:oe})}),kt=ea({enabled:!!n&&r==="executivo",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchTopClients(n.id,f),fetcher:oe=>ta(Zt.topClients,K,{signal:oe})}),zt=ea({enabled:!!n&&r==="financeiro",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchReceivablesAgingSummary(n.id,f),fetcher:oe=>ta(Zt.receivablesAgingSummary,K,{signal:oe})}),te=ea({enabled:!!n&&r==="operacoes",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchOohOpsSummary(n.id,f),fetcher:oe=>ta(Zt.oohOpsSummary,K,{signal:oe})}),xe=ea({enabled:!!n&&r==="operacoes",mode:j,deps:[n?.id,K],computeMock:()=>En.fetchDoohProofOfPlaySummary(n.id,f),fetcher:oe=>ta(Zt.doohProofOfPlaySummary,K,{signal:oe})}),pe=xa(`overview:${n?.id||""}:${K}`,le),Ue=xa(`funnel:${n?.id||""}:${K}`,Y),ce=xa(`commercialSummary:${n?.id||""}:${K}`,ae),ve=xa(`alerts:${n?.id||""}:${K}`,Ge),ze=ve||[],He=xa(`revenueTs:${n?.id||""}:${K}`,tt),pt=xa(`cashflowTs:${n?.id||""}:${K}`,ut),me=xa(`inventoryMap:${n?.id||""}:${K}`,wt),Oe=xa(`inventoryRanking:${n?.id||""}:${K}`,mt),Ke=xa(`topClients:${n?.id||""}:${K}`,kt),lt=xa(`aging:${n?.id||""}:${K}`,zt),Tt=xa(`oohOps:${n?.id||""}:${K}`,te),ps=xa(`pop:${n?.id||""}:${K}`,xe),Ts=xa(`stalledProposals:${n?.id||""}:${K}`,Ie),ws=xa(`sellerRanking:${n?.id||""}:${K}`,$e),rs=He?.points||[],fs=pt?.points||[],gs=me?.pins||[],Fs=Oe?.rows||[],Ws=Ke?.rows||[],ks=Tt?.items||[],an=ps?.rows||[],yt=Ts?.rows||[],os=ws?.rows||[],qt=m.useMemo(()=>({companyId:n?.id?String(n.id):void 0,tab:r,backendQs:K}),[n?.id,r,K]);sa("overview",le,qt),sa("alerts",Ge,qt),sa("funnel",Y,qt),sa("commercialSummary",ae,qt),sa("stalledProposals",Ie,qt),sa("sellerRanking",$e,qt),sa("revenueTs",tt,qt),sa("cashflowTs",ut,qt),sa("topClients",kt,qt),sa("aging",zt,qt),sa("oohOps",te,qt),sa("pop",xe,qt),sa("inventoryMap",wt,qt),sa("inventoryRanking",mt,qt),sa("drilldown",Je,qt),m.useEffect(()=>{p6()},[]),m.useEffect(()=>{w.variant==="compact"&&r!=="executivo"&&o("executivo")},[w.variant,r]),m.useEffect(()=>{if(!(j!=="backend"||![le,Ge].some(Ee=>{const $t=String(Ee?.source||"");return Ee.status==="error"||$t.includes("fallback")}))){C("mock");try{sessionStorage.setItem("oneMedia.dashboard.dataMode.session","mock")}catch{}ye.error("Dashboard: fallback para mock",{description:"O backend falhou para alguns widgets. Mantendo a UI estvel enquanto investigamos."})}},[j,le.status,Ge.status,le.source,Ge.source]);const Ds=m.useMemo(()=>n?En.getPublicMapUrl(n.id):"",[n]);m.useEffect(()=>{U(()=>({open:!1,key:void 0,title:"",rows:[],hint:void 0,status:"idle",errorMessage:void 0,sortBy:void 0,sortDir:void 0,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""}))},[r]),m.useEffect(()=>{N.allowedTabs.includes(r)||o(N.allowedTabs[0]||"executivo")},[fe,r]),m.useEffect(()=>{N.canManageSavedViews&&(!I||!O||X(Z0(I,O)))},[I,O,N.canManageSavedViews]),m.useEffect(()=>{Q&&(F.some(oe=>oe.id===Q)||V(""))},[Q,F]);const js=oe=>QO(f,oe);if(!n||!s)return e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dashboard..."})]})})});const vs=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(Ds),W(!0),ye.success("Link do mapa copiado para a rea de transferncia!"),setTimeout(()=>W(!1),2e3);else{const oe=document.createElement("textarea");oe.value=Ds,oe.style.position="fixed",oe.style.left="-999999px",oe.style.top="-999999px",document.body.appendChild(oe),oe.focus(),oe.select();try{document.execCommand("copy")?(W(!0),ye.success("Link do mapa copiado para a rea de transferncia!"),setTimeout(()=>W(!1),2e3)):ye.error("No foi possvel copiar. Por favor, copie manualmente.")}catch{ye.error("No foi possvel copiar. Por favor, copie manualmente.")}document.body.removeChild(oe)}}catch{ye.error("No foi possvel copiar. Por favor, copie manualmente.")}},Ae=async()=>{try{const oe=E6();if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(oe),ye.success("Checklist de paridade copiado!");return}const Ee=document.createElement("textarea");Ee.value=oe,Ee.style.position="fixed",Ee.style.left="-999999px",Ee.style.top="-999999px",document.body.appendChild(Ee),Ee.focus(),Ee.select();const $t=document.execCommand("copy");document.body.removeChild(Ee),$t?ye.success("Checklist de paridade copiado!"):ye.error("No foi possvel copiar.")}catch{ye.error("No foi possvel copiar.")}},nt=(oe,Ee,$t,us)=>{const Ut={};if(us)for(const[Cs,ct]of Object.entries(us))typeof ct=="string"&&ct.length>0&&(Ut[Cs]=ct);const Zs=Hx(Ee),Rt=Zs.defaultSort?.by,mn=Zs.defaultSort?.dir,Yt=Ih(ne,{limit:String(Th),sortBy:Rt,sortDir:mn,...Ut}),bt=`BACKEND: GET ${Zt.drilldown}/${Ee}?${Yt}`;U({open:!0,key:Ee,params:Object.keys(Ut).length?Ut:void 0,title:oe,rows:[],hint:$t?`${$t}  ${bt}`:bt,status:"loading",errorMessage:void 0,sortBy:Rt,sortDir:mn,cursor:void 0,nextCursor:void 0,hasMore:!1,search:""})},it=oe=>{const Ee=String(n?.name??n?.title??n?.label??n.id),$t=`${Qr(ne.dateFrom)} - ${Qr(ne.dateTo)}`,us=[{label:"Empresa",value:Ee},{label:"Aba",value:Mt(r)},{label:"Perodo",value:$t},{label:"Tipo",value:String(u.mediaType)}];return u.query&&us.push({label:"Busca",value:String(u.query)}),u.city&&us.push({label:"Cidade",value:String(u.city)}),[...oe||[],...us]},be=oe=>{const Ee=document.getElementById("dashboard-export-root");if(!Ee){ye.error("No foi possvel exportar PDF: rea do dashboard no encontrada");return}const $t=new Date().toISOString().slice(0,7),us=oe==="monthly"?`Snapshot mensal  ${Mt(r)}`:`Dashboard  ${Mt(r)}`,Ut=String(n?.name??n?.title??n?.label??n.id),Zs=it(oe==="monthly"?[{label:"Snapshot",value:$t}]:void 0);Mj({element:Ee,title:us,subtitle:Ut,meta:Zs})},Me=(oe,Ee)=>{const $t=document.getElementById(oe);if(!$t){ye.error("No foi possvel exportar o widget: elemento no encontrado");return}const us=`${String(n?.name??n?.title??n.id)}  ${Mt(r)}`;Mj({element:$t,title:Ee,subtitle:us,meta:it()})},Fe=()=>{const Ee=new Date().toISOString().slice(0,10).replace(/-/g,""),us=`dashboard_${Mt(r).toLowerCase().replace(/[^a-z0-9]+/gi,"_")}_${Ee}.csv`,Ut=[],Zs=String(n?.name??n?.title??n?.label??n.id);Ut.push(["Empresa",Zs]),Ut.push(["Aba",Mt(r)]),Ut.push(["Perodo",`${Qr(ne.dateFrom)} - ${Qr(ne.dateTo)}`]),Ut.push(["Tipo",String(u.mediaType)]),u.city&&Ut.push(["Cidade",String(u.city)]),u.query&&Ut.push(["Busca",String(u.query)]);const Rt=(Yt,bt)=>Ut.push([Yt,bt==null?"":String(bt)]);if(r==="executivo"){pe&&(Rt("Receita reconhecida",ss(pe.revenueRecognizedCents)),Rt("A faturar",ss(pe.revenueToInvoiceCents)),Rt("Ocupao",`${pe.occupancyPercent}%`),Rt("Inadimplncia",ss(pe.receivablesOverdueCents)),Rt("Campanhas ativas",pe.campaignsActiveCount),Rt("Clientes ativos",pe.clientsActiveCount),Rt("Ticket mdio",ss(pe.averageTicketCents)));const Yt=ze.filter(ct=>ct.severity==="HIGH").length,bt=ze.filter(ct=>ct.severity==="MEDIUM").length,Cs=ze.filter(ct=>ct.severity==="LOW").length;Rt("Alertas HIGH",Yt),Rt("Alertas MEDIUM",bt),Rt("Alertas LOW",Cs),Ws.slice(0,8).forEach((ct,ns)=>{Rt(`Top cliente ${ns+1}`,`${ct.name}  ${ss(ct.amountCents)} (${ct.campaignsCount} camp.)`)})}else if(r==="comercial")ce&&(Rt("Propostas (total)",ce.proposalsTotal),Rt("Taxa de aprovao",`${ce.approvalRatePercent}%`),Rt("Ciclo mdio (dias)",ce.averageDaysToClose),Rt("Pipeline ativo",ss(ce.activePipelineAmountCents)),Rt("Propostas paradas",ce.stalledProposalsCount)),Ue?.stages?.forEach(Yt=>{Rt(`Funil  ${Yt.label} (qtde)`,Yt.count),Rt(`Funil  ${Yt.label} (valor)`,ss(Yt.amountCents))}),yt.slice(0,8).forEach((Yt,bt)=>{Rt(`Parada ${bt+1}`,`${Yt.title}  ${Yt.client}  ${Yt.daysWithoutUpdate}d  ${ss(Yt.amountCents)}`)}),os.slice(0,8).forEach((Yt,bt)=>{Rt(`Vendedor ${bt+1}`,`${Yt.name}  ganhos: ${Yt.dealsWon} (${ss(Yt.amountWonCents)})  pipeline: ${Yt.dealsInPipeline}`)});else if(r==="operacoes"){const Yt=ks.filter(zn=>zn.status==="OK").length,bt=ks.filter(zn=>zn.status==="PENDING").length,Cs=ks.filter(zn=>zn.status==="LATE").length;Rt("OOH  itens OK",Yt),Rt("OOH  pendncias",bt),Rt("OOH  atrasos",Cs);const ct=an.length?Math.round(an.reduce((zn,Ha)=>zn+Ha.uptimePercent,0)/an.length):0,ns=an.reduce((zn,Ha)=>zn+Ha.plays,0);Rt("DOOH  telas",an.length),Rt("DOOH  uptime mdio",`${ct}%`),Rt("DOOH  plays",ns)}else if(r==="financeiro")fs.length&&Rt("Fluxo caixa (ltimo)",ss(fs[fs.length-1].valueCents)),lt&&(Rt("Recebveis (total)",ss(lt.totalCents)),lt.buckets.slice(0,12).forEach(Yt=>{Rt(`Aging  ${Yt.label}`,ss(Yt.amountCents))}));else if(r==="inventario"){Rt("Pins (mapa)",gs.length);const Yt=gs.length?Math.round(gs.reduce((bt,Cs)=>bt+(Cs.occupancyPercent||0),0)/gs.length):0;Rt("Ocupao mdia (mapa)",`${Yt}%`),Fs.slice(0,10).forEach((bt,Cs)=>{Rt(`Ranking ${Cs+1}`,`${bt.label}${bt.city?` (${bt.city})`:""}  occ: ${bt.occupancyPercent}%  camp: ${bt.activeCampaigns}  ${ss(bt.revenueCents)}`)})}const mn=["key;value",...Ut.map(([Yt,bt])=>[Yt,bt].map(Dr).join(";"))];$p(us,mn.join(`
`),"text/csv;charset=utf-8"),ye.success("CSV exportado",{description:us})},Dt=()=>{h(c),v(c),ye.success("Filtros limpos")},Mt=oe=>oe==="executivo"?"Executivo":oe==="comercial"?"Comercial":oe==="operacoes"?"Operaes":oe==="financeiro"?"Financeiro":oe==="inventario"?"Inventrio":oe,Ns=oe=>{const Ee=N.allowedTabs.includes(oe.tab)?oe.tab:N.allowedTabs[0]||"executivo";Ee!=oe.tab?ye.message("Viso aplicada com ajustes",{description:`A aba "${Mt(oe.tab)}" no est liberada para seu perfil. Abrimos "${Mt(Ee)}".`}):ye.success(`Viso aplicada: ${oe.name}`),o(Ee),h(oe.filters),v(oe.filters)},Xt=oe=>{if(V(oe),!oe)return;const Ee=F.find($t=>$t.id===oe);Ee&&Ns(Ee)},ds=oe=>{if(N.canManageSavedViews){if(J(oe),oe==="update"&&Q){const Ee=F.find($t=>$t.id===Q);se(Ee?.name||"")}else se(`Minha viso - ${Mt(r)}`);R(!0)}},ys=()=>{if(!N.canManageSavedViews)return;if(!I||!O){ye.error("No foi possvel salvar a viso: faltam dados de usurio/empresa");return}const oe=(ue||"").trim();if(!oe){ye.error("Informe um nome para a viso");return}const Ee=new Date().toISOString(),$t={version:1},us=z==="update"?F.find(mn=>mn.id===Q):void 0,Ut=us?.id||i6(),Zs={id:Ut,name:oe,tab:r,filters:u,layout:$t,createdAt:us?.createdAt||Ee,updatedAt:Ee},Rt=l6(I,O,Zs);X(Rt),V(Ut),R(!1),ye.success(z==="update"?"Viso atualizada":"Viso salva",{description:"MVP (localStorage). BACKEND: futuramente /dashboard/views (por usurio/empresa)."})},Ys=()=>{if(!N.canManageSavedViews||!I||!O||!Q)return;const oe=F.find(us=>us.id===Q);if(!window.confirm(`Excluir a viso "${oe?.name||"Sem nome"}"?`))return;const $t=c6(I,O,Q);X($t),V(""),ye.success("Viso excluda")},un=(oe,Ee)=>Ee.status==="error"?{title:oe,description:Ee.errorMessage||"Tente novamente."}:null,In=le.status!=="ready",Wo=Y.status!=="ready",Vi=ae.status!=="ready",Hl=()=>{try{Oj({companyId:n?.id,userId:s?.id||s?.email,variant:"compact",ttlMs:3600*1e3,reason:"Rollback automtico: erro de runtime"})}catch{}},Zo=w.variant==="compact"||w.source!=="default"||j!==Ux,pd=e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsx(Bo,{children:"Dashboard em modo seguro"})}),e.jsxs(Le,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ocorreu um erro ao renderizar o dashboard. Para evitar impacto em produo, mantivemos a tela em modo compacto (menor risco)."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Z,{className:"h-9",onClick:()=>window.location.reload(),children:"Recarregar"}),w.canOverride?e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>k("v2"),children:"Tentar v2"}):null]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Rollout: ",e.jsx("span",{className:"font-medium",children:w.variant})," (",w.source,")  dados:"," ",e.jsx("span",{className:"font-medium",children:j})]})]})]})});return e.jsx(f6,{fallback:pd,onError:Hl,children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Viso geral  filtros globais  drill-down por widget (mock)"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(Z,{className:"h-9 flex items-center gap-2",onClick:()=>t("proposals"),children:[e.jsx(kn,{className:"w-4 h-4"}),"Nova Proposta"]}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>t("inventory"),children:[e.jsx(kn,{className:"w-4 h-4"}),"Nova Mdia"]}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>t("mediakit"),children:[e.jsx(dw,{className:"w-4 h-4"}),"Mdia Kit"]}),w.canOverride?e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>S(!0),children:[e.jsx(QE,{className:"w-4 h-4"}),"Paridade"]}):null,w.variant!=="compact"?e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>re(!0),children:[e.jsx(vw,{className:"w-4 h-4"}),"Compartilhar Mapa"]}):null]})]}),Zo?e.jsx(Re,{children:e.jsx(Le,{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Rollout:"})," ",w.variant," (",w.source,")  ",w.reason,e.jsx("span",{className:"mx-2",children:""}),e.jsx("span",{className:"font-medium",children:"Dados:"})," ",j]}),w.canOverride?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-8 text-xs",onClick:()=>k("v2"),children:"Forar v2"}),e.jsx(Z,{variant:"outline",className:"h-8 text-xs",onClick:()=>k("compact"),children:"Rollback"})]}):null]})})}):null,e.jsx(Re,{children:e.jsxs(Le,{className:"pt-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(dp,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"Filtros globais"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Todos os widgets reagem a estes filtros"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[N.canManageSavedViews?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"h-9 rounded-md border border-gray-200 bg-white px-3 text-sm min-w-[180px]",value:Q,onChange:oe=>Xt(oe.target.value),children:[e.jsx("option",{value:"",children:"Vises salvas"}),F.map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),Q?e.jsx(Z,{variant:"ghost",className:"h-9 px-2",onClick:()=>V(""),title:"Desselecionar",children:e.jsx(Na,{className:"w-4 h-4"})}):null]}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ds("create"),children:[e.jsx(kn,{className:"w-4 h-4"}),"Salvar viso"]}),Q?e.jsxs(e.Fragment,{children:[e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>ds("update"),children:[e.jsx(ja,{className:"w-4 h-4"}),"Atualizar"]}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:Ys,children:[e.jsx(Na,{className:"w-4 h-4"}),"Excluir"]})]}):null]}):null,e.jsx(Z,{variant:"outline",className:"h-9",onClick:Dt,children:"Limpar"}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:Fe,children:[e.jsx(Pl,{className:"w-4 h-4"}),"Exportar CSV"]}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>be("view"),children:[e.jsx(Pl,{className:"w-4 h-4"}),"Exportar PDF"]}),e.jsxs(Z,{variant:"outline",className:"h-9 flex items-center gap-2",onClick:()=>be("monthly"),children:[e.jsx(Pl,{className:"w-4 h-4"}),"Snapshot mensal"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Perodo"}),e.jsxs("select",{className:"w-full h-9 rounded-md border border-gray-200 bg-white px-3 text-sm",value:u.datePreset,onChange:oe=>{const Ee=oe.target.value;h($t=>({...$t,datePreset:Ee})),v($t=>({...$t,datePreset:Ee}))},children:[e.jsx("option",{value:"7d",children:"ltimos 7 dias"}),e.jsx("option",{value:"30d",children:"ltimos 30 dias"}),e.jsx("option",{value:"90d",children:"ltimos 90 dias"}),e.jsx("option",{value:"ytd",children:"Ano (YTD)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Buscar"}),e.jsx(Ne,{value:u.query,onChange:oe=>h(Ee=>({...Ee,query:oe.target.value})),placeholder:"cliente, campanha, proposta...",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Cidade/Regio"}),e.jsx(Ne,{value:u.city,onChange:oe=>h(Ee=>({...Ee,city:oe.target.value})),placeholder:"ex: Braslia",className:"h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full h-9 rounded-md border border-gray-200 bg-white px-3 text-sm",value:u.mediaType,onChange:oe=>{const Ee=oe.target.value;h($t=>({...$t,mediaType:Ee})),v($t=>({...$t,mediaType:Ee}))},children:[e.jsx("option",{value:"ALL",children:"OOH + DOOH"}),e.jsx("option",{value:"OOH",children:"OOH"}),e.jsx("option",{value:"DOOH",children:"DOOH"})]})]})]}),x?e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Aplicando filtros"}):null,e.jsxs("div",{className:"mt-4 flex items-center gap-2 flex-wrap",children:[e.jsx(Di,{label:"Perodo",value:u.datePreset.toUpperCase()}),u.query?e.jsx(Di,{label:"Busca",value:u.query}):null,u.city?e.jsx(Di,{label:"Cidade",value:u.city}):null,e.jsx(Di,{label:"Tipo",value:u.mediaType})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[N.allowedTabs.includes("executivo")?e.jsx(iu,{active:r==="executivo",icon:e.jsx(t0,{className:"w-4 h-4"}),label:"Executivo",onClick:()=>o("executivo")}):null,w.variant!=="compact"&&N.allowedTabs.includes("comercial")?e.jsx(iu,{active:r==="comercial",icon:e.jsx(fu,{className:"w-4 h-4"}),label:"Comercial",onClick:()=>o("comercial")}):null,w.variant!=="compact"&&N.allowedTabs.includes("operacoes")?e.jsx(iu,{active:r==="operacoes",icon:e.jsx(OE,{className:"w-4 h-4"}),label:"Operaes",onClick:()=>o("operacoes")}):null,w.variant!=="compact"&&N.allowedTabs.includes("financeiro")?e.jsx(iu,{active:r==="financeiro",icon:e.jsx(Ou,{className:"w-4 h-4"}),label:"Financeiro",onClick:()=>o("financeiro")}):null,w.variant!=="compact"&&N.allowedTabs.includes("inventario")?e.jsx(iu,{active:r==="inventario",icon:e.jsx(ed,{className:"w-4 h-4"}),label:"Inventrio",onClick:()=>o("inventario")}):null]})]}),r==="executivo"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Receita reconhecida",value:pe?ss(pe.revenueRecognizedCents):void 0,delta:pe?.trends.revenue.deltaPercent,spark:pe?.trends.revenue.points,loading:In,onClick:()=>nt("Receita reconhecida","revenueRecognized","BACKEND: /dashboard/revenue/recognized")}),e.jsx(fn,{label:"A faturar",value:pe?ss(pe.revenueToInvoiceCents):void 0,helper:"Forecast simplificado (mock)",loading:In,onClick:()=>nt("A faturar","revenueToInvoice","BACKEND: /dashboard/revenue/to-invoice")}),e.jsx(fn,{label:"Ocupao",value:pe?`${pe.occupancyPercent}%`:void 0,delta:pe?.trends.occupancy.deltaPercent,spark:pe?.trends.occupancy.points,loading:In,onClick:()=>nt("Ocupao","occupancy","BACKEND: /dashboard/occupancy")}),e.jsx(fn,{label:"Inadimplncia",value:pe?ss(pe.receivablesOverdueCents):void 0,helper:"Aging (mock)",loading:In,onClick:()=>nt("Inadimplncia","receivablesOverdue","BACKEND: /dashboard/receivables/aging")})]}),e.jsx(ar,{id:"dash-widget-alerts",title:"Ateno hoje",subtitle:"Alertas inteligentes (mock)  filtrados pela busca",loading:Ge.status==="loading"&&!ve,error:un("Falha ao carregar alertas",Ge),empty:ze.length===0&&Ge.status==="ready",emptyTitle:"Sem alertas",emptyDescription:js("Nada para destacar com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Ge.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-alerts","Ateno hoje"),children:"Exportar PDF"})]}),children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:ze.map(oe=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(D6,{severity:oe.severity}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:oe.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:oe.description})]}),e.jsx(Bh,{className:"w-4 h-4 text-gray-400"})]}),oe.ctaLabel&&oe.ctaPage?e.jsx(Z,{variant:"outline",className:"w-full mt-3 h-9",onClick:()=>t(oe.ctaPage),children:oe.ctaLabel}):null]},oe.id))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ar,{id:"dash-widget-revenue-trend",title:"Tendncia de Receita",subtitle:`Srie (${tt.source})`,loading:tt.status==="loading"&&!He,error:un("Falha ao carregar srie",tt),empty:rs.length===0&&tt.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("No h pontos para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>tt.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Ij("tendencia_receita",rs),children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-revenue-trend","Tendncia de Receita"),children:"Exportar PDF"})]}),children:rs.length>0?e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:ss(rs[rs.length-1].valueCents)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ltimo ponto: ",Qr(rs[rs.length-1].date)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.revenueTimeseries,"?",K]})]}),e.jsx(Rg,{points:Tj(rs)})]}):e.jsx("div",{className:"h-40 border border-dashed border-gray-200 rounded-lg flex items-center justify-center text-sm text-gray-500",children:"Srie sem dados"})}),e.jsx(ar,{id:"dash-widget-top-clients",title:"Top Clientes",subtitle:`Ranking (${kt.source})`,loading:kt.status==="loading"&&!Ke,error:un("Falha ao carregar ranking",kt),empty:Ws.length===0&&kt.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("Nenhum cliente encontrado com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>kt.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{const oe=Ws.map(Ee=>({id:Ee.id,title:Ee.name,subtitle:`${Ee.city||""}  Campanhas: ${Ee.campaignsCount}`.trim(),status:"",amountCents:Ee.amountCents}));vl("top_clientes",oe)},children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-top-clients","Top Clientes"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Top Clientes","topClients",`BACKEND: ${Zt.topClients}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Ws.slice(0,5).map((oe,Ee)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[Ee+1,". ",oe.name]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[oe.city?`${oe.city}  `:"","Campanhas: ",oe.campaignsCount,typeof oe.averageTicketCents=="number"?`  Ticket: ${ss(oe.averageTicketCents)}`:""]})]}),e.jsx("span",{className:"text-sm text-gray-700",children:ss(oe.amountCents)})]},oe.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.topClients,"?",K]})]})})]})]}):null,r==="comercial"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Propostas (perodo)",value:ce?String(ce.proposalsTotal):void 0,delta:pe?.trends.proposals.deltaPercent,spark:pe?.trends.proposals.points,loading:Vi,onClick:()=>nt("Propostas","proposalsTotal","BACKEND: /dashboard/proposals")}),e.jsx(fn,{label:"Taxa de aprovao",value:ce?`${ce.approvalRatePercent}%`:void 0,helper:`BACKEND: ${Zt.commercialSummary}?${K}`,loading:Vi}),e.jsx(fn,{label:"Ciclo mdio",value:ce?`${ce.averageDaysToClose} dias`:Ue?`${Ue.averageDaysToClose} dias`:void 0,helper:`BACKEND: ${Zt.commercialSummary}?${K}`,loading:Vi&&Wo}),e.jsx(fn,{label:"Campanhas ativas",value:pe?String(pe.campaignsActiveCount):void 0,helper:pe?`Total: ${ss(pe.campaignsActiveAmountCents)}`:"",loading:In,onClick:()=>nt("Campanhas ativas","campaignsActive","BACKEND: /dashboard/campaigns/active")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ar,{id:"dash-widget-funnel",title:"Funil comercial",subtitle:`Pipeline por etapa (${Y.source})`,loading:Wo,error:un("Falha ao carregar funil",Y),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Y.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{if(!Ue)return;const oe=Ue.stages.map(Ee=>({id:Ee.key,title:Ee.label,subtitle:`Qtd: ${Ee.count}`,status:"",amountCents:Ee.amountCents}));vl("funil_comercial",oe)},children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-funnel","Funil comercial"),children:"Exportar PDF"})]}),children:Ue?e.jsxs("div",{className:"space-y-4",children:[Ue.stages.map(oe=>{const Ee=Math.max(...Ue.stages.map(us=>us.count),1),$t=Math.round(oe.count/Ee*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:oe.label}),e.jsx("p",{className:"text-sm text-gray-900",children:oe.count})]}),e.jsx("div",{className:"w-full h-2 rounded bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-gray-300",style:{width:`${$t}%`}})}),oe.amountCents>0?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ss(oe.amountCents)}):null]},oe.key)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-4 backend-hint",children:["BACKEND: ",Zt.funnel,"?",K]})]}):null}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ar,{id:"dash-widget-stalled-proposals",title:"Propostas paradas",subtitle:`Aes rpidas (${Ie.source})`,loading:Ie.status==="loading"&&!Ts,error:un("Falha ao carregar lista",Ie),empty:yt.length===0&&Ie.status==="ready",emptyTitle:"Nada aqui",emptyDescription:js("Nenhuma proposta parou com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Ie.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{const oe=yt.map(Ee=>({id:Ee.id,title:Ee.title,subtitle:`${Ee.client}  ${Ee.daysWithoutUpdate} dias sem atualizao`,status:"",amountCents:Ee.amountCents}));vl("propostas_paradas",oe)},children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-stalled-proposals","Propostas paradas"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Propostas paradas","stalledProposals",`BACKEND: ${Zt.stalledProposals}?${K}`),children:"Ver todas"})]}),children:e.jsxs("div",{className:"space-y-3",children:[yt.slice(0,5).map(oe=>e.jsx("button",{type:"button",className:"w-full text-left border border-gray-200 rounded-lg p-3 hover:bg-gray-50",onClick:()=>t("proposals"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:oe.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[oe.client,"  ",oe.daysWithoutUpdate," dias sem atualizao"]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:ss(oe.amountCents)})]})},oe.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.stalledProposals,"?",K]})]})}),e.jsx(ar,{id:"dash-widget-seller-ranking",title:"Ranking de vendedores",subtitle:`Performance (${$e.source})`,loading:$e.status==="loading"&&!ws,error:un("Falha ao carregar ranking",$e),empty:os.length===0&&$e.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("Nenhum vendedor encontrado com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>$e.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{const oe=os.map(Ee=>({id:Ee.id,title:Ee.name,subtitle:`${Ee.city||""}  Ganhas: ${Ee.dealsWon}  Pipeline: ${Ee.dealsInPipeline}`.trim(),status:"",amountCents:Ee.amountWonCents}));vl("ranking_vendedores",oe)},children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-seller-ranking","Ranking de vendedores"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Ranking de vendedores","sellerRanking",`BACKEND: ${Zt.sellerRanking}?${K}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[os.slice(0,6).map((oe,Ee)=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[Ee+1,". ",oe.name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[oe.city?`${oe.city}  `:"","Ganhas: ",oe.dealsWon,"  Pipeline: ",oe.dealsInPipeline]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-700",children:ss(oe.amountWonCents)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Pipeline: ",ss(oe.amountPipelineCents)]})]})]},oe.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.sellerRanking,"?",K]})]})})]})]})]}):null,r==="operacoes"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Aguardando material",value:String(2+Cn(n.id)%7),helper:"SLA (mock)",onClick:()=>nt("Aguardando material","awaitingMaterial","BACKEND: /dashboard/campaigns/awaiting-material")}),e.jsx(fn,{label:"Em instalao",value:String(1+Cn(n.id+"inst")%5),helper:"BACKEND: /dashboard/ops/installation"}),e.jsx(fn,{label:"DOOH Uptime",value:`${92+Cn(n.id+"upt")%7}%`,helper:"BACKEND: /dashboard/dooh/uptime"}),e.jsx(fn,{label:"Falhas / Offline",value:String(Cn(n.id+"off")%9),helper:"BACKEND: /dashboard/dooh/offline"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ar,{id:"dash-widget-ooh-ops",title:"Status operacional (OOH)",subtitle:`Checklist / SLA / pendncias (${te.source})`,loading:te.status==="loading"&&!Tt,error:un("Falha ao carregar status operacional",te),empty:ks.length===0&&te.status==="ready",emptyTitle:"Sem pendncias",emptyDescription:js("Nada em aberto com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>te.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{const oe=ks.map(Ee=>({id:Ee.id,title:Ee.title,subtitle:`${Ee.city||""}${Ee.dueDate?`  At: ${Qr(Ee.dueDate)}`:""}`.trim(),status:Ee.status}));vl("ooh_status_operacional",oe)},children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-ooh-ops","Status operacional (OOH)"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Status operacional (OOH)","oohOps",`BACKEND: ${Zt.oohOpsSummary}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[ks.slice(0,6).map(oe=>{const Ee=oe.status==="OK"?"bg-green-100 text-green-700":oe.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-700";return e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:oe.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[oe.city?`${oe.city}  `:"",oe.dueDate?`At: ${Qr(oe.dueDate)}`:""]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${Ee}`,children:oe.status})]},oe.id)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.oohOpsSummary,"?",K]})]})}),e.jsx(ar,{id:"dash-widget-pop",title:"Proof-of-play (DOOH)",subtitle:`Relatrio POP (${xe.source})`,loading:xe.status==="loading"&&!ps,error:un("Falha ao carregar POP",xe),empty:an.length===0&&xe.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("Nenhum registro POP com os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>xe.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{const oe=an.map(Ee=>({id:Ee.id,title:Ee.screen,subtitle:`${Ee.city||""}${Ee.lastSeen?`  ${Qr(Ee.lastSeen)}`:""}`.trim(),status:`${Ee.uptimePercent}%`}));vl("proof_of_play",oe)},children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-pop","Proof-of-play (DOOH)"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Proof-of-play (DOOH)","proofOfPlay",`BACKEND: ${Zt.doohProofOfPlaySummary}`),children:"Ver detalhes"})]}),children:e.jsxs("div",{className:"space-y-3",children:[an.slice(0,6).map(oe=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:oe.screen}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[oe.city?`${oe.city}  `:"","Plays: ",oe.plays,"  ltimo: ",oe.lastSeen?Qr(oe.lastSeen):""]})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:[oe.uptimePercent,"%"]})]},oe.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.doohProofOfPlaySummary,"?",K]})]})})]})]}):null,r==="financeiro"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Contas a receber",value:pe?ss(pe.revenueToInvoiceCents+9e5):void 0,helper:"Forecast (mock)",loading:In,onClick:()=>nt("Contas a receber","receivablesOpen","BACKEND: /dashboard/receivables/open")}),e.jsx(fn,{label:"A vencer (7 dias)",value:pe?ss(pe.revenueToInvoiceCents*.35):void 0,helper:"BACKEND: /dashboard/receivables/due-7d",loading:In}),e.jsx(fn,{label:"Vencidas",value:pe?ss(pe.receivablesOverdueCents):void 0,helper:"Aging (mock)",loading:In,onClick:()=>nt("Vencidas","receivablesOverdue","BACKEND: /dashboard/receivables/overdue")}),e.jsx(fn,{label:"Recebido no ms",value:pe?ss(pe.revenueRecognizedCents*.42):void 0,helper:"BACKEND: /dashboard/cashflow/received-this-month",loading:In})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ar,{id:"dash-widget-cashflow",title:"Fluxo de caixa",subtitle:`Srie (${ut.source})`,loading:ut.status==="loading"&&!pt,error:un("Falha ao carregar srie",ut),empty:fs.length===0&&ut.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("No h pontos para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>ut.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Ij("fluxo_caixa",fs),children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-cashflow","Fluxo de caixa"),children:"Exportar PDF"})]}),children:fs.length>0?e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:ss(fs[fs.length-1].valueCents)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ltimo ponto: ",Qr(fs[fs.length-1].date)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.cashflowTimeseries,"?",K]})]}),e.jsx(Rg,{points:Tj(fs)})]}):e.jsx("div",{className:"h-40 border border-dashed border-gray-200 rounded-lg flex items-center justify-center text-sm text-gray-500",children:"Srie sem dados"})}),e.jsx(ar,{id:"dash-widget-aging",title:"Aging",subtitle:`Distribuio por faixa (${zt.source})`,loading:zt.status==="loading"&&!lt,error:un("Falha ao carregar aging",zt),empty:(lt?.buckets?.length||0)===0&&zt.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("No h faixas de aging para o perodo/filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>zt.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>XO("aging",lt?.buckets||[],lt?.totalCents),children:"Exportar CSV"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-aging","Aging"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Aging","aging",`BACKEND: ${Zt.receivablesAgingSummary}`),children:"Ver lista"})]}),children:e.jsxs("div",{className:"space-y-3",children:[(lt?.buckets||[]).map(oe=>{const Ee=Math.max(...(lt?.buckets||[]).map(us=>us.amountCents),1),$t=Math.round(oe.amountCents/Ee*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:oe.label}),e.jsx("p",{className:"text-sm text-gray-900",children:ss(oe.amountCents)})]}),e.jsx("div",{className:"w-full h-2 rounded bg-gray-100 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-gray-300",style:{width:`${$t}%`}})})]},oe.label)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.receivablesAgingSummary,"?",K]})]})})]})]}):null,r==="inventario"?e.jsxs("div",{id:"dashboard-export-root",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fn,{label:"Inventrio total",value:pe?String(pe.inventoryTotalPoints):void 0,helper:"BACKEND: /dashboard/inventory/summary",loading:In,onClick:()=>t("inventory")}),e.jsx(fn,{label:"Disponveis",value:pe?String(Math.round(pe.inventoryTotalPoints*(1-pe.occupancyPercent/100))):void 0,helper:pe?`Ocupao: ${pe.occupancyPercent}%`:"",loading:In}),e.jsx(fn,{label:"Clientes ativos",value:pe?String(pe.clientsActiveCount):void 0,helper:pe?`Ticket mdio: ${ss(pe.averageTicketCents)}`:"",loading:In}),e.jsx(fn,{label:"Campanhas ativas",value:pe?String(pe.campaignsActiveCount):void 0,helper:pe?`Total: ${ss(pe.campaignsActiveAmountCents)}`:"",loading:In})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ar,{id:"dash-widget-inventory-map",title:"Mapa e ocupao",subtitle:`Pins (${wt.source})`,loading:wt.status==="loading"&&!me,error:un("Falha ao carregar mapa",wt),empty:gs.length===0&&wt.status==="ready",emptyTitle:"Sem pontos",emptyDescription:js("Nenhum ponto encontrado para os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>wt.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>re(!0),children:"Compartilhar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-inventory-map","Mapa e ocupao"),children:"Exportar PDF"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-xs backend-hint",children:["BACKEND: ",Zt.inventoryMap,"?",K]}),e.jsx(F6,{pins:gs,height:320,onPinClick:oe=>nt(`Ponto  ${oe.label}`,"inventoryPin","BACKEND: /dashboard/inventory/pin",{pinId:oe.id,region:oe.region||oe.city||void 0,line:oe.line||void 0})}),e.jsx(L6,{pins:gs,onSelect:(oe,Ee)=>nt(`Ocupao  ${oe} / ${Ee}`,"inventoryRegionLine","BACKEND: /dashboard/inventory/map/heat",{region:oe,line:Ee})})]})}),e.jsx(ar,{id:"dash-widget-inventory-ranking",title:"Ranking de pontos",subtitle:`Top 5 (${mt.source})`,loading:mt.status==="loading"&&!Oe,error:un("Falha ao carregar ranking",mt),empty:Fs.length===0&&mt.status==="ready",emptyTitle:"Sem dados",emptyDescription:js("Nenhum ponto ranqueado para os filtros atuais."),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>mt.refetch(),children:"Recarregar"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>Me("dash-widget-inventory-ranking","Ranking de pontos"),children:"Exportar PDF"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>nt("Ranking de pontos","inventoryRanking","BACKEND: /dashboard/inventory/ranking"),children:"Ver lista"})]}),children:e.jsxs("div",{className:"space-y-3",children:[Fs.slice(0,5).map((oe,Ee)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[Ee+1,". ",oe.label]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[oe.city||"","  ",oe.activeCampaigns," campanhas  ",ss(oe.revenueCents)]})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:[Math.round(oe.occupancyPercent),"%"]})]},oe.id)),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 backend-hint",children:["BACKEND: ",Zt.inventoryRanking,"?",K]})]})})]})]}):null,ee.open?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>U(oe=>({...oe,open:!1}))}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-[520px] bg-white shadow-xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:ee.title}),ee.hint?e.jsx("p",{className:"text-xs text-gray-500 mt-1 backend-hint",children:ee.hint}):null]}),e.jsx("button",{type:"button",className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>U(oe=>({...oe,open:!1})),children:e.jsx(Na,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Ne,{value:ee.search,onChange:oe=>U(Ee=>({...Ee,search:oe.target.value})),placeholder:"Filtrar itens...",className:"h-9"}),e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{U(oe=>({...oe,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:"loading",errorMessage:void 0})),Je.refetch()},disabled:!ee.key||ee.status==="loading",children:"Recarregar"})]}),(()=>{const oe=rr(ee.search),Ee=oe?ee.rows.filter(Ut=>Xr(`${Ut.id} ${Ut.title} ${Ut.subtitle||""} ${Ut.status||""}`,oe)):ee.rows,$t=ee.status==="loading"&&ee.rows.length===0,us=ee.status==="loading"&&ee.rows.length>0;return e.jsx(e.Fragment,{children:$t?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ri,{className:"h-5 w-2/3"}),e.jsx(Ri,{className:"h-5 w-1/2"}),e.jsx(Ri,{className:"h-24 w-full"}),e.jsx(Ri,{className:"h-24 w-full"})]}):ee.status==="error"?e.jsx(mC,{title:"Falha ao carregar detalhes",description:ee.errorMessage}):Ee.length===0?e.jsx(uC,{title:"Sem itens",description:"Nada encontrado para este recorte (ou filtro local)."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[Ee.length," de ",ee.rows.length," itens carregados",ee.hasMore?"  mais disponvel":""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Fonte: ",Je.source]})]}),(()=>{const Ut=Hx(ee.key),Zs=Ut.columns,Rt=ee.sortBy,mn=ee.sortDir,Yt=bt=>{if(!bt.sortable)return;const Cs=bt.sortKey||bt.id,ct=Rt===Cs&&mn==="asc"?"desc":"asc";U(ns=>({...ns,sortBy:Cs,sortDir:ct,cursor:void 0,nextCursor:void 0,hasMore:!1,rows:[],status:"loading",errorMessage:void 0}))};return e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[Zs.map(bt=>{const Cs=(Rt||"")===(bt.sortKey||bt.id),ct=bt.sortable?Cs?mn==="asc"?e.jsx(lw,{className:"w-4 h-4"}):e.jsx(Iu,{className:"w-4 h-4"}):e.jsx(PE,{className:"w-4 h-4 opacity-60"}):null,ns=e.jsxs("span",{className:"inline-flex items-center gap-1",children:[bt.label,ct]});return e.jsx("th",{className:["px-3 py-2 text-xs font-medium text-gray-600 whitespace-nowrap",bt.align==="right"?"text-right":"text-left"].join(" "),children:bt.sortable?e.jsx("button",{type:"button",className:"hover:text-gray-900",onClick:()=>Yt(bt),children:ns}):ns},bt.id)}),Ut.rowAction?e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-600 text-right whitespace-nowrap",children:"Aes"}):null]})}),e.jsx("tbody",{children:Ee.map(bt=>e.jsxs("tr",{className:"border-t border-gray-200",children:[Zs.map(Cs=>{const ct=Cs.get(bt),ns=Cs.render?Cs.render(ct,bt):e.jsx("span",{children:gn(ct)});return e.jsx("td",{className:["px-3 py-2 text-sm text-gray-800 whitespace-nowrap",Cs.align==="right"?"text-right":"text-left"].join(" "),children:ns},Cs.id)}),Ut.rowAction?e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx(Z,{variant:"outline",className:"h-8",onClick:()=>t(Ut.rowAction.page),children:Ut.rowAction.label})}):null]},bt.id))})]})})})(),ee.hasMore&&ee.nextCursor?e.jsx(Z,{variant:"outline",className:"w-full h-9",onClick:()=>U(Ut=>({...Ut,cursor:Ut.nextCursor,status:"loading",errorMessage:void 0})),disabled:ee.status==="loading",children:us?"Carregando...":"Carregar mais"}):null,e.jsx(Z,{variant:"outline",className:"w-full h-9",onClick:()=>{const Ut=Hx(ee.key);vl(ee.title,Ee,Ut.columns)},disabled:Ee.length===0||ee.status==="loading",children:"Exportar CSV (mock)"})]})})})()]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Este drawer  mock. Na integrao, ele abrir listas reais filtradas (com paginao/ordenao)."})})]})]}):null,e.jsx(Ps,{open:$,onOpenChange:R,children:e.jsxs(Es,{className:"sm:max-w-md",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:z==="update"?"Atualizar viso":"Salvar viso"}),e.jsx(kr,{children:"Salva a aba atual, filtros globais e um layout (MVP) como um preset. No MVP fica no localStorage; depois ser persistido no backend."})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Nome da viso"}),e.jsx(Ne,{value:ue,onChange:oe=>se(oe.target.value),className:"h-9"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Di,{label:"Aba",value:Mt(r)}),e.jsx(Di,{label:"Perodo",value:u.datePreset.toUpperCase()}),u.city?e.jsx(Di,{label:"Cidade",value:u.city}):null,u.query?e.jsx(Di,{label:"Busca",value:u.query}):null,e.jsx(Di,{label:"Tipo",value:u.mediaType})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>R(!1),children:"Cancelar"}),e.jsx(Z,{className:"h-9",onClick:ys,children:z==="update"?"Atualizar":"Salvar"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"MVP: localStorage. BACKEND SWAP POINT: GET/POST/DELETE /dashboard/views (por usurio/empresa)."})]})]})}),e.jsx(Ps,{open:E,onOpenChange:S,children:e.jsxs(Es,{className:"max-w-2xl",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:"Checklist de paridade com o backend"}),e.jsx(kr,{children:"Use esta lista para validar se os nmeros do Dashboard batem com o backend antes do rollout completo."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Dica: execute por empresa e compare os KPIs com relatrios/queries oficiais. Marque os itens conforme aprovar."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"h-8 text-xs",onClick:Ae,children:"Copiar checklist"}),e.jsx(Z,{variant:"outline",className:"h-8 text-xs",onClick:()=>{P6(I,O),D({}),ye.success("Checklist resetado")},children:"Reset"})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-md divide-y",children:dC.map(oe=>e.jsxs("div",{className:"p-3 flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",className:"mt-1",checked:!!P[oe.id],onChange:()=>D(Ee=>A6(I,O,Ee,oe.id))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:oe.title}),e.jsx("p",{className:"text-xs text-gray-500",children:oe.description}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Rota: ",e.jsx("span",{className:"font-medium",children:oe.route}),"  Campos: ",oe.fields.join(", ")]})]})]},oe.id))})]})]})}),e.jsx(Ps,{open:H,onOpenChange:re,children:e.jsxs(Es,{className:"sm:max-w-md",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:"Compartilhar mapa de pontos"}),e.jsx(kr,{children:"Compartilhe o link pblico do mapa de pontos de mdia da sua empresa. Qualquer pessoa com o link poder visualizar os pontos disponveis."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"grid flex-1 gap-2",children:e.jsx(Ne,{id:"map-url",value:Ds,readOnly:!0,className:"h-9"})}),e.jsx(Z,{type:"button",size:"sm",className:"px-3",onClick:vs,children:G?e.jsxs(e.Fragment,{children:[e.jsx(ja,{className:"h-4 w-4 mr-1"}),"Copiado"]}):e.jsxs(e.Fragment,{children:[e.jsx($n,{className:"h-4 w-4 mr-1"}),"Copiar link"]})})]})]})})]})})}var Zx="rovingFocusGroup.onEntryFocus",$6={bubbles:!1,cancelable:!0},Bu="RovingFocusGroup",[Og,pC,z6]=f0(Bu),[B6,hd]=Sa(Bu,[z6]),[U6,V6]=B6(Bu),fC=m.forwardRef((t,s)=>e.jsx(Og.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Og.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(H6,{...t,ref:s})})}));fC.displayName=Bu;var H6=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:f,onEntryFocus:v,preventScrollOnEntryFocus:x=!1,...g}=t,N=m.useRef(null),w=Qt(s,N),j=ad(c),[C,k]=dr({prop:u,defaultProp:h??null,onChange:f,caller:Bu}),[E,S]=m.useState(!1),P=Fn(v),D=pC(n),I=m.useRef(!1),[O,F]=m.useState(0);return m.useEffect(()=>{const X=N.current;if(X)return X.addEventListener(Zx,P),()=>X.removeEventListener(Zx,P)},[P]),e.jsx(U6,{scope:n,orientation:r,dir:j,loop:o,currentTabStopId:C,onItemFocus:m.useCallback(X=>k(X),[k]),onItemShiftTab:m.useCallback(()=>S(!0),[]),onFocusableItemAdd:m.useCallback(()=>F(X=>X+1),[]),onFocusableItemRemove:m.useCallback(()=>F(X=>X-1),[]),children:e.jsx(jt.div,{tabIndex:E||O===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...t.style},onMouseDown:rt(t.onMouseDown,()=>{I.current=!0}),onFocus:rt(t.onFocus,X=>{const Q=!I.current;if(X.target===X.currentTarget&&Q&&!E){const V=new CustomEvent(Zx,$6);if(X.currentTarget.dispatchEvent(V),!V.defaultPrevented){const $=D().filter(se=>se.focusable),R=$.find(se=>se.active),z=$.find(se=>se.id===C),ue=[R,z,...$].filter(Boolean).map(se=>se.ref.current);vC(ue,x)}}I.current=!1}),onBlur:rt(t.onBlur,()=>S(!1))})})}),xC="RovingFocusGroupItem",gC=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:c,children:u,...h}=t,f=Er(),v=c||f,x=V6(xC,n),g=x.currentTabStopId===v,N=pC(n),{onFocusableItemAdd:w,onFocusableItemRemove:j,currentTabStopId:C}=x;return m.useEffect(()=>{if(r)return w(),()=>j()},[r,w,j]),e.jsx(Og.ItemSlot,{scope:n,id:v,focusable:r,active:o,children:e.jsx(jt.span,{tabIndex:g?0:-1,"data-orientation":x.orientation,...h,ref:s,onMouseDown:rt(t.onMouseDown,k=>{r?x.onItemFocus(v):k.preventDefault()}),onFocus:rt(t.onFocus,()=>x.onItemFocus(v)),onKeyDown:rt(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){x.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const E=Z6(k,x.orientation,x.dir);if(E!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let P=N().filter(D=>D.focusable).map(D=>D.ref.current);if(E==="last")P.reverse();else if(E==="prev"||E==="next"){E==="prev"&&P.reverse();const D=P.indexOf(k.currentTarget);P=x.loop?G6(P,D+1):P.slice(D+1)}setTimeout(()=>vC(P))}}),children:typeof u=="function"?u({isCurrentTabStop:g,hasTabStop:C!=null}):u})})});gC.displayName=xC;var q6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function W6(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Z6(t,s,n){const r=W6(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return q6[r]}function vC(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function G6(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var Q0=fC,X0=gC;function K6(t){const s=Q6(t),n=m.forwardRef((r,o)=>{const{children:c,...u}=r,h=m.Children.toArray(c),f=h.find(Y6);if(f){const v=f.props.children,x=h.map(g=>g===f?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:g);return e.jsx(s,{...u,ref:o,children:m.isValidElement(v)?m.cloneElement(v,void 0,x):null})}return e.jsx(s,{...u,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function Q6(t){const s=m.forwardRef((n,r)=>{const{children:o,...c}=n;if(m.isValidElement(o)){const u=eL(o),h=J6(c,o.props);return o.type!==m.Fragment&&(h.ref=r?$i(r,u):u),m.cloneElement(o,h)}return m.Children.count(o)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var X6=Symbol("radix.slottable");function Y6(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===X6}function J6(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...h)=>{const f=c(...h);return o(...h),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function eL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Lg=["Enter"," "],tL=["ArrowDown","PageUp","Home"],yC=["ArrowUp","PageDown","End"],sL=[...tL,...yC],nL={ltr:[...Lg,"ArrowRight"],rtl:[...Lg,"ArrowLeft"]},aL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[_u,rL,iL]=f0(Uu),[Ul,bC]=Sa(Uu,[iL,Np,hd]),zp=Np(),jC=hd(),[oL,Vl]=Ul(Uu),[lL,Vu]=Ul(Uu),NC=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:o,onOpenChange:c,modal:u=!0}=t,h=zp(s),[f,v]=m.useState(null),x=m.useRef(!1),g=Fn(c),N=ad(o);return m.useEffect(()=>{const w=()=>{x.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>x.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),e.jsx(m1,{...h,children:e.jsx(oL,{scope:s,open:n,onOpenChange:g,content:f,onContentChange:v,children:e.jsx(lL,{scope:s,onClose:m.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:x,dir:N,modal:u,children:r})})})};NC.displayName=Uu;var cL="MenuAnchor",Y0=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,o=zp(n);return e.jsx(h1,{...o,...r,ref:s})});Y0.displayName=cL;var J0="MenuPortal",[dL,wC]=Ul(J0,{forceMount:void 0}),CC=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:o}=t,c=Vl(J0,s);return e.jsx(dL,{scope:s,forceMount:n,children:e.jsx(ia,{present:n||c.open,children:e.jsx(wp,{asChild:!0,container:o,children:r})})})};CC.displayName=J0;var lr="MenuContent",[uL,ev]=Ul(lr),SC=m.forwardRef((t,s)=>{const n=wC(lr,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,c=Vl(lr,t.__scopeMenu),u=Vu(lr,t.__scopeMenu);return e.jsx(_u.Provider,{scope:t.__scopeMenu,children:e.jsx(ia,{present:r||c.open,children:e.jsx(_u.Slot,{scope:t.__scopeMenu,children:u.modal?e.jsx(mL,{...o,ref:s}):e.jsx(hL,{...o,ref:s})})})})}),mL=m.forwardRef((t,s)=>{const n=Vl(lr,t.__scopeMenu),r=m.useRef(null),o=Qt(s,r);return m.useEffect(()=>{const c=r.current;if(c)return A0(c)},[]),e.jsx(tv,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:rt(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),hL=m.forwardRef((t,s)=>{const n=Vl(lr,t.__scopeMenu);return e.jsx(tv,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),pL=K6("MenuContent.ScrollLock"),tv=m.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:h,onEntryFocus:f,onEscapeKeyDown:v,onPointerDownOutside:x,onFocusOutside:g,onInteractOutside:N,onDismiss:w,disableOutsideScroll:j,...C}=t,k=Vl(lr,n),E=Vu(lr,n),S=zp(n),P=jC(n),D=rL(n),[I,O]=m.useState(null),F=m.useRef(null),X=Qt(s,F,k.onContentChange),Q=m.useRef(0),V=m.useRef(""),$=m.useRef(0),R=m.useRef(null),z=m.useRef("right"),J=m.useRef(0),ue=j?Sp:m.Fragment,se=j?{as:pL,allowPinchZoom:!0}:void 0,fe=re=>{const G=V.current+re,W=D().filter(Y=>!Y.disabled),ne=document.activeElement,K=W.find(Y=>Y.ref.current===ne)?.textValue,ee=W.map(Y=>Y.textValue),U=_L(ee,G,K),le=W.find(Y=>Y.textValue===U)?.ref.current;(function Y(ae){V.current=ae,window.clearTimeout(Q.current),ae!==""&&(Q.current=window.setTimeout(()=>Y(""),1e3))})(G),le&&setTimeout(()=>le.focus())};m.useEffect(()=>()=>window.clearTimeout(Q.current),[]),x0();const H=m.useCallback(re=>z.current===R.current?.side&&PL(re,R.current?.area),[]);return e.jsx(uL,{scope:n,searchRef:V,onItemEnter:m.useCallback(re=>{H(re)&&re.preventDefault()},[H]),onItemLeave:m.useCallback(re=>{H(re)||(F.current?.focus(),O(null))},[H]),onTriggerLeave:m.useCallback(re=>{H(re)&&re.preventDefault()},[H]),pointerGraceTimerRef:$,onPointerGraceIntentChange:m.useCallback(re=>{R.current=re},[]),children:e.jsx(ue,{...se,children:e.jsx(gp,{asChild:!0,trapped:o,onMountAutoFocus:rt(c,re=>{re.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:e.jsx(xp,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:v,onPointerDownOutside:x,onFocusOutside:g,onInteractOutside:N,onDismiss:w,children:e.jsx(Q0,{asChild:!0,...P,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:O,onEntryFocus:rt(f,re=>{E.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(p1,{role:"menu","aria-orientation":"vertical","data-state":BC(k.open),"data-radix-menu-content":"",dir:E.dir,...S,...C,ref:X,style:{outline:"none",...C.style},onKeyDown:rt(C.onKeyDown,re=>{const W=re.target.closest("[data-radix-menu-content]")===re.currentTarget,ne=re.ctrlKey||re.altKey||re.metaKey,K=re.key.length===1;W&&(re.key==="Tab"&&re.preventDefault(),!ne&&K&&fe(re.key));const ee=F.current;if(re.target!==ee||!sL.includes(re.key))return;re.preventDefault();const le=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);yC.includes(re.key)&&le.reverse(),CL(le)}),onBlur:rt(t.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(Q.current),V.current="")}),onPointerMove:rt(t.onPointerMove,Au(re=>{const G=re.target,W=J.current!==re.clientX;if(re.currentTarget.contains(G)&&W){const ne=re.clientX>J.current?"right":"left";z.current=ne,J.current=re.clientX}}))})})})})})})});SC.displayName=lr;var fL="MenuGroup",sv=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(jt.div,{role:"group",...r,ref:s})});sv.displayName=fL;var xL="MenuLabel",_C=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(jt.div,{...r,ref:s})});_C.displayName=xL;var Yh="MenuItem",$j="menu.itemSelect",Bp=m.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...o}=t,c=m.useRef(null),u=Vu(Yh,t.__scopeMenu),h=ev(Yh,t.__scopeMenu),f=Qt(s,c),v=m.useRef(!1),x=()=>{const g=c.current;if(!n&&g){const N=new CustomEvent($j,{bubbles:!0,cancelable:!0});g.addEventListener($j,w=>r?.(w),{once:!0}),Bw(g,N),N.defaultPrevented?v.current=!1:u.onClose()}};return e.jsx(AC,{...o,ref:f,disabled:n,onClick:rt(t.onClick,x),onPointerDown:g=>{t.onPointerDown?.(g),v.current=!0},onPointerUp:rt(t.onPointerUp,g=>{v.current||g.currentTarget?.click()}),onKeyDown:rt(t.onKeyDown,g=>{const N=h.searchRef.current!=="";n||N&&g.key===" "||Lg.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Bp.displayName=Yh;var AC=m.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...c}=t,u=ev(Yh,n),h=jC(n),f=m.useRef(null),v=Qt(s,f),[x,g]=m.useState(!1),[N,w]=m.useState("");return m.useEffect(()=>{const j=f.current;j&&w((j.textContent??"").trim())},[c.children]),e.jsx(_u.ItemSlot,{scope:n,disabled:r,textValue:o??N,children:e.jsx(X0,{asChild:!0,...h,focusable:!r,children:e.jsx(jt.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:v,onPointerMove:rt(t.onPointerMove,Au(j=>{r?u.onItemLeave(j):(u.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:rt(t.onPointerLeave,Au(j=>u.onItemLeave(j))),onFocus:rt(t.onFocus,()=>g(!0)),onBlur:rt(t.onBlur,()=>g(!1))})})})}),gL="MenuCheckboxItem",PC=m.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return e.jsx(IC,{scope:t.__scopeMenu,checked:n,children:e.jsx(Bp,{role:"menuitemcheckbox","aria-checked":Jh(n)?"mixed":n,...o,ref:s,"data-state":av(n),onSelect:rt(o.onSelect,()=>r?.(Jh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});PC.displayName=gL;var EC="MenuRadioGroup",[vL,yL]=Ul(EC,{value:void 0,onValueChange:()=>{}}),kC=m.forwardRef((t,s)=>{const{value:n,onValueChange:r,...o}=t,c=Fn(r);return e.jsx(vL,{scope:t.__scopeMenu,value:n,onValueChange:c,children:e.jsx(sv,{...o,ref:s})})});kC.displayName=EC;var DC="MenuRadioItem",TC=m.forwardRef((t,s)=>{const{value:n,...r}=t,o=yL(DC,t.__scopeMenu),c=n===o.value;return e.jsx(IC,{scope:t.__scopeMenu,checked:c,children:e.jsx(Bp,{role:"menuitemradio","aria-checked":c,...r,ref:s,"data-state":av(c),onSelect:rt(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});TC.displayName=DC;var nv="MenuItemIndicator",[IC,bL]=Ul(nv,{checked:!1}),MC=m.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...o}=t,c=bL(nv,n);return e.jsx(ia,{present:r||Jh(c.checked)||c.checked===!0,children:e.jsx(jt.span,{...o,ref:s,"data-state":av(c.checked)})})});MC.displayName=nv;var jL="MenuSeparator",RC=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});RC.displayName=jL;var NL="MenuArrow",OC=m.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,o=zp(n);return e.jsx(f1,{...o,...r,ref:s})});OC.displayName=NL;var wL="MenuSub",[Xz,LC]=Ul(wL),hu="MenuSubTrigger",FC=m.forwardRef((t,s)=>{const n=Vl(hu,t.__scopeMenu),r=Vu(hu,t.__scopeMenu),o=LC(hu,t.__scopeMenu),c=ev(hu,t.__scopeMenu),u=m.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:f}=c,v={__scopeMenu:t.__scopeMenu},x=m.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return m.useEffect(()=>x,[x]),m.useEffect(()=>{const g=h.current;return()=>{window.clearTimeout(g),f(null)}},[h,f]),e.jsx(Y0,{asChild:!0,...v,children:e.jsx(AC,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":BC(n.open),...t,ref:$i(s,o.onTriggerChange),onClick:g=>{t.onClick?.(g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:rt(t.onPointerMove,Au(g=>{c.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!n.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),x()},100))})),onPointerLeave:rt(t.onPointerLeave,Au(g=>{x();const N=n.content?.getBoundingClientRect();if(N){const w=n.content?.dataset.side,j=w==="right",C=j?-5:5,k=N[j?"left":"right"],E=N[j?"right":"left"];c.onPointerGraceIntentChange({area:[{x:g.clientX+C,y:g.clientY},{x:k,y:N.top},{x:E,y:N.top},{x:E,y:N.bottom},{x:k,y:N.bottom}],side:w}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(g),g.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:rt(t.onKeyDown,g=>{const N=c.searchRef.current!=="";t.disabled||N&&g.key===" "||nL[r.dir].includes(g.key)&&(n.onOpenChange(!0),n.content?.focus(),g.preventDefault())})})})});FC.displayName=hu;var $C="MenuSubContent",zC=m.forwardRef((t,s)=>{const n=wC(lr,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,c=Vl(lr,t.__scopeMenu),u=Vu(lr,t.__scopeMenu),h=LC($C,t.__scopeMenu),f=m.useRef(null),v=Qt(s,f);return e.jsx(_u.Provider,{scope:t.__scopeMenu,children:e.jsx(ia,{present:r||c.open,children:e.jsx(_u.Slot,{scope:t.__scopeMenu,children:e.jsx(tv,{id:h.contentId,"aria-labelledby":h.triggerId,...o,ref:v,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{u.isUsingKeyboardRef.current&&f.current?.focus(),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:rt(t.onFocusOutside,x=>{x.target!==h.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:rt(t.onEscapeKeyDown,x=>{u.onClose(),x.preventDefault()}),onKeyDown:rt(t.onKeyDown,x=>{const g=x.currentTarget.contains(x.target),N=aL[u.dir].includes(x.key);g&&N&&(c.onOpenChange(!1),h.trigger?.focus(),x.preventDefault())})})})})})});zC.displayName=$C;function BC(t){return t?"open":"closed"}function Jh(t){return t==="indeterminate"}function av(t){return Jh(t)?"indeterminate":t?"checked":"unchecked"}function CL(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function SL(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function _L(t,s,n){const o=s.length>1&&Array.from(s).every(v=>v===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let u=SL(t,Math.max(c,0));o.length===1&&(u=u.filter(v=>v!==n));const f=u.find(v=>v.toLowerCase().startsWith(o.toLowerCase()));return f!==n?f:void 0}function AL(t,s){const{x:n,y:r}=t;let o=!1;for(let c=0,u=s.length-1;c<s.length;u=c++){const h=s[c],f=s[u],v=h.x,x=h.y,g=f.x,N=f.y;x>r!=N>r&&n<(g-v)*(r-x)/(N-x)+v&&(o=!o)}return o}function PL(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return AL(n,s)}function Au(t){return s=>s.pointerType==="mouse"?t(s):void 0}var EL=NC,kL=Y0,DL=CC,TL=SC,IL=sv,ML=_C,RL=Bp,OL=PC,LL=kC,FL=TC,$L=MC,zL=RC,BL=OC,UL=FC,VL=zC,Up="DropdownMenu",[HL]=Sa(Up,[bC]),oa=bC(),[qL,UC]=HL(Up),VC=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:o,defaultOpen:c,onOpenChange:u,modal:h=!0}=t,f=oa(s),v=m.useRef(null),[x,g]=dr({prop:o,defaultProp:c??!1,onChange:u,caller:Up});return e.jsx(qL,{scope:s,triggerId:Er(),triggerRef:v,contentId:Er(),open:x,onOpenChange:g,onOpenToggle:m.useCallback(()=>g(N=>!N),[g]),modal:h,children:e.jsx(EL,{...f,open:x,onOpenChange:g,dir:r,modal:h,children:n})})};VC.displayName=Up;var HC="DropdownMenuTrigger",qC=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,c=UC(HC,n),u=oa(n);return e.jsx(kL,{asChild:!0,...u,children:e.jsx(jt.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:$i(s,c.triggerRef),onPointerDown:rt(t.onPointerDown,h=>{!r&&h.button===0&&h.ctrlKey===!1&&(c.onOpenToggle(),c.open||h.preventDefault())}),onKeyDown:rt(t.onKeyDown,h=>{r||(["Enter"," "].includes(h.key)&&c.onOpenToggle(),h.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault())})})})});qC.displayName=HC;var WL="DropdownMenuPortal",WC=t=>{const{__scopeDropdownMenu:s,...n}=t,r=oa(s);return e.jsx(DL,{...r,...n})};WC.displayName=WL;var ZC="DropdownMenuContent",GC=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=UC(ZC,n),c=oa(n),u=m.useRef(!1);return e.jsx(TL,{id:o.contentId,"aria-labelledby":o.triggerId,...c,...r,ref:s,onCloseAutoFocus:rt(t.onCloseAutoFocus,h=>{u.current||o.triggerRef.current?.focus(),u.current=!1,h.preventDefault()}),onInteractOutside:rt(t.onInteractOutside,h=>{const f=h.detail.originalEvent,v=f.button===0&&f.ctrlKey===!0,x=f.button===2||v;(!o.modal||x)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GC.displayName=ZC;var ZL="DropdownMenuGroup",GL=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(IL,{...o,...r,ref:s})});GL.displayName=ZL;var KL="DropdownMenuLabel",QL=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(ML,{...o,...r,ref:s})});QL.displayName=KL;var XL="DropdownMenuItem",KC=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(RL,{...o,...r,ref:s})});KC.displayName=XL;var YL="DropdownMenuCheckboxItem",JL=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(OL,{...o,...r,ref:s})});JL.displayName=YL;var e9="DropdownMenuRadioGroup",t9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(LL,{...o,...r,ref:s})});t9.displayName=e9;var s9="DropdownMenuRadioItem",n9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(FL,{...o,...r,ref:s})});n9.displayName=s9;var a9="DropdownMenuItemIndicator",r9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx($L,{...o,...r,ref:s})});r9.displayName=a9;var i9="DropdownMenuSeparator",o9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(zL,{...o,...r,ref:s})});o9.displayName=i9;var l9="DropdownMenuArrow",c9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(BL,{...o,...r,ref:s})});c9.displayName=l9;var d9="DropdownMenuSubTrigger",u9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(UL,{...o,...r,ref:s})});u9.displayName=d9;var m9="DropdownMenuSubContent",h9=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=oa(n);return e.jsx(VL,{...o,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});h9.displayName=m9;var p9=VC,f9=qC,x9=WC,g9=GC,v9=KC;function y9({...t}){return e.jsx(p9,{"data-slot":"dropdown-menu",...t})}function b9({...t}){return e.jsx(f9,{"data-slot":"dropdown-menu-trigger",...t})}function j9({className:t,sideOffset:s=4,...n}){return e.jsx(x9,{children:e.jsx(g9,{"data-slot":"dropdown-menu-content",sideOffset:s,className:vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function Ic({className:t,inset:s,variant:n="default",...r}){return e.jsx(v9,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:vt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}var Vp="Switch",[N9]=Sa(Vp),[w9,C9]=N9(Vp),QC=m.forwardRef((t,s)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:c,required:u,disabled:h,value:f="on",onCheckedChange:v,form:x,...g}=t,[N,w]=m.useState(null),j=Qt(s,P=>w(P)),C=m.useRef(!1),k=N?x||!!N.closest("form"):!0,[E,S]=dr({prop:o,defaultProp:c??!1,onChange:v,caller:Vp});return e.jsxs(w9,{scope:n,checked:E,disabled:h,children:[e.jsx(jt.button,{type:"button",role:"switch","aria-checked":E,"aria-required":u,"data-state":eS(E),"data-disabled":h?"":void 0,disabled:h,value:f,...g,ref:j,onClick:rt(t.onClick,P=>{S(D=>!D),k&&(C.current=P.isPropagationStopped(),C.current||P.stopPropagation())})}),k&&e.jsx(JC,{control:N,bubbles:!C.current,name:r,value:f,checked:E,required:u,disabled:h,form:x,style:{transform:"translateX(-100%)"}})]})});QC.displayName=Vp;var XC="SwitchThumb",YC=m.forwardRef((t,s)=>{const{__scopeSwitch:n,...r}=t,o=C9(XC,n);return e.jsx(jt.span,{"data-state":eS(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:s})});YC.displayName=XC;var S9="SwitchBubbleInput",JC=m.forwardRef(({__scopeSwitch:t,control:s,checked:n,bubbles:r=!0,...o},c)=>{const u=m.useRef(null),h=Qt(u,c),f=_0(n),v=w0(s);return m.useEffect(()=>{const x=u.current;if(!x)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set;if(f!==n&&w){const j=new Event("click",{bubbles:r});w.call(x,n),x.dispatchEvent(j)}},[f,n,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:h,style:{...o.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});JC.displayName=S9;function eS(t){return t?"checked":"unchecked"}var _9=QC,A9=YC;function P9({className:t,...s}){return e.jsx(_9,{"data-slot":"switch",className:vt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(A9,{"data-slot":"switch-thumb",className:vt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function tS(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const C=(await Te.get("/media-points",{params:t})).data,k=Array.isArray(C)?C:C.data,E=Array.isArray(C)?k.length:C.total??k.length;n(k),o(E)}catch(j){f(j)}finally{u(!1)}},x=async j=>{const C=await Te.post("/media-points",j);return n(k=>[...k,C.data]),C.data},g=async(j,C)=>{const k=await Te.put(`/media-points/${j}`,C);return n(E=>E.map(S=>S.id===j?k.data:S)),k.data},N=async j=>{await Te.delete(`/media-points/${j}`),n(C=>C.filter(k=>k.id!==j))},w=async(j,C)=>{const k=new FormData;k.append("file",C);const E=await Te.post(`/media-points/${j}/image`,k,{headers:{"Content-Type":"multipart/form-data"}});return n(S=>S.map(P=>P.id===j?{...P,mainImageUrl:E.data.mainImageUrl}:P)),E.data};return m.useEffect(()=>{v()},[t.search,t.type,t.city,t.state,t.showInMediaKit,t.page,t.pageSize]),{mediaPoints:s,total:r,loading:c,error:h,refetch:v,createMediaPoint:x,updateMediaPoint:g,deleteMediaPoint:N,uploadMediaPointImage:w}}function E9(){const[t,s]=m.useState([]),[n,r]=m.useState([]),[o,c]=m.useState(!1),[u,h]=m.useState(null),f=async()=>{try{c(!0),h(null);const v=await Te.get("/media-points/meta");s(Array.isArray(v.data?.cities)?v.data.cities:[]),r(Array.isArray(v.data?.states)?v.data.states:[])}catch(v){h(v),s([]),r([])}finally{c(!1)}};return m.useEffect(()=>{f()},[]),{cities:t,states:n,loading:o,error:u,refetch:f}}var Hp="Tabs",[k9]=Sa(Hp,[hd]),sS=hd(),[D9,rv]=k9(Hp),nS=m.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:c,orientation:u="horizontal",dir:h,activationMode:f="automatic",...v}=t,x=ad(h),[g,N]=dr({prop:r,onChange:o,defaultProp:c??"",caller:Hp});return e.jsx(D9,{scope:n,baseId:Er(),value:g,onValueChange:N,orientation:u,dir:x,activationMode:f,children:e.jsx(jt.div,{dir:x,"data-orientation":u,...v,ref:s})})});nS.displayName=Hp;var aS="TabsList",rS=m.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,c=rv(aS,n),u=sS(n);return e.jsx(Q0,{asChild:!0,...u,orientation:c.orientation,dir:c.dir,loop:r,children:e.jsx(jt.div,{role:"tablist","aria-orientation":c.orientation,...o,ref:s})})});rS.displayName=aS;var iS="TabsTrigger",oS=m.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...c}=t,u=rv(iS,n),h=sS(n),f=dS(u.baseId,r),v=uS(u.baseId,r),x=r===u.value;return e.jsx(X0,{asChild:!0,...h,focusable:!o,active:x,children:e.jsx(jt.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":v,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:f,...c,ref:s,onMouseDown:rt(t.onMouseDown,g=>{!o&&g.button===0&&g.ctrlKey===!1?u.onValueChange(r):g.preventDefault()}),onKeyDown:rt(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&u.onValueChange(r)}),onFocus:rt(t.onFocus,()=>{const g=u.activationMode!=="manual";!x&&!o&&g&&u.onValueChange(r)})})})});oS.displayName=iS;var lS="TabsContent",cS=m.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:o,children:c,...u}=t,h=rv(lS,n),f=dS(h.baseId,r),v=uS(h.baseId,r),x=r===h.value,g=m.useRef(x);return m.useEffect(()=>{const N=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(N)},[]),e.jsx(ia,{present:o||x,children:({present:N})=>e.jsx(jt.div,{"data-state":x?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":f,hidden:!N,id:v,tabIndex:0,...u,ref:s,style:{...t.style,animationDuration:g.current?"0s":void 0},children:N&&c})})});cS.displayName=lS;function dS(t,s){return`${t}-trigger-${s}`}function uS(t,s){return`${t}-content-${s}`}var T9=nS,I9=rS,M9=oS,R9=cS;function zi({className:t,...s}){return e.jsx(T9,{"data-slot":"tabs",className:vt("flex flex-col gap-2",t),...s})}function Bi({className:t,...s}){return e.jsx(I9,{"data-slot":"tabs-list",className:vt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function cs({className:t,...s}){return e.jsx(M9,{"data-slot":"tabs-trigger",className:vt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function As({className:t,...s}){return e.jsx(R9,{"data-slot":"tabs-content",className:vt("flex-1 outline-none",t),...s})}var qp="Collapsible",[O9]=Sa(qp),[L9,iv]=O9(qp),mS=m.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:c,onOpenChange:u,...h}=t,[f,v]=dr({prop:r,defaultProp:o??!1,onChange:u,caller:qp});return e.jsx(L9,{scope:n,disabled:c,contentId:Er(),open:f,onOpenToggle:m.useCallback(()=>v(x=>!x),[v]),children:e.jsx(jt.div,{"data-state":lv(f),"data-disabled":c?"":void 0,...h,ref:s})})});mS.displayName=qp;var hS="CollapsibleTrigger",pS=m.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,o=iv(hS,n);return e.jsx(jt.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":lv(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:s,onClick:rt(t.onClick,o.onOpenToggle)})});pS.displayName=hS;var ov="CollapsibleContent",fS=m.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=iv(ov,t.__scopeCollapsible);return e.jsx(ia,{present:n||o.open,children:({present:c})=>e.jsx(F9,{...r,ref:s,present:c})})});fS.displayName=ov;var F9=m.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:o,...c}=t,u=iv(ov,n),[h,f]=m.useState(r),v=m.useRef(null),x=Qt(s,v),g=m.useRef(0),N=g.current,w=m.useRef(0),j=w.current,C=u.open||h,k=m.useRef(C),E=m.useRef(void 0);return m.useEffect(()=>{const S=requestAnimationFrame(()=>k.current=!1);return()=>cancelAnimationFrame(S)},[]),Tn(()=>{const S=v.current;if(S){E.current=E.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const P=S.getBoundingClientRect();g.current=P.height,w.current=P.width,k.current||(S.style.transitionDuration=E.current.transitionDuration,S.style.animationName=E.current.animationName),f(r)}},[u.open,r]),e.jsx(jt.div,{"data-state":lv(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!C,...c,ref:x,style:{"--radix-collapsible-content-height":N?`${N}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...t.style},children:C&&o})});function lv(t){return t?"open":"closed"}var $9=mS;function z9({...t}){return e.jsx($9,{"data-slot":"collapsible",...t})}function B9({...t}){return e.jsx(pS,{"data-slot":"collapsible-trigger",...t})}function U9({...t}){return e.jsx(fS,{"data-slot":"collapsible-content",...t})}Ft.OOH,Ft.DOOH,Ft.OOH;La.FACE,ei.FLUXO,La.FACE,ei.CONTRA_FLUXO,La.SCREEN,La.SCREEN,La.FACE,ei.FLUXO;ko.AREA_PARTICULAR,ko.AREA_PARTICULAR,ko.DER;const V9=["OUTDOOR","FRONT_LIGHT","TOTEM","EMPENA","PAINEL_RODOVIARIO"],H9=["PAINEL_LED","TELA_DIGITAL","PAINEL_ELETRONICO"],q9=["Shopping Center","Rodovia","Avenida Principal","Terminal de nibus","Centro Comercial","Bairro Residencial","Aeroporto","Estao de Metr"],xS=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],W9=["A","B","C","D","E"];_h.ACTIVE,_h.ACTIVE,_h.ACTIVE;Kt.CLIENTE,Kt.PROSPECT,Kt.LEAD,Kt.CLIENTE,Kt.LEAD,Kt.INATIVO;as.APROVADA,as.ENVIADA,as.ENVIADA,as.APROVADA,as.APROVADA;sn.PRODUTO,On.UNITARIO,sn.SERVICO,On.A_PARTIR_DE,sn.SERVICO,On.PACOTE,sn.SERVICO,On.UNITARIO,sn.PRODUTO,On.UNITARIO,sn.SERVICO,On.A_PARTIR_DE,sn.PRODUTO,On.UNITARIO,sn.SERVICO,On.PACOTE;hs.ATIVA,hs.EM_INSTALACAO,hs.ATIVA,hs.ATIVA,hs.APROVADA,hs.AGUARDANDO_MATERIAL;et.PAGA,xs.PIX,et.PAGA,xs.BOLETO,et.PAGA,xs.TRANSFERENCIA,et.ABERTA,et.ABERTA,et.ABERTA,et.ENVIADA,xs.BOLETO,et.ENVIADA,xs.PIX,et.VENCIDA,xs.BOLETO;Bt.ENTRADA,tn.PIX,Bt.ENTRADA,tn.BOLETO,Bt.ENTRADA,tn.PIX,Bt.ENTRADA,tn.BOLETO,Bt.ENTRADA,tn.BOLETO,Bt.ENTRADA,tn.PIX,Bt.ENTRADA,tn.PIX,Bt.ENTRADA,tn.BOLETO,Bt.ENTRADA,tn.PIX,Bt.ENTRADA,tn.BOLETO,Bt.ENTRADA,tn.BOLETO,Bt.ENTRADA,tn.PIX;function Z9({open:t,onOpenChange:s,mediaPoint:n,onSave:r}){const o=$=>{if(!$)return $??null;if($.startsWith("/uploads/"))return $;const R=$.indexOf("/uploads/");return R>=0?$.slice(R):$},[c,u]=m.useState(n?.type||Ft.OOH),[h,f]=m.useState({type:Ft.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),[v,x]=m.useState({}),[g,N]=m.useState(null),[w,j]=m.useState(!1),[C,k]=m.useState(null),[E,S]=m.useState(null);m.useEffect(()=>{N(null),n?(f(n),u(n.type),k(null),S(o(n.mainImageUrl)||null)):(f({type:Ft.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),u(Ft.OOH),k(null),S(null))},[n,t]);const P=$=>{u($),f(R=>({...R,type:$,subcategory:void 0}))},D=$=>{const R=$.target.files?.[0]??null;if(k(R),R){const z=URL.createObjectURL(R);S(z)}};m.useEffect(()=>()=>{E&&E.startsWith("blob:")&&URL.revokeObjectURL(E)},[E]);const I=($,R)=>{f(z=>({...z,[$]:R})),v[$]&&x(z=>({...z,[$]:""}))},O=$=>{const R=h.socialClasses||[],z=R.includes($)?R.filter(J=>J!==$):[...R,$];I("socialClasses",z)},F=()=>{const $={};return h.name?.trim()||($.name="Nome do ponto  obrigatrio"),h.addressCity?.trim()||($.addressCity="Cidade  obrigatria"),h.addressState?.trim()||($.addressState="Estado  obrigatrio"),(h.latitude===void 0||h.latitude===null)&&($.latitude="Latitude  obrigatria"),(h.longitude===void 0||h.longitude===null)&&($.longitude="Longitude  obrigatria"),x($),Object.keys($).length===0},X=async()=>{if(!F())return;j(!0),N(null);const{id:$,companyId:R,createdAt:z,updatedAt:J,units:ue,owners:se,...fe}=h||{};delete fe.basePriceDay;try{await r({...fe,type:c},C),s(!1)}catch(H){const re=H?.message||"No foi possvel salvar o ponto de mdia.";N(re)}finally{j(!1)}},Q=()=>{f({type:Ft.OOH,showInMediaKit:!1,addressCountry:"Brasil",socialClasses:[]}),x({}),N(null),s(!1)},V=c===Ft.OOH?V9:H9;return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:n?"Editar Ponto de Mdia":"Cadastrar Novo Ponto de Mdia (MediaPoint)"}),e.jsx(kr,{children:n?"Atualize os detalhes do ponto de mdia.":"Preencha os campos para cadastrar um novo ponto de mdia."})]}),e.jsxs(zi,{value:c,onValueChange:$=>P($),children:[e.jsxs(Bi,{className:"grid w-full grid-cols-2",children:[e.jsx(cs,{value:Ft.OOH,children:"OOH"}),e.jsx(cs,{value:Ft.DOOH,children:"DOOH"})]}),e.jsxs(As,{value:c,className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Informaes Bsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome do Ponto *"}),e.jsx(Ne,{placeholder:"Ex: Outdoor Av. Paulista 1000",value:h.name||"",onChange:$=>I("name",$.target.value),className:v.name?"border-red-500":""}),v.name&&e.jsx("p",{className:"text-xs text-red-600",children:v.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Subcategoria"}),e.jsxs(_t,{value:h.subcategory||"",onValueChange:$=>I("subcategory",$),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione a subcategoria"})}),e.jsx(Et,{children:V.map($=>e.jsx(De,{value:$,children:$},$))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Imagem principal"}),e.jsx(Ne,{type:"file",accept:"image/*",onChange:D}),E&&e.jsx("div",{className:"mt-2 w-full max-w-sm h-40 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:E,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Selecione uma imagem (PNG/JPG). O upload ser feito ao salvar."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Descrio"}),e.jsx(Va,{placeholder:"Descreva o ponto de mdia...",value:h.description||"",onChange:$=>I("description",$.target.value),rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Localizao"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"CEP"}),e.jsx(Ne,{placeholder:"00000-000",value:h.addressZipcode||"",onChange:$=>I("addressZipcode",$.target.value)})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{children:"Rua/Avenida"}),e.jsx(Ne,{placeholder:"Ex: Avenida Paulista",value:h.addressStreet||"",onChange:$=>I("addressStreet",$.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nmero"}),e.jsx(Ne,{placeholder:"1000",value:h.addressNumber||"",onChange:$=>I("addressNumber",$.target.value)})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{children:"Bairro"}),e.jsx(Ne,{placeholder:"Ex: Bela Vista",value:h.addressDistrict||"",onChange:$=>I("addressDistrict",$.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Cidade *"}),e.jsx(Ne,{placeholder:"So Paulo",value:h.addressCity||"",onChange:$=>I("addressCity",$.target.value),className:v.addressCity?"border-red-500":""}),v.addressCity&&e.jsx("p",{className:"text-xs text-red-600",children:v.addressCity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Estado *"}),e.jsxs(_t,{value:h.addressState||"",onValueChange:$=>I("addressState",$),children:[e.jsx(Pt,{className:v.addressState?"border-red-500":"",children:e.jsx(At,{placeholder:"UF"})}),e.jsx(Et,{children:xS.map($=>e.jsx(De,{value:$,children:$},$))})]}),v.addressState&&e.jsx("p",{className:"text-xs text-red-600",children:v.addressState})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Pas"}),e.jsx(Ne,{value:h.addressCountry||"Brasil",onChange:$=>I("addressCountry",$.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Latitude *"}),e.jsx(Ne,{type:"number",step:"0.000001",placeholder:"-23.561414",value:h.latitude||"",onChange:$=>I("latitude",parseFloat($.target.value)),className:v.latitude?"border-red-500":""}),v.latitude&&e.jsx("p",{className:"text-xs text-red-600",children:v.latitude})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Longitude *"}),e.jsx(Ne,{type:"number",step:"0.000001",placeholder:"-46.655881",value:h.longitude||"",onChange:$=>I("longitude",parseFloat($.target.value)),className:v.longitude?"border-red-500":""}),v.longitude&&e.jsx("p",{className:"text-xs text-red-600",children:v.longitude})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Dados Comerciais e Audincia"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Impactos Dirios"}),e.jsx(Ne,{type:"number",placeholder:"85000",value:h.dailyImpressions||"",onChange:$=>I("dailyImpressions",parseInt($.target.value)||null)}),!h.dailyImpressions&&e.jsx("p",{className:"text-xs text-amber-600",children:" Recomendado preencher"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{children:"Ambiente"}),e.jsxs(_t,{value:h.environment||"",onValueChange:$=>I("environment",$),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o ambiente"})}),e.jsx(Et,{children:q9.map($=>e.jsx(De,{value:$,children:$},$))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Classes Sociais Atendidas (socialClasses)"}),e.jsx("div",{className:"flex gap-2",children:W9.map($=>e.jsxs(st,{variant:h.socialClasses?.includes($)?"default":"outline",className:"cursor-pointer",onClick:()=>O($),children:[$,h.socialClasses?.includes($)&&e.jsx(Na,{className:"w-3 h-3 ml-1"})]},$))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Preo Mensal (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"8500.00",value:h.basePriceMonth||"",onChange:$=>I("basePriceMonth",parseFloat($.target.value)||null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Preo Quinzenal (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"2500.00",value:h.basePriceWeek||"",onChange:$=>I("basePriceWeek",parseFloat($.target.value)||null)})]})]})]}),c===Ft.OOH&&e.jsx(z9,{defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(B9,{asChild:!0,children:e.jsxs(Z,{variant:"outline",className:"w-full justify-between bg-orange-50/50 hover:bg-orange-100/50 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($c,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-900",children:"Custos de Produo OOH"})]}),e.jsx(Iu,{className:"w-4 h-4"})]})}),e.jsx(U9,{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-orange-50/30 rounded-lg border border-orange-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure os custos padro de produo para este ponto OOH. Estes valores sero usados como referncia para oramentos e clculos de custo."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Lona (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.lona||"",onChange:$=>I("productionCosts",{...h.productionCosts,lona:parseFloat($.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material de impresso (lona/tecido)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Adesivo (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.adesivo||"",onChange:$=>I("productionCosts",{...h.productionCosts,adesivo:parseFloat($.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material adesivo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Vinil (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.vinil||"",onChange:$=>I("productionCosts",{...h.productionCosts,vinil:parseFloat($.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Material vinlico (opcional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Montagem/Instalao (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"R$ 0,00",value:h.productionCosts?.montagem||"",onChange:$=>I("productionCosts",{...h.productionCosts,montagem:parseFloat($.target.value)||null})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Mo de obra para instalao"})]})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900 border-b pb-2",children:"Visibilidade"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showInMediaKit",checked:h.showInMediaKit||!1,onChange:$=>I("showInMediaKit",$.target.checked),className:"rounded"}),e.jsx(je,{htmlFor:"showInMediaKit",className:"cursor-pointer",children:"Exibir este ponto no Mdia Kit pblico (showInMediaKit)"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Prximo passo"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Aps criar o ponto, voc poder adicionar ",e.jsx("strong",{children:"unidades (MediaUnit)"}),' - faces para OOH ou telas para DOOH - com preos e caractersticas especficas atravs da opo "Gerenciar unidades" no menu do ponto.']})]})]})]}),g&&e.jsx("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:g}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:Q,children:"Cancelar"}),e.jsx(Z,{onClick:X,disabled:w,children:w?"Salvando...":n?"Salvar Alteraes":"Salvar Ponto"})]})]})})}function gS(t=!0){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=m.useCallback(async()=>{try{o(!0),u(null);const g=await Te.get("/owner-companies");n(g.data??[])}catch(g){console.error(g),u(g?.response?.data?.message||g?.message||"Erro ao carregar empresas proprietrias")}finally{o(!1)}},[]);m.useEffect(()=>{t&&h()},[t,h]);const f=m.useCallback(async g=>{const N=await Te.post("/owner-companies",{name:g.name,document:g.document??void 0,email:g.email??void 0,phone:g.phone??void 0});return await h(),N.data},[h]),v=m.useCallback(async(g,N)=>{const w=await Te.put(`/owner-companies/${g}`,{name:N.name??void 0,document:N.document??void 0,email:N.email??void 0,phone:N.phone??void 0});return await h(),w.data},[h]),x=m.useCallback(async g=>{await Te.delete(`/owner-companies/${g}`),await h()},[h]);return{ownerCompanies:s,loading:r,error:c,refetch:h,createOwnerCompany:f,updateOwnerCompany:v,deleteOwnerCompany:x}}function G9({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:r}){const{subscription:o}=Fo(),c=o?.maxOwnersPerMediaPoint??1,{ownerCompanies:u,loading:h,error:f,refetch:v}=gS(t),[x,g]=m.useState([]),[N,w]=m.useState(!1),[j,C]=m.useState(!1),[k,E]=m.useState(null),S=x.length<c,P=async()=>{try{w(!0);const I=await Te.get(`/media-points/${n}/owners`);g(I.data||[])}catch(I){console.error(I),g([])}finally{w(!1)}};m.useEffect(()=>{t?(P(),v()):(g([]),C(!1),E(null))},[t,n]);const D=async I=>{if(confirm(`Remover proprietrio "${I.ownerCompany?.name??I.ownerName}" deste ponto?`))try{await Te.delete(`/media-point-owners/${I.id}`),g(O=>O.filter(F=>F.id!==I.id))}catch(O){console.error(O),alert(O?.response?.data?.message||"Erro ao remover proprietrio.")}};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Os,{children:[e.jsxs(Ls,{children:["Proprietrios / Empresas vinculadas  ",r]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Limite atual: ",e.jsx("b",{children:c})," proprietrio(s) por ponto (assinatura multi-proprietrios)."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[x.length," de ",c," proprietrio(s) utilizado(s)"]}),e.jsxs(Z,{onClick:()=>{S&&(C(!0),E(null))},disabled:!S,children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"Adicionar Proprietrio"]})]}),!S&&e.jsx(Re,{className:"border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"p-4 text-sm text-amber-900",children:["Voc atingiu o limite de proprietrios por ponto (",c,"). Para adicionar mais, aumente a assinatura multi-proprietrios em Configuraes."]})}),f&&e.jsx(Re,{className:"border-red-200 bg-red-50",children:e.jsx(Le,{className:"p-4 text-sm text-red-900",children:String(f)})}),N&&e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-sm text-gray-500",children:"Carregando proprietrios..."})}),!N&&x.length===0&&e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-sm text-gray-500",children:"Nenhum proprietrio vinculado a este ponto."})}),e.jsx("div",{className:"space-y-3",children:x.map(I=>{const O=I.ownerCompany?.name??I.ownerName,F=!!I.ownerCompany?.isPrimary;return e.jsx(Re,{children:e.jsxs(Le,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:O}),F&&e.jsx(st,{variant:"secondary",children:"Empresa prpria"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-x-4 gap-y-1",children:[I.ownerDocument&&e.jsxs("span",{children:["Doc: ",I.ownerDocument]}),I.ownerPhone&&e.jsxs("span",{children:["Tel: ",I.ownerPhone]}),I.regime&&e.jsxs("span",{children:["Regime: ",I.regime]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{E(I),C(!1)},children:e.jsx(Jg,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>D(I),children:e.jsx(Ba,{className:"w-4 h-4"})})]})]}),(I.derMonthlyFee||I.rentValue||I.fixedExpenseDueDay)&&e.jsx("div",{className:"mt-3 text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[I.derMonthlyFee!=null&&e.jsxs("span",{children:["DER: R$ ",Number(I.derMonthlyFee).toFixed(2)]}),I.rentValue!=null&&e.jsxs("span",{children:["Aluguel: R$ ",Number(I.rentValue).toFixed(2)]}),I.fixedExpenseDueDay!=null&&e.jsxs("span",{children:["Venc.: dia ",I.fixedExpenseDueDay]})]})}),I.notes&&e.jsx("div",{className:"mt-3 text-sm text-gray-600 whitespace-pre-wrap",children:I.notes})]})},I.id)})}),(j||k)&&e.jsx(K9,{owner:k,ownerCompanies:u,ownerCompaniesLoading:h,onSave:async I=>{try{const O={};if(I.ownerCompanyId&&(O.ownerCompanyId=I.ownerCompanyId),!I.ownerCompanyId&&I.ownerName?.trim()&&(O.ownerName=I.ownerName.trim()),I.ownerDocument?.trim()&&(O.ownerDocument=I.ownerDocument.trim()),I.ownerPhone?.trim()&&(O.ownerPhone=I.ownerPhone.trim()),I.regime&&(O.regime=I.regime),I.derMonthlyFee!==void 0&&(O.derMonthlyFee=I.derMonthlyFee),I.rentValue!==void 0&&(O.rentValue=I.rentValue),I.fixedExpenseDueDay!==void 0&&(O.fixedExpenseDueDay=I.fixedExpenseDueDay),I.rentPeriodicity&&(O.rentPeriodicity=I.rentPeriodicity),I.notes?.trim()&&(O.notes=I.notes.trim()),k){const F=await Te.put(`/media-point-owners/${k.id}`,O);g(X=>X.map(Q=>Q.id===k.id?F.data:Q)),E(null)}else{const F=await Te.post(`/media-points/${n}/owners`,O);g(X=>[...X,F.data]),C(!1)}}catch(O){console.error(O),alert(O?.response?.data?.message||"Erro ao salvar proprietrio.")}},onCancel:()=>{C(!1),E(null)}})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(Z,{onClick:()=>s(!1),children:"Fechar"})})]})})}function K9({owner:t,ownerCompanies:s,ownerCompaniesLoading:n,onSave:r,onCancel:o}){const[c,u]=m.useState(()=>t?{ownerCompanyId:t.ownerCompanyId??void 0,ownerName:t.ownerName,ownerDocument:t.ownerDocument,ownerPhone:t.ownerPhone??void 0,regime:t.regime,derMonthlyFee:t.derMonthlyFee??void 0,rentValue:t.rentValue??void 0,fixedExpenseDueDay:t.fixedExpenseDueDay??void 0,rentPeriodicity:t.rentPeriodicity??void 0,notes:t.notes??void 0}:{ownerCompanyId:void 0,ownerName:""}),h=(x,g)=>{u(N=>({...N,[x]:g}))},f=!c.ownerCompanyId,v=!!(c.ownerCompanyId||c.ownerName?.trim());return e.jsx(Re,{className:"border-2 border-green-100 bg-green-50/30",children:e.jsxs(Le,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-start gap-2 mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900",children:t?"Editar Proprietrio":"Novo Proprietrio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione a empresa proprietria (cadastrada no SuperAdmin) e preencha os dados de despesas fixas do ponto."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Empresa proprietria *"}),e.jsxs(_t,{value:c.ownerCompanyId||"",onValueChange:x=>h("ownerCompanyId",x||void 0),disabled:n,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:n?"Carregando...":"Selecione"})}),e.jsx(Et,{children:s.map(x=>e.jsxs(De,{value:x.id,children:[x.name,x.isPrimary?" (empresa prpria)":""]},x.id))})]}),s.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Nenhuma empresa proprietria encontrada."})]}),f&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome do Proprietrio (fallback) *"}),e.jsx(Ne,{placeholder:"Ex: DER SP / Prefeitura / Joo Silva",value:c.ownerName||"",onChange:x=>h("ownerName",x.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use apenas se no conseguir carregar/selecionar as empresas do SuperAdmin."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Regime"}),e.jsxs(_t,{value:c.regime||"",onValueChange:x=>h("regime",x),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o regime"})}),e.jsxs(Et,{children:[e.jsx(De,{value:ko.AREA_PARTICULAR,children:"rea Particular"}),e.jsx(De,{value:ko.ADMIN_PUBLICA,children:"Administrao Pblica"}),e.jsx(De,{value:ko.DER,children:"DER"}),e.jsx(De,{value:ko.OUTRO,children:"Outro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Telefone"}),e.jsx(Ne,{placeholder:"(11) 99999-9999",value:c.ownerPhone||"",onChange:x=>h("ownerPhone",x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Taxa DER mensal (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"300.00",value:c.derMonthlyFee??"",onChange:x=>h("derMonthlyFee",x.target.value?parseFloat(x.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor do aluguel (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"1000.00",value:c.rentValue??"",onChange:x=>h("rentValue",x.target.value?parseFloat(x.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Dia vencimento"}),e.jsx(Ne,{type:"number",placeholder:"10",value:c.fixedExpenseDueDay??"",onChange:x=>h("fixedExpenseDueDay",x.target.value?parseInt(x.target.value):void 0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Periodicidade do aluguel"}),e.jsxs(_t,{value:c.rentPeriodicity||"",onValueChange:x=>h("rentPeriodicity",x),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(De,{value:du.MENSAL,children:"Mensal"}),e.jsx(De,{value:du.TRIMESTRAL,children:"Trimestral"}),e.jsx(De,{value:du.ANUAL,children:"Anual"}),e.jsx(De,{value:du.OUTRO,children:"Outro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Observaes"}),e.jsx(Va,{placeholder:"Ex: Contrato vence em..., reajuste anual..., etc.",value:c.notes||"",onChange:x=>h("notes",x.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:o,children:"Cancelar"}),e.jsx(Z,{onClick:()=>r(c),disabled:!v,children:t?"Salvar Alteraes":"Adicionar Proprietrio"})]})]})})}function Q9({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:r}){const[o,c]=m.useState([]),[u,h]=m.useState(!1),[f,v]=m.useState(!1),[x,g]=m.useState(null),N=async()=>{if(n)try{v(!0),g(null);const w=await Te.get(`/media-points/${n}/contracts`);c(w.data??[])}catch(w){console.error(w),g(w?.response?.data?.message||w?.message||"Erro ao carregar contratos")}finally{v(!1)}};return m.useEffect(()=>{t?N():(h(!1),g(null))},[t,n]),e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Os,{children:[e.jsxs(Ls,{children:["Contratos do Ponto - ",r]}),e.jsx("p",{className:"text-gray-600",children:"Upload e gerenciamento dos contratos deste ponto."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:f?e.jsx(Re,{children:e.jsx(Le,{className:"py-8 text-center text-gray-600",children:"Carregando..."})}):x?e.jsx(Re,{children:e.jsxs(Le,{className:"py-6 text-center",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"Erro ao carregar contratos"}),e.jsx("p",{className:"text-sm text-gray-600",children:x}),e.jsx("div",{className:"mt-4",children:e.jsx(Z,{variant:"outline",onClick:N,children:"Tentar novamente"})})]})}):o.length===0?e.jsx(Re,{children:e.jsxs(Le,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum contrato cadastrado"}),e.jsxs(Z,{onClick:()=>h(!0),children:[e.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Upload Contrato"]})]})}):e.jsxs(e.Fragment,{children:[o.map(w=>e.jsx(Re,{children:e.jsx(Le,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(nn,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900",children:w.fileName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",w.id]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[w.signedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Assinado em: "}),e.jsx("span",{className:"text-gray-900",children:new Date(w.signedAt).toLocaleDateString("pt-BR")})]}),w.expiresAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Vence em: "}),e.jsx("span",{className:"text-gray-900",children:new Date(w.expiresAt).toLocaleDateString("pt-BR")})]})]}),w.url&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 break-all",children:["URL: ",w.url]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:async()=>{try{const j=await Te.get(`/media-point-contracts/${w.id}/download`,{responseType:"blob"}),C=window.URL.createObjectURL(j.data),k=document.createElement("a");k.href=C,k.download=w.fileName||"contrato",document.body.appendChild(k),k.click(),k.remove(),window.URL.revokeObjectURL(C)}catch(j){console.error(j),alert("Erro ao obter link de download.")}},title:"Download",children:e.jsx(Pl,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Excluir este contrato?"))try{await Te.delete(`/media-point-contracts/${w.id}`),c(C=>C.filter(k=>k.id!==w.id))}catch(C){console.error(C),alert("Erro ao excluir contrato.")}},title:"Excluir",children:e.jsx(Ba,{className:"w-4 h-4"})})]})]})})},w.id)),e.jsxs(Z,{variant:"outline",className:"w-full",onClick:()=>h(!0),children:[e.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Upload Contrato"]})]})}),u&&e.jsx(X9,{onSave:async({file:w,signedAt:j,expiresAt:C})=>{try{const k=new FormData;k.append("file",w),j&&k.append("signedAt",j),C&&k.append("expiresAt",C);const E=await Te.post(`/media-points/${n}/contracts`,k,{headers:{"Content-Type":"multipart/form-data"}});c(S=>[...S,E.data]),h(!1)}catch(k){console.error(k),alert("Erro ao enviar contrato.")}},onCancel:()=>h(!1)})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(Z,{onClick:()=>s(!1),children:"Fechar"})})]})})}function X9({onSave:t,onCancel:s}){const[n,r]=m.useState(null),[o,c]=m.useState(""),[u,h]=m.useState("");return e.jsx(Re,{className:"border-2 border-red-100 bg-red-50/30",children:e.jsxs(Le,{className:"pt-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2",children:"Upload de Contrato"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Arquivo PDF *"}),e.jsx(Ne,{type:"file",accept:"application/pdf",onChange:f=>r(f.target.files?.[0]??null)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Somente PDF."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data de assinatura"}),e.jsx(Ne,{type:"date",value:o,onChange:f=>c(f.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data de vencimento"}),e.jsx(Ne,{type:"date",value:u,onChange:f=>h(f.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:s,children:"Cancelar"}),e.jsx(Z,{onClick:()=>{if(!n){alert("Selecione um arquivo PDF.");return}t({file:n,signedAt:o||void 0,expiresAt:u||void 0})},children:"Enviar"})]})]})})}function Y9({mediaPointId:t}){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=async()=>{if(t)try{o(!0),u(null);const w=(await Te.get(`/media-points/${t}/units`)).data,j=Array.isArray(w)?w:w.data;n(j)}catch(N){u(N)}finally{o(!1)}},f=async N=>{if(!t)throw new Error("mediaPointId  obrigatrio");const w=await Te.post(`/media-points/${t}/units`,N);return n(j=>[...j,w.data]),w.data},v=async(N,w)=>{const j=await Te.put(`/media-units/${N}`,w);return n(C=>C.map(k=>k.id===N?j.data:k)),j.data},x=async N=>{await Te.delete(`/media-units/${N}`),n(w=>w.filter(j=>j.id!==N))},g=async(N,w)=>{const j=new FormData;j.append("file",w);const C=await Te.post(`/media-units/${N}/image`,j,{headers:{"Content-Type":"multipart/form-data"}});return n(k=>k.map(E=>E.id===N?{...E,imageUrl:C.data.imageUrl}:E)),C.data};return m.useEffect(()=>{h()},[t]),{units:s,loading:r,error:c,refetch:h,createUnit:f,updateUnit:v,deleteUnit:x,uploadUnitImage:g}}function J9(t){const s={};for(const[n,r]of Object.entries(t))r!=null&&(typeof r=="string"&&r.trim()===""||(s[n]=r));return s}function eF({open:t,onOpenChange:s,mediaPointId:n,mediaPointName:r,mediaPointType:o}){const{units:c,loading:u,error:h,createUnit:f,updateUnit:v,deleteUnit:x,uploadUnitImage:g}=Y9({mediaPointId:t?n:null}),[N,w]=m.useState(!1),[j,C]=m.useState(null);m.useEffect(()=>{t||(w(!1),C(null))},[t]);const k=D=>D?D===ei.FLUXO?"Fluxo":"Contra-Fluxo":"-",E=D=>D?D===ei.FLUXO?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",S=o===Ft.OOH?La.FACE:La.SCREEN,P=o===Ft.OOH?"Face":"Tela";return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Os,{children:[e.jsxs(Ls,{children:[P,"s do Ponto - ",r]}),e.jsx("p",{className:"text-gray-600",children:o===Ft.OOH?"Gerencie as faces (unidades de veiculao) deste ponto OOH":"Gerencie as telas (unidades digitais) deste ponto DOOH"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:u?e.jsx(Re,{children:e.jsx(Le,{className:"py-8 text-center text-gray-600",children:"Carregando..."})}):h?e.jsx(Re,{children:e.jsxs(Le,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-3",children:"Erro ao carregar unidades."}),e.jsx("p",{className:"text-sm text-gray-600",children:String(h.message||h)})]})}):c.length===0?e.jsx(Re,{children:e.jsxs(Le,{className:"py-8 text-center",children:[e.jsxs("p",{className:"text-gray-500 mb-4",children:["Nenhuma ",P.toLowerCase()," cadastrada"]}),e.jsxs(Z,{onClick:()=>w(!0),children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"Adicionar ",P]})]})}):e.jsxs(e.Fragment,{children:[c.map(D=>e.jsx(Re,{children:e.jsx(Le,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-gray-900",children:D.label}),D.orientation&&e.jsx(st,{className:E(D.orientation),children:k(D.orientation)}),e.jsx(st,{variant:D.isActive?"default":"secondary",children:D.isActive?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[o===Ft.OOH&&e.jsx(e.Fragment,{children:(D.widthM||D.heightM)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Dimenses: "}),e.jsxs("span",{className:"text-gray-900",children:[D.widthM||"-","m x ",D.heightM||"-","m"]})]})}),o===Ft.DOOH&&e.jsxs(e.Fragment,{children:[D.insertionsPerDay!==void 0&&D.insertionsPerDay!==null&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Inseres/dia: "}),e.jsx("span",{className:"text-gray-900",children:D.insertionsPerDay})]}),D.resolutionWidthPx&&D.resolutionHeightPx&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Resoluo: "}),e.jsxs("span",{className:"text-gray-900",children:[D.resolutionWidthPx,"x",D.resolutionHeightPx,"px"]})]})]}),(D.priceMonth||D.priceWeek)&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Preos: "}),e.jsxs("span",{className:"text-gray-900",children:[D.priceMonth?`R$ ${D.priceMonth}/ms`:"",D.priceWeek?`  R$ ${D.priceWeek}/quinz`:""]})]})]}),D.imageUrl&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ah,{className:"w-4 h-4"}),e.jsx("span",{children:"Imagem disponvel"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>C(D),title:"Editar",children:e.jsx(zl,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Excluir esta unidade?"))try{await x(D.id)}catch(O){console.error(O),alert("Erro ao excluir unidade.")}},title:"Excluir",children:e.jsx(Ba,{className:"w-4 h-4"})})]})]})})},D.id)),e.jsxs(Z,{variant:"outline",className:"w-full",onClick:()=>w(!0),children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"Adicionar ",P]})]})}),(N||j)&&e.jsx(tF,{unit:j,mediaPointType:o,onSave:async(D,I)=>{try{const O=J9(D);if(j)await v(j.id,O),I&&await g(j.id,I),C(null);else{const F=await f({...O,unitType:S,label:(O.label??"").toString()});I&&await g(F.id,I),w(!1)}}catch(O){console.error(O),alert("Erro ao salvar unidade.")}},onCancel:()=>{w(!1),C(null)}})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsx(Z,{onClick:()=>s(!1),children:"Fechar"})})]})})}function tF({unit:t,mediaPointType:s,onSave:n,onCancel:r}){const[o,c]=m.useState(t?{label:t.label,orientation:t.orientation,widthM:t.widthM,heightM:t.heightM,insertionsPerDay:t.insertionsPerDay,resolutionWidthPx:t.resolutionWidthPx,resolutionHeightPx:t.resolutionHeightPx,priceMonth:t.priceMonth,priceWeek:t.priceWeek}:{label:""}),[u,h]=m.useState(null),[f,v]=m.useState(t?.imageUrl??null);m.useEffect(()=>{t?(c({label:t.label,orientation:t.orientation,widthM:t.widthM,heightM:t.heightM,insertionsPerDay:t.insertionsPerDay,resolutionWidthPx:t.resolutionWidthPx,resolutionHeightPx:t.resolutionHeightPx,priceMonth:t.priceMonth,priceWeek:t.priceWeek}),h(null),v(t.imageUrl??null)):(c({label:""}),h(null),v(null))},[t]);const x=(N,w)=>{c(j=>({...j,[N]:w}))},g=N=>{const w=N.target.files?.[0]??null;if(h(w),w){const j=URL.createObjectURL(w);v(j)}};return m.useEffect(()=>()=>{f&&f.startsWith("blob:")&&URL.revokeObjectURL(f)},[]),e.jsx(Re,{className:"border-2 border-indigo-200",children:e.jsxs(Le,{className:"pt-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t?"Editar Unidade":"Nova Unidade"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome/Label *"}),e.jsx(Ne,{placeholder:s===Ft.OOH?"Ex: Face 1 - Principal":"Ex: Tela 1 - Entrada",value:o.label||"",onChange:N=>x("label",N.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{children:["Imagem da ",s===Ft.OOH?"Face":"Tela"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ne,{type:"file",accept:"image/jpeg,image/png,image/gif",onChange:g,className:"flex-1"}),f&&e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG ou GIF (mx. 4MB)."})]}),s===Ft.OOH&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Largura (m)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"3.00",value:o.widthM??"",onChange:N=>x("widthM",N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Altura (m)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"9.00",value:o.heightM??"",onChange:N=>x("heightM",N.target.value?parseFloat(N.target.value):null)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Orientao"}),e.jsxs(_t,{value:o.orientation||"",onValueChange:N=>x("orientation",N||null),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione a orientao"})}),e.jsxs(Et,{children:[e.jsx(De,{value:ei.FLUXO,children:"Fluxo"}),e.jsx(De,{value:ei.CONTRA_FLUXO,children:"Contra-Fluxo"})]})]})]})]}),s===Ft.DOOH&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Inseres por Dia"}),e.jsx(Ne,{type:"number",placeholder:"150",value:o.insertionsPerDay??"",onChange:N=>x("insertionsPerDay",N.target.value?parseInt(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Orientao"}),e.jsxs(_t,{value:o.orientation||"",onValueChange:N=>x("orientation",N||null),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione a orientao"})}),e.jsxs(Et,{children:[e.jsx(De,{value:ei.FLUXO,children:"Fluxo"}),e.jsx(De,{value:ei.CONTRA_FLUXO,children:"Contra-Fluxo"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Resoluo Largura (px)"}),e.jsx(Ne,{type:"number",placeholder:"1920",value:o.resolutionWidthPx??"",onChange:N=>x("resolutionWidthPx",N.target.value?parseInt(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Resoluo Altura (px)"}),e.jsx(Ne,{type:"number",placeholder:"1080",value:o.resolutionHeightPx??"",onChange:N=>x("resolutionHeightPx",N.target.value?parseInt(N.target.value):null)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Preos (opcional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"text-sm",children:"Preo/Ms (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"5000.00",value:o.priceMonth??"",onChange:N=>x("priceMonth",N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"text-sm",children:"Preo/Quinzenal (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"1500.00",value:o.priceWeek??"",onChange:N=>x("priceWeek",N.target.value?parseFloat(N.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:r,children:"Cancelar"}),e.jsx(Z,{onClick:()=>n(o,u),disabled:!o.label?.trim(),children:t?"Salvar Alteraes":"Adicionar"})]})]})})}function sF({className:t,...s}){return e.jsx("div",{"data-slot":"skeleton",className:vt("bg-accent animate-pulse rounded-md",t),...s})}function nF({src:t,alt:s,fallbackSrc:n,loading:r,fetchPriority:o}){const[c,u]=m.useState(!1),[h,f]=m.useState(!1);m.useEffect(()=>{u(!1),f(!1)},[t]);const v=h?n:t;return e.jsxs("div",{className:"relative w-full h-full",children:[!c&&e.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-none overflow-hidden pointer-events-none",children:[e.jsx(sF,{className:"absolute inset-0 w-full h-full rounded-none"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-0 motion-reduce:animate-none",style:{background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.55) 50%, rgba(255,255,255,0) 100%)",width:"60%",height:"100%",transform:"translateX(-120%)",animation:"ooh_sweep 1.1s ease-in-out infinite"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-7 w-7 rounded-full border-2 border-black/20 border-t-black/60 animate-spin motion-reduce:animate-none"})}),e.jsx("style",{children:"@keyframes ooh_sweep{0%{transform:translateX(-120%)}100%{transform:translateX(220%)}}"})]}),e.jsx("img",{src:v,alt:s,draggable:!1,loading:r,fetchPriority:o,decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,onLoad:()=>u(!0),onError:()=>{if(!h){f(!0),u(!1);return}u(!0)}})]})}function aF({point:t,normalizeUploadsUrl:s,fallbackSrc:n}){const r=m.useMemo(()=>{const x=[],g=s(t.mainImageUrl)||n;x.push({src:g,label:"Imagem do ponto",alt:t.name});const N=Array.isArray(t.units)?t.units:[];for(const w of N){if(!w?.imageUrl)continue;const j=s(w.imageUrl);if(!j)continue;const C=w.unitType===La.SCREEN?"tela":"face",k=w.label?.trim();x.push({src:j,label:k?`Imagem da ${C}: ${k}`:`Imagem da ${C}`,alt:k?`${t.name} - ${k}`:`${t.name} - ${C}`})}return x},[t.mainImageUrl,t.name,t.units,s,n]),[o,c]=m.useState(0),u=m.useRef(null);m.useEffect(()=>{o>=r.length&&c(0)},[r.length]);const h=r.length>1,f=()=>c(x=>(x-1+r.length)%r.length),v=()=>c(x=>(x+1)%r.length);return e.jsxs("div",{className:"w-full h-full relative",onTouchStart:x=>{u.current=x.touches?.[0]?.clientX??null},onTouchEnd:x=>{const g=u.current;if(u.current=null,!h||g===null)return;const N=x.changedTouches?.[0]?.clientX;if(N===void 0)return;const w=g-N;Math.abs(w)<50||(w>0?v():f())},children:[e.jsx("div",{className:"w-full h-full overflow-hidden",children:e.jsx("div",{className:"h-full flex transition-transform duration-300 ease-out",style:{transform:`translate3d(-${o*100}%, 0, 0)`},children:r.map((x,g)=>e.jsx("div",{className:"w-full h-full",style:{flex:"0 0 100%",width:"100%"},children:e.jsx(nF,{src:x.src,alt:x.alt,fallbackSrc:n,loading:"lazy",fetchPriority:"auto"})},`${x.src}-${g}`))})}),e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-10 pointer-events-none",children:(()=>{const x=r[o]?.label??"",g=x.length>70?9:x.length>50?10:11;return e.jsx("div",{className:"inline-flex items-center justify-center border border-white/10 shadow-sm px-3 py-1.5 rounded-md min-w-[140px] max-w-[calc(100%-180px)] whitespace-normal break-words hyphens-auto text-center leading-tight",style:{fontSize:`${g}px`,backgroundColor:"#000",color:"#fff"},title:x,children:x})})()}),h&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button","aria-label":"Imagem anterior",className:"absolute left-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-full bg-black/40 hover:bg-black/60 text-white flex items-center justify-center",onClick:x=>{x.stopPropagation(),f()},children:e.jsx(td,{className:"w-4 h-4"})}),e.jsx("button",{type:"button","aria-label":"Prxima imagem",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-full bg-black/40 hover:bg-black/60 text-white flex items-center justify-center",onClick:x=>{x.stopPropagation(),v()},children:e.jsx($l,{className:"w-4 h-4"})})]}),h&&e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-1.5",children:r.map((x,g)=>e.jsx("button",{type:"button","aria-label":`Ir para imagem ${g+1}`,className:`h-1.5 w-1.5 rounded-full transition-all ${g===o?"bg-white":"bg-white/50 hover:bg-white/80"}`,onClick:N=>{N.stopPropagation(),c(g)}},`dot-${g}`))})]})}function rF(){const{refreshPointsUsed:t}=Fo(),s=U=>{if(!U)return U??"";if(U.startsWith("uploads/"))return`/${U}`;if(U.startsWith("/uploads/"))return U;const le=U.indexOf("/uploads/");return le>=0?U.slice(le):U},[n,r]=m.useState(""),[o,c]=m.useState("all"),[u,h]=m.useState("all"),[f,v]=m.useState(1),x=40;m.useEffect(()=>{v(1)},[n,o,u]);const{mediaPoints:g,total:N,loading:w,error:j,refetch:C,uploadMediaPointImage:k}=tS({search:n||void 0,type:o==="all"?void 0:o,city:u==="all"?void 0:u,page:f,pageSize:x}),E=m.useMemo(()=>Math.max(1,Math.ceil((N||0)/x)),[N,x]);m.useEffect(()=>{f>E&&v(E)},[f,E]);const[S,P]=m.useState(!1),[D,I]=m.useState(null),[O,F]=m.useState({open:!1,point:null}),[X,Q]=m.useState({open:!1,point:null}),[V,$]=m.useState({open:!1,point:null}),[R,z]=m.useState(!1),{cities:J}=E9(),ue=J,se=m.useMemo(()=>g.reduce((U,le)=>U+(le.units?le.units.length:0),0),[g]),fe=g,H=async(U,le)=>{try{const{id:Y,companyId:ae,createdAt:Ie,updatedAt:$e,units:Ge,owners:Xe,...Je}=U||{};let tt;if(D?.id?(tt=(await Te.put(`/media-points/${D.id}`,Je)).data,ye.success("Ponto de mdia atualizado!")):(tt=(await Te.post("/media-points",Je)).data,ye.success("Ponto de mdia criado!")),le&&tt?.id)try{await k(tt.id,le),ye.success("Imagem do ponto enviada!")}catch(ut){const wt=ut?.response?.data?.message||"Erro ao enviar imagem do ponto";ye.error(wt)}return P(!1),I(null),C(),await t(),tt}catch(Y){const ae=Y?.response?.data?.message,Ie=Array.isArray(ae)?ae.join(", "):ae||"Erro ao salvar ponto de mdia";throw ye.error(Ie),new Error(Ie)}},re=U=>{I(U),P(!0)};m.useEffect(()=>{const U=new URLSearchParams(window.location.search),le=U.get("pointId");if(!le)return;(async()=>{try{const Ie=await Te.get(`/media-points/${le}`);re(Ie.data)}catch{ye.error("No foi possvel abrir este ponto no inventrio.")}})(),U.delete("pointId");const Y=U.toString(),ae=`${window.location.pathname}${Y?`?${Y}`:""}`;window.history.replaceState({},"",ae)},[]);const G=async U=>{const le={...U};delete le.id,le.name=`${U.name} (cpia)`;try{const Y=await Te.post("/media-points",le);return ye.success("Ponto duplicado!"),C(),await t(),Y.data}catch(Y){const ae=Y?.response?.data?.message||"Erro ao duplicar ponto";ye.error(ae)}},W=async(U,le)=>{try{await Te.put(`/media-points/${U}`,{showInMediaKit:le}),C()}catch(Y){const ae=Y?.response?.data?.message||"Erro ao atualizar mdia kit";ye.error(ae)}},ne=async U=>{if(confirm("Deseja realmente excluir este ponto de mdia?"))try{await Te.delete(`/media-points/${U}`),ye.success("Ponto de mdia excludo!"),C(),await t()}catch(le){const Y=le?.response?.data?.message||"Erro ao excluir ponto de mdia";ye.error(Y)}},K=()=>{const U=[["ID","Nome","Tipo","Subcategoria","Cidade","Estado","Impactos/Dia","Preo Mensal","Mdia Kit"].join(","),...g.map(ae=>[ae.id,ae.name,ae.type,ae.subcategory||"",ae.addressCity||"",ae.addressState||"",ae.dailyImpressions||0,ae.basePriceMonth||0,ae.showInMediaKit?"Sim":"No"].join(","))].join(`
`),le=new Blob([U],{type:"text/csv;charset=utf-8;"}),Y=document.createElement("a");Y.href=URL.createObjectURL(le),Y.download=`inventario_${new Date().toISOString().split("T")[0]}.csv`,Y.click()},ee=U=>{const le=U.units||[],Y=le.filter(ae=>ae.isActive);return{total:le.length,active:Y.length}};return e.jsxs("div",{className:"p-8",children:[w&&e.jsx("div",{children:"Carregando inventrio..."}),!w&&j&&e.jsx("div",{children:"Erro ao carregar inventrio."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventrio"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie pontos de mdia (MediaPoint) e unidades (MediaUnit)"})]}),e.jsxs(Z,{className:"gap-2",onClick:()=>{I(null),P(!0)},children:[e.jsx(kn,{className:"w-4 h-4"}),"Novo Ponto"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total de Pontos"}),e.jsx("p",{className:"text-gray-900",children:N})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(Ft.OOH),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pontos OOH"}),e.jsx("p",{className:"text-gray-900",children:g.filter(U=>U.type===Ft.OOH).length})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(Ft.DOOH),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pontos DOOH"}),e.jsx("p",{className:"text-gray-900",children:g.filter(U=>U.type===Ft.DOOH).length})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Unidades (Faces/Telas)"}),e.jsx("p",{className:"text-gray-900",children:se})]})})]}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ne,{placeholder:"Buscar por nome, cidade, bairro ou subcategoria...",value:n,onChange:U=>r(U.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:o,onValueChange:U=>c(U),children:[e.jsx(Pt,{className:"w-full lg:w-40",children:e.jsx(At,{placeholder:"Tipo"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos os tipos"}),e.jsx(De,{value:Ft.OOH,children:"OOH"}),e.jsx(De,{value:Ft.DOOH,children:"DOOH"})]})]}),ue.length>0&&e.jsxs(_t,{value:u,onValueChange:U=>h(U),children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Cidade"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todas as cidades"}),ue.map(U=>e.jsx(De,{value:U,children:U},U))]})]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:()=>z(!0),children:[e.jsx(Gc,{className:"w-4 h-4"}),"Importar"]}),e.jsxs(Z,{variant:"outline",className:"gap-2",onClick:K,children:[e.jsx(Pl,{className:"w-4 h-4"}),"Exportar"]})]})})}),n||o!=="all"||u!=="all"?e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[N," ",N===1?"ponto encontrado":"pontos encontrados"]})}):null,e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:fe.map(U=>{const le=ee(U),Y=U.type===Ft.OOH?"Faces":"Telas";return e.jsxs(Re,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative overflow-hidden rounded-t-xl",children:[e.jsx(aF,{point:U,normalizeUploadsUrl:s,fallbackSrc:"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800"}),e.jsx(st,{className:"absolute top-3 left-3 bg-indigo-500",children:U.type}),U.subcategory&&e.jsx(st,{variant:"outline",className:"absolute top-3 right-3 bg-white",children:U.subcategory})]}),e.jsxs(Le,{className:"pt-4",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:U.name}),e.jsxs("div",{className:"space-y-2 mb-4",children:[U.addressCity&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ra,{className:"w-4 h-4"}),e.jsxs("span",{children:[U.addressDistrict&&`${U.addressDistrict}, `,U.addressCity,U.addressState&&` - ${U.addressState}`]})]}),U.units&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:Y}),e.jsxs("span",{className:"text-gray-900",children:[le.active," / ",le.total," ativas"]})]}),U.dailyImpressions&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impactos/dia"}),e.jsxs("span",{className:"text-gray-900",children:[(U.dailyImpressions/1e3).toFixed(0),"k"]})]}),U.basePriceMonth&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Preo base"}),e.jsxs("span",{className:"text-gray-900",children:["R$ ",U.basePriceMonth.toLocaleString("pt-BR")]})]}),U.environment&&e.jsx(st,{variant:"outline",className:"text-xs",children:U.environment})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P9,{checked:U.showInMediaKit,onCheckedChange:ae=>W(U.id,ae)}),e.jsx("span",{className:"text-sm text-gray-600",children:"Mdia Kit"})]}),e.jsxs(y9,{children:[e.jsx(b9,{asChild:!0,children:e.jsx("button",{className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground h-8 w-8",onClick:ae=>ae.stopPropagation(),children:e.jsx(lk,{className:"w-4 h-4"})})}),e.jsxs(j9,{align:"end",children:[e.jsxs(Ic,{onClick:()=>re(U),children:[e.jsx(zl,{className:"w-4 h-4 mr-2"}),"Editar ponto"]}),e.jsxs(Ic,{onClick:()=>$({open:!0,point:U}),children:[e.jsx(up,{className:"w-4 h-4 mr-2"}),"Gerenciar unidades (",Y.toLowerCase(),")"]}),e.jsxs(Ic,{onClick:()=>F({open:!0,point:U}),children:[e.jsx(ed,{className:"w-4 h-4 mr-2"}),"Proprietrios / Empresas vinculadas"]}),e.jsxs(Ic,{onClick:()=>Q({open:!0,point:U}),children:[e.jsx(nn,{className:"w-4 h-4 mr-2"}),"Contratos do ponto"]}),e.jsxs(Ic,{onClick:()=>G(U),children:[e.jsx($n,{className:"w-4 h-4 mr-2"}),"Duplicar ponto"]}),e.jsxs(Ic,{onClick:()=>ne(U.id),children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),"Excluir ponto"]})]})]})]})]})]},U.id)})}),E>1&&fe.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Pgina ",f," de ",E,"  Mostrando ",fe.length," de ",N]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Z,{variant:"outline",size:"sm",disabled:f<=1,onClick:()=>v(U=>Math.max(1,U-1)),children:"Anterior"}),(()=>{const U=[];if(E<=7)for(let le=1;le<=E;le++)U.push(le);else{U.push(1),f>3&&U.push("...");const le=Math.max(2,f-1),Y=Math.min(E-1,f+1);for(let ae=le;ae<=Y;ae++)U.push(ae);f<E-2&&U.push("..."),U.push(E)}return U.map((le,Y)=>{if(le==="...")return e.jsx("span",{className:"px-2 text-gray-500",children:""},`ellipsis-${Y}`);const ae=le;return e.jsx(Z,{variant:ae===f?"default":"outline",size:"sm",onClick:()=>v(ae),children:ae},ae)})})(),e.jsx(Z,{variant:"outline",size:"sm",disabled:f>=E,onClick:()=>v(U=>Math.min(E,U+1)),children:"Prxima"})]})]}),fe.length===0&&e.jsx(Re,{children:e.jsxs(Le,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum ponto encontrado com os filtros selecionados"}),e.jsx(Z,{variant:"outline",onClick:()=>{r(""),c("all"),h("all")},children:"Limpar Filtros"})]})}),e.jsx(Z9,{open:S,onOpenChange:U=>{P(U),U||I(null)},mediaPoint:D,onSave:H}),O.point&&e.jsx(G9,{open:O.open,onOpenChange:U=>F({open:U,point:U?O.point:null}),mediaPointId:O.point.id,mediaPointName:O.point.name}),X.point&&e.jsx(Q9,{open:X.open,onOpenChange:U=>Q({open:U,point:U?X.point:null}),mediaPointId:X.point.id,mediaPointName:X.point.name}),V.point&&e.jsx(eF,{open:V.open,onOpenChange:U=>$({open:U,point:U?V.point:null}),mediaPointId:V.point.id,mediaPointName:V.point.name,mediaPointType:V.point.type}),e.jsx(iF,{open:R,onOpenChange:z,onImported:async()=>{v(1),C(),await t()}})]})}function iF({open:t,onOpenChange:s,onImported:n}){const[r,o]=m.useState(null),[c,u]=m.useState(Ft.OOH),[h,f]=m.useState("xlsx"),[v,x]=m.useState(!1),[g,N]=m.useState([]),w=()=>{o(null),N([]),x(!1),u(Ft.OOH),f("xlsx")};m.useEffect(()=>{t||w()},[t]);const j=async(P,D)=>{try{x(!0);const I=await Te.get("/media-points/import-template",{params:{type:P,format:D},responseType:"blob"}),O=window.URL.createObjectURL(I.data),F=document.createElement("a");F.href=O,F.download=`template_inventario_${String(P).toLowerCase()}.${D}`,document.body.appendChild(F),F.click(),F.remove(),window.URL.revokeObjectURL(O),ye.success("Modelo baixado!")}catch(I){const O=I?.response?.data?.message||I?.message||"Erro ao baixar modelo";ye.error(O)}finally{x(!1)}},C=async()=>{if(!r){ye.error("Selecione um arquivo .xlsx ou .csv");return}const P=r.name.toLowerCase(),D=P.endsWith(".csv"),I=P.endsWith(".xlsx");if(!D&&!I){ye.error("Formato invlido. Envie um arquivo .xlsx ou .csv");return}const O=10*1024*1024;if(r.size>O){ye.error("Arquivo muito grande (mx. 10MB).");return}x(!0),N([]);try{const F=new FormData;F.append("file",r);const X=await Te.post("/media-points/import",F,{params:{defaultType:c},headers:{"Content-Type":"multipart/form-data"}});ye.success(`Importao concluda! ${X.data?.created??0} ponto(s) criado(s).`),await n?.(),s(!1)}catch(F){const X=F?.response?.data,Q=X?.message||F?.message||"Erro ao importar. Verifique o arquivo e tente novamente.",V=Array.isArray(X?.errors)?X.errors.map($=>String($)):[];N(V),ye.error(typeof Q=="string"?Q:"Erro ao importar")}finally{x(!1)}},k=["name","addressCity","addressState","latitude","longitude"],E=["addressStreet","addressNumber","addressDistrict","addressZipcode","addressCountry","subcategory","description","dailyImpressions","environment","socialClasses","showInMediaKit","basePriceMonth","basePriceWeek (Preo Quinzenal)"],S=["productionCosts_lona","productionCosts_adesivo","productionCosts_vinil","productionCosts_montagem"];return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{children:[e.jsx(Os,{children:e.jsx(Ls,{children:"Importar Inventrio"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Importao em Lote"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Importe mltiplos pontos de mdia via Excel (.xlsx) ou CSV (.csv). Imagens no fazem parte do template (devem ser enviadas manualmente no sistema)."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo do Template"}),e.jsxs(_t,{value:c,onValueChange:P=>u(P),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(De,{value:Ft.OOH,children:"OOH"}),e.jsx(De,{value:Ft.DOOH,children:"DOOH"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Formato"}),e.jsxs(_t,{value:h,onValueChange:P=>f(P),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"xlsx",children:"Excel (.xlsx)"}),e.jsx(De,{value:"csv",children:"CSV (.csv)"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Baixar Modelo"}),e.jsxs(Z,{variant:"outline",className:"w-full",onClick:()=>j(c,h),disabled:v,children:[e.jsx(Pl,{className:"w-4 h-4 mr-2"}),"Baixar Modelo ",c," (",h.toUpperCase(),")"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Selecione o arquivo"}),e.jsx(Ne,{type:"file",accept:".xlsx,.csv",onChange:P=>o(P.target.files?.[0]||null),disabled:v}),r&&e.jsxs("p",{className:"text-sm text-green-600",children:[" ",r.name]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded text-xs text-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas obrigatrias (OOH e DOOH):"})}),e.jsx("p",{className:"font-mono break-words",children:k.join(", ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas opcionais (OOH e DOOH):"})}),e.jsx("p",{className:"font-mono break-words",children:E.join(", ")})]}),c===Ft.OOH&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Colunas opcionais adicionais (somente OOH):"})}),e.jsx("p",{className:"font-mono break-words",children:S.join(", ")})]})]}),g.length>0&&e.jsxs("div",{className:"p-3 bg-red-50 rounded text-xs text-red-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Erros encontrados:"}),e.jsx("ul",{className:"list-disc ml-5 space-y-1 max-h-40 overflow-auto",children:g.slice(0,50).map((P,D)=>e.jsx("li",{children:P},D))}),g.length>50&&e.jsx("p",{className:"mt-2 text-red-600",children:"Mostrando os primeiros 50 erros."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:()=>s(!1),disabled:v,children:"Cancelar"}),e.jsx(Z,{onClick:C,disabled:!r||v,children:"Importar Pontos"})]})]})]})})}function Fg(t,s,n,r,o,c){if(o-r<=n)return;const u=r+o>>1;vS(t,s,u,r,o,c%2),Fg(t,s,n,r,u-1,c+1),Fg(t,s,n,u+1,o,c+1)}function vS(t,s,n,r,o,c){for(;o>r;){if(o-r>600){const v=o-r+1,x=n-r+1,g=Math.log(v),N=.5*Math.exp(2*g/3),w=.5*Math.sqrt(g*N*(v-N)/v)*(x-v/2<0?-1:1),j=Math.max(r,Math.floor(n-x*N/v+w)),C=Math.min(o,Math.floor(n+(v-x)*N/v+w));vS(t,s,n,j,C,c)}const u=s[2*n+c];let h=r,f=o;for(ou(t,s,r,n),s[2*o+c]>u&&ou(t,s,r,o);h<f;){for(ou(t,s,h,f),h++,f--;s[2*h+c]<u;)h++;for(;s[2*f+c]>u;)f--}s[2*r+c]===u?ou(t,s,r,f):(f++,ou(t,s,f,o)),f<=n&&(r=f+1),n<=f&&(o=f-1)}}function ou(t,s,n,r){Gx(t,n,r),Gx(s,2*n,2*r),Gx(s,2*n+1,2*r+1)}function Gx(t,s,n){const r=t[s];t[s]=t[n],t[n]=r}function oF(t,s,n,r,o,c,u){const h=[0,t.length-1,0],f=[];let v,x;for(;h.length;){const g=h.pop(),N=h.pop(),w=h.pop();if(N-w<=u){for(let k=w;k<=N;k++)v=s[2*k],x=s[2*k+1],v>=n&&v<=o&&x>=r&&x<=c&&f.push(t[k]);continue}const j=Math.floor((w+N)/2);v=s[2*j],x=s[2*j+1],v>=n&&v<=o&&x>=r&&x<=c&&f.push(t[j]);const C=(g+1)%2;(g===0?n<=v:r<=x)&&(h.push(w),h.push(j-1),h.push(C)),(g===0?o>=v:c>=x)&&(h.push(j+1),h.push(N),h.push(C))}return f}function lF(t,s,n,r,o,c){const u=[0,t.length-1,0],h=[],f=o*o;for(;u.length;){const v=u.pop(),x=u.pop(),g=u.pop();if(x-g<=c){for(let k=g;k<=x;k++)zj(s[2*k],s[2*k+1],n,r)<=f&&h.push(t[k]);continue}const N=Math.floor((g+x)/2),w=s[2*N],j=s[2*N+1];zj(w,j,n,r)<=f&&h.push(t[N]);const C=(v+1)%2;(v===0?n-o<=w:r-o<=j)&&(u.push(g),u.push(N-1),u.push(C)),(v===0?n+o>=w:r+o>=j)&&(u.push(N+1),u.push(x),u.push(C))}return h}function zj(t,s,n,r){const o=t-n,c=s-r;return o*o+c*c}const cF=t=>t[0],dF=t=>t[1];class Bj{constructor(s,n=cF,r=dF,o=64,c=Float64Array){this.nodeSize=o,this.points=s;const u=s.length<65536?Uint16Array:Uint32Array,h=this.ids=new u(s.length),f=this.coords=new c(s.length*2);for(let v=0;v<s.length;v++)h[v]=v,f[2*v]=n(s[v]),f[2*v+1]=r(s[v]);Fg(h,f,o,0,h.length-1,0)}range(s,n,r,o){return oF(this.ids,this.coords,s,n,r,o,this.nodeSize)}within(s,n,r){return lF(this.ids,this.coords,s,n,r,this.nodeSize)}}const uF={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},ep=Math.fround||(t=>(s=>(t[0]=+s,t[0])))(new Float32Array(1));class mF{constructor(s){this.options=vu(Object.create(uF),s),this.trees=new Array(this.options.maxZoom+1)}load(s){const{log:n,minZoom:r,maxZoom:o,nodeSize:c}=this.options;n&&console.time("total time");const u=`prepare ${s.length} points`;n&&console.time(u),this.points=s;let h=[];for(let f=0;f<s.length;f++)s[f].geometry&&h.push(pF(s[f],f));this.trees[o+1]=new Bj(h,Vj,Hj,c,Float32Array),n&&console.timeEnd(u);for(let f=o;f>=r;f--){const v=+Date.now();h=this._cluster(h,f),this.trees[f]=new Bj(h,Vj,Hj,c,Float32Array),n&&console.log("z%d: %d clusters in %dms",f,h.length,+Date.now()-v)}return n&&console.timeEnd("total time"),this}getClusters(s,n){let r=((s[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,s[1]));let c=s[2]===180?180:((s[2]+180)%360+360)%360-180;const u=Math.max(-90,Math.min(90,s[3]));if(s[2]-s[0]>=360)r=-180,c=180;else if(r>c){const x=this.getClusters([r,o,180,u],n),g=this.getClusters([-180,o,c,u],n);return x.concat(g)}const h=this.trees[this._limitZoom(n)],f=h.range(Rh(r),Oh(u),Rh(c),Oh(o)),v=[];for(const x of f){const g=h.points[x];v.push(g.numPoints?Uj(g):this.points[g.index])}return v}getChildren(s){const n=this._getOriginId(s),r=this._getOriginZoom(s),o="No cluster with the specified id.",c=this.trees[r];if(!c)throw new Error(o);const u=c.points[n];if(!u)throw new Error(o);const h=this.options.radius/(this.options.extent*Math.pow(2,r-1)),f=c.within(u.x,u.y,h),v=[];for(const x of f){const g=c.points[x];g.parentId===s&&v.push(g.numPoints?Uj(g):this.points[g.index])}if(v.length===0)throw new Error(o);return v}getLeaves(s,n,r){n=n||10,r=r||0;const o=[];return this._appendLeaves(o,s,n,r,0),o}getTile(s,n,r){const o=this.trees[this._limitZoom(s)],c=Math.pow(2,s),{extent:u,radius:h}=this.options,f=h/u,v=(r-f)/c,x=(r+1+f)/c,g={features:[]};return this._addTileFeatures(o.range((n-f)/c,v,(n+1+f)/c,x),o.points,n,r,c,g),n===0&&this._addTileFeatures(o.range(1-f/c,v,1,x),o.points,c,r,c,g),n===c-1&&this._addTileFeatures(o.range(0,v,f/c,x),o.points,-1,r,c,g),g.features.length?g:null}getClusterExpansionZoom(s){let n=this._getOriginZoom(s)-1;for(;n<=this.options.maxZoom;){const r=this.getChildren(s);if(n++,r.length!==1)break;s=r[0].properties.cluster_id}return n}_appendLeaves(s,n,r,o,c){const u=this.getChildren(n);for(const h of u){const f=h.properties;if(f&&f.cluster?c+f.point_count<=o?c+=f.point_count:c=this._appendLeaves(s,f.cluster_id,r,o,c):c<o?c++:s.push(h),s.length===r)break}return c}_addTileFeatures(s,n,r,o,c,u){for(const h of s){const f=n[h],v=f.numPoints;let x,g,N;if(v)x=yS(f),g=f.x,N=f.y;else{const C=this.points[f.index];x=C.properties,g=Rh(C.geometry.coordinates[0]),N=Oh(C.geometry.coordinates[1])}const w={type:1,geometry:[[Math.round(this.options.extent*(g*c-r)),Math.round(this.options.extent*(N*c-o))]],tags:x};let j;v?j=f.id:this.options.generateId?j=f.index:this.points[f.index].id&&(j=this.points[f.index].id),j!==void 0&&(w.id=j),u.features.push(w)}}_limitZoom(s){return Math.max(this.options.minZoom,Math.min(Math.floor(+s),this.options.maxZoom+1))}_cluster(s,n){const r=[],{radius:o,extent:c,reduce:u,minPoints:h}=this.options,f=o/(c*Math.pow(2,n));for(let v=0;v<s.length;v++){const x=s[v];if(x.zoom<=n)continue;x.zoom=n;const g=this.trees[n+1],N=g.within(x.x,x.y,f),w=x.numPoints||1;let j=w;for(const C of N){const k=g.points[C];k.zoom>n&&(j+=k.numPoints||1)}if(j>w&&j>=h){let C=x.x*w,k=x.y*w,E=u&&w>1?this._map(x,!0):null;const S=(v<<5)+(n+1)+this.points.length;for(const P of N){const D=g.points[P];if(D.zoom<=n)continue;D.zoom=n;const I=D.numPoints||1;C+=D.x*I,k+=D.y*I,D.parentId=S,u&&(E||(E=this._map(x,!0)),u(E,this._map(D)))}x.parentId=S,r.push(hF(C/j,k/j,S,j,E))}else if(r.push(x),j>1)for(const C of N){const k=g.points[C];k.zoom<=n||(k.zoom=n,r.push(k))}}return r}_getOriginId(s){return s-this.points.length>>5}_getOriginZoom(s){return(s-this.points.length)%32}_map(s,n){if(s.numPoints)return n?vu({},s.properties):s.properties;const r=this.points[s.index].properties,o=this.options.map(r);return n&&o===r?vu({},o):o}}function hF(t,s,n,r,o){return{x:ep(t),y:ep(s),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:o}}function pF(t,s){const[n,r]=t.geometry.coordinates;return{x:ep(Rh(n)),y:ep(Oh(r)),zoom:1/0,index:s,parentId:-1}}function Uj(t){return{type:"Feature",id:t.id,properties:yS(t),geometry:{type:"Point",coordinates:[fF(t.x),xF(t.y)]}}}function yS(t){const s=t.numPoints,n=s>=1e4?`${Math.round(s/1e3)}k`:s>=1e3?`${Math.round(s/100)/10}k`:s;return vu(vu({},t.properties),{cluster:!0,cluster_id:t.id,point_count:s,point_count_abbreviated:n})}function Rh(t){return t/360+.5}function Oh(t){const s=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+s)/(1-s))/Math.PI;return n<0?0:n>1?1:n}function fF(t){return(t-.5)*360}function xF(t){const s=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(s))/Math.PI-90}function vu(t,s){for(const n in s)t[n]=s[n];return t}function Vj(t){return t.x}function Hj(t){return t.y}function cv({...t}){return e.jsx(T0,{"data-slot":"sheet",...t})}function gF({...t}){return e.jsx(I0,{"data-slot":"sheet-portal",...t})}const bS=m.forwardRef(({className:t,...s},n)=>e.jsx(Fu,{ref:n,"data-slot":"sheet-overlay",className:vt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s}));bS.displayName=Fu.displayName;function dv({className:t,children:s,side:n="right",hideOverlay:r=!1,overlayClassName:o,...c}){return e.jsxs(gF,{children:[r?null:e.jsx(bS,{className:o}),e.jsxs(M0,{"data-slot":"sheet-content",className:vt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...c,children:[s,e.jsxs(kp,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(Na,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function uv({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:vt("flex flex-col gap-1.5 p-4",t),...s})}function vF({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-footer",className:vt("mt-auto flex flex-col gap-2 p-4",t),...s})}function mv({className:t,...s}){return e.jsx(R0,{"data-slot":"sheet-title",className:vt("text-foreground font-semibold",t),...s})}function jS({className:t,...s}){return e.jsx(O0,{"data-slot":"sheet-description",className:vt("text-muted-foreground text-sm",t),...s})}var NS="Toggle",wS=m.forwardRef((t,s)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...c}=t,[u,h]=dr({prop:n,onChange:o,defaultProp:r??!1,caller:NS});return e.jsx(jt.button,{type:"button","aria-pressed":u,"data-state":u?"on":"off","data-disabled":t.disabled?"":void 0,...c,ref:s,onClick:rt(t.onClick,()=>{t.disabled||h(!u)})})});wS.displayName=NS;var qo="ToggleGroup",[CS]=Sa(qo,[hd]),SS=hd(),hv=Be.forwardRef((t,s)=>{const{type:n,...r}=t;if(n==="single"){const o=r;return e.jsx(yF,{...o,ref:s})}if(n==="multiple"){const o=r;return e.jsx(bF,{...o,ref:s})}throw new Error(`Missing prop \`type\` expected on \`${qo}\``)});hv.displayName=qo;var[_S,AS]=CS(qo),yF=Be.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...c}=t,[u,h]=dr({prop:n,defaultProp:r??"",onChange:o,caller:qo});return e.jsx(_S,{scope:t.__scopeToggleGroup,type:"single",value:Be.useMemo(()=>u?[u]:[],[u]),onItemActivate:h,onItemDeactivate:Be.useCallback(()=>h(""),[h]),children:e.jsx(PS,{...c,ref:s})})}),bF=Be.forwardRef((t,s)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...c}=t,[u,h]=dr({prop:n,defaultProp:r??[],onChange:o,caller:qo}),f=Be.useCallback(x=>h((g=[])=>[...g,x]),[h]),v=Be.useCallback(x=>h((g=[])=>g.filter(N=>N!==x)),[h]);return e.jsx(_S,{scope:t.__scopeToggleGroup,type:"multiple",value:u,onItemActivate:f,onItemDeactivate:v,children:e.jsx(PS,{...c,ref:s})})});hv.displayName=qo;var[jF,NF]=CS(qo),PS=Be.forwardRef((t,s)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:c,dir:u,loop:h=!0,...f}=t,v=SS(n),x=ad(u),g={role:"group",dir:x,...f};return e.jsx(jF,{scope:n,rovingFocus:o,disabled:r,children:o?e.jsx(Q0,{asChild:!0,...v,orientation:c,dir:x,loop:h,children:e.jsx(jt.div,{...g,ref:s})}):e.jsx(jt.div,{...g,ref:s})})}),tp="ToggleGroupItem",ES=Be.forwardRef((t,s)=>{const n=AS(tp,t.__scopeToggleGroup),r=NF(tp,t.__scopeToggleGroup),o=SS(t.__scopeToggleGroup),c=n.value.includes(t.value),u=r.disabled||t.disabled,h={...t,pressed:c,disabled:u},f=Be.useRef(null);return r.rovingFocus?e.jsx(X0,{asChild:!0,...o,focusable:!u,active:c,ref:f,children:e.jsx(qj,{...h,ref:s})}):e.jsx(qj,{...h,ref:s})});ES.displayName=tp;var qj=Be.forwardRef((t,s)=>{const{__scopeToggleGroup:n,value:r,...o}=t,c=AS(tp,n),u={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},h=c.type==="single"?u:void 0;return e.jsx(wS,{...h,...o,ref:s,onPressedChange:f=>{f?c.onItemActivate(r):c.onItemDeactivate(r)}})}),wF=hv,CF=ES;const SF=h0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),kS=m.createContext({size:"default",variant:"default"});function _F({className:t,variant:s,size:n,children:r,...o}){return e.jsx(wF,{"data-slot":"toggle-group","data-variant":s,"data-size":n,className:vt("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",t),...o,children:e.jsx(kS.Provider,{value:{variant:s,size:n},children:r})})}function gh({className:t,children:s,variant:n,size:r,...o}){const c=m.useContext(kS);return e.jsx(CF,{"data-slot":"toggle-group-item","data-variant":c.variant||n,"data-size":c.size||r,className:vt(SF({variant:c.variant||n,size:c.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...o,children:s})}const Lh=new Map,Kx=new Map,Wj=2e4,$g=new Map,Qx=new Map,AF=3e4;function cr(t){const s=String(t??"").trim();return s.length?s:void 0}function DS(t){if(!t)return;const n=(Array.isArray(t)?t:[t]).filter(Boolean);if(n.length)return[...n].sort()}function Wp(t){if(!(!t||!t.length))return[...t].sort()}function PF(t){const s=DS(t.availability)?.join(",")??"",n=Wp(t.layers)?.join(",")??"";return[t.bbox??"",String(t.zoom??""),t.at??"",t.type??"",cr(t.city)??"",cr(t.state)??"",cr(t.district)??"",typeof t.showInMediaKit=="boolean"?String(t.showInMediaKit):"",s,n].join("|")}async function EF(t,s){return t.bbox?(await Te.get("/media-points/map",{params:{bbox:t.bbox,zoom:t.zoom,at:t.at,type:t.type,city:cr(t.city),state:cr(t.state),district:cr(t.district),showInMediaKit:t.showInMediaKit,availability:DS(t.availability),layers:Wp(t.layers)?.join(",")??void 0},signal:s})).data??[]:[]}function kF(){Lh.clear(),$g.clear()}function DF(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=m.useRef(null),f=m.useMemo(()=>PF(t),[t.bbox,t.zoom,t.at,t.type,t.city,t.state,t.district,t.showInMediaKit,t.availability,(t.layers??[]).join("|")]),v=async(x=!1)=>{try{if(!t.bbox)return h.current?.abort(),n([]),o(!1),u(null),[];const g=Date.now(),N=Lh.get(f);if(!x&&N&&g-N.ts<Wj)return n(N.data),o(!1),u(null),N.data;const w=Kx.get(f);if(w){o(!0);const E=await w;return n(E),o(!1),u(null),E}h.current?.abort();const j=new AbortController;h.current=j,o(!0),u(null);const C=EF(t,j.signal).then(E=>(Lh.set(f,{ts:Date.now(),data:E}),E)).finally(()=>{Kx.delete(f)});Kx.set(f,C);const k=await C;return n(k),k}catch(g){const N=String(g?.message??"");return N.includes("canceled")||N.includes("abort")?s:(u(g),[])}finally{o(!1)}};return m.useEffect(()=>{let x=!0;const g=Lh.get(f);g&&Date.now()-g.ts<Wj&&(n(g.data),u(null),o(!1));const N=window.setTimeout(()=>{x&&v(!1)},250);return()=>{x=!1,window.clearTimeout(N),h.current?.abort()}},[f]),{points:s,loading:r,error:c,refetch:(x=!0)=>v(x)}}async function TF(t,s){return(await Te.get(`/media-points/${t}/details`,{params:{at:s}})).data}function IF(t){const s=String(t.q||"").trim().toLowerCase(),n=Wp(t.layers)?.join(",")??"";return[s,String(t.limit??""),t.type??"",cr(t.city)??"",cr(t.state)??"",cr(t.district)??"",typeof t.showInMediaKit=="boolean"?String(t.showInMediaKit):"",t.bbox??"",n].join("|")}async function MF(t,s){const n=String(t.q||"").trim();if(n.length<2)return[];const r=IF(t),o=Date.now(),c=$g.get(r);if(c&&o-c.ts<AF)return c.data;const u=Qx.get(r);if(u)return u;const h=Promise.resolve(Te.get("/media-points/suggestions",{params:{q:n,limit:t.limit,type:t.type,city:cr(t.city),state:cr(t.state),district:cr(t.district),showInMediaKit:t.showInMediaKit,bbox:t.bbox,layers:Wp(t.layers)?.join(",")??void 0},signal:s})).then(f=>{const v=f.data??[];return $g.set(r,{ts:Date.now(),data:v}),v}).finally(()=>{Qx.delete(r)});return Qx.set(r,h),h}async function RF(t,s){return s?(await Te.put(`/media-points/${t}/favorite`)).data:(await Te.delete(`/media-points/${t}/favorite`)).data}const OF="ONE_MEDIA_MEDIAMAP_PRESELECT_POINT_IDS";function LF(t,s){let n=!1;for(let r=0,o=s.length-1;r<s.length;o=r++){const c=s[r].lng,u=s[r].lat,h=s[o].lng,f=s[o].lat;u>t.lat!=f>t.lat&&t.lng<(h-c)*(t.lat-u)/(f-u+0)+c&&(n=!n)}return n}function FF(t,s){const n=Math.min(t.lat,s.lat),r=Math.max(t.lat,s.lat),o=Math.min(t.lng,s.lng),c=Math.max(t.lng,s.lng);return[{lat:n,lng:o},{lat:n,lng:c},{lat:r,lng:c},{lat:r,lng:o}]}function Zj(t){return $u.latLngBounds(t.map(s=>[s.lat,s.lng]))}function vh(t){return Number(t.toFixed(6))}function $F(t){const s=t.getBounds(),n=vh(s.getWest()),r=vh(s.getSouth()),o=vh(s.getEast()),c=vh(s.getNorth()),u=[n,r,o,c],h=`${n},${r},${o},${c}`,f=t.getZoom();return{bboxStr:h,bboxArr:u,zoom:f}}function zF(t){const s=t<10?34:t<100?38:44;return $u.divIcon({html:`
      <div style="
        width:${s}px;
        height:${s}px;
        border-radius:${s}px;
        background:rgba(79,70,229,0.92);
        color:white;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:12px;
        font-weight:600;
        border:2px solid rgba(255,255,255,0.9);
        box-shadow:0 6px 18px rgba(0,0,0,0.18);
      ">
        ${t}
      </div>
    `,className:"one-media-cluster-icon",iconSize:[s,s],iconAnchor:[s/2,s/2]})}function BF(t){return t.facesOccupiedCount>0&&t.facesOccupiedCount===t.facesTotal?"rgba(239,68,68,0.95)":t.facesOccupiedCount>0?"rgba(245,158,11,0.95)":t.facesNegotiationCount>0?"rgba(168,85,247,0.95)":"rgba(34,197,94,0.95)"}function UF(t){const s=BF(t),n=t.isFavorite?'<div style="position:absolute; top:-6px; right:-6px; width:18px; height:18px; border-radius:18px; background:rgba(17,24,39,0.9); border:2px solid rgba(255,255,255,0.9); display:flex; align-items:center; justify-content:center; font-size:11px;"></div>':"";return $u.divIcon({html:`
      <div style="position:relative;">
        <div style="
          width:22px;
          height:22px;
          border-radius:22px;
          background:${s};
          border:2px solid rgba(255,255,255,0.95);
          box-shadow:0 6px 18px rgba(0,0,0,0.18);
        "></div>
        ${n}
      </div>
    `,className:"one-media-point-icon",iconSize:[22,22],iconAnchor:[11,11]})}function Xx(t){return t.facesTotal>0&&t.facesOccupiedCount===t.facesTotal?"Totalmente ocupada":t.facesOccupiedCount>0?"Parcialmente ocupada":t.facesNegotiationCount>0?"Em negociao":"Livre"}async function Gj(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const s=document.createElement("textarea");return s.value=t,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch{return!1}}}function VF({mapRef:t,onViewportChange:s}){const n=W2({moveend(){s(n)},zoomend(){s(n)}});return m.useEffect(()=>{t.current=n;const r=window.setTimeout(()=>{try{n.invalidateSize()}catch{}},0);return s(n),()=>window.clearTimeout(r)},[]),null}function HF({drawMode:t,rectStart:s,onAddVertex:n,onRectStart:r,onRectEnd:o,onCompleteRectangle:c}){const u=W2({click(h){if(t==="polygon"&&n({lat:h.latlng.lat,lng:h.latlng.lng}),t==="rectangle"){const f={lat:h.latlng.lat,lng:h.latlng.lng};if(!s){r(f),o(f);return}c(s,f)}},mousemove(h){t==="rectangle"&&s&&o({lat:h.latlng.lat,lng:h.latlng.lng})}});return m.useEffect(()=>(t!=="none"?u.doubleClickZoom.disable():u.doubleClickZoom.enable(),()=>{u.doubleClickZoom.enable()}),[u,t]),null}function qF(){const t=Jt(),s=m.useRef(null),n=m.useRef(null),r=m.useRef(null),[o,c]=m.useState(void 0),[u,h]=m.useState(null),[f,v]=m.useState(12),[x,g]=m.useState(!1),[N,w]=m.useState("ALL"),[j,C]=m.useState(""),[k,E]=m.useState(""),[S,P]=m.useState(""),[D,I]=m.useState(""),[O,F]=m.useState(!1),[X,Q]=m.useState([]),[V,$]=m.useState("none"),[R,z]=m.useState([]),[J,ue]=m.useState(null),[se,fe]=m.useState(null),[H,re]=m.useState(null),[G,W]=m.useState([]),[ne,K]=m.useState(""),[ee,U]=m.useState([]),[le,Y]=m.useState(!1),[ae,Ie]=m.useState(!1),[$e,Ge]=m.useState(null),[Xe,Je]=m.useState(!1),[tt,ut]=m.useState("details"),[wt,mt]=m.useState(null),[kt,zt]=m.useState([]),[te,xe]=m.useState(null),[pe,Ue]=m.useState(!1),[ce,ve]=m.useState(null),ze=X.length?X:void 0,{points:He,loading:pt,error:me,refetch:Oe}=DF({bbox:o,zoom:f,type:N==="ALL"?void 0:N,city:k,state:S,district:D,showInMediaKit:O?!0:void 0,availability:j||void 0,layers:ze}),Ke=H?G:He,lt=m.useMemo(()=>Ke.filter(Ae=>Number.isFinite(Ae.latitude)&&Number.isFinite(Ae.longitude)).map(Ae=>({type:"Feature",properties:{cluster:!1,pointId:Ae.id,...Ae},geometry:{type:"Point",coordinates:[Ae.longitude,Ae.latitude]}})),[Ke]),Tt=m.useMemo(()=>{const Ae=new mF({radius:60,maxZoom:20});return Ae.load(lt),Ae},[lt]),ps=m.useMemo(()=>u?Tt.getClusters(u,Math.round(f)):[],[Tt,u,f]);m.useEffect(()=>{if(!H||H.length<3){W([]);return}const Ae=H,nt=(He??[]).filter(it=>!Number.isFinite(it.latitude)||!Number.isFinite(it.longitude)?!1:LF({lat:it.latitude,lng:it.longitude},Ae));W(nt)},[H,He]),m.useEffect(()=>{const Ae=nt=>{if(!le)return;const it=n.current;it&&nt.target&&!it.contains(nt.target)&&Y(!1)};return document.addEventListener("mousedown",Ae),()=>document.removeEventListener("mousedown",Ae)},[le]),m.useEffect(()=>{const Ae=String(ne||"").trim();if(Ge(null),Ae.length<2){r.current?.abort(),Ie(!1),U([]);return}const nt=window.setTimeout(async()=>{try{r.current?.abort();const it=new AbortController;r.current=it,Ie(!0);const be=await MF({q:Ae,limit:10,bbox:o,type:N==="ALL"?void 0:N,city:k,state:S,district:D,showInMediaKit:O?!0:void 0,layers:ze},it.signal);U(be||[]),Y(!0)}catch(it){const be=String(it?.message??"");if(be.includes("canceled")||be.includes("abort"))return;Ge("Erro ao buscar sugestes")}finally{Ie(!1)}},250);return()=>window.clearTimeout(nt)},[ne,o,N,k,S,D,O,ze]);const Ts=Ae=>{const{bboxStr:nt,bboxArr:it,zoom:be}=$F(Ae);c(nt),h(it),v(be),g(!0)},ws=Ae=>{$(Ae),z([]),ue(null),fe(null),re(null),W([]),ye.message(Ae==="polygon"?"Modo desenho: polgono":"Modo desenho: retngulo")},rs=()=>{$("none"),z([]),ue(null),fe(null)},fs=()=>{rs(),re(null),W([])},gs=()=>{if(R.length<3){ye.error("Adicione pelo menos 3 pontos para formar um polgono");return}const Ae=[...R];re(Ae),$("none"),z([]);const nt=Zj(Ae).pad(.05);s.current?.fitBounds(nt,{animate:!0}),ut("selected"),Je(!0)},Fs=(Ae,nt)=>{const it=FF(Ae,nt);re(it),$("none"),ue(null),fe(null);const be=Zj(it).pad(.05);s.current?.fitBounds(be,{animate:!0}),ut("selected"),Je(!0)},Ws=()=>{const Ae=(G??[]).map(nt=>nt.id).filter(Boolean);if(!Ae.length){ye.error("Nenhum ponto selecionado");return}try{sessionStorage.setItem(OF,JSON.stringify(Ae))}catch{}t("/app/proposals?new=1"),Je(!1)};m.useEffect(()=>{if(V==="none")return;const Ae=nt=>{nt.key==="Escape"&&rs()};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[V]);const ks=async(Ae,nt)=>{mt(Ae),ut("details"),Je(!0),xe(null),ve(null),Ue(!0);try{const it=await TF(Ae);if(xe(it),nt?.center!==!1&&it?.point?.latitude&&it?.point?.longitude){const be=Number(it.point.latitude),Me=Number(it.point.longitude);Number.isFinite(be)&&Number.isFinite(Me)&&s.current?.setView([be,Me],Math.max(16,s.current?.getZoom?.()??16),{animate:!0})}}catch{ve("Erro ao carregar detalhes do ponto")}finally{Ue(!1)}},an=(Ae,nt)=>{if(!u)return;const be=Tt.getLeaves(Ae,nt).map(Me=>Me?.properties).filter(Boolean);zt(be),ut("cluster"),Je(!0)},yt=Ae=>{K(Ae.name),Y(!1),s.current&&s.current.setView([Ae.latitude,Ae.longitude],Math.max(16,s.current.getZoom()||16),{animate:!0}),ks(Ae.id,{center:!1})},os=async()=>{if(!te?.point?.id)return;const Ae=te.point.id,nt=!te.point.isFavorite;xe(it=>it&&{...it,point:{...it.point,isFavorite:nt}});try{await RF(Ae,nt),kF(),Oe(!0),ye.success(nt?"Adicionado aos favoritos":"Removido dos favoritos")}catch{xe(it=>it&&{...it,point:{...it.point,isFavorite:!nt}}),ye.error("No foi possvel atualizar favorito")}},qt=async()=>{if(!te?.point?.id)return;const Ae=`${window.location.origin}/app/mediamap?pointId=${te.point.id}`,nt=await Gj(Ae);ye[nt?"success":"error"](nt?"Link copiado!":"No foi possvel copiar o link")},Ds=async()=>{if(!te?.point)return;const Ae=te.point.latitude,nt=te.point.longitude,it=await Gj(`${Ae},${nt}`);ye[it?"success":"error"](it?"Coordenadas copiadas!":"No foi possvel copiar")},js=()=>{te?.point?.id&&(t(`/app/inventory?pointId=${te.point.id}`),Je(!1))},vs=()=>{te?.point?.id&&(t(`/app/proposals?new=1&mediaPointId=${te.point.id}`),Je(!1))};return m.useEffect(()=>{const Ae=new URLSearchParams(window.location.search),nt=Ae.get("pointId");if(!nt||!x||!s.current)return;ks(nt,{center:!0}),Ae.delete("pointId");const it=Ae.toString(),be=`${window.location.pathname}${it?`?${it}`:""}`;window.history.replaceState({},"",be)},[x]),e.jsxs("div",{className:"relative h-full w-full",style:{minHeight:"calc(100vh - 64px)",isolation:"isolate"},children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 flex flex-col gap-3",style:{zIndex:30,maxWidth:980,pointerEvents:"auto"},children:e.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm p-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",ref:n,children:[e.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2",children:[e.jsx(oi,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:ne,onChange:Ae=>K(Ae.target.value),onFocus:()=>Y(!0),placeholder:"Buscar ponto, endereo, cidade...",className:"flex-1 outline-none text-sm"}),ne?e.jsx("button",{type:"button",onClick:()=>{K(""),U([]),Y(!1)},className:"p-1 rounded hover:bg-gray-100","aria-label":"Limpar",children:e.jsx(Na,{className:"w-4 h-4 text-gray-600"})}):null]}),le&&(ae||ee.length>0||$e)&&e.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-auto",style:{maxHeight:280},children:[ae?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Buscando..."}):null,$e?e.jsx("div",{className:"px-3 py-2 text-sm text-red-600",children:$e}):null,!ae&&!$e&&ee.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-600",children:"Nenhum resultado"}):null,ee.map(Ae=>e.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-start gap-2",onClick:()=>yt(Ae),children:[e.jsx(ra,{className:"w-4 h-4 text-indigo-600 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ae.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:[Ae.addressDistrict,Ae.addressCity,Ae.addressState].filter(Boolean).join("  ")})]}),Ae.isFavorite?e.jsx(Do,{className:"w-4 h-4 text-amber-500 ml-auto mt-0.5"}):null]},Ae.id))]})})]})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx(Z,{type:"button",variant:X.length===0?"default":"outline",size:"sm",className:vt("h-8",X.length===0?"mm-indigo":""),onClick:()=>Q([]),children:"Todos"}),e.jsxs(_F,{type:"multiple",value:X,onValueChange:Ae=>Q(Ae??[]),variant:"outline",size:"sm",className:"flex flex-wrap gap-2",children:[e.jsx(gh,{value:"mine","aria-label":"Meus",className:"h-8 px-3 whitespace-nowrap",children:"Meus"}),e.jsx(gh,{value:"favorites","aria-label":"Favoritos",className:"h-8 px-3 whitespace-nowrap",children:"Favoritos"}),e.jsx(gh,{value:"campaign","aria-label":"Em campanha",className:"h-8 px-3 whitespace-nowrap",children:"Em campanha"}),e.jsx(gh,{value:"proposal","aria-label":"Em proposta",className:"h-8 px-3 whitespace-nowrap",children:"Em proposta"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(Z,{type:"button",variant:V==="polygon"?"default":"outline",size:"sm",className:vt("h-8",V==="polygon"?"mm-indigo":""),onClick:()=>ws("polygon"),children:[e.jsx(Jg,{className:"w-4 h-4 mr-2"})," Polgono"]}),e.jsxs(Z,{type:"button",variant:V==="rectangle"?"default":"outline",size:"sm",className:vt("h-8",V==="rectangle"?"mm-indigo":""),onClick:()=>ws("rectangle"),children:[e.jsx(F4,{className:"w-4 h-4 mr-2"})," Retngulo"]}),V==="polygon"?e.jsxs(Z,{type:"button",size:"sm",className:"h-8 gap-2 mm-indigo",disabled:R.length<3,onClick:gs,children:[e.jsx(ja,{className:"w-4 h-4"})," Concluir"]}):null,V!=="none"?e.jsxs(Z,{type:"button",variant:"ghost",size:"sm",className:"h-8",onClick:rs,children:[e.jsx(Na,{className:"w-4 h-4 mr-2"})," Cancelar"]}):H?e.jsxs(Z,{type:"button",variant:"ghost",size:"sm",className:"h-8",onClick:fs,children:[e.jsx(Ba,{className:"w-4 h-4 mr-2"})," Limpar seleo"]}):null,H?e.jsxs(st,{className:"bg-indigo-100 text-indigo-800 border border-indigo-200",children:[G.length," selecionado(s)"]}):null,V!=="none"?e.jsx("span",{className:"text-xs text-gray-600",children:V==="polygon"?"Clique no mapa para adicionar pontos. Conclua para finalizar.":J?"Clique novamente para finalizar o retngulo.":"Clique para marcar o 1 canto do retngulo."}):null]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm",value:N,onChange:Ae=>w(Ae.target.value||"ALL"),children:[e.jsx("option",{value:"ALL",children:"Tipo: todos"}),e.jsx("option",{value:"OOH",children:"OOH"}),e.jsx("option",{value:"DOOH",children:"DOOH"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm",value:j,onChange:Ae=>C(Ae.target.value||""),children:[e.jsx("option",{value:"",children:"Disponibilidade: todas"}),e.jsx("option",{value:"LIVRE",children:"Somente livres"}),e.jsx("option",{value:"OCUPADA",children:"Somente ocupadas"}),e.jsx("option",{value:"EM_NEGOCIACAO",children:"Somente em negociao"})]}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm",value:k,onChange:Ae=>E(Ae.target.value),placeholder:"Cidade"}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm",value:S,onChange:Ae=>P(Ae.target.value),placeholder:"UF"}),e.jsx("input",{className:"border rounded-lg px-3 py-2 text-sm sm:col-span-2 lg:col-span-2",value:D,onChange:Ae=>I(Ae.target.value),placeholder:"Bairro"}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 sm:col-span-2 lg:col-span-1",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:Ae=>F(Ae.target.checked)}),"Somente no Mdia Kit"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx(st,{className:"bg-green-100 text-green-700 border border-green-200",children:"Livre"}),e.jsx(st,{className:"bg-amber-100 text-amber-700 border border-amber-200",children:"Misto"}),e.jsx(st,{className:"bg-red-100 text-red-700 border border-red-200",children:"Ocupado"}),e.jsx(st,{className:"bg-purple-100 text-purple-700 border border-purple-200",children:"Negociao"})]})]})}),e.jsxs(Z2,{center:[-23.55052,-46.633308],zoom:12,className:"h-full w-full",style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(G2,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(VF,{mapRef:s,onViewportChange:Ts}),e.jsx(HF,{drawMode:V,rectStart:J,onAddVertex:Ae=>z(nt=>[...nt,Ae]),onRectStart:ue,onRectEnd:fe,onCompleteRectangle:Fs}),H&&H.length>=3?e.jsx(xj,{positions:H.map(Ae=>[Ae.lat,Ae.lng]),pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.12}}):null,V==="polygon"&&R.length?e.jsxs(e.Fragment,{children:[e.jsx(_3,{positions:R.map(Ae=>[Ae.lat,Ae.lng]),pathOptions:{color:"#4F46E5",weight:2,dashArray:"4 6"}}),R.length>=3?e.jsx(xj,{positions:R.map(Ae=>[Ae.lat,Ae.lng]),pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.08,dashArray:"4 6"}}):null]}):null,V==="rectangle"&&J&&se?e.jsx(P3,{bounds:[[Math.min(J.lat,se.lat),Math.min(J.lng,se.lng)],[Math.max(J.lat,se.lat),Math.max(J.lng,se.lng)]],pathOptions:{color:"#4F46E5",weight:2,fillOpacity:.08,dashArray:"4 6"}}):null,ps.map(Ae=>{const[nt,it]=Ae.geometry.coordinates;if(Ae.properties.cluster){const Fe=Ae.properties.point_count,Dt=Ae.id;return e.jsx(Tg,{position:[it,nt],icon:zF(Fe),eventHandlers:{click:()=>{an(Dt,Fe);const Mt=Math.min(Tt.getClusterExpansionZoom(Dt),20);s.current?.setView([it,nt],Mt,{animate:!0})}}},`cluster-${Dt}`)}const Me=Ae.properties;return e.jsx(Tg,{position:[Me.latitude,Me.longitude],icon:UF(Me),eventHandlers:{click:()=>void ks(Me.id,{center:!1})}},`p-${Me.id}`)})]}),pt?e.jsx("div",{className:"absolute bottom-4 left-4 bg-white border rounded-lg shadow px-3 py-2 text-sm text-gray-700",children:"Carregando pontos..."}):null,!pt&&me?e.jsx("div",{className:"absolute bottom-4 left-4 bg-white border border-red-200 rounded-lg shadow px-3 py-2 text-sm text-red-700",children:"Erro ao carregar pontos."}):null,H?e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-white border rounded-xl shadow-sm p-3",style:{zIndex:30,maxWidth:520,pointerEvents:"auto"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("span",{className:"font-medium",children:G.length})," ponto(s) selecionado(s) na rea"]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:ml-auto",children:[e.jsxs(Z,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:()=>{ut("selected"),Je(!0)},children:[e.jsx($k,{className:"w-4 h-4"})," Ver lista"]}),e.jsxs(Z,{type:"button",size:"sm",className:"gap-2 mm-indigo",disabled:G.length===0,onClick:Ws,children:[e.jsx(kn,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(Z,{type:"button",size:"sm",variant:"ghost",onClick:fs,children:[e.jsx(Ba,{className:"w-4 h-4 mr-2"})," Limpar"]})]})]})}):null,e.jsx(cv,{open:Xe,onOpenChange:Je,modal:!1,children:e.jsxs(dv,{hideOverlay:!0,side:"right",className:"p-0",style:{width:480,maxWidth:"92vw"},children:[e.jsxs(uv,{className:"space-y-1 p-5 pb-0",children:[e.jsx(mv,{children:tt==="details"?"Detalhes do ponto":tt==="cluster"?"Pontos do cluster":"Selecionados"}),e.jsx(jS,{children:tt==="details"?"Disponibilidade por face e aes rpidas.":tt==="cluster"?`${kt.length} ponto(s) neste agrupamento.`:`${G.length} ponto(s) selecionado(s) na rea.`})]}),e.jsx("div",{className:"px-5 pb-5 pt-4",children:tt==="cluster"?e.jsx(kl,{className:"pr-3",style:{height:"calc(100vh - 180px)"},children:e.jsx("div",{className:"space-y-2",children:kt.map(Ae=>e.jsx("button",{type:"button",className:vt("w-full text-left border rounded-xl p-3 hover:bg-gray-50",wt===Ae.id&&"border-indigo-300"),onClick:()=>void ks(Ae.id),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ae.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[Ae.addressDistrict,Ae.addressCity,Ae.addressState].filter(Boolean).join("  ")}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[Xx(Ae),"  ",Ae.facesFreeCount,"/",Ae.facesTotal," livres"]})]}),Ae.isFavorite?e.jsx(Do,{className:"w-4 h-4 text-amber-500 mt-0.5"}):null]})},Ae.id))})}):tt==="selected"?e.jsxs(kl,{className:"pr-3",style:{height:"calc(100vh - 220px)"},children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(Z,{type:"button",size:"sm",className:"gap-2 mm-indigo",disabled:G.length===0,onClick:Ws,children:[e.jsx(kn,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(Z,{type:"button",size:"sm",variant:"outline",onClick:fs,className:"gap-2",children:[e.jsx(Ba,{className:"w-4 h-4"})," Limpar seleo"]})]}),e.jsxs("div",{className:"space-y-2",children:[G.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhum ponto dentro da rea desenhada."}):null,G.map(Ae=>e.jsx("button",{type:"button",className:vt("w-full text-left border rounded-xl p-3 hover:bg-gray-50"),onClick:()=>void ks(Ae.id),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:Ae.name}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:[Ae.addressDistrict,Ae.addressCity,Ae.addressState].filter(Boolean).join("  ")}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[Xx(Ae),"  ",Ae.facesFreeCount,"/",Ae.facesTotal," livres"]})]}),Ae.isFavorite?e.jsx(Do,{className:"w-4 h-4 text-amber-500 mt-0.5"}):null]})},Ae.id))]})]}):e.jsxs(e.Fragment,{children:[pe?e.jsx("div",{className:"text-sm text-gray-600",children:"Carregando detalhes..."}):null,ce?e.jsx("div",{className:"text-sm text-red-700",children:ce}):null,!pe&&!ce&&te?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-2xl p-4",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-gray-900 font-medium truncate",children:te.point.name}),te.point.isFavorite?e.jsx(st,{className:"bg-amber-100 text-amber-800 border border-amber-200",children:"Favorito"}):null,te.point.isMine?e.jsx(st,{className:"bg-indigo-100 text-indigo-800 border border-indigo-200",children:"Meu"}):null,te.point.isInCampaign?e.jsx(st,{className:"bg-red-100 text-red-800 border border-red-200",children:"Em campanha"}):null,te.point.isInProposal?e.jsx(st,{className:"bg-purple-100 text-purple-800 border border-purple-200",children:"Em proposta"}):null]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:[te.point.addressStreet,te.point.addressNumber,te.point.addressDistrict,te.point.addressCity,te.point.addressState].filter(Boolean).join(", ")}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[Xx(te),"  ",te.facesFreeCount,"/",te.facesTotal," livres  ",te.facesNegotiationCount," em negociao  ",te.facesOccupiedCount," ocupadas"]})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[e.jsxs(Z,{type:"button",size:"sm",className:"gap-2 mm-indigo col-span-2",onClick:vs,children:[e.jsx(kn,{className:"w-4 h-4"})," Criar proposta"]}),e.jsxs(Z,{type:"button",size:"sm",variant:"outline",className:"gap-2 col-span-2 sm:col-span-1",onClick:js,children:[e.jsx(Mu,{className:"w-4 h-4"})," Abrir no inventrio"]}),e.jsxs(Z,{type:"button",size:"sm",variant:"outline",className:"gap-2 col-span-2 sm:col-span-1",onClick:os,children:[e.jsx(Do,{className:"w-4 h-4"})," ",te.point.isFavorite?"Desfavoritar":"Favoritar"]}),e.jsxs(Z,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:qt,children:[e.jsx($n,{className:"w-4 h-4"})," Copiar link"]}),e.jsxs(Z,{type:"button",size:"sm",variant:"outline",className:"gap-2",onClick:Ds,children:[e.jsx($n,{className:"w-4 h-4"})," Copiar coords"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium mb-2",children:"Faces"}),e.jsx(kl,{className:"pr-3",style:{height:"calc(100vh - 440px)"},children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:te.faces.map(Ae=>{const nt=Ae.status,it=nt==="LIVRE"?"border-green-200 bg-green-50 text-green-700":nt==="OCUPADA"?"border-red-200 bg-red-50 text-red-700":"border-purple-200 bg-purple-50 text-purple-700";return e.jsxs("div",{className:vt("border rounded-xl p-3 text-xs",it),children:[e.jsx("div",{className:"font-medium text-gray-900",children:Ae.label}),e.jsx("div",{className:"mt-1",children:nt==="LIVRE"?"Livre":nt==="OCUPADA"?"Ocupada":"Em negociao"})]},Ae.id)})})})]})]}):null]})})]})})]})}function WF(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const w={search:t.search,status:t.status,ownerUserId:t.ownerUserId,page:t.page,pageSize:t.pageSize,orderBy:t.sortBy,sortOrder:t.sortOrder};w.orderBy==="contactName"&&(w.orderBy="name");const C=(await Te.get("/clients",{params:w})).data,k=Array.isArray(C)?C:C.data,E=Array.isArray(C)?k.length:C.total??k.length;n(k),o(E)}catch(w){f(w)}finally{u(!1)}},x=async w=>{const j=await Te.post("/clients",w);return n(C=>[...C,j.data]),j.data},g=async(w,j)=>{const C=await Te.put(`/clients/${w}`,j);return n(k=>k.map(E=>E.id===w?C.data:E)),C.data},N=async w=>{await Te.delete(`/clients/${w}`),n(j=>j.filter(C=>C.id!==w))};return m.useEffect(()=>{v()},[t.search,t.status,t.ownerUserId,t.page,t.pageSize,t.sortBy,t.sortOrder]),{clients:s,total:r,loading:c,error:h,refetch:v,createClient:x,updateClient:g,deleteClient:N}}var Hu=t=>t.type==="checkbox",_l=t=>t instanceof Date,va=t=>t==null;const TS=t=>typeof t=="object";var vn=t=>!va(t)&&!Array.isArray(t)&&TS(t)&&!_l(t),ZF=t=>vn(t)&&t.target?Hu(t.target)?t.target.checked:t.target.value:t,GF=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,KF=(t,s)=>t.has(GF(s)),QF=t=>{const s=t.constructor&&t.constructor.prototype;return vn(s)&&s.hasOwnProperty("isPrototypeOf")},pv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Pn(t){let s;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(pv&&(t instanceof Blob||r))&&(n||vn(t)))if(s=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!QF(t))s=t;else for(const o in t)t.hasOwnProperty(o)&&(s[o]=Pn(t[o]));else return t;return s}var Zp=t=>/^\w*$/.test(t),ln=t=>t===void 0,fv=t=>Array.isArray(t)?t.filter(Boolean):[],xv=t=>fv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),xt=(t,s,n)=>{if(!s||!vn(t))return n;const r=(Zp(s)?[s]:xv(s)).reduce((o,c)=>va(o)?o:o[c],t);return ln(r)||r===t?ln(t[s])?n:t[s]:r},Yr=t=>typeof t=="boolean",Hs=(t,s,n)=>{let r=-1;const o=Zp(s)?[s]:xv(s),c=o.length,u=c-1;for(;++r<c;){const h=o[r];let f=n;if(r!==u){const v=t[h];f=vn(v)||Array.isArray(v)?v:isNaN(+o[r+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=f,t=t[h]}};const Kj={BLUR:"blur",FOCUS_OUT:"focusout"},_r={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ti={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},XF=Be.createContext(null);XF.displayName="HookFormContext";var YF=(t,s,n,r=!0)=>{const o={defaultValues:s._defaultValues};for(const c in t)Object.defineProperty(o,c,{get:()=>{const u=c;return s._proxyFormState[u]!==_r.all&&(s._proxyFormState[u]=!r||_r.all),t[u]}});return o};const JF=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;var za=t=>typeof t=="string",e8=(t,s,n,r,o)=>za(t)?(r&&s.watch.add(t),xt(n,t,o)):Array.isArray(t)?t.map(c=>(r&&s.watch.add(c),xt(n,c))):(r&&(s.watchAll=!0),n),zg=t=>va(t)||!TS(t);function Eo(t,s,n=new WeakSet){if(zg(t)||zg(s))return Object.is(t,s);if(_l(t)&&_l(s))return t.getTime()===s.getTime();const r=Object.keys(t),o=Object.keys(s);if(r.length!==o.length)return!1;if(n.has(t)||n.has(s))return!0;n.add(t),n.add(s);for(const c of r){const u=t[c];if(!o.includes(c))return!1;if(c!=="ref"){const h=s[c];if(_l(u)&&_l(h)||vn(u)&&vn(h)||Array.isArray(u)&&Array.isArray(h)?!Eo(u,h,n):!Object.is(u,h))return!1}}return!0}var t8=(t,s,n,r,o)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:o||!0}}:{},yu=t=>Array.isArray(t)?t:[t],Qj=()=>{let t=[];return{get observers(){return t},next:o=>{for(const c of t)c.next&&c.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(c=>c!==o)}}),unsubscribe:()=>{t=[]}}};function IS(t,s){const n={};for(const r in t)if(t.hasOwnProperty(r)){const o=t[r],c=s[r];if(o&&vn(o)&&c){const u=IS(o,c);vn(u)&&(n[r]=u)}else t[r]&&(n[r]=c)}return n}var na=t=>vn(t)&&!Object.keys(t).length,gv=t=>t.type==="file",Ar=t=>typeof t=="function",sp=t=>{if(!pv)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},MS=t=>t.type==="select-multiple",vv=t=>t.type==="radio",s8=t=>vv(t)||Hu(t),Yx=t=>sp(t)&&t.isConnected;function n8(t,s){const n=s.slice(0,-1).length;let r=0;for(;r<n;)t=ln(t)?r++:t[s[r++]];return t}function a8(t){for(const s in t)if(t.hasOwnProperty(s)&&!ln(t[s]))return!1;return!0}function xn(t,s){const n=Array.isArray(s)?s:Zp(s)?[s]:xv(s),r=n.length===1?t:n8(t,n),o=n.length-1,c=n[o];return r&&delete r[c],o!==0&&(vn(r)&&na(r)||Array.isArray(r)&&a8(r))&&xn(t,n.slice(0,-1)),t}var r8=t=>{for(const s in t)if(Ar(t[s]))return!0;return!1};function RS(t){return Array.isArray(t)||vn(t)&&!r8(t)}function Bg(t,s={}){for(const n in t){const r=t[n];RS(r)?(s[n]=Array.isArray(r)?[]:{},Bg(r,s[n])):ln(r)||(s[n]=!0)}return s}function Rc(t,s,n){n||(n=Bg(s));for(const r in t){const o=t[r];if(RS(o))ln(s)||zg(n[r])?n[r]=Bg(o,Array.isArray(o)?[]:{}):Rc(o,va(s)?{}:s[r],n[r]);else{const c=s[r];n[r]=!Eo(o,c)}}return n}const Xj={value:!1,isValid:!1},Yj={value:!0,isValid:!0};var OS=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ln(t[0].attributes.value)?ln(t[0].value)||t[0].value===""?Yj:{value:t[0].value,isValid:!0}:Yj:Xj}return Xj},LS=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:r})=>ln(t)?t:s?t===""?NaN:t&&+t:n&&za(t)?new Date(t):r?r(t):t;const Jj={isValid:!1,value:null};var FS=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,Jj):Jj;function eN(t){const s=t.ref;return gv(s)?s.files:vv(s)?FS(t.refs).value:MS(s)?[...s.selectedOptions].map(({value:n})=>n):Hu(s)?OS(t.refs).value:LS(ln(s.value)?t.ref.value:s.value,t)}var i8=(t,s,n,r)=>{const o={};for(const c of t){const u=xt(s,c);u&&Hs(o,c,u._f)}return{criteriaMode:n,names:[...t],fields:o,shouldUseNativeValidation:r}},np=t=>t instanceof RegExp,lu=t=>ln(t)?t:np(t)?t.source:vn(t)?np(t.value)?t.value.source:t.value:t,tN=t=>({isOnSubmit:!t||t===_r.onSubmit,isOnBlur:t===_r.onBlur,isOnChange:t===_r.onChange,isOnAll:t===_r.all,isOnTouch:t===_r.onTouched});const sN="AsyncFunction";var o8=t=>!!t&&!!t.validate&&!!(Ar(t.validate)&&t.validate.constructor.name===sN||vn(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===sN)),l8=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),nN=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const bu=(t,s,n,r)=>{for(const o of n||Object.keys(t)){const c=xt(t,o);if(c){const{_f:u,...h}=c;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],o)&&!r)return!0;if(u.ref&&s(u.ref,u.name)&&!r)return!0;if(bu(h,s))break}else if(vn(h)&&bu(h,s))break}}};function aN(t,s,n){const r=xt(t,n);if(r||Zp(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const c=o.join("."),u=xt(s,c),h=xt(t,c);if(u&&!Array.isArray(u)&&n!==c)return{name:n};if(h&&h.type)return{name:c,error:h};if(h&&h.root&&h.root.type)return{name:`${c}.root`,error:h.root};o.pop()}return{name:n}}var c8=(t,s,n,r)=>{n(t);const{name:o,...c}=t;return na(c)||Object.keys(c).length>=Object.keys(s).length||Object.keys(c).find(u=>s[u]===(!r||_r.all))},d8=(t,s,n)=>!t||!s||t===s||yu(t).some(r=>r&&(n?r===s:r.startsWith(s)||s.startsWith(r))),u8=(t,s,n,r,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(s||t):(n?r.isOnBlur:o.isOnBlur)?!t:(n?r.isOnChange:o.isOnChange)?t:!0,m8=(t,s)=>!fv(xt(t,s)).length&&xn(t,s),h8=(t,s,n)=>{const r=yu(xt(t,n));return Hs(r,"root",s[n]),Hs(t,n,r),t};function rN(t,s,n="validate"){if(za(t)||Array.isArray(t)&&t.every(za)||Yr(t)&&!t)return{type:n,message:za(t)?t:"",ref:s}}var Mc=t=>vn(t)&&!np(t)?t:{value:t,message:""},iN=async(t,s,n,r,o,c)=>{const{ref:u,refs:h,required:f,maxLength:v,minLength:x,min:g,max:N,pattern:w,validate:j,name:C,valueAsNumber:k,mount:E}=t._f,S=xt(n,C);if(!E||s.has(C))return{};const P=h?h[0]:u,D=R=>{o&&P.reportValidity&&(P.setCustomValidity(Yr(R)?"":R||""),P.reportValidity())},I={},O=vv(u),F=Hu(u),X=O||F,Q=(k||gv(u))&&ln(u.value)&&ln(S)||sp(u)&&u.value===""||S===""||Array.isArray(S)&&!S.length,V=t8.bind(null,C,r,I),$=(R,z,J,ue=Ti.maxLength,se=Ti.minLength)=>{const fe=R?z:J;I[C]={type:R?ue:se,message:fe,ref:u,...V(R?ue:se,fe)}};if(c?!Array.isArray(S)||!S.length:f&&(!X&&(Q||va(S))||Yr(S)&&!S||F&&!OS(h).isValid||O&&!FS(h).isValid)){const{value:R,message:z}=za(f)?{value:!!f,message:f}:Mc(f);if(R&&(I[C]={type:Ti.required,message:z,ref:P,...V(Ti.required,z)},!r))return D(z),I}if(!Q&&(!va(g)||!va(N))){let R,z;const J=Mc(N),ue=Mc(g);if(!va(S)&&!isNaN(S)){const se=u.valueAsNumber||S&&+S;va(J.value)||(R=se>J.value),va(ue.value)||(z=se<ue.value)}else{const se=u.valueAsDate||new Date(S),fe=G=>new Date(new Date().toDateString()+" "+G),H=u.type=="time",re=u.type=="week";za(J.value)&&S&&(R=H?fe(S)>fe(J.value):re?S>J.value:se>new Date(J.value)),za(ue.value)&&S&&(z=H?fe(S)<fe(ue.value):re?S<ue.value:se<new Date(ue.value))}if((R||z)&&($(!!R,J.message,ue.message,Ti.max,Ti.min),!r))return D(I[C].message),I}if((v||x)&&!Q&&(za(S)||c&&Array.isArray(S))){const R=Mc(v),z=Mc(x),J=!va(R.value)&&S.length>+R.value,ue=!va(z.value)&&S.length<+z.value;if((J||ue)&&($(J,R.message,z.message),!r))return D(I[C].message),I}if(w&&!Q&&za(S)){const{value:R,message:z}=Mc(w);if(np(R)&&!S.match(R)&&(I[C]={type:Ti.pattern,message:z,ref:u,...V(Ti.pattern,z)},!r))return D(z),I}if(j){if(Ar(j)){const R=await j(S,n),z=rN(R,P);if(z&&(I[C]={...z,...V(Ti.validate,z.message)},!r))return D(z.message),I}else if(vn(j)){let R={};for(const z in j){if(!na(R)&&!r)break;const J=rN(await j[z](S,n),P,z);J&&(R={...J,...V(z,J.message)},D(J.message),r&&(I[C]=R))}if(!na(R)&&(I[C]={ref:P,...R},!r))return I}}return D(!0),I};const p8={mode:_r.onSubmit,reValidateMode:_r.onChange,shouldFocusError:!0};function f8(t={}){let s={...p8,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ar(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},o=vn(s.defaultValues)||vn(s.values)?Pn(s.defaultValues||s.values)||{}:{},c=s.shouldUnregister?{}:Pn(o),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,v=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...x};const N={array:Qj(),state:Qj()},w=s.criteriaMode===_r.all,j=te=>xe=>{clearTimeout(v),v=setTimeout(te,xe)},C=async te=>{if(!s.disabled&&(x.isValid||g.isValid||te)){const xe=s.resolver?na((await F()).errors):await Q(r,!0);xe!==n.isValid&&N.state.next({isValid:xe})}},k=(te,xe)=>{!s.disabled&&(x.isValidating||x.validatingFields||g.isValidating||g.validatingFields)&&((te||Array.from(h.mount)).forEach(pe=>{pe&&(xe?Hs(n.validatingFields,pe,xe):xn(n.validatingFields,pe))}),N.state.next({validatingFields:n.validatingFields,isValidating:!na(n.validatingFields)}))},E=(te,xe=[],pe,Ue,ce=!0,ve=!0)=>{if(Ue&&pe&&!s.disabled){if(u.action=!0,ve&&Array.isArray(xt(r,te))){const ze=pe(xt(r,te),Ue.argA,Ue.argB);ce&&Hs(r,te,ze)}if(ve&&Array.isArray(xt(n.errors,te))){const ze=pe(xt(n.errors,te),Ue.argA,Ue.argB);ce&&Hs(n.errors,te,ze),m8(n.errors,te)}if((x.touchedFields||g.touchedFields)&&ve&&Array.isArray(xt(n.touchedFields,te))){const ze=pe(xt(n.touchedFields,te),Ue.argA,Ue.argB);ce&&Hs(n.touchedFields,te,ze)}(x.dirtyFields||g.dirtyFields)&&(n.dirtyFields=Rc(o,c)),N.state.next({name:te,isDirty:$(te,xe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Hs(c,te,xe)},S=(te,xe)=>{Hs(n.errors,te,xe),N.state.next({errors:n.errors})},P=te=>{n.errors=te,N.state.next({errors:n.errors,isValid:!1})},D=(te,xe,pe,Ue)=>{const ce=xt(r,te);if(ce){const ve=xt(c,te,ln(pe)?xt(o,te):pe);ln(ve)||Ue&&Ue.defaultChecked||xe?Hs(c,te,xe?ve:eN(ce._f)):J(te,ve),u.mount&&!u.action&&C()}},I=(te,xe,pe,Ue,ce)=>{let ve=!1,ze=!1;const He={name:te};if(!s.disabled){if(!pe||Ue){(x.isDirty||g.isDirty)&&(ze=n.isDirty,n.isDirty=He.isDirty=$(),ve=ze!==He.isDirty);const pt=Eo(xt(o,te),xe);ze=!!xt(n.dirtyFields,te),pt?xn(n.dirtyFields,te):Hs(n.dirtyFields,te,!0),He.dirtyFields=n.dirtyFields,ve=ve||(x.dirtyFields||g.dirtyFields)&&ze!==!pt}if(pe){const pt=xt(n.touchedFields,te);pt||(Hs(n.touchedFields,te,pe),He.touchedFields=n.touchedFields,ve=ve||(x.touchedFields||g.touchedFields)&&pt!==pe)}ve&&ce&&N.state.next(He)}return ve?He:{}},O=(te,xe,pe,Ue)=>{const ce=xt(n.errors,te),ve=(x.isValid||g.isValid)&&Yr(xe)&&n.isValid!==xe;if(s.delayError&&pe?(f=j(()=>S(te,pe)),f(s.delayError)):(clearTimeout(v),f=null,pe?Hs(n.errors,te,pe):xn(n.errors,te)),(pe?!Eo(ce,pe):ce)||!na(Ue)||ve){const ze={...Ue,...ve&&Yr(xe)?{isValid:xe}:{},errors:n.errors,name:te};n={...n,...ze},N.state.next(ze)}},F=async te=>{k(te,!0);const xe=await s.resolver(c,s.context,i8(te||h.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return k(te),xe},X=async te=>{const{errors:xe}=await F(te);if(te)for(const pe of te){const Ue=xt(xe,pe);Ue?Hs(n.errors,pe,Ue):xn(n.errors,pe)}else n.errors=xe;return xe},Q=async(te,xe,pe={valid:!0})=>{for(const Ue in te){const ce=te[Ue];if(ce){const{_f:ve,...ze}=ce;if(ve){const He=h.array.has(ve.name),pt=ce._f&&o8(ce._f);pt&&x.validatingFields&&k([ve.name],!0);const me=await iN(ce,h.disabled,c,w,s.shouldUseNativeValidation&&!xe,He);if(pt&&x.validatingFields&&k([ve.name]),me[ve.name]&&(pe.valid=!1,xe))break;!xe&&(xt(me,ve.name)?He?h8(n.errors,me,ve.name):Hs(n.errors,ve.name,me[ve.name]):xn(n.errors,ve.name))}!na(ze)&&await Q(ze,xe,pe)}}return pe.valid},V=()=>{for(const te of h.unMount){const xe=xt(r,te);xe&&(xe._f.refs?xe._f.refs.every(pe=>!Yx(pe)):!Yx(xe._f.ref))&&Y(te)}h.unMount=new Set},$=(te,xe)=>!s.disabled&&(te&&xe&&Hs(c,te,xe),!Eo(G(),o)),R=(te,xe,pe)=>e8(te,h,{...u.mount?c:ln(xe)?o:za(te)?{[te]:xe}:xe},pe,xe),z=te=>fv(xt(u.mount?c:o,te,s.shouldUnregister?xt(o,te,[]):[])),J=(te,xe,pe={})=>{const Ue=xt(r,te);let ce=xe;if(Ue){const ve=Ue._f;ve&&(!ve.disabled&&Hs(c,te,LS(xe,ve)),ce=sp(ve.ref)&&va(xe)?"":xe,MS(ve.ref)?[...ve.ref.options].forEach(ze=>ze.selected=ce.includes(ze.value)):ve.refs?Hu(ve.ref)?ve.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(ce)?ze.checked=!!ce.find(He=>He===ze.value):ze.checked=ce===ze.value||!!ce)}):ve.refs.forEach(ze=>ze.checked=ze.value===ce):gv(ve.ref)?ve.ref.value="":(ve.ref.value=ce,ve.ref.type||N.state.next({name:te,values:Pn(c)})))}(pe.shouldDirty||pe.shouldTouch)&&I(te,ce,pe.shouldTouch,pe.shouldDirty,!0),pe.shouldValidate&&re(te)},ue=(te,xe,pe)=>{for(const Ue in xe){if(!xe.hasOwnProperty(Ue))return;const ce=xe[Ue],ve=te+"."+Ue,ze=xt(r,ve);(h.array.has(te)||vn(ce)||ze&&!ze._f)&&!_l(ce)?ue(ve,ce,pe):J(ve,ce,pe)}},se=(te,xe,pe={})=>{const Ue=xt(r,te),ce=h.array.has(te),ve=Pn(xe);Hs(c,te,ve),ce?(N.array.next({name:te,values:Pn(c)}),(x.isDirty||x.dirtyFields||g.isDirty||g.dirtyFields)&&pe.shouldDirty&&N.state.next({name:te,dirtyFields:Rc(o,c),isDirty:$(te,ve)})):Ue&&!Ue._f&&!va(ve)?ue(te,ve,pe):J(te,ve,pe),nN(te,h)&&N.state.next({...n,name:te}),N.state.next({name:u.mount?te:void 0,values:Pn(c)})},fe=async te=>{u.mount=!0;const xe=te.target;let pe=xe.name,Ue=!0;const ce=xt(r,pe),ve=pt=>{Ue=Number.isNaN(pt)||_l(pt)&&isNaN(pt.getTime())||Eo(pt,xt(c,pe,pt))},ze=tN(s.mode),He=tN(s.reValidateMode);if(ce){let pt,me;const Oe=xe.type?eN(ce._f):ZF(te),Ke=te.type===Kj.BLUR||te.type===Kj.FOCUS_OUT,lt=!l8(ce._f)&&!s.resolver&&!xt(n.errors,pe)&&!ce._f.deps||u8(Ke,xt(n.touchedFields,pe),n.isSubmitted,He,ze),Tt=nN(pe,h,Ke);Hs(c,pe,Oe),Ke?(!xe||!xe.readOnly)&&(ce._f.onBlur&&ce._f.onBlur(te),f&&f(0)):ce._f.onChange&&ce._f.onChange(te);const ps=I(pe,Oe,Ke),Ts=!na(ps)||Tt;if(!Ke&&N.state.next({name:pe,type:te.type,values:Pn(c)}),lt)return(x.isValid||g.isValid)&&(s.mode==="onBlur"?Ke&&C():Ke||C()),Ts&&N.state.next({name:pe,...Tt?{}:ps});if(!Ke&&Tt&&N.state.next({...n}),s.resolver){const{errors:ws}=await F([pe]);if(ve(Oe),Ue){const rs=aN(n.errors,r,pe),fs=aN(ws,r,rs.name||pe);pt=fs.error,pe=fs.name,me=na(ws)}}else k([pe],!0),pt=(await iN(ce,h.disabled,c,w,s.shouldUseNativeValidation))[pe],k([pe]),ve(Oe),Ue&&(pt?me=!1:(x.isValid||g.isValid)&&(me=await Q(r,!0)));Ue&&(ce._f.deps&&(!Array.isArray(ce._f.deps)||ce._f.deps.length>0)&&re(ce._f.deps),O(pe,me,pt,ps))}},H=(te,xe)=>{if(xt(n.errors,xe)&&te.focus)return te.focus(),1},re=async(te,xe={})=>{let pe,Ue;const ce=yu(te);if(s.resolver){const ve=await X(ln(te)?te:ce);pe=na(ve),Ue=te?!ce.some(ze=>xt(ve,ze)):pe}else te?(Ue=(await Promise.all(ce.map(async ve=>{const ze=xt(r,ve);return await Q(ze&&ze._f?{[ve]:ze}:ze)}))).every(Boolean),!(!Ue&&!n.isValid)&&C()):Ue=pe=await Q(r);return N.state.next({...!za(te)||(x.isValid||g.isValid)&&pe!==n.isValid?{}:{name:te},...s.resolver||!te?{isValid:pe}:{},errors:n.errors}),xe.shouldFocus&&!Ue&&bu(r,H,te?ce:h.mount),Ue},G=(te,xe)=>{let pe={...u.mount?c:o};return xe&&(pe=IS(xe.dirtyFields?n.dirtyFields:n.touchedFields,pe)),ln(te)?pe:za(te)?xt(pe,te):te.map(Ue=>xt(pe,Ue))},W=(te,xe)=>({invalid:!!xt((xe||n).errors,te),isDirty:!!xt((xe||n).dirtyFields,te),error:xt((xe||n).errors,te),isValidating:!!xt(n.validatingFields,te),isTouched:!!xt((xe||n).touchedFields,te)}),ne=te=>{te&&yu(te).forEach(xe=>xn(n.errors,xe)),N.state.next({errors:te?n.errors:{}})},K=(te,xe,pe)=>{const Ue=(xt(r,te,{_f:{}})._f||{}).ref,ce=xt(n.errors,te)||{},{ref:ve,message:ze,type:He,...pt}=ce;Hs(n.errors,te,{...pt,...xe,ref:Ue}),N.state.next({name:te,errors:n.errors,isValid:!1}),pe&&pe.shouldFocus&&Ue&&Ue.focus&&Ue.focus()},ee=(te,xe)=>Ar(te)?N.state.subscribe({next:pe=>"values"in pe&&te(R(void 0,xe),pe)}):R(te,xe,!0),U=te=>N.state.subscribe({next:xe=>{d8(te.name,xe.name,te.exact)&&c8(xe,te.formState||x,mt,te.reRenderRoot)&&te.callback({values:{...c},...n,...xe,defaultValues:o})}}).unsubscribe,le=te=>(u.mount=!0,g={...g,...te.formState},U({...te,formState:g})),Y=(te,xe={})=>{for(const pe of te?yu(te):h.mount)h.mount.delete(pe),h.array.delete(pe),xe.keepValue||(xn(r,pe),xn(c,pe)),!xe.keepError&&xn(n.errors,pe),!xe.keepDirty&&xn(n.dirtyFields,pe),!xe.keepTouched&&xn(n.touchedFields,pe),!xe.keepIsValidating&&xn(n.validatingFields,pe),!s.shouldUnregister&&!xe.keepDefaultValue&&xn(o,pe);N.state.next({values:Pn(c)}),N.state.next({...n,...xe.keepDirty?{isDirty:$()}:{}}),!xe.keepIsValid&&C()},ae=({disabled:te,name:xe})=>{(Yr(te)&&u.mount||te||h.disabled.has(xe))&&(te?h.disabled.add(xe):h.disabled.delete(xe))},Ie=(te,xe={})=>{let pe=xt(r,te);const Ue=Yr(xe.disabled)||Yr(s.disabled);return Hs(r,te,{...pe||{},_f:{...pe&&pe._f?pe._f:{ref:{name:te}},name:te,mount:!0,...xe}}),h.mount.add(te),pe?ae({disabled:Yr(xe.disabled)?xe.disabled:s.disabled,name:te}):D(te,!0,xe.value),{...Ue?{disabled:xe.disabled||s.disabled}:{},...s.progressive?{required:!!xe.required,min:lu(xe.min),max:lu(xe.max),minLength:lu(xe.minLength),maxLength:lu(xe.maxLength),pattern:lu(xe.pattern)}:{},name:te,onChange:fe,onBlur:fe,ref:ce=>{if(ce){Ie(te,xe),pe=xt(r,te);const ve=ln(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,ze=s8(ve),He=pe._f.refs||[];if(ze?He.find(pt=>pt===ve):ve===pe._f.ref)return;Hs(r,te,{_f:{...pe._f,...ze?{refs:[...He.filter(Yx),ve,...Array.isArray(xt(o,te))?[{}]:[]],ref:{type:ve.type,name:te}}:{ref:ve}}}),D(te,!1,void 0,ve)}else pe=xt(r,te,{}),pe._f&&(pe._f.mount=!1),(s.shouldUnregister||xe.shouldUnregister)&&!(KF(h.array,te)&&u.action)&&h.unMount.add(te)}}},$e=()=>s.shouldFocusError&&bu(r,H,h.mount),Ge=te=>{Yr(te)&&(N.state.next({disabled:te}),bu(r,(xe,pe)=>{const Ue=xt(r,pe);Ue&&(xe.disabled=Ue._f.disabled||te,Array.isArray(Ue._f.refs)&&Ue._f.refs.forEach(ce=>{ce.disabled=Ue._f.disabled||te}))},0,!1))},Xe=(te,xe)=>async pe=>{let Ue;pe&&(pe.preventDefault&&pe.preventDefault(),pe.persist&&pe.persist());let ce=Pn(c);if(N.state.next({isSubmitting:!0}),s.resolver){const{errors:ve,values:ze}=await F();n.errors=ve,ce=Pn(ze)}else await Q(r);if(h.disabled.size)for(const ve of h.disabled)xn(ce,ve);if(xn(n.errors,"root"),na(n.errors)){N.state.next({errors:{}});try{await te(ce,pe)}catch(ve){Ue=ve}}else xe&&await xe({...n.errors},pe),$e(),setTimeout($e);if(N.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:na(n.errors)&&!Ue,submitCount:n.submitCount+1,errors:n.errors}),Ue)throw Ue},Je=(te,xe={})=>{xt(r,te)&&(ln(xe.defaultValue)?se(te,Pn(xt(o,te))):(se(te,xe.defaultValue),Hs(o,te,Pn(xe.defaultValue))),xe.keepTouched||xn(n.touchedFields,te),xe.keepDirty||(xn(n.dirtyFields,te),n.isDirty=xe.defaultValue?$(te,Pn(xt(o,te))):$()),xe.keepError||(xn(n.errors,te),x.isValid&&C()),N.state.next({...n}))},tt=(te,xe={})=>{const pe=te?Pn(te):o,Ue=Pn(pe),ce=na(te),ve=ce?o:Ue;if(xe.keepDefaultValues||(o=pe),!xe.keepValues){if(xe.keepDirtyValues){const ze=new Set([...h.mount,...Object.keys(Rc(o,c))]);for(const He of Array.from(ze))xt(n.dirtyFields,He)?Hs(ve,He,xt(c,He)):se(He,xt(ve,He))}else{if(pv&&ln(te))for(const ze of h.mount){const He=xt(r,ze);if(He&&He._f){const pt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(sp(pt)){const me=pt.closest("form");if(me){me.reset();break}}}}if(xe.keepFieldsRef)for(const ze of h.mount)se(ze,xt(ve,ze));else r={}}c=s.shouldUnregister?xe.keepDefaultValues?Pn(o):{}:Pn(ve),N.array.next({values:{...ve}}),N.state.next({values:{...ve}})}h={mount:xe.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!x.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues||!s.shouldUnregister&&!na(ve),u.watch=!!s.shouldUnregister,u.action=!1,xe.keepErrors||(n.errors={}),N.state.next({submitCount:xe.keepSubmitCount?n.submitCount:0,isDirty:ce?!1:xe.keepDirty?n.isDirty:!!(xe.keepDefaultValues&&!Eo(te,o)),isSubmitted:xe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ce?{}:xe.keepDirtyValues?xe.keepDefaultValues&&c?Rc(o,c):n.dirtyFields:xe.keepDefaultValues&&te?Rc(o,te):xe.keepDirty?n.dirtyFields:{},touchedFields:xe.keepTouched?n.touchedFields:{},errors:xe.keepErrors?n.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},ut=(te,xe)=>tt(Ar(te)?te(c):te,xe),wt=(te,xe={})=>{const pe=xt(r,te),Ue=pe&&pe._f;if(Ue){const ce=Ue.refs?Ue.refs[0]:Ue.ref;ce.focus&&(ce.focus(),xe.shouldSelect&&Ar(ce.select)&&ce.select())}},mt=te=>{n={...n,...te}},zt={control:{register:Ie,unregister:Y,getFieldState:W,handleSubmit:Xe,setError:K,_subscribe:U,_runSchema:F,_focusError:$e,_getWatch:R,_getDirty:$,_setValid:C,_setFieldArray:E,_setDisabledField:ae,_setErrors:P,_getFieldArray:z,_reset:tt,_resetDefaultValues:()=>Ar(s.defaultValues)&&s.defaultValues().then(te=>{ut(te,s.resetOptions),N.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:Ge,_subjects:N,_proxyFormState:x,get _fields(){return r},get _formValues(){return c},get _state(){return u},set _state(te){u=te},get _defaultValues(){return o},get _names(){return h},set _names(te){h=te},get _formState(){return n},get _options(){return s},set _options(te){s={...s,...te}}},subscribe:le,trigger:re,register:Ie,handleSubmit:Xe,watch:ee,setValue:se,getValues:G,reset:ut,resetField:Je,clearErrors:ne,unregister:Y,setError:K,setFocus:wt,getFieldState:W};return{...zt,formControl:zt}}function x8(t={}){const s=Be.useRef(void 0),n=Be.useRef(void 0),[r,o]=Be.useState({isDirty:!1,isValidating:!1,isLoading:Ar(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ar(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!Ar(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=f8(t);s.current={...h,formState:r}}const c=s.current.control;return c._options=t,JF(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>o({...c._formState}),reRenderRoot:!0});return o(h=>({...h,isReady:!0})),c._formState.isReady=!0,u},[c]),Be.useEffect(()=>c._disableForm(t.disabled),[c,t.disabled]),Be.useEffect(()=>{t.mode&&(c._options.mode=t.mode),t.reValidateMode&&(c._options.reValidateMode=t.reValidateMode)},[c,t.mode,t.reValidateMode]),Be.useEffect(()=>{t.errors&&(c._setErrors(t.errors),c._focusError())},[c,t.errors]),Be.useEffect(()=>{t.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,t.shouldUnregister]),Be.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==r.isDirty&&c._subjects.state.next({isDirty:u})}},[c,r.isDirty]),Be.useEffect(()=>{var u;t.values&&!Eo(t.values,n.current)?(c._reset(t.values,{keepFieldsRef:!0,...c._options.resetOptions}),!((u=c._options.resetOptions)===null||u===void 0)&&u.keepIsValid||c._setValid(),n.current=t.values,o(h=>({...h}))):c._resetDefaultValues()},[c,t.values]),Be.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),s.current.formState=YF(r,c),s.current}let To=null,Nl=null;function oN(){return To?Promise.resolve(To):Nl||(Nl=Te.get("/clients/owners").then(t=>(To=t.data??[],To)).then(t=>(Nl=null,t),t=>{throw Nl=null,t}),Nl)}function qu(){const[t,s]=m.useState(To??[]),[n,r]=m.useState(!To),[o,c]=m.useState(null),u=async()=>{try{r(!0),c(null),To=null,Nl=null;const f=await oN();return s(f),f}catch(f){return c(f),[]}finally{r(!1)}};m.useEffect(()=>{let f=!1;return(async()=>{try{r(!To),c(null);const v=await oN();f||s(v)}catch(v){f||c(v)}finally{f||r(!1)}})(),()=>{f=!0}},[]);const h=m.useMemo(()=>{const f=new Map;for(const v of t)f.set(v.id,v);return f},[t]);return{owners:t,ownersById:h,loading:n,error:o,refetch:u}}function g8({open:t,onOpenChange:s,client:n,onSave:r}){const{owners:o,loading:c}=qu(),u=m.useMemo(()=>({status:Kt.LEAD,contactName:"",email:"",phone:"",role:"",companyName:"",cnpj:"",origin:"",ownerUserId:void 0,addressZipcode:"",addressStreet:"",addressNumber:"",addressDistrict:"",addressCity:"",addressState:"",addressCountry:"Brasil",notes:""}),[]),h=x8({defaultValues:n||u});m.useEffect(()=>{n?h.reset(n):h.reset(u)},[n,h,u]);const f=(N,w)=>{h.setValue(N,w,{shouldDirty:!0})},v=N=>{if(N==null)return;if(typeof N!="string")return String(N);const w=N.trim();return w.length?w:void 0},x=N=>{const w=v(N.contactName??N.name);if(!w)throw new Error("Informe o Nome do Contato.");const j={contactName:w,name:w,status:N.status??Kt.LEAD,email:v(N.email),phone:v(N.phone),role:v(N.role),companyName:v(N.companyName),cnpj:v(N.cnpj),origin:v(N.origin),notes:v(N.notes),addressZipcode:v(N.addressZipcode),addressStreet:v(N.addressStreet),addressNumber:v(N.addressNumber),addressDistrict:v(N.addressDistrict),addressCity:v(N.addressCity),addressState:v(N.addressState),addressCountry:v(N.addressCountry)??"Brasil",ownerUserId:v(N.ownerUserId)};return Object.keys(j).forEach(C=>j[C]===void 0&&delete j[C]),j},g=async N=>{try{const w=x(N);let j;n?.id?(j=(await Te.put(`/clients/${n.id}`,w)).data,ye.success("Cliente atualizado!")):(j=(await Te.post("/clients",w)).data,ye.success("Cliente criado!")),r(j),s(!1)}catch(w){const j=w?.response?.data?.message,C=Array.isArray(j)?j.join(", "):j||w?.message||"Erro ao salvar cliente";ye.error(C),console.error("Erro ao salvar cliente:",w?.response?.data||w)}};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:n?"Editar Cliente":"Novo Cliente"}),e.jsx(kr,{children:n?"Atualize as informaes do cliente":"Adicione um novo cliente"})]}),e.jsxs("form",{onSubmit:h.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Informaes de Contato"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"contactName",children:"Nome do Contato *"}),e.jsx(Ne,{id:"contactName",...h.register("contactName",{required:!0}),placeholder:"Joo Silva",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"email",children:"Email"}),e.jsx(Ne,{id:"email",type:"email",...h.register("email"),placeholder:"joao@empresa.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"phone",children:"Telefone"}),e.jsx(Ne,{id:"phone",...h.register("phone"),placeholder:"(11) 98765-4321"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"role",children:"Cargo"}),e.jsx(Ne,{id:"role",...h.register("role"),placeholder:"Gerente de Marketing"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Informaes da Empresa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyName",children:"Nome da Empresa"}),e.jsx(Ne,{id:"companyName",...h.register("companyName"),placeholder:"Empresa Ltda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(Ne,{id:"cnpj",...h.register("cnpj"),placeholder:"00.000.000/0000-00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Status e Gesto"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"status",children:"Status *"}),e.jsxs(_t,{value:h.watch("status")||Kt.LEAD,onValueChange:N=>f("status",N),children:[e.jsx(Pt,{id:"status",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:Kt.LEAD,children:"Lead"}),e.jsx(De,{value:Kt.PROSPECT,children:"Prospect"}),e.jsx(De,{value:Kt.CLIENTE,children:"Cliente"}),e.jsx(De,{value:Kt.INATIVO,children:"Inativo"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"origin",children:"Origem"}),e.jsx(Ne,{id:"origin",...h.register("origin"),placeholder:"Indicao, Website..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"ownerUserId",children:"Responsvel Interno"}),e.jsxs(_t,{value:h.watch("ownerUserId")||"none",onValueChange:N=>f("ownerUserId",N==="none"?void 0:N),children:[e.jsx(Pt,{id:"ownerUserId",children:e.jsx(At,{placeholder:c?"Carregando...":"Selecione um responsvel"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"none",children:"Nenhum"}),o.map(N=>e.jsx(De,{value:N.id,children:N.name},N.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressZipcode",children:"CEP"}),e.jsx(Ne,{id:"addressZipcode",...h.register("addressZipcode"),placeholder:"01310-100"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"addressStreet",children:"Rua"}),e.jsx(Ne,{id:"addressStreet",...h.register("addressStreet"),placeholder:"Av. Paulista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressNumber",children:"Nmero"}),e.jsx(Ne,{id:"addressNumber",...h.register("addressNumber"),placeholder:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressDistrict",children:"Bairro"}),e.jsx(Ne,{id:"addressDistrict",...h.register("addressDistrict"),placeholder:"Bela Vista"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressCity",children:"Cidade"}),e.jsx(Ne,{id:"addressCity",...h.register("addressCity"),placeholder:"So Paulo"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"addressState",children:"Estado"}),e.jsxs(_t,{value:h.watch("addressState")||"",onValueChange:N=>f("addressState",N),children:[e.jsx(Pt,{id:"addressState",children:e.jsx(At,{placeholder:"UF"})}),e.jsx(Et,{children:xS.map(N=>e.jsx(De,{value:N,children:N},N))})]})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"addressCountry",children:"Pas"}),e.jsx(Ne,{id:"addressCountry",...h.register("addressCountry"),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"notes",children:"Observaes Internas"}),e.jsx(Va,{id:"notes",...h.register("notes"),placeholder:"Anotaes internas...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(Z,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:h.formState.isSubmitting,children:"Cancelar"}),e.jsx(Z,{type:"submit",disabled:h.formState.isSubmitting,children:h.formState.isSubmitting?"Salvando...":n?"Atualizar Cliente":"Salvar Cliente"})]})]})]})})}function Co(t){return{...t,totalAmount:typeof t.totalAmount=="string"?Number(t.totalAmount):t.totalAmount,discountAmount:typeof t.discountAmount=="string"?Number(t.discountAmount):t.discountAmount,discountPercent:typeof t.discountPercent=="string"?Number(t.discountPercent):t.discountPercent,startDate:t.startDate?new Date(t.startDate):void 0,endDate:t.endDate?new Date(t.endDate):void 0,validUntil:t.validUntil?new Date(t.validUntil):void 0,approvedAt:t.approvedAt?new Date(t.approvedAt):void 0,rejectedAt:t.rejectedAt?new Date(t.rejectedAt):void 0,createdAt:t.createdAt?new Date(t.createdAt):void 0,updatedAt:t.updatedAt?new Date(t.updatedAt):void 0,conditionsText:typeof t.conditionsText=="string"?t.conditionsText.replace(/\\n/g,`
`):t.conditionsText,items:Array.isArray(t.items)?t.items.map(s=>({...s,discountApplyTo:s.discountApplyTo??qs.TOTAL,unitPrice:typeof s.unitPrice=="string"?Number(s.unitPrice):s.unitPrice,totalPrice:typeof s.totalPrice=="string"?Number(s.totalPrice):s.totalPrice,discountAmount:typeof s.discountAmount=="string"?Number(s.discountAmount):s.discountAmount,discountPercent:typeof s.discountPercent=="string"?Number(s.discountPercent):s.discountPercent,startDate:s.startDate?new Date(s.startDate):void 0,endDate:s.endDate?new Date(s.endDate):void 0,createdAt:s.createdAt?new Date(s.createdAt):void 0,updatedAt:s.updatedAt?new Date(s.updatedAt):void 0})):t.items}}function $S(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(t.page??1),[h,f]=m.useState(t.pageSize??40),[v,x]=m.useState(1),[g,N]=m.useState(null),[w,j]=m.useState(!1),[C,k]=m.useState(null),E=m.useRef(null),S=m.useMemo(()=>{const $={...t};return $.status==="all"&&delete $.status,Array.isArray($.status)&&$.status.length===0&&delete $.status,typeof $.search=="string"&&!$.search.trim()&&delete $.search,$},[t]),P=async()=>{try{j(!0),k(null);const R=(await Te.get("/proposals",{params:S})).data,z=Array.isArray(R)?R:R.data,J=Array.isArray(R)?z.length:R.total??z.length;if(n(z.map(Co)),o(J),Array.isArray(R))u(t.page??1),f(t.pageSize??z.length),x(1),N(null);else{const ue=R.pageSize??t.pageSize??40,se=R.totalPages??Math.max(1,Math.ceil(J/ue));u(R.page??t.page??1),f(ue),x(se),N(R.stats??null)}}catch($){k($)}finally{j(!1)}};m.useEffect(()=>{E.current=()=>{P()}},[S.search,S.status,S.clientId,S.responsibleUserId,S.createdFrom,S.createdTo,S.orderBy,S.sortOrder,S.page,S.pageSize]),m.useEffect(()=>{let $=0;const R=()=>{if(typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible")return;const z=Date.now();z-$<800||($=z,E.current?.())};return window.addEventListener("focus",R),document.addEventListener("visibilitychange",R),()=>{window.removeEventListener("focus",R),document.removeEventListener("visibilitychange",R)}},[]),m.useEffect(()=>{const $=window.setInterval(()=>{typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible"||E.current?.()},15e3);return()=>window.clearInterval($)},[]);const D=async $=>{const R=await Te.get(`/proposals/${$}`);return Co(R.data)},I=async $=>{try{const R=await Te.post("/proposals",$);if(!R.data||typeof R.data!="object")throw new Error("Resposta invlida do servidor (Proxy Error)");const z=Co(R.data);return n(J=>[z,...J]),z}catch(R){throw console.error("Erro ao criar proposta:",R),R}},O=async($,R)=>{try{const z=await Te.put(`/proposals/${$}`,R);if(!z.data||typeof z.data!="object")throw new Error("Resposta invlida do servidor");const J=Co(z.data);return n(ue=>ue.map(se=>se.id===$?J:se)),J}catch(z){throw console.error("Erro ao atualizar proposta:",z),z}},F=async($,R)=>{const z=await Te.patch(`/proposals/${$}/status`,{status:R}),J=Co(z.data);return n(ue=>ue.map(se=>se.id===$?J:se)),J},X=async $=>{const R=await Te.post(`/proposals/${$}/duplicate`);return n(z=>[Co(R.data),...z]),Co(R.data)},Q=async $=>{const R=await Te.post(`/proposals/${$}/approve`),z=Co(R.data);return n(J=>J.map(ue=>ue.id===$?z:ue)),z},V=async $=>(await Te.get(`/proposals/${$}/pdf`)).data;return m.useEffect(()=>{P()},[S.search,S.status,S.clientId,S.responsibleUserId,S.createdFrom,S.createdTo,S.orderBy,S.sortOrder,S.page,S.pageSize]),{proposals:s,total:r,page:c,pageSize:h,totalPages:v,stats:g??void 0,loading:w,error:C,refetch:P,getProposalById:D,createProposal:I,updateProposal:O,updateProposalStatus:F,duplicateProposal:X,approveProposal:Q,getProposalPdf:V}}function yv({status:t}){const s=r=>{switch(r){case as.APROVADA:return"bg-green-100 text-green-800";case as.ENVIADA:return"bg-blue-100 text-blue-800";case as.RASCUNHO:return"bg-gray-100 text-gray-800";case as.REPROVADA:return"bg-red-100 text-red-800";case as.EXPIRADA:return"bg-orange-100 text-orange-800"}},n=r=>{switch(r){case as.APROVADA:return"Aprovada";case as.ENVIADA:return"Enviada";case as.RASCUNHO:return"Rascunho";case as.REPROVADA:return"Reprovada";case as.EXPIRADA:return"Expirada"}};return e.jsx(st,{className:s(t),children:n(t)})}function v8({clientId:t,onDocumentAdded:s}){const[n,r]=m.useState([]),[o,c]=m.useState(!1),[u,h]=m.useState(!1),[f,v]=m.useState({documentType:"",file:null}),{ownersById:x}=qu(),g=m.useMemo(()=>P=>P?x.get(P)?.name||P:"",[x]),N=async()=>{try{c(!0);const P=await Te.get(`/clients/${t}/documents`);r(P.data??[])}catch{ye.error("Erro ao carregar documentos do cliente"),r([])}finally{c(!1)}};m.useEffect(()=>{N()},[t]);const w=P=>{v(D=>({...D,file:P}))},j=async()=>{try{if(!f.file){ye.error("Selecione um arquivo para upload");return}const P=new FormData;P.append("file",f.file),P.append("documentType",(f.documentType||"OUTRO").toString());const I=(await Te.post(`/clients/${t}/documents`,P,{headers:{"Content-Type":"multipart/form-data"}})).data;ye.success("Documento enviado!"),h(!1),v({documentType:"",file:null}),I?(r(O=>[I,...O]),s?.(I)):await N()}catch(P){const D=P?.response?.data?.message||"Erro ao enviar documento";ye.error(D)}},C=(P,D)=>{const I=window.URL.createObjectURL(P),O=document.createElement("a");O.href=I,O.download=D||"documento",document.body.appendChild(O),O.click(),O.remove(),window.URL.revokeObjectURL(I)},k=async P=>{try{const D=await Te.get(`/clients/${t}/documents/${P.id}/download`,{responseType:"blob"});C(D.data,P.fileName)}catch{ye.error("Erro ao baixar documento")}},E=async P=>{try{const D=await Te.get(`/clients/${t}/documents/${P.id}/download`,{responseType:"blob"}),I=window.URL.createObjectURL(D.data);window.open(I,"_blank","noopener,noreferrer"),setTimeout(()=>window.URL.revokeObjectURL(I),6e4)}catch{ye.error("Erro ao visualizar documento")}},S=P=>{const D=new Date(P);return isNaN(D.getTime())?"":D.toLocaleDateString("pt-BR")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:"Documentos"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Gerencie contratos, propostas e outros documentos"})]}),e.jsxs(Z,{onClick:()=>h(!0),children:[e.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Upload Documento"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"text-gray-900",children:"Documentos Anexados"})}),o?e.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Carregando documentos..."}):n.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhum documento anexado"}),e.jsx("p",{className:"text-sm mt-1",children:"Faa upload de documentos relacionados a este cliente"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Arquivo"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Upload por"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nn,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:P.fileName})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:P.documentType}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:g(P.uploadedByUserId)}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:S(P.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>E(P),title:"Visualizar",children:e.jsx(Tr,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>k(P),title:"Baixar",children:e.jsx(Pl,{className:"w-4 h-4"})})]})})]},P.id))})]})})]}),e.jsx(Ps,{open:u,onOpenChange:h,children:e.jsxs(Es,{className:"sm:max-w-md",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:"Upload de Documento"}),e.jsx(kr,{children:"Adicione um documento relacionado a este cliente"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"documentType",children:"Tipo de Documento"}),e.jsx(Ne,{id:"documentType",value:f.documentType,onChange:P=>v(D=>({...D,documentType:P.target.value})),placeholder:"Ex: Contrato, Proposta, CNPJ, etc"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"file",children:"Arquivo"}),e.jsx(Ne,{id:"file",type:"file",onChange:P=>w(P.target.files?.[0]||null),accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Formatos aceitos: PDF, DOC, DOCX, XLS, XLSX, PNG, JPG"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(Z,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(Z,{onClick:j,children:"Enviar"})]})]})]})})]})}function y8(t){return t.client?e.jsx(b8,{...t,client:t.client}):null}function b8({open:t,onOpenChange:s,client:n,activeTab:r="resumo",onActiveTabChange:o}){const{ownersById:c}=qu(),u=n.ownerUserId?c.get(n.ownerUserId):null,{proposals:h,loading:f,error:v,refetch:x}=$S({clientId:n.id,pageSize:50}),g=k=>{switch(k){case Kt.CLIENTE:return"bg-green-100 text-green-800";case Kt.PROSPECT:return"bg-blue-100 text-blue-800";case Kt.LEAD:return"bg-yellow-100 text-yellow-800";case Kt.INATIVO:return"bg-gray-100 text-gray-800"}},N=k=>{switch(k){case Kt.CLIENTE:return"Cliente";case Kt.PROSPECT:return"Prospect";case Kt.LEAD:return"Lead";case Kt.INATIVO:return"Inativo"}},w=k=>{if(!k)return"-";const E=typeof k=="string"?new Date(k):k;return Number.isNaN(E.getTime())?"-":E.toLocaleDateString("pt-BR")},j=k=>{const E=typeof k=="number"?k:Number(k);return Number.isNaN(E)?"-":E.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},C=h.filter(k=>k.status===as.APROVADA).length;return e.jsx(cv,{open:t,onOpenChange:s,children:e.jsxs(dv,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsx(uv,{children:e.jsx(mv,{children:"Detalhes do Cliente"})}),e.jsxs(zi,{value:r,onValueChange:k=>o?.(k),className:"mt-6",children:[e.jsxs(Bi,{className:"grid w-full grid-cols-4",children:[e.jsx(cs,{value:"resumo",children:"Resumo"}),e.jsx(cs,{value:"documentos",children:"Documentos"}),e.jsx(cs,{value:"propostas",children:"Propostas"}),e.jsx(cs,{value:"atividades",children:"Atividades"})]}),e.jsxs(As,{value:"resumo",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-2xl",children:n.contactName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-1",children:n.contactName}),n.role&&e.jsx("p",{className:"text-gray-600 text-sm",children:n.role}),n.companyName&&e.jsx("p",{className:"text-gray-900 text-sm mt-1",children:n.companyName})]})]}),e.jsx(st,{className:g(n.status),children:N(n.status)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Informaes de Contato"}),n.email&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Ro,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:n.email})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(u4,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:n.phone})]}),n.cnpj&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(ed,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["CNPJ: ",n.cnpj]})]})]}),(n.addressStreet||n.addressCity||n.addressState)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Endereo"}),e.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[e.jsx(ra,{className:"w-4 h-4 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[n.addressStreet&&n.addressNumber&&e.jsxs("div",{children:[n.addressStreet,", ",n.addressNumber]}),n.addressDistrict&&e.jsx("div",{children:n.addressDistrict}),n.addressCity&&n.addressState&&e.jsxs("div",{children:[n.addressCity," - ",n.addressState]}),n.addressZipcode&&e.jsxs("div",{children:["CEP: ",n.addressZipcode]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Gesto e Origem"}),u&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Q4,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Responsvel: "}),e.jsx("span",{children:u.name})]})]}),n.origin&&e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(nn,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Origem: "}),e.jsx("span",{children:n.origin})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(ju,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Cliente desde: "}),e.jsx("span",{children:w(n.createdAt)})]})]})]}),n.notes&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Observaes Internas"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:n.notes})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-indigo-600 text-sm mb-1",children:"Propostas"}),e.jsx("p",{className:"text-gray-900",children:f?"...":h.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Propostas Aprovadas"}),e.jsx("p",{className:"text-gray-900",children:f?"...":C})]})]})]}),e.jsx(As,{value:"documentos",className:"mt-6",children:e.jsx(v8,{clientId:n.id})}),e.jsx(As,{value:"propostas",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Propostas do Cliente"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>x(),disabled:f,children:"Recarregar"})]}),v&&e.jsx("div",{className:"border border-red-200 bg-red-50 text-red-700 rounded-lg p-4 text-sm",children:"Erro ao carregar propostas."}),f?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Carregando propostas..."})}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhuma proposta cadastrada"})]}):e.jsx("div",{className:"space-y-3",children:h.map(k=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:k.title||`Proposta ${k.id.slice(0,6)}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Criada em ",w(k.createdAt)]})]}),e.jsx(yv,{status:k.status})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",j(k.totalAmount)]})]},k.id))})]})}),e.jsx(As,{value:"atividades",className:"mt-6",children:e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ju,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"mb-2",children:"Atividades e Histrico"}),e.jsx("p",{className:"text-sm",children:"TODO: Implementar integrao com ActivityLog"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Logs de aes realizadas neste cliente (edies, propostas criadas, etc.)"})]})})]})]})})}function j8({clients:t,onViewDetails:s,onEditClient:n,onViewClientDocuments:r,onDeleteClient:o,page:c,pageSize:u,total:h,onPageChange:f}){const{ownersById:v}=qu(),x=w=>{switch(w){case Kt.CLIENTE:return"bg-green-100 text-green-800";case Kt.PROSPECT:return"bg-blue-100 text-blue-800";case Kt.LEAD:return"bg-yellow-100 text-yellow-800";case Kt.INATIVO:return"bg-gray-100 text-gray-800"}},g=w=>{switch(w){case Kt.CLIENTE:return"Cliente";case Kt.PROSPECT:return"Prospect";case Kt.LEAD:return"Lead";case Kt.INATIVO:return"Inativo"}},N=h&&u?Math.max(1,Math.ceil(h/u)):1;return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Empresa"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Email/Telefone"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Responsvel"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Origem"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Propostas"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(w=>{const j=w.ownerUserId?v.get(w.ownerUserId):null,C=w.proposalsCount??0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center",children:w.contactName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900",children:w.contactName}),w.role&&e.jsx("p",{className:"text-gray-500 text-xs",children:w.role})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[w.companyName&&e.jsx("p",{className:"text-gray-900",children:w.companyName}),w.cnpj&&e.jsx("p",{className:"text-gray-500 text-xs",children:w.cnpj}),!w.companyName&&!w.cnpj&&e.jsx("span",{className:"text-gray-400",children:""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[w.email&&e.jsx("div",{className:"text-gray-900",children:w.email}),w.phone&&e.jsx("div",{className:"text-gray-500",children:w.phone}),!w.email&&!w.phone&&e.jsx("span",{className:"text-gray-400",children:""})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(st,{className:x(w.status),children:g(w.status)})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j?.name||""}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:w.origin||""}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:C}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>s(w),title:"Ver detalhes",children:e.jsx(Tr,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>n(w),title:"Editar cliente",children:e.jsx(zl,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>r(w),title:"Ver documentos",children:e.jsx(nn,{className:"w-4 h-4"})}),o&&e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>o(w.id),title:"Excluir cliente",children:e.jsx(Ba,{className:"w-4 h-4"})})]})})]},w.id)})})]}),t.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"Nenhum cliente encontrado"})}),h!==void 0&&c!==void 0&&u!==void 0&&f&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 text-sm text-gray-600 border-t border-gray-200",children:[e.jsxs("span",{children:["Pgina ",c," de ",N]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",disabled:c<=1,onClick:()=>f(c-1),children:"Anterior"}),e.jsx(Z,{variant:"outline",size:"sm",disabled:c>=N,onClick:()=>f(c+1),children:"Prxima"})]})]})]})}function N8({searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:r,ownerFilter:o,onOwnerChange:c}){const{owners:u}=qu();return e.jsx(Re,{children:e.jsx(Le,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ne,{value:t,onChange:h=>s(h.target.value),placeholder:"Buscar clientes...",className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:r,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Status"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos os status"}),e.jsx(De,{value:Kt.LEAD,children:"Lead"}),e.jsx(De,{value:Kt.PROSPECT,children:"Prospect"}),e.jsx(De,{value:Kt.CLIENTE,children:"Cliente"}),e.jsx(De,{value:Kt.INATIVO,children:"Inativo"})]})]}),e.jsxs(_t,{value:o,onValueChange:c,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Responsvel"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos os responsveis"}),u.map(h=>e.jsx(De,{value:h.id,children:h.name},h.id))]})]})]})})})}function w8(){const[t,s]=m.useState(""),[n,r]=m.useState("all"),[o,c]=m.useState("all"),[u,h]=m.useState(1),f=40;m.useEffect(()=>{h(1)},[t,n,o]);const{clients:v,total:x,loading:g,error:N,refetch:w}=WF({search:t||void 0,status:n==="all"?void 0:n,ownerUserId:o==="all"?void 0:o,page:u,pageSize:f}),[j,C]=m.useState(!1),[k,E]=m.useState(null),[S,P]=m.useState(null),[D,I]=m.useState("resumo"),O={total:x||v.length,ativos:v.filter(z=>z.status===Kt.CLIENTE).length,prospects:v.filter(z=>z.status===Kt.PROSPECT).length,leads:v.filter(z=>z.status===Kt.LEAD).length},F=()=>{w(),C(!1),E(null)},X=async z=>{if(confirm("Deseja realmente excluir este cliente?"))try{await Te.delete(`/clients/${z}`),ye.success("Cliente excludo!"),w()}catch{ye.error("Erro ao excluir cliente")}},Q=()=>{E(null),C(!0)},V=z=>{E(z),C(!0)},$=z=>{P(z),I("resumo")},R=z=>{P(z),I("documentos")};return e.jsxs("div",{className:"p-8",children:[g&&e.jsx("div",{children:"Carregando clientes..."}),!g&&N&&e.jsx("div",{children:"Erro ao carregar clientes."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Clientes"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie clientes e anunciantes (Client)"})]}),e.jsxs(Z,{className:"gap-2",onClick:Q,children:[e.jsx(kn,{className:"w-4 h-4"}),"Novo Cliente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total de Clientes"}),e.jsx("p",{className:"text-gray-900",children:O.total})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(Kt.CLIENTE),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Clientes Ativos"}),e.jsx("p",{className:"text-gray-900",children:O.ativos})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(Kt.PROSPECT),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Prospects"}),e.jsx("p",{className:"text-gray-900",children:O.prospects})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(Kt.LEAD),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Leads"}),e.jsx("p",{className:"text-gray-900",children:O.leads})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx(N8,{searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:r,ownerFilter:o,onOwnerChange:c})}),(t||n!=="all"||o!=="all")&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[v.length," ",v.length===1?"cliente encontrado":"clientes encontrados"]})}),e.jsx(Re,{children:e.jsx(j8,{clients:v,onViewDetails:$,onEditClient:V,onViewClientDocuments:R,onDeleteClient:X,page:u,pageSize:f,total:x,onPageChange:h})}),e.jsx(g8,{open:j,onOpenChange:z=>{C(z),z||E(null)},client:k,onSave:F}),e.jsx(y8,{open:!!S,onOpenChange:z=>{z||P(null)},client:S,activeTab:D,onActiveTabChange:I})]})}var C8=Symbol("radix.slottable");function S8(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=C8,s}var zS="AlertDialog",[_8]=Sa(zS,[t2]),Ui=t2(),BS=t=>{const{__scopeAlertDialog:s,...n}=t,r=Ui(s);return e.jsx(T0,{...r,...n,modal:!0})};BS.displayName=zS;var A8="AlertDialogTrigger",P8=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Ui(n);return e.jsx(HR,{...o,...r,ref:s})});P8.displayName=A8;var E8="AlertDialogPortal",US=t=>{const{__scopeAlertDialog:s,...n}=t,r=Ui(s);return e.jsx(I0,{...r,...n})};US.displayName=E8;var k8="AlertDialogOverlay",VS=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Ui(n);return e.jsx(Fu,{...o,...r,ref:s})});VS.displayName=k8;var qc="AlertDialogContent",[D8,T8]=_8(qc),I8=S8("AlertDialogContent"),HS=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:r,...o}=t,c=Ui(n),u=m.useRef(null),h=Qt(s,u),f=m.useRef(null);return e.jsx(zR,{contentName:qc,titleName:qS,docsSlug:"alert-dialog",children:e.jsx(D8,{scope:n,cancelRef:f,children:e.jsxs(M0,{role:"alertdialog",...c,...o,ref:h,onOpenAutoFocus:rt(o.onOpenAutoFocus,v=>{v.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:v=>v.preventDefault(),onInteractOutside:v=>v.preventDefault(),children:[e.jsx(I8,{children:r}),e.jsx(R8,{contentRef:u})]})})})});HS.displayName=qc;var qS="AlertDialogTitle",WS=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Ui(n);return e.jsx(R0,{...o,...r,ref:s})});WS.displayName=qS;var ZS="AlertDialogDescription",GS=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Ui(n);return e.jsx(O0,{...o,...r,ref:s})});GS.displayName=ZS;var M8="AlertDialogAction",KS=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,o=Ui(n);return e.jsx(kp,{...o,...r,ref:s})});KS.displayName=M8;var QS="AlertDialogCancel",XS=m.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:o}=T8(QS,n),c=Ui(n),u=Qt(s,o);return e.jsx(kp,{...c,...r,ref:u})});XS.displayName=QS;var R8=({contentRef:t})=>{const s=`\`${qc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${qc}\` by passing a \`${ZS}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${qc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},O8=BS,L8=US,F8=VS,$8=HS,z8=KS,B8=XS,U8=WS,V8=GS;function H8({...t}){return e.jsx(O8,{"data-slot":"alert-dialog",...t})}function q8({...t}){return e.jsx(L8,{"data-slot":"alert-dialog-portal",...t})}function W8({className:t,...s}){return e.jsx(F8,{"data-slot":"alert-dialog-overlay",className:vt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Z8({className:t,...s}){return e.jsxs(q8,{children:[e.jsx(W8,{}),e.jsx($8,{"data-slot":"alert-dialog-content",className:vt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function G8({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:vt("flex flex-col gap-2 text-center sm:text-left",t),...s})}function K8({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:vt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Q8({className:t,...s}){return e.jsx(U8,{"data-slot":"alert-dialog-title",className:vt("text-lg font-semibold",t),...s})}function X8({className:t,...s}){return e.jsx(V8,{"data-slot":"alert-dialog-description",className:vt("text-muted-foreground text-sm",t),...s})}function Y8({className:t,...s}){return e.jsx(z8,{className:vt(p0(),t),...s})}function J8({className:t,...s}){return e.jsx(B8,{className:vt(p0({variant:"outline"}),t),...s})}const Ug="app:data-changed";function Jx(t,s){if(typeof window>"u")return;const n={topic:t,payload:s,ts:Date.now()};window.dispatchEvent(new CustomEvent(Ug,{detail:n}))}function e$(t,s){if(typeof window>"u")return()=>{};const n=r=>{const o=r;o?.detail&&o.detail.topic===t&&s(o.detail)};return window.addEventListener(Ug,n),()=>window.removeEventListener(Ug,n)}const t$={};function eg(t){return{...t,basePrice:typeof t?.basePrice=="string"?parseFloat(t.basePrice):typeof t?.basePrice=="number"?t.basePrice:0}}function lN(t){return{total:t.length,produtos:t.filter(s=>s.type===sn.PRODUTO).length,servicos:t.filter(s=>s.type===sn.SERVICO).length,adicionais:t.filter(s=>s.isAdditional).length}}function YS(t=t$){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),[h,f]=m.useState(0),[v,x]=m.useState(1),[g,N]=m.useState(40),[w,j]=m.useState(1),[C,k]=m.useState({total:0,produtos:0,servicos:0,adicionais:0}),E=m.useMemo(()=>{const O={...t};return O.page==null&&(O.page=1),O.pageSize==null&&(O.pageSize=40),O.type==="adicional"&&(O.isAdditional=!0,delete O.type),O.type&&!Object.values(sn).includes(O.type)&&delete O.type,typeof O.search=="string"&&O.search.trim()===""&&delete O.search,typeof O.category=="string"&&O.category.trim()===""&&delete O.category,O},[t]),S=m.useCallback(async()=>{try{o(!0),u(null);const F=(await Te.get("/products",{params:E})).data,X=Array.isArray(F)?F:F?.data??F?.items??[],Q=Array.isArray(X)?X.map(eg):[];n(Q);const V=Array.isArray(F)?Q.length:typeof F?.total=="number"?F.total:Q.length,$=Array.isArray(F)?E.page:F?.page??E.page,R=Array.isArray(F)?E.pageSize:F?.pageSize??E.pageSize,z=Array.isArray(F)?Math.max(1,Math.ceil(V/R)):F?.totalPages??Math.max(1,Math.ceil(V/R));f(V),x($),N(R),j(z);const J=Array.isArray(F)?lN(Q):F?.stats;k(J?{total:typeof J.total=="number"?J.total:V,produtos:typeof J.produtos=="number"?J.produtos:0,servicos:typeof J.servicos=="number"?J.servicos:0,adicionais:typeof J.adicionais=="number"?J.adicionais:0}:lN(Q))}catch(O){u(O),n([]),f(0),j(1),k({total:0,produtos:0,servicos:0,adicionais:0})}finally{o(!1)}},[E]),P=m.useCallback(async O=>{const F=await Te.post("/products",O),X=eg(F.data);return Jx("products"),await S(),X},[S]),D=m.useCallback(async(O,F)=>{const X=await Te.put(`/products/${O}`,F),Q=eg(X.data);return Jx("products"),await S(),Q},[S]),I=m.useCallback(async O=>{await Te.delete(`/products/${O}`),Jx("products"),await S()},[S]);return m.useEffect(()=>{S()},[S]),m.useEffect(()=>e$("products",()=>{S()}),[S]),{products:s,loading:r,error:c,refetch:S,createProduct:P,updateProduct:D,deleteProduct:I,total:h,page:v,pageSize:g,totalPages:w,stats:C}}function s$({searchQuery:t,onSearchChange:s,typeFilter:n,onTypeChange:r}){return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ne,{placeholder:"Buscar por nome, descrio ou categoria...",value:t,onChange:o=>s(o.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:r,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Tipo"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos os tipos"}),e.jsx(De,{value:sn.PRODUTO,children:"Produtos"}),e.jsx(De,{value:sn.SERVICO,children:"Servios"}),e.jsx(De,{value:"adicional",children:"Adicionais"})]})]})]})}function n$({products:t,onEditProduct:s,onDeleteProduct:n}){const r=c=>c===sn.PRODUTO?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",o=c=>{switch(c){case On.UNITARIO:return"Unitrio";case On.A_PARTIR_DE:return"A partir de";case On.PACOTE:return"Pacote"}};return t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum produto/servio encontrado"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>e.jsx(Re,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(st,{className:r(c.type),children:c.type===sn.PRODUTO?"Produto":"Servio"}),c.isAdditional&&e.jsx(st,{variant:"outline",className:"text-xs",children:"Adicional"})]}),e.jsx("h3",{className:"text-gray-900 mb-1",children:c.name}),c.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:c.description}),c.category&&e.jsx("p",{className:"text-gray-500 text-xs mb-3",children:c.category})]})}),e.jsx("div",{className:"border-t border-gray-100 pt-4 mb-4",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-gray-900",children:["R$ ",Number(c.basePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",o(c.priceType),")"]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(c),children:[e.jsx(zl,{className:"w-4 h-4 mr-2"}),"Editar"]}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>n(c),"aria-label":"Excluir produto",children:e.jsx(Ba,{className:"w-4 h-4"})})]})]})},c.id))})}function a$({open:t,onOpenChange:s,product:n,onSave:r}){const[o,c]=m.useState({name:"",description:"",category:"",type:sn.PRODUTO,priceType:On.UNITARIO,basePrice:"",isAdditional:!1}),[u,h]=m.useState({});m.useEffect(()=>{c(n?{name:n.name,description:n.description||"",category:n.category||"",type:n.type,priceType:n.priceType,basePrice:n.basePrice.toString(),isAdditional:n.isAdditional}:{name:"",description:"",category:"",type:sn.PRODUTO,priceType:On.UNITARIO,basePrice:"",isAdditional:!1}),h({})},[n,t]);const f=()=>{const g={};return o.name.trim()||(g.name="Nome  obrigatrio"),(!o.basePrice||parseFloat(o.basePrice)<=0)&&(g.basePrice="Preo deve ser maior que zero"),h(g),Object.keys(g).length===0},v=g=>{if(g.preventDefault(),!f())return;const N={name:o.name.trim(),description:o.description.trim()||void 0,category:o.category.trim()||void 0,type:o.type,priceType:o.priceType,basePrice:parseFloat(o.basePrice),isAdditional:o.isAdditional};n&&(N.id=n.id,N.updatedAt=new Date),r(N)},x=()=>{s(!1),h({})};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Os,{children:e.jsx(Ls,{children:n?"Editar Produto/Servio":"Cadastrar Produto/Servio"})}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"type",children:["Tipo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_t,{value:o.type,onValueChange:g=>c({...o,type:g}),children:[e.jsx(Pt,{id:"type",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:sn.PRODUTO,children:"Produto"}),e.jsx(De,{value:sn.SERVICO,children:"Servio"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"name",children:["Nome ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ne,{id:"name",placeholder:"Ex: Impresso de Lona",value:o.name,onChange:g=>c({...o,name:g.target.value})}),u.name&&e.jsx("p",{className:"text-red-500 text-sm",children:u.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"category",children:"Categoria"}),e.jsx(Ne,{id:"category",placeholder:"Ex: Material",value:o.category,onChange:g=>c({...o,category:g.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"description",children:"Descrio"}),e.jsx(Va,{id:"description",placeholder:"Descreva o produto ou servio...",rows:3,value:o.description,onChange:g=>c({...o,description:g.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"priceType",children:["Tipo de Preo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_t,{value:o.priceType,onValueChange:g=>c({...o,priceType:g}),children:[e.jsx(Pt,{id:"priceType",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:On.UNITARIO,children:"Unitrio"}),e.jsx(De,{value:On.A_PARTIR_DE,children:"A partir de"}),e.jsx(De,{value:On.PACOTE,children:"Pacote"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:"basePrice",children:["Preo Base (R$) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ne,{id:"basePrice",type:"number",step:"0.01",min:"0",placeholder:"0,00",value:o.basePrice,onChange:g=>c({...o,basePrice:g.target.value})}),u.basePrice&&e.jsx("p",{className:"text-red-500 text-sm",children:u.basePrice})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ri,{id:"isAdditional",checked:o.isAdditional,onCheckedChange:g=>c({...o,isAdditional:g===!0})}),e.jsx(je,{htmlFor:"isAdditional",className:"cursor-pointer",children:"Este  um item adicional (pode ser includo em propostas)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(Z,{type:"button",variant:"outline",onClick:x,children:"Cancelar"}),e.jsx(Z,{type:"submit",children:n?"Atualizar":"Salvar"})]})]})]})})}const tg=40;function r$(){const[t,s]=m.useState(""),[n,r]=m.useState("all"),[o,c]=m.useState(1),u=m.useMemo(()=>({search:t,type:n!=="all"?n:void 0,page:o,pageSize:tg}),[t,n,o]),{products:h,loading:f,error:v,createProduct:x,updateProduct:g,deleteProduct:N,total:w,totalPages:j,stats:C}=YS(u),[k,E]=m.useState(!1),[S,P]=m.useState(null),[D,I]=m.useState(null);m.useEffect(()=>{c(1)},[t,n]),m.useEffect(()=>{o>j&&c(j)},[o,j]);const O=w===0?0:(o-1)*tg+1,F=w===0?0:Math.min(o*tg,w),X=async z=>{try{S?.id?(await g(S.id,z),ye.success("Produto atualizado com sucesso!")):(await x(z),ye.success("Produto cadastrado com sucesso!")),E(!1),P(null)}catch{ye.error("Erro ao salvar produto")}},Q=()=>{P(null),E(!0)},V=z=>{P(z),E(!0)},$=z=>{I(z)},R=async()=>{if(D)try{await N(D.id),ye.success("Produto excludo com sucesso!")}catch{ye.error("Erro ao excluir produto")}finally{I(null)}};return e.jsxs("div",{className:"p-8",children:[f&&e.jsx("div",{children:"Carregando produtos..."}),!f&&v&&e.jsx("div",{children:"Erro ao carregar produtos."}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Produtos e Servios"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie produtos e servios adicionais (Product)"})]}),e.jsxs(Z,{className:"gap-2",onClick:Q,children:[e.jsx(kn,{className:"w-4 h-4"}),"Novo Produto/Servio"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("all"),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total"}),e.jsx("p",{className:"text-gray-900",children:C.total})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(sn.PRODUTO),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Produtos"}),e.jsx("p",{className:"text-gray-900",children:C.produtos})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(sn.SERVICO),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Servios"}),e.jsx("p",{className:"text-gray-900",children:C.servicos})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("adicional"),children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Adicionais"}),e.jsx("p",{className:"text-gray-900",children:C.adicionais})]})})]}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"pt-6",children:e.jsx(s$,{searchQuery:t,onSearchChange:s,typeFilter:n,onTypeChange:z=>r(z)})})}),(t||n!=="all")&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[w," ",w===1?"produto/servio encontrado":"produtos/servios encontrados"]})}),e.jsx(n$,{products:h,onEditProduct:V,onDeleteProduct:$}),j>1&&e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3 mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",O,"-",F," de ",w,"  Pgina ",o," de ",j]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{variant:"outline",onClick:()=>c(z=>Math.max(1,z-1)),disabled:o<=1,children:"Anterior"}),e.jsx(Z,{variant:"outline",onClick:()=>c(z=>Math.min(j,z+1)),disabled:o>=j,children:"Prxima"})]})]}),e.jsx(a$,{open:k,onOpenChange:z=>{E(z),z||P(null)},product:S,onSave:X}),e.jsx(H8,{open:!!D,onOpenChange:z=>{z||I(null)},children:e.jsxs(Z8,{children:[e.jsxs(G8,{children:[e.jsx(Q8,{children:"Confirmar excluso"}),e.jsxs(X8,{children:["Tem certeza que deseja excluir o produto/servio ",e.jsx("strong",{children:D?.name}),"? Esta ao no pode ser desfeita."]})]}),e.jsxs(K8,{children:[e.jsx(J8,{onClick:()=>I(null),children:"Cancelar"}),e.jsx(Y8,{onClick:R,children:"Excluir"})]})]})})]})}const i$=[{value:as.RASCUNHO,label:"Rascunho"},{value:as.ENVIADA,label:"Enviada"},{value:as.APROVADA,label:"Aprovada"},{value:as.REPROVADA,label:"Reprovada"},{value:as.EXPIRADA,label:"Expirada"}];function o$({open:t,onOpenChange:s,filters:n,onApplyFilters:r}){const[o,c]=m.useState(n),[u,h]=m.useState([]),[f,v]=m.useState(!1);m.useEffect(()=>{c(n)},[n]),m.useEffect(()=>{t&&(async()=>{try{v(!0);const k=(await Te.get("/proposals/responsibles")).data,E=Array.isArray(k)?k:Array.isArray(k?.data)?k.data:[];h(E)}catch{h([])}finally{v(!1)}})()},[t]);const x=m.useMemo(()=>u.map(j=>({id:j.id,label:j.name||j.email||j.id})),[u]),g=j=>{c(C=>({...C,proposalStatuses:C.proposalStatuses.includes(j)?C.proposalStatuses.filter(k=>k!==j):[...C.proposalStatuses,j]}))},N=()=>{const j={proposalStatuses:[],campaignStatus:void 0,billingStatus:void 0,responsibleUserId:void 0,createdFrom:void 0,createdTo:void 0};c(j),r(j),s(!1)},w=()=>{r(o),s(!1)};return e.jsx(cv,{open:t,onOpenChange:s,children:e.jsxs(dv,{className:"w-[420px] sm:w-[540px] sm:max-w-[540px] p-0 gap-0",children:[e.jsxs(uv,{className:"border-b px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dp,{className:"w-5 h-5 text-gray-600"}),e.jsx(mv,{className:"text-base",children:"Filtros Avanados"})]}),e.jsx(jS,{children:"Refine a lista de propostas."})]}),e.jsxs("div",{className:"flex-1 overflow-auto px-6 py-5 space-y-7",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Status da Proposta"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:i$.map(j=>e.jsxs("div",{className:"flex items-center gap-2 rounded-md border px-3 py-2",children:[e.jsx(ri,{id:`status-${j.value}`,checked:o.proposalStatuses.includes(j.value),onCheckedChange:()=>g(j.value)}),e.jsx(je,{htmlFor:`status-${j.value}`,className:"text-sm",children:j.label})]},j.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Responsvel"}),e.jsxs(_t,{value:o.responsibleUserId||"all",onValueChange:j=>c(C=>({...C,responsibleUserId:j==="all"?void 0:j})),disabled:f,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:f?"Carregando...":"Selecione o responsvel"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos"}),!f&&x.length===0?e.jsx(De,{value:"__none",disabled:!0,children:"Nenhum responsvel encontrado"}):null,x.map(j=>e.jsx(De,{value:j.id,children:j.label},j.id))]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Perodo de Criao"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(je,{htmlFor:"createdFrom",className:"text-sm text-gray-600",children:"De"}),e.jsx(Ne,{id:"createdFrom",type:"date",value:o.createdFrom||"",onChange:j=>c(C=>({...C,createdFrom:j.target.value||void 0}))})]}),e.jsxs("div",{children:[e.jsx(je,{htmlFor:"createdTo",className:"text-sm text-gray-600",children:"At"}),e.jsx(Ne,{id:"createdTo",type:"date",value:o.createdTo||"",onChange:j=>c(C=>({...C,createdTo:j.target.value||void 0}))})]})]})]})]}),e.jsxs(vF,{className:"border-t bg-background px-6 py-4 flex-row gap-3",children:[e.jsx(Z,{variant:"outline",onClick:N,className:"flex-1",children:"Limpar"}),e.jsx(Z,{onClick:w,className:"flex-1",children:"Aplicar Filtros"})]})]})})}function Vs(t,s=0){if(t==null)return s;if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=Number(t.replace(",","."));return Number.isFinite(n)?n:s}return s}function yh(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const[n,r,o]=s.toISOString().split("T")[0].split("-");return`${o}/${r}/${n}`}function l$(t){if(!t)return"";const s=new Date(t);if(Number.isNaN(s.getTime()))return"";try{return s.toLocaleString("pt-BR")}catch{return""}}async function c$(t){try{return await navigator.clipboard.writeText(t),!0}catch{try{const s=document.createElement("textarea");return s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch{return!1}}}function d$({open:t,onOpenChange:s,proposal:n,onNavigate:r}){const o=n??{};m.useEffect(()=>{console.debug("ProposalDetailsDrawer mounted/render, proposal=",n,"open=",t)},[n?.id,t]);const[c,u]=m.useState(null),[h,f]=m.useState(null),[v,x]=m.useState(null),[g,N]=m.useState(!1),[w,j]=m.useState(!1),[C,k]=m.useState(!1),[E,S]=m.useState(null),[P,D]=m.useState(null),[I,O]=m.useState(null);m.useEffect(()=>{!n||!t||(O(null),D(null),S(null),u(o.publicHash??o.public_hash??null))},[n?.id,t]);const F=m.useMemo(()=>o.clientName||n?.client?.companyName||n?.client?.contactName||n?.client?.companyName||n?.client?.contactName||"-",[n,o.clientName]),X=m.useMemo(()=>{const K=n?.client?.companyName??n?.client?.companyName,ee=n?.client?.contactName??n?.client?.contactName;return K&&ee?ee:null},[n]),Q=m.useMemo(()=>o.responsibleUserName||n?.responsibleUser?.name||n?.responsibleUser?.name||"-",[n,o.responsibleUserName]),V=m.useMemo(()=>{if(!n)return[];const K=o.items??o.proposalItems??[];return Array.isArray(K)?K:[]},[n]),$=m.useMemo(()=>n?.conditionsText?String(n.conditionsText).replace(/\\n/g,`
`):"",[n?.conditionsText]),R=m.useMemo(()=>Vs(o.totalAmount,0),[n]),z=K=>Vs(K,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),J=typeof window<"u"?window.location.origin:"",ue=m.useMemo(()=>c&&J?`${J}/p/${c}`:null,[c,J]),se=m.useMemo(()=>!c||!h||!J?null:`${J}/p/${c}?m=${encodeURIComponent(h)}`,[c,h,J]),fe=m.useMemo(()=>!c||!v||!J?null:`${J}/p/${c}?t=${encodeURIComponent(v)}`,[c,v,J]),H=K=>{if(!K)return null;const ee=String(K),U=ee.match(/filename\*=(?:UTF-8''|)([^;\n]+)/i);if(U?.[1]){const Y=U[1].trim().replace(/^"|"$/g,"");try{return decodeURIComponent(Y)}catch{return Y}}const le=ee.match(/filename=([^;\n]+)/i);return le?.[1]?le[1].trim().replace(/^"|"$/g,""):null},re=async()=>{if(n)try{k(!0),S(null);const K=c||n.publicHash||n.public_hash||null,ee=K?`/public/proposals/${K}/pdf`:`/proposals/${n.id}/pdf/file`,U=await Te.get(ee,{responseType:"blob"}),le=U.headers?.["content-disposition"]||U.headers?.["Content-Disposition"],Y=H(le)||`proposta-${n.id}.pdf`,ae=new Blob([U.data],{type:"application/pdf"}),Ie=window.URL.createObjectURL(ae),$e=document.createElement("a");$e.href=Ie,$e.download=Y,$e.rel="noreferrer",document.body.appendChild($e),$e.click(),$e.remove(),window.URL.revokeObjectURL(Ie)}catch(K){S(K?.response?.data?.message||K?.message||"No foi possvel baixar o PDF da proposta")}finally{k(!1)}},G=async(K,ee)=>{if(!K)return;const U=await c$(K);O(null),D(U?ee:"Copie manualmente (no foi possvel copiar automaticamente).")},W=async()=>{if(n){D(null),O(null);try{N(!0);const K=await Te.get(`/proposals/${n.id}/public-message-token`),ee=K.data?.token,U=K.data?.publicHash;U&&u(U),ee&&f(ee);const le=U??c;if(!le||!ee)throw new Error("No foi possvel gerar o link de mensagens.");if(!J)throw new Error("No foi possvel determinar a URL do site.");await G(`${J}/p/${le}?m=${encodeURIComponent(ee)}`,"Link de mensagens copiado.")}catch(K){O(K?.response?.data?.message||K?.message||"Erro ao gerar link de mensagens")}finally{N(!1)}}},ne=async()=>{if(n){D(null),O(null);try{j(!0);const K=await Te.get(`/proposals/${n.id}/public-action-token`),ee=K.data?.token,U=K.data?.publicHash;U&&u(U),ee&&x(ee);const le=U??c;if(!le||!ee)throw new Error("No foi possvel gerar o link de deciso.");if(!J)throw new Error("No foi possvel determinar a URL do site.");await G(`${J}/p/${le}?t=${encodeURIComponent(ee)}`,"Link de deciso copiado.")}catch(K){O(K?.response?.data?.message||K?.message||"Erro ao gerar link de deciso")}finally{j(!1)}}};return t?e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsx(Es,{className:"p-0 !w-[96vw] !max-w-[1400px] sm:!max-w-[1400px] h-[90vh] overflow-hidden",children:n?e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("h2",{className:"text-gray-900 truncate",children:n.title||"Proposta"}),e.jsx(yv,{status:o.status})]})}),e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Total"}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",z(R)]}),Vs(o.discountPercent,0)>0&&e.jsxs("p",{className:"text-green-600 text-sm",children:["Desconto: -",Vs(o.discountPercent,0),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:F}),X&&e.jsx("p",{className:"text-sm text-gray-600",children:X})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Responsvel"}),e.jsx("p",{className:"text-gray-900",children:Q})]}),o.startDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Data de incio"}),e.jsx("p",{className:"text-gray-900",children:yh(o.startDate)})]}),typeof n.assemblyMaxDays=="number"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Perodo mximo de montagem"}),e.jsxs("p",{className:"text-gray-900",children:[n.assemblyMaxDays," dias"]})]}),n.validUntil&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Validade"}),e.jsx("p",{className:"text-gray-900",children:yh(n.validUntil)})]})]}),$&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Condies / Observaes"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:$})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-gray-900 mb-4",children:["Itens da Proposta (",V.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[V.map((K,ee)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("p",{className:"text-gray-900 flex-1",children:K.description||"Item"}),(()=>{const U=Math.max(1,Vs(K.quantity,1)),le=Vs(K.discountPercent,0),Y=Vs(K.discountAmount,0),ae=K.discountApplyTo??"TOTAL",Ie=ae==="RENT"?"no aluguel":ae==="COSTS"?"nos custos":"no total",$e=Vs(K.unitPrice,0);let Ge=U*$e,Xe=0,Je=0;const tt=Vs(K.totalPrice??K.total??Ge,0);if(K.mediaUnitId){const mt=Vs(K.occupationDays,0),kt=Math.floor(mt/30),zt=Math.round(mt%30/15),te=Vs(K.priceMonthSnapshot,0),xe=Vs(K.priceBiweeklySnapshot,0),pe=Vs(K.productionCostSnapshot,0),Ue=Vs(K.installationCostSnapshot,0),ce=!!K.clientProvidesBanner,ve=kt*te+zt*xe,ze=Ue+(ce?0:pe);Xe=ve*U,Je=ze*U,Ge=Xe+Je}const ut=Math.max(0,Ge-tt),wt=le>0?`${le}%`:Y>0?`R$ ${z(Y)}`:null;return e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-gray-900 whitespace-nowrap",children:["R$ ",z(tt)]}),ut>0&&Ge>0?e.jsxs("div",{className:"mt-0.5 space-y-0.5",children:[e.jsxs("p",{className:"text-[11px] text-gray-500 whitespace-nowrap",children:["Orig: R$ ",z(Ge)]}),e.jsxs("p",{className:"text-[11px] text-red-600 whitespace-nowrap",children:["Desc",wt?` (${wt} ${Ie})`:` (${Ie})`,": - R$ ",z(ut)]})]}):null]})})()]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-sm",children:[K.mediaUnitId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Tempo de ocupao"}),e.jsx("p",{className:"text-gray-700",children:K.occupationDays?`${K.occupationDays} dias`:""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Cliente fornece lona"}),e.jsx("p",{className:"text-gray-700",children:K.clientProvidesBanner?"Sim":"No"})]})]}):K.startDate&&K.endDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-gray-700",children:[yh(K.startDate)," - ",yh(K.endDate)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Quantidade"}),e.jsx("p",{className:"text-gray-700",children:K.quantity??1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Preo Unitrio"}),e.jsxs("p",{className:"text-gray-700",children:["R$ ",z(K.unitPrice)]})]})]}),K.mediaUnitId?(()=>{const U=Math.max(1,Vs(K.quantity,1)),le=Vs(K.occupationDays,0),Y=Math.floor(le/30),ae=Math.round(le%30/15),Ie=Vs(K.priceMonthSnapshot,0),$e=Vs(K.priceBiweeklySnapshot,0),Ge=Vs(K.productionCostSnapshot,0),Xe=Vs(K.installationCostSnapshot,0),Je=!!K.clientProvidesBanner,tt=(Y*Ie+ae*$e)*U,ut=(Xe+(Je?0:Ge))*U,wt=Vs(K.discountPercent,0),mt=Vs(K.discountAmount,0),kt=K.discountApplyTo??"TOTAL",zt=ce=>{let ve=ce;return wt>0&&(ve=ve*(1-wt/100)),mt>0&&(ve=ve-mt),Number.isFinite(ve)||(ve=0),Math.max(0,ve)};let te=K.rentTotalSnapshot!=null?Vs(K.rentTotalSnapshot,0):null,xe=K.upfrontTotalSnapshot!=null?Vs(K.upfrontTotalSnapshot,0):null;if(te==null||xe==null)if(kt==="TOTAL"){const ce=tt+ut,ve=zt(ce),ze=ce>0?ve/ce:0;te=tt*ze,xe=ut*ze}else kt==="RENT"?(te=zt(tt),xe=ut):kt==="COSTS"&&(xe=zt(ut),te=tt);const pe=Math.abs(tt-(te??0))>.009,Ue=Math.abs(ut-(xe??0))>.009;return tt<=0&&ut<=0?null:e.jsx("div",{className:"mt-3 rounded-md bg-gray-50 p-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Aluguel"}),e.jsxs("p",{className:"text-gray-700 whitespace-nowrap",children:["R$ ",z(tt),pe?`  R$ ${z(te)}`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Custos (produo/instalao)"}),e.jsxs("p",{className:"text-gray-700 whitespace-nowrap",children:["R$ ",z(ut),Ue?`  R$ ${z(xe)}`:""]})]})]})})})():null]},K.id??`${K.description??"item"}-${ee}`)),!V.length&&e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum item adicionado."})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h3",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ok,{className:"w-4 h-4"})," Links pblicos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Visualizao"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:ue||""}),e.jsx(Z,{size:"icon",variant:"outline",disabled:!ue,onClick:()=>G(ue,"Link de visualizao copiado."),children:e.jsx($n,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Mensagens (portal do cliente)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:se||""}),e.jsx(Z,{size:"icon",variant:"outline",disabled:!se,onClick:()=>G(se,"Link de mensagens copiado."),children:e.jsx($n,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Z,{variant:"outline",onClick:W,disabled:g,className:"w-full sm:w-auto",children:g?"Gerando":"Gerar link de mensagens"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Deciso (aprovar/recusar)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700 font-mono break-all flex-1",children:fe||""}),e.jsx(Z,{size:"icon",variant:"outline",disabled:!fe,onClick:()=>G(fe,"Link de deciso copiado."),children:e.jsx($n,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Z,{variant:"outline",onClick:ne,disabled:w,className:"w-full sm:w-auto",children:w?"Gerando":"Gerar link de deciso"})})]}),I&&e.jsx("p",{className:"text-sm text-red-600",children:I}),P&&e.jsx("p",{className:"text-sm text-green-700",children:P}),e.jsx("div",{className:"pt-2",children:e.jsx(Z,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>{s(!1),r?.("messages");const K=new URL(window.location.href);K.searchParams.set("proposalId",n.id),K.searchParams.delete("campaignId");const ee=`${K.pathname}?${K.searchParams.toString()}`;try{window.history.pushState({},"",ee),window.dispatchEvent(new Event("app:navigation"))}catch{}},children:"Ir para Mensagens"})})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Proposta (PDF)"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsx(Z,{variant:"outline",className:"w-full sm:w-auto",disabled:C,onClick:re,children:C?"Baixando":"Baixar proposta (PDF)"})}),E&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:E})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Criado em ",l$(o.createdAt)]})})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"Sem detalhes disponveis."})})})}):null}function u$({searchQuery:t,onSearchChange:s,statusFilter:n,onStatusChange:r,onOpenAdvancedFilters:o}){return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ne,{placeholder:"Buscar por ttulo ou cliente...",value:t,onChange:c=>s(c.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:r,children:[e.jsx(Pt,{className:"w-full lg:w-48",children:e.jsx(At,{placeholder:"Status"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos os status"}),e.jsx(De,{value:as.RASCUNHO,children:"Rascunho"}),e.jsx(De,{value:as.ENVIADA,children:"Enviada"}),e.jsx(De,{value:as.APROVADA,children:"Aprovada"}),e.jsx(De,{value:as.REPROVADA,children:"Reprovada"}),e.jsx(De,{value:as.EXPIRADA,children:"Expirada"})]})]}),e.jsxs(Z,{type:"button",variant:"outline",className:"gap-2",onClick:o,children:[e.jsx(dp,{className:"w-4 h-4"}),"Mais Filtros"]})]})}function m$({value:t,onChange:s}){const[n,r]=m.useState([]),[o,c]=m.useState(!1);m.useEffect(()=>{let f=!1;return(async()=>{try{c(!0);const x=40;let g=1;const N=[];for(let w=0;w<50;w++){const C=(await Te.get("/clients",{params:{page:g,pageSize:x,orderBy:"name",sortOrder:"asc"}})).data,k=Array.isArray(C)?C:C?.data??[];if(N.push(...k),Array.isArray(C))break;const E=C?.totalPages;if(typeof E=="number"&&g>=E||!k.length||k.length<x)break;g+=1}f||r(N)}catch{f||r([])}finally{f||c(!1)}})(),()=>{f=!0}},[]);const u=m.useMemo(()=>(n||[]).map(f=>({id:f.id,label:`${f.contactName||"Sem nome"}${f.companyName?`  ${f.companyName}`:""}`})),[n]),h=f=>{const v=f.target.value;s&&v&&s(v)};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("select",{"data-testid":"client-select",className:"flex h-9 w-full rounded-md border border-input bg-input-background px-3 py-1 text-sm shadow-sm transition-colors outline-none appearance-none cursor-pointer pr-10 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",value:t||"",onChange:h,style:{WebkitAppearance:"none",MozAppearance:"none"},disabled:o,children:[e.jsx("option",{value:"",children:o?"Carregando clientes...":"Selecione o cliente"}),u.map(f=>e.jsx("option",{value:f.id,children:f.label},f.id))]}),e.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-muted-foreground text-xs",children:""})]})}function h$({formData:t,onChange:s,onValidChange:n,onClose:r,onNavigate:o}){const{user:c}=Fl();m.useEffect(()=>{c&&!t.responsibleUserId&&s({responsibleUserId:c.id})},[c,t.responsibleUserId,s]),m.useEffect(()=>{const v=!!t.clientId&&!!t.responsibleUserId;n(v)},[t.clientId,t.responsibleUserId,n]);const u=v=>{s({clientId:v})},h=()=>{r&&r(),o&&o("clients")},f=v=>new Date(`${v}T00:00:00`);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"clientId",className:"required",children:"Cliente *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(m$,{value:t.clientId,onChange:u})}),e.jsx(Z,{type:"button",variant:"outline",size:"icon",onClick:h,title:"Ir para mdulo de Clientes",children:e.jsx(kn,{className:"w-4 h-4"})})]}),!t.clientId&&e.jsx("p",{className:"text-sm text-red-600",children:"Selecione um cliente para continuar"}),e.jsx("p",{className:"text-sm text-gray-500",children:" Precisa cadastrar um cliente novo? Clique no boto + para abrir o mdulo de Clientes."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"title",children:"Ttulo da Proposta"}),e.jsx(Ne,{id:"title",placeholder:"Ex: Campanha OOH Av. Paulista  Q2 2025",value:t.title||"",onChange:v=>s({title:v.target.value})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. D um nome descritivo para identificar facilmente esta proposta."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"campaignStartDate",children:"Data de Incio"}),e.jsx(Ne,{id:"campaignStartDate",type:"date",value:t.campaignStartDate?t.campaignStartDate.toISOString().split("T")[0]:"",onChange:v=>s({campaignStartDate:v.target.value?f(v.target.value):void 0})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. Serve como referncia/padro; a durao real ser definida por item no prximo passo."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"validUntil",children:"Validade da Proposta"}),e.jsx(Ne,{id:"validUntil",type:"date",value:t.validUntil?t.validUntil.toISOString().split("T")[0]:"",onChange:v=>s({validUntil:v.target.value?f(v.target.value):void 0})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data at a qual esta proposta  vlida (padro: 7 dias)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"conditionsText",children:"Condies Comerciais"}),e.jsx(Va,{id:"conditionsText",rows:4,placeholder:"Descreva as condies de pagamento, prazos, garantias, etc.",value:t.conditionsText||"",onChange:v=>s({conditionsText:v.target.value})})]})]})}function p$({open:t,onOpenChange:s,onAddItem:n,initialMediaPointId:r,allowedMediaPointIds:o,referenceStartDate:c}){const{company:u}=Fo(),h=m.useMemo(()=>(o??[]).join("|"),[o]),f=m.useMemo(()=>new Set((o??[]).filter(Boolean)),[h]),[v,x]=m.useState(""),[g,N]=m.useState("all"),[w,j]=m.useState([]),[C,k]=m.useState([]),[E,S]=m.useState(!1),[P,D]=m.useState(null),[I,O]=m.useState(null),[F,X]=m.useState(null),Q=m.useRef(!1),[V,$]=m.useState([]),[R,z]=m.useState(!1),[J,ue]=m.useState(null),[se,fe]=m.useState(""),[H,re]=m.useState(""),[G,W]=m.useState(1),[ne,K]=m.useState(0),[ee,U]=m.useState(0),[le,Y]=m.useState(0),[ae,Ie]=m.useState(qs.TOTAL),$e=360,[Ge,Xe]=m.useState("30"),[Je,tt]=m.useState(30),[ut,wt]=m.useState(!1),[mt,kt]=m.useState({}),[zt,te]=m.useState(null),xe=be=>{const Me=new Date(be);return Me.setHours(0,0,0,0),Me},pe=(be,Me)=>{const Fe=new Date(be);return Fe.setDate(Fe.getDate()+Math.max(0,Math.floor(Me))),Fe},Ue=m.useMemo(()=>{const be=xe(c??new Date),Me=pe(be,Je);return{start:be,end:Me}},[c,Je]),ce=be=>{const Me=Math.max(0,Math.floor(be)),Fe=Math.floor(Me/30),Mt=Me%30===15?1:0;return{months:Fe,biweeks:Mt}},ve=be=>{const Me=Number(be);return Number.isFinite(Me)?Me:0},ze=m.useMemo(()=>{const be=new Map;for(const Me of w)be.set(Me.id,Me);return be},[w]),He=m.useMemo(()=>{const be=F?ze.get(F.mediaPointId):void 0,Me=ve(F?.priceMonth??be?.basePriceMonth??0),Fe=ve(F?.priceWeek??be?.basePriceWeek??0),Dt=ve(F?.productionCosts?.lona??0),Mt=ve(F?.productionCosts?.montagem??0),{months:Ns,biweeks:Xt}=ce(Je),ds=Ns*Me+Xt*Fe,ys=Mt+(ut?0:Dt),Ys=ds+ys;return{priceMonth:Me,priceBiweekly:Fe,months:Ns,biweeks:Xt,rentPerUnit:ds,prod:Dt,inst:Mt,upfrontPerUnit:ys,perUnitTotal:Ys}},[F,Je,ut]),pt=m.useMemo(()=>{const be=Math.max(1,Number(G)||1),Me=be*He.rentPerUnit,Fe=be*He.upfrontPerUnit,Dt=Me+Fe,Mt=ve(ee),Ns=ve(le),Xt=ae===qs.RENT?Me:ae===qs.COSTS?Fe:Dt,ds=Mt>0?Xt*Mt/100:Ns>0?Math.min(Ns,Xt):0,ys=Math.max(0,Dt-ds),Ys=Math.max(0,ds);return{qty:be,rentTotal:Me,upfrontTotal:Fe,baseTotal:Dt,discountBase:Xt,discountValue:ds,totalPrice:ys,computedDiscountValue:Ys}},[G,He.rentPerUnit,He.upfrontPerUnit,ee,le,ae]),{baseTotal:me,totalPrice:Oe,computedDiscountValue:Ke}=pt;m.useEffect(()=>{if(!F){K(0);return}K(He.perUnitTotal)},[F,He.perUnitTotal]);const lt=be=>be.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),Tt=be=>[be.addressStreet,be.addressNumber,be.addressDistrict,be.addressCity,be.addressState].filter(Boolean).join(", "),ps=be=>{if(be.widthM&&be.heightM){const Me=Number(be.widthM),Fe=Number(be.heightM);return`${Me}m x ${Fe}m`}if(be.resolutionWidthPx&&be.resolutionHeightPx)return`${be.resolutionWidthPx}x${be.resolutionHeightPx}px`},Ts=be=>{const Me=new Date(be).toISOString().slice(0,10),[Fe,Dt,Mt]=Me.split("-");return`${Mt}/${Dt}/${Fe}`};m.useEffect(()=>{const be=async()=>{try{S(!0),D(null),O(null),X(null),$([]),ue(null),fe("");const Me=[];let Fe=1;const Dt=50;for(;;){const ds=(await Te.get("/media-points",{params:{page:Fe,pageSize:Dt}})).data,ys=Array.isArray(ds)?ds:ds?.data??[],Ys=Array.isArray(ds)?void 0:ds?.total;if(Me.push(...ys),Array.isArray(ds)||!ys.length||typeof Ys=="number"&&Me.length>=Ys)break;Fe+=1}const Mt=f.size?Me.filter(Xt=>f.has(Xt.id)):Me;j(Mt);const Ns=Mt.flatMap(Xt=>(Array.isArray(Xt?.units)?Xt.units:Array.isArray(Xt?.mediaUnits)?Xt.mediaUnits:[]).map(ys=>({...ys,pointId:Xt.id,pointName:Xt.name,pointType:Xt.type,pointAddress:Tt(Xt),dimensions:ps(ys),mediaPointId:Xt.id,productionCosts:Xt.productionCosts??null})));k(Ns)}catch{D("Erro ao carregar mdias do inventrio."),j([]),k([])}finally{S(!1)}};t?(Q.current=!1,O(null),X(null),kt({}),te(null),fe(""),re(""),W(1),U(0),Y(0),Xe("30"),tt(30),wt(!1),be()):Q.current=!1},[t,h]);const ws=m.useMemo(()=>{const be=new Map;for(const Me of C){const Fe=Me.mediaPointId;if(!Fe)continue;const Dt=be.get(Fe)??[];Dt.push(Me),be.set(Fe,Dt)}return be},[C]),rs=m.useMemo(()=>{let be=w;g!=="all"&&(be=be.filter(Fe=>Fe.type===g));const Me=v.trim().toLowerCase();return Me&&(be=be.filter(Fe=>{const Dt=String(Fe.name??"").toLowerCase(),Mt=Tt(Fe).toLowerCase(),Xt=(ws.get(Fe.id)??[]).some(ds=>String(ds.label??"").toLowerCase().includes(Me));return Dt.includes(Me)||Mt.includes(Me)||Xt})),be},[w,g,v,ws]),fs=m.useMemo(()=>rs.reduce((be,Me)=>be+(ws.get(Me.id)?.length??0),0),[rs,ws]),gs=m.useMemo(()=>I?w.find(be=>be.id===I)??null:null,[w,I]),Fs=m.useMemo(()=>I?ws.get(I)??[]:[],[ws,I]);m.useEffect(()=>{if(!t)return;if(!I){kt({}),te(null);return}const be=Fs;if(!be.length){kt({}),te(null);return}let Me=!1;const Fe=Ue.start.toISOString(),Dt=Ue.end.toISOString();return kt(Mt=>{const Ns={...Mt};for(const Xt of be)Ns[Xt.id]="checking";return Ns}),te(null),(async()=>{const Mt=await Promise.allSettled(be.map(ds=>Te.get("/reservations/availability",{params:{mediaUnitId:ds.id,startDate:Fe,endDate:Dt}})));if(Me)return;const Ns={};let Xt=!1;Mt.forEach((ds,ys)=>{const Ys=be[ys]?.id;if(Ys)if(ds.status==="fulfilled"){const un=!!ds.value?.data?.available;Ns[Ys]=un?"available":"occupied"}else Ns[Ys]="unknown",Xt=!0}),kt(Ns),Xt&&te("No foi possvel verificar a disponibilidade de uma ou mais faces.")})().catch(()=>{if(Me)return;const Mt={};for(const Ns of be)Mt[Ns.id]="unknown";kt(Mt),te("No foi possvel verificar a disponibilidade das faces.")}),()=>{Me=!0}},[t,I,Fs,Ue.start,Ue.end]),m.useEffect(()=>{if(!t||!I||!Fs.length||!Object.keys(mt).length)return;const be=()=>{const Fe=Fs.find(Dt=>mt[Dt.id]==="available");Fe?Ws(Fe):X(null)};if(!F){be();return}const Me=mt[F.id];(Me==="occupied"||Me==="unknown")&&be()},[t,I,Fs,mt,F]);const Ws=be=>{X(be),re(`${be.pointName||"Ponto"} - ${be.label}`),U(0),Y(0),W(1),Xe("30"),tt(30),wt(!1)},ks=async be=>{try{z(!0),ue(null),$([]),fe("");const Me=await Te.get(`/media-points/${be}/owners`),Fe=Array.isArray(Me.data)?Me.data:Me.data?.data??[],Dt=Array.isArray(Fe)?Fe:[];$(Dt);const Mt=Dt.find(Ns=>Ns?.ownerCompany?.isPrimary);Mt?fe(Mt.id):Dt.length===1&&fe(Dt[0].id)}catch{ue("Erro ao carregar empresas vinculadas ao ponto."),$([]),fe("")}finally{z(!1)}},an=be=>{O(be.id),ks(be.id);const Me=ws.get(be.id)??[];if(Me.length>0){Ws(Me[0]);return}X(null),re(`${be.name||"Ponto"}`),K(0),U(0),Y(0),W(1),Xe("30"),tt(30),wt(!1)};m.useEffect(()=>{if(!t||!w.length||Q.current)return;let be=r;if(be&&f.size&&!f.has(be)&&(be=void 0),!be&&(o??[]).length&&(be=(o??[])[0]),!be||(Q.current=!0,I===be))return;const Me=w.find(Fe=>Fe.id===be);Me&&an(Me)},[t,r,h,w.length,I]);const yt=()=>{if(!F)return;const be=Je,Me=G*He.rentPerUnit,Fe=G*He.upfrontPerUnit,Dt={id:`item${Date.now()}${Math.random()}`,companyId:u?.id||F.companyId||"",proposalId:"",mediaUnitId:F.id,productId:void 0,mediaPointOwnerId:F.id&&se||null,description:H,occupationDays:be,clientProvidesBanner:ut,priceMonthSnapshot:He.priceMonth,priceBiweeklySnapshot:He.priceBiweekly,productionCostSnapshot:He.prod,installationCostSnapshot:He.inst,rentTotalSnapshot:Me,upfrontTotalSnapshot:Fe,quantity:G,unitPrice:ne,discountPercent:ee>0?ee:void 0,discountAmount:le>0?le:void 0,discountApplyTo:ae,totalPrice:Oe,createdAt:new Date,updatedAt:new Date};n(Dt),os()},os=()=>{x(""),N("all"),O(null),X(null),kt({}),te(null),$([]),ue(null),fe(""),re(""),W(1),K(0),U(0),Y(0),Xe("30"),tt(30),wt(!1),s(!1)},qt=V.length>0,Ds=Je>=15&&Je%15===0&&Je<=$e,js=F?mt[F.id]:void 0,vs=js==="available",Ae=!!F&&!!H&&G>0&&ne>=0&&Ds&&vs&&qt&&!!se&&!R&&!J,nt=ae===qs.RENT?"o aluguel":ae===qs.COSTS?"os custos (produo/instalao)":"o total do item",it=m.useMemo(()=>{const be=new Set(w.map(Me=>Me.type));return Array.from(be)},[w]);return e.jsx(Ps,{open:t,onOpenChange:be=>{if(!be)return os();s(!0)},children:e.jsxs(Es,{style:{width:"96vw",maxWidth:"min(1400px, 96vw)",height:"90vh",maxHeight:"90vh"},className:"flex flex-col p-0 gap-0 overflow-hidden",children:[e.jsx(Os,{className:"px-6 py-4 border-b",children:e.jsx(Ls,{children:"Selecionar Mdia do Inventrio"})}),E&&e.jsx("div",{className:"p-6 text-gray-600",children:"Carregando mdias..."}),!E&&P&&e.jsx("div",{className:"p-6 text-red-600",children:P}),!E&&!P&&e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-1/2 md:h-full h-[40%] md:border-r border-b md:border-b-0 border-gray-200 overflow-y-auto p-4 md:p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ne,{placeholder:"Buscar mdia, ponto ou endereo...",value:v,onChange:be=>x(be.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:g,onValueChange:N,children:[e.jsx(Pt,{className:"w-40",children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:"all",children:"Todos"}),it.map(be=>e.jsx(De,{value:be,children:be},be))]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[rs.length," ",rs.length===1?"ponto":"pontos","  ",fs," ",fs===1?"mdia":"mdias"," disponvel(is)"]})]}),e.jsxs("div",{className:"space-y-3",children:[rs.map(be=>{const Me=ws.get(be.id)??[],Fe=Number(be?.basePriceMonth??0),Dt=Me.reduce((Xt,ds)=>{const ys=Number(ds.priceMonth??0);return!Number.isFinite(ys)||ys<=0?Xt:Xt===null||ys<Xt?ys:Xt},null),Mt=Dt!==null?Dt:Number.isFinite(Fe)&&Fe>0?Fe:null,Ns=Me.length===1?Me[0].dimensions:void 0;return e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${I===be.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>an(be),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:be.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[be.type,Me.length?`  ${Me.length} ${Me.length===1?"unidade":"unidades"}`:"  sem unidades"]}),Tt(be)&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-2",children:[e.jsx(ra,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:Tt(be)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-indigo-600 font-medium",children:Mt!==null?lt(Mt)+(Me.length?"/ms":""):"--"}),Ns&&e.jsx("span",{className:"text-gray-500",children:Ns})]})]}),e.jsx($l,{className:"w-4 h-4 text-gray-400"})]})},be.id)}),rs.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum ponto encontrado"})})]})]}),e.jsx("div",{className:"md:w-1/2 md:h-full h-[60%] flex-1 overflow-hidden p-4 md:p-6",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:gs?Fs.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"Detalhes da Mdia"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:gs.name}),e.jsx("p",{className:"text-gray-600 mb-2",children:gs.type}),Tt(gs)&&e.jsx("p",{className:"text-sm text-gray-500",children:Tt(gs)})]})]}),Fs.length>1&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Unidade"}),e.jsxs(_t,{value:F?.id??"",onValueChange:be=>{const Me=Fs.find(Fe=>Fe.id===be);Me&&Ws(Me)},children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione uma unidade"})}),e.jsx(Et,{children:Fs.map(be=>{const Me=mt[be.id],Fe=Me!=="available",Dt=Me==="occupied"?" (Ocupado)":Me==="unknown"?" (Indisponvel)":Me==="checking"?" (Verificando...)":"";return e.jsxs(De,{value:be.id,disabled:Fe,children:[be.label,Dt]},be.id)})})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Perodo considerado: ",Ts(Ue.start),"  ",Ts(Ue.end)]}),!c&&e.jsxs("div",{className:"mt-1 text-xs text-amber-700",children:["Defina a ",e.jsx("b",{children:"Data de Incio"})," no passo 1 para checar com preciso."]}),zt&&e.jsx("div",{className:"mt-1 text-xs text-red-600",children:zt})]}),F&&e.jsxs("div",{className:"text-xs",children:[Fs.length<=1&&e.jsxs("div",{className:"text-gray-500",children:["Perodo considerado: ",Ts(Ue.start),"  ",Ts(Ue.end)]}),js==="checking"&&e.jsx("div",{className:"text-gray-500 mt-1",children:"Verificando ocupao..."}),js==="occupied"&&e.jsx("div",{className:"text-red-600 mt-1",children:"Esta face est ocupada no perodo selecionado."}),js==="unknown"&&e.jsx("div",{className:"text-red-600 mt-1",children:"No foi possvel verificar a ocupao desta face."})]}),F&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Empresa vinculada *"}),R&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando empresas..."}),!R&&J&&e.jsx("div",{className:"text-sm text-red-600",children:J}),!R&&!J&&(V.length?e.jsxs(_t,{value:se,onValueChange:fe,children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:V.length>1?"Selecione a empresa":"Empresa"})}),e.jsx(Et,{children:V.map(be=>{const Me=(be.ownerCompany?.name||be.ownerName||"Empresa").trim(),Fe=(be.ownerCompany?.document||be.ownerDocument||"").trim(),Dt=Fe?`${Me}  ${Fe}`:Me;return e.jsx(De,{value:be.id,children:Dt},be.id)})})]}):e.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3",children:"Este ponto no possui empresa vinculada. Vincule uma empresa ao ponto no Inventrio para poder adicion-lo  proposta."})),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A empresa selecionada ser usada como referncia do item (e no PDF na prxima etapa)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Descrio *"}),e.jsx(Ne,{value:H,onChange:be=>re(be.target.value),placeholder:"Descrio do item"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Tempo de ocupao *"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Z,{type:"button",size:"sm",variant:Ge==="15"?"default":"outline",onClick:()=>{Xe("15"),tt(15)},children:"15 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:Ge==="30"?"default":"outline",onClick:()=>{Xe("30"),tt(30)},children:"30 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:Ge==="custom"?"default":"outline",onClick:()=>{Xe("custom"),tt(be=>be>=15?be:15)},children:"Personalizado"})]}),e.jsxs("div",{className:"mt-2",children:[Ge==="custom"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Z,{type:"button",size:"sm",variant:"outline",onClick:()=>tt(be=>Math.min($e,Math.max(0,be)+15)),children:"+15 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:"outline",onClick:()=>tt(be=>Math.min($e,Math.max(0,be)+30)),children:"+30 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:"ghost",onClick:()=>tt(0),children:"Limpar"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Total: ",e.jsx("b",{children:Je})," dias"]})]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",Je," dias"]}),!Ds&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Selecione um tempo vlido (mltiplo de 15, mximo ",$e," dias)."]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ri,{id:"clientProvidesBanner",checked:ut,onCheckedChange:be=>wt(be===!0)}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientProvidesBanner",className:"text-sm text-gray-700",children:"Cliente ir fornecer a lona"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se marcado, no contabiliza custo de produo (somente instalao/montagem)."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo mensal"}),e.jsx(Ne,{value:lt(He.priceMonth),readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo quinzenal"}),e.jsx(Ne,{value:lt(He.priceBiweekly),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Aluguel por unidade"}),e.jsx("span",{className:"text-gray-900",children:lt(He.rentPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Custos (produo/instalao)"}),e.jsx("span",{className:"text-gray-900",children:lt(He.upfrontPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total por unidade"}),e.jsx("span",{className:"text-gray-900",children:lt(He.perUnitTotal)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Quantidade *"}),e.jsx(Ne,{type:"number",min:"1",value:G,onChange:be=>W(Math.max(1,parseInt(be.target.value)||1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Preo por unidade (calculado)"}),e.jsx(Ne,{value:lt(ne),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Aplicar desconto em"}),e.jsxs(_t,{value:ae,onValueChange:be=>Ie(be),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(De,{value:qs.TOTAL,children:"Total (aluguel + custos)"}),e.jsx(De,{value:qs.RENT,children:"Aluguel"}),e.jsx(De,{value:qs.COSTS,children:"Custos (produo/instalao)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define sobre qual parte do item o desconto ser aplicado."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Desconto em %"}),e.jsx(Ne,{type:"number",min:"0",step:"0.01",value:ee||0,onChange:be=>{const Me=Math.max(0,parseFloat(be.target.value)||0);U(Me),Me>0&&Y(0)},disabled:!!le})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Desconto em R$"}),e.jsx(Ne,{type:"number",min:"0",step:"0.01",value:le||0,onChange:be=>{const Me=Math.max(0,parseFloat(be.target.value)||0);Y(Me),Me>0&&U(0)},disabled:!!ee})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" Preencha apenas um campo. O desconto ser aplicado sobre ",nt,"."]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:lt(Oe)})]}),e.jsxs("p",{className:"text-sm text-indigo-700 mt-1",children:[G," x ",lt(ne)]}),Ke>0&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:lt(me)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",ee>0?` (${ee}%)`:""," (",nt,"):"]}),e.jsxs("span",{children:["-",lt(Ke)]})]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ra,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Este ponto ainda no possui unidades/mdias cadastradas."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cadastre unidades no mdulo de Inventrio."})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ra,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Selecione um ponto para adicionar  proposta"})]})})}),e.jsxs("div",{className:"pt-4 mt-4 border-t flex flex-col sm:flex-row gap-3",children:[e.jsx(Z,{variant:"outline",className:"flex-1",onClick:os,children:"Cancelar"}),e.jsx(Z,{className:"flex-1",onClick:yt,disabled:!Ae,children:"Adicionar Item"})]})]})})]})]})})}function f$({open:t,onOpenChange:s,defaultPeriod:n,onAddItem:r}){const{company:o}=Fo(),c=m.useMemo(()=>({page:1,pageSize:500}),[]),{products:u,loading:h,error:f,refetch:v}=YS(c),x=ee=>new Date(`${ee}T00:00:00`),[g,N]=m.useState(""),[w,j]=m.useState(""),[C,k]=m.useState(1),[E,S]=m.useState(0),[P,D]=m.useState(0),[I,O]=m.useState(0),[F,X]=m.useState(n.startDate),[Q,V]=m.useState(n.endDate);m.useEffect(()=>{t&&(X(n.startDate),V(n.endDate),v())},[t,n.startDate,n.endDate,v]);const $=m.useMemo(()=>u.find(ee=>ee.id===g),[u,g]),R=ee=>{N(ee);const U=u.find(le=>le.id===ee);U&&(j(U.name),S(Number(U.basePrice)||0),D(0),O(0))},z=C*E;let J=z;const ue=Number.isFinite(P)?P:0,se=Number.isFinite(I)?I:0;ue>0&&(J=J*(1-ue/100)),se>0&&(J=J-se),J=Math.max(0,J);const fe=Math.max(0,z-J),H=ee=>{const U=Math.max(0,parseFloat(ee)||0);D(U),U>0&&O(0)},re=ee=>{const U=Math.max(0,parseFloat(ee)||0);O(U),U>0&&D(0)},G=()=>{if(!g)return;const ee={id:`item${Date.now()}${Math.random()}`,companyId:o?.id||$?.companyId||"",proposalId:"",mediaUnitId:void 0,productId:g,description:w,startDate:F,endDate:Q,quantity:C,unitPrice:E,discountPercent:ue>0?ue:void 0,discountAmount:se>0?se:void 0,totalPrice:J,createdAt:new Date,updatedAt:new Date};r(ee),W()},W=()=>{N(""),j(""),k(1),S(0),D(0),O(0),X(n.startDate),V(n.endDate),s(!1)},ne=!!g&&!!w&&C>0&&E>=0,K=ee=>(Number.isFinite(ee)?ee:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return e.jsx(Ps,{open:t,onOpenChange:ee=>{if(!ee)return W();s(!0)},children:e.jsxs(Es,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Os,{children:e.jsx(Ls,{children:"Adicionar Produto/Servio"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"product",children:"Produto/Servio *"}),e.jsxs(_t,{value:g,onValueChange:R,disabled:h,children:[e.jsx(Pt,{id:"product",children:e.jsx(At,{placeholder:h?"Carregando...":f?"Erro ao carregar produtos":"Selecione um produto ou servio"})}),e.jsx(Et,{children:u.map(ee=>e.jsxs(De,{value:ee.id,children:[ee.name," - ",K(ee.basePrice||0),ee.category?` (${ee.category})`:""]},ee.id))})]}),$&&e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," ",$.type]}),$.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Descrio:"})," ",$.description]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"description",children:"Descrio para a Proposta *"}),e.jsx(Va,{id:"description",rows:3,placeholder:"Descreva como este item aparecer na proposta",value:w,onChange:ee=>j(ee.target.value)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Voc pode personalizar a descrio que aparecer na proposta."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"startDate",children:"Data de Incio"}),e.jsx(Ne,{id:"startDate",type:"date",value:F?F.toISOString().split("T")[0]:"",onChange:ee=>X(ee.target.value?x(ee.target.value):void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"endDate",children:"Data de Trmino"}),e.jsx(Ne,{id:"endDate",type:"date",value:Q?Q.toISOString().split("T")[0]:"",onChange:ee=>V(ee.target.value?x(ee.target.value):void 0)})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opcional. Use se o produto/servio tiver perodo especfico."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"quantity",children:"Quantidade *"}),e.jsx(Ne,{id:"quantity",type:"number",min:"1",value:C,onChange:ee=>k(Math.max(1,parseInt(ee.target.value)||1))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"unitPrice",children:"Preo Unitrio (R$) *"}),e.jsx(Ne,{id:"unitPrice",type:"number",min:"0",step:"0.01",value:E,onChange:ee=>S(Math.max(0,parseFloat(ee.target.value)||0))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Desconto do Item (opcional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountPercent",className:"text-sm text-gray-600",children:"Desconto em %"}),e.jsx(Ne,{id:"discountPercent",type:"number",min:"0",step:"0.01",value:P||0,onChange:ee=>H(ee.target.value),disabled:!!I})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountAmount",className:"text-sm text-gray-600",children:"Desconto em R$"}),e.jsx(Ne,{id:"discountAmount",type:"number",min:"0",step:"0.01",value:I||0,onChange:ee=>re(ee.target.value),disabled:!!P})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:" Preencha apenas um campo. O desconto  aplicado sobre o total deste item."})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:K(J)})]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[C," x ",K(E),fe>0?`  Desc: -${K(fe)}`:""]}),fe>0&&e.jsxs("div",{className:"text-xs text-indigo-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:K(z)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",ue>0?` (${ue}%)`:"",se>0?` (${K(se)})`:"",":"]}),e.jsxs("span",{children:["-",K(fe)]})]})]})]})]}),e.jsxs(v2,{children:[e.jsx(Z,{variant:"outline",onClick:W,children:"Cancelar"}),e.jsx(Z,{onClick:G,disabled:!ne,children:"Adicionar Item"})]})]})})}const cu=360;function wr(t){return(Number.isFinite(t)?t:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function cN(t){return new Date(`${t}T00:00:00`)}function x$({open:t,onOpenChange:s,item:n,onSave:r}){const o=!!n?.mediaUnitId,[c,u]=m.useState(""),[h,f]=m.useState(1),[v,x]=m.useState(0),[g,N]=m.useState(0),[w,j]=m.useState(0),[C,k]=m.useState(qs.TOTAL),[E,S]=m.useState(void 0),[P,D]=m.useState(void 0),[I,O]=m.useState("30"),[F,X]=m.useState(30),[Q,V]=m.useState(!1);m.useEffect(()=>{if(!(!t||!n))if(u(n.description||""),f(Number(n.quantity)||1),N(Number(n.discountPercent)||0),j(Number(n.discountAmount)||0),k(n.discountApplyTo??qs.TOTAL),n.mediaUnitId){const Y=Number(n.occupationDays)||30;X(Y),O(Y===15?"15":Y===30?"30":"custom"),V(!!n.clientProvidesBanner),S(void 0),D(void 0)}else S(n.startDate?new Date(n.startDate):void 0),D(n.endDate?new Date(n.endDate):void 0),V(!1),O("30"),X(30),x(Number(n.unitPrice)||0)},[t,n]);const $=m.useMemo(()=>{if(!n||!n.mediaUnitId)return{priceMonth:0,priceBiweekly:0,rentPerUnit:0,upfrontPerUnit:0,perUnitTotal:v};const Y=Number.isFinite(F)?F:0,ae=Math.min(Math.max(0,Y),cu),Ie=ae>=15&&ae%15==0,$e=Number(n.priceMonthSnapshot)||0,Ge=Number(n.priceBiweeklySnapshot)||0,Xe=Math.floor(ae/30),Je=Math.floor(ae%30/15),tt=Xe*$e+Je*Ge,ut=Number(n.installationCostSnapshot)||0,wt=Q?0:Number(n.productionCostSnapshot)||0,mt=ut+wt,kt=Ie?tt+mt:0;return{priceMonth:$e,priceBiweekly:Ge,rentPerUnit:tt,upfrontPerUnit:mt,perUnitTotal:kt}},[n,F,Q,v]);m.useEffect(()=>{t&&n?.mediaUnitId&&x($.perUnitTotal)},[t,n?.mediaUnitId,$.perUnitTotal]);const R=Math.max(1,Number(h)||1),z=Number.isFinite(g)?g:0,J=Number.isFinite(w)?w:0,ue=o?R*$.rentPerUnit:0,se=o?R*$.upfrontPerUnit:0,fe=o?ue+se:R*v,H=o?C:qs.TOTAL,re=H===qs.RENT?ue:H===qs.COSTS?se:fe,G=z>0?re*z/100:J>0?Math.min(J,re):0,W=Math.max(0,fe-G),ne=Math.max(0,G),K=H===qs.RENT?"o aluguel":H===qs.COSTS?"os custos (produo/instalao)":"o total do item",ee=!o||F>=15&&F<=cu&&F%15===0,U=()=>{if(!n)return;const Y={...n,description:c,quantity:h,unitPrice:v,discountPercent:z>0?z:void 0,discountAmount:J>0?J:void 0,discountApplyTo:o?C:qs.TOTAL,totalPrice:W,updatedAt:new Date};n.mediaUnitId?(Y.occupationDays=F,Y.clientProvidesBanner=Q,Y.startDate=void 0,Y.endDate=void 0):(Y.startDate=E,Y.endDate=P),r(Y),s(!1)},le=()=>{s(!1)};return n?e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-xl",children:[e.jsx(Os,{children:e.jsx(Ls,{children:"Editar Item"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Descrio"}),e.jsx(Va,{value:c,onChange:Y=>u(Y.target.value)})]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tempo de ocupao"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Z,{type:"button",size:"sm",variant:I==="15"?"default":"outline",onClick:()=>{O("15"),X(15)},children:"15 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:I==="30"?"default":"outline",onClick:()=>{O("30"),X(30)},children:"30 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:I==="custom"?"default":"outline",onClick:()=>{O("custom"),X(Y=>Y>=15?Y:15)},children:"Personalizado"})]}),I==="custom"?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Z,{type:"button",size:"sm",variant:"outline",onClick:()=>X(Y=>Math.min(cu,Math.max(0,Y)+15)),children:"+15 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:"outline",onClick:()=>X(Y=>Math.min(cu,Math.max(0,Y)+30)),children:"+30 dias"}),e.jsx(Z,{type:"button",size:"sm",variant:"ghost",onClick:()=>X(0),children:"Limpar"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Total: ",e.jsx("b",{children:F})," dias"]})]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",F," dias"]}),!ee&&e.jsxs("p",{className:"text-xs text-red-600",children:["Selecione um tempo vlido (mltiplo de 15, mximo ",cu," dias)."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ri,{id:"clientProvidesBanner",checked:Q,onCheckedChange:Y=>V(Y===!0)}),e.jsxs("div",{children:[e.jsx(je,{htmlFor:"clientProvidesBanner",children:"Cliente ir fornecer a lona"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se marcado, no contabiliza custo de produo (somente instalao/montagem)."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Preo mensal"}),e.jsx(Ne,{value:wr($.priceMonth),readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Preo quinzenal"}),e.jsx(Ne,{value:wr($.priceBiweekly),readOnly:!0,disabled:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Aluguel por unidade"}),e.jsx("span",{className:"text-gray-900",children:wr($.rentPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Custos (produo/instalao)"}),e.jsx("span",{className:"text-gray-900",children:wr($.upfrontPerUnit)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total por unidade"}),e.jsx("span",{className:"text-gray-900",children:wr($.perUnitTotal)})]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Data de incio"}),e.jsx(Ne,{type:"date",value:E?E.toISOString().split("T")[0]:"",onChange:Y=>S(Y.target.value?cN(Y.target.value):void 0)})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Data de fim"}),e.jsx(Ne,{type:"date",value:P?P.toISOString().split("T")[0]:"",onChange:Y=>D(Y.target.value?cN(Y.target.value):void 0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Quantidade"}),e.jsx(Ne,{type:"number",min:1,value:h,onChange:Y=>f(Math.max(1,parseInt(Y.target.value)||1))})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Preo Unitrio"}),e.jsx(Ne,{type:o?"text":"number",min:0,step:"0.01",value:o?wr(v):v,onChange:Y=>{o||x(Math.max(0,parseFloat(Y.target.value)||0))},readOnly:o,disabled:o})]})]}),o&&e.jsxs("div",{children:[e.jsx(je,{children:"Aplicar desconto em"}),e.jsxs(_t,{value:C,onValueChange:Y=>k(Y),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(De,{value:qs.TOTAL,children:"Total (aluguel + custos)"}),e.jsx(De,{value:qs.RENT,children:"Aluguel"}),e.jsx(De,{value:qs.COSTS,children:"Custos (produo/instalao)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define sobre qual parte do item o desconto ser aplicado."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Desconto em %"}),e.jsx(Ne,{type:"number",min:0,step:"0.01",value:g||0,onChange:Y=>{const ae=Math.max(0,parseFloat(Y.target.value)||0);N(ae),ae>0&&j(0)},disabled:!!w})]}),e.jsxs("div",{children:[e.jsx(je,{children:"Desconto em R$"}),e.jsx(Ne,{type:"number",min:0,step:"0.01",value:w||0,onChange:Y=>{const ae=Math.max(0,parseFloat(Y.target.value)||0);j(ae),ae>0&&N(0)},disabled:!!g})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" Preencha apenas um campo. O desconto ser aplicado sobre ",K,"."]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-900",children:"Total do Item:"}),e.jsx("span",{className:"text-indigo-900 font-medium",children:wr(W)})]}),e.jsxs("p",{className:"text-sm text-indigo-700 mt-1",children:[h," x ",wr(v)]}),ne>0&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Original:"}),e.jsx("span",{children:wr(fe)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Desconto",g>0?` (${g}%)`:""," (",K,"):"]}),e.jsxs("span",{children:["-",wr(ne)]})]})]})]})]}),e.jsxs(v2,{children:[e.jsx(Z,{variant:"outline",onClick:le,children:"Cancelar"}),e.jsx(Z,{onClick:U,disabled:o&&!ee,children:"Salvar"})]})]})}):null}function g$({formData:t,onItemsChange:s,onMetaChange:n,initialMediaPointId:r,initialMediaPointIds:o}){const[c,u]=m.useState(!1),[h,f]=m.useState(!1),[v,x]=m.useState(!1),[g,N]=m.useState(null),[w,j]=m.useState(null),C=r??o?.[0]??null,k=R=>{s([...t.items,R]),u(!1)};m.useEffect(()=>{if((r??o?.[0]??null)&&!h){if((t.items??[]).length>0){f(!0);return}f(!0),u(!0)}},[r,o]);const E=R=>{s([...t.items,R]),x(!1)},S=R=>{N(t.items[R]),j(R)},P=R=>{if(w!==null){const z=[...t.items];z[w]=R,s(z),N(null),j(null)}},D=R=>{const z=t.items.filter((J,ue)=>ue!==R);s(z)},I=R=>{const z=Number.isFinite(R.quantity)?R.quantity:1,J=Number.isFinite(R.unitPrice)?R.unitPrice:0,ue=z*J,se=Number.isFinite(R.totalPrice)?R.totalPrice:ue,fe=Math.max(0,ue-se),H=R.discountPercent??0,re=R.discountAmount??0,G=R.discountApplyTo??qs.TOTAL,W=R.mediaUnitId?G===qs.RENT?"no aluguel":G===qs.COSTS?"nos custos":"no total":null,ne=H>0?`${H}%`:re>0?`R$ ${re}`:null,K=ne?W?`${ne} ${W}`:ne:null;return{baseTotal:ue,finalTotal:se,discountValue:fe,label:K,discountPercent:H,discountAmount:re,applyTo:G,applyToLabel:W}},O=R=>R.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),F=R=>{if(!R)return"-";const z=new Date(R);if(Number.isNaN(z.getTime()))return"-";const[J,ue,se]=z.toISOString().split("T")[0].split("-");return`${se}/${ue}/${J}`},X=R=>{const z=Number(R??0);return!Number.isFinite(z)||z<=0?"":`${z} dias`},Q=R=>{const z=parseFloat(R)||0;n({discountPercent:z,discountAmount:0})},V=R=>{const z=parseFloat(R)||0;n({discountAmount:z,discountPercent:0})},$=R=>{if(R===""){n({assemblyMaxDays:void 0});return}const z=Math.floor(Number(R)),J=Number.isFinite(z)&&z>0?z:void 0;n({assemblyMaxDays:J})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"assemblyMaxDays",children:"Perodo mximo de montagem (dias)"}),e.jsx(Ne,{id:"assemblyMaxDays",type:"number",min:"1",step:"1",placeholder:"Ex.: 7",value:t.assemblyMaxDays??"",onChange:R=>$(R.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Opcional. Aps aprovar a proposta, o check-in deve ocorrer at esse prazo."})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(Z,{type:"button",variant:"outline",onClick:()=>u(!0),className:"gap-2",children:[e.jsx(Ah,{className:"w-4 h-4"}),"Adicionar Mdia do Inventrio"]}),e.jsxs(Z,{type:"button",variant:"outline",onClick:()=>x(!0),className:"gap-2",children:[e.jsx($c,{className:"w-4 h-4"}),"Adicionar Produto/Servio"]})]}),t.items.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum item adicionado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Adicione unidades de mdia do seu inventrio ou produtos/servios para compor esta proposta"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(Z,{type:"button",variant:"outline",onClick:()=>u(!0),className:"gap-2",children:[e.jsx(Ah,{className:"w-4 h-4"}),"Adicionar Mdia"]}),e.jsxs(Z,{type:"button",variant:"outline",onClick:()=>x(!0),className:"gap-2",children:[e.jsx($c,{className:"w-4 h-4"}),"Adicionar Produto"]})]})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Item"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Tipo"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm text-gray-600",children:"Tempo de ocupao"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Qtd"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Preo Unit."}),e.jsx("th",{className:"text-right px-4 py-3 text-sm text-gray-600",children:"Total"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm text-gray-600",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y",children:t.items.map((R,z)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[R.mediaUnitId?e.jsx(Ah,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}):e.jsx($c,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-900",children:R.description})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${R.mediaUnitId?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"}`,children:R.mediaUnitId?"Mdia":"Produto"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:R.mediaUnitId?X(R.occupationDays):R.startDate||R.endDate?`${F(R.startDate)} - ${F(R.endDate)}`:""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:R.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:O(R.unitPrice)}),e.jsx("td",{className:"px-4 py-3 text-gray-900 text-right",children:(()=>{const J=I(R);return e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:O(J.finalTotal)}),J.discountValue>0?e.jsxs("div",{className:"text-[11px] text-gray-500",children:[e.jsxs("div",{children:["Orig: ",O(J.baseTotal)]}),e.jsxs("div",{className:"text-red-600",children:["Desc",J.label?` (${J.label})`:"",": -",O(J.discountValue)]})]}):null]})})()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(z),className:"h-8 w-8 p-0",children:e.jsx(zl,{className:"w-4 h-4"})}),e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(z),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ba,{className:"w-4 h-4"})})]})})]},z))})]})})}),e.jsxs("div",{className:"border-t pt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Descontos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountPercent",children:"Desconto em %"}),e.jsx(Ne,{id:"discountPercent",type:"number",min:"0",step:"0.01",value:t.discountPercent||0,onChange:R=>Q(R.target.value),disabled:!!t.discountAmount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"discountAmount",children:"Desconto em R$"}),e.jsx(Ne,{id:"discountAmount",type:"number",min:"0",step:"0.01",value:t.discountAmount||0,onChange:R=>V(R.target.value),disabled:!!t.discountPercent})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" Preencha apenas um campo. O desconto ser aplicado sobre o subtotal dos itens."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Resumo Financeiro"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal dos itens:"}),e.jsx("span",{className:"text-gray-900",children:O(t.subtotal)})]}),(t.discountPercent||t.discountAmount)&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Desconto",t.discountPercent?` (${t.discountPercent}%)`:"",":"]}),e.jsxs("span",{className:"text-red-600",children:["-"," ",O(t.discountAmount||t.subtotal*(t.discountPercent||0)/100)]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total da Proposta:"}),e.jsx("span",{className:"text-gray-900",children:O(t.totalAmount)})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"O subtotal  calculado automaticamente a partir dos itens."})]})]}),e.jsx(p$,{open:c,onOpenChange:u,onAddItem:k,referenceStartDate:t.campaignStartDate??null,initialMediaPointId:C??void 0,allowedMediaPointIds:o??void 0}),e.jsx(f$,{open:v,onOpenChange:x,defaultPeriod:{startDate:t.campaignStartDate},onAddItem:E}),e.jsx(x$,{open:!!g,onOpenChange:R=>{R||(N(null),j(null))},item:g,onSave:P})]})}function v$(t,s=[]){let n=[];function r(c,u){const h=m.createContext(u);h.displayName=c+"Context";const f=n.length;n=[...n,u];const v=g=>{const{scope:N,children:w,...j}=g,C=N?.[t]?.[f]||h,k=m.useMemo(()=>j,Object.values(j));return e.jsx(C.Provider,{value:k,children:w})};v.displayName=c+"Provider";function x(g,N){const w=N?.[t]?.[f]||h,j=m.useContext(w);if(j)return j;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[v,x]}const o=()=>{const c=n.map(u=>m.createContext(u));return function(h){const f=h?.[t]||c;return m.useMemo(()=>({[`__scope${t}`]:{...h,[t]:f}}),[h,f])}};return o.scopeName=t,[r,y$(o,...s)]}function y$(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const u=r.reduce((h,{useScope:f,scopeName:v})=>{const g=f(c)[`__scope${v}`];return{...h,...g}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:u}),[u])}};return n.scopeName=s.scopeName,n}var b$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],JS=b$.reduce((t,s)=>{const n=fp(`Primitive.${s}`),r=m.forwardRef((o,c)=>{const{asChild:u,...h}=o,f=u?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...h,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),bv="Progress",jv=100,[j$]=v$(bv),[N$,w$]=j$(bv),e_=m.forwardRef((t,s)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:c=C$,...u}=t;(o||o===0)&&!dN(o)&&console.error(S$(`${o}`,"Progress"));const h=dN(o)?o:jv;r!==null&&!uN(r,h)&&console.error(_$(`${r}`,"Progress"));const f=uN(r,h)?r:null,v=ap(f)?c(f,h):void 0;return e.jsx(N$,{scope:n,value:f,max:h,children:e.jsx(JS.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":ap(f)?f:void 0,"aria-valuetext":v,role:"progressbar","data-state":n_(f,h),"data-value":f??void 0,"data-max":h,...u,ref:s})})});e_.displayName=bv;var t_="ProgressIndicator",s_=m.forwardRef((t,s)=>{const{__scopeProgress:n,...r}=t,o=w$(t_,n);return e.jsx(JS.div,{"data-state":n_(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:s})});s_.displayName=t_;function C$(t,s){return`${Math.round(t/s*100)}%`}function n_(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function ap(t){return typeof t=="number"}function dN(t){return ap(t)&&!isNaN(t)&&t>0}function uN(t,s){return ap(t)&&!isNaN(t)&&t<=s&&t>=0}function S$(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${jv}\`.`}function _$(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${jv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var A$=e_,P$=s_;function E$(...t){return Fw(u0(t))}function a_({className:t,value:s,...n}){return e.jsx(A$,{"data-slot":"progress",className:E$("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:e.jsx(P$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function Rs(t,s=0){if(t==null)return s;const n=typeof t=="string"?Number(t):t;return typeof n=="number"&&Number.isFinite(n)?n:s}function bh(t){if(!t)return;const s=new Date(t);if(Number.isNaN(s.getTime()))return;const n=s.toISOString().split("T")[0],r=new Date(`${n}T00:00:00`);return Number.isNaN(r.getTime())?void 0:r}function k$(t=7){const s=new Date;return s.setHours(0,0,0,0),s.setDate(s.getDate()+t),s}function sg(t,s,n){const r=(t??[]).reduce((h,f)=>h+Rs(f.totalPrice,0),0),o=Rs(s,0),c=Rs(n,0);let u=r;return o>0?u=r-o:c>0&&(u=r-r*c/100),{subtotal:r,totalAmount:Math.max(0,u)}}function D$({open:t,onOpenChange:s,proposal:n,initialMediaPointId:r,initialMediaPointIds:o,onSave:c,onNavigate:u}){const[h,f]=m.useState(1),[v,x]=m.useState(null),[g,N]=m.useState(null),[w,j]=m.useState({clientId:"",responsibleUserId:"",title:"",validUntil:void 0,conditionsText:"",discountPercent:0,discountAmount:0,assemblyMaxDays:void 0,items:[],subtotal:0,totalAmount:0}),[C,k]=m.useState(!1);m.useEffect(()=>{if(n&&t){const R=(n.items??[]).map(se=>({...se,quantity:Rs(se.quantity,1),unitPrice:Rs(se.unitPrice,0),totalPrice:Rs(se.totalPrice,0),occupationDays:se.occupationDays??void 0,clientProvidesBanner:se.clientProvidesBanner??void 0,priceMonthSnapshot:se.priceMonthSnapshot??void 0,priceBiweeklySnapshot:se.priceBiweeklySnapshot??void 0,productionCostSnapshot:se.productionCostSnapshot??void 0,installationCostSnapshot:se.installationCostSnapshot??void 0,rentTotalSnapshot:se.rentTotalSnapshot??void 0,upfrontTotalSnapshot:se.upfrontTotalSnapshot??void 0,startDate:bh(se.startDate),endDate:bh(se.endDate)})),z=Rs(n.discountPercent,0),J=Rs(n.discountAmount,0),ue=sg(R,J,z);j({clientId:n.clientId,responsibleUserId:n.responsibleUserId,title:n.title||"",campaignStartDate:bh(n.startDate),validUntil:bh(n.validUntil),conditionsText:(n.conditionsText||"").replace(/\\n/g,`
`),discountPercent:z,discountAmount:J,assemblyMaxDays:n.assemblyMaxDays??void 0,items:R,subtotal:ue.subtotal,totalAmount:ue.totalAmount})}else if(!n&&t){const $=o&&o.length?o:r?[r]:[];N($.length?$:null),x($[0]??null),j({clientId:"",responsibleUserId:"",title:"",validUntil:k$(7),conditionsText:"",discountPercent:0,discountAmount:0,assemblyMaxDays:void 0,items:[],subtotal:0,totalAmount:0}),f(1)}},[n,t,r,o]);const E=$=>{j(R=>({...R,...$}))},S=$=>{j(R=>{const z=sg($,R.discountAmount,R.discountPercent);return{...R,items:$,subtotal:z.subtotal,totalAmount:z.totalAmount}})},P=$=>{j(R=>{const z=$.discountPercent??R.discountPercent,J=$.discountAmount??R.discountAmount,ue=sg(R.items,J,z);return{...R,...$,subtotal:ue.subtotal,totalAmount:ue.totalAmount}})},D=()=>{f(1),s(!1)},I=()=>{h===1&&C&&f(2)},O=()=>{f(1)},F=$=>({clientId:w.clientId,responsibleUserId:w.responsibleUserId,title:w.title,status:$,startDate:w.campaignStartDate?.toISOString(),validUntil:w.validUntil?.toISOString(),assemblyMaxDays:w.assemblyMaxDays?Number(w.assemblyMaxDays):void 0,discountPercent:Number(w.discountPercent||0),discountAmount:Number(w.discountAmount||0),conditionsText:w.conditionsText,items:w.items.map(R=>({mediaUnitId:R.mediaUnitId,mediaPointOwnerId:R.mediaPointOwnerId??void 0,productId:R.productId,description:R.description,quantity:Number(R.quantity),unitPrice:Number(R.unitPrice),discountPercent:Number(R.discountPercent||0),discountAmount:Number(R.discountAmount||0),discountApplyTo:R.discountApplyTo??"TOTAL",occupationDays:R.occupationDays??void 0,clientProvidesBanner:R.clientProvidesBanner??void 0,priceMonthSnapshot:R.priceMonthSnapshot??void 0,priceBiweeklySnapshot:R.priceBiweeklySnapshot??void 0,productionCostSnapshot:R.productionCostSnapshot??void 0,installationCostSnapshot:R.installationCostSnapshot??void 0,rentTotalSnapshot:R.rentTotalSnapshot??void 0,upfrontTotalSnapshot:R.upfrontTotalSnapshot??void 0,startDate:(R.productId||!R.occupationDays)&&R.startDate?new Date(R.startDate).toISOString():void 0,endDate:(R.productId||!R.occupationDays)&&R.endDate?new Date(R.endDate).toISOString():void 0}))}),X=async()=>{const $=F("RASCUNHO");await c($)&&s(!1)},Q=async()=>{const $=F("ENVIADA");await c($)&&s(!1)},V=h===1?50:100;return e.jsx(Ps,{open:t,onOpenChange:$=>{$||D()},children:e.jsxs(Es,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Os,{children:[e.jsx(Ls,{children:n?"Editar Proposta":"Nova Proposta"}),e.jsxs(kr,{children:["Passo ",h," de 2 - ",h===1?"Dados Gerais":"Itens da Proposta"]})]}),e.jsx("div",{className:"px-6",children:e.jsx(a_,{value:V,className:"h-2"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[h===1&&e.jsx(h$,{formData:w,onChange:E,onValidChange:k,onClose:D,onNavigate:u}),h===2&&e.jsx(g$,{formData:w,onItemsChange:S,onMetaChange:P,initialMediaPointId:v,initialMediaPointIds:g})]}),e.jsxs("div",{className:"border-t px-6 py-4 bg-gray-50",children:[h===1&&e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(Z,{variant:"outline",onClick:D,children:"Cancelar"}),e.jsx(Z,{onClick:I,disabled:!C,children:"Prximo"})]}),h===2&&e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(Z,{variant:"ghost",onClick:O,children:"Voltar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Z,{variant:"outline",onClick:X,children:"Salvar Rascunho"}),e.jsx(Z,{onClick:Q,disabled:w.items.length===0,children:"Salvar e Enviar"})]})]})]})]})})}function T$(t){if(!t)return"-";const s=new Date(t);if(Number.isNaN(s.getTime()))return"-";const[n,r,o]=s.toISOString().split("T")[0].split("-");return`${o}/${r}/${n}`}function I$({proposals:t,onViewDetails:s,onEditProposal:n,onSendProposal:r}){if(t.length===0)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma proposta encontrada"})});const o=async c=>{const u=`${window.location.origin}/p/${c}`;try{window.open(u,"_blank","noopener,noreferrer")}catch{}try{await navigator.clipboard.writeText(u)}catch{console.log("Link pblico:",u)}};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Ttulo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Responsvel"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Itens"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Validade"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(c=>{const u=c.client?.companyName||c.client?.contactName||c.clientName||"-",h=c.client?.companyName?c.client?.contactName:void 0,f=c.responsibleUser?.name||c.responsibleUserName||"-",v=c.itemsCount??c.items?.length??void 0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:c.title||"Sem ttulo"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["ID: ...",c.id.slice(-6)]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:u}),h&&e.jsx("p",{className:"text-gray-500 text-sm",children:h})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:f}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900",children:["R$"," ",Rs(c.totalAmount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),c.discountPercent!=null&&c.discountPercent>0&&e.jsxs("p",{className:"text-green-600 text-xs",children:["-",c.discountPercent,"% desconto"]}),c.discountPercent==null&&c.discountAmount!=null&&c.discountAmount>0&&e.jsxs("p",{className:"text-green-600 text-xs",children:["-R$"," ",Rs(c.discountAmount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:typeof v=="number"?`${v} ${v===1?"item":"itens"}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(yv,{status:c.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:T$(c.validUntil)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),s(c)},"aria-label":"Ver detalhes",children:e.jsx(Tr,{className:"w-4 h-4"})}),c.status===as.RASCUNHO&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),n(c)},"aria-label":"Editar proposta",children:e.jsx(zl,{className:"w-4 h-4"})}),e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),r(c)},"aria-label":"Enviar proposta",children:e.jsx(Ru,{className:"w-4 h-4"})})]}),c.publicHash&&e.jsx(Z,{type:"button",variant:"ghost",size:"sm",title:`Copiar link pblico: /p/${c.publicHash}`,onClick:x=>{x.preventDefault(),x.stopPropagation(),o(c.publicHash)},"aria-label":"Link pblico",children:e.jsx(Mu,{className:"w-4 h-4"})})]})})]},c.id)})})]})})}const mN="ONE_MEDIA_MEDIAMAP_PRESELECT_POINT_IDS";class M$ extends m.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s){console.error("Erro ao renderizar detalhes da proposta:",s)}render(){return this.state.hasError?e.jsxs("div",{className:"p-6 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"No foi possvel abrir os detalhes da proposta."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Abra o console do navegador (F12) para ver o erro. Depois volte e tente novamente."}),e.jsx(Z,{type:"button",variant:"outline",onClick:this.props.onBack,children:"Voltar"})]}):this.props.children}}function R$({onNavigate:t}){const[s,n]=m.useState(""),[r,o]=m.useState("all"),[c,u]=m.useState(1),h=40,[f,v]=m.useState({proposalStatuses:[],campaignStatus:void 0,billingStatus:void 0,responsibleUserId:void 0,createdFrom:void 0,createdTo:void 0}),[x,g]=m.useState(!1),N=m.useMemo(()=>{if(r!=="all")return r;if(f.proposalStatuses.length)return f.proposalStatuses},[r,f.proposalStatuses]),{proposals:w,total:j,totalPages:C,stats:k,loading:E,error:S,refetch:P,createProposal:D,updateProposal:I,updateProposalStatus:O,getProposalById:F}=$S({search:s||void 0,status:N,responsibleUserId:f.responsibleUserId,createdFrom:f.createdFrom,createdTo:f.createdTo,orderBy:"createdAt",sortOrder:"desc",page:c,pageSize:h});m.useEffect(()=>{u(1)},[s,r,f.responsibleUserId,f.createdFrom,f.createdTo,f.proposalStatuses.join("|")]);const[X,Q]=m.useState(!1),[V,$]=m.useState(null),[R,z]=m.useState(null),[J,ue]=m.useState(null),[se,fe]=m.useState(null),[H,re]=m.useState(!1);m.useEffect(()=>{const ae=new URLSearchParams(window.location.search),Ie=ae.get("new"),$e=ae.get("mediaPointId"),Ge=ae.get("mediaPointIds");let Xe=[];if(Ge&&(Xe=Ge.split(",").map(Je=>String(Je||"").trim()).filter(Boolean)),!Xe.length)try{const Je=sessionStorage.getItem(mN);if(Je){const tt=JSON.parse(Je);Array.isArray(tt)&&(Xe=tt.map(ut=>String(ut||"").trim()).filter(Boolean))}}catch{}if(!Xe.length&&$e&&(Xe=[$e]),Xe.length?(ue(Xe),z(Xe[0])):(ue(null),z(null)),(Ie==="1"||Ie==="true"||Xe.length)&&($(null),Q(!0)),Ie||$e||Ge){Ie&&ae.delete("new"),$e&&ae.delete("mediaPointId"),Ge&&ae.delete("mediaPointIds");const Je=ae.toString(),tt=`${window.location.pathname}${Je?`?${Je}`:""}`;window.history.replaceState({},"",tt)}try{sessionStorage.removeItem(mN)}catch{}},[]);const G=m.useMemo(()=>{const ae=new Date().getMonth(),Ie=new Date().getFullYear(),$e=w.filter(mt=>mt.status===as.APROVADA),Ge=w.filter(mt=>mt.status!==as.RASCUNHO),Xe=Ge.length>0?Math.round($e.length/Ge.length*100):0,tt=$e.filter(mt=>{if(!mt.approvedAt)return!1;const kt=new Date(mt.approvedAt);return kt.getMonth()===ae&&kt.getFullYear()===Ie}).reduce((mt,kt)=>mt+Number(kt.totalAmount??0),0),ut=w.filter(mt=>mt.status===as.ENVIADA),wt=w.filter(mt=>mt.status===as.RASCUNHO);return{approved:$e.length,approvalRate:Xe,totalApprovedAmount:tt,sent:ut.length,drafts:wt.length}},[w]),W=m.useMemo(()=>k??{approved:G.approved,approvalRate:G.approvalRate,totalApprovedAmount:G.totalApprovedAmount,sent:G.sent,drafts:G.drafts},[k,G]),ne=()=>{$(null),z(null),ue(null),Q(!0)},K=async ae=>{try{re(!0);const Ie=await F(ae.id);$(Ie),Q(!0)}catch{ye.error("Erro ao carregar proposta para edio")}finally{re(!1)}},ee=async ae=>{fe(ae);try{re(!0);const Ie=await F(ae.id);console.debug("Loaded full proposal for details:",Ie),fe($e=>$e&&$e.id===Ie.id?Ie:$e)}catch(Ie){console.warn("Erro ao carregar detalhes completos da proposta:",Ie)}finally{re(!1)}},U=async ae=>{try{await O(ae.id,as.ENVIADA),ye.success("Proposta enviada."),P()}catch{ye.error("Erro ao enviar proposta")}},le=async ae=>{try{const Ie=ae.status,{status:$e,...Ge}=ae;let Xe;return V?.id?(Xe=await I(V.id,Ge),ye.success("Proposta atualizada com sucesso!")):(Xe=await D(Ge),ye.success("Proposta criada com sucesso!")),Ie&&Ie!==Xe.status&&await O(Xe.id,Ie),Q(!1),$(null),await P(),!0}catch(Ie){const $e=Ie?.response?.data?.message||"Erro ao salvar proposta";return ye.error($e),!1}},Y=ae=>{v(ae)};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Propostas"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie propostas comerciais (Proposal + ProposalItem)"})]}),e.jsxs(Z,{type:"button",className:"gap-2",onClick:ne,disabled:H,children:[e.jsx(kn,{className:"w-4 h-4"}),"Nova Proposta"]})]}),E&&e.jsx("div",{children:"Carregando propostas..."}),!E&&S&&e.jsx("div",{children:"Erro ao carregar propostas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o(as.APROVADA),children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Aprovadas"}),e.jsx(zh,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:W.approved}),e.jsxs("p",{className:"text-green-600 text-sm",children:["Taxa: ",W.approvalRate,"%"]})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Valor Aprovado"}),e.jsx(zh,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("p",{className:"text-gray-900 mb-1",children:["R$"," ",W.totalApprovedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"No ms"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o(as.ENVIADA),children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Enviadas"}),e.jsx(Ru,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:W.sent}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Aguardando retorno"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o(as.RASCUNHO),children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Rascunhos"}),e.jsx(zl,{className:"w-5 h-5 text-gray-600"})]}),e.jsx("p",{className:"text-gray-900 mb-1",children:W.drafts}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Em elaborao"})]})})]}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"pt-6",children:e.jsx(u$,{searchQuery:s,onSearchChange:n,statusFilter:r,onStatusChange:ae=>o(ae),onOpenAdvancedFilters:()=>g(!0)})})}),(s||r!=="all"||f.proposalStatuses.length>0)&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[w.length," ",w.length===1?"proposta encontrada":"propostas encontradas",j>w.length?` (de ${j})`:""]})}),e.jsxs(Re,{children:[e.jsx(I$,{proposals:w,onViewDetails:ee,onEditProposal:K,onSendProposal:U}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Pgina ",c," de ",C||1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{type:"button",variant:"outline",size:"sm",onClick:()=>u(ae=>Math.max(1,ae-1)),disabled:E||c<=1,children:"Anterior"}),e.jsx(Z,{type:"button",variant:"outline",size:"sm",onClick:()=>u(ae=>Math.min(C||1,ae+1)),disabled:E||c>=(C||1),children:"Prxima"})]})]})]}),e.jsx(o$,{open:x,onOpenChange:g,filters:f,onApplyFilters:Y}),e.jsx(D$,{open:X,onOpenChange:ae=>{Q(ae),ae||($(null),z(null),ue(null))},proposal:V,initialMediaPointId:R,initialMediaPointIds:J,onSave:le,onNavigate:t}),e.jsx(M$,{onBack:()=>fe(null),children:e.jsx(d$,{open:!!se,onOpenChange:ae=>{ae||fe(null)},proposal:se,onNavigate:t})})]})}function O$(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=m.useRef(null),x=async()=>{try{u(!0),f(null);const C=(await Te.get("/campaigns",{params:t})).data,k=Array.isArray(C)?C:C.data,E=Array.isArray(C)?k.length:C.total??k.length;n(k),o(E)}catch(j){f(j)}finally{u(!1)}};m.useEffect(()=>{v.current=()=>{x()}},[t.search,t.status,t.clientId,t.startFrom,t.startTo,t.endFrom,t.endTo,t.page,t.pageSize]),m.useEffect(()=>{let j=0;const C=()=>{if(typeof document<"u"&&document.visibilityState&&document.visibilityState!=="visible")return;const k=Date.now();k-j<800||(j=k,v.current?.())};return window.addEventListener("focus",C),document.addEventListener("visibilitychange",C),()=>{window.removeEventListener("focus",C),document.removeEventListener("visibilitychange",C)}},[]);const g=async j=>(await Te.get(`/campaigns/${j}`)).data,N=async j=>{const C=await Te.post("/campaigns",j);return n(k=>[C.data,...k]),C.data},w=async(j,C)=>{const k=await Te.put(`/campaigns/${j}`,C);return n(E=>E.map(S=>S.id===j?k.data:S)),k.data};return m.useEffect(()=>{x()},[t.search,t.status,t.clientId,t.startFrom,t.startTo,t.endFrom,t.endTo,t.page,t.pageSize]),{campaigns:s,total:r,loading:c,error:h,refetch:x,getCampaignById:g,createCampaign:N,updateCampaign:w}}function r_({status:t}){const s=r=>{switch(r){case hs.CANCELADA:return"bg-red-100 text-red-800";case hs.EM_VEICULACAO:return"bg-green-100 text-green-800";case hs.EM_INSTALACAO:return"bg-yellow-100 text-yellow-800";case hs.ATIVA:case hs.APROVADA:return"bg-blue-100 text-blue-800";case hs.AGUARDANDO_MATERIAL:return"bg-orange-100 text-orange-800";case hs.FINALIZADA:return"bg-gray-100 text-gray-800";case hs.RASCUNHO:default:return"bg-gray-100 text-gray-800"}},n=r=>{switch(r){case hs.CANCELADA:return"Cancelada";case hs.EM_VEICULACAO:return"Em veiculao";case hs.EM_INSTALACAO:return"Em instalao";case hs.ATIVA:return"Ativa";case hs.APROVADA:return"Aprovada";case hs.AGUARDANDO_MATERIAL:return"Aguardando material";case hs.FINALIZADA:return"Finalizada";case hs.RASCUNHO:default:return"Rascunho"}};return e.jsx(st,{className:s(t),children:n(t)})}function cn(t){if(t==null||t==="")return null;const s=t instanceof Date?t:new Date(t);return Number.isNaN(s.getTime())?null:s}function Gt(t,s="-"){const n=cn(t);return n?n.toLocaleDateString("pt-BR"):s}function L$(t,s="-"){const n=cn(t);return n?n.toLocaleString("pt-BR"):s}function ba(t,s="R$ 0,00"){const n=typeof t=="number"?t:typeof t=="string"?Number(t):typeof t?.toNumber=="function"?t.toNumber():Number(t);return Number.isFinite(n)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(n):s}function i_(t,s="R$ 0,00"){const n=typeof t=="number"?t:typeof t=="string"?Number(t):typeof t?.toNumber=="function"?t.toNumber():Number(t);return Number.isFinite(n)?ba(n/100,s):s}function o_(t){if(!t)return null;if(/^https?:\/\//i.test(t))return t;const s=t.indexOf("/uploads/"),n=s>=0?t.slice(s):t,r=String(Te.defaults?.baseURL??"");if(!r||r.startsWith("/"))return n;const o=r.replace(/\/?api\/?$/,"");return`${o.endsWith("/")?o.slice(0,-1):o}${n}`}function F$({campaign:t,showAllActions:s=!0,onViewDetails:n,onCheckIn:r,onGenerateReport:o,onViewBilling:c}){const u=t.client,h=(typeof t.reservedUnitsCount=="number"?t.reservedUnitsCount:void 0)??(typeof t.campaignItemsCount=="number"?t.campaignItemsCount:void 0)??(typeof t.reservationsCount=="number"?t.reservationsCount:void 0)??(t.items||[]).filter(k=>k.mediaUnitId).length,f=async()=>{try{await navigator.clipboard.writeText(t.proposalId),ye.success("ID da proposta copiado")}catch{ye.error("No foi possvel copiar o ID")}},v=Rs(t.totalAmountCents,0),x=i_(v),g=!!t.checkInAt,N=cn(t.checkInDeadlineAt),w=cn(t.startDate),j=cn(t.endDate),C=g?`${Gt(w)} - ${Gt(j)}`:N?`Check-in at ${Gt(N)}`:`${Gt(w)} - ${Gt(j)}`;return e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-gray-900",children:t.name}),e.jsx(r_,{status:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:u?.companyName||u?.contactName||"Cliente no encontrado"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{children:"Proposta ID:"}),e.jsxs("button",{type:"button",className:"font-mono text-gray-700 hover:text-gray-900",title:t.proposalId,onClick:f,children:["...",t.proposalId.slice(-6)]}),e.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",title:"Copiar ID",onClick:f,children:e.jsx($n,{className:"w-4 h-4"})})]}),e.jsx("span",{children:""}),e.jsx("span",{children:C}),e.jsx("span",{children:""}),e.jsxs("span",{children:[h," ",h===1?"unidade":"unidades"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-gray-900",children:x})})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-100",children:[e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>n(t),children:[e.jsx(Tr,{className:"w-4 h-4"}),"Ver Detalhes"]}),s&&r&&t.status==="EM_INSTALACAO"&&e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>r(t),children:[e.jsx(IE,{className:"w-4 h-4"}),"Check-in"]}),e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>o(t),children:[e.jsx(nn,{className:"w-4 h-4"}),"Relatrio"]}),s&&c&&e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>c(t),children:[e.jsx(Nu,{className:"w-4 h-4"}),"Faturamento"]})]})]})})}function ng({campaigns:t,showAllActions:s=!0,onViewDetails:n,onCheckIn:r,onGenerateReport:o,onViewBilling:c}){return t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma campanha encontrada"})}):e.jsx("div",{className:"space-y-4",children:t.map(u=>e.jsx(F$,{campaign:u,showAllActions:s,onViewDetails:n,onCheckIn:r,onGenerateReport:o,onViewBilling:c},u.id))})}function $$({campaigns:t,onViewDetails:s,onCheckIn:n}){const r=(t||[]).filter(o=>o.status===hs.EM_INSTALACAO);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(eD,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-900",children:"Instalaes OOH"}),e.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Acompanhe campanhas em fase de instalao. Ao concluir a instalao, realize o ",e.jsx("b",{children:"check-in"})," com 1 foto por face."]})]})]})}),r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ra,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"Nenhuma instalao em andamento"}),e.jsx("p",{className:"text-sm",children:"Quando uma campanha estiver em EM_INSTALACAO, ela aparecer aqui."})]}):e.jsx("div",{className:"space-y-4",children:r.map(o=>{const c=cn(o.checkInDeadlineAt),u=cn(o.startDate),h=cn(o.endDate),f=(typeof o.reservedUnitsCount=="number"?o.reservedUnitsCount:void 0)??(typeof o.campaignItemsCount=="number"?o.campaignItemsCount:void 0)??(typeof o.reservationsCount=="number"?o.reservationsCount:void 0)??o.items?.length??0,v=o.client?.contactName||o.client?.companyName||o.clientName||"",x=async()=>{try{await navigator.clipboard.writeText(o.proposalId),ye.success("ID da proposta copiado")}catch{ye.error("No foi possvel copiar o ID")}};return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsx("span",{children:c?`Check-in at ${Gt(c)}`:u&&h?`${Gt(u)} - ${Gt(h)}`:"-"}),e.jsx("span",{children:""}),e.jsxs("span",{children:[f," unidades"]})]}),o.proposalId&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1 inline-flex items-center gap-1",children:[e.jsx("span",{children:"Proposta ID:"}),e.jsxs("button",{type:"button",className:"font-mono text-gray-600 hover:text-gray-900",title:o.proposalId,onClick:x,children:["...",o.proposalId.slice(-6)]}),e.jsx("button",{type:"button",className:"p-1 rounded hover:bg-gray-100",title:"Copiar ID",onClick:x,children:e.jsx($n,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{variant:"outline",onClick:()=>s(o),children:"Ver detalhes"}),n&&e.jsx(Z,{onClick:()=>n(o),children:"Check-in"})]})]})},o.id)})})]})}function z$({open:t,onOpenChange:s,campaign:n,defaultTab:r="summary",onRequestCheckIn:o}){const c=Jt(),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState([]),[N,w]=m.useState([]),[j,C]=m.useState([]),[k,E]=m.useState(null),S=async()=>{if(n)try{h(!0);try{const K=(await Te.get(`/campaigns/${n.id}/details`))?.data;if(K&&typeof K=="object"&&K.campaign){v(K.campaign),g(Array.isArray(K.invoices)?K.invoices:[]),w(Array.isArray(K.forecastInvoices)?K.forecastInvoices:[]),C(Array.isArray(K.reservations)?K.reservations:[]),E(K.checkIn??null);return}}catch{}const[H,re,G,W]=await Promise.allSettled([Te.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),Te.get("/billing-invoices/forecast",{params:{campaignId:n.id}}),Te.get("/reservations",{params:{campaignId:n.id,orderBy:"startDate"}}),Te.get(`/campaigns/${n.id}/checkin`)]);v(null),g(H.status==="fulfilled"&&Array.isArray(H.value.data)?H.value.data:[]),w(re.status==="fulfilled"&&Array.isArray(re.value.data)?re.value.data:[]),C(G.status==="fulfilled"&&Array.isArray(G.value.data)?G.value.data:[]),E(W.status==="fulfilled"?W.value.data:null)}catch(H){console.error(H),ye.error("Erro ao carregar dados da campanha."),v(null),g([]),w([]),C([]),E(null)}finally{h(!1)}};m.useEffect(()=>{t&&S()},[t,n?.id]);const P=f??n,D=P?.client?.companyName||P?.client?.contactName||P?.clientName||"-",I=!!P?.checkInAt,O=cn(P?.checkInDeadlineAt),F=m.useMemo(()=>{if(!P)return"-";const H=cn(P.startDate),re=cn(P.endDate);return I?`${Gt(H)} - ${Gt(re)}`:O?`Check-in at ${Gt(O)}`:`${Gt(H)} - ${Gt(re)}`},[P,I,O]),X=m.useMemo(()=>{const H=x.filter(G=>G.status===et.PAGA).reduce((G,W)=>G+Number(W.amount||0),0),re=x.filter(G=>G.status===et.ABERTA||G.status===et.VENCIDA).reduce((G,W)=>G+Number(W.amount||0),0);return{paid:H,openAmount:re}},[x]),Q=m.useMemo(()=>{const H=U=>U.status===et.PAGA,re=U=>U.status===et.CANCELADA;if(!x.length)return{ok:!0,pending:[]};const G=x.filter(U=>U.type===Ln.UPFRONT&&!re(U)),W=x.filter(U=>U.type===Ln.RENT&&!re(U)),ne=W.slice().sort((U,le)=>{const Y=U.sequence??9999,ae=le.sequence??9999;return Y!==ae?Y-ae:new Date(U.dueDate).getTime()-new Date(le.dueDate).getTime()})[0];let K=[];if(G.length||W.length)K=[...G,...ne?[ne]:[]];else{const U=Math.min(...x.map(le=>new Date(le.dueDate).getTime()));K=x.filter(le=>new Date(le.dueDate).getTime()===U)}const ee=K.filter(U=>!H(U));return{ok:ee.length===0,pending:ee}},[x]),V=m.useMemo(()=>P?P.approvedAt?new Date(P.approvedAt).getDate():x.length?new Date(x[0].dueDate).getDate():null:null,[P,x]),$=m.useMemo(()=>{const H=G=>G.status===et.PAGA,re=G=>G.status===et.CANCELADA;return x.filter(G=>!H(G)&&!re(G)).slice().sort((G,W)=>new Date(G.dueDate).getTime()-new Date(W.dueDate).getTime())[0]||null},[x]),R=m.useMemo(()=>{const H=x.some(G=>!!G.requiresConfirmation&&G.status!==et.PAGA&&G.status!==et.CANCELADA),re=N.some(G=>!!G.requiresConfirmation);return H||re},[x,N]),z=k?.faces??[],J=z.filter(H=>!!H?.photo?.photoUrl).length,ue=z.length,se=z.length>0?z.length:P?.reservedUnitsCount??P?.campaignItemsCount??j.length??0;if(!P)return null;const fe=H=>{const re=H==="CONFIRMADA"?"bg-green-100 text-green-800":H==="CANCELADA"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800";return e.jsx(st,{className:re,children:H})};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsx(Es,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx(Os,{children:e.jsx(Ls,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:P.name}),e.jsx(r_,{status:P.status})]})})}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:D}),e.jsx("span",{children:""}),e.jsx("span",{children:F}),!!P.totalAmountCents&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:i_(P.totalAmountCents)})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:e.jsxs(zi,{defaultValue:r,className:"h-full flex flex-col min-h-0",children:[e.jsxs(Bi,{className:"w-full justify-start px-6 py-0 h-12 border-b rounded-none bg-transparent overflow-x-auto flex-nowrap",children:[e.jsx(cs,{value:"summary",className:"flex-none",children:"Resumo"}),e.jsx(cs,{value:"media",className:"flex-none",children:"Veiculaes"}),e.jsx(cs,{value:"installations",className:"flex-none",children:"Instalaes OOH"}),e.jsx(cs,{value:"billing",className:"flex-none",children:"Financeiro"}),e.jsx(cs,{value:"messages",className:"flex-none",children:"Mensagens"})]}),e.jsxs(As,{value:"summary",className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:[u&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando dados..."}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Unidades planejadas"}),e.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:se})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Check-in"}),e.jsx("p",{className:"text-2xl font-semibold text-purple-900",children:I?"OK":ue>0?`${J}/${ue}`:""})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Pago"}),e.jsx("p",{className:"text-2xl font-semibold text-green-900",children:ba(X.paid)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Em Aberto"}),e.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:ba(X.openAmount)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600",children:e.jsx("b",{children:"Resumo rpido"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(st,{className:"bg-gray-100 text-gray-800",children:["Reservas: ",j.length]}),e.jsxs(st,{className:"bg-gray-100 text-gray-800",children:["Faturas: ",x.length]}),P?.proposalId?e.jsxs(st,{className:"bg-gray-100 text-gray-800",children:["Proposta: ",P.proposalId.slice(0,8),""]}):null]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["No novo fluxo, as ",e.jsx("b",{children:"reservas"})," so criadas automaticamente ao concluir o ",e.jsx("b",{children:"check-in"})," (1 foto por face). Antes do check-in,  normal a campanha no ter reservas."]})]})]}),e.jsxs(As,{value:"media",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Reservas da campanha"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:S,disabled:u,children:"Atualizar"})]}),u?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando reservas..."}):j.length===0?e.jsxs("div",{className:"text-sm text-gray-500",children:["Nenhuma reserva encontrada. As reservas sero criadas automaticamente ao concluir o ",e.jsx("b",{children:"check-in"}),"."]}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Ponto / Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden md:table-cell",children:"Responsvel"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden lg:table-cell",children:"Ocupao"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Perodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j.map(H=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium text-gray-900",children:H.mediaPointName||"-"}),e.jsx("div",{className:"text-xs text-gray-600",children:H.mediaUnitLabel||H.mediaUnitId})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden md:table-cell",children:H.responsibleCompanyName||H.responsibleOwnerName||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden lg:table-cell",children:H.occupationDays?`${H.occupationDays} dias`:"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[Gt(H.startDate)," - ",Gt(H.endDate)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:typeof H.rentAmount=="number"?ba(Number(H.rentAmount||0)):"-"}),e.jsx("td",{className:"px-4 py-3",children:fe(H.status)})]},H.id))})]})})]}),e.jsxs(As,{value:"installations",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-blue-900",children:" Check-in de Instalao"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Para iniciar a veiculao, realize o ",e.jsx("b",{children:"check-in"})," enviando 1 foto por face/unidade."]}),!I&&O&&e.jsxs("p",{className:"text-sm text-blue-800",children:["Prazo limite: ",e.jsx("b",{children:Gt(O)})]}),I&&P.checkInAt&&e.jsxs("p",{className:"text-sm text-blue-800",children:["Check-in realizado em: ",e.jsx("b",{children:L$(P.checkInAt)})]}),!I&&k?.blockingReasons?.length?e.jsxs("div",{className:"rounded-lg p-3 text-sm bg-yellow-50 border border-yellow-200 text-yellow-900",children:[e.jsx("div",{className:"font-medium",children:"Pendncias"}),e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-yellow-800 space-y-1",children:k.blockingReasons.slice(0,6).map((H,re)=>e.jsx("li",{children:H},`${H}-${re}`))})]}):null,!I&&x.length>0?e.jsxs("div",{className:`rounded-lg p-3 text-sm ${Q.ok?"bg-green-50 border border-green-200 text-green-900":"bg-red-50 border border-red-200 text-red-900"}`,children:[Q.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in ficar bloqueado",!Q.ok&&Q.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:Q.pending.map(H=>e.jsxs("li",{children:[H.type===Ln.UPFRONT?"Custos iniciais (produo/instalao)":H.type===Ln.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",Gt(H.dueDate)]},H.id))}):null]}):null,!I&&o&&P.status==="EM_INSTALACAO"&&e.jsx("div",{children:e.jsx(Z,{onClick:()=>o(P),disabled:x.length>0&&!Q.ok,children:"Realizar check-in"})})]}),z.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No foi possvel listar as faces/unidades desta campanha. (Caso isso persista, verifique se existem itens de campanha.)"}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Face/Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600 hidden md:table-cell",children:"Ponto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Foto"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:z.map(H=>{const re=o_(H?.photo?.photoUrl??null),G=!!re;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium text-gray-900",children:H.label||H.mediaUnitId}),e.jsx("div",{className:"text-xs text-gray-600",children:H.mediaUnitId})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 hidden md:table-cell",children:H.mediaPointName||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:G?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:G?"OK":"Pendente"}),G?e.jsxs("a",{href:re,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2",children:[e.jsx("img",{src:re,alt:"Foto do check-in",className:"w-12 h-12 object-cover rounded-md border"}),e.jsx("span",{className:"text-xs text-gray-600",children:"abrir"})]}):e.jsx("span",{className:"text-xs text-gray-500",children:""})]})})]},H.mediaUnitId)})})]})})]}),e.jsxs(As,{value:"billing",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Faturas da campanha"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:S,disabled:u,children:"Atualizar"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Regra:"})," o primeiro pagamento deve estar ",e.jsx("b",{children:"pago"})," para liberar o check-in."]}),V?e.jsxs(st,{className:"bg-gray-100 text-gray-800",children:["Recorrncia: dia ",V]}):null]}),$?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:["Prximo vencimento: ",e.jsx("b",{children:Gt($.dueDate)})]}):null,R?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana marcada como requer confirmao (regra de 30 dias antes do vencimento)."]}):null]}),x.length>0?e.jsx("div",{className:`border rounded-lg p-4 text-sm ${Q.ok?"bg-green-50 border-green-200 text-green-900":"bg-red-50 border-red-200 text-red-900"}`,children:Q.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado"}):null,u?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando faturas..."}):x.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma fatura vinculada a esta campanha."}):e.jsx("div",{className:"space-y-3",children:x.map(H=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(H.type===Ln.UPFRONT?"Custos iniciais":H.type===Ln.RENT?"Aluguel":"Fatura")+(H.sequence?`  ciclo ${H.sequence}`:"")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Venc.: ",Gt(H.dueDate),"  Valor: ",ba(Number(H.amount||0))]}),H.periodStart&&H.periodEnd?e.jsxs("p",{className:"text-xs text-gray-500",children:["Perodo: ",Gt(H.periodStart)," - ",Gt(H.periodEnd)]}):null,H.requiresConfirmation?e.jsx("p",{className:"text-xs text-blue-700",children:"Requer confirmao (regra de 30 dias antes do vencimento)"}):null]}),e.jsx(st,{className:H.status===et.PAGA?"bg-green-100 text-green-800":H.status===et.VENCIDA?"bg-red-100 text-red-800":H.status===et.CANCELADA?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:H.status})]}),H.paidAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Pago em ",Gt(H.paidAt)]})]},H.id))}),u?null:e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-gray-900",children:"Faturas futuras (previsto)"}),e.jsx(st,{className:"bg-gray-100 text-gray-800",children:"Forecast"})]}),N.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No h faturas futuras previstas para esta campanha."}):e.jsx("div",{className:"space-y-3",children:N.map(H=>{const re=cn(H.dueDate),G=cn(H.periodStart),W=cn(H.periodEnd);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Aluguel",H.sequence?`  ciclo ${H.sequence}`:""]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Venc.: ",Gt(re),"  Valor: ",ba(Number(H.amount||0))]}),G&&W?e.jsxs("p",{className:"text-xs text-gray-500",children:["Perodo: ",Gt(G)," - ",Gt(W)]}):null,H.requiresConfirmation?e.jsx("p",{className:"text-xs text-blue-700",children:"Requer confirmao (regra de 30 dias antes do vencimento)"}):null]}),e.jsx(st,{className:"bg-gray-100 text-gray-800",children:"Prevista"})]})},H.id)})})]})]}),e.jsx(As,{value:"messages",className:"flex-1 overflow-y-auto p-6 space-y-4 min-h-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Abra o mdulo ",e.jsx("span",{className:"font-medium",children:"Mensagens"})," para conversar no contexto desta campanha."]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(Z,{onClick:()=>{P&&(s(!1),c(`/app/messages?campaignId=${P.id}`))},children:"Abrir Mensagens"})})]})})]})})]})})})}function B$({open:t,onOpenChange:s,campaign:n,onCheckInComplete:r}){const[o,c]=m.useState(!1),[u,h]=m.useState(!1),[f,v]=m.useState(null),[x,g]=m.useState(!1),[N,w]=m.useState([]),[j,C]=m.useState({}),[k,E]=m.useState({}),S=m.useMemo(()=>n?f?.faces?.length?f.faces.map(z=>({mediaUnitId:z.mediaUnitId,label:z.label??void 0})):f?.expectedUnits?.length?f.expectedUnits.map(z=>({mediaUnitId:z.mediaUnitId,label:z.label??void 0})):(n.items||[]).filter(z=>!!z.mediaUnitId).map(z=>({mediaUnitId:z.mediaUnitId,label:void 0})):[],[n,f?.faces,f?.expectedUnits]),P=m.useMemo(()=>{if(!n)return null;const z=cn(f?.checkInDeadlineAt??f?.deadlineAt),J=cn(n.checkInDeadlineAt??null);return z||J},[n,f?.checkInDeadlineAt,f?.deadlineAt]),D=m.useMemo(()=>P?new Date().getTime()>P.getTime():!1,[P]),I=async()=>{if(n)try{h(!0);const z=await Te.get(`/campaigns/${n.id}/checkin`);v(z.data||null);const J={};for(const ue of z.data?.faces||[])ue.photo?.photoUrl&&(J[ue.mediaUnitId]=ue.photo.photoUrl);for(const ue of z.data?.photos||[])J[ue.mediaUnitId]=ue.photoUrl;for(const ue of z.data?.expectedUnits||[])ue.photoUrl&&(J[ue.mediaUnitId]=ue.photoUrl);E(J)}catch{v(null)}finally{h(!1)}},O=async()=>{if(n)try{g(!0);const z=await Te.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}});w(Array.isArray(z.data)?z.data:[])}catch{w([])}finally{g(!1)}},F=m.useMemo(()=>{if(!n)return{ok:!0,pending:[],nextDue:null};if(!N?.length)return{ok:!0,pending:[],nextDue:null};const z=W=>W.status===et.PAGA,J=W=>W.status===et.CANCELADA,ue=N.filter(W=>W.type===Ln.UPFRONT&&!J(W)),se=N.filter(W=>W.type===Ln.RENT&&!J(W)),fe=se.slice().sort((W,ne)=>{const K=W.sequence??9999,ee=ne.sequence??9999;return K!==ee?K-ee:new Date(W.dueDate).getTime()-new Date(ne.dueDate).getTime()})[0];let H=[];if(ue.length||se.length)H=[...ue,...fe?[fe]:[]];else{const W=Math.min(...N.map(ne=>new Date(ne.dueDate).getTime()));H=N.filter(ne=>new Date(ne.dueDate).getTime()===W)}const re=H.filter(W=>!z(W)),G=N.filter(W=>!z(W)&&!J(W)).slice().sort((W,ne)=>new Date(W.dueDate).getTime()-new Date(ne.dueDate).getTime())[0]||null;return{ok:re.length===0,pending:re,nextDue:G}},[n,N]),X=m.useMemo(()=>n?n.approvedAt?new Date(n.approvedAt).getDate():F.nextDue?new Date(F.nextDue.dueDate).getDate():N?.length?new Date(N[0].dueDate).getDate():null:null,[n,N,F.nextDue]),Q=m.useMemo(()=>N?.some(z=>!!z.requiresConfirmation&&z.status!==et.PAGA&&z.status!==et.CANCELADA),[N]);if(m.useEffect(()=>{t&&(C({}),E({}),I(),O())},[t,n?.id]),!n)return null;const V=(z,J)=>{C(ue=>({...ue,[z]:J}))},$=async()=>{try{const z=await Te.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),J=Array.isArray(z.data)?z.data:[];if(w(J),J.length===0)return!0;const ue=ne=>ne.status===et.PAGA,se=ne=>ne.status===et.CANCELADA,fe=J.filter(ne=>ne.type===Ln.UPFRONT&&!se(ne)),H=J.filter(ne=>ne.type===Ln.RENT&&!se(ne)),re=H.slice().sort((ne,K)=>{const ee=ne.sequence??9999,U=K.sequence??9999;return ee!==U?ee-U:new Date(ne.dueDate).getTime()-new Date(K.dueDate).getTime()})[0];let G=[];if(fe.length||H.length)G=[...fe,...re?[re]:[]];else{const ne=Math.min(...J.map(K=>new Date(K.dueDate).getTime()));G=J.filter(K=>new Date(K.dueDate).getTime()===ne)}return G.filter(ne=>!ue(ne)).length>0?(ye.error("Check-in bloqueado: pagamento inicial pendente."),!1):!0}catch{return!0}},R=async()=>{if(o)return;if(n.status!=="EM_INSTALACAO"){ye.error("Check-in s pode ser feito quando a campanha estiver em EM_INSTALACAO.");return}if(D){ye.error("Prazo de check-in expirado.");return}const z=S.map(se=>se.mediaUnitId);if(z.length===0){ye.error("Nenhuma unidade encontrada para check-in.");return}if(z.filter(se=>!k[se]&&!j[se]).length>0){ye.error("Envie 1 foto para todas as faces/unidades para concluir o check-in.");return}if(await $())try{c(!0);for(const fe of z){if(k[fe])continue;const H=j[fe];if(!H)continue;const re=new FormData;re.append("file",H);const G=await Te.post(`/campaigns/${n.id}/checkin/${fe}/photo`,re,{headers:{"Content-Type":"multipart/form-data"}});G.data?.photoUrl&&E(W=>({...W,[fe]:G.data.photoUrl}))}const se=await Te.post(`/campaigns/${n.id}/checkin/confirm`);ye.success("Check-in realizado com sucesso."),s(!1),r?.(se.data)}catch(se){console.error(se);const fe=se?.response?.data?.message||"Erro ao confirmar check-in.";ye.error(fe)}finally{c(!1)}};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Os,{children:e.jsxs(Ls,{children:["Check-in - ",n.name]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-1",children:[e.jsx("p",{className:"text-sm text-blue-900",children:"Envie 1 foto por face/unidade. O check-in s ser concludo quando todas as fotos estiverem presentes."}),P&&e.jsxs("p",{className:"text-xs text-blue-800",children:["Prazo limite: ",e.jsx("b",{children:Gt(P)}),D?e.jsx("span",{className:"ml-2 text-red-700",children:"(expirado)"}):null]}),e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("b",{children:"Importante:"})," o pagamento inicial deve estar quitado para liberar o check-in."]}),X?e.jsxs("p",{className:"text-xs text-blue-800",children:["Cobrana recorrente: vencimento todo dia ",e.jsx("b",{children:X}),"."]}):null,Q?e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana que requer confirmao do cliente (regra de 30 dias antes do vencimento)."]}):null]}),x?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando status de pagamento..."}):N.length>0?e.jsxs("div",{className:`border rounded-lg p-4 ${F.ok?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm ${F.ok?"text-green-900":"text-red-900"}`,children:F.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado"}),F.nextDue?e.jsxs(st,{className:"bg-gray-100 text-gray-800",children:["Prximo venc.: ",Gt(F.nextDue.dueDate)]}):null]}),!F.ok&&F.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:F.pending.map(z=>e.jsxs("li",{children:[z.type===Ln.UPFRONT?"Custos iniciais (produo/instalao)":z.type===Ln.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",Gt(z.dueDate),"  ",ba(Number(z.amount||0))]},z.id))}):null,Q?e.jsxs("p",{className:"mt-2 text-xs text-gray-700",children:["Ateno: h faturas marcadas como ",e.jsx("b",{children:"necessita confirmao"})," (regra de 30 dias antes)."]}):null]}):null,e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm text-gray-900",children:"Unidades para check-in"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:I,disabled:u,children:u?"Atualizando...":"Atualizar"})]}),S.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma unidade encontrada."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Unidade"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Foto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map(z=>{const J=k[z.mediaUnitId],ue=j[z.mediaUnitId],se=!!J||!!ue;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z.label||`ID: ${z.mediaUnitId}`}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(je,{className:"text-xs text-gray-600",children:"Enviar foto"}),e.jsx("input",{type:"file",accept:"image/*",onChange:fe=>V(z.mediaUnitId,fe.target.files?.[0]||null)}),J?e.jsx("a",{href:J,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline",children:"Ver foto enviada"}):ue?e.jsx("div",{className:"text-xs text-gray-600",children:ue.name}):null]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(st,{className:se?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:se?"OK":"Pendente"})})]},z.mediaUnitId)})})]})}),f?.blockers?.length||f?.blockingReasons?.length||f?.missingPhotos?.length?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-yellow-900 mb-2",children:"Pendncias"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm text-yellow-800 space-y-1",children:[(f?.blockers||f?.blockingReasons||[]).map(z=>e.jsx("li",{children:z},z)),f?.missingPhotos?.length?e.jsxs("li",{children:["Faltam fotos para ",f.missingPhotos.length," unidade(s)."]},"missing-photos"):null]})]}):null,e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx(Z,{variant:"outline",onClick:()=>s(!1),disabled:o,children:"Cancelar"}),e.jsx(Z,{onClick:R,disabled:o||D||S.length===0||!!(f?.blockers?.length||f?.blockingReasons?.length)||N.length>0&&!F.ok,children:o?"Confirmando...":"Confirmar Check-in"})]})]})]})})}function U$({open:t,onOpenChange:s,campaign:n}){const[r,o]=m.useState("usage"),[c,u]=m.useState(!1),[h,f]=m.useState(!1),[v,x]=m.useState(null),g=n?.id??null,N=m.useMemo(()=>`Relatrio  ${n?.name||n?.proposalTitle||"Campanha"}`,[n?.name,g]),w=async()=>{if(g)try{u(!0),x(null);const D=(await Te.get(`/campaigns/${g}/report`,{params:{type:r,mode:"preview"}})).data;x(D?.preview??D?.details??null)}catch(P){ye.error(P?.response?.data?.message||"Falha ao gerar relatrio")}finally{u(!1)}};m.useEffect(()=>{if(t){if(!g){x(null);return}w()}},[t,g,r]);const j=P=>{if(!P)return null;const D=P.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),I=(D?.[1]||D?.[2])?.trim();if(!I)return null;try{return decodeURIComponent(I)}catch{return I}},C=async P=>{if(g)try{f(!0);const D=await Te.get(`/campaigns/${g}/report`,{params:{type:r,format:P,mode:"download"},responseType:"blob"}),I=D.headers?.["content-type"]||(P==="pdf"?"application/pdf":"text/csv"),O=D.headers?.["content-disposition"],F=j(O)||`relatorio-${g}.${P}`,X=new Blob([D.data],{type:I}),Q=window.URL.createObjectURL(X),V=document.createElement("a");V.href=Q,V.download=F,document.body.appendChild(V),V.click(),V.remove(),window.URL.revokeObjectURL(Q)}catch(D){ye.error(D?.response?.data?.message||"Falha ao baixar relatrio")}finally{f(!1)}},k=v?.cover||null,E=Array.isArray(v?.photos)?v.photos:[],S=v?.summary||null;return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsx(Es,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx(Os,{children:e.jsx(Ls,{children:N})}),e.jsxs("div",{className:"mt-4 flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{className:"space-y-2 md:max-w-sm",children:[e.jsx(je,{children:"Tipo de relatrio"}),e.jsxs(_t,{value:r,onValueChange:P=>o(P),children:[e.jsx(Pt,{className:"w-full",children:e.jsx(At,{placeholder:"Escolha o relatrio"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"usage",children:"Veiculao (geral)"}),e.jsx(De,{value:"checkin",children:"Check-in (fotos)"}),e.jsx(De,{value:"media",children:"Mdias / Unidades"}),e.jsx(De,{value:"billing",children:"Faturamento"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-start md:justify-end gap-2",children:[e.jsx(Z,{variant:"outline",onClick:w,disabled:!g||c,children:c?"Gerando...":"Atualizar"}),e.jsx(Z,{variant:"outline",onClick:()=>C("csv"),disabled:!g||c||h,children:h?"Baixando...":"Baixar CSV"}),e.jsx(Z,{onClick:()=>C("pdf"),disabled:!g||c||h,children:h?"Baixando...":"Baixar PDF"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:g?c?e.jsx("div",{className:"text-sm text-gray-600",children:"Gerando prvia..."}):v?e.jsxs(e.Fragment,{children:[k?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Capa"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:k.title||n?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("div",{className:"text-sm text-gray-900",children:k.clientName||n?.clientName||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsx("div",{className:"text-sm text-gray-900",children:k.startDate||k.endDate?`${Gt(k.startDate)}  ${Gt(k.endDate)}`:n?.startDate||n?.endDate?`${Gt(n?.startDate)}  ${Gt(n?.endDate)}`:"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Gerado em"}),e.jsx("div",{className:"text-sm text-gray-900",children:Gt(cn(k.generatedAt)||new Date)})]})]})]}):null,S?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Resumo"}),e.jsx("div",{className:"mt-2 text-sm text-gray-900 whitespace-pre-wrap",children:S.text||S})]}):null,E.length>0?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Fotos"}),e.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-3",children:E.slice(0,24).map((P,D)=>{const I=P.photoUrl||P.url||null,O=o_(I);return e.jsx("a",{href:O||void 0,target:"_blank",rel:"noreferrer",className:"block",children:e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[O?e.jsx("img",{src:O,alt:"Foto",className:"w-full h-28 object-cover"}):e.jsx("div",{className:"w-full h-28 bg-gray-50 flex items-center justify-center text-xs text-gray-500",children:"sem foto"}),e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"text-xs text-gray-600 truncate",children:P.label||P.mediaUnitLabel||P.mediaUnitId||"-"})})]})},`${P.mediaUnitId||D}-${D}`)})}),E.length>24?e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Mostrando 24 de ",E.length," fotos."]}):null]}):null]}):e.jsx("div",{className:"text-sm text-gray-600",children:"Nenhuma prvia disponvel."}):e.jsx("div",{className:"text-sm text-gray-600",children:"Selecione uma campanha para gerar o relatrio."})})]})})})}function V$({open:t,onOpenChange:s,campaign:n}){const[r,o]=m.useState(!1),[c,u]=m.useState([]),[h,f]=m.useState([]),v=async()=>{if(n)try{o(!0);try{const I=(await Te.get(`/campaigns/${n.id}/details`))?.data;if(I&&typeof I=="object"){Array.isArray(I.invoices)?u(I.invoices):u([]),Array.isArray(I.forecastInvoices)?f(I.forecastInvoices):f([]);return}}catch{}const[S,P]=await Promise.allSettled([Te.get("/billing-invoices",{params:{campaignId:n.id,orderBy:"dueDate",orderDirection:"asc"}}),Te.get("/billing-invoices/forecast",{params:{campaignId:n.id}})]);u(S.status==="fulfilled"&&Array.isArray(S.value.data)?S.value.data:[]),f(P.status==="fulfilled"&&Array.isArray(P.value.data)?P.value.data:[])}catch(S){console.error(S),ye.error("Erro ao carregar faturas da campanha."),u([]),f([])}finally{o(!1)}};m.useEffect(()=>{t&&v()},[t,n?.id]);const x=m.useMemo(()=>{const S=c.filter(I=>I.status===et.PAGA).reduce((I,O)=>I+Number(O.amount||0),0),P=c.filter(I=>I.status===et.ABERTA||I.status===et.VENCIDA).reduce((I,O)=>I+Number(O.amount||0),0),D=h.reduce((I,O)=>I+Number(O.amount||0),0);return{paid:S,openAmount:P,forecastAmount:D}},[c,h]),g=m.useMemo(()=>{const S=Q=>Q.status===et.PAGA,P=Q=>Q.status===et.CANCELADA;if(!c.length)return{ok:!0,pending:[]};const D=c.filter(Q=>Q.type===Ln.UPFRONT&&!P(Q)),I=c.filter(Q=>Q.type===Ln.RENT&&!P(Q)),O=I.slice().sort((Q,V)=>{const $=Q.sequence??9999,R=V.sequence??9999;return $!==R?$-R:new Date(Q.dueDate).getTime()-new Date(V.dueDate).getTime()})[0];let F=[];if(D.length||I.length)F=[...D,...O?[O]:[]];else{const Q=Math.min(...c.map(V=>new Date(V.dueDate).getTime()));F=c.filter(V=>new Date(V.dueDate).getTime()===Q)}const X=F.filter(Q=>!S(Q));return{ok:X.length===0,pending:X}},[c]),N=m.useMemo(()=>n?n.approvedAt?new Date(n.approvedAt).getDate():c.length?new Date(c[0].dueDate).getDate():null:null,[n,c]),w=m.useMemo(()=>{const S=D=>D.status===et.PAGA,P=D=>D.status===et.CANCELADA;return c.filter(D=>!S(D)&&!P(D)).slice().sort((D,I)=>new Date(D.dueDate).getTime()-new Date(I.dueDate).getTime())[0]||null},[c]),j=m.useMemo(()=>{const S=c.some(D=>!!D.requiresConfirmation&&D.status!==et.PAGA&&D.status!==et.CANCELADA),P=h.some(D=>!!D.requiresConfirmation);return S||P},[c,h]);if(!n)return null;const C=S=>{switch(S){case et.PAGA:return"Paga";case et.VENCIDA:return"Vencida";case et.CANCELADA:return"Cancelada";default:return"Aberta"}},k=S=>{switch(S){case xs.PIX:return"PIX";case xs.BOLETO:return"Boleto";case xs.CARTAO:return"Carto";case xs.TRANSFERENCIA:return"Transferncia";default:return"-"}},E=()=>{ye.info("Integrao com tela Financeiro ser adicionada no mdulo financeiro.")};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsx(Es,{className:"w-[96vw] max-w-[1600px] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx(Os,{children:e.jsxs(Ls,{children:["Faturamento  ",n.name]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Faturas vinculadas a esta campanha"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-gray-900",children:"Resumo Financeiro"}),e.jsx(Z,{variant:"outline",onClick:E,children:"Ver no Financeiro"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-between",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Regra:"})," o primeiro pagamento deve estar ",e.jsx("b",{children:"pago"})," para liberar o check-in."]}),N?e.jsxs(st,{className:"bg-gray-100 text-gray-800",children:["Recorrncia: dia ",N]}):null]}),w?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:["Prximo vencimento: ",e.jsx("b",{children:Gt(w.dueDate)})]}):null,j?e.jsxs("div",{className:"mt-1 text-xs text-blue-800",children:[e.jsx("b",{children:"Ateno:"})," existe uma cobrana marcada como requer confirmao (regra de 30 dias antes do vencimento)."]}):null]}),c.length>0?e.jsxs("div",{className:`border rounded-lg p-4 text-sm ${g.ok?"bg-green-50 border-green-200 text-green-900":"bg-red-50 border-red-200 text-red-900"}`,children:[g.ok?"Pagamento inicial OK  check-in liberado":"Pagamento inicial pendente  check-in bloqueado",!g.ok&&g.pending.length>0?e.jsx("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-800 space-y-1",children:g.pending.map(S=>e.jsxs("li",{children:[S.type===Ln.UPFRONT?"Custos iniciais (produo/instalao)":S.type===Ln.RENT?"Aluguel (primeiro ciclo)":"Fatura inicial"," "," venc. ",Gt(S.dueDate),"  ",ba(Number(S.amount||0))]},S.id))}):null]}):null]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor Pago"}),e.jsx("p",{className:"text-gray-900",children:ba(x.paid)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Valor em Aberto"}),e.jsx("p",{className:"text-gray-900",children:ba(x.openAmount)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Faturas Futuras (previsto)"}),e.jsx("p",{className:"text-gray-900",children:ba(x.forecastAmount)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Faturas"}),r?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando faturas..."}):c.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma fatura encontrada para esta campanha."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Mtodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Pagamento"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Gt(S.dueDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ba(Number(S.amount||0))}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(st,{className:S.status===et.PAGA?"bg-green-100 text-green-800":S.status===et.VENCIDA?"bg-red-100 text-red-800":S.status===et.CANCELADA?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:C(S.status)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:k(S.paymentMethod)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S.paidAt?Gt(S.paidAt):"-"})]},S.id))})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Faturas futuras (previsto)"}),e.jsx(st,{className:"bg-gray-100 text-gray-800",children:"Forecast"})]}),r?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando previso..."}):h.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No h faturas futuras previstas para esta campanha."}):e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Seq."}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Perodo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-600",children:"Ateno"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(S=>{const P=cn(S.dueDate),D=cn(S.periodStart),I=cn(S.periodEnd);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:S.sequence??"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Gt(P)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[Gt(D),"  ",Gt(I)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ba(Number(S.amount||0))}),e.jsx("td",{className:"px-4 py-3",children:S.requiresConfirmation?e.jsx(st,{className:"bg-blue-100 text-blue-800",children:"Requer confirmao"}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})})]},S.id)})})]})})]})]})]})]})})})}function H$(){const[t,s]=m.useState(""),[n,r]=m.useState("all"),{campaigns:o,loading:c,error:u,refetch:h}=O$({search:t||void 0,status:n==="all"?void 0:n}),[f,v]=m.useState(null),[x,g]=m.useState("summary"),[N,w]=m.useState(null),[j,C]=m.useState(null),[k,E]=m.useState(null),S=m.useMemo(()=>{const V=new Date().getMonth(),$=new Date().getFullYear(),R=o.filter(se=>se.status===hs.EM_VEICULACAO),z=o.filter(se=>se.status===hs.EM_INSTALACAO),J=o.filter(se=>{if(se.status!==hs.FINALIZADA)return!1;const fe=cn(se.endDate);return fe?fe.getMonth()===V&&fe.getFullYear()===$:!1}),ue=R.reduce((se,fe)=>{const H=Number(fe.totalAmountCents||0),re=H>0?H/100:0;return se+re},0);return{emVeiculacao:R.length,emInstalacao:z.length,finalizadasMes:J.length,valorEmVeiculacao:ue}},[o]),P=m.useMemo(()=>o.filter(V=>V.status===hs.EM_INSTALACAO||V.status===hs.EM_VEICULACAO||V.status===hs.ATIVA),[o]),D=m.useMemo(()=>o.filter(V=>V.status===hs.FINALIZADA),[o]),I=m.useMemo(()=>o.filter(V=>V.status===hs.CANCELADA),[o]),O=(V,$="summary")=>{v(V),g($)},F=V=>{w(V)},X=V=>{C(V)},Q=V=>{E(V)};return e.jsxs("div",{className:"p-8",children:[c&&e.jsx("div",{children:"Carregando campanhas..."}),!c&&u&&e.jsx("div",{children:"Erro ao carregar campanhas."}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Campanhas"}),e.jsx("p",{className:"text-gray-600",children:"Acompanhe campanhas em execuo (Campaign + CampaignItem)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Em Veiculao"}),e.jsx("p",{className:"text-gray-900",children:S.emVeiculacao})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Em Instalao"}),e.jsx("p",{className:"text-gray-900",children:S.emInstalacao})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Finalizadas (Ms)"}),e.jsx("p",{className:"text-gray-900",children:S.finalizadasMes})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Valor em Veiculao"}),e.jsx("p",{className:"text-gray-900",children:ba(S.valorEmVeiculacao)})]})})]}),e.jsxs(zi,{defaultValue:"active",className:"space-y-6",children:[e.jsxs(Bi,{children:[e.jsx(cs,{value:"active",children:"Em Andamento"}),e.jsx(cs,{value:"finished",children:"Finalizadas"}),e.jsx(cs,{value:"cancelled",children:"Canceladas"}),e.jsx(cs,{value:"installations",children:"Instalaes OOH"})]}),e.jsx(As,{value:"active",children:e.jsx(ng,{campaigns:P,showAllActions:!0,onViewDetails:O,onCheckIn:F,onGenerateReport:X,onViewBilling:Q})}),e.jsx(As,{value:"finished",children:e.jsx(ng,{campaigns:D,showAllActions:!1,onViewDetails:O,onGenerateReport:X})}),e.jsx(As,{value:"cancelled",children:e.jsx(ng,{campaigns:I,showAllActions:!1,onViewDetails:O,onGenerateReport:X})}),e.jsx(As,{value:"installations",children:e.jsx($$,{campaigns:o,onViewDetails:V=>O(V,"installations"),onCheckIn:F})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Fluxo de Campanhas"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Campanha  criada automaticamente quando Proposta  aprovada. Status:"," ",e.jsx("strong",{children:"EM_INSTALACAO"})," (OOH sendo instalado)  ",e.jsx("strong",{children:"EM_VEICULACAO"})," (no ar)  ",e.jsx("strong",{children:"FINALIZADA"})," (ou ",e.jsx("strong",{children:"CANCELADA"})," por inadimplncia)"]})]}),e.jsx(z$,{open:!!f,onOpenChange:V=>!V&&v(null),campaign:f,defaultTab:x,onRequestCheckIn:F}),e.jsx(B$,{open:!!N,onOpenChange:V=>!V&&w(null),campaign:N,onCheckInComplete:()=>{h()}}),e.jsx(U$,{open:!!j,onOpenChange:V=>!V&&C(null),campaign:j}),e.jsx(V$,{open:!!k,onOpenChange:V=>!V&&E(null),campaign:k})]})}function q$(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(!1),[c,u]=m.useState(null),h=async()=>{try{o(!0),u(null);const N=(await Te.get("/reservations",{params:t})).data,w=Array.isArray(N)?N:N.data;n(w)}catch(g){u(g)}finally{o(!1)}},f=async g=>{const N=await Te.post("/reservations",g);return n(w=>[...w,N.data]),N.data},v=async(g,N)=>{const w=N?.status;if(!w)throw new Error("status  obrigatrio para atualizar a reserva");const j=await Te.patch(`/reservations/${g}/status`,{status:w});return n(C=>C.map(k=>k.id===g?j.data:k)),j.data},x=async g=>{await Te.delete(`/reservations/${g}`),n(N=>N.filter(w=>w.id!==g))};return m.useEffect(()=>{h()},[t.mediaUnitId,t.campaignId,t.proposalId,t.startDate,t.endDate,t.status]),{reservations:s,loading:r,error:c,refetch:h,createReservation:f,updateReservation:v,deleteReservation:x}}function l_({status:t}){const s=r=>{switch(r){case ya.CONFIRMADA:return"bg-green-100 text-green-800";case ya.RESERVADA:return"bg-yellow-100 text-yellow-800";case ya.CANCELADA:return"bg-red-100 text-red-800"}},n=r=>{switch(r){case ya.CONFIRMADA:return"Confirmada";case ya.RESERVADA:return"Em negociao";case ya.CANCELADA:return"Cancelada"}};return e.jsx(st,{className:s(t),children:n(t)})}function W$({reservation:t,clientName:s,unitLabel:n,pointName:r,amount:o,onClick:c}){const u=t.mediaUnitType;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:c,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:"text-gray-900",children:s||"Cliente"}),e.jsx(l_,{status:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:r||"Unidade de Mdia"}),e.jsxs("p",{className:"text-gray-500 text-xs mb-2",children:[n||t.mediaUnitLabel||"Unidade","  ",u===La.FACE?"Face":u===La.SCREEN?"Tela":"-"]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[new Date(t.startDate).toLocaleDateString("pt-BR")," -"," ",new Date(t.endDate).toLocaleDateString("pt-BR")]}),e.jsx("span",{className:"text-gray-900",children:typeof o=="number"?`R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"R$ -"})]}),t.proposalTitle&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Proposta: ",t.proposalTitle]}),!t.proposalTitle&&t.proposalId&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Proposta: ...",t.proposalId.slice(-6)]}),t.campaignName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Campanha: ",t.campaignName]}),!t.campaignName&&t.campaignId&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Campanha: ...",t.campaignId.slice(-6)]})]})}function hN(t,s){if(Number.isNaN(t.getTime())||Number.isNaN(s.getTime()))return null;const n=s.getTime()-t.getTime();return n<0?null:Math.floor(n/(1e3*60*60*24))+1}function Z$(t){if(!t)return;const s=t.rentTotalSnapshot;if(typeof s=="number"&&Number.isFinite(s)&&s>0)return s;const n=t.rentAmount,r=t.occupationDays;if(typeof n=="number"&&Number.isFinite(n)&&n>0){const x=typeof r=="number"&&r>0?r:void 0,g=new Date(t.startDate),N=new Date(t.endDate),w=hN(g,N),j=x??(w||void 0);return j?n*j:n}const o=t.mediaUnitPriceDay,c=t.mediaPointBasePriceDay,u=typeof o=="number"&&Number.isFinite(o)&&o>0?o:typeof c=="number"&&Number.isFinite(c)&&c>0?c:void 0;if(typeof u!="number")return;const h=new Date(t.startDate),f=new Date(t.endDate),v=hN(h,f);if(v)return u*v}function bl(t){return typeof t!="number"||!Number.isFinite(t)?"":`R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}function So(t){if(!t)return"";const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("pt-BR")}function G$({status:t}){const s="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";switch(t){case et.PAGA:return e.jsx("span",{className:`${s} bg-green-100 text-green-700`,children:"Paga"});case et.ABERTA:return e.jsx("span",{className:`${s} bg-yellow-100 text-yellow-800`,children:"Em aberto"});case et.VENCIDA:return e.jsx("span",{className:`${s} bg-red-100 text-red-700`,children:"Vencida"});case et.CANCELADA:return e.jsx("span",{className:`${s} bg-gray-100 text-gray-600`,children:"Cancelada"});default:return e.jsx("span",{className:`${s} bg-gray-100 text-gray-700`,children:t})}}function K$({open:t,onOpenChange:s,reservation:n,clientName:r,unitLabel:o,pointName:c,amount:u}){const h=Jt(),[f,v]=m.useState([]),[x,g]=m.useState([]),[N,w]=m.useState(!1),[j,C]=m.useState(!1),[k,E]=m.useState(null),S=n?.mediaUnitType,P=m.useMemo(()=>u??n?.estimatedAmount??Z$(n),[u,n]),D=m.useMemo(()=>{const V=f.filter(R=>R.status===et.PAGA).reduce((R,z)=>R+Number(z.amount??0),0),$=f.filter(R=>R.status===et.ABERTA||R.status===et.VENCIDA).reduce((R,z)=>R+Number(z.amount??0),0);return{paid:V,open:$}},[f]),I=async()=>{if(!n)return;const V={orderBy:"dueDate",orderDirection:"asc"};if(n.campaignId)V.campaignId=n.campaignId;else if(n.proposalId)V.proposalId=n.proposalId;else{v([]);return}w(!0),E(null);try{const $=await Te.get("/billing-invoices",{params:V}),z=(Array.isArray($.data)?$.data:[]).map(J=>({...J,amount:Number(J.amount)}));v(z)}catch($){E($?.response?.data?.message||"No foi possvel carregar as faturas."),v([])}finally{w(!1)}},O=async()=>{if(!n?.campaignId){g([]);return}C(!0);try{const V=await Te.get("/billing-invoices/forecast",{params:{campaignId:n.campaignId}}),R=(Array.isArray(V.data)?V.data:[]).map(z=>({...z,amount:Number(z.amount)}));g(R)}catch{g([])}finally{C(!1)}};m.useEffect(()=>{t&&n&&(I(),O())},[t,n?.id]);const F=n?.id?n.id.slice(-6):"",X=()=>{n?.proposalId&&(s(!1),h(`/app/proposals?proposalId=${n.proposalId}`))},Q=()=>{n?.campaignId&&(s(!1),h(`/app/campaigns?campaignId=${n.campaignId}`))};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsx(Es,{className:"p-0 w-[96vw] max-w-5xl h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"px-6 py-5 border-b",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 pr-10",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Reserva ",F||""]}),n?.status&&e.jsx(l_,{status:n.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c||n?.mediaPointName||"Ponto de Mdia"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Valor estimado"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:bl(P)})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cliente"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:r||n?.clientName||""})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Unidade"}),e.jsxs("p",{className:"text-sm text-gray-900 truncate",children:[o||n?.mediaUnitLabel||""," "," ",S===La.FACE?"Face":S===La.SCREEN?"Tela":""]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Perodo"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[So(n?.startDate)," - ",So(n?.endDate)]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden px-6 py-5",children:e.jsxs(zi,{defaultValue:"resumo",className:"h-full",children:[e.jsxs(Bi,{className:"w-full md:w-fit",children:[e.jsxs(cs,{value:"resumo",className:"gap-2",children:[e.jsx(uw,{className:"w-4 h-4"}),"Resumo"]}),e.jsxs(cs,{value:"origem",className:"gap-2",children:[e.jsx(nn,{className:"w-4 h-4"}),"Origem"]}),e.jsxs(cs,{value:"financeiro",className:"gap-2",children:[e.jsx(Nu,{className:"w-4 h-4"}),"Financeiro"]})]}),e.jsx(As,{value:"resumo",className:"flex-1 overflow-hidden",children:e.jsx(kl,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Detalhes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Proposta"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.proposalTitle||(n?.proposalId?`...${n.proposalId.slice(-6)}`:"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.campaignName||(n?.campaignId?`...${n.campaignId.slice(-6)}`:"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Dias de ocupao"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.occupationDays??""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Aluguel (snapshot)"}),e.jsx("p",{className:"text-sm text-gray-900",children:bl(n?.rentTotalSnapshot??null)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Custos iniciais (snapshot)"}),e.jsx("p",{className:"text-sm text-gray-900",children:bl(n?.upfrontTotalSnapshot??null)})]})]})]}),e.jsx("div",{className:"rounded-lg bg-indigo-50 border border-indigo-100 p-4",children:e.jsx("p",{className:"text-sm text-indigo-900",children:"No novo fluxo, as reservas so geradas automaticamente no check-in da campanha e ficam disponveis aqui apenas para consulta."})})]})})}),e.jsx(As,{value:"origem",className:"flex-1 overflow-hidden",children:e.jsx(kl,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Origem da reserva"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reservas so geradas automaticamente no check-in da campanha e ficam disponveis aqui apenas para consulta."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Proposta"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:n?.proposalTitle||""}),e.jsx("div",{className:"mt-2",children:e.jsx(Z,{variant:"outline",size:"sm",onClick:X,disabled:!n?.proposalId,children:"Ver Proposta"})})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Campanha"}),e.jsx("p",{className:"text-sm text-gray-900 truncate",children:n?.campaignName||""}),e.jsx("div",{className:"mt-2",children:e.jsx(Z,{variant:"outline",size:"sm",onClick:Q,disabled:!n?.campaignId,children:"Ver Campanha"})})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Responsvel (proprietrio/empresa)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empresa"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.responsibleCompanyName||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nome"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.responsibleOwnerName||""})]})]})]})]})})}),e.jsx(As,{value:"financeiro",className:"flex-1 overflow-hidden",children:e.jsx(kl,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Resumo financeiro"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Faturas vinculadas  campanha/proposta desta reserva."})]}),e.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{I(),O()},disabled:N||j,className:"gap-2",children:[e.jsx(e0,{className:"w-4 h-4"}),"Atualizar"]})]}),k&&e.jsx("p",{className:"text-sm text-red-600 mt-3",children:k}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-green-50 border border-green-100 p-3",children:[e.jsx("p",{className:"text-xs text-green-700",children:"Valor pago"}),e.jsx("p",{className:"text-lg font-semibold text-green-800",children:bl(D.paid)})]}),e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-100 p-3",children:[e.jsx("p",{className:"text-xs text-yellow-800",children:"Em aberto"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-900",children:bl(D.open)})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Faturas"}),N?e.jsx("p",{className:"text-sm text-gray-600",children:"Carregando faturas..."}):f.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nenhuma fatura encontrada para esta reserva."}):e.jsx("div",{className:"space-y-2",children:f.map(V=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(G$,{status:V.status}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.type==="UPFRONT"?"Custos iniciais":V.type==="RENT"?`Aluguel ${V.sequence?`#${V.sequence}`:""}`:"Fatura"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Venc.: ",So(V.dueDate),V.periodStart&&V.periodEnd?`  Perodo: ${So(V.periodStart)} - ${So(V.periodEnd)}`:""]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:bl(Number(V.amount))})})]},V.id))})]}),n?.campaignId&&e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Faturas futuras (previso)"}),j?e.jsx("p",{className:"text-sm text-gray-600",children:"Carregando previso..."}):x.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Sem previso de faturas futuras."}):e.jsx("div",{className:"space-y-2",children:x.map(V=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.type==="UPFRONT"?"Custos iniciais":V.type==="RENT"?`Aluguel ${V.sequence?`#${V.sequence}`:""}`:"Fatura"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Venc.: ",So(V.dueDate),V.periodStart&&V.periodEnd?`  Perodo: ${So(V.periodStart)} - ${So(V.periodEnd)}`:""]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:bl(Number(V.amount))})})]},V.id))})]})]})})})]})})]})})})}function pN(t,s){const n=new Date(t),r=new Date(s);n.setHours(0,0,0,0),r.setHours(0,0,0,0);const o=r.getTime()-n.getTime();return o<0?0:Math.floor(o/864e5)+1}function fN(t){const s=t.rentTotalSnapshot;if(typeof s=="number"&&Number.isFinite(s)&&s>0)return s;const n=t.rentAmount,r=t.occupationDays;if(typeof n=="number"&&Number.isFinite(n)&&n>0){const x=typeof r=="number"&&r>0?r:void 0,g=new Date(t.startDate),N=new Date(t.endDate),w=pN(g,N),j=x??(w||void 0);return j?n*j:n}const o=t.mediaUnitPriceDay,c=t.mediaPointBasePriceDay,u=typeof o=="number"&&Number.isFinite(o)&&o>0?o:typeof c=="number"&&Number.isFinite(c)&&c>0?c:void 0;if(typeof u!="number")return;const h=new Date(t.startDate),f=new Date(t.endDate),v=pN(h,f);if(v)return u*v}function Q$(){const[t,s]=m.useState(new Date),[n,r]=m.useState(new Date),[o,c]=m.useState("ALL"),[u,h]=m.useState(""),[f,v]=m.useState(null),x=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],g=Q=>{const V=Q.getFullYear(),$=Q.getMonth(),R=new Date(V,$,1),J=new Date(V,$+1,0).getDate(),ue=R.getDay();return{daysInMonth:J,startingDayOfWeek:ue}},{daysInMonth:N,startingDayOfWeek:w}=g(t),j=()=>{const Q=new Date(t.getFullYear(),t.getMonth()-1);s(Q),r(null)},C=()=>{const Q=new Date(t.getFullYear(),t.getMonth()+1);s(Q),r(null)},k=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),E=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString(),{reservations:S,loading:P,error:D}=q$({startDate:k,endDate:E,status:o==="ALL"?void 0:o}),I=m.useMemo(()=>{const Q=new Set,V=t.getFullYear(),$=t.getMonth(),R=new Date(V,$,1);R.setHours(0,0,0,0);const z=new Date(V,$+1,0);z.setHours(0,0,0,0);for(const J of S){const ue=new Date(J.startDate),se=new Date(J.endDate);if(Number.isNaN(ue.getTime())||Number.isNaN(se.getTime())||(ue.setHours(0,0,0,0),se.setHours(0,0,0,0),se<R||ue>z))continue;const fe=ue<R?R:ue,H=se>z?z:se;for(let re=new Date(fe);re<=H;re.setDate(re.getDate()+1))re.getMonth()===$&&re.getFullYear()===V&&Q.add(re.getDate())}return Q},[S,t]),O=m.useMemo(()=>{const Q=S.filter(R=>R.status!==ya.CANCELADA).length,V=S.filter(R=>R.status===ya.CONFIRMADA).length,$=S.filter(R=>R.status!==ya.CANCELADA).reduce((R,z)=>R+(fN(z)??0),0);return{activeCount:Q,confirmedCount:V,totalAmount:$}},[S]),F=m.useMemo(()=>{if(!n)return[];const Q=new Date(n);Q.setHours(0,0,0,0);const V=new Date(n);V.setHours(23,59,59,999);const $=S.filter(z=>{const J=new Date(z.startDate).getTime(),ue=new Date(z.endDate).getTime();return J<=V.getTime()&&ue>=Q.getTime()});if(!u)return $;const R=u.toLowerCase();return $.filter(z=>[z.clientName,z.mediaPointName,z.mediaUnitLabel,z.campaignName,z.proposalTitle].filter(Boolean).join(" ").toLowerCase().includes(R))},[n,S,u]),X=m.useMemo(()=>n?F.filter(Q=>Q.status!==ya.CANCELADA).length:0,[n,F]);return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Reservas"}),e.jsx("p",{className:"text-gray-600",children:"Visualize reservas por calendrio."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Reservas Ativas"}),e.jsx("p",{className:"text-gray-900",children:O.activeCount}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No ms selecionado"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Confirmadas no Perodo"}),e.jsx("p",{className:"text-gray-900",children:O.confirmedCount})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Dia Selecionado"}),e.jsx("p",{className:"text-gray-900",children:X}),e.jsx("p",{className:"text-gray-500 text-sm",children:n?new Date(n).toLocaleDateString("pt-BR"):"Selecione um dia"})]})}),e.jsx(Re,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(Le,{className:"pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Valor Estimado do Ms"}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",O.totalAmount.toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Baseado no valor estimado das reservas"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[P&&e.jsx("div",{children:"Carregando reservas..."}),!P&&D&&e.jsx("div",{children:"Erro ao carregar reservas."}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(Z,{variant:"ghost",size:"sm",onClick:j,children:e.jsx(td,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-gray-900",children:[x[t.getMonth()]," ",t.getFullYear()]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:C,children:e.jsx($l,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(_t,{value:o,onValueChange:Q=>c(Q),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:"ALL",children:"Todos os status"}),e.jsx(De,{value:ya.RESERVADA,children:"Em negociao"}),e.jsx(De,{value:ya.CONFIRMADA,children:"Confirmada"}),e.jsx(De,{value:ya.CANCELADA,children:"Cancelada"})]})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(Q=>e.jsx("div",{className:"text-center text-gray-600 text-sm py-2",children:Q},Q)),Array.from({length:w}).map((Q,V)=>e.jsx("div",{},`empty-${V}`)),Array.from({length:N}).map((Q,V)=>{const $=V+1,R=new Date(t.getFullYear(),t.getMonth(),$),z=n&&n.getDate()===$&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear(),J=I.has($);return e.jsxs("button",{onClick:()=>r(R),className:`aspect-square p-2 rounded-lg text-center transition-colors relative ${z?"bg-indigo-600 text-white":"hover:bg-gray-100 text-gray-900"}`,children:[$,J&&e.jsx("div",{className:`absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 rounded-full ${z?"bg-white":"bg-indigo-600"}`})]},$)})]})]})})}),e.jsx("div",{className:"space-y-4",children:e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-gray-900 mb-2",children:["Reservas do dia ",n?new Date(n).toLocaleDateString("pt-BR"):"-"]}),e.jsxs("div",{className:"relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ne,{placeholder:"Buscar ponto, cliente, proposta...",className:"pl-10",value:u,onChange:Q=>h(Q.target.value)})]})]}),e.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:F.length>0?F.map(Q=>{const V=fN(Q);return e.jsx(W$,{reservation:Q,clientName:Q.clientName??void 0,unitLabel:Q.mediaUnitLabel??void 0,pointName:Q.mediaPointName??void 0,amount:V,onClick:()=>v({...Q,estimatedAmount:V})},Q.id)}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:n?"Nenhuma reserva neste dia":"Selecione um dia no calendrio"})})})]})})})]}),e.jsx(K$,{open:!!f,onOpenChange:Q=>!Q&&v(null),reservation:f,clientName:f?.clientName??void 0,unitLabel:f?.mediaUnitLabel??void 0,pointName:f?.mediaPointName??void 0,amount:f?.estimatedAmount})]})}function jl(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function jh(t){return{...t,dueDate:jl(t?.dueDate)??new Date,periodStart:jl(t?.periodStart)??void 0,periodEnd:jl(t?.periodEnd)??void 0,cancelledAt:jl(t?.cancelledAt),paidAt:jl(t?.paidAt),createdAt:jl(t?.createdAt)??new Date,updatedAt:jl(t?.updatedAt)??new Date}}function X$(t){const s={};return t.amountCents!==void 0&&(s.amountCents=t.amountCents),t.dueDate!==void 0&&(s.dueDate=t.dueDate),t.status!==void 0&&(s.status=t.status),t.paymentMethod!==void 0&&(s.paymentMethod=t.paymentMethod),t.gatewayInvoiceId!==void 0&&(s.gatewayInvoiceId=t.gatewayInvoiceId),t.generateNf!==void 0&&(s.generateNf=t.generateNf),s}function c_(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const j=(await Te.get("/billing-invoices",{params:t})).data,k=(Array.isArray(j)?j:j.data).map(jh),E=Array.isArray(j)?k.length:j.total??k.length;n(k),o(E)}catch(w){f(w)}finally{u(!1)}},x=async w=>{const j=await Te.post("/billing-invoices",w),C=jh(j.data);return n(k=>[...k,C]),C},g=async(w,j)=>{const C=await Te.put(`/billing-invoices/${w}`,X$(j)),k=jh(C.data);return n(E=>E.map(S=>S.id===w?k:S)),k},N=async w=>{const j=await Te.patch(`/billing-invoices/${w}/mark-paid`),C=jh(j.data);return n(k=>k.map(E=>E.id===w?C:E)),C};return m.useEffect(()=>{v()},[t.search,t.status,t.clientId,t.campaignId,t.proposalId,t.dueDateFrom,t.dueDateTo,t.orderBy,t.orderDirection]),{invoices:s,total:r,loading:c,error:h,refetch:v,createInvoice:x,updateInvoice:g,markAsPaid:N}}function Y$(t){const s=t.match(/^(\d{4})-(\d{2})-(\d{2})/);if(s){const n=Number(s[1]),r=Number(s[2])-1,o=Number(s[3]);return new Date(n,r,o)}return new Date(t)}function J$(t){return typeof t=="string"?Y$(t):t}function ez(t){if(!t)return"";const s=J$(t);if(isNaN(s.getTime()))return"";const n=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),o=String(s.getDate()).padStart(2,"0");return`${n}-${r}-${o}`}function d_(t){const[s,n,r]=t.split("-").map(Number);return new Date(s,n-1,r)}function tz({open:t,onOpenChange:s,invoice:n,onSave:r}){const[o,c]=m.useState({dueDate:"",amount:"",status:et.ABERTA,paymentMethod:void 0,gatewayInvoiceId:"",generateNf:!1});m.useEffect(()=>{c(n?{dueDate:ez(n.dueDate),amount:String(n.amount??(n.amountCents?n.amountCents/100:"")),status:n.status,paymentMethod:n.paymentMethod,gatewayInvoiceId:n.gatewayInvoiceId||"",generateNf:n.generateNf}:{dueDate:"",amount:"",status:et.ABERTA,paymentMethod:void 0,gatewayInvoiceId:"",generateNf:!1})},[n]);const u=()=>{if(!o.dueDate){alert("Data de vencimento  obrigatria");return}if(o.amount&&parseFloat(o.amount)<=0){alert("Valor deve ser maior que zero");return}const h={dueDate:o.dueDate?d_(o.dueDate):void 0,status:o.status,paymentMethod:o.paymentMethod,gatewayInvoiceId:o.gatewayInvoiceId||void 0,generateNf:o.generateNf};if(o.amount){const f=parseFloat(o.amount);h.amount=f,h.amountCents=Math.round(f*100)}o.status===et.PAGA&&(h.paidAt=new Date),r(h)};return n?e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{children:[e.jsx(Os,{children:e.jsx(Ls,{children:"Editar Cobrana (BillingInvoice)"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:n.client?.companyName||n.client?.contactName||"Cliente no identificado"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2 mb-1",children:"Valor"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"0,00",value:o.amount,onChange:h=>c({...o,amount:h.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Vencimento (dueDate) *"}),e.jsx(Ne,{type:"date",value:o.dueDate,onChange:h=>c({...o,dueDate:h.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Status *"}),e.jsxs(_t,{value:o.status,onValueChange:h=>c({...o,status:h}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:et.ABERTA,children:"Aberta"}),e.jsx(De,{value:et.PAGA,children:"Paga"}),e.jsx(De,{value:et.VENCIDA,children:"Vencida"}),e.jsx(De,{value:et.CANCELADA,children:"Cancelada"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Mtodo de Pagamento (paymentMethod) *"}),e.jsxs(_t,{value:o.paymentMethod,onValueChange:h=>c({...o,paymentMethod:h}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione um mtodo"})}),e.jsxs(Et,{children:[e.jsx(De,{value:xs.PIX,children:"PIX"}),e.jsx(De,{value:xs.BOLETO,children:"Boleto"}),e.jsx(De,{value:xs.CARTAO,children:"Carto"}),e.jsx(De,{value:xs.TRANSFERENCIA,children:"Transferncia"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Gateway Invoice ID (opcional)"}),e.jsx(Ne,{placeholder:"ID do gateway de pagamento",value:o.gatewayInvoiceId,onChange:h=>c({...o,gatewayInvoiceId:h.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ri,{checked:o.generateNf,onCheckedChange:h=>c({...o,generateNf:!!h})}),e.jsx(je,{className:"cursor-pointer",children:"Gerar NF (generateNf)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(Z,{onClick:u,children:"Salvar Alteraes"})]})]})]})}):e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{children:[e.jsx(Os,{children:e.jsx(Ls,{children:"Nova Cobrana"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Vencimento (dueDate) *"}),e.jsx(Ne,{type:"date",value:o.dueDate,onChange:h=>c({...o,dueDate:h.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor (R$)"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"0,00",value:o.amount,onChange:h=>c({...o,amount:h.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Status *"}),e.jsxs(_t,{value:o.status,onValueChange:h=>c({...o,status:h}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:et.ABERTA,children:"Aberta"}),e.jsx(De,{value:et.PAGA,children:"Paga"}),e.jsx(De,{value:et.VENCIDA,children:"Vencida"}),e.jsx(De,{value:et.CANCELADA,children:"Cancelada"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Mtodo de Pagamento (paymentMethod)"}),e.jsxs(_t,{value:o.paymentMethod,onValueChange:h=>c({...o,paymentMethod:h}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione um mtodo"})}),e.jsxs(Et,{children:[e.jsx(De,{value:xs.PIX,children:"PIX"}),e.jsx(De,{value:xs.BOLETO,children:"Boleto"}),e.jsx(De,{value:xs.CARTAO,children:"Carto"}),e.jsx(De,{value:xs.TRANSFERENCIA,children:"Transferncia"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Gateway Invoice ID (opcional)"}),e.jsx(Ne,{placeholder:"ID do gateway de pagamento",value:o.gatewayInvoiceId,onChange:h=>c({...o,gatewayInvoiceId:h.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ri,{checked:o.generateNf,onCheckedChange:h=>c({...o,generateNf:!!h})}),e.jsx(je,{className:"cursor-pointer",children:"Gerar NF (generateNf)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(Z,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(Z,{onClick:u,children:"Salvar Alteraes"})]})]})]})})}function sz(){const{invoices:t,loading:s,error:n,refetch:r,updateInvoice:o,markAsPaid:c}=c_({}),[u,h]=m.useState(null),f=m.useMemo(()=>{const j=t.filter(S=>S.status===et.ABERTA||S.status===et.VENCIDA).reduce((S,P)=>S+Rs(P.amount??(P.amountCents?P.amountCents/100:0),0),0),C=t.filter(S=>S.status===et.ABERTA).reduce((S,P)=>S+Rs(P.amount??(P.amountCents?P.amountCents/100:0),0),0),k=t.filter(S=>S.status===et.PAGA).reduce((S,P)=>S+Rs(P.amount??(P.amountCents?P.amountCents/100:0),0),0),E=t.filter(S=>S.status===et.VENCIDA).length;return{pendingAmount:j,openAmount:C,confirmedAmount:k,alertsCount:E}},[t]),v=async j=>{if(u)try{await o(u.id,j),ye.success("Cobrana atualizada com sucesso"),h(null),r()}catch{ye.error("Falha ao atualizar cobrana")}},x=j=>{switch(j){case et.PAGA:return"bg-green-100 text-green-800";case et.ABERTA:return"bg-yellow-100 text-yellow-800";case et.VENCIDA:return"bg-red-100 text-red-800";case et.CANCELADA:return"bg-gray-100 text-gray-800"}},g=j=>{switch(j){case et.PAGA:return"Paga";case et.ABERTA:return"Aberta";case et.VENCIDA:return"Vencida";case et.CANCELADA:return"Cancelada"}},N=j=>{if(!j)return"-";switch(j){case xs.PIX:return"PIX";case xs.BOLETO:return"Boleto";case xs.CARTAO:return"Carto";case xs.TRANSFERENCIA:return"Transferncia"}},w=async j=>{try{await c(j),ye.success("Cobrana marcada como paga"),r()}catch{ye.error("Falha ao marcar cobrana como paga")}};return e.jsxs("div",{className:"space-y-6",children:[s&&e.jsx("div",{children:"Carregando cobranas..."}),!s&&n&&e.jsx("div",{children:"Erro ao carregar cobranas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-50 text-yellow-600 p-2 rounded-lg",children:e.jsx(Xg,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Pendentes de Cobrana"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.pendingAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-orange-50 text-orange-600 p-2 rounded-lg",children:e.jsx(xu,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cobranas em Aberto"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.openAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(zh,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Receita Confirmada"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$"," ",f.confirmedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(xu,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Alertas"})]}),e.jsxs("p",{className:"text-gray-900",children:[f.alertsCount," cobranas"]})]})})]}),e.jsxs(zi,{defaultValue:"open",className:"space-y-4",children:[e.jsxs(Bi,{children:[e.jsx(cs,{value:"open",children:"Abertas"}),e.jsx(cs,{value:"paid",children:"Pagas"}),e.jsx(cs,{value:"overdue",children:"Vencidas"}),e.jsx(cs,{value:"canceled",children:"Canceladas"})]}),e.jsx(As,{value:"open",children:e.jsx(Re,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta/Campanha"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"NF?"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===et.ABERTA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[j.proposalId&&e.jsxs("p",{className:"text-indigo-600",children:["Prop: ",j.proposalTitle||j.proposalId]}),j.campaignId&&e.jsxs("p",{className:"text-gray-600",children:["Camp: ",j.campaignName||j.campaignId]})]})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Rs(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(j.dueDate).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:N(j.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:j.generateNf?e.jsx(st,{className:"bg-blue-100 text-blue-800",children:"Sim"}):e.jsx(st,{variant:"outline",children:"No"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(st,{className:x(j.status),children:g(j.status)})}),e.jsxs("td",{className:"px-6 py-4 space-x-2",children:[e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>h(j),children:[e.jsx(Nu,{className:"w-4 h-4"}),"Editar"]}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(j.id),children:"Marcar como paga"})]})]},j.id))})]})})})}),e.jsx(As,{value:"paid",children:e.jsx(Re,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Data Pgto"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===et.PAGA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:j.proposalTitle||j.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Rs(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:j.paidAt?new Date(j.paidAt).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:N(j.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(st,{className:x(j.status),children:g(j.status)})})]},j.id))})]})})})}),e.jsx(As,{value:"overdue",children:e.jsx(Re,{children:t.filter(j=>j.status===et.VENCIDA).length===0?e.jsxs(Le,{className:"py-12 text-center",children:[e.jsx(xu,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma cobrana vencida"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===et.VENCIDA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:j.proposalTitle||j.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Rs(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-red-600",children:new Date(j.dueDate).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(st,{className:x(j.status),children:g(j.status)})}),e.jsxs("td",{className:"px-6 py-4 space-x-2",children:[e.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>h(j),children:[e.jsx(Nu,{className:"w-4 h-4"}),"Editar"]}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(j.id),children:"Marcar como paga"})]})]},j.id))})]})})})}),e.jsx(As,{value:"canceled",children:e.jsx(Re,{children:t.filter(j=>j.status===et.CANCELADA).length===0?e.jsxs(Le,{className:"py-12 text-center",children:[e.jsx(nn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma cobrana cancelada"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Proposta"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.filter(j=>j.status===et.CANCELADA).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:j.clientName||j.client?.companyName||j.client?.contactName||"Cliente no identificado"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-indigo-600",children:j.proposalTitle||j.proposalId})}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["R$"," ",Rs(j.amount??(j.amountCents?j.amountCents/100:0),0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(st,{className:x(j.status),children:g(j.status)})})]},j.id))})]})})})})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" BillingInvoice (Cobranas para Clientes)"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Cobranas criadas a partir de Propostas aprovadas. Campos: clientId, proposalId/campaignId, amount, dueDate, status, paymentMethod, generateNf. Status: ",e.jsx("strong",{children:"ABERTA"}),"  ",e.jsx("strong",{children:"PAGA"})," | ",e.jsx("strong",{children:"VENCIDA"})," | ",e.jsx("strong",{children:"CANCELADA"})]})]}),e.jsx(tz,{open:!!u,invoice:u,onOpenChange:j=>{j||h(null)},onSave:v})]})}function xN(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function ag(t){return{...t,createdAt:xN(t.createdAt)??new Date,updatedAt:xN(t.updatedAt)??new Date}}function gN(t){const s={};return t.name!==void 0&&(s.name=t.name),s}function u_(){const[t,s]=m.useState([]),[n,r]=m.useState(!0),[o,c]=m.useState(null),u=async()=>{try{r(!0),c(null);const x=await Te.get("/transaction-categories"),g=Array.isArray(x.data)?x.data:x.data.data;s((g??[]).map(ag))}catch(x){c(x.response?.data?.message||"Erro ao carregar categorias")}finally{r(!1)}};return m.useEffect(()=>{u()},[]),{categories:t,loading:n,error:o,refetch:u,createCategory:async x=>{try{c(null);const g=await Te.post("/transaction-categories",gN(x));return s(N=>[ag(g.data),...N]),g.data}catch(g){throw c(g.response?.data?.message||"Erro ao criar categoria"),g}},updateCategory:async(x,g)=>{try{c(null);const N=await Te.put(`/transaction-categories/${x}`,gN(g));return s(w=>w.map(j=>j.id===x?ag(N.data):j)),N.data}catch(N){throw c(N.response?.data?.message||"Erro ao atualizar categoria"),N}},deleteCategory:async x=>{try{c(null),await Te.delete(`/transaction-categories/${x}`),s(g=>g.filter(N=>N.id!==x))}catch(g){throw c(g.response?.data?.message||"Erro ao deletar categoria"),g}}}}function nz({open:t,onOpenChange:s,transaction:n,onSave:r}){const{categories:o,loading:c,error:u}=u_(),{mediaPoints:h}=tS({}),f=!!n,v=!!n?.isRecurringInstance,[x,g]=m.useState({flowType:Bt.RECEITA,date:new Date().toISOString().slice(0,10),isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:tn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),[N,w]=m.useState([]),j=m.useMemo(()=>new Set(N.map(D=>D.mediaPointId).filter(D=>D&&D!=="none")),[N]);m.useEffect(()=>{n?(g({flowType:n.flowType,date:new Date(n.date).toISOString().slice(0,10),isRecurring:!!n.isRecurring,recurringUntil:n.recurringUntil?String(n.recurringUntil).slice(0,10):"",dueDate:n.dueDate?String(n.dueDate).slice(0,10):"",amount:String(n.amount??""),description:n.description,partnerName:n.partnerName||"",categoryId:n.categoryId||"",tags:n.tags?.join(", ")||"",paymentType:n.paymentType||tn.A_VISTA,paymentMethod:n.paymentMethod,isPaid:n.isPaid,billingInvoiceId:n.billingInvoiceId||"",mediaPointId:n.mediaPointId||""}),n.mediaPointId?w([{key:"0",mediaPointId:n.mediaPointId,dueDate:n.dueDate?String(n.dueDate).slice(0,10):""}]):w([])):(g({flowType:Bt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:tn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),w([]))},[n]);const C=()=>{w(D=>[...D,{key:`${Date.now()}_${D.length}`,mediaPointId:"none",dueDate:""}])},k=D=>{w(I=>I.filter(O=>O.key!==D))},E=(D,I)=>{w(O=>O.map(F=>F.key!==D||I.mediaPointId&&I.mediaPointId!=="none"&&j.has(I.mediaPointId)&&I.mediaPointId!==F.mediaPointId?F:{...F,...I}))},S=()=>{if(!x.date){alert("Data  obrigatria");return}if(!x.amount||parseFloat(x.amount)<=0){alert("Valor deve ser maior que zero");return}if(!x.description.trim()){alert("Descrio  obrigatria");return}const D={date:d_(x.date),description:x.description,partnerName:x.partnerName||void 0,categoryId:x.categoryId||void 0,tags:x.tags?x.tags.split(",").map(I=>I.trim()).filter(Boolean):[],amount:parseFloat(x.amount),flowType:x.flowType,paymentType:x.paymentType,paymentMethod:x.paymentMethod,isPaid:x.isRecurring?!1:!!x.isPaid,billingInvoiceId:x.billingInvoiceId||void 0,isRecurring:x.isRecurring,recurringUntil:x.isRecurring&&x.recurringUntil?x.recurringUntil:void 0};if(v&&(delete D.date,delete D.isRecurring,delete D.recurringUntil),f)D.mediaPointId=x.mediaPointId&&x.mediaPointId!=="none"?x.mediaPointId:void 0,D.dueDate=x.dueDate?x.dueDate:void 0;else{const I=N.map(O=>({mediaPointId:O.mediaPointId,dueDate:O.dueDate})).filter(O=>O.mediaPointId&&O.mediaPointId!=="none");I.length===1?(D.mediaPointId=I[0].mediaPointId,D.dueDate=I[0].dueDate||void 0):I.length>1&&(D.mediaPoints=I.map(O=>({mediaPointId:O.mediaPointId,dueDate:O.dueDate||void 0})))}r(D),g({flowType:Bt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:tn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),w([])},P=()=>{s(!1),g({flowType:Bt.RECEITA,date:"",isRecurring:!1,recurringUntil:"",dueDate:"",amount:"",description:"",partnerName:"",categoryId:"",tags:"",paymentType:tn.A_VISTA,paymentMethod:void 0,isPaid:!0,billingInvoiceId:"",mediaPointId:""}),w([])};return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-2xl !p-0 !gap-0 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 pt-6",children:e.jsxs(Os,{children:[e.jsx(Ls,{children:n?"Editar Transao":"Nova Transao (CashTransaction)"}),e.jsx(kr,{children:"Insira os detalhes da transao financeira."})]})}),e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo de Transao (flowType) *"}),e.jsxs(_t,{value:x.flowType,onValueChange:D=>g({...x,flowType:D}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:Bt.RECEITA,children:"Receita"}),e.jsx(De,{value:Bt.DESPESA,children:"Despesa"}),e.jsx(De,{value:Bt.PESSOAS,children:"Pessoas (Folha)"}),e.jsx(De,{value:Bt.IMPOSTO,children:"Imposto"}),e.jsx(De,{value:Bt.TRANSFERENCIA,children:"Transferncia"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data *"}),e.jsx(Ne,{type:"date",value:x.date,onChange:D=>g({...x,date:D.target.value}),disabled:v}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(ri,{checked:x.isRecurring,onCheckedChange:D=>{const I=!!D;g(O=>({...O,isRecurring:I,isPaid:I?!1:O.isPaid,recurringUntil:I?O.recurringUntil:""}))},disabled:v}),e.jsx(je,{className:"cursor-pointer",children:"Recorrente (mensal)"})]}),x.isRecurring&&!v&&e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsx(je,{children:"Recorrente at (opcional)"}),e.jsx(Ne,{type:"date",value:x.recurringUntil,onChange:D=>g({...x,recurringUntil:D.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Se vazio, repete indefinidamente."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Valor (R$) *"}),e.jsx(Ne,{type:"number",step:"0.01",placeholder:"0,00",value:x.amount,onChange:D=>g({...x,amount:D.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Descrio *"}),e.jsx(Ne,{placeholder:"Ex: Pagamento de campanha",value:x.description,onChange:D=>g({...x,description:D.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Parceiro (partnerName)"}),e.jsx(Ne,{placeholder:"Nome do cliente ou fornecedor",value:x.partnerName,onChange:D=>g({...x,partnerName:D.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Categoria (categoryId)"}),e.jsxs(_t,{value:x.categoryId||void 0,onValueChange:D=>g({...x,categoryId:D}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[c&&e.jsx(De,{value:"__loading",disabled:!0,children:"Carregando categorias..."}),!c&&o.length===0&&e.jsx(De,{value:"__empty",disabled:!0,children:u?`Erro ao carregar: ${u}`:"Nenhuma categoria cadastrada"}),o.map(D=>e.jsx(De,{value:D.id,children:D.name},D.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tags (separadas por vrgula)"}),e.jsx(Ne,{placeholder:"Ex: campanha, maro, urgente",value:x.tags,onChange:D=>g({...x,tags:D.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Tipo de Pagamento (paymentType)"}),e.jsxs(_t,{value:x.paymentType,onValueChange:D=>g({...x,paymentType:D}),children:[e.jsx(Pt,{children:e.jsx(At,{})}),e.jsxs(Et,{children:[e.jsx(De,{value:tn.A_VISTA,children:" vista"}),e.jsx(De,{value:tn.PARCELADO,children:"Parcelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Modo de Pagamento (paymentMethod)"}),e.jsxs(_t,{value:x.paymentMethod,onValueChange:D=>g({...x,paymentMethod:D}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsxs(Et,{children:[e.jsx(De,{value:xs.PIX,children:"PIX"}),e.jsx(De,{value:xs.BOLETO,children:"Boleto"}),e.jsx(De,{value:xs.CARTAO,children:"Carto"}),e.jsx(De,{value:xs.TRANSFERENCIA,children:"Transferncia"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ri,{checked:x.isPaid,onCheckedChange:D=>g({...x,isPaid:!!D}),disabled:x.isRecurring||v}),e.jsx(je,{className:"cursor-pointer",children:"J foi pago (isPaid)"}),x.isRecurring&&e.jsx("span",{className:"text-xs text-gray-500",children:"(bloqueado para transaes recorrentes)"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-3",children:[e.jsx("p",{className:"text-sm text-blue-900",children:" Para despesas de pontos de mdia (energia, taxa DER, aluguel), vincule o ponto e defina o vencimento:"}),f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Ponto de Mdia (opcional)"}),e.jsxs(_t,{value:x.mediaPointId,onValueChange:D=>g({...x,mediaPointId:D}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o ponto"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"none",children:"Nenhum"}),h.map(D=>e.jsx(De,{value:D.id,children:D.name},D.id))]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use para despesas como energia, taxa DER, aluguel de rea"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Data de Vencimento (opcional)"}),e.jsx(Ne,{type:"date",value:x.dueDate,onChange:D=>g({...x,dueDate:D.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Data de vencimento da taxa/despesa"})]})]}),!v&&e.jsx("p",{className:"text-xs text-gray-500",children:"Para vincular mltiplos pontos, crie uma nova transao."})]}):e.jsxs("div",{className:"space-y-3",children:[N.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"Nenhum ponto de mdia vinculado."}):e.jsx("div",{className:"max-h-72 overflow-y-auto pr-2",children:e.jsx("div",{className:"space-y-3",children:N.map((D,I)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:I===0?"Ponto de Mdia (opcional)":"Ponto de Mdia"}),e.jsxs(_t,{value:D.mediaPointId,onValueChange:O=>E(D.key,{mediaPointId:O}),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione o ponto"})}),e.jsxs(Et,{children:[e.jsx(De,{value:"none",children:"Nenhum"}),h.map(O=>e.jsx(De,{value:O.id,disabled:j.has(O.id)&&O.id!==D.mediaPointId,children:O.name},O.id))]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(je,{children:"Data de Vencimento (opcional)"}),e.jsx(Ne,{type:"date",value:D.dueDate,onChange:O=>E(D.key,{dueDate:O.target.value})})]}),e.jsx(Z,{type:"button",variant:"outline",size:"icon",onClick:()=>k(D.key),title:"Remover ponto",children:e.jsx(Ba,{className:"w-4 h-4"})})]})]},D.key))})}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs(Z,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:C,children:[e.jsx(kn,{className:"w-4 h-4"}),"Adicionar ponto"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Voc pode vincular mltiplos pontos, cada um com seu vencimento."})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 px-6 pb-6 pt-4 border-t bg-background flex justify-end gap-3",children:[e.jsx(Z,{variant:"outline",onClick:P,children:"Cancelar"}),e.jsx(Z,{onClick:S,children:n?"Salvar Alteraes":"Salvar Transao"})]})]})})}function rg(t){if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const s=new Date(t);return isNaN(s.getTime())?null:s}return null}function Nh(t){return{...t,date:rg(t?.date)??new Date,createdAt:rg(t?.createdAt)??new Date,updatedAt:rg(t?.updatedAt)??new Date}}function vN(t){const s={date:t.date,description:t.description,partnerName:t.partnerName,categoryId:t.categoryId,tags:t.tags,amount:t.amount,flowType:t.flowType,paymentType:t.paymentType,paymentMethod:t.paymentMethod,isPaid:t.isPaid,billingInvoiceId:t.billingInvoiceId,mediaPointId:t.mediaPointId,dueDate:t.dueDate,isRecurring:t.isRecurring,recurringUntil:t.recurringUntil};return t.mediaPoints&&(s.mediaPoints=t.mediaPoints),Object.keys(s).forEach(n=>{s[n]===void 0&&delete s[n]}),s}function m_(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const j=(await Te.get("/cash-transactions",{params:t})).data,k=((Array.isArray(j)?j:j.data)??[]).map(Nh);n(k),o(Array.isArray(j)?k.length:j.total??k.length)}catch(w){f(w)}finally{u(!1)}};return m.useEffect(()=>{v()},[t.search,t.flowType,t.categoryId,t.dateFrom,t.dateTo]),{transactions:s,total:r,loading:c,error:h,refetch:v,createTransaction:async w=>{const C=(await Te.post("/cash-transactions",vN(w))).data;if(Array.isArray(C)){const E=C.map(Nh);return n(S=>[...E,...S]),o(S=>S+E.length),E}const k=Nh(C);return n(E=>[k,...E]),o(E=>E+1),k},updateTransaction:async(w,j)=>{const C=w.includes("__R__"),k=await Te.put(`/cash-transactions/${w}`,vN(j)),E=Nh(k.data);return C&&(E.id===w||E.isRecurringInstance)?(n(P=>P.map(D=>{if(D.id!==w)return D;const I=D.id,O=D.date;return{...D,...E,id:I,date:O,dueDate:E.dueDate??D.dueDate}})),E):(n(P=>P.map(D=>{if(!(D.seriesId&&E.seriesId&&D.seriesId===E.seriesId||D.id===w||D.id===E.id))return D;const O=D.id,F=D.date,X=D.dueDate;return{...D,...E,id:O,date:F,dueDate:D.isRecurringInstance?X:E.dueDate}})),E)},deleteTransaction:async w=>{await Te.delete(`/cash-transactions/${w}`);const j=w.includes("__R__")?w.split("__R__")[0]:w;n(C=>C.filter(k=>k.id!==w&&k.id!==j)),o(C=>Math.max(0,C-1))}}}function az(){const t=G=>G.toISOString().slice(0,10),s=G=>{if(!G)return"";const[W,ne,K]=G.split("-");return!W||!ne||!K?G:`${K}/${ne}/${W}`},[n,r]=m.useState("month"),[o,c]=m.useState(()=>new Date().getMonth()),[u,h]=m.useState(()=>new Date().getFullYear()),[f,v]=m.useState(()=>{const G=new Date;return G.setMonth(G.getMonth()-2),t(G)}),[x,g]=m.useState(()=>t(new Date)),[N,w]=m.useState(!1),[j,C]=m.useState(null),{dateFrom:k,dateTo:E,periodLabel:S}=m.useMemo(()=>{if(n==="month"){const ee=new Date(u,o,1),U=new Date(u,o+1,0);return{dateFrom:t(ee),dateTo:t(U),periodLabel:null}}const G=f||t(new Date),W=x||t(new Date),ne=G<=W?G:W,K=G<=W?W:G;return{dateFrom:ne,dateTo:K,periodLabel:`Perodo: ${s(ne)} - ${s(K)}`}},[o,u,f,x,n]),{transactions:P,loading:D,error:I,refetch:O,createTransaction:F,updateTransaction:X,deleteTransaction:Q}=m_({dateFrom:k,dateTo:E}),{categories:V}=u_(),$=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],R=()=>{o===0?(c(11),h(u-1)):c(o-1)},z=()=>{o===11?(c(0),h(u+1)):c(o+1)},J=m.useMemo(()=>P,[P]),ue=m.useMemo(()=>{const G=J.filter(ee=>ee.flowType===Bt.RECEITA).reduce((ee,U)=>ee+Rs(U.amount,0),0),W=J.filter(ee=>ee.flowType===Bt.DESPESA||ee.flowType===Bt.PESSOAS||ee.flowType===Bt.IMPOSTO).reduce((ee,U)=>ee+Rs(U.amount,0),0),ne=J.filter(ee=>ee.flowType===Bt.TRANSFERENCIA).reduce((ee,U)=>ee+Rs(U.amount,0),0),K=G-W;return{receiptsTotal:G,expensesTotal:W,transfersTotal:ne,cashBalance:K}},[J]),se=async G=>{try{j?(await X(j.id,G),ye.success("Transao atualizada com sucesso"),C(null)):(await F(G),ye.success("Transao criada com sucesso")),w(!1),O()}catch{ye.error("Falha ao salvar transao")}},fe=G=>{switch(G){case Bt.RECEITA:return"Receita";case Bt.DESPESA:return"Despesa";case Bt.TRANSFERENCIA:return"Transferncia";case Bt.IMPOSTO:return"Imposto";case Bt.PESSOAS:return"Pessoas"}},H=G=>{if(!G)return"-";switch(G){case tn.A_VISTA:return" vista";case tn.PARCELADO:return"Parcelado"}},re=G=>{if(!G)return"-";switch(G){case xs.PIX:return"PIX";case xs.BOLETO:return"Boleto";case xs.CARTAO:return"Carto";case xs.TRANSFERENCIA:return"Transferncia"}};return e.jsxs("div",{className:"space-y-6",children:[D&&e.jsx("div",{children:"Carregando lanamentos..."}),!D&&I&&e.jsx("div",{children:"Erro ao carregar lanamentos."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:"sm",variant:n==="month"?"default":"outline",onClick:()=>r("month"),children:"Ms"}),e.jsx(Z,{size:"sm",variant:n==="range"?"default":"outline",onClick:()=>r("range"),children:"Perodo"})]}),n==="month"?e.jsxs(e.Fragment,{children:[e.jsx(Z,{variant:"ghost",size:"sm",onClick:R,children:e.jsx(td,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-gray-900",children:[$[o]," ",u]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:z,children:e.jsx($l,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{type:"month",className:"w-[160px]",value:`${u}-${String(o+1).padStart(2,"0")}`,onChange:G=>{const[W,ne]=G.target.value.split("-");if(!W||!ne)return;const K=Number(W),ee=Number(ne)-1;Number.isNaN(K)||Number.isNaN(ee)||(h(K),c(ee))}}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const G=new Date;h(G.getFullYear()),c(G.getMonth())},children:"Hoje"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-gray-900",children:S}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Ne,{type:"date",className:"w-[160px]",value:f,onChange:G=>v(G.target.value)}),e.jsx("span",{className:"text-gray-500 text-sm",children:"at"}),e.jsx(Ne,{type:"date",className:"w-[160px]",value:x,onChange:G=>g(G.target.value)}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{g(t(new Date))},children:"Hoje"})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:[{label:"3 meses",months:3},{label:"6 meses",months:6},{label:"1 ano",years:1},{label:"2 anos",years:2},{label:"5 anos",years:5},{label:"10 anos",years:10}].map(G=>e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const W=new Date,ne=new Date(W);G.months&&ne.setMonth(ne.getMonth()-G.months),G.years&&ne.setFullYear(ne.getFullYear()-G.years),g(t(W)),v(t(ne))},children:G.label},G.label))})]})]}),e.jsxs(Z,{className:"gap-2",onClick:()=>{C(null),w(!0)},children:[e.jsx(kn,{className:"w-4 h-4"}),"Nova Transao"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(t0,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Recebimentos"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",ue.receiptsTotal.toLocaleString("pt-BR")]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(bw,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Despesas"})]}),e.jsxs("p",{className:"text-gray-900",children:["R$ ",ue.expensesTotal.toLocaleString("pt-BR")]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`${ue.cashBalance>=0?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"} p-2 rounded-lg`,children:e.jsx(Ou,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Saldo em Caixa"})]}),e.jsxs("p",{className:`${ue.cashBalance>=0?"text-gray-900":"text-red-600"}`,children:["R$ ",ue.cashBalance.toLocaleString("pt-BR")]})]})})]}),e.jsxs(zi,{defaultValue:"receita",className:"space-y-4",children:[e.jsxs(Bi,{children:[e.jsx(cs,{value:"receita",children:"Receitas"}),e.jsx(cs,{value:"despesa",children:"Despesas"}),e.jsx(cs,{value:"pessoas",children:"Pessoas"}),e.jsx(cs,{value:"imposto",children:"Impostos"}),e.jsx(cs,{value:"transferencia",children:"Transferncias"})]}),[Bt.RECEITA,Bt.DESPESA,Bt.PESSOAS,Bt.IMPOSTO,Bt.TRANSFERENCIA].map(G=>{const W=J.filter(ne=>ne.flowType===G);return e.jsx(As,{value:G.toLowerCase(),children:e.jsx(Re,{children:W.length===0?e.jsx(Le,{className:"py-12 text-center",children:e.jsxs("p",{className:"text-gray-500",children:["Nenhuma transao de ",fe(G)," neste perodo"]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Parceiro"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Tags"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Modo"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-600 text-sm",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:W.map(ne=>{const K=ne.categoryId?V.find(ee=>ee.id===ne.categoryId):void 0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(ne.date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:ne.description}),ne.billingInvoiceId&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Invoice: ",ne.billingInvoiceId]}),ne.mediaPointId&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Ponto: ",ne.mediaPointId]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:ne.partnerName||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:K?.name||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:ne.tags.map(ee=>e.jsx(st,{variant:"outline",className:"text-xs",children:ee},ee))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:ne.flowType===Bt.RECEITA?"text-green-600":"text-red-600",children:["R$"," ",Rs(ne.amount,0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:H(ne.paymentType)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:re(ne.paymentMethod)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(st,{className:ne.isPaid?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:ne.isPaid?"Pago":"Pendente"})}),e.jsxs("td",{className:"px-6 py-4 flex flex-wrap gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:async()=>{try{await X(ne.id,{isPaid:!ne.isPaid}),ye.success(ne.isPaid?"Transao marcada como pendente":"Transao marcada como paga"),O()}catch{ye.error("Falha ao atualizar status de pagamento")}},children:ne.isPaid?"Desmarcar Pago":"Marcar Pago"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{C(ne),w(!0)},children:"Editar"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:async()=>{try{await Q(ne.id),ye.success("Transao excluda"),O()}catch{ye.error("Falha ao excluir transao")}},children:"Excluir"})]})]},ne.id)})})]})})})},G)})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" CashTransaction (Fluxo de Caixa)"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Lanamentos financeiros da empresa. Campos: date, description, partnerName, categoryId, tags, amount, flowType, paymentType, paymentMethod, isPaid, billingInvoiceId, mediaPointId. flowType: ",e.jsx("strong",{children:"RECEITA"})," | ",e.jsx("strong",{children:"DESPESA"})," | ",e.jsx("strong",{children:"TRANSFERENCIA"})," | ",e.jsx("strong",{children:"IMPOSTO"})," | ",e.jsx("strong",{children:"PESSOAS"})]})]}),e.jsx(nz,{open:N,onOpenChange:G=>{G||(w(!1),C(null))},transaction:j,onSave:se})]})}function rz(t){const[s,n]=t.split("-").map(u=>parseInt(u,10)),r=new Date(s,n-1,1),o=new Date(s,n,0),c=u=>u.toISOString().slice(0,10);return{dateFrom:c(r),dateTo:c(o)}}function iz(){const t=new Date,[s,n]=m.useState(()=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`),{dateFrom:r,dateTo:o}=m.useMemo(()=>rz(s),[s]),{invoices:c,loading:u,error:h}=c_({dueDateFrom:r,dueDateTo:o}),{transactions:f,loading:v,error:x}=m_({dateFrom:r,dateTo:o}),g=m.useMemo(()=>{const E=P=>c.filter(D=>D.status===P).reduce((D,I)=>D+Rs(I.amount,0),0);return{total:c.reduce((P,D)=>P+Rs(D.amount,0),0),abertas:E(et.ABERTA),vencidas:E(et.VENCIDA),pagas:E(et.PAGA),canceladas:E(et.CANCELADA)}},[c]),N=m.useMemo(()=>{const E=I=>f.filter(O=>I.includes(O.flowType)).reduce((O,F)=>O+Rs(F.amount,0),0),S=E([Bt.RECEITA]),P=E([Bt.DESPESA,Bt.IMPOSTO,Bt.PESSOAS]),D=E([Bt.TRANSFERENCIA]);return{receipts:S,expenses:P,transfers:D,net:S-P}},[f]),w=m.useMemo(()=>{const E=new Map;for(const S of c){const P=S.clientName||S.client?.companyName||"Cliente no informado";E.set(P,(E.get(P)||0)+Rs(S.amount,0))}return Array.from(E.entries()).sort((S,P)=>P[1]-S[1]).slice(0,5)},[c]),j=E=>E.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),C=u||v,k=h||x;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900 text-lg",children:"Relatrios"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Resumo por ms (cobranas por vencimento + fluxo de caixa por data)."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ms:"}),e.jsx(Ne,{type:"month",value:s,onChange:E=>n(E.target.value),className:"w-[180px]"})]})]}),C&&e.jsx("div",{children:"Carregando relatrio..."}),!C&&k&&e.jsx("div",{className:"text-red-600",children:"Erro ao carregar relatrio."}),!C&&!k&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-green-50 text-green-600 p-2 rounded-lg",children:e.jsx(t0,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Receita no Caixa"})]}),e.jsx("p",{className:"text-gray-900",children:j(N.receipts)})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg",children:e.jsx(bw,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Despesas no Caixa"})]}),e.jsx("p",{className:"text-gray-900",children:j(N.expenses)})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-indigo-50 text-indigo-600 p-2 rounded-lg",children:e.jsx(Ou,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Saldo Lquido"})]}),e.jsx("p",{className:"text-gray-900",children:j(N.net)})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-yellow-50 text-yellow-600 p-2 rounded-lg",children:e.jsx(nn,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Cobranas do Ms"})]}),e.jsx("p",{className:"text-gray-900",children:j(g.total)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Cobranas por Status"}),e.jsxs(st,{variant:"outline",children:[r,"  ",o]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Abertas"}),e.jsx("span",{className:"text-gray-900",children:j(g.abertas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vencidas"}),e.jsx("span",{className:"text-gray-900",children:j(g.vencidas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pagas"}),e.jsx("span",{className:"text-gray-900",children:j(g.pagas)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Canceladas"}),e.jsx("span",{className:"text-gray-900",children:j(g.canceladas)})]})]})]})}),e.jsx(Re,{children:e.jsxs(Le,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Top Clientes (por Cobrana)"}),e.jsx(st,{variant:"outline",children:"Top 5"})]}),w.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nenhuma cobrana no perodo."}):e.jsx("div",{className:"space-y-2",children:w.map(([E,S])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 truncate pr-3",children:E}),e.jsx("span",{className:"text-gray-900 whitespace-nowrap",children:j(S)})]},E))})]})})]})]})]})}function oz(){return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Financeiro"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie cobranas e fluxo de caixa"})]}),e.jsxs(zi,{defaultValue:"charges",className:"space-y-6",children:[e.jsxs(Bi,{children:[e.jsx(cs,{value:"charges",children:"Cobranas"}),e.jsx(cs,{value:"cashflow",children:"Fluxo de Caixa"}),e.jsx(cs,{value:"reports",children:"Relatrios"})]}),e.jsx(As,{value:"charges",children:e.jsx(sz,{})}),e.jsx(As,{value:"cashflow",children:e.jsx(az,{})}),e.jsx(As,{value:"reports",children:e.jsx(iz,{})})]})]})}function lz({conversations:t,selectedConversationId:s,searchQuery:n,onSearchChange:r,onSelectConversation:o}){const c=n.trim().toLowerCase(),u=t.filter(h=>c?h.clientName.toLowerCase().includes(c)||(h.proposalId||"").toLowerCase().includes(c)||(h.campaignId||"").toLowerCase().includes(c)||h.lastMessage.toLowerCase().includes(c):!0);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ne,{placeholder:"Buscar conversas...",value:n,onChange:h=>r(h.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:u.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 text-sm",children:n?"Nenhuma conversa encontrada":"Nenhuma conversa"})}):u.map(h=>e.jsxs("button",{onClick:()=>o(h),className:`w-full p-4 rounded-lg text-left transition-colors ${s===h.id?"bg-indigo-50 border border-indigo-200":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-gray-900",children:h.clientName}),h.unreadCount>0&&e.jsx(st,{className:"bg-indigo-600",children:h.unreadCount})]}),h.proposalId&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Proposta: ",h.proposalId]}),h.campaignId&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Campanha: ",h.campaignId]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:h.lastMessage}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.lastMessageAt.toLocaleString("pt-BR")})]},h.id))})]})}function cz({messages:t}){const s=m.useRef(null);m.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[t]);const n=o=>{switch(o){case Ao.EMAIL:return"";case Ao.WHATSAPP:return"";case Ao.SYSTEM:return""}},r=o=>{switch(o){case Ao.EMAIL:return"Email";case Ao.WHATSAPP:return"WhatsApp";case Ao.SYSTEM:return"Sistema"}};return t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhuma mensagem ainda"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Envie a primeira mensagem para o cliente"})]})}):e.jsxs("div",{className:"space-y-4",children:[t.map(o=>e.jsx("div",{className:`flex ${o.direction===Mi.OUT?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-4 ${o.direction===Mi.OUT?"bg-indigo-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsxs("span",{className:`text-xs ${o.direction===Mi.OUT?"opacity-75":"opacity-60"}`,children:[n(o.channel)," ",r(o.channel)]}),o.senderType===Fc.CLIENTE&&e.jsx(st,{variant:"outline",className:`text-xs ${o.direction===Mi.OUT?"border-white/50 text-white":"border-gray-400 text-gray-700"}`,children:"Cliente"}),o.senderType===Fc.USER&&e.jsx(st,{variant:"outline",className:`text-xs ${o.direction===Mi.OUT?"border-white/50 text-white":"border-gray-400 text-gray-700"}`,children:"Usurio"})]}),e.jsx("p",{className:"mb-2 whitespace-pre-wrap",children:o.contentText}),e.jsxs("div",{className:`flex items-center justify-between text-xs ${o.direction===Mi.OUT?"opacity-75":"opacity-60"}`,children:[e.jsx("span",{children:o.senderName}),e.jsxs("span",{children:[new Date(o.createdAt).toLocaleDateString("pt-BR")," s"," ",new Date(o.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]})},o.id)),e.jsx("div",{ref:s})]})}function dz({onSend:t,onAttach:s,disabled:n=!1}){const[r,o]=m.useState(""),c=m.useRef(null),u=()=>{const x=r.trim();x&&(t(x),o(""))},h=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),u())},f=()=>{c.current?.click()},v=x=>{const g=x.target.files;g&&g.length>0&&(s(g),x.target.value="")};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{ref:c,type:"file",multiple:!0,className:"hidden",onChange:v,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{placeholder:"Digite sua mensagem...",value:r,onChange:x=>o(x.target.value),onKeyDown:h,disabled:n}),e.jsx(Z,{variant:"outline",size:"sm",onClick:f,disabled:n,title:"Anexar arquivo",children:e.jsx(i4,{className:"w-4 h-4"})}),e.jsxs(Z,{size:"sm",className:"gap-2",onClick:u,disabled:n||!r.trim(),children:[e.jsx(Ru,{className:"w-4 h-4"}),"Enviar"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Canal: Email  WhatsApp (via integrao futura)"})]})}function yN(t){const s=t?.createdAt?new Date(t.createdAt):new Date,n=t?.updatedAt?new Date(t.updatedAt):s;return{...t,proposalId:t?.proposalId??void 0,campaignId:t?.campaignId??void 0,createdAt:s,updatedAt:n}}function bN(t,s){const n=new Map;for(const r of t)r?.id&&n.set(String(r.id),r);for(const r of s)r?.id&&n.set(String(r.id),r);return Array.from(n.values()).sort((r,o)=>{const c=new Date(r.createdAt).getTime(),u=new Date(o.createdAt).getTime();return c!==u?c-u:String(r.id).localeCompare(String(o.id))})}function uz(t={},s={}){const[n,r]=m.useState([]),[o,c]=m.useState(!1),[u,h]=m.useState(null),f=m.useRef(!1),v=m.useRef(!1),x=m.useRef([]);x.current=n;const g=s.enabled??!0,N=s.pollIntervalMs??(t.proposalId||t.campaignId?3e3:5e3),w=async C=>{try{if(f.current)return;f.current=!0,C?.silent||(c(!0),h(null));const E=(await Te.get("/messages",{params:t})).data,S=Array.isArray(E)?E:E.data,P=(Array.isArray(S)?S:[]).map(yN);r(D=>bN(D,P)),v.current=!0}catch(k){(!C?.silent||!v.current||x.current.length===0)&&h(k)}finally{C?.silent||c(!1),f.current=!1}},j=async C=>{const k=await Te.post("/messages",C);return r(E=>bN(E,[yN(k.data)])),k.data};return m.useEffect(()=>{w({silent:!1})},[t.proposalId,t.campaignId,t.channel]),m.useEffect(()=>{if(!g)return;const C=window.setInterval(()=>{typeof document<"u"&&document.visibilityState!=="visible"||w({silent:!0})},N);return()=>window.clearInterval(C)},[g,N,t.proposalId,t.campaignId,t.channel]),{messages:n,loading:o,error:u,refetch:w,sendMessage:j}}function mz(){const{user:t}=Fl(),{messages:s,loading:n,error:r,refetch:o,sendMessage:c}=uz({}),[u,h]=m.useState(""),[f,v]=m.useState(null),[x,g]=m.useState(null),[N,w]=m.useState(null),j=()=>{const D=new URLSearchParams(window.location.search),I=D.get("campaignId"),O=D.get("proposalId");return I?{type:"campaign",id:I}:O?{type:"proposal",id:O}:null};m.useEffect(()=>{const D=()=>g(j());return D(),window.addEventListener("app:navigation",D),window.addEventListener("popstate",D),()=>{window.removeEventListener("app:navigation",D),window.removeEventListener("popstate",D)}},[]),m.useEffect(()=>{(async()=>{if(!x){w(null);return}try{if(x.type==="proposal"){const O=(await Te.get(`/proposals/${x.id}`)).data,F=O?.clientName||O?.client?.companyName||O?.client?.contactName||"Cliente",X=O?.title||`Proposta ...${String(x.id).slice(-6)}`;w(`${F}  ${X}`)}else{const O=(await Te.get(`/campaigns/${x.id}`)).data,F=O?.clientName||O?.client?.companyName||O?.client?.contactName||"Cliente",X=O?.name||`Campanha ...${String(x.id).slice(-6)}`;w(`${F}  ${X}`)}}catch{w(null)}})()},[x?.type,x?.id]);const C=m.useMemo(()=>{const D=new Map,I=new Map;s.forEach(F=>{if(F.proposalId){const X=D.get(F.proposalId)||[];D.set(F.proposalId,[...X,F])}if(F.campaignId){const X=I.get(F.campaignId)||[];I.set(F.campaignId,[...X,F])}});const O=[];return D.forEach((F,X)=>{const Q=F.slice().sort((ue,se)=>new Date(se.createdAt).getTime()-new Date(ue.createdAt).getTime()),V=Q[0],R=(new Date().getTime()-new Date(V.createdAt).getTime())/(1e3*60*60),z=V.direction===Mi.IN&&R<48?1:0,J=Q.find(ue=>ue.senderType===Fc.CLIENTE)?.senderName||"Cliente";O.push({id:`proposal:${X}`,type:"proposal",clientName:J,proposalId:X,lastMessage:V.contentText,lastMessageAt:new Date(V.createdAt),unreadCount:z})}),I.forEach((F,X)=>{const Q=F.slice().sort((R,z)=>new Date(z.createdAt).getTime()-new Date(R.createdAt).getTime()),V=Q[0],$=Q.find(R=>R.senderType===Fc.CLIENTE)?.senderName||"Cliente";O.push({id:`campaign:${X}`,type:"campaign",clientName:$,campaignId:X,lastMessage:V.contentText,lastMessageAt:new Date(V.createdAt),unreadCount:0})}),x&&(O.some(X=>x.type==="proposal"?X.proposalId===x.id:X.campaignId===x.id)||O.push({id:`${x.type}:${x.id}`,type:x.type,clientName:N||"Nova conversa",proposalId:x.type==="proposal"?x.id:void 0,campaignId:x.type==="campaign"?x.id:void 0,lastMessage:"Sem mensagens ainda",lastMessageAt:new Date,unreadCount:0})),O.sort((F,X)=>X.lastMessageAt.getTime()-F.lastMessageAt.getTime())},[s,x,N]);m.useEffect(()=>{if(!x)return;const D=C.find(I=>x.type==="proposal"?I.proposalId===x.id:I.campaignId===x.id);D&&v(D)},[x?.type,x?.id,C]),m.useEffect(()=>{x||!f&&C.length>0&&v(C[0])},[x,C,f]);const k=m.useMemo(()=>f?s.filter(I=>f.proposalId?I.proposalId===f.proposalId:f.campaignId?I.campaignId===f.campaignId:!1).sort((I,O)=>new Date(I.createdAt).getTime()-new Date(O.createdAt).getTime()):[],[s,f]),E=D=>{v({...D,unreadCount:0})},S=async D=>{if(!f){ye.error("Nenhuma conversa selecionada");return}try{await c({proposalId:f.proposalId,campaignId:f.campaignId,direction:Mi.OUT,channel:Ao.EMAIL,senderType:Fc.USER,senderName:t?.name||"Usurio",senderContact:t?.email||"",contentText:D}),ye.success("Mensagem enviada com sucesso!"),o()}catch{ye.error("Erro ao enviar mensagem")}},P=D=>{const I=D.length,O=Array.from(D).map(F=>F.name).join(", ");ye.info(`${I} arquivo(s) selecionado(s): ${O}. Upload real ser implementado na integrao com WhatsApp API / Email / Storage.`,{duration:5e3})};return e.jsxs("div",{className:"p-8 flex flex-col h-screen",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Mensagens"}),e.jsx("p",{className:"text-gray-600",children:"Central de conversas (Message) por Proposta/Campanha"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 min-h-0",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Re,{className:"h-full",children:e.jsx(Le,{className:"pt-6 h-full",children:e.jsx(lz,{conversations:C,selectedConversationId:f?.id||null,searchQuery:u,onSearchChange:D=>h(D),onSelectConversation:E})})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Re,{className:"h-full flex flex-col",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-gray-900",children:f.clientName}),f.proposalId&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Proposta: ...",f.proposalId.slice(-6)]}),f.campaignId&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Campanha: ...",f.campaignId.slice(-6)]})]}),e.jsx(Le,{className:"flex-1 overflow-y-auto p-6",children:e.jsx(cz,{messages:k})}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx(dz,{onSend:S,onAttach:P,disabled:n})})]}):e.jsx(Le,{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"Selecione uma conversa"})})})})]}),n&&e.jsx("div",{className:"mt-4 p-3 rounded bg-gray-50 text-gray-700",children:"Carregando mensagens..."}),!n&&r&&e.jsx("div",{className:"mt-4 p-3 rounded bg-red-50 text-red-700",children:"Erro ao carregar mensagens."}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:" Message (Mensagens)"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Campos: proposalId/campaignId, direction (IN/OUT), channel (EMAIL/WHATSAPP/SYSTEM), senderType (USER/CLIENTE), senderName, senderContact, contentText. Integraes futuras: WhatsApp API, chatbot, upload de anexos."})]})]})}function hz(t={}){const[s,n]=m.useState([]),[r,o]=m.useState(0),[c,u]=m.useState(!1),[h,f]=m.useState(null),v=async()=>{try{u(!0),f(null);const g=(await Te.get("/activity-logs",{params:t})).data,N=Array.isArray(g)?g:g.data,w=Array.isArray(g)?N.length:g.total??N.length;n(N),o(w)}catch(x){f(x)}finally{u(!1)}};return m.useEffect(()=>{v()},[t.resourceType,t.resourceId,t.userId,t.dateFrom,t.dateTo]),{logs:s,total:r,loading:c,error:h,refetch:v}}const h_=t=>{const s=(t||"").trim();return!s||/\s/.test(s)||/[]/i.test(s)?s:s.replace(/_/g," ").toLowerCase().replace(/\b\w/g,r=>r.toUpperCase())},ig=t=>{const s=(t||"").trim(),n=s.toUpperCase(),o={CASH_TRANSACTION_CREATE:"Transao criada",CASH_TRANSACTION_UPDATE:"Transao atualizada",CASH_TRANSACTION_DELETE:"Transao excluda",BILLING_INVOICE_MARK_PAID:"Fatura marcada como paga",MEDIA_POINT_IMPORT:"Inventrio importado",MEDIA_POINT_CREATE:"Ponto de mdia criado",MEDIA_POINT_DELETE:"Ponto de mdia excludo",MEDIA_POINT_IMAGE_UPLOAD:"Imagem do ponto enviada",MEDIA_UNIT_CREATE:"Unidade criada",CLIENT_CREATE:"Cliente criado",CLIENT_DELETE:"Cliente excludo",CLIENT_DOCUMENT_UPLOAD:"Documento do cliente enviado",RESERVATION_CREATE:"Reserva criada",RESERVATION_CANCEL:"Reserva cancelada",RESERVATION_STATUS_UPDATE:"Status da reserva atualizado",CAMPAIGN_CREATE:"Campanha criada",PUBLIC_PROPOSAL_APPROVE:"Proposta aprovada (portal pblico)",PUBLIC_PROPOSAL_REJECT:"Proposta recusada (portal pblico)",PUBLIC_PROPOSAL_MESSAGE:"Mensagem recebida (portal pblico)"}[n]??h_(s),c=n.startsWith("CASH_TRANSACTION")||n.startsWith("BILLING_INVOICE")||n.startsWith("FINANC")?"Financeiro":n.startsWith("MEDIA_")||n.startsWith("INVENT")||n.startsWith("MEDIA POINT")?"Inventrio":n.startsWith("CLIENT_")?"Clientes":n.startsWith("PROPOS")||n.startsWith("PUBLIC_PROPOSAL")||s.toLowerCase().includes("proposta")?"Propostas":n.startsWith("RESERVATION_")?"Reservas":n.startsWith("CAMPAIGN_")?"Campanhas":s.toLowerCase().includes("portal")?"Portal pblico":"Outros";return{label:o,group:c}},pz=t=>({tags:"Tags",isPaid:"Pago",amount:"Valor",date:"Data",description:"Descrio",partnerName:"Parceiro",categoryId:"Categoria",paymentType:"Tipo de pagamento",paymentMethod:"Modo de pagamento",flowType:"Tipo de transao",mediaPointId:"Ponto de mdia"})[t]??h_(t);function fz(){const[t,s]=m.useState(""),[n,r]=m.useState("ALL"),[o,c]=m.useState("ALL"),{logs:u,loading:h,error:f}=hz({}),v=m.useMemo(()=>[...u].sort((E,S)=>new Date(S.createdAt).getTime()-new Date(E.createdAt).getTime()),[u]),x=m.useMemo(()=>{const E=new Set;return u.forEach(S=>E.add(S.resourceType)),Array.from(E.values())},[u]),g=m.useMemo(()=>{const E=new Map;u.forEach(P=>{const D=ig(P.action);E.set(P.action,{value:P.action,label:D.label,group:D.group})});const S=new Intl.Collator("pt-BR",{sensitivity:"base"});return Array.from(E.values()).sort((P,D)=>{const I=S.compare(P.group,D.group);return I!==0?I:S.compare(P.label,D.label)})},[u]),N=m.useMemo(()=>{let E=[...v];if(n!=="ALL"&&(E=E.filter(S=>S.resourceType===n)),o!=="ALL"&&(E=E.filter(S=>S.action===o)),t.trim()){const S=t.toLowerCase();E=E.filter(P=>{const D=P.details?JSON.stringify(P.details).toLowerCase():"",I=ig(P.action).label.toLowerCase(),O=(P.resourceName??"").toLowerCase(),F=(P.userName??"").toLowerCase(),X=(P.userEmail??"").toLowerCase();return P.action.toLowerCase().includes(S)||I.includes(S)||P.resourceType.toLowerCase().includes(S)||O.includes(S)||F.includes(S)||X.includes(S)||D.includes(S)})}return E},[v,n,o,t]),w=E=>{switch(E){case on.CLIENTE:return"bg-blue-100 text-blue-800";case on.PROPOSTA:return"bg-purple-100 text-purple-800";case on.CAMPANHA:return"bg-teal-100 text-teal-800";case on.RESERVA:return"bg-cyan-100 text-cyan-800";case on.MIDIA:return"bg-green-100 text-green-800";case on.FINANCEIRO:return"bg-emerald-100 text-emerald-800";case on.USUARIO:return"bg-orange-100 text-orange-800";case on.ASSINATURA:return"bg-red-100 text-red-800";case on.NF:return"bg-yellow-100 text-yellow-800";case on.INTEGRACAO:return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},j=E=>{switch(E){case on.CLIENTE:return"Cliente";case on.PROPOSTA:return"Proposta";case on.CAMPANHA:return"Campanha";case on.RESERVA:return"Reserva";case on.MIDIA:return"Mdia";case on.FINANCEIRO:return"Financeiro";case on.USUARIO:return"Usurio";case on.ASSINATURA:return"Assinatura";case on.NF:return"NF";case on.INTEGRACAO:return"Integrao";default:return E}},C=E=>new Date(E).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),k=E=>{const S=E.details;if(!S)return null;if(typeof S=="string")return e.jsx("p",{className:"text-sm text-gray-700",children:S});const P=[];Array.isArray(S.changedFields)&&S.changedFields.length&&P.push(e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Campos alterados:"}),S.changedFields.map(I=>e.jsx(st,{className:"bg-gray-100 text-gray-800",children:pz(I)},I))]},"changedFields"));const D=[{k:"message",label:"Mensagem"},{k:"filename",label:"Arquivo"},{k:"fileName",label:"Arquivo"},{k:"status",label:"Status"},{k:"count",label:"Quantidade"}];for(const I of D)S?.[I.k]!==void 0&&S?.[I.k]!==null&&!Array.isArray(S?.[I.k])&&typeof S?.[I.k]!="object"&&P.push(e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("span",{className:"font-medium",children:[I.label,":"]})," ",String(S[I.k])]},I.k));return P.length?e.jsx("div",{className:"space-y-2",children:P}):null};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Atividades"}),e.jsx("p",{className:"text-gray-600",children:"Histrico de aes realizadas no sistema"})]}),h&&e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Carregando atividades..."}),!h&&f&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:"Erro ao carregar atividades."}),e.jsx(Re,{className:"mb-6",children:e.jsx(Le,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Ne,{placeholder:"Buscar por nome, ao ou detalhes...",value:t,onChange:E=>s(E.target.value),className:"pl-10"})]}),e.jsxs(_t,{value:n,onValueChange:E=>r(E),children:[e.jsxs(Pt,{className:"w-full md:w-48",children:[e.jsx(dp,{className:"h-4 w-4 mr-2"}),e.jsx(At,{placeholder:"Recurso"})]}),e.jsxs(Et,{children:[e.jsx(De,{value:"ALL",children:"Todos os recursos"}),x.map(E=>e.jsx(De,{value:E,children:j(E)},E))]})]}),e.jsxs(_t,{value:o,onValueChange:E=>c(E),children:[e.jsxs(Pt,{className:"w-full md:w-48",children:[e.jsx(ju,{className:"h-4 w-4 mr-2"}),e.jsx(At,{placeholder:"Aes"})]}),e.jsxs(Et,{children:[e.jsx(De,{value:"ALL",children:"Todas as aes"}),e.jsx(hj,{}),(()=>{const E=new Map;return g.forEach(P=>{const D=E.get(P.group)??[];D.push(P),E.set(P.group,D)}),Array.from(E.entries()).flatMap(([P,D],I)=>{const O=[];return I>0&&O.push(e.jsx(hj,{},`${P}-sep`)),O.push(e.jsxs(jR,{children:[e.jsx(NR,{children:P}),D.map(F=>e.jsx(De,{value:F.value,children:F.label},F.value))]},P)),O})})()]})]})]})})}),e.jsx("div",{className:"space-y-4",children:N.length===0?e.jsx(Re,{children:e.jsx(Le,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma atividade encontrada com os filtros selecionados."})})}):N.map(E=>{const S=ig(E.action),P=k(E),D=(E.userName||E.userEmail||"").trim()||"Sistema";return e.jsx(Re,{className:"hover:shadow-md transition-shadow",children:e.jsx(Le,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(st,{className:w(E.resourceType),children:j(E.resourceType)}),e.jsx("div",{className:"flex flex-col",children:e.jsx("h3",{className:"text-gray-900",children:S.label})})]}),E.resourceName&&e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Referncia:"})," ",E.resourceName]}),P&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg mb-3",children:P}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Usurio: ",D]}),e.jsx("span",{children:""}),e.jsx("span",{children:C(E.createdAt)})]})]})})})},E.id)})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-1",children:" Auditoria"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Esta tela  somente leitura e mostra um histrico de aes realizadas no sistema. Use os filtros acima para encontrar rapidamente uma ao ou um recurso."})]})]})}function xz({company:t,onUpdateCompany:s,onRefreshCompany:n}){const[r,o]=m.useState(t.name),[c,u]=m.useState(t.cnpj||""),[h,f]=m.useState(t.phone||""),[v,x]=m.useState(t.email||""),[g,N]=m.useState(t.site||""),[w,j]=m.useState(t.addressZipcode||""),[C,k]=m.useState(t.addressStreet||""),[E,S]=m.useState(t.addressNumber||""),[P,D]=m.useState(t.addressDistrict||""),[I,O]=m.useState(t.addressCity||""),[F,X]=m.useState(t.addressState||""),[Q,V]=m.useState(t.addressCountry||"Brasil"),[$,R]=m.useState(t.defaultProposalNotes||""),[z,J]=m.useState(null),[ue,se]=m.useState(null),[fe,H]=m.useState(!1),[re,G]=m.useState(!1),W=U=>{if(!U)return null;const le=String(U);if(/^data:/i.test(le)||/^https?:\/\//i.test(le))return le;const Y="https://api.onemediaap.com.br/api";if(!Y.startsWith("/")){const ae=Y.replace(/\/?api\/?$/i,""),Ie=le.startsWith("/")?le:`/${le}`;return`${ae}${Ie}`}return le};m.useEffect(()=>{o(t.name),u(t.cnpj||""),f(t.phone||""),x(t.email||""),N(t.site||""),j(t.addressZipcode||""),k(t.addressStreet||""),S(t.addressNumber||""),D(t.addressDistrict||""),O(t.addressCity||""),X(t.addressState||""),V(t.addressCountry||"Brasil"),R(t.defaultProposalNotes||""),se(W(t.logoUrl)??null)},[t.id,t.updatedAt]);const ne=U=>{const le=U.target.files?.[0];if(le){if(!le.type.startsWith("image/")){ye.error("Por favor, selecione apenas arquivos de imagem.");return}const Y=5;if(le.size>Y*1024*1024){ye.error(`A imagem deve ter no mximo ${Y}MB.`);return}J(le);const ae=new FileReader;ae.onloadend=()=>{se(ae.result)},ae.readAsDataURL(le),ye.info('Logo selecionada. Clique em "Salvar Alteraes" para enviar.')}},K=async U=>{const le=new FormData;return le.append("file",U),(await Te.post("/company/logo",le,{headers:{"Content-Type":void 0}})).data?.logoUrl},ee=async()=>{if(!r.trim()){ye.error("Nome da empresa  obrigatrio");return}try{if(H(!0),z){G(!0);const U=await K(z);U&&se(W(U)),J(null),G(!1),await n()}await s({name:r.trim(),cnpj:c.trim()||void 0,phone:h.trim()||void 0,email:v.trim()||void 0,site:g.trim()||void 0,addressZipcode:w.trim()||void 0,addressStreet:C.trim()||void 0,addressNumber:E.trim()||void 0,addressDistrict:P.trim()||void 0,addressCity:I.trim()||void 0,addressState:F.trim()||void 0,addressCountry:Q.trim()||void 0,defaultProposalNotes:$.trim()||void 0}),ye.success("Dados da empresa atualizados")}catch(U){console.error(U),ye.error(U?.response?.data?.message||U?.message||"Erro ao salvar alteraes")}finally{G(!1),H(!1)}};return e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsx(Bo,{children:"Dados da Empresa (Company)"})}),e.jsxs(Le,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center overflow-hidden",children:ue?e.jsx("img",{src:ue,alt:"Logo",className:"w-full h-full object-cover"}):e.jsx(ed,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",className:"hidden",onChange:ne}),e.jsx(Z,{variant:"outline",onClick:()=>document.getElementById("logo-upload")?.click(),disabled:fe||re,children:"Alterar Logo (logoUrl)"}),z&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Arquivo: ",z.name]}),re&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-2",children:[e.jsx(aa,{className:"w-4 h-4 animate-spin"}),"Enviando logo..."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyName",children:"Nome da Empresa (name) *"}),e.jsx(Ne,{id:"companyName",value:r,onChange:U=>o(U.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(Ne,{id:"cnpj",value:c,onChange:U=>u(U.target.value),placeholder:"12.345.678/0001-90"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyPhone",children:"Telefone (phone)"}),e.jsx(Ne,{id:"companyPhone",value:h,onChange:U=>f(U.target.value),placeholder:"(11) 3000-0000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"companyEmail",children:"Email"}),e.jsx(Ne,{id:"companyEmail",type:"email",value:v,onChange:U=>x(U.target.value),placeholder:"contato@empresa.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"site",children:"Website (site)"}),e.jsx(Ne,{id:"site",value:g,onChange:U=>N(U.target.value),placeholder:"https://www.empresa.com"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"zipcode",children:"CEP (addressZipcode)"}),e.jsx(Ne,{id:"zipcode",value:w,onChange:U=>j(U.target.value),placeholder:"01310-100"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"street",children:"Logradouro (addressStreet)"}),e.jsx(Ne,{id:"street",value:C,onChange:U=>k(U.target.value),placeholder:"Av. Paulista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"number",children:"Nmero (addressNumber)"}),e.jsx(Ne,{id:"number",value:E,onChange:U=>S(U.target.value),placeholder:"1000"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(je,{htmlFor:"district",children:"Bairro (addressDistrict)"}),e.jsx(Ne,{id:"district",value:P,onChange:U=>D(U.target.value),placeholder:"Bela Vista"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"city",children:"Cidade (addressCity)"}),e.jsx(Ne,{id:"city",value:I,onChange:U=>O(U.target.value),placeholder:"So Paulo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"state",children:"Estado (addressState)"}),e.jsx(Ne,{id:"state",value:F,onChange:U=>X(U.target.value),placeholder:"SP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"country",children:"Pas (addressCountry)"}),e.jsx(Ne,{id:"country",value:Q,onChange:U=>V(U.target.value),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx(je,{htmlFor:"proposalNotes",children:"Observaes Padro para Propostas (defaultProposalNotes)"}),e.jsx(Va,{id:"proposalNotes",rows:4,value:$,onChange:U=>R(U.target.value),placeholder:"Valores sujeitos a alterao sem aviso prvio. Validade da proposta: 15 dias."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Este texto ser exibido por padro em todas as novas propostas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(Z,{onClick:ee,disabled:fe||re,children:[(fe||re)&&e.jsx(aa,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvar Alteraes"]})})]})]})}function gz({company:t,onUpdateCompany:s,onRefreshCompany:n}){const[r,o]=m.useState({type:"company"}),[c,u]=m.useState([]),[h,f]=m.useState(!1),[v,x]=m.useState(null),g=m.useMemo(()=>(c||[]).filter(C=>!C.isPrimary),[c]),N=m.useMemo(()=>r.type!=="ownerCompany"?null:g.find(C=>C.id===r.id)??null,[r,g]),w=async()=>{try{f(!0),x(null);const C=await Te.get("/owner-companies");u(C.data??[])}catch(C){console.error(C),x(C?.response?.data?.message||C?.message||"Erro ao carregar empresas proprietrias")}finally{f(!1)}};m.useEffect(()=>{w()},[]);const j=m.useMemo(()=>r.type==="company"?"company":`owner:${r.id}`,[r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsx(Bo,{children:"Empresa selecionada"})}),e.jsxs(Le,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto] gap-3 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Editar dados de"}),e.jsxs(_t,{value:j,onValueChange:C=>{if(C==="company"){o({type:"company"});return}if(C.startsWith("owner:")){const k=C.replace("owner:","");o({type:"ownerCompany",id:k})}},children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione uma empresa"})}),e.jsxs(Et,{children:[e.jsxs(De,{value:"company",children:[t.name," (Empresa principal)"]}),g.map(C=>e.jsx(De,{value:`owner:${C.id}`,children:C.name},C.id))]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Z,{variant:"outline",onClick:w,disabled:h,children:[h?e.jsx(aa,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(sd,{className:"w-4 h-4 mr-2"}),"Atualizar lista"]})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["As empresas proprietrias so cadastradas no mdulo ",e.jsx("b",{children:"Super Admin"}),". Aqui voc escolhe uma delas para editar."]}),v&&e.jsx("div",{className:"text-sm text-red-600",children:v})]})]}),r.type==="company"?e.jsx(xz,{company:t,onUpdateCompany:s,onRefreshCompany:n}):e.jsx(vz,{ownerCompany:N,onReload:w},r.id)]})}function vz({ownerCompany:t,onReload:s}){const[n,r]=m.useState(t?.name??""),[o,c]=m.useState(t?.document??""),[u,h]=m.useState(t?.email??""),[f,v]=m.useState(t?.phone??""),[x,g]=m.useState(t?.site??""),[N,w]=m.useState(t?.addressZipcode??""),[j,C]=m.useState(t?.addressStreet??""),[k,E]=m.useState(t?.addressNumber??""),[S,P]=m.useState(t?.addressDistrict??""),[D,I]=m.useState(t?.addressCity??""),[O,F]=m.useState(t?.addressState??""),[X,Q]=m.useState(t?.addressCountry??"Brasil"),[V,$]=m.useState(t?.defaultProposalNotes??""),[R,z]=m.useState(null),[J,ue]=m.useState(null),[se,fe]=m.useState(!1),[H,re]=m.useState(!1),G=U=>{if(!U)return null;const le=String(U);if(/^data:/i.test(le)||/^https?:\/\//i.test(le))return le;const Y="https://api.onemediaap.com.br/api";if(!Y.startsWith("/")){const ae=Y.replace(/\/?api\/?$/i,""),Ie=le.startsWith("/")?le:`/${le}`;return`${ae}${Ie}`}return le};m.useEffect(()=>{r(t?.name??""),c(t?.document??""),h(t?.email??""),v(t?.phone??""),g(t?.site??""),w(t?.addressZipcode??""),C(t?.addressStreet??""),E(t?.addressNumber??""),P(t?.addressDistrict??""),I(t?.addressCity??""),F(t?.addressState??""),Q(t?.addressCountry??"Brasil"),$(t?.defaultProposalNotes??""),ue(G(t?.logoUrl)??null)},[t?.id,t?.updatedAt]);const W=n.trim().length>=2,ne=U=>{const le=U.target.files?.[0];if(!le)return;if(!le.type.startsWith("image/")){ye.error("Por favor, selecione apenas arquivos de imagem.");return}const Y=5;if(le.size>Y*1024*1024){ye.error(`A imagem deve ter no mximo ${Y}MB.`);return}z(le);const ae=new FileReader;ae.onloadend=()=>ue(ae.result),ae.readAsDataURL(le),ye.info('Logo selecionada. Clique em "Salvar Alteraes" para enviar.')},K=async U=>{if(!t)return null;const le=new FormData;return le.append("file",U),(await Te.post(`/owner-companies/${t.id}/logo`,le,{headers:{"Content-Type":void 0}})).data?.logoUrl??null},ee=async()=>{if(t){if(!W){ye.error("Nome da empresa  obrigatrio");return}try{if(fe(!0),R){re(!0);const U=await K(R);U&&ue(G(U)),z(null),re(!1),await s()}await Te.put(`/owner-companies/${t.id}`,{name:n.trim(),document:o.trim()||void 0,email:u.trim()||void 0,phone:f.trim()||void 0,site:x.trim()||void 0,addressZipcode:N.trim()||void 0,addressStreet:j.trim()||void 0,addressNumber:k.trim()||void 0,addressDistrict:S.trim()||void 0,addressCity:D.trim()||void 0,addressState:O.trim()||void 0,addressCountry:X.trim()||void 0,defaultProposalNotes:V.trim()||void 0}),ye.success("Empresa proprietria atualizada"),await s()}catch(U){console.error(U),ye.error(U?.response?.data?.message||U?.message||"Erro ao salvar alteraes")}finally{re(!1),fe(!1)}}};return t?e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsx(Bo,{children:"Dados da Empresa Proprietria"})}),e.jsxs(Le,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center overflow-hidden",children:J?e.jsx("img",{src:J,alt:"Logo",className:"w-full h-full object-cover"}):e.jsx(ed,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:`owner-logo-upload-${t.id}`,accept:"image/*",className:"hidden",onChange:ne}),e.jsx(Z,{variant:"outline",onClick:()=>globalThis.document?.getElementById(`owner-logo-upload-${t.id}`)?.click(),disabled:se||H,children:"Alterar Logo (logoUrl)"}),R&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Arquivo: ",R.name]}),H&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-2",children:[e.jsx(aa,{className:"w-4 h-4 animate-spin"}),"Enviando logo..."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome da Empresa (name) *"}),e.jsx(Ne,{value:n,onChange:U=>r(U.target.value),placeholder:"Nome da empresa"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Documento (document)"}),e.jsx(Ne,{value:o,onChange:U=>c(U.target.value),placeholder:"CNPJ/CPF"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Telefone (phone)"}),e.jsx(Ne,{value:f,onChange:U=>v(U.target.value),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"E-mail"}),e.jsx(Ne,{value:u,onChange:U=>h(U.target.value),placeholder:"contato@empresa.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Website (site)"}),e.jsx(Ne,{value:x,onChange:U=>g(U.target.value),placeholder:"https://empresa.com"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-4",children:"Endereo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"CEP (addressZipcode)"}),e.jsx(Ne,{value:N,onChange:U=>w(U.target.value),placeholder:"00000-000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Logradouro (addressStreet)"}),e.jsx(Ne,{value:j,onChange:U=>C(U.target.value),placeholder:"Rua / Avenida"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nmero (addressNumber)"}),e.jsx(Ne,{value:k,onChange:U=>E(U.target.value),placeholder:"123"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Bairro (addressDistrict)"}),e.jsx(Ne,{value:S,onChange:U=>P(U.target.value),placeholder:"Centro"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Cidade (addressCity)"}),e.jsx(Ne,{value:D,onChange:U=>I(U.target.value),placeholder:"Cidade"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Estado (addressState)"}),e.jsx(Ne,{value:O,onChange:U=>F(U.target.value),placeholder:"UF"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Pas (addressCountry)"}),e.jsx(Ne,{value:X,onChange:U=>Q(U.target.value),placeholder:"Brasil"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-4",children:"Observaes Padro para Propostas (defaultProposalNotes)"}),e.jsx(Va,{value:V,onChange:U=>$(U.target.value),placeholder:"Texto padro para novas propostas",rows:4}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Este texto ser exibido por padro em todas as novas propostas"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(Z,{onClick:ee,disabled:!W||se,children:[se&&e.jsx(aa,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvar Alteraes"]})})]})]}):e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-gray-500",children:"Empresa proprietria no encontrada."})})}function yz(t,s=!1){return(s?t/100:t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function jN(t){switch(t){case ir.TESTE:return"Teste";case ir.ATIVA:return"Ativa";case ir.EM_ATRASO:return"Em atraso";case ir.CANCELADA:return"Cancelada";default:return String(t)}}function bz({company:t,subscription:s,plans:n,plansLoading:r,pointsUsed:o,onUpdateSubscription:c}){const u=m.useMemo(()=>n.find(V=>V.id===s.planId)||null,[n,s.planId]),[h,f]=m.useState(s.planId),[v,x]=m.useState(s.maxOwnersPerMediaPoint||1),[g,N]=m.useState(!1),w=m.useMemo(()=>n.find(V=>V.id===h)||null,[n,h]),j=w?.maxPoints??null,C=j==null?"Ilimitado":String(j),k=j==null?0:Math.min(100,Math.round(o/j*100)),E=h!==s.planId||v!==s.maxOwnersPerMediaPoint,S=j==null?!0:o<=j,P=w?.monthlyPrice??0,D=P>=1e4,I=D?Aw(v):wD(v),O=P+I,F=async()=>{if(!w){alert("Selecione um plano vlido.");return}if(!S){alert(`Voc possui ${o} pontos cadastrados. Para escolher este plano (${C}), exclua pontos ou selecione um plano maior.`);return}try{N(!0),await c({planId:h,maxOwnersPerMediaPoint:v}),alert("Assinatura atualizada com sucesso.")}catch(V){alert(V?.response?.data?.message||"Erro ao atualizar assinatura.")}finally{N(!1)}},X=s.status,Q=X===ir.ATIVA||X===ir.TESTE;return e.jsx("div",{className:"space-y-6",children:e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsxs(Bo,{className:"flex items-center gap-2",children:[e.jsx(ak,{className:"w-5 h-5"}),"Plano e Limites"]})}),e.jsxs(Le,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:Q?e.jsxs(st,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:[e.jsx(Oi,{className:"w-3 h-3 mr-1"}),jN(X)]}):e.jsxs(st,{variant:"destructive",children:[e.jsx(xu,{className:"w-3 h-3 mr-1"}),jN(X)]})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Plano atual"}),e.jsx("div",{className:"font-medium",children:u?.name||""})]})]}),e.jsx(Re,{className:"border-gray-200",children:e.jsxs(Le,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(uw,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Uso de pontos (limite por conta)"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[o," / ",C]})]}),j!=null&&e.jsx(a_,{value:k}),e.jsxs("div",{className:"text-xs text-gray-500",children:["O limite de pontos  sempre da ",e.jsx("b",{children:"conta"}),", independentemente da quantidade de proprietrios."]})]})}),e.jsx(Re,{className:"border-gray-200",children:e.jsxs(Le,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Selecione seu plano de pontos"}),e.jsxs(_t,{value:h,onValueChange:f,children:[e.jsx(Pt,{disabled:!!r,children:e.jsx(At,{placeholder:r?"Carregando planos...":"Selecione um plano"})}),e.jsx(Et,{children:n.map(V=>{const $=V.maxPoints==null?V.name:`${V.name} (${V.minPoints??0}-${V.maxPoints} pontos)`;return e.jsx(De,{value:V.id,children:$},V.id)})})]}),!S&&e.jsxs("div",{className:"text-xs text-red-600",children:["Este plano  menor que a quantidade de pontos j cadastrados (",o,")."]})]})}),e.jsx(Re,{className:"border-gray-200",children:e.jsxs(Le,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Assinatura multi-proprietrios (limite por ponto)"}),e.jsxs(_t,{value:String(v),onValueChange:V=>x(parseInt(V,10)),children:[e.jsx(Pt,{children:e.jsx(At,{placeholder:"Selecione"})}),e.jsx(Et,{children:[1,2,3,4].map(V=>e.jsx(De,{value:String(V),children:CD(V)},V))})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Esse limite  aplicado em cada ponto de mdia (ex.: 2 proprietrios por ponto).",e.jsx("br",{}),"Voc pode cadastrar empresas proprietrias ilimitadas no Super Admin."]})]})}),e.jsx(Re,{className:"border-amber-200 bg-amber-50",children:e.jsxs(Le,{className:"p-4 text-sm text-amber-900",children:[e.jsx("b",{children:"Pagamento ainda no integrado."})," Este fluxo j est preparado para integrao futura: ao salvar, o backend valida downgrade (pontos e proprietrios por ponto) e persiste o plano.",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"(TODO: integrar gateway e prorrateio)"})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap pt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total mensal (estimado)"}),e.jsx("div",{className:"text-lg font-semibold",children:yz(O,D)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Plano de pontos + assinatura multi-proprietrios."})]}),e.jsx(Z,{onClick:F,disabled:!E||g||!!r,children:g?e.jsxs(e.Fragment,{children:[e.jsx(aa,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Atualizar assinatura"})]})]})]})})}function jz(){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:"Perfil do usurio"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Em breve: configuraes de perfil (senha, 2FA, preferncias) sero disponibilizadas aqui."})]})}function Nz(){const[t,s]=m.useState([]),[n,r]=m.useState(!1),[o,c]=m.useState(null),u=async()=>{try{r(!0),c(null);const f=(await Te.get("/platform-plans")).data,v=Array.isArray(f)?f:f.data;s(v)}catch(h){c(h)}finally{r(!1)}};return m.useEffect(()=>{u()},[]),{plans:t,loading:n,error:o,refetch:u}}const wz=()=>{if(typeof window>"u")return"company";const t=new URLSearchParams(window.location.search).get("tab");return t==="subscription"||t==="company"||t==="profile"?t:"company"};function Cz(){const{company:t,subscription:s,pointsUsed:n,updateCompanyData:r,updateSubscriptionData:o,refreshCompanyData:c,isLoading:u}=Fo(),{plans:h,loading:f,error:v}=Nz(),[x,g]=m.useState(wz),N=typeof window>"u"?"":window.location.search;return m.useEffect(()=>{const w=new URLSearchParams(N).get("tab");(w==="subscription"||w==="company"||w==="profile")&&g(w)},[N]),u?e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-gray-500",children:"Carregando configuraes..."})}):!t||!s?e.jsx(Re,{children:e.jsx(Le,{className:"p-6 text-center text-gray-500",children:"No foi possvel carregar os dados da empresa."})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsx(Bo,{children:"Configuraes"})}),e.jsx(Le,{children:e.jsxs(zi,{value:x,onValueChange:g,children:[e.jsxs(Bi,{className:"grid w-full grid-cols-3",children:[e.jsx(cs,{value:"company",children:"Empresa"}),e.jsx(cs,{value:"subscription",children:"Assinatura"}),e.jsx(cs,{value:"profile",children:"Perfil"})]}),e.jsx(As,{value:"company",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsx(gz,{company:t,onUpdateCompany:r,onRefreshCompany:c})})}),e.jsxs(As,{value:"subscription",className:"mt-6",children:[v&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:String(v)}),e.jsx(bz,{company:t,subscription:s,plans:h,plansLoading:f,pointsUsed:n,onUpdateSubscription:async w=>{await o(w)}})]}),e.jsx(As,{value:"profile",className:"mt-6",children:e.jsx(jz,{})})]})})]})})}function Sz(){const{ownerCompanies:t,loading:s,error:n,refetch:r,createOwnerCompany:o,updateOwnerCompany:c,deleteOwnerCompany:u}=gS(!0),[h,f]=m.useState(""),[v,x]=m.useState(!1),[g,N]=m.useState(null),w=m.useMemo(()=>{const j=h.trim().toLowerCase();return j?t.filter(C=>C.name.toLowerCase().includes(j)||(C.document??"").toLowerCase().includes(j)||(C.email??"").toLowerCase().includes(j)||(C.phone??"").toLowerCase().includes(j)):t},[t,h]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Re,{children:[e.jsx(zo,{children:e.jsx(Bo,{children:"Super Admin (Interno)  Empresas Proprietrias"})}),e.jsxs(Le,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Aqui voc cadastra empresas proprietrias que podero ser vinculadas aos pontos do inventrio.",e.jsx("br",{}),e.jsx("b",{children:"No h limite"})," de empresas proprietrias na conta. O limite da assinatura multi-proprietrios  apenas a ",e.jsx("b",{children:"quantidade de proprietrios por ponto"}),"."]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Ne,{placeholder:"Buscar por nome, documento, e-mail ou telefone",value:h,onChange:j=>f(j.target.value),className:"max-w-md"}),e.jsxs(Z,{variant:"outline",onClick:r,disabled:s,children:[e.jsx(sd,{className:"w-4 h-4 mr-2"}),"Atualizar"]}),e.jsxs(Z,{onClick:()=>{N(null),x(!0)},children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"Nova empresa"]})]}),n&&e.jsx("div",{className:"text-sm text-red-600",children:String(n)}),s&&e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."}),!s&&w.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma empresa encontrada."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.map(j=>e.jsx(Re,{className:j.isPrimary?"border-blue-200 bg-blue-50/40":"",children:e.jsx(Le,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:j.name}),j.isPrimary&&e.jsx(st,{variant:"secondary",children:"Empresa prpria"})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-x-4 gap-y-1",children:[j.document&&e.jsxs("span",{children:["Doc: ",j.document]}),j.email&&e.jsxs("span",{children:["E-mail: ",j.email]}),j.phone&&e.jsxs("span",{children:["Tel: ",j.phone]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{N(j),x(!0)},disabled:j.isPrimary,title:j.isPrimary?"Edite a empresa principal em Configuraes > Empresa":"Editar",children:e.jsx(Jg,{className:"w-4 h-4"})}),e.jsx(Z,{variant:"outline",size:"sm",onClick:async()=>{if(!j.isPrimary&&confirm(`Excluir a empresa "${j.name}"?`))try{await u(j.id)}catch(C){alert(C?.response?.data?.message||"Erro ao excluir.")}},disabled:j.isPrimary,title:j.isPrimary?"A empresa principal no pode ser excluda":"Excluir",children:e.jsx(Ba,{className:"w-4 h-4"})})]})]})})},j.id))})]})]}),e.jsx(_z,{open:v,onOpenChange:j=>x(j),editing:g,onSubmit:async j=>{try{g?await c(g.id,j):await o(j),x(!1),N(null)}catch(C){alert(C?.response?.data?.message||"Erro ao salvar.")}}})]})}function _z({open:t,onOpenChange:s,editing:n,onSubmit:r}){const[o,c]=m.useState(n?.name??""),[u,h]=m.useState(n?.document??""),[f,v]=m.useState(n?.email??""),[x,g]=m.useState(n?.phone??"");m.useEffect(()=>{t&&(c(n?.name??""),h(n?.document??""),v(n?.email??""),g(n?.phone??""))},[t,n]);const N=o.trim().length>=2;return e.jsx(Ps,{open:t,onOpenChange:s,children:e.jsxs(Es,{className:"max-w-lg",children:[e.jsx(Os,{children:e.jsx(Ls,{children:n?"Editar empresa proprietria":"Nova empresa proprietria"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Nome *"}),e.jsx(Ne,{value:o,onChange:w=>c(w.target.value),placeholder:"Ex: Prefeitura de ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Documento"}),e.jsx(Ne,{value:u,onChange:w=>h(w.target.value),placeholder:"CNPJ/CPF"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"Telefone"}),e.jsx(Ne,{value:x,onChange:w=>g(w.target.value),placeholder:"(11) 99999-9999"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{children:"E-mail"}),e.jsx(Ne,{value:f,onChange:w=>v(w.target.value),placeholder:"contato@empresa.com"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(Z,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),e.jsx(Z,{onClick:()=>r({name:o.trim(),document:u.trim()||void 0,email:f.trim()||void 0,phone:x.trim()||void 0}),disabled:!N,children:n?"Salvar":"Criar"})]})]})]})})}class Az extends m.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s){console.error("Error in page render:",s)}render(){return this.state.hasError?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"border border-red-200 rounded-lg bg-red-50 p-6",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Ocorreu um erro ao abrir esta pgina."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Abra o console (F12) para ver detalhes."}),e.jsx("button",{type:"button",onClick:()=>{this.setState({hasError:!1,error:void 0}),this.props.onReset?.()},className:"px-3 py-2 rounded bg-white border",children:"Tentar novamente"})]})}):this.props.children}}function NN({initialPage:t="dashboard"}){const[s,n]=m.useState(t);m.useEffect(()=>{n(t)},[t]);const[r,o]=m.useState(!1);m.useEffect(()=>{n(t)},[t]);const{user:c,logout:u,authReady:h}=Fl(),f=Jt(),{isBlocked:v,blockMessage:x,isTrialEndingSoon:g,daysRemainingInTrial:N,subscription:w}=Fo(),j=m.useMemo(()=>{if(v||!w||String(w.status)!=="EM_ATRASO"||!w.currentPeriodEnd)return null;const S=new Date(w.currentPeriodEnd);if(Number.isNaN(S.getTime()))return null;const P=1440*60*1e3,I=S.getTime()+3*P-Date.now();return I<=0?0:Math.ceil(I/P)},[v,w?.status,w?.currentPeriodEnd]);if(m.useEffect(()=>{h&&!c&&f("/login")},[h,c,f]),!h)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando..."})});if(!c)return e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50 p-6",children:e.jsxs("div",{className:"w-full max-w-md bg-white border border-gray-200 rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-gray-900 mb-2",children:"Sua sesso expirou."}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Voc precisa entrar novamente para continuar."}),e.jsx("button",{type:"button",onClick:()=>f("/login"),className:"w-full px-4 py-2 rounded-lg bg-[#4F46E5] text-white hover:opacity-95",children:"Ir para o login"})]})});const C=()=>{n("settings"),o(!1),f("/app/settings?tab=subscription")},k=S=>{n(S),o(!1)},E=()=>{switch(s){case"dashboard":return e.jsx(Fj,{onNavigate:k});case"inventory":return e.jsx(rF,{});case"mediamap":return e.jsx(qF,{});case"clients":return e.jsx(w8,{});case"products":return e.jsx(r$,{});case"proposals":return e.jsx(R$,{onNavigate:k});case"campaigns":return e.jsx(H$,{});case"reservations":return e.jsx(Q$,{});case"financial":return e.jsx(oz,{});case"messages":return e.jsx(mz,{});case"mediakit":return e.jsx(K2,{});case"activities":return e.jsx(fz,{});case"settings":return e.jsx(Cz,{});case"superadmin":return e.jsx(Sz,{});default:return e.jsx(Fj,{onNavigate:k})}};return e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(kj,{currentPage:s,onNavigate:k,isSuperAdmin:!!c?.isSuperAdmin})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>o(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 transform transition-transform duration-300 ease-in-out md:hidden ${r?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg z-10",children:e.jsx(Na,{className:"w-6 h-6"})}),e.jsx(kj,{currentPage:s,onNavigate:k,isSuperAdmin:!!c?.isSuperAdmin,isMobile:!0})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 md:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 md:hidden",children:[e.jsx("button",{onClick:()=>o(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(Yg,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4F46E5] rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"OOH"})}),e.jsx("span",{className:"text-lg text-gray-900",children:"OneMedia"})]})]}),e.jsx("div",{className:"hidden md:block flex-1"}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm text-gray-900",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500 hidden md:block",children:c.email})]}),e.jsx("button",{onClick:u,className:"px-3 md:px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Sair"})]})]})}),(v||g||j!==null&&j>0)&&e.jsx("div",{className:"px-4 md:px-8 py-3 border-b "+(v?"bg-red-50 border-red-200":"bg-amber-50 border-amber-200"),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("div",{className:"text-sm",children:v?e.jsx("span",{className:"text-red-700",children:x??"Sua conta est com acesso restrito."}):j!==null&&j>0?e.jsxs("span",{className:"text-amber-800",children:["No identificamos o pagamento da renovao. Voc tem ",j," dia(s) para regularizar antes do bloqueio total."]}):e.jsxs("span",{className:"text-amber-800",children:["Seu perodo de teste termina em ",N??0," dia(s). Assine um plano para no ser bloqueado."]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:C,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(v?"bg-red-600 text-white hover:opacity-95":"bg-amber-600 text-white hover:opacity-95"),children:v?"Regularizar assinatura":"Ver planos"})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx(Az,{onReset:()=>window.dispatchEvent(new Event("app:navigation")),children:E()})})]})]})}class Pz extends m.Component{state={hasError:!1,message:""};static getDerivedStateFromError(s){return{hasError:!0,message:s instanceof Error?s.message:"Erro inesperado"}}componentDidCatch(s){console.error("Root render crashed:",s)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-white px-6",children:e.jsxs("div",{className:"max-w-lg w-full rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Algo deu errado ao carregar o app"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Isso pode acontecer aps uma atualizao quando o navegador/CDN entrega arquivos em cache."}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 break-words",children:this.state.message}),e.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Recarregar"}),e.jsx("button",{className:"inline-flex items-center justify-center rounded-xl border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-800 hover:bg-gray-50",onClick:()=>window.location.href="/?clearcache=1",children:"Limpar cache e abrir o site"})]})]})}):this.props.children}}function Ez(){const t=()=>window.location.pathname+window.location.search,[s,n]=m.useState(t()),r=()=>{const u=window.innerWidth||document.documentElement.clientWidth,h=navigator.userAgent||navigator.vendor;return u<=768||/Android|iPhone|iPad|iPod|Windows Phone|webOS|BlackBerry/i.test(h)};m.useEffect(()=>{const u=()=>{n(t())};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]);const o=u=>{t()!==u&&(window.history.pushState({},"",u),n(u),window.scrollTo(0,0))};m.useEffect(()=>{(t().split("?")[0].replace(/\/$/,"")||"/")==="/"&&r()&&o("/landing-mobile")},[s]);const c=()=>{const u=s.split("?")[0].replace(/\/$/,"")||"/";if(u.startsWith("/p/"))return e.jsx(oT,{});if(u==="/mk")return e.jsx($3,{});if(u==="/menu")return e.jsx(U3,{});if(u==="/menu/uf")return e.jsx(Q3,{});if(u==="/menu/cidades")return e.jsx(Y3,{});if(u==="/menu/pontos")return e.jsx(nO,{});if(u==="/menu/detalhe")return e.jsx(mO,{});if(u==="/menu/faces")return e.jsx(hO,{});if(u==="/menu/carrinho")return e.jsx(pO,{});if(u==="/menu/checkout")return e.jsx(SO,{});if(u==="/menu/enviado")return e.jsx(_O,{});if(u==="/menu/acompanhar")return e.jsx(PO,{});if(u==="/menu/proposta")return e.jsx(DO,{});if(u==="/menu/dono")return e.jsx(MO,{});if(u==="/menu/dono/enviada")return e.jsx(RO,{});if(u==="/menu/dono/revisao")return e.jsx(FO,{});if(u==="/menu/dono/aprovada")return e.jsx(BO,{});if(u.startsWith("/app")){const h=u.replace("/app/","").replace("/app","");return!h||h===""?e.jsx(NN,{initialPage:"dashboard"}):e.jsx(NN,{initialPage:h})}switch(u){case"/":return e.jsx(Mb,{});case"/signup":case"/cadastro":return e.jsx(RD,{});case"/planos":return e.jsx(rT,{});case"/landing-mobile":return e.jsx(aT,{});case"/login":return e.jsx($D,{});case"/forgot-password":return e.jsx(UD,{});case"/reset-password":return e.jsx(VD,{});case"/verify-email":return e.jsx(BD,{});case"/oauth-callback":return e.jsx(UO,{});case"/dashboard":return e.jsx(HD,{});case"/contato":return e.jsx(qD,{});case"/termos":return e.jsx(WD,{});case"/privacidade":return e.jsx(ZD,{});default:return o("/"),e.jsx(Mb,{})}};return e.jsx(Pz,{children:e.jsx(Q2.Provider,{value:o,children:e.jsx(pE,{children:e.jsx(xE,{children:e.jsxs(yE,{children:[c(),e.jsx(IA,{richColors:!0,position:"top-right"})]})})})})})}const og="app_version",wN="cache_rescue_for_version";function p_(t){t.pathname==="/app"&&(t.pathname="/app/")}function kz(t){try{const s=new URL(window.location.href);if(p_(s),s.searchParams.get("v")===t)return;s.searchParams.set("v",t),window.history.replaceState(null,"",s.toString())}catch{}}function Dz(t){try{const s=new URL(window.location.href);p_(s),s.searchParams.set("v",t),window.location.replace(s.toString())}catch{window.location.reload()}}async function f_(){if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistrations();await Promise.all(t.map(s=>s.unregister()))}catch{}if("caches"in window)try{const t=await caches.keys();await Promise.all(t.map(s=>caches.delete(s)))}catch{}}async function Tz(){try{const t=new URL(window.location.href);if(t.searchParams.get("clearcache")!=="1")return;t.searchParams.delete("clearcache"),window.history.replaceState({},"",t.toString()),await f_(),window.location.reload()}catch{}}async function x_(){try{const t=await fetch(`/version.json?ts=${Date.now()}`,{cache:"no-store"});if(!t.ok)return;const n=(await t.json())?.version;if(!n)return;kz(n);const r=localStorage.getItem(og);if(!r){localStorage.setItem(og,n);return}r!==n&&(localStorage.getItem(wN)!==n&&(await f_(),localStorage.setItem(wN,n)),localStorage.setItem(og,n),Dz(n))}catch{}}Tz();x_();document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&x_()});iA.createRoot(document.getElementById("root")).render(e.jsx(Ez,{}));
